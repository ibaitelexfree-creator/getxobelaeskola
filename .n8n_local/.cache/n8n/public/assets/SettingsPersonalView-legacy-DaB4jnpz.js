!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./auth.eventBus-legacy-CATYGUiE.js","./sso.store-legacy-B2e5Mjw4.js"],(function(e,t){var a,s,l,n,i,o,r,d,u,c,m,f,b,p,g,_,v,y,h,x,T,w,z,M,E,C,k,j,N,S,I,U,$,D,P,V,A,B,L,O,R,q,F,H,J,G,Y,Z,K,Q,W,X,ee,te,ae,se,le;return{setters:[function(e){a=e.C,s=e.Cn,l=e.D,n=e.E,i=e.Gt,o=e.It,r=e.J,d=e.M,u=e.P,c=e.T,m=e.Z,f=e._,b=e.bt,p=e.et,g=e.it,_=e.j,v=e.vn,y=e.w},function(e){h=e.yt},function(e){x=e.Hi,T=e.Oi,w=e.U,z=e.Vi,M=e.ft,E=e.gi,C=e.gt,k=e.it,j=e.ot,N=e.pt,S=e.wt,I=e.zi},function(e){U=e.t},function(e){},function(e){$=e.fn,D=e.lr,P=e.r,V=e.t,A=e.ws,B=e.yr},function(e){L=e.Ts,O=e.cs,R=e.os,q=e.ti,F=e.v,H=e.ys},function(e){},function(e){},function(e){},function(e){},function(e){J=e.r,G=e.t},function(e){Y=e.n}],execute:function(){(Z=document.createElement("style")).textContent="._container_7zt8s_125{padding-bottom:100px}._container_7zt8s_125>*{margin-bottom:var(--spacing--2xl)}._header_7zt8s_132{white-space:nowrap;align-items:center;display:flex}._header_7zt8s_132 :first-child{flex-grow:1}._user_7zt8s_141{align-items:center;display:flex}@media (max-width:600px){._user_7zt8s_141{display:none}}._username_7zt8s_151{margin-right:var(--spacing--sm);grid-template-columns:1fr;display:grid}@media (max-width:992px){._username_7zt8s_151{text-overflow:ellipsis;max-width:100px;overflow:hidden}}._tooltip_7zt8s_164{justify-self:start}._disableMfaButton_7zt8s_168>span{font-weight:var(--font-weight--bold)}._button_7zt8s_172{font-size:var(--spacing--xs)}._button_7zt8s_172>span{font-weight:var(--font-weight--bold)}._infoText_7zt8s_179{font-size:var(--font-size--2xs);color:var(--color--text--tint-1)}._themeSelect_7zt8s_184{max-width:50%}\n/*$vite$:1*/",document.head.appendChild(Z);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(ne=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[ne]="ac46f876-8a39-4bae-9e8d-ee6d1fa2943e",t._sentryDebugIdIdentifier="sentry-dbid-ac46f876-8a39-4bae-9e8d-ee6d1fa2943e")}catch(t){}var t,ne;K={class:"mb-s"},Q={"data-test-id":"personal-data-form"},W={key:0},X={class:"mb-s"},ee={class:"mb-s"},te={key:0,"data-test-id":"mfa-section"},ae={class:"mb-xs"},se={class:"mb-s"},le=u({__name:"SettingsPersonalView",setup(e){const u=h(),{showToast:U,showError:Z}=B(),le=$(),ne=o(!1),ie=o(null),oe=C(),re=o(!1),de=o(P().theme),ue=o([{name:"system",label:"settings.personal.theme.systemDefault"},{name:"light",label:"settings.personal.theme.light"},{name:"dark",label:"settings.personal.theme.dark"}]),ce=P(),me=V(),fe=A(),be=Y(),pe=D(),ge=a((()=>me.currentUser)),_e=a((()=>{const e=be.isEnterpriseLdapEnabled&&"ldap"===ge.value?.signInType,t=be.isSamlLoginEnabled&&be.isDefaultAuthenticationSaml,a=be.isEnterpriseOidcEnabled&&"oidc"===ge.value?.signInType;return e||t||a})),ve=a((()=>me.isInstanceOwner||!_e.value)),ye=a((()=>!me.mfaEnabled)),he=a((()=>fe.isMFAEnforced)),xe=a((()=>fe.isMfaFeatureEnabled)),Te=a((()=>de.value!==ce.theme)),we=a((()=>ne.value||Te.value)),ze=a((()=>({[q.Default]:{name:u.baseText("auth.roles.default"),description:u.baseText("settings.personal.role.tooltip.default")},[q.Member]:{name:u.baseText("auth.roles.member"),description:u.baseText("settings.personal.role.tooltip.member")},[q.ChatUser]:{name:u.baseText("auth.roles.chatUser"),description:u.baseText("settings.personal.role.tooltip.chatUser")},[q.Admin]:{name:u.baseText("auth.roles.admin"),description:u.baseText("settings.personal.role.tooltip.admin")},[q.Owner]:{name:u.baseText("auth.roles.owner"),description:u.baseText("settings.personal.role.tooltip.owner",{interpolate:{cloudAccess:pe.hasCloudPlan?u.baseText("settings.personal.role.tooltip.cloud"):""}})}}))),Me=a((()=>ze.value[me.globalRoleName]));function Ee(){ne.value=!0}function Ce(e){re.value=e}async function ke(e){try{await async function(e){ne.value&&me.currentUserId&&(await me.updateUser({firstName:e.firstName,lastName:e.lastName,email:e.email,mfaCode:e.mfaCode,currentPassword:e.currentPassword}),ne.value=!1)}(e),await async function(){Te.value&&ce.setTheme(de.value)}(),U({title:u.baseText("settings.personal.personalSettingsUpdated"),message:"",type:"success"})}catch(t){Z(t,u.baseText("settings.personal.personalSettingsUpdatedError"))}}async function je(e){const t=e,a=me.currentUser?.email!==t.email;me.currentUser?.mfaEnabled&&a?(ce.openModal(L),J.once("closed",(async e=>{e&&await ke({...t,mfaCode:e.mfaCode})}))):a?(ce.openModal(O),G.once("close",(async e=>{e&&(await ke({...t,currentPassword:e.currentPassword}),ce.closeModal(O))}))):await ke(t)}function Ne(){oe.emit("submit")}function Se(){ce.openModal(R)}async function Ie(){if(fe.isCloudDeployment&&me.isInstanceOwner)try{await me.canEnableMFA(),ce.openModal(H)}catch(t){U({title:u.baseText("settings.personal.mfa.toast.canEnableMfa.title"),message:t.message,type:"error"}),await me.sendConfirmationEmail()}else ce.openModal(H)}async function Ue(e){if(e)try{await me.disableMfa(e),U({title:u.baseText("settings.personal.mfa.toast.disabledMfa.title"),message:u.baseText("settings.personal.mfa.toast.disabledMfa.message"),type:"success",duration:0})}catch(t){Z(t,u.baseText("settings.personal.mfa.toast.disabledMfa.error.message"))}}async function $e(){ce.openModal(L),J.once("closed",Ue)}return m((()=>{le.set(u.baseText("settings.personal.personalSettings")),ie.value=[{name:"firstName",initialValue:ge.value?.firstName,properties:{label:u.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0,disabled:_e.value}},{name:"lastName",initialValue:ge.value?.lastName,properties:{label:u.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0,disabled:_e.value}},{name:"email",initialValue:ge.value?.email,properties:{label:u.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0,disabled:!ve.value}}]})),r((()=>{J.off("closed",Ue)})),(e,t)=>(p(),l("div",{class:v(e.$style.container),"data-test-id":"personal-settings-container"},[y("div",{class:v(e.$style.header)},[d(i(I),{size:"2xlarge"},{default:b((()=>[_(s(i(u).baseText("settings.personal.personalSettings")),1)])),_:1}),ge.value?(p(),l("div",{key:0,class:v(e.$style.user)},[y("span",{class:v(e.$style.username),"data-test-id":"current-user-name"},[d(i(z),{color:"text-base",bold:""},{default:b((()=>[_(s(ge.value.fullName),1)])),_:1}),d(i(T),{placement:"bottom"},{content:b((()=>[_(s(Me.value.description),1)])),default:b((()=>[d(i(z),{class:v(e.$style.tooltip),color:"text-light","data-test-id":"current-user-role"},{default:b((()=>[_(s(Me.value.name),1)])),_:1},8,["class"])])),_:1})],2),d(i(S),{"first-name":ge.value.firstName,"last-name":ge.value.lastName,size:"large"},null,8,["first-name","last-name"])],2)):n("",!0)],2),y("div",null,[y("div",K,[d(i(I),{size:"large"},{default:b((()=>[_(s(i(u).baseText("settings.personal.basicInformation")),1)])),_:1})]),y("div",Q,[ie.value?(p(),c(i(k),{key:0,inputs:ie.value,"event-bus":i(oe),onUpdate:Ee,onReady:Ce,onSubmit:je},null,8,["inputs","event-bus"])):n("",!0)])]),ve.value?(p(),l("div",W,[y("div",X,[d(i(I),{size:"large"},{default:b((()=>[_(s(i(u).baseText("settings.personal.security")),1)])),_:1})]),y("div",ee,[d(i(j),{label:i(u).baseText("auth.password")},{default:b((()=>[d(i(E),{"data-test-id":"change-password-link",onClick:Se},{default:b((()=>[_(s(i(u).baseText("auth.changePassword")),1)])),_:1})])),_:1},8,["label"])]),xe.value?(p(),l("div",te,[y("div",ae,[d(i(j),{label:i(u).baseText("settings.personal.mfa.section.title")},null,8,["label"]),d(i(z),{bold:!1,class:v(e.$style.infoText)},{default:b((()=>[_(s(ye.value?i(u).baseText("settings.personal.mfa.button.disabled.infobox"):i(u).baseText("settings.personal.mfa.button.enabled.infobox"))+" ",1),d(i(E),{to:i(F),size:"small",bold:!0},{default:b((()=>[_(s(i(u).baseText("generic.learnMore")),1)])),_:1},8,["to"])])),_:1},8,["class"])]),ye.value&&he.value?(p(),c(i(w),{key:0,content:i(u).baseText("settings.personal.mfa.enforced")},null,8,["content"])):n("",!0),ye.value?(p(),c(i(x),{key:1,variant:"subtle",class:v(e.$style.button),label:i(u).baseText("settings.personal.mfa.button.enabled"),"data-test-id":"enable-mfa-button",onClick:Ie},null,8,["class","label"])):(p(),c(i(x),{key:2,variant:"subtle",class:v(e.$style.disableMfaButton),label:i(u).baseText("settings.personal.mfa.button.disabled"),"data-test-id":"disable-mfa-button",onClick:$e},null,8,["class","label"]))])):n("",!0)])):n("",!0),y("div",null,[y("div",se,[d(i(I),{size:"large"},{default:b((()=>[_(s(i(u).baseText("settings.personal.personalisation")),1)])),_:1})]),y("div",null,[d(i(j),{label:i(u).baseText("settings.personal.theme")},{default:b((()=>[d(i(M),{modelValue:de.value,"onUpdate:modelValue":t[0]||(t[0]=e=>de.value=e),class:v(e.$style.themeSelect),"data-test-id":"theme-select",size:"small",filterable:""},{default:b((()=>[(p(!0),l(f,null,g(ue.value,(e=>(p(),c(i(N),{key:e.name,label:i(u).baseText(e.label),value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","class"])])),_:1},8,["label"])])]),y("div",null,[d(i(x),{float:"right",label:i(u).baseText("settings.personal.save"),size:"large",disabled:!we.value||!re.value,"data-test-id":"save-settings-button",onClick:Ne},null,8,["label","disabled"])])],2))}}),e("default",U(le,[["__cssModules",{$style:{container:"_container_7zt8s_125",header:"_header_7zt8s_132",user:"_user_7zt8s_141",username:"_username_7zt8s_151",tooltip:"_tooltip_7zt8s_164",disableMfaButton:"_disableMfaButton_7zt8s_168",button:"_button_7zt8s_172",infoText:"_infoText_7zt8s_179",themeSelect:"_themeSelect_7zt8s_184"}}]]))}}}));
//# sourceMappingURL=SettingsPersonalView-legacy-DaB4jnpz.js.map