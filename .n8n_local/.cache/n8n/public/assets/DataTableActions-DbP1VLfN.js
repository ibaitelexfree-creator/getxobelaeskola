(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`96f33311-0f34-4338-a2b3-398f0b95e03c`,e._sentryDebugIdIdentifier=`sentry-dbid-96f33311-0f34-4338-a2b3-398f0b95e03c`)})()}catch{}import{C as e,D as t,Gt as n,It as r,M as i,P as a,T as o,bt as s,et as c,vn as l,w as u}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as d}from"./_MapCache-DjbOQyB7.js";import{Hi as f,Tt as p,st as m}from"./src-CppJvwzX.js";import{t as h}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Lt as g,Tr as _,r as v,yr as y}from"./users.store-pCkD7Zo0.js";import{Fr as b,Gr as x,Ss as S}from"./constants-D1jZwsUK.js";import{t as C}from"./dataTable.store-dy4dvFXe.js";import{t as w}from"./Modal-DQeDdfPI.js";var T=h(a({__name:`DownloadDataTableModal`,props:{modalName:{},dataTableName:{}},emits:[`confirm`,`close`],setup(e,{emit:t}){let a=e,p=t,h=d(),g=r(!1),_=()=>{p(`confirm`,g.value)};return(e,t)=>(c(),o(w,{name:a.modalName,title:n(h).baseText(`dataTable.download.modal.title`),center:!0,width:`460px`,"event-bus":void 0,onEnter:_},{content:s(()=>[u(`div`,{class:l(e.$style.content)},[i(n(m),{modelValue:g.value,"onUpdate:modelValue":t[0]||=e=>g.value=e,label:n(h).baseText(`dataTable.download.modal.includeSystemColumns`),"data-test-id":`download-include-system-columns`},null,8,[`modelValue`,`label`])],2)]),footer:s(()=>[u(`div`,{class:l(e.$style.footer)},[i(n(f),{type:`secondary`,size:`large`,label:n(h).baseText(`dataTable.download.modal.cancel`),"data-test-id":`download-modal-cancel`,onClick:t[1]||=()=>e.$emit(`close`)},null,8,[`label`]),i(n(f),{size:`large`,label:n(h).baseText(`dataTable.download.modal.confirm`),"data-test-id":`download-modal-confirm`,onClick:_},null,8,[`label`])],2)]),_:1},8,[`name`,`title`]))}}),[[`__cssModules`,{$style:{content:`_content_10b6w_125`,footer:`_footer_10b6w_129`}}]]),E=a({__name:`DataTableActions`,props:{dataTable:{},isReadOnly:{type:Boolean,default:!1},location:{}},emits:[`rename`,`onDeleted`],setup(r,{emit:a}){let o=r,s=a,l=C(),u=v(),f=d(),m=_(),h=y(),S=g(),w=e(()=>{let e=[{label:f.baseText(`dataTable.download.csv`),value:b.DOWNLOAD_CSV,disabled:!1},{label:f.baseText(`generic.delete`),value:b.DELETE,disabled:!l.projectPermissions.dataTable.delete||o.isReadOnly}];return o.location===`breadcrumbs`&&e.unshift({label:f.baseText(`generic.rename`),value:b.RENAME,disabled:!l.projectPermissions.dataTable.update||o.isReadOnly}),e}),E=async e=>{switch(e){case b.RENAME:s(`rename`,{dataTable:o.dataTable,action:`rename`});break;case b.DOWNLOAD_CSV:u.openModal(x);break;case b.DELETE:await m.confirm(f.baseText(`dataTable.delete.confirm.message`,{interpolate:{name:o.dataTable.name}}),f.baseText(`dataTable.delete.confirm.title`),{confirmButtonText:f.baseText(`generic.delete`),cancelButtonText:f.baseText(`generic.cancel`)})===`confirm`&&await O();break}},D=async e=>{try{u.closeModal(x),await l.downloadDataTableCsv(o.dataTable.id,o.dataTable.projectId,e),S.track(`User downloaded data table CSV`,{data_table_id:o.dataTable.id,data_table_project_id:o.dataTable.projectId,include_system_columns:e})}catch(e){h.showError(e,f.baseText(`dataTable.download.error`))}},O=async()=>{try{if(!await l.deleteDataTable(o.dataTable.id,o.dataTable.projectId))throw Error(f.baseText(`generic.unknownError`));s(`onDeleted`),S.track(`User deleted data table`,{data_table_id:o.dataTable.id,data_table_project_id:o.dataTable.projectId})}catch(e){h.showError(e,f.baseText(`dataTable.delete.error`))}};return(e,a)=>(c(),t(`div`,null,[i(n(p),{actions:w.value,theme:`dark`,"data-test-id":`data-table-card-actions`,onAction:E},null,8,[`actions`]),i(T,{"modal-name":n(x),"data-table-name":r.dataTable.name,onConfirm:D,onClose:a[0]||=()=>n(u).closeModal(n(`downloadDataTableModal`))},null,8,[`modal-name`,`data-table-name`])]))}});export{E as t};
//# sourceMappingURL=DataTableActions-DbP1VLfN.js.map