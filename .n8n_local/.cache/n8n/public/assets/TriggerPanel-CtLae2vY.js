(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`225cf11f-1b21-4a63-9d9c-f438022c62df`,e._sentryDebugIdIdentifier=`sentry-dbid-225cf11f-1b21-4a63-9d9c-f438022c62df`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,J as s,M as c,P as l,T as u,Z as d,_ as f,_t as p,bt as m,et as h,h as g,it as _,j as v,k as y,n as b,p as x,st as S,vn as C,w,xt as T,zt as E}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{bt as D,h as O,yt as k}from"./_MapCache-DjbOQyB7.js";import{$ as ee,B as te,F as ne,Hi as A,Oi as j,Q as M,Ui as N,Vi as P,_t as re,gi as F,wi as I,z as L,zi as ie}from"./src-CppJvwzX.js";import{t as R}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Bt as ae,C as oe,Lt as se,Or as ce,S as le,Tt as z,Vi as ue,Vt as B,f as de,ni as V,r as H,s as fe,u as pe,ui as me}from"./users.store-pCkD7Zo0.js";import{Cr as he,Gt as ge,Vs as _e,fc as U,gn as ve,rs as W,so as G}from"./constants-D1jZwsUK.js";import{N as ye}from"./_baseOrderBy-El3qbNHQ.js";import{t as be}from"./CopyInput-DChEtJl3.js";import{i as xe,r as K,t as q}from"./RunData-DoJODYvb.js";import{t as J}from"./NDVEmptyState-Cd-QhxaI.js";import{n as Se,t as Ce}from"./usePinnedData-C6FFXoty.js";import{d as we}from"./nodeCreator.store-KD9kt9dE.js";import{t as Y}from"./NodeIcon-Dv1e4Lvu.js";import{n as X}from"./VirtualSchema-SoERffbL.js";import{r as Te}from"./useRunWorkflow-DzzlHC01.js";import{n as Z}from"./dateFormatter-C82w-7IH.js";import{c as Ee,d as De,n as Oe,o as ke,r as Q,t as Ae}from"./useLogsTreeExpand-CjcPPamK.js";import{t as je}from"./useExecutionData-CwkDVUHC.js";import{n as Me,t as Ne}from"./RunDataParsedAiContent-D3oW1jPS.js";var Pe=[`data-node-name`,`data-node-placement`,`onClick`],$=function(e){return e.top=`outputSub`,e.right=`outputMain`,e.left=`inputMain`,e}($||{}),Fe=R(l({__name:`NDVFloatingNodes`,props:{rootNode:{}},emits:[`switchSelectedNode`],setup(e,{expose:o,emit:l}){let p=e,g=fe(),y=oe(),b=l,x=t(()=>!0);function S(e){let t=D.value[e][0];t&&b(`switchSelectedNode`,t.node.name)}function T(e){if(e.shiftKey&&e.altKey&&(e.ctrlKey||e.metaKey)){let t={ArrowUp:$.top,ArrowRight:$.right,ArrowLeft:$.left}[e.key]||null;t&&S(t)}}function E(e){return e.map(e=>{let t=g.getNodeByName(e);if(t){let e=y.getNodeType(t.type);if(e)return{node:t,nodeType:e}}return null}).filter(e=>e!==null)}let D=t(()=>{let e=g.workflowObject,t=p.rootNode.name;return{[$.top]:E(e.getChildNodes(t,`ALL_NON_MAIN`)),[$.right]:E(e.getChildNodes(t,G.Main,1)).reverse(),[$.left]:E(e.getParentNodes(t,G.Main,1)).reverse()}}),O=[$.top,$.right,$.left],k={[$.top]:`bottom`,[$.right]:`left`,[$.left]:`right`};return d(()=>{document.addEventListener(`keydown`,T,!0)}),s(()=>{document.removeEventListener(`keydown`,T,!0)}),o({moveNodeDirection:S}),(e,t)=>(h(),r(`aside`,{class:C([e.$style.floatingNodes,{[e.$style.v2]:x.value}]),"data-test-id":`floating-nodes`},[(h(),r(f,null,_(O,t=>w(`ul`,{key:t,class:C([e.$style.nodesList,e.$style[t]])},[(h(!0),r(f,null,_(D.value[t],({node:o,nodeType:s})=>(h(),r(f,null,[o&&s?(h(),u(a(j),{key:o.name,placement:k[t],teleported:!1,offset:x.value?16:60},{content:m(()=>[v(n(o.name),1)]),default:m(()=>[w(`li`,{class:C(e.$style.connectedNode),"data-test-id":`floating-node`,"data-node-name":o.name,"data-node-placement":t,onClick:e=>b(`switchSelectedNode`,o.name)},[c(Y,{"node-type":s,"node-name":o.name,"tooltip-position":k[t],size:x.value?24:35,circle:``},null,8,[`node-type`,`node-name`,`tooltip-position`,`size`])],10,Pe)]),_:2},1032,[`placement`,`offset`])):i(``,!0)],64))),256))],2)),64))],2))}}),[[`__cssModules`,{$style:{floatingNodes:`_floatingNodes_10z2d_125`,nodesList:`_nodesList_10z2d_135`,inputSub:`_inputSub_10z2d_149`,outputSub:`_outputSub_10z2d_149`,outputMain:`_outputMain_10z2d_162`,inputMain:`_inputMain_10z2d_162`,connectedNode:`_connectedNode_10z2d_175`,v2:`_v2_10z2d_216`}}]]),Ie=R(l({__name:`RunInfo`,props:{taskData:{},hasStaleData:{type:Boolean},hasPinData:{type:Boolean}},setup(e){let o=k(),s=e,l=t(()=>s.taskData),d=t(()=>s.taskData?.error?`danger`:`success`),f=t(()=>{if(!l.value)return null;let{date:e,time:t}=Z(l.value.startTime);return{executionTime:l.value.executionTime,startTime:`${e} at ${t}`}});return(t,s)=>{let p=S(`n8n-html`);return e.hasStaleData?(h(),u(a(M),{key:0,theme:`warning-light`,type:`tooltip`,"tooltip-placement":`right`,"data-test-id":`node-run-info-stale`},{default:m(()=>[T(w(`span`,null,null,512),[[p,a(o).baseText(e.hasPinData?`ndv.output.staleDataWarning.pinData`:`ndv.output.staleDataWarning.regular`)]])]),_:1})):f.value?(h(),r(`div`,{key:1,class:C(t.$style.tooltipRow)},[e.taskData?.executionStatus===`canceled`?i(``,!0):(h(),u(a(M),{key:0,type:`note`,theme:d.value,"data-test-id":`node-run-status-${d.value}`,size:`large`},null,8,[`theme`,`data-test-id`])),c(a(M),{type:`tooltip`,theme:`info`,"data-test-id":`node-run-info`,"tooltip-placement":`right`},{default:m(()=>[w(`div`,null,[c(a(P),{bold:!0,size:`small`},{default:m(()=>[v(n(l.value?.error?a(o).baseText(`runData.executionStatus.failed`):l.value?.executionStatus===`canceled`?a(o).baseText(`runData.executionStatus.canceled`):a(o).baseText(`runData.executionStatus.success`)),1)]),_:1}),s[0]||=w(`br`,null,null,-1),c(a(P),{bold:!0,size:`small`},{default:m(()=>[v(n(a(o).baseText(`runData.startTime`)+`:`),1)]),_:1}),v(` `+n(f.value.startTime),1),s[1]||=w(`br`,null,null,-1),c(a(P),{bold:!0,size:`small`},{default:m(()=>[v(n(a(o).baseText(`runData.executionTime`)+`:`),1)]),_:1}),v(` `+n(f.value.executionTime)+` `+n(a(o).baseText(`runData.ms`)),1)])]),_:1})],2)):i(``,!0)}}}),[[`__cssModules`,{$style:{tooltipRow:`_tooltipRow_pdesz_125`}}]]),Le=e(we(),1),Re=ce(),ze=R(l({__name:`AiRunContentBlock`,props:{runData:{},error:{}},setup(e){let s=e,l=k(),f=o(D()),_=o(`rendered`),v=o(0),y=o(!1),b=t(()=>(v.value/(1024*1024)).toFixed(1)),x=t(()=>de(s.runData.data??[],s.runData.type)),E=t(()=>x.value.some(e=>e.parsedContent?.parsed===!0));function D(){return!{input:[G.AiDocument,G.AiTextSplitter],output:[G.AiDocument,G.AiEmbedding,G.AiTextSplitter,G.AiVectorStore]}[s.runData.inOut].includes(s.runData.type)}function O(){f.value=!f.value}function ee(e){_.value=e}function te(){y.value=v.value<U}function ne(){y.value=!1,v.value=new Blob([JSON.stringify(s.runData.data)]).size,te()}function j(){y.value=!0}function M(){let e=s.runData.inOut===`input`?`input_data`:`output_data`;(0,Re.saveAs)(new Blob([JSON.stringify(s.runData.data,null,2)],{type:`application/json`}),`${e}.json`)}return d(()=>{ne()}),p(()=>s.runData.data,()=>{ne()}),(t,o)=>{let s=S(`n8n-html`);return h(),r(`div`,{class:C(t.$style.block)},[w(`header`,{class:C(t.$style.blockHeader),onClick:O},[w(`button`,{class:C(t.$style.blockToggle)},[c(a(N),{icon:f.value?`chevron-down`:`chevron-right`,size:`large`},null,8,[`icon`])],2),w(`p`,{class:C(t.$style.blockTitle)},n(a(Le.default)(e.runData.inOut)),3),E.value&&!e.error&&f.value?(h(),u(a(L),{key:0,size:`small`,"model-value":_.value,class:C(t.$style.rawSwitch),options:[{label:`Rendered`,value:`rendered`},{label:`JSON`,value:`json`}],"onUpdate:modelValue":ee},null,8,[`model-value`,`class`])):i(``,!0)],2),w(`main`,{class:C({[t.$style.blockContent]:!0,[t.$style.blockContentExpanded]:f.value})},[e.error?(h(),u(xe,{key:0,error:e.error,class:C(t.$style.error),"show-details":``},null,8,[`error`,`class`])):y.value?(h(),u(Ne,{key:1,data:e.runData.data,type:e.runData.type,content:x.value,"render-type":_.value},null,8,[`data`,`type`,`content`,`render-type`])):(h(),r(`section`,{key:2,class:C(t.$style.warning)},[c(J,{title:a(l).baseText(`ndv.tooMuchData.title`,{interpolate:{size:b.value}}),class:C(t.$style.warningState)},{default:m(()=>[T(w(`span`,null,null,512),[[s,a(l).baseText(`ndv.tooMuchData.message`)]])]),_:1},8,[`title`,`class`]),w(`div`,{class:C(t.$style.warningActions)},[c(a(A),{variant:`outline`,size:`small`,label:a(l).baseText(`runData.downloadBinaryData`),onClick:g(M,[`stop`])},null,8,[`label`]),c(a(A),{size:`small`,label:a(l).baseText(`ndv.tooMuchData.showDataAnyway`),onClick:g(j,[`stop`])},null,8,[`label`])],2)],2))],2)],2)}}}),[[`__cssModules`,{$style:{block:`_block_eo7zm_125`,blockContent:`_blockContent_eo7zm_132`,blockContentExpanded:`_blockContentExpanded_eo7zm_136`,rawSwitch:`_rawSwitch_eo7zm_140`,blockHeader:`_blockHeader_eo7zm_150`,blockTitle:`_blockTitle_eo7zm_163`,blockToggle:`_blockToggle_eo7zm_170`,error:`_error_eo7zm_178`,warning:`_warning_eo7zm_182`,warningState:`_warningState_eo7zm_191`,warningActions:`_warningActions_eo7zm_195`}}]]),Be={key:0},Ve={key:1},He={key:2},Ue=R(l({__name:`RunDataAiContent`,props:{inputData:{}},setup(e){let o=e,s=t(()=>o.inputData.runData?Me(o.inputData.runData):void 0),l=oe(),d=k(),p=t(()=>De(y.value?.data??[]));function g(e){let t=o.inputData.node,n=l.getNodeType(t?.type??``);return{startTimeMs:e.metadata.startTime,executionTimeMs:e.metadata.executionTime,node:n,type:e.inOut,connectionType:e.type,subExecution:e.metadata?.subExecution}}let y=t(()=>s.value?.find(e=>e.inOut===`output`)),b=t(()=>{if(y.value!==void 0)return g(y.value)}),x=t(()=>o.inputData.runData?.error);return(t,o)=>(h(),r(`div`,{class:C(t.$style.container)},[w(`header`,{class:C(t.$style.header)},[b.value?.node?(h(),u(Y,{key:0,class:C(t.$style.nodeIcon),"node-type":b.value.node,size:20},null,8,[`class`,`node-type`])):i(``,!0),w(`div`,{class:C(t.$style.headerWrap)},[w(`p`,{class:C(t.$style.title)},n(e.inputData.node.name),3),w(`ul`,{class:C(t.$style.meta)},[b.value?.startTimeMs?(h(),r(`li`,Be,n(b.value?.executionTimeMs)+`ms`,1)):i(``,!0),b.value?.startTimeMs?(h(),r(`li`,Ve,[c(a(j),null,{content:m(()=>[v(n(new Date(b.value?.startTimeMs).toLocaleString()),1)]),default:m(()=>[v(` `+n(a(d).baseText(`runData.aiContentBlock.startedAt`,{interpolate:{startTime:new Date(b.value?.startTimeMs).toLocaleTimeString()}})),1)]),_:1})])):i(``,!0),b.value?(h(),r(`li`,He,[c(K,{"task-metadata":b.value,"display-mode":`ai`,inline:!0},null,8,[`task-metadata`])])):i(``,!0),(p.value?.totalTokens??0)>0?(h(),r(`li`,{key:3,class:C(t.$style.tokensUsage)},[v(n(a(d).baseText(`runData.aiContentBlock.tokens`,{interpolate:{count:a(pe)(p.value,`total`)}}))+` `,1),c(a(M),{type:`tooltip`,theme:`info-light`,"tooltip-placement":`right`},{default:m(()=>[c(ke,{"consumed-tokens":p.value},null,8,[`consumed-tokens`])]),_:1})],2)):i(``,!0)],2)],2)],2),(h(!0),r(f,null,_(s.value??[],(e,n)=>(h(),r(`main`,{key:n,class:C(t.$style.content)},[c(ze,{"run-data":e,error:e.inOut===`output`?x.value:void 0},null,8,[`run-data`,`error`])],2))),128))],2))}}),[[`__cssModules`,{$style:{container:`_container_1ddvo_2`,nodeIcon:`_nodeIcon_1ddvo_5`,header:`_header_1ddvo_8`,headerWrap:`_headerWrap_1ddvo_14`,title:`_title_1ddvo_18`,meta:`_meta_1ddvo_25`,tokensUsage:`_tokensUsage_1ddvo_41`}}]]),We=R(l({__name:`RunDataAi`,props:{node:{},runIndex:{default:0}},setup(e){let i=k(),{entries:o,execution:s,latestNodeNameById:l,loadSubExecution:d}=Oe({filter:t(()=>({rootNodeId:e.node.id,rootNodeRunIndex:e.runIndex}))}),{flatLogEntries:g,toggleExpanded:_}=Ae(o,d),y=E();function b(t){y.value=t?.node.id===e.node.id?void 0:t}return p(o,e=>{(!y.value||Ee(y.value.id,e)===void 0)&&(y.value=e[0]?.children[0])},{immediate:!0}),(t,o)=>(h(),r(`div`,{class:C(t.$style.container)},[a(g).length>0?(h(),r(f,{key:0},[c(Q,{class:C(t.$style.tree),"is-compact":``,"is-read-only":``,"flat-log-entries":a(g),"should-show-token-count-column":!1,"latest-node-info":a(l),selected:y.value,"can-open-ndv":!1,execution:a(s),onToggleExpanded:a(_),onSelect:b},null,8,[`class`,`flat-log-entries`,`latest-node-info`,`selected`,`execution`,`onToggleExpanded`]),w(`div`,{class:C(t.$style.runData)},[y.value?(h(),u(Ue,{key:0,"input-data":y.value},null,8,[`input-data`])):(h(),r(`div`,{key:1,class:C(t.$style.empty)},[c(a(P),{size:`large`},{default:m(()=>[v(n(a(i).baseText(`ndv.output.ai.empty`,{interpolate:{node:e.node.name}})),1)]),_:1})],2))],2)],64)):(h(),r(`div`,{key:1,class:C(t.$style.noData)},n(a(i).baseText(`ndv.output.ai.waiting`)),3))],2))}}),[[`__cssModules`,{$style:{noData:`_noData_ueqto_125`,empty:`_empty_ueqto_133`,tree:`_tree_ueqto_137`,runData:`_runData_ueqto_144`,container:`_container_ueqto_150`}}]]),Ge={key:0,"data-test-id":`ndv-output-waiting`},Ke=R(l({__name:`OutputPanel`,props:{workflowObject:{},runIndex:{},isReadOnly:{type:Boolean},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},pushRef:{},blockUI:{type:Boolean,default:!1},isProductionExecutionPreview:{type:Boolean,default:!1},isPaneActive:{type:Boolean,default:!1},displayMode:{}},emits:[`linkRun`,`unlinkRun`,`runChange`,`activatePane`,`tableMounted`,`itemHover`,`search`,`openSettings`,`execute`,`displayModeChange`],setup(e,{emit:s}){let l={REGULAR:`regular`,LOGS:`logs`},g=e,_=s,b=ae(),E=oe(),O=fe(),ee=B(),te=se(),A=k(),{activeNode:j}=ye(b),{dirtinessByName:M}=Te(),{isSubNodeType:re}=Se({node:j}),F=Ce(j,{runIndex:g.runIndex,displayMode:g.displayMode}),I=o(l.REGULAR),ie=o([{label:A.baseText(`ndv.output.outType.regular`),value:l.REGULAR},{label:A.baseText(`ndv.output.outType.logs`),value:l.LOGS}]),R=o(),ce=o(null),z=t(()=>b.activeNode??void 0),{hasNodeRun:ue,workflowExecution:de,workflowRunData:V}=je({node:z}),H=t(()=>!!z.value&&E.isTriggerNode(z.value.type)),pe=t(()=>{if(_e.value||!V.value)return!1;if(z.value){let e=g.workflowObject.getParentNodes(z.value.name,`ALL_NON_MAIN`).map(O.getWorkflowResultDataByNodeName);return e&&Array.isArray(e)&&e.length>0}return!1}),he=t(()=>!!(V.value&&z.value&&V.value[z.value.name]?.[g.runIndex]?.error)),ge=t(()=>he.value&&pe.value?l.LOGS:l.REGULAR),_e=t(()=>U.value&&!!z.value&&ee.executingNode.isNodeExecuting(z.value.name)),U=t(()=>O.isWorkflowRunning),ve=t(()=>{if(!z.value||de.value===null)return null;let e=V.value;return!e?.hasOwnProperty(z.value.name)||e[z.value.name].length<=g.runIndex?null:e[z.value.name][g.runIndex]}),W=t(()=>{if(z.value===null)return 0;let e=V.value;return e===null||z.value&&!e.hasOwnProperty(z.value.name)?0:z.value&&e[z.value.name].length?e[z.value.name].length:0}),be=t(()=>z.value?M.value[z.value.name]===me.PARAMETERS_UPDATED:!1),xe=t(()=>b.outputPanelEditMode),K=t(()=>F.isValidNodeType.value&&!g.isReadOnly),we=t(()=>{if(!z.value||W.value===0||he.value||F.hasData.value)return;let e=g.workflowObject.getParentNodes(z.value.name,G.AiTool,1),t=e.filter(e=>!!V.value?.[e]?.[g.runIndex]);if(e.length>0&&t.length===0&&!U.value)return A.baseText(`ndv.output.noToolUsedInfo`)}),Y=t(()=>!0),Z=()=>{R.value&&(R.value.enterEditMode({origin:`insertTestDataLink`}),te.track(`User clicked ndv link`,{workflow_id:O.workflowId,push_ref:g.pushRef,node_type:z.value?.type,pane:`output`,type:`insert-test-data`}))},Ee=()=>{_(`linkRun`)},De=()=>{_(`unlinkRun`)},Oe=()=>{_(`openSettings`),te.track(`User clicked ndv link`,{node_type:z.value?.type,workflow_id:O.workflowId,push_ref:g.pushRef,pane:`output`,type:`settings`})},ke=e=>{_(`runChange`,e)};d(()=>{I.value=ge.value}),p(ge,(e,t)=>{e===l.LOGS&&t===l.REGULAR&&ue.value&&(I.value=ge.value)});let Q=()=>{_(`activatePane`)};function Ae(e){ce.value=e}return(t,o)=>{let s=S(`n8n-html`);return h(),u(q,{ref_key:`runDataRef`,ref:R,class:C([t.$style.runData,{[t.$style.runDataV2]:Y.value}]),node:z.value,"workflow-object":e.workflowObject,"run-index":e.runIndex,"linked-runs":e.linkedRuns,"can-link-runs":e.canLinkRuns,"no-data-in-branch-message":a(A).baseText(`ndv.output.noOutputDataInBranch`),"is-executing":_e.value,"executing-message":a(A).baseText(`ndv.output.executing`),"push-ref":e.pushRef,"block-u-i":e.blockUI,"is-production-execution-preview":e.isProductionExecutionPreview,"search-shortcut":e.isPaneActive?`/`:void 0,"hide-pagination":I.value===`logs`,"pane-type":`output`,"data-output-type":I.value,"callout-message":we.value,"display-mode":e.displayMode,"disable-ai-content":!0,"collapsing-table-column-name":ce.value,"data-test-id":`ndv-output-panel`,onActivatePane:Q,onRunChange:ke,onLinkRun:Ee,onUnlinkRun:De,onTableMounted:o[3]||=e=>_(`tableMounted`,e),onItemHover:o[4]||=e=>_(`itemHover`,e),onSearch:o[5]||=e=>_(`search`,e),onDisplayModeChange:o[6]||=e=>_(`displayModeChange`,e),onCollapsingTableColumnChanged:Ae},y({header:m(()=>[w(`div`,{class:C([t.$style.titleSection,{[t.$style.titleSectionV2]:Y.value}])},[pe.value?(h(),u(a(L),{key:0,modelValue:I.value,"onUpdate:modelValue":o[0]||=e=>I.value=e,"data-test-id":`ai-output-mode-select`,options:ie.value},null,8,[`modelValue`,`options`])):(h(),r(`span`,{key:1,class:C([t.$style.title,{[t.$style.titleV2]:Y.value}])},n(a(A).baseText(xe.value.enabled?`ndv.output.edit`:`ndv.output`)),3)),a(ue)&&!a(F).hasData.value&&(W.value===1||W.value>0&&be.value)?T((h(),u(Ie,{key:2,"task-data":ve.value,"has-stale-data":be.value,"has-pin-data":a(F).hasData.value},null,8,[`task-data`,`has-stale-data`,`has-pin-data`])),[[x,!xe.value.enabled]]):i(``,!0)],2)]),"node-not-run":m(()=>[Y.value?(h(),r(f,{key:0},[e.isReadOnly?(h(),u(J,{key:0,title:a(A).baseText(H.value?`ndv.output.noOutputData.trigger.title`:`ndv.output.noOutputData.v2.title`)},null,8,[`title`])):(h(),u(J,{key:1,title:a(A).baseText(H.value?`ndv.output.noOutputData.trigger.title`:`ndv.output.noOutputData.v2.title`)},y({default:m(()=>[!K.value||a(re)?(h(),u(a(D),{key:0,tag:`span`,keypath:a(re)?`ndv.output.runNodeHintSubNode`:`ndv.output.noOutputData.v2.description`,scope:`global`},{link:m(()=>[c(X,{"hide-icon":``,transparent:``,type:`secondary`,"node-name":a(j)?.name??``,label:a(A).baseText(H.value?`ndv.output.noOutputData.trigger.action`:`ndv.output.noOutputData.v2.action`),"telemetry-source":`inputs`,onExecute:o[1]||=e=>_(`execute`)},null,8,[`node-name`,`label`]),o[8]||=w(`br`,null,null,-1)]),_:1},8,[`keypath`])):(h(),r(f,{key:1},[c(X,{"hide-icon":``,transparent:``,type:`secondary`,"node-name":a(j)?.name??``,label:a(A).baseText(H.value?`ndv.output.noOutputData.trigger.action`:`ndv.output.noOutputData.v2.action`),"telemetry-source":`inputs`,onExecute:o[2]||=e=>_(`execute`)},null,8,[`node-name`,`label`]),o[9]||=w(`br`,null,null,-1),v(` `+n(a(A).baseText(`generic.or`))+` `,1),c(a(P),{tag:`a`,size:`medium`,color:`primary`,onClick:Z},{default:m(()=>[v(n(a(A).baseText(`ndv.output.insertTestData`)),1)]),_:1})],64))]),_:2},[H.value?{name:`icon`,fn:m(()=>[o[7]||=w(`svg`,{width:`16`,viewBox:`0 0 14 18`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`},[w(`path`,{d:`M10.9062 2.40625L8.5 8.03125H12C12.4062 8.03125 12.7812 8.28125 12.9375 8.65625C13.0625 9.0625 12.9688 9.5 12.6562 9.78125L4.65625 16.7812C4.28125 17.0625 3.78125 17.0938 3.40625 16.8125C3.03125 16.5625 2.875 16.0625 3.0625 15.625L5.46875 10H2C1.5625 10 1.1875 9.75 1.0625 9.375C0.90625 8.96875 1 8.53125 1.3125 8.25L9.3125 1.25C9.6875 0.96875 10.1875 0.9375 10.5625 1.21875C10.9375 1.46875 11.0938 1.96875 10.9062 2.40625Z`,fill:`currentColor`})],-1)]),key:`0`}:{name:`icon`,fn:m(()=>[c(a(N),{icon:`arrow-right-from-line`,size:`xlarge`})]),key:`1`}]),1032,[`title`]))],64)):(h(),r(f,{key:1},[U.value&&!H.value?(h(),r(`div`,Ge,[w(`div`,{class:C(t.$style.spinner)},[c(a(ne),{type:`ring`})],2),c(a(P),null,{default:m(()=>[v(n(a(A).baseText(`ndv.output.waitingToRun`)),1)]),_:1})])):i(``,!0),U.value?i(``,!0):(h(),u(a(P),{key:1,"data-test-id":`ndv-output-run-node-hint`},{default:m(()=>[a(re)?(h(),r(f,{key:0},[v(n(a(A).baseText(`ndv.output.runNodeHintSubNode`)),1)],64)):(h(),r(f,{key:1},[v(n(a(A).baseText(`ndv.output.runNodeHint`))+` `,1),K.value?(h(),r(`span`,{key:0,onClick:Z},[o[10]||=w(`br`,null,null,-1),v(` `+n(a(A).baseText(`generic.or`))+` `,1),c(a(P),{tag:`a`,size:`medium`,color:`primary`},{default:m(()=>[v(n(a(A).baseText(`ndv.output.insertTestData`)),1)]),_:1})])):i(``,!0)],64))]),_:1}))],64))]),"node-waiting":m(()=>[c(J,{title:a(A).baseText(`ndv.output.waitNodeWaiting.title`),wide:``},{default:m(()=>[T(w(`span`,null,null,512),[[s,a(le)(z.value,e.workflowObject)]])]),_:1},8,[`title`])]),"no-output-data":m(()=>[c(J,{title:a(A).baseText(`ndv.output.noOutputData.title`)},{default:m(()=>[v(n(a(A).baseText(`ndv.output.noOutputData.message`))+` `,1),w(`a`,{onClick:Oe},n(a(A).baseText(`ndv.output.noOutputData.message.settings`)),1),v(` `+n(a(A).baseText(`ndv.output.noOutputData.message.settingsOption`)),1)]),_:1},8,[`title`])]),"recovered-artificial-output-data":m(()=>[c(J,{title:a(A).baseText(`executionDetails.executionFailed.recoveredNodeTitle`)},{default:m(()=>[v(n(a(A).baseText(`executionDetails.executionFailed.recoveredNodeMessage`)),1)]),_:1},8,[`title`])]),_:2},[I.value===`logs`&&z.value?{name:`content`,fn:m(()=>[c(We,{node:z.value,"run-index":e.runIndex,"workflow-object":e.workflowObject},null,8,[`node`,`run-index`,`workflow-object`])]),key:`0`}:void 0,!a(F).hasData.value&&W.value>1?{name:`run-info`,fn:m(()=>[c(Ie,{"task-data":ve.value},null,8,[`task-data`])]),key:`1`}:void 0]),1032,[`class`,`node`,`workflow-object`,`run-index`,`linked-runs`,`can-link-runs`,`no-data-in-branch-message`,`is-executing`,`executing-message`,`push-ref`,`block-u-i`,`is-production-execution-preview`,`search-shortcut`,`hide-pagination`,`data-output-type`,`callout-message`,`display-mode`,`collapsing-table-column-name`])}}}),[[`__cssModules`,{$style:{runData:`_runData_1ms3r_130`,runDataV2:`_runDataV2_1ms3r_134`,outputTypeSelect:`_outputTypeSelect_1ms3r_138`,titleSection:`_titleSection_1ms3r_143`,titleSectionV2:`_titleSectionV2_1ms3r_151`,title:`_title_1ms3r_143`,titleV2:`_titleV2_1ms3r_163`,noOutputData:`_noOutputData_1ms3r_168`,link:`_link_1ms3r_178`,spinner:`_spinner_1ms3r_185`}}]]),qe={key:`empty`},Je={key:1},Ye={key:0},Xe={key:`default`},Ze={key:0,class:`mb-xl`},Qe=[`textContent`],$e=R(l({__name:`TriggerPanel`,props:{nodeName:{},pushRef:{default:``}},emits:[`activate`,`execute`],setup(e,{emit:s}){let l=e,d=s,f=oe(),p=H(),g=fe(),_=ae(),y=I(),x=z(),E=k(),D=se(),j=re(),M=o(null),N=t(()=>g.getNodeByName(l.nodeName)),L=t(()=>N.value?f.getNodeType(N.value.type,N.value.typeVersion):null),R=t(()=>{let e=L.value?.triggerPanel;if(V(e))return e}),ce=t(()=>{let e=R.value?.hideContent;if(typeof e==`boolean`)return e;if(N.value){let t=g.workflowObject.expression.getSimpleParameterValue(N.value,e,`internal`,{});if(typeof t==`boolean`)return t}return!1}),le=t(()=>!!(N.value?.issues&&(N.value.issues.parameters??N.value.issues.credentials))),B=t(()=>L.value?ue(L.value):``),de=t(()=>!!(N.value&&N.value.type===`@n8n/n8n-nodes-langchain.chatTrigger`&&N.value.parameters.mode!==`webhook`)),pe=t(()=>!!(N.value&&N.value.type===`n8n-nodes-base.webhook`)),me=O(async()=>{if(!N.value||!L.value?.webhooks?.length)return;let e=await x.getWebhookExpressionValue(L.value.webhooks[0],`httpMethod`,!1);return Array.isArray(e)?e.join(`, `):e},void 0),he=O(async()=>{if(!(!N.value||!L.value?.webhooks?.length))return await x.getWebhookUrl(L.value.webhooks[0],N.value,`test`)},void 0),U=t(()=>!!L.value?.webhooks?.length),G=t(()=>!!L.value?.polling),ye=t(()=>{if(!N.value||N.value.disabled||!U.value||!g.executionWaitingForWebhook)return!1;let e=g.executedNode,t=e===l.nodeName,n=e?g.workflowObject.getParentNodes(e).includes(l.nodeName):!1;return!e||t||n}),xe=t(()=>g.isWorkflowRunning),K=t(()=>{let e=g.executedNode;return xe.value&&G.value&&l.nodeName===e}),q=t(()=>g.isWorkflowActive),J=t(()=>L.value?.name===`n8n-nodes-base.formTrigger`?E.baseText(`ndv.trigger.webhookNode.formTrigger.listening`):E.baseText(`ndv.trigger.webhookNode.listening`)),Se=t(()=>{switch(L.value?.name){case ge:return E.baseText(`ndv.trigger.webhookBasedNode.chatTrigger.serviceHint`);case ve:return E.baseText(`ndv.trigger.webhookBasedNode.formTrigger.serviceHint`);default:return E.baseText(`ndv.trigger.webhookBasedNode.serviceHint`,{interpolate:{service:B.value}})}}),Ce=t(()=>K.value?E.baseText(`ndv.trigger.pollingNode.fetchingEvent`):R.value?.header?R.value.header:U.value?E.baseText(`ndv.trigger.webhookBasedNode.action`,{interpolate:{name:B.value}}):``),we=t(()=>K.value?E.baseText(`ndv.trigger.pollingNode.fetchingHint`,{interpolate:{name:B.value}}):``),Te=t(()=>{if(R.value?.executionsHelp){if(typeof R.value.executionsHelp==`string`)return R.value.executionsHelp;if(!q.value&&R.value.executionsHelp.inactive)return R.value.executionsHelp.inactive;if(q.value&&R.value.executionsHelp.active)return R.value.executionsHelp.active}return U.value?q.value?E.baseText(`ndv.trigger.webhookBasedNode.executionsHelp.active`,{interpolate:{service:B.value}}):E.baseText(`ndv.trigger.webhookBasedNode.executionsHelp.inactive`,{interpolate:{service:B.value}}):G.value?q.value?E.baseText(`ndv.trigger.pollingNode.executionsHelp.active`,{interpolate:{service:B.value}}):E.baseText(`ndv.trigger.pollingNode.executionsHelp.inactive`,{interpolate:{service:B.value}}):``}),Z=t(()=>{if(K.value||!R.value)return``;if(R.value.activationHint){if(typeof R.value.activationHint==`string`)return R.value.activationHint;if(!q.value&&typeof R.value.activationHint.inactive==`string`)return R.value.activationHint.inactive;if(q.value&&typeof R.value.activationHint.active==`string`)return R.value.activationHint.active}return U.value?q.value?E.baseText(`ndv.trigger.webhookBasedNode.activationHint.active`,{interpolate:{service:B.value}}):E.baseText(`ndv.trigger.webhookBasedNode.activationHint.inactive`,{interpolate:{service:B.value}}):G.value?q.value?E.baseText(`ndv.trigger.pollingNode.activationHint.active`,{interpolate:{service:B.value}}):E.baseText(`ndv.trigger.pollingNode.activationHint.inactive`,{interpolate:{service:B.value}}):``}),Ee=()=>{M.value&&j.emit(`expand`)},De=()=>{D.track(`User clicked ndv link`,{workflow_id:g.workflowId,push_ref:l.pushRef,pane:`input`,type:`open-chat`}),window.open(he.value,`_blank`,`noreferrer`)},Oe=e=>{if(!e.target)return;let t=e.target;t.localName===`a`&&t.dataset?.key&&(e.stopPropagation(),e.preventDefault(),t.dataset.key===`activate`?d(`activate`):t.dataset.key===`executions`?(D.track(`User clicked ndv link`,{workflow_id:g.workflowId,push_ref:l.pushRef,pane:`input`,type:`open-executions-log`}),_.unsetActiveNodeName(),y.push({name:W.EXECUTIONS})):t.dataset.key===`settings`&&p.openModal(_e))},ke=()=>{D.track(`User copied webhook URL`,{pane:`inputs`,type:`test url`})},Q=()=>{d(`execute`)};return(t,o)=>{let s=S(`n8n-html`);return h(),r(`div`,{class:C(t.$style.container)},[c(b,{name:`fade`,mode:`out-in`},{default:m(()=>[le.value||ce.value?(h(),r(`div`,qe)):ye.value?(h(),r(`div`,{key:`listening`,class:C(t.$style.action),"data-test-id":`trigger-listening`},[c(a(te),null,{default:m(()=>[c(Y,{"node-type":L.value,size:40},null,8,[`node-type`])]),_:1}),pe.value?(h(),r(`div`,{key:0,class:C(t.$style.action)},[c(a(P),{tag:`div`,size:`large`,color:`text-dark`,class:`mb-2xs`,bold:``},{default:m(()=>[v(n(a(E).baseText(`ndv.trigger.webhookNode.listening`)),1)]),_:1}),w(`div`,{class:C([t.$style.shake,`mb-xs`])},[c(a(P),null,{default:m(()=>[v(n(a(E).baseText(`ndv.trigger.webhookNode.requestHint`,{interpolate:{type:a(me)??``}})),1)]),_:1})],2),c(be,{value:a(he),"toast-title":a(E).baseText(`ndv.trigger.copiedTestUrl`),class:`mb-2xl`,size:`medium`,collapse:!0,"copy-button-text":a(E).baseText(`generic.clickToCopy`),onCopy:ke},null,8,[`value`,`toast-title`,`copy-button-text`]),c(X,{"data-test-id":`trigger-execute-button`,"node-name":e.nodeName,size:`medium`,"telemetry-source":`inputs`,onExecute:Q},null,8,[`node-name`])],2)):(h(),r(`div`,Je,[c(a(P),{tag:`div`,size:`large`,color:`text-dark`,class:`mb-2xs`,bold:``},{default:m(()=>[v(n(J.value),1)]),_:1}),w(`div`,{class:C([t.$style.shake,`mb-xs`])},[c(a(P),{tag:`div`},{default:m(()=>[v(n(Se.value),1)]),_:1})],2),de.value?(h(),r(`div`,Ye,[c(a(A),{class:`mb-xl`,onClick:o[0]||=e=>De()},{default:m(()=>[v(n(a(E).baseText(`ndv.trigger.chatTrigger.openChat`)),1)]),_:1})])):i(``,!0),c(X,{"data-test-id":`trigger-execute-button`,"node-name":e.nodeName,size:`medium`,"telemetry-source":`inputs`,onExecute:Q},null,8,[`node-name`])]))],2)):(h(),r(`div`,Xe,[K.value?(h(),r(`div`,Ze,[c(a(ne),{type:`ring`})])):i(``,!0),w(`div`,{class:C(t.$style.action)},[w(`div`,{"data-test-id":`trigger-header`,class:C(t.$style.header)},[Ce.value?(h(),u(a(ie),{key:0,tag:`h1`,bold:``},{default:m(()=>[v(n(Ce.value),1)]),_:1})):i(``,!0),we.value?(h(),u(a(P),{key:1},{default:m(()=>[w(`span`,{textContent:n(we.value)},null,8,Qe)]),_:1})):i(``,!0)],2),c(X,{"data-test-id":`trigger-execute-button`,"node-name":e.nodeName,size:`medium`,"telemetry-source":`inputs`,onExecute:Q},null,8,[`node-name`])],2),Z.value?(h(),u(a(P),{key:1,size:`small`,onClick:Oe},{default:m(()=>[T(w(`span`,null,null,512),[[s,Z.value]]),o[1]||=v(`\xA0 `,-1)]),_:1})):i(``,!0),Z.value&&Te.value?(h(),u(a(F),{key:2,size:`small`,onClick:Ee},{default:m(()=>[v(n(a(E).baseText(`ndv.trigger.moreInfo`)),1)]),_:1})):i(``,!0),Te.value?(h(),u(a(ee),{key:3,ref_key:`help`,ref:M,class:C(t.$style.accordion),title:a(E).baseText(`ndv.trigger.executionsHint.question`),description:Te.value,"event-bus":a(j),"onClick:body":Oe},null,8,[`class`,`title`,`description`,`event-bus`])):i(``,!0)]))]),_:1})],2)}}}),[[`__cssModules`,{$style:{container:`_container_ffjde_125`,header:`_header_ffjde_142`,action:`_action_ffjde_149`,shake:`_shake_ffjde_158`,accordion:`_accordion_ffjde_179`}}],[`__scopeId`,`data-v-d7e561f4`]]);export{Ke as n,Fe as r,$e as t};
//# sourceMappingURL=TriggerPanel-CtLae2vY.js.map