!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./banners.store-legacy-B3TV_6lC.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./dataTable.store-legacy-bRwnG61W.js","./useClipboard-legacy-CaRHRTup.js","./executions.store-legacy-OEeCPZk_.js","./useEnvFeatureFlag-legacy-D1JgdFvC.js","./usePinnedData-legacy-B5CI71uf.js","./nodeIcon-legacy-KJSlWBN7.js","./canvas.utils-legacy-BQnUeqx3.js","./nodeCreator.store-legacy-i0crt2uh.js","./useCanvasOperations-legacy-CEMGNuuE.js","./folders.store-legacy-BDfX2wrH.js","./useDynamicCredentials-legacy-DtgrzjN_.js","./NodeIcon-legacy-DOI-M5xN.js","./TimeAgo-legacy-B4YnT5IQ.js","./roles.store-legacy-DOWLLO4H.js","./dist-legacy-CPj4q_aQ.js","./sso.store-legacy-B2e5Mjw4.js","./router-legacy-BqAYjr9q.js","./insights.store-legacy-BeV4G8Lk.js","./insights.constants-legacy-CSuwNipZ.js","./insights.utils-legacy-BZFivQZh.js","./mcp.constants-legacy-DUR_mUvx.js","./useMcp-legacy-BnFtTyT-.js","./mcp.store-legacy-DptxaWCG.js","./WorkflowLocation-legacy-BCiaYFB3.js"],(function(e,t){var a,o,n,l,s,i,c,r,d,p,u,m,g,_,b,v,y,f,h,w,k,x,j,T,$,C,A,M,z,P,E,U,D,O,S,B,K,L,V,W,I,R,F,N,H,q,J,Y,G,Q,X,Z,ee,te,ae,oe,ne,le,se,ie,ce,re,de,pe,ue,me,ge,_e,be,ve,ye,fe,he,we,ke,xe,je,Te,$e,Ce,Ae,Me,ze,Pe,Ee,Ue,De,Oe,Se;return{setters:[function(e){e.o},function(e){a=e.C,o=e.Cn,n=e.D,l=e.E,s=e.Gt,i=e.It,c=e.M,r=e.P,d=e.T,p=e.Z,u=e._t,m=e.at,g=e.bt,_=e.et,b=e.j,v=e.k,y=e.p,f=e.vn,h=e.w,w=e.xt},function(e){k=e.yt},function(e){x=e.Et,j=e.Hi,T=e.Oi,$=e.Pi,C=e.Q,A=e.Tt,M=e.U,z=e.Ui,P=e.V,E=e.Vi,U=e.Y,D=e.gi,O=e.j,S=e.ji,B=e.jt,K=e.p,L=e.z,V=e.zi},function(e){W=e.t},function(e){},function(e){I=e.Lt,R=e.fn,F=e.r,N=e.t,H=e.yr},function(e){q=e.Ns,J=e.qo,Y=e.rs},function(e){},function(e){G=e.r},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){Q=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){X=e.t},function(e){},function(e){},function(e){},function(e){Z=e.t},function(e){},function(e){},function(e){},function(e){ee=e.a,te=e.i,e.l,e.n,ae=e.o,e.r},function(e){oe=e.t},function(e){ne=e.t},function(e){le=e.t}],execute:function(){(se=document.createElement("style")).textContent="._container_pmfp4_125{gap:var(--spacing--lg);flex-direction:column;display:flex}._container_pmfp4_125 button{margin-bottom:var(--spacing--2xs)}._docs-link_pmfp4_134{text-decoration:underline}._main-toggle-container_6ezoc_125{align-items:center;gap:var(--spacing--2xs);display:flex}._main-toggle_6ezoc_125{flex-shrink:0;justify-content:flex-end;align-items:center;display:flex}._container_pb8ho_125{gap:var(--spacing--4xs);flex-direction:column;display:flex}._label-wrapper_pb8ho_131{align-items:center;gap:var(--spacing--4xs);display:flex}._label-wrapper_pb8ho_131 ._info-tip_pb8ho_136{cursor:pointer;display:none}._label-wrapper_pb8ho_131:hover ._info-tip_pb8ho_136{display:block}._label_pb8ho_131{font-size:var(--font-size--sm);color:var(--color--text--shade-1)}._parameter-value_pb8ho_149{font-size:var(--font-size--2xs);color:var(--color--text);justify-content:space-between;align-items:stretch;gap:var(--spacing--2xs);border:var(--border);border-radius:var(--radius);display:flex;overflow:hidden}._parameter-value--loading_pb8ho_160{gap:0}._parameter-value_pb8ho_149 ._input-wrapper_pb8ho_163{flex:1;align-items:center;min-width:0;display:flex}._parameter-value_pb8ho_149 .n8n-input{flex:1;align-items:center}._parameter-value_pb8ho_149 .n8n-input input{font-family:monospace;font-size:var(--font-size--2xs);color:var(--color--text);min-height:var(--spacing--md);height:var(--spacing--md);border:none}._parameter-value_pb8ho_149 ._parameter-skeleton_pb8ho_181 div{height:calc(var(--spacing--xl) - 2*var(--border-width));border-radius:0 0 var(--radius)var(--radius);margin:0}._parameter-value_pb8ho_149 button{border:none;border-radius:0}._parameter-value_pb8ho_149 button:hover{border-color:inherit}._parameter-value_pb8ho_149 button+button{border-left:var(--border)}@media screen and (max-width:820px){._parameter-value_pb8ho_149{word-wrap:break-word;margin-top:var(--spacing--2xs)}}._copy-button-wrapper_pb8ho_203{border-left:var(--border);align-items:center;display:flex}._copy-button_pb8ho_203{border:none;border-radius:0}._container_x8qjm_125,._container_1jg97_125{flex-direction:column;display:flex}._loading-container_1jg97_130{gap:var(--spacing--xs);flex-direction:column;display:flex}._url-skeleton_1jg97_136 div{width:100%;min-height:40px}._code-skeleton_1jg97_141 div{width:100%;min-height:350px}._parameters-container_1jg97_146{padding-top:var(--spacing--sm);flex-direction:column;display:flex}._json-container_1jg97_152{margin-top:var(--spacing--sm);flex-grow:1;position:relative}._json-container_1jg97_152 ._label_1jg97_157{font-size:var(--font-size--sm);color:var(--color--text--shade-1);margin-bottom:var(--spacing--4xs);display:inline-flex}._json-container_1jg97_152 .n8n-markdown{width:100%}._json-container_1jg97_152 code{font-size:var(--font-size--2xs);tab-size:1;border:var(--border);border-radius:var(--radius);color:var(--color--text)!important;padding:var(--spacing--2xs)!important;background:0 0!important}._json-container_1jg97_152:hover ._copy-json-button_1jg97_175{display:flex}._copy-json-button_1jg97_175{top:var(--spacing--lg);right:var(--spacing--3xs);border:none;outline:none;display:none;position:absolute}._copy-json-button_1jg97_175:hover{background:0 0;border:none;outline:none}._popper_7glv7_125{margin-right:var(--spacing--sm)}._popper-content_7glv7_129{padding:var(--spacing--xs);gap:var(--spacing--sm);flex-direction:column;display:flex}._container_gl7pe_125{gap:var(--spacing--md);padding-top:var(--spacing--5xs);align-items:baseline;display:flex}._container_gl7pe_125 a{font-size:var(--font-size--2xs);margin-right:calc(-1*var(--spacing--2xs))}._workflow-table-container_12b5m_125 .table-pagination{display:none}._header_12b5m_129{justify-content:space-between;align-items:center;display:flex}._workflow-table_12b5m_125 tr:last-child{border-bottom:none!important}._empty-state_12b5m_139{justify-content:center;align-items:center;gap:var(--spacing--sm);padding:var(--spacing--lg)0;flex-direction:column;min-height:250px;display:flex}._workflow-cell_12b5m_149{padding:var(--spacing--2xs)0;min-width:0;display:flex;overflow:hidden}._location-cell_12b5m_156{padding:var(--spacing--2xs)0}._description-cell_12b5m_160{-webkit-line-clamp:3;line-clamp:3;color:var(--color--text);padding:var(--spacing--2xs)0;cursor:pointer;-webkit-box-orient:vertical;display:-webkit-inline-box;overflow:hidden}._description-cell_12b5m_160:hover span{color:var(--color--text--shade-1)}._description-cell_12b5m_160 span{align-items:center;display:flex}._description-popper_12b5m_178{min-width:300px}._table-link_12b5m_182{color:var(--color--text)}._truncate_12b5m_186{text-overflow:ellipsis;white-space:nowrap;min-width:0;display:block;overflow:hidden}._header_2opcl_125{justify-content:space-between;align-items:center;display:flex}._empty-state_2opcl_131{justify-content:center;align-items:center;gap:var(--spacing--sm);padding:var(--spacing--lg)0;flex-direction:column;min-height:250px;display:flex}._container_aryh2_125{flex-direction:column;display:flex}._main-header_aryh2_130{margin-bottom:var(--spacing--xl);justify-content:space-between;display:flex}@media (max-width:820px){._main-header_aryh2_130{align-items:flex-start;gap:var(--spacing--2xs);flex-direction:column}}._headings_aryh2_143{flex-direction:column;min-height:60px;display:flex}._tabs-header_aryh2_149{justify-content:space-between;align-items:center;display:flex}._actions_aryh2_155{gap:var(--spacing--2xs);display:flex}\n/*$vite$:1*/",document.head.appendChild(se);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(Be=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[Be]="da237e0a-c0e3-441d-9c35-8b88fe0dca00",t._sentryDebugIdIdentifier="sentry-dbid-da237e0a-c0e3-441d-9c35-8b88fe0dca00")}catch(t){}var t,Be;ie={key:0},ce={key:1},re=["href"],de=r({__name:"MCPEmptyState",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["turnOnMcp"],setup(e,{emit:t}){const a=e,i=t,r=k();return(e,t)=>(_(),n("div",{class:f(e.$style.container),"data-test-id":"mcp-empty-state-container"},[c(s($),{icon:{type:"icon",value:"mcp"},heading:s(r).baseText("settings.mcp.actionBox.heading"),description:s(r).baseText("settings.mcp.description"),"button-text":s(r).baseText("settings.mcp.actionBox.button.label"),"button-disabled":a.disabled||a.loading,"button-variant":"solid","data-test-id":"enable-mcp-access-button","onClick:button":t[0]||(t[0]=e=>i("turnOnMcp"))},{disabledButtonTooltip:g((()=>[a.loading?(_(),n("span",ie,o(s(r).baseText("generic.loading"))+"...",1)):a.disabled?(_(),n("span",ce,o(s(r).baseText("settings.mcp.toggle.disabled.tooltip")),1)):l("",!0)])),additionalContent:g((()=>[c(s(E),{color:"text-light",size:"small"},{default:g((()=>[b(o(s(r).baseText("settings.mcp.emptyState.docs.part1"))+" ",1),h("a",{href:s(ee),class:f(e.$style["docs-link"]),target:"_blank",rel:"noopener noreferrer"},o(s(r).baseText("generic.learnMore").toLowerCase()),11,re)])),_:1})])),_:1},8,["heading","description","button-text","button-disabled"])],2))}}),pe=W(de,[["__cssModules",{$style:{container:"_container_pmfp4_125","docs-link":"_docs-link_pmfp4_134"}}]]),ue=r({__name:"McpAccessToggle",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["disableMcpAccess"],setup(e,{emit:t}){const a=e,l=t,i=k(),r=()=>{l("disableMcpAccess")};return(t,l)=>(_(),n("div",{class:f(t.$style["main-toggle-container"])},[h("div",{class:f(t.$style["main-toggle-info"])},[c(s(E),{bold:!0,color:e.modelValue?"success":"text-light",size:"small"},{default:g((()=>[b(o(e.modelValue?s(i).baseText("settings.mcp.header.toggle.enabled"):s(i).baseText("settings.mcp.header.toggle.disabled")),1)])),_:1},8,["color"])],2),h("div",{class:f(t.$style["main-toggle"]),"data-test-id":"mcp-toggle-container"},[c(s(T),{content:s(i).baseText("settings.mcp.toggle.disabled.tooltip"),disabled:!a.disabled,placement:"top"},{default:g((()=>[c(s(B),{size:"large","data-test-id":"mcp-access-toggle","model-value":a.modelValue,disabled:a.disabled,loading:a.loading,"onUpdate:modelValue":r},null,8,["model-value","disabled","loading"])])),_:1},8,["content","disabled"])],2)],2))}}),me=W(ue,[["__cssModules",{$style:{"main-toggle-container":"_main-toggle-container_6ezoc_125","main-toggle":"_main-toggle_6ezoc_125"}}]]),ge=["for"],_e=["id"],be=r({__name:"ConnectionParameter",props:{id:{},label:{},value:{},valueLoading:{type:Boolean,default:!1},infoTip:{default:void 0},allowCopy:{type:Boolean,default:!0}},emits:["copy"],setup(e,{emit:t}){const{copy:a,copied:i,isSupported:r}=Q(),p=k(),u=e,v=t;return(e,t)=>(_(),n("div",{class:f(e.$style.container)},[h("div",{class:f(e.$style["label-wrapper"])},[h("label",{class:f(e.$style.label),for:`connection-parameter-${u.id}`},o(u.label),11,ge),u.infoTip?(_(),n("div",{key:0,class:f(e.$style["info-tip"])},[c(s(C),{type:"tooltip",size:"small"},{default:g((()=>[b(o(u.infoTip),1)])),_:1})],2)):l("",!0)],2),h("div",{id:`connection-parameter-${u.id}`,class:f({[e.$style["parameter-value"]]:!0,[e.$style["parameter-value--loading"]]:u.valueLoading}),"data-test-id":"connection-parameter-value"},[h("div",{class:f(e.$style["input-wrapper"])},[u.valueLoading?(_(),d(s(x),{key:0,loading:u.valueLoading,variant:"h1",class:f(e.$style["parameter-skeleton"])},null,8,["loading","class"])):(_(),d(s(S),{key:1,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",readonly:!0},null,8,["modelValue"]))],2),h("div",{class:f(e.$style["copy-button-wrapper"])},[m(e.$slots,"customActions"),c(s(T),{disabled:!s(r),content:s(i)?s(p).baseText("generic.copied"):s(p).baseText("generic.copy"),"show-after":s(100),placement:"bottom"},{default:g((()=>[u.allowCopy&&s(r)?(_(),d(s(j),{key:0,variant:"subtle",iconOnly:"",icon:s(i)?"check":"copy",class:f(e.$style["copy-button"]),disabled:u.valueLoading,onClick:t[1]||(t[1]=e=>(async e=>{await a(e),v("copy",e)})(u.value))},null,8,["icon","class","disabled"])):l("",!0)])),_:1},8,["disabled","content","show-after"])],2)],10,_e)],2))}}),ve=W(be,[["__cssModules",{$style:{container:"_container_pb8ho_125","label-wrapper":"_label-wrapper_pb8ho_131","info-tip":"_info-tip_pb8ho_136",label:"_label_pb8ho_131","parameter-value":"_parameter-value_pb8ho_149","parameter-value--loading":"_parameter-value--loading_pb8ho_160","input-wrapper":"_input-wrapper_pb8ho_163","parameter-skeleton":"_parameter-skeleton_pb8ho_181","copy-button-wrapper":"_copy-button-wrapper_pb8ho_203","copy-button":"_copy-button_pb8ho_203"}}]]),ye=W(r({__name:"MCPOAuthPopoverTab",props:{serverUrl:{}},emits:["copy"],setup(e,{emit:t}){const a=e,o=t,l=k(),i=e=>{o("copy",e)};return(e,t)=>(_(),n("div",{class:f(e.$style.container),"data-test-id":"mcp-oauth-popover-tab"},[c(ve,{id:"oauth-server-url",label:s(l).baseText("settings.mcp.connectPopover.serverUrl"),value:a.serverUrl,onCopy:i},null,8,["label","value"])],2))}}),[["__cssModules",{$style:{container:"_container_x8qjm_125"}}]]),fe=W(r({__name:"MCPAccessTokenPopoverTab",props:{serverUrl:{}},emits:["copy"],setup(e,{emit:t}){const r=e,u=t,m=k(),v=H(),y=ne(),w=i(!0),$=i(!1),C=a((()=>y.currentUserMCPKey)),{copy:A,copied:z,isSupported:P}=Q(),E=a((()=>`\n{\n  "mcpServers": {\n    "n8n-mcp": {\n      "command": "npx",\n      "args": [\n        "-y",\n        "supergateway",\n        "--streamableHttp",\n        "${r.serverUrl}",\n        "--header",\n        "authorization:Bearer ${S.value}"\n      ]\n    }\n  }\n}\n`)),D=a((()=>C.value?.apiKey?.includes("******")??!1)),O=a((()=>`\`\`\`json${E.value}\`\`\``)),S=a((()=>$.value?`<${m.baseText("generic.loading")}...>`:D.value?"<YOUR_ACCESS_TOKEN_HERE>":C.value?.apiKey)),B=async()=>{try{$.value=!0,await y.generateNewApiKey()}catch(e){v.showError(e,m.baseText("settings.mcp.error.rotating.apiKey"))}finally{setTimeout((()=>{$.value=!1}),200)}},K=async()=>{await A(E.value),u("copy","mcpJson",E.value)},L=e=>{u("copy","serverUrl",e)},V=()=>{C.value?.apiKey&&u("copy","accessToken",C.value.apiKey)};return p((async()=>{C.value?w.value=!1:await(async()=>{try{w.value=!0,await y.getOrCreateApiKey()}catch(e){v.showError(e,m.baseText("settings.mcp.error.fetching.apiKey"))}finally{setTimeout((()=>{w.value=!1}),200)}})()})),(e,t)=>(_(),n("div",{class:f(e.$style.container),"data-test-id":"mcp-access-token-popover-tab"},[c(ve,{id:"oauth-server-url",label:s(m).baseText("settings.mcp.connectPopover.serverUrl"),value:r.serverUrl,onCopy:L},null,8,["label","value"]),w.value?(_(),n("div",{key:0,class:f(e.$style["loading-container"])},[c(s(x),{loading:w.value,variant:"h1",class:f(e.$style["url-skeleton"])},null,8,["loading","class"]),c(s(x),{loading:w.value,variant:"button",class:f(e.$style["code-skeleton"])},null,8,["loading","class"])],2)):C.value?.apiKey?(_(),n("div",{key:1,class:f(e.$style["parameters-container"])},[c(ve,{id:"access-token",value:C.value.apiKey,"value-loading":$.value,label:s(m).baseText("settings.mcp.connectPopover.tab.accessToken"),"info-tip":s(m).baseText("settings.mcp.instructions.apiKey.tip"),"allow-copy":!D.value,onCopy:V},{customActions:g((()=>[c(s(T),{content:s(m).baseText("settings.mcp.instructions.rotateKey.tooltip"),"show-after":s(100)},{default:g((()=>[c(s(j),{variant:"subtle",iconOnly:"",icon:"refresh-cw",disabled:$.value,onClick:B},null,8,["disabled"])])),_:1},8,["content","show-after"])])),_:1},8,["value","value-loading","label","info-tip","allow-copy"]),D.value?l("",!0):(_(),d(s(M),{key:0},{default:g((()=>[b(o(s(m).baseText("settings.mcp.access.token.notice")),1)])),_:1})),h("div",{class:f(e.$style["json-container"]),"data-test-id":"mcp-access-token-json"},[h("label",{class:f(e.$style.label),for:"mcp-json"},o(s(m).baseText("settings.mcp.connectPopover.jsonConfig")),3),c(s(U),{id:"mcp-json",content:O.value},null,8,["content"]),c(s(T),{disabled:!s(P),content:s(z)?s(m).baseText("generic.copied"):s(m).baseText("generic.copy"),"show-after":s(100)},{default:g((()=>[!s(P)||w.value||$.value?l("",!0):(_(),d(s(j),{key:0,variant:"subtle",iconOnly:"",icon:s(z)?"check":"copy",class:f(e.$style["copy-json-button"]),"data-test-id":"mcp-json-copy-button",onClick:K},null,8,["icon","class"]))])),_:1},8,["disabled","content","show-after"])],2)],2)):l("",!0)],2))}}),[["__cssModules",{$style:{container:"_container_1jg97_125","loading-container":"_loading-container_1jg97_130","url-skeleton":"_url-skeleton_1jg97_136","code-skeleton":"_code-skeleton_1jg97_141","parameters-container":"_parameters-container_1jg97_146","json-container":"_json-container_1jg97_152",label:"_label_1jg97_157","copy-json-button":"_copy-json-button_1jg97_175"}}]]),he=r({__name:"McpConnectPopover",props:{disabled:{type:Boolean}},setup(e){const t=k(),a=I(),r=G(),p=ne(),m=e,v="accessToken",y="oauth",w=i([{value:y,label:t.baseText("settings.mcp.connectPopover.tab.oauth")},{value:v,label:t.baseText("settings.mcp.connectPopover.tab.accessToken")}]),x=i(`${r.urlBaseEditor}${ae}`),T=i(w.value[0].value),$=e=>{e?p.openConnectPopover():(p.closeConnectPopover(),p.resetCurrentUserMCPKey())},C=e=>{T.value=e},A=e=>{M({item:{serverUrl:"server-url",accessToken:"access-token",mcpJson:"mcp-json"}[e],source:"token-tab"})},M=e=>{a.track("User copied MCP connection parameter",{parameter:e.item,source:e.source})};return u((()=>m.disabled),(e=>{e||p.openConnectPopover()})),(a,i)=>(_(),n("div",null,[c(s(P),{id:"mcp-connect-popover",open:s(p).connectPopoverOpen,"content-class":a.$style.popper,"show-arrow":!1,width:`${s(460)}px`,"onUpdate:open":$},{trigger:g((()=>[c(s(j),{variant:"subtle","data-test-id":"mcp-connect-popover-trigger-button",disabled:e.disabled},{default:g((()=>[b(o(s(t).baseText("settings.mcp.connectPopover.triggerLabel")),1)])),_:1},8,["disabled"])])),content:g((()=>[h("div",{class:f(a.$style["popper-content"]),"data-test-id":"mcp-connect-popover-content"},[h("header",null,[c(s(L),{"data-test-id":"mcp-connect-popover-tabs","model-value":T.value,options:w.value,"onUpdate:modelValue":C},null,8,["model-value","options"])]),h("main",null,[T.value===y?(_(),d(ye,{key:0,"server-url":x.value,onCopy:i[0]||(i[0]=e=>M({item:"server-url",source:"oauth-tab"}))},null,8,["server-url"])):T.value===v?(_(),d(fe,{key:1,"server-url":x.value,onCopy:A},null,8,["server-url"])):l("",!0)])],2)])),_:1},8,["open","content-class","width"])]))}}),we=W(he,[["__cssModules",{$style:{popper:"_popper_7glv7_125","popper-content":"_popper-content_7glv7_129"}}]]),ke=r({__name:"MCPHeaderActions",props:{toggleDisabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},accessEnabled:{type:Boolean}},emits:["disableMcpAccess"],setup(e,{emit:t}){const a=e,o=t;return(t,l)=>(_(),n("div",{class:f(t.$style.container),"data-test-id":"mcp-header-actions"},[c(me,{"model-value":e.accessEnabled,disabled:a.toggleDisabled,loading:a.loading,class:f(t.$style["mcp-access-toggle"]),onDisableMcpAccess:l[0]||(l[0]=e=>o("disableMcpAccess"))},null,8,["model-value","disabled","loading","class"]),c(we,{disabled:!e.accessEnabled},null,8,["disabled"])],2))}}),xe=W(ke,[["__cssModules",{$style:{container:"_container_gl7pe_125"}}]]),je={key:0},Te={key:1,class:"mt-s mb-xl"},$e=["onClick"],Ce={key:0},Ae={key:1},Me=r({__name:"WorkflowsTable",props:{workflows:{},loading:{type:Boolean}},emits:["removeMcpAccess","connectWorkflows","updateDescription"],setup(e,{emit:t}){const a=e,l=t,r=k(),d=i([{title:r.baseText("settings.mcp.workflows.table.column.name"),key:"workflow",width:150,disableSort:!0,value(){}},{title:r.baseText("settings.mcp.workflows.table.column.location"),key:"location",width:200,disableSort:!0,value(){}},{title:r.baseText("generic.description"),key:"description",width:350,disableSort:!0,value(){}},{title:"",key:"actions",align:"end",width:50,disableSort:!0,value(){}}]),p=e=>{const t=J(e.scopes);return[{label:r.baseText("settings.mcp.workflows.table.action.removeMCPAccess"),value:"removeFromMCP",disabled:!t.workflow.update},{label:r.baseText("settings.mcp.workflows.table.action.updateDescription"),value:"updateDescription",disabled:!t.workflow.update}]},u=()=>{l("connectWorkflows")};return(e,t)=>(_(),n("div",{class:f(e.$style["workflow-table-container"])},[a.loading?(_(),n("div",je,[c(s(x),{loading:a.loading,variant:"h1",class:"mb-l"},null,8,["loading"]),c(s(x),{loading:a.loading,variant:"p",rows:5,"shrink-last":!1},null,8,["loading"])])):(_(),n("div",Te,[c(s(K),{class:f(e.$style["workflow-table"]),"data-test-id":"mcp-workflow-table",headers:d.value,items:a.workflows,"items-length":a.workflows.length},v({"item.workflow":g((({item:t})=>[h("div",{class:f(e.$style["workflow-cell"]),"data-test-id":"mcp-workflow-cell"},[c(s(D),{"data-test-id":"mcp-workflow-name-link","new-window":!0,to:s(Z).resolve({name:s(Y).WORKFLOW,params:{name:t.id}}).fullPath,theme:"text",class:f([e.$style["table-link"],e.$style.truncate])},{default:g((()=>[c(s(E),{class:f(e.$style.truncate),"data-test-id":"mcp-workflow-name"},{default:g((()=>[b(o(t.name),1)])),_:2},1032,["class"])])),_:2},1032,["to","class"])],2)])),"item.location":g((({item:t})=>[h("div",{class:f(e.$style["location-cell"]),"data-test-id":"mcp-workflow-location-cell"},[c(le,{"workflow-id":t.id,"home-project":t.homeProject,"parent-folder":t.parentFolder,"as-links":!0},null,8,["workflow-id","home-project","parent-folder"])],2)])),"item.description":g((({item:t})=>[c(s(T),{content:t.description||s(r).baseText("settings.mcp.workflows.table.column.description.emptyTooltip"),"show-after":s(100),"popper-class":e.$style["description-popper"]},{default:g((()=>[h("div",{"data-test-id":"mcp-workflow-description-cell",class:f(e.$style["description-cell"]),onClick:e=>l("updateDescription",t)},[t.description?(_(),n("span",Ce,[c(s(E),{"data-test-id":"mcp-workflow-description"},{default:g((()=>[b(o(t.description),1)])),_:2},1024)])):(_(),n("span",Ae,[c(s(z),{icon:"triangle-alert",size:14,color:"warning",class:"mr-2xs"}),c(s(E),{"data-test-id":"mcp-workflow-description-empty"},{default:g((()=>[b(o(s(r).baseText("settings.mcp.workflows.table.column.description.emptyContent")),1)])),_:1})]))],10,$e)])),_:2},1032,["content","show-after","popper-class"])])),"item.actions":g((({item:t})=>[c(s(A),{class:f(e.$style["action-toggle"]),"data-test-id":"mcp-workflow-action-toggle",placement:"bottom",actions:p(t),theme:"dark",onAction:e=>((e,t)=>{switch(e){case"removeFromMCP":l("removeMcpAccess",t);break;case"updateDescription":l("updateDescription",t)}})(e,t)},null,8,["class","actions","onAction"])])),_:2},[0===a.workflows.length?{name:"cover",fn:g((()=>[h("div",{class:f(e.$style["empty-state"])},[c(s(E),{"data-test-id":"mcp-workflow-table-empty-state",size:"large",color:"text-base"},{default:g((()=>[b(o(s(r).baseText("settings.mcp.workflows.table.empty.title")),1)])),_:1}),c(s(E),{"data-test-id":"mcp-workflow-table-empty-state-description",size:"small",color:"text-base"},{default:g((()=>[b(o(s(r).baseText("settings.mcp.workflows.table.empty.description")),1)])),_:1}),c(s(j),{variant:"solid","data-test-id":"mcp-workflow-table-empty-state-button",label:s(r).baseText("settings.mcp.connectWorkflows"),onClick:u},null,8,["label"])],2)])),key:"0"}:void 0]),1032,["class","headers","items","items-length"])]))],2))}}),ze=W(Me,[["__cssModules",{$style:{"workflow-table-container":"_workflow-table-container_12b5m_125",header:"_header_12b5m_129","workflow-table":"_workflow-table_12b5m_125","empty-state":"_empty-state_12b5m_139","workflow-cell":"_workflow-cell_12b5m_149","location-cell":"_location-cell_12b5m_156","description-cell":"_description-cell_12b5m_160","description-popper":"_description-popper_12b5m_178","table-link":"_table-link_12b5m_182",truncate:"_truncate_12b5m_186"}}]]),Pe={"data-test-id":"oauth-clients-table"},Ee={key:0},Ue={key:1,class:"mt-s mb-xl"},De=r({__name:"OAuthClientsTable",props:{clients:{},loading:{type:Boolean}},emits:["revokeClient"],setup(e,{emit:t}){const a=k(),l=ne(),r=e,d=t,p=i([{title:a.baseText("settings.mcp.oAuthClients.table.clientName"),key:"name",width:250,disableSort:!0,value(){}},{title:a.baseText("settings.mcp.oAuthClients.table.connectedAt"),key:"createdAt",width:250,disableSort:!0,value(){}},{title:"",key:"actions",align:"end",width:50,disableSort:!0,value(){}}]),u=i([{label:a.baseText("settings.mcp.oAuthClients.table.action.revokeAccess"),value:"revokeClient"}]);return(e,t)=>(_(),n("div",Pe,[r.loading?(_(),n("div",Ee,[c(s(x),{loading:r.loading,variant:"h1",class:"mb-l"},null,8,["loading"]),c(s(x),{loading:r.loading,variant:"p",rows:5,"shrink-last":!1},null,8,["loading"])])):(_(),n("div",Ue,[c(s(K),{"data-test-id":"oauth-clients-data-table",headers:p.value,items:r.clients,"items-length":r.clients.length},v({"item.name":g((({item:e})=>[c(s(E),{"data-test-id":"mcp-client-name",color:"text-base"},{default:g((()=>[b(o(e.name),1)])),_:2},1024)])),"item.createdAt":g((({item:e})=>[c(s(E),{"data-test-id":"mcp-client-created-at",color:"text-base"},{default:g((()=>[c(X,{date:String(e.createdAt)},null,8,["date"])])),_:2},1024)])),"item.actions":g((({item:e})=>[c(s(A),{"data-test-id":"mcp-oauth-client-action-toggle",placement:"bottom",actions:u.value,theme:"dark",onAction:t=>((e,t)=>{"revokeClient"===e&&d("revokeClient",t)})(t,e)},null,8,["actions","onAction"])])),_:2},[0===r.clients.length?{name:"cover",fn:g((()=>[h("div",{class:f(e.$style["empty-state"])},[c(s(E),{"data-test-id":"mcp-workflow-table-empty-state",size:"large",color:"text-base"},{default:g((()=>[b(o(s(a).baseText("settings.mcp.oauth.table.empty.title")),1)])),_:1}),c(s(E),{"data-test-id":"mcp-workflow-table-empty-state-description",size:"small",color:"text-base"},{default:g((()=>[b(o(s(a).baseText("settings.mcp.oauth.table.empty.description")),1)])),_:1}),c(s(j),{variant:"solid","data-test-id":"mcp-oauth-create-client-button",onClick:t[0]||(t[0]=e=>s(l).openConnectPopover())},{default:g((()=>[b(o(s(a).baseText("settings.mcp.oauth.table.empty.button")),1)])),_:1})],2)])),key:"0"}:void 0]),1032,["headers","items","items-length"])]))]))}}),Oe=W(De,[["__cssModules",{$style:{header:"_header_2opcl_125","empty-state":"_empty-state_2opcl_131"}}]]),Se={"data-test-id":"mcp-settings-description"},e("default",W(r({__name:"SettingsMCPView",setup(e){const t=k(),r=H(),u=R(),m=oe(),v=I(),x=ne(),$=N(),C=F(),A=i(!1),M=i("workflows"),z=i([{label:t.baseText("settings.mcp.tabs.workflows"),value:"workflows"},{label:t.baseText("settings.mcp.tabs.oauth"),value:"oauth"}]),P=i(!1),U=i([]),S=i(!1),B=i([]),K=a((()=>$.isInstanceOwner)),L=a((()=>$.isAdmin)),W=a((()=>K.value||L.value)),J=a((()=>"workflows"===M.value&&U.value.length>0)),Y=async e=>{M.value=e,"workflows"===e&&0===U.value.length?await ae():"oauth"===e&&0===B.value.length&&(await se(),v.track("User clicked connected clients tab"))},G=async e=>{try{A.value=!0,await x.setMcpAccessEnabled(e)?(await ae(),await se()):P.value=!1,m.trackUserToggledMcpAccess(e)}catch(a){r.showError(a,t.baseText("settings.mcp.toggle.error"))}finally{A.value=!1,P.value=!1}},Q=async(e,a)=>{try{await x.toggleWorkflowMcpAccess(e,a),a?await ae():U.value=U.value.filter((t=>t.id!==e))}catch(o){throw r.showError(o,t.baseText("workflowSettings.toggleMCP.error.title")),o}},X=e=>{C.openModalWithData({name:q,data:{workflowId:e.id,workflowDescription:e.description??"",onSave:t=>{const a=U.value.findIndex((t=>t.id===e.id));-1!==a&&(U.value[a]={...U.value[a],description:t??void 0})}}})},Z=async()=>{"workflows"===M.value?await ae():"oauth"===M.value&&await se()},ae=async()=>{P.value=!0;try{U.value=await x.fetchWorkflowsAvailableForMCP(1,200)}catch(e){r.showError(e,t.baseText("workflows.list.error.fetching"))}finally{setTimeout((()=>{P.value=!1}),200)}},le=async()=>{await ae()},se=async()=>{try{S.value=!0,B.value=await x.getAllOAuthClients()}catch(e){r.showError(e,t.baseText("settings.mcp.error.fetching.oAuthClients"))}finally{setTimeout((()=>{S.value=!1}),200)}},ie=async e=>{try{await x.removeOAuthClient(e.id),B.value=B.value.filter((t=>t.id!==e.id)),r.showMessage({type:"success",title:t.baseText("settings.mcp.oAuthClients.revoke.success.title"),message:t.baseText("settings.mcp.oAuthClients.revoke.success.message",{interpolate:{name:e.name}})})}catch(a){r.showError(a,t.baseText("settings.mcp.oAuthClients.revoke.error"))}},ce=()=>{C.openModalWithData({name:te,data:{onEnableMcpAccess:async e=>{await Q(e,!0)}}}),v.track("User clicked connect workflows from mcp settings")};return p((async()=>{u.set(t.baseText("settings.mcp")),x.mcpAccessEnabled&&await ae()})),(e,a)=>(_(),n("div",{class:f(e.$style.container)},[h("header",{class:f(e.$style["main-header"]),"data-test-id":"mcp-settings-header"},[h("div",{class:f(e.$style.headings)},[c(s(V),{size:"2xlarge",class:"mb-2xs"},{default:g((()=>[b(o(s(t).baseText("settings.mcp")),1)])),_:1}),w(h("div",Se,[c(s(E),{size:"small",color:"text-light"},{default:g((()=>[b(o(s(t).baseText("settings.mcp.description"))+". ",1)])),_:1}),c(s(D),{href:s(ee),target:"_blank",rel:"noopener noreferrer",size:"small","data-test-id":"mcp-docs-link"},{default:g((()=>[b(o(s(t).baseText("generic.learnMore")),1)])),_:1},8,["href"])],512),[[y,s(x).mcpAccessEnabled]])],2),c(xe,{"access-enabled":s(x).mcpAccessEnabled,"toggle-disabled":!W.value,loading:A.value,onDisableMcpAccess:a[0]||(a[0]=e=>G(!s(x).mcpAccessEnabled))},null,8,["access-enabled","toggle-disabled","loading"])],2),s(x).mcpAccessEnabled?l("",!0):(_(),d(pe,{key:0,disabled:!W.value,loading:A.value,onTurnOnMcp:a[1]||(a[1]=e=>G(!0))},null,8,["disabled","loading"])),s(x).mcpAccessEnabled?(_(),n("div",{key:1,class:f(e.$style.container),"data-test-id":"mcp-enabled-section"},[h("header",{class:f(e.$style["tabs-header"])},[c(s(O),{"model-value":M.value,options:z.value,"onUpdate:modelValue":Y},null,8,["model-value","options"]),h("div",{class:f(e.$style.actions)},[J.value?(_(),d(s(j),{key:0,variant:"solid",label:s(t).baseText("settings.mcp.connectWorkflows"),"data-test-id":"mcp-connect-workflows-header-button",size:"small",onClick:ce},null,8,["label"])):l("",!0),c(s(T),{content:s(t).baseText("settings.mcp.refresh.tooltip")},{default:g((()=>[c(s(j),{variant:"subtle",iconOnly:"","data-test-id":"mcp-workflows-refresh-button",size:"small",icon:"refresh-cw",onClick:Z})])),_:1},8,["content"])],2)],2),h("main",null,["workflows"===M.value?(_(),d(ze,{key:0,"data-test-id":"mcp-workflow-table",workflows:U.value,loading:P.value,onRemoveMcpAccess:a[2]||(a[2]=e=>Q(e.id,!1)),onConnectWorkflows:ce,onUpdateDescription:X,onRefresh:le},null,8,["workflows","loading"])):"oauth"===M.value?(_(),d(Oe,{key:1,"data-test-id":"mcp-oauth-clients-table",clients:B.value,loading:S.value,onRevokeClient:ie,onRefresh:Z},null,8,["clients","loading"])):l("",!0)])],2)):l("",!0)],2))}}),[["__cssModules",{$style:{container:"_container_aryh2_125","main-header":"_main-header_aryh2_130",headings:"_headings_aryh2_143","tabs-header":"_tabs-header_aryh2_149",actions:"_actions_aryh2_155"}}]]))}}}));
//# sourceMappingURL=SettingsMCPView-legacy-BOOtlyHE.js.map