!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./col-legacy-Ciq6fW7O.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./usePageRedirectionHelper-legacy-DkG-ZaDD.js","./logStreaming.store-legacy-BJeF001R.js"],(function(e,t){var n,a,i,s,o,l,d,c,r,u,g,f,m,v,b,y,p,_,x,h,w,T,k,D,z,j,S,A,B,E,C,$,I,N,L,V,H,W,M,R,O,P,U,F,G,J,Y,q,Q,Z,K,X,ee,te,ne,ae,ie,se,oe,le,de;return{setters:[function(e){e.o},function(e){n=e.C,a=e.Cn,i=e.D,s=e.E,o=e.F,l=e.G,d=e.Gt,c=e.It,r=e.M,u=e.P,g=e.T,f=e.Z,m=e._,v=e.bt,b=e.et,y=e.it,p=e.j,_=e.q,x=e.st,h=e.vn,w=e.w,T=e.xt},function(e){k=e.yt},function(e){D=e.Hi,z=e.Pi,j=e.Q,S=e.Tt,A=e.Vi,B=e._t,E=e.bt,C=e.jt,$=e.zi},function(e){I=e.t},function(e){},function(e){N=e.Tr,L=e.Vt,V=e.fn,H=e.r,W=e.rt,M=e.s,R=e.ur,O=e.ws,P=e.zr},function(e){U=e.n,F=e.t},function(e){G=e.Ha,J=e.Ji,e.Ss,Y=e.Yc,q=e.vs},function(e){},function(e){Q=e.v},function(e){},function(e){},function(e){},function(e){Z=e.t},function(e){K=e.t}],execute:function(){(X=document.createElement("style")).textContent="._cardLink_s7ez3_125{cursor:pointer;padding:0 0 0 var(--spacing--sm);align-items:stretch;transition:box-shadow .3s}._cardLink_s7ez3_125:hover{box-shadow:var(--shadow--card-hover)}._activeStatusText_s7ez3_135{width:64px;padding-right:var(--spacing--2xs);box-sizing:border-box;text-align:right;display:inline-block}._cardHeading_s7ez3_143{font-size:var(--font-size--sm);word-break:break-word;padding:var(--spacing--sm)0 0 var(--spacing--sm)}._cardDescription_s7ez3_149{min-height:19px;padding:0 0 var(--spacing--sm)var(--spacing--sm);align-items:center;display:flex}._cardActions_s7ez3_156{padding:0 var(--spacing--sm)0 0;cursor:default;flex-direction:row;justify-content:center;align-items:center;display:flex}._header_1gpds_125{white-space:nowrap;flex-direction:column;align-items:flex-start;display:flex}._header_1gpds_125 :first-child{flex-grow:1}._destinationItem_1gpds_135{margin-bottom:.5em}\n/*$vite$:1*/",document.head.appendChild(X);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(ce=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[ce]="d98ba468-7bca-403d-9d81-89f203a174a1",t._sentryDebugIdIdentifier="sentry-dbid-d98ba468-7bca-403d-9d81-89f203a174a1")}catch(t){}var t,ce;ee=u({__name:"EventDestinationCard",props:{eventBus:{},destination:{default:()=>G(J)},readonly:{type:Boolean}},emits:["edit","remove"],setup(e,{emit:t}){const i="open",s="delete",{confirm:o}=N(),l=k(),u=K(),m=c({}),y=c(null),x=e,T=t;f((()=>{m.value=Object.assign(G(J),x.destination),x.eventBus?.on("destinationWasSaved",j)})),_((()=>{x.eventBus?.off("destinationWasSaved",j)}));const D=n((()=>{const e=[{label:l.baseText("workflows.item.open"),value:i}];return x.readonly||e.push({label:l.baseText("workflows.item.delete"),value:s}),e})),z=n((()=>`settings.log-streaming.${x.destination.__type}`));function j(){Q(x.destination.id),u.getDestination(x.destination.id)&&(m.value=Object.assign(G(J),x.destination))}async function B(e){const t=e.target;y.value===t||y.value?.contains(t)||t?.contains(y.value)||T("edit",x.destination.id)}function I(e){const t="boolean"==typeof e?e:Boolean(e);m.value.enabled=t,async function(){await u.saveDestination(m.value)}()}async function L(e){if(e===i)T("edit",x.destination.id);else if(e===s){if("confirm"!==await o(l.baseText("settings.log-streaming.destinationDelete.message",{interpolate:{destinationName:x.destination.label??""}}),l.baseText("settings.log-streaming.destinationDelete.headline"),{type:"warning",confirmButtonText:l.baseText("settings.log-streaming.destinationDelete.confirmButtonText"),cancelButtonText:l.baseText("settings.log-streaming.destinationDelete.cancelButtonText")}))return;T("remove",x.destination.id)}}return(t,n)=>(b(),g(d(E),{class:h(t.$style.cardLink),"data-test-id":"destination-card",onClick:B},{header:v((()=>[w("div",null,[r(d($),{tag:"h2",bold:"",class:h(t.$style.cardHeading)},{default:v((()=>[p(a(e.destination.label),1)])),_:1},8,["class"]),w("div",{class:h(t.$style.cardDescription)},[r(d(A),{color:"text-light",size:"small"},{default:v((()=>[w("span",null,a(d(l).baseText(z.value)),1)])),_:1})],2)])])),append:v((()=>[w("div",{ref_key:"cardActions",ref:y,class:h(t.$style.cardActions)},[w("div",{class:h(t.$style.activeStatusText),"data-test-id":"destination-activator-status"},[m.value.enabled?(b(),g(d(A),{key:0,color:"success",size:"small",bold:""},{default:v((()=>[p(a(d(l).baseText("workflowActivator.active")),1)])),_:1})):(b(),g(d(A),{key:1,color:"text-base",size:"small",bold:""},{default:v((()=>[p(a(d(l).baseText("workflowActivator.inactive")),1)])),_:1}))],2),r(d(C),{class:"mr-s",disabled:e.readonly,"model-value":m.value.enabled,title:m.value.enabled?d(l).baseText("workflowActivator.deactivateWorkflow"):d(l).baseText("workflowActivator.activateWorkflow"),"active-color":"#13ce66","inactive-color":"#8899AA","data-test-id":"workflow-activate-switch","onUpdate:modelValue":n[0]||(n[0]=e=>I(e))},null,8,["disabled","model-value","title"]),r(d(S),{actions:D.value,theme:"dark",onAction:L},null,8,["actions"])],2)])),_:1},8,["class"]))}}),te=I(ee,[["__cssModules",{$style:{cardLink:"_cardLink_s7ez3_125",activeStatusText:"_activeStatusText_s7ez3_135",cardHeading:"_cardHeading_s7ez3_143",cardDescription:"_cardDescription_s7ez3_149",cardActions:"_cardActions_s7ez3_156"}}]]),ne={class:"mb-2xl"},ae={class:"ml-m"},ie={class:"mb-l"},se={class:"mt-m text-right"},oe={key:1,"data-test-id":"action-box-licensed"},le={key:0,class:"mb-l"},de={"data-test-id":"action-box-unlicensed"},e("default",I(u({__name:"SettingsLogStreamingView",setup(e){const t="production",u=O(),S=K(),A=M(),E=L(),I=H(),N=W(),Q=V(),X=k(),ee=Z(),ce=B(),re=c(!1),ue=c([]),ge=n((()=>{const e=[];for(const[t,n]of Object.entries(S.items))e.push({key:t,label:n.destination?.label??"Destination"});return e.sort(((e,t)=>e.label.localeCompare(t.label)))})),fe=n((()=>!re.value&&u.isEnterpriseFeatureEnabled[Y.LogStreaming])),me=n((()=>R(["rbac"],{rbac:{scope:"logStreaming:manage"}})));function ve(){be()}function be(){o()?.proxy?.$forceUpdate()}function ye(){E.removeAllNodes({setStateDirty:!1,removePinData:!0}),I.markStateClean()}function pe(){ee.goToUpgrade("log-streaming","upgrade-log-streaming")}async function _e(){const e=G(J);e.id=P(),S.addDestination(e),await l(),I.openModalWithData({name:q,data:{destination:e,isNew:!0,eventBus:ce}})}async function xe(e){if(!e)return;await S.deleteDestination(e);const t=A.getNodeByName(e);t&&A.removeNode(t)}return f((async()=>{Q.set(X.baseText("settings.log-streaming.heading")),fe.value&&(await N.fetchCredentialTypes(!1),await N.fetchAllCredentials(),I.nodeViewInitialized=!1,await async function(){S.clearEventNames(),S.clearDestinations(),ue.value=[];const e=await S.fetchEventNames();if(e)for(const n of e)S.addEventName(n);const t=await S.fetchDestinations();if(t)for(const n of t)S.addDestination(n),ue.value.push(n);be()}(),S.$onAction((({name:e,after:t})=>{"removeDestination"!==e&&"updateDestination"!==e||t((async()=>{be()}))})),ce.on("destinationWasSaved",ve),ce.on("remove",xe),ce.on("closing",ye))})),_((()=>{ce.off("destinationWasSaved",ve),ce.off("remove",xe),ce.off("closing",ye)})),(e,n)=>{const o=x("n8n-html");return b(),i("div",null,[w("div",{class:h(e.$style.header)},[w("div",ne,[r(d($),{size:"2xlarge"},{default:v((()=>[p(a(d(X).baseText("settings.log-streaming.heading")),1)])),_:1}),"production"!==d(t)?(b(),i(m,{key:0},[w("span",ae,"Disable License ("+a(d(t))+")Â ",1),r(d(C),{modelValue:re.value,"onUpdate:modelValue":n[0]||(n[0]=e=>re.value=e),size:"large","data-test-id":"disable-license-toggle"},null,8,["modelValue"])],64)):s("",!0)])],2),fe.value?(b(),i(m,{key:0},[w("div",ie,[r(d(j),{theme:"info",type:"note"},{default:v((()=>[T(w("span",null,null,512),[[o,d(X).baseText("settings.log-streaming.infoText")]])])),_:1})]),S.items&&Object.keys(S.items).length>0?(b(),i(m,{key:0},[(b(!0),i(m,null,y(ge.value,(t=>(b(),g(d(U),{key:t.key,gutter:10,class:h(e.$style.destinationItem)},{default:v((()=>[d(S).items[t.key]?.destination?(b(),g(d(F),{key:0},{default:v((()=>[r(te,{destination:d(S).items[t.key]?.destination,"event-bus":d(ce),readonly:!me.value,onRemove:e=>xe(d(S).items[t.key]?.destination?.id),onEdit:e=>async function(e){if(!e)return;const t=S.getDestination(e);t&&I.openModalWithData({name:q,data:{destination:t,isNew:!1,eventBus:ce}})}(d(S).items[t.key]?.destination?.id)},null,8,["destination","event-bus","readonly","onRemove","onEdit"])])),_:2},1024)):s("",!0)])),_:2},1032,["class"])))),128)),w("div",se,[me.value?(b(),g(d(D),{key:0,size:"large",onClick:_e},{default:v((()=>[p(a(d(X).baseText("settings.log-streaming.add")),1)])),_:1})):s("",!0)])],64)):(b(),i("div",oe,[r(d(z),{"button-text":d(X).baseText("settings.log-streaming.add"),"onClick:button":_e},{heading:v((()=>[T(w("span",null,null,512),[[o,d(X).baseText("settings.log-streaming.addFirstTitle")]])])),_:1},8,["button-text"])]))],64)):(b(),i(m,{key:1},[d(X).baseText("settings.log-streaming.infoText")?(b(),i("div",le,[r(d(j),{theme:"info",type:"note"},{default:v((()=>[T(w("span",null,null,512),[[o,d(X).baseText("settings.log-streaming.infoText")]])])),_:1})])):s("",!0),w("div",de,[r(d(z),{description:d(X).baseText("settings.log-streaming.actionBox.description"),"button-text":d(X).baseText("settings.log-streaming.actionBox.button"),"onClick:button":pe},{heading:v((()=>[T(w("span",null,null,512),[[o,d(X).baseText("settings.log-streaming.actionBox.title")]])])),_:1},8,["description","button-text"])])],64))])}}}),[["__cssModules",{$style:{header:"_header_1gpds_125",destinationItem:"_destinationItem_1gpds_135"}}]]))}}}));
//# sourceMappingURL=SettingsLogStreamingView-legacy-Ch4Fr4qh.js.map