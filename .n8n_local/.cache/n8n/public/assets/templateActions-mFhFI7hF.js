(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`f2d8bcd8-9500-4d76-ae5a-b92492994f8d`,e._sentryDebugIdIdentifier=`sentry-dbid-f2d8bcd8-9500-4d76-ae5a-b92492994f8d`)})()}catch{}import{Sa as e,pa as t,zn as n}from"./users.store-pCkD7Zo0.js";import{rs as r}from"./constants-D1jZwsUK.js";import{v as i}from"./_baseOrderBy-El3qbNHQ.js";import{r as a}from"./nodeTransforms-CG9uauaw.js";import{r as o}from"./templateTransforms-u0_D8fwP.js";async function s(t){let{credentialOverrides:r,nodeTypeProvider:i,rootStore:a,template:s,workflowsStore:c}=t,l=await e(a.restApiContext,{name:s.name}),u=n(o(i,s.workflow.nodes,r)),d=s.workflow.connections,f={name:l.name,nodes:u,connections:d,active:!1,meta:{templateId:s.id.toString()},pinData:s.readyToDemo?s.workflow.pinData??{}:{}};return await c.createNewWorkflow(f)}async function c(e){let{router:t,templateId:n,inNewBrowserTab:i=!1,telemetry:a,source:o}=e;a.track(`User opened cred setup`,{source:o});let s={name:r.TEMPLATE_SETUP,params:{id:n}};if(i){let e=t.resolve(s);window.open(e.href,`_blank`)}else await t.push(s)}async function l(e){let{externalHooks:n,templateId:i,templatesStore:a,inNewBrowserTab:o,router:s}=e,c={name:r.TEMPLATE_IMPORT,params:{id:i}},l={source:`workflow`,template_id:t(i),wf_template_repo_session_id:a.currentSessionId};if(await n.run(`templatesWorkflowView.openWorkflow`,l),o){let e=s.resolve(c);window.open(e.href,`_blank`)}else await s.push(c)}function u(e,t){return t.workflow.nodes.some(t=>a(e,t))}async function d(e,t){return e.getFullTemplateById(t)||(await e.fetchTemplateById(t),e.getFullTemplateById(t))}async function f(e){let{nodeTypesStore:t,templateId:n,templatesStore:r}=e,[a]=await Promise.all([d(r,n),t.loadNodeTypesIfNotLoaded()]);i(a),u(t,a)?await c(e):await l(e)}export{f as n,s as t};
//# sourceMappingURL=templateActions-mFhFI7hF.js.map