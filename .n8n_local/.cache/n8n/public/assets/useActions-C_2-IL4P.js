(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`de01b250-253b-4e4a-8a26-b58e523ebd7f`,e._sentryDebugIdIdentifier=`sentry-dbid-de01b250-253b-4e4a-8a26-b58e523ebd7f`)})()}catch{}import{C as e}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as t}from"./_MapCache-DjbOQyB7.js";import{C as n,On as r,R as i,Sr as a,U as o,V as s,Vt as c,s as l,xr as u}from"./users.store-pCkD7Zo0.js";import{$ as d,Bt as f,Cr as p,Gn as m,Gt as h,Kn as g,Mt as _,Nt as v,Qn as y,Tt as b,Wn as x,_o as S,fr as C,hr as w,ir as T,jn as E,qn as D,so as O}from"./constants-D1jZwsUK.js";import{t as k}from"./nodeCreator.store-KD9kt9dE.js";const A=()=>{let A=c(),j=k(),M=n(),N=t(),P=[b.PLUS_ENDPOINT,b.NODE_CONNECTION_ACTION,b.NODE_CONNECTION_DROP],F=e(()=>({actions:N.baseText(`nodeCreator.actionsCategory.actions`)??``,triggers:N.baseText(`nodeCreator.actionsCategory.triggers`)??``}));function I(e){let t=[p,T];return j.mergedNodes.filter(e=>t.some(t=>t===e.name)).map(t=>{let n=o(t,e,`action`);if(n.type===`action`){let e=`nodeCreator.actionsPlaceholderNode.${t.name.replace(`n8n-nodes-base.`,``)}`,r=N.baseText(e);r!==e&&(n.properties.displayName=r)}return n})}function L(e,t){return e.filter(e=>e.type===`action`&&e.properties.codex.categories.includes(t))}function R(e){let t=s([...e]),n=new Set;for(let e of t){if(e.type!==`action`)continue;let t=e.properties?.codex?.label;n.add(t)}if(n.size<=1)return t;let r=new Map;for(let e=0;e<t.length;e++){let n=t[e];if(n.type!==`action`)continue;let i=n.properties?.codex?.label;r.has(i)||r.set(i,e)}let i=0;for(let e of n){let n={uuid:e,type:`label`,key:e,subcategory:t[0].key,properties:{key:e}},a=r.get(e);a!==void 0&&(t.splice(a+i,0,n),i++)}return t}function z(e,t,n=!0){let r=L(e,t);return n?R(r):r}function B(e){let t=e.displayOptions,n=Object.keys(t?.show??{}).reduce((e,n)=>(e[n]=t?.show?.[n]?.[0],e),{});return{name:e.displayName,key:e.name,value:{...e.values,...n}}}function V(e){let t={type:e.key,actionName:e.name};return typeof e.value.language==`string`?(t.parameters={language:e.value.language},t):((typeof e.value.resource==`string`||typeof e.value.operation==`string`)&&(t.parameters={},typeof e.value.resource==`string`&&(t.parameters.resource=e.value.resource),typeof e.value.operation==`string`&&(t.parameters.operation=e.value.operation)),t)}function H(e){let t={type:i(e.key)};return(typeof e.resource==`string`||typeof e.operation==`string`)&&(t.parameters={},typeof e.resource==`string`&&(t.parameters.resource=e.resource),typeof e.operation==`string`&&(t.parameters.operation=e.operation)),t}function U(e){return e.length===2?n().isTriggerNode(e[0].type):!1}function W(e){let{selectedView:t,openSource:r}=k(),{workflowTriggerNodes:i}=l(),a=e.some(e=>n().isTriggerNode(e.type)),o=i.length>0,s=t===_,c=e.every(e=>e.type===w);return!P.includes(r)&&!a&&!o&&s&&!c}function G(e){let t=[y,v,f,m,g];if(!e.some(e=>t.includes(e.type)))return!1;let{allNodes:n}=l();return n.filter(e=>e.type!==E).length===0}function K(e){return a().aiNodes.length>0?!1:e.some(e=>{let t=M.getNodeType(e.type);return Object.keys(t?.codex?.subcategories??{}).includes(d)})}function q(e){if(e.length===0)return{nodes:[],connections:[]};let t=[],n=[],i=e.find(e=>e.type!==E);return i&&(i.openDetail=!0),K(e)||G(e)?(K(e)&&(e.unshift({type:S,isAutoAdd:!0}),n.push({from:{nodeIndex:2,type:O.AiLanguageModel},to:{nodeIndex:1}})),e.unshift({type:h,isAutoAdd:!0}),n.push({from:{nodeIndex:0},to:{nodeIndex:1}})):W(e)?(e.unshift({type:E,isAutoAdd:!0}),n.push({from:{nodeIndex:0},to:{nodeIndex:1}})):U(e)&&n.push({from:{nodeIndex:0},to:{nodeIndex:1}}),e.forEach((e,i)=>{switch(e.type===`@n8n/n8n-nodes-langchain.openAi.assistant.message`&&(e.type=D),t.push(e),e.type){case C:{let e=i,a=e+1;t.push({type:x,isAutoAdd:!0,positionOffset:[0,r],name:N.baseText(`nodeView.replaceMe`)}),n.push({from:{nodeIndex:e,outputIndex:1},to:{nodeIndex:a}},{from:{nodeIndex:a},to:{nodeIndex:e}});break}}}),{nodes:t,connections:n}}function J(e,t,n=``){let{$onAction:r}=l(),i=r(({name:r,after:a,args:o})=>{r!==`addNode`||o[0].type!==e.key||a(()=>{A.setLastNodeParameters(e),t&&Y(e,t,n),i()})});return i}function Y(e,t,n){let r={node_type:e.key,action:e.name,source_mode:n.toLowerCase(),resource:e.value.resource||``};u().run(`nodeCreateList.addAction`,r)}return{actionsCategoryLocales:F,actionDataToNodeTypeSelectedPayload:V,nodeCreateElementToNodeTypeSelectedPayload:H,getPlaceholderTriggerActions:I,parseCategoryActions:z,getAddedNodesAndConnections:q,getActionData:B,setAddedNodeActionParameters:J}};export{A as t};
//# sourceMappingURL=useActions-C_2-IL4P.js.map