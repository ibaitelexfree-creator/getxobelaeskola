(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`dcbe6812-1e1f-4511-8159-8abfefb9a06f`,e._sentryDebugIdIdentifier=`sentry-dbid-dcbe6812-1e1f-4511-8159-8abfefb9a06f`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,It as a,M as o,P as s,T as c,Z as l,_t as u,bt as d,et as f,h as p,j as m,vn as h,w as g}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as _}from"./_MapCache-DjbOQyB7.js";import{At as v,Ci as y,Pi as b,Ui as x,Vi as S,bt as C,gi as w,wi as T}from"./src-CppJvwzX.js";import{t as E}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{Gt as D,fn as O,r as k,wr as A,yr as j}from"./users.store-pCkD7Zo0.js";import{Ir as M,Mr as N,Ur as P,ei as F}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import{t as I}from"./useDebounce-D6lADr4O.js";import{t as L}from"./dataTable.store-dy4dvFXe.js";import"./Modal-DQeDdfPI.js";import"./folders.store-CS_gIPIm.js";import"./ProjectIcon-D-HRIqn6.js";import"./EnterpriseEdition.ee-BF3fOBuQ.js";import{t as R}from"./TimeAgo-BLqTSlco.js";import"./orderBy-KAUxkCYD.js";import"./ProjectSharing-DgwjJKfK.js";import{t as z}from"./insights.store-CIIvho7C.js";import"./insights.constants-DHL43iRt.js";import"./insights.utils-B2NpOI0Q.js";import{r as B}from"./readyToRun.store-DM7AW4os.js";import{t as V}from"./ResourcesListLayout-Dgyw19qu.js";import"./ResourceFiltersDropdown-tUuDPU--.js";import{t as H}from"./ProjectHeader-KFxxuu0P.js";import{t as U}from"./InsightsSummary-8qyRMqyz.js";import{t as W}from"./DataTableActions-DbP1VLfN.js";var G={"data-test-id":`data-table-card`},K=E(s({__name:`DataTableCard`,props:{dataTable:{},readOnly:{type:Boolean,default:!1},showOwnershipBadge:{type:Boolean,default:!1}},setup(a){let s=_(),l=L(),u=a,y=e(()=>({name:M,params:{projectId:u.dataTable.projectId,id:u.dataTable.id}})),b=e(()=>l.dataTableSizes[u.dataTable.id]??0);return(e,a)=>(f(),n(`div`,G,[o(i(w),{to:y.value,class:`data-table-card`,"data-test-id":`data-table-card-link`},{default:d(()=>[o(i(C),{class:h(e.$style.card)},{prepend:d(()=>[o(i(x),{"data-test-id":`data-table-card-icon`,class:h(e.$style[`card-icon`]),icon:`table`,size:`xlarge`,"stroke-width":1.5},null,8,[`class`])]),header:d(()=>[g(`div`,{class:h(e.$style[`card-header`])},[o(i(S),{tag:`h2`,bold:``,"data-test-id":`data-table-card-name`},{default:d(()=>[m(t(u.dataTable.name),1)]),_:1}),u.readOnly?(f(),c(i(v),{key:0,class:`ml-3xs`,theme:`tertiary`,bold:``},{default:d(()=>[m(t(i(s).baseText(`workflows.item.readonly`)),1)]),_:1})):r(``,!0)],2)]),footer:d(()=>[g(`div`,{class:h(e.$style[`card-footer`])},[o(i(S),{size:`small`,color:`text-light`,class:h([e.$style[`info-cell`],e.$style[`info-cell--size`]]),"data-test-id":`data-table-card-size`},{default:d(()=>[m(t(i(s).baseText(`dataTable.card.size`,{interpolate:{size:b.value}})),1)]),_:1},8,[`class`]),o(i(S),{size:`small`,color:`text-light`,class:h([e.$style[`info-cell`],e.$style[`info-cell--column-count`]]),"data-test-id":`data-table-card-column-count`},{default:d(()=>[m(t(i(s).baseText(`dataTable.card.column.count`,{interpolate:{count:u.dataTable.columns.length+1}})),1)]),_:1},8,[`class`]),o(i(S),{size:`small`,color:`text-light`,class:h([e.$style[`info-cell`],e.$style[`info-cell--updated`]]),"data-test-id":`data-table-card-last-updated`},{default:d(()=>[m(t(i(s).baseText(`workerList.item.lastUpdated`))+` `,1),o(R,{date:String(u.dataTable.updatedAt)},null,8,[`date`])]),_:1},8,[`class`]),o(i(S),{size:`small`,color:`text-light`,class:h([e.$style[`info-cell`],e.$style[`info-cell--created`]]),"data-test-id":`data-table-card-created`},{default:d(()=>[m(t(i(s).baseText(`workflows.item.created`))+` `,1),o(R,{date:String(u.dataTable.createdAt)},null,8,[`date`])]),_:1},8,[`class`])],2)]),append:d(()=>[g(`div`,{class:h(e.$style[`card-actions`]),onClick:a[0]||=p(()=>{},[`prevent`])},[o(W,{"data-table":u.dataTable,"is-read-only":u.readOnly,location:`card`},null,8,[`data-table`,`is-read-only`])],2)]),_:1},8,[`class`])]),_:1},8,[`to`])]))}}),[[`__cssModules`,{$style:{card:`_card_13qfw_125`,"card-icon":`_card-icon_13qfw_133`,"card-header":`_card-header_13qfw_140`,"card-footer":`_card-footer_13qfw_148`,"info-cell":`_info-cell_13qfw_152`,"info-cell--created":`_info-cell--created_13qfw_161`,"info-cell--column-count":`_info-cell--column-count_13qfw_162`,"info-cell--size":`_info-cell--size_13qfw_163`}}]]),q=s({__name:`DataTableView`,setup(n){let s=_(),p=y(),h=T(),g=B(),{callDebounced:v}=I(),x=O(),S=j(),C=L(),w=z(),E=D(),M=A(),P=k(),R=a(!0),W=a(1),G=a(10),q=e(()=>C.dataTables.map(e=>({...e,resourceType:`dataTable`}))),J=e(()=>C.totalCount),Y=e(()=>g.isOverviewSubPage?E.personalProject:E.currentProject),X=e(()=>M.preferences.branchReadOnly),Z=async()=>{R.value=!0;let e=g.isOverviewSubPage?``:E.currentProjectId;try{await C.fetchDataTables(e??``,W.value,G.value)}catch(e){S.showError(e,`Error loading data tables`)}finally{R.value=!1}},Q=async e=>{e.page&&(W.value=e.page),e.pageSize&&(G.value=e.pageSize),R.value||await v(Z,{debounceTime:200,trailing:!0})},$=()=>{h.push({name:F,params:{projectId:Y.value?.id,new:`new`}})};return l(()=>{x.set(s.baseText(`dataTable.dataTables`))}),u(()=>p.params.new,()=>{p.params.new===`new`?P.openModal(N):P.closeModal(N)},{immediate:!0}),(e,n)=>(f(),c(V,{ref:`layout`,"resource-key":`dataTable`,type:`list-paginated`,resources:q.value,initialize:Z,"type-props":{itemSize:80},loading:R.value,disabled:!1,"total-items":J.value,"dont-perform-sorting-and-filtering":!0,"ui-config":{searchEnabled:!1,showFiltersDropdown:!1,sortEnabled:!1},"onUpdate:paginationAndSort":Q},{header:d(()=>[o(H,{"main-button":`dataTable`},{default:d(()=>[i(g).isOverviewSubPage&&i(w).isSummaryEnabled?(f(),c(U,{key:0,loading:i(w).weeklySummary.isLoading,summary:i(w).weeklySummary.state,"time-range":`week`},null,8,[`loading`,`summary`])):r(``,!0)]),_:1})]),empty:d(()=>[o(i(b),{"data-test-id":`empty-data-table-action-box`,heading:i(s).baseText(`dataTable.empty.label`),description:i(s).baseText(`dataTable.empty.description`),"button-text":i(s).baseText(`dataTable.add.button.label`),"button-type":`secondary`,"button-disabled":!i(C).projectPermissions.dataTable.create,"button-icon":i(C).projectPermissions.dataTable.create?void 0:`lock`,"onClick:button":$},{disabledButtonTooltip:d(()=>[m(t(i(s).baseText(`dataTable.empty.button.disabled.tooltip`)),1)]),_:1},8,[`heading`,`description`,`button-text`,`button-disabled`,`button-icon`])]),item:d(({item:e})=>[o(K,{class:`mb-2xs`,"data-table":e,"show-ownership-badge":i(g).isOverviewSubPage,"read-only":X.value},null,8,[`data-table`,`show-ownership-badge`,`read-only`])]),_:1},8,[`resources`,`loading`,`total-items`]))}});export{q as default};
//# sourceMappingURL=DataTableView-Bb5EaulR.js.map