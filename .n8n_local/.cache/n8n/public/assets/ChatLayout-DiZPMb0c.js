(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`37be9b71-a877-4b07-a44f-12baf28d3aa1`,e._sentryDebugIdIdentifier=`sentry-dbid-37be9b71-a877-4b07-a44f-12baf28d3aa1`)})()}catch{}import{C as e,D as t,It as n,P as r,_t as i,at as a,et as o,vn as s}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{M as c,O as l}from"./_MapCache-DjbOQyB7.js";import{kt as u,wi as d}from"./src-CppJvwzX.js";import{t as f}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Gt as p,r as m,rt as h,ws as g}from"./users.store-pCkD7Zo0.js";import{$o as _,Gs as v,Qo as y,Zo as b,ci as x,di as S,es as C,oi as w,si as T}from"./constants-D1jZwsUK.js";import{l as E}from"./constants-BeYoedeu.js";import{m as D,p as O}from"./chat.store-a0NAXg9S.js";const k=_(S,C().or(b())),A=x.and(y({cachedDisplayName:C().optional(),cachedIcon:T.optional()})).transform(e=>({...e,cachedDisplayName:e.cachedDisplayName||(D(e)?e.model:``)}));function j(t){let r=n(!1),a=h(),o=g(),s=p(),l=c(v(t),{},{writeDefaults:!1,shallow:!0,serializer:{read:e=>{try{return k.parse(JSON.parse(e))}catch{return{}}},write:e=>JSON.stringify(e)}}),u=e(()=>r.value||a.allCredentials.length>0),d=e(()=>Object.fromEntries(S.options.map(e=>{if(!O(e))return[e,null];let t=w[e];if(!t)return[e,null];let n=a.getCredentialsByType(t),r=o.moduleSettings?.[`chat-hub`]?.providers[e];return r?.credentialId&&n.some(e=>e.id===r.credentialId)?[e,r.credentialId]:[e,n.toSorted((e,t)=>new Date(t.createdAt)-+new Date(e.createdAt))[0]?.id??null]}))),f=e(()=>u.value?S.options.reduce((e,t)=>{let n=l.value[t]??null;return e[t]=n&&a.allCredentials.some(e=>e.id===n)?n:d.value[t],e},{}):null);function m(e,t){l.value={...l.value,[e]:t}}return i(()=>s.personalProject,async e=>{e&&(await Promise.all([a.fetchCredentialTypes(!1),a.fetchAllCredentialsForWorkflow({projectId:e.id})]),r.value=!0)},{immediate:!0}),{credentialsByProvider:f,selectCredential:m}}var M=f(r({__name:`ChatLayout`,setup(e){let n=d(),r=m(),{isCtrlKeyPressed:i}=u();return l(document,`keydown`,e=>{e.key.toLowerCase()===`o`&&i(e)&&e.shiftKey&&!r.isAnyModalOpen&&(e.preventDefault(),e.stopPropagation(),n.push({name:E,force:!0}))}),(e,n)=>(o(),t(`div`,{class:s(e.$style.component)},[a(e.$slots,`default`)],2))}}),[[`__cssModules`,{$style:{component:`_component_1txea_125`}}]]);export{j as n,A as r,M as t};
//# sourceMappingURL=ChatLayout-DiZPMb0c.js.map