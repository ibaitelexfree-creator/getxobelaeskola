(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`cab3a3e5-b907-4ed8-b65e-bbbf6aa5e131`,e._sentryDebugIdIdentifier=`sentry-dbid-cab3a3e5-b907-4ed8-b65e-bbbf6aa5e131`)})()}catch{}import{C as e,_t as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{Ci as n}from"./src-CppJvwzX.js";import{Ir as r,Lr as i,Wc as a,jr as o,r as s,un as c,ws as l}from"./users.store-pCkD7Zo0.js";import{bl as u,ts as d}from"./constants-D1jZwsUK.js";import{j as f}from"./_baseOrderBy-El3qbNHQ.js";import{t as p}from"./assistant.store-BGYzebcZ.js";function m(e,t){return typeof e==`string`&&t.includes(e)}const h=f(a.CHAT_PANEL,()=>{let a=s(),u=n(),f=o(),h=l(),g=e(()=>f.activeMode===`assistant`),_=e(()=>f.activeMode===`builder`),v=e(()=>h.isAiAssistantOrBuilderEnabled&&d.includes(u.name));async function y(e){let t=e?.mode,n=e?.showCoachmark??!0;t&&(f.activeMode=t),f.showCoachmark=n;let o=f.activeMode===`assistant`?r:i,s=u?.name;if(!m(s,o)){b();return}if(f.isOpen=!0,f.activeMode===`builder`){let e=c();e.streaming||(e.fetchBuilderCredits(),e.loadSessions())}else if(f.activeMode===`assistant`){let e=p();e.chatMessages=e.chatMessages.map(e=>({...e,read:!0}))}a.appGridDimensions={...a.appGridDimensions,width:window.innerWidth-f.width}}function b(){f.isOpen=!1,f.showCoachmark=!1,setTimeout(()=>{a.appGridDimensions={...a.appGridDimensions,width:window.innerWidth};let e=p();e.isSessionEnded&&e.resetAssistantChat()},250)}async function x(e){f.isOpen?b():await y(e)}function S(e){let t=e===`assistant`?r:i,n=u?.name;if(!m(n,t)){b();return}f.activeMode=e,f.showCoachmark=!1}function C(e){let t=Math.min(Math.max(e,380),425);f.width=t,f.isOpen&&(a.appGridDimensions={...a.appGridDimensions,width:window.innerWidth-t})}async function w(e){await p().initCredHelp(e),await y({mode:`assistant`})}async function T(e){await p().initErrorHelper(e),await y({mode:`assistant`})}return t(()=>u?.name,e=>{if(!e)return;let t=c();if(!f.isOpen&&t.streaming&&m(e,i)){y({mode:`builder`});return}f.isOpen&&(m(e,f.activeMode===`assistant`?r:i)?m(e,i)&&!t.streaming&&t.resetBuilderChat():b())}),{isOpen:e(()=>f.isOpen),width:e(()=>f.width),activeMode:e(()=>f.activeMode),showCoachmark:e(()=>f.showCoachmark),isAssistantModeActive:g,isBuilderModeActive:_,canShowAiButtonOnCanvas:v,open:y,close:b,toggle:x,switchMode:S,updateWidth:C,openWithCredHelp:w,openWithErrorHelper:T,DEFAULT_CHAT_WIDTH:400,MIN_CHAT_WIDTH:380,MAX_CHAT_WIDTH:425}});export{h as t};
//# sourceMappingURL=chatPanel.store-YdM_XYGp.js.map