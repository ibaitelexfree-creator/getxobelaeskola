(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`c2d8adb3-82c2-4989-ae52-067c2de5fdf8`,e._sentryDebugIdIdentifier=`sentry-dbid-c2d8adb3-82c2-4989-ae52-067c2de5fdf8`)})()}catch{}import{C as e,Pt as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{As as n,Ms as r,Ns as i,js as a,ks as o,ws as s}from"./users.store-pCkD7Zo0.js";import{j as c,r as l}from"./_baseOrderBy-El3qbNHQ.js";var u=`Community`,d={loading:!0,data:{usage:{activeWorkflowTriggers:{limit:-1,value:0,warningThreshold:.8},workflowsHavingEvaluations:{value:0,limit:0}},license:{planId:``,planName:u}}};const f=c(`usage`,()=>{let c=l(),f=s(),p=t({...d}),m=e(()=>p.data.license.planName||u),h=e(()=>p.data.license.planId),g=e(()=>p.data.usage.activeWorkflowTriggers.limit),_=e(()=>p.data.usage.activeWorkflowTriggers.value),v=e(()=>p.data.usage.workflowsHavingEvaluations.limit),y=e(()=>p.data.usage.workflowsHavingEvaluations.value),b=e(()=>_.value/g.value*100),x=e(()=>f.settings.instanceId),S=e(()=>p.data.managementToken),C=e(()=>f.settings.versionCli),w=e(()=>`instanceid=${x.value}&version=${C.value}`),T=e(()=>f.settings.license.environment===`production`?`https://subscription.n8n.io`:`https://staging-subscription.n8n.io`),E=e=>{p.loading=e},D=e=>{p.data=e},O=async()=>{D(await n(c.restApiContext))};return{setLoading:E,getLicenseInfo:O,setData:D,activateLicense:async(e,t)=>{D(await o(c.restApiContext,{activationKey:e,eulaUri:t})),await f.getSettings(),await f.getModuleSettings()},refreshLicenseManagementToken:async()=>{try{D(await r(c.restApiContext))}catch{await O()}},requestEnterpriseLicenseTrial:async()=>{await i(c.restApiContext)},registerCommunityEdition:async e=>await a(c.restApiContext,{email:e}),planName:m,planId:h,activeWorkflowTriggersLimit:g,activeWorkflowTriggersCount:_,workflowsWithEvaluationsLimit:v,workflowsWithEvaluationsCount:y,executionPercentage:b,instanceId:x,managementToken:S,appVersion:C,isCloseToLimit:e(()=>p.data.usage.activeWorkflowTriggers.limit<0?!1:_.value/g.value>=p.data.usage.activeWorkflowTriggers.warningThreshold),viewPlansUrl:e(()=>`${T.value}?${w.value}`),managePlanUrl:e(()=>`${T.value}/manage?token=${S.value}&${w.value}`),isLoading:e(()=>p.loading),telemetryPayload:e(()=>({instance_id:x.value,action:`view_plans`,plan_name_current:m.value,usage:_.value,quota:g.value}))}});export{f as t};
//# sourceMappingURL=usage.store-CK5aU6GK.js.map