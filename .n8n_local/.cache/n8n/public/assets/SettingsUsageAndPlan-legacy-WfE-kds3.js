!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./dialog-legacy-fV5dITAe.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./usePageRedirectionHelper-legacy-DkG-ZaDD.js","./usage.store-legacy-COjB70KG.js"],(function(e,a){var t,n,l,s,i,o,c,u,d,r,g,p,_,f,v,y,m,b,h,x,w,k,T,A,P,j,$,C,L,V,U,z,B,W,I,q,N,E,M,D,R,S,O,H,F,G,J,K,Q,Y,Z,X,ee,ae,te;return{setters:[function(e){e.o},function(e){t=e.C,n=e.Cn,l=e.D,s=e.E,i=e.Gt,o=e.It,c=e.M,u=e.P,d=e.T,r=e.Z,g=e.bn,p=e.bt,_=e.et,f=e.h,v=e.j,y=e.vn,m=e.w},function(e){b=e.bt,h=e.gt},function(e){x=e.At,w=e.Ci,k=e.Hi,T=e.Oi,A=e.Q,P=e.U,j=e.Vi,$=e.ji,C=e.st,L=e.wi,V=e.zi},function(e){U=e.t},function(e){},function(e){z=e.fn,B=e.qa,W=e.r,I=e.t,q=e.ur,N=e.yr,E=e.zt},function(e){M=e.t},function(e){D=e.qo},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){R=e.t},function(e){S=e.t}],execute:function(){(O=document.createElement("style")).textContent="._auditNotice_hanyh_125{margin-top:var(--spacing--sm)}._checkboxWrapper_hanyh_129{margin-top:var(--spacing--md)}._footerActions_hanyh_133{justify-content:flex-end;gap:var(--spacing--2xs);display:flex}._center_1weln_125>div{justify-content:center}._actionBox_1weln_129{margin:var(--spacing--2xl)0 0}._spacedFlex_1weln_133{justify-content:space-between;align-items:center;display:flex}._title_1weln_139{padding:var(--spacing--2xl)0 var(--spacing--md);align-items:center;display:flex}._quota_1weln_145{height:54px;padding:0 var(--spacing--sm);margin:0 0 var(--spacing--xs);background:var(--color--background--light-3);border-radius:var(--radius--lg);border:1px solid var(--color--foreground);white-space:nowrap;justify-content:space-between;align-items:center;display:flex}._quota_1weln_145 ._count_1weln_157{text-transform:lowercase;font-size:var(--font-size--sm)}._buttons_1weln_162{padding:var(--spacing--xl)0 0;justify-content:flex-end;display:flex}._buttons_1weln_162 button{margin-left:var(--spacing--xs)}._buttons_1weln_162 button a{color:inherit;padding:var(--spacing--xs)var(--spacing--md);margin:calc(var(--spacing--xs)*-1)calc(var(--spacing--md)*-1);text-decoration:none;display:inline-block}._chart_1weln_178{flex-grow:1;justify-content:flex-end;align-items:center;display:flex}._chartLine_1weln_185{width:100%;max-width:260px;height:10px;margin:0 var(--spacing--md);background:var(--color--background);border-radius:10px;display:block}._chartBar_1weln_195{float:left;background:var(--color--secondary);border-radius:10px;max-width:100%;height:100%;transition:width .2s cubic-bezier(.19,1,.22,1)}div[class*=info]>span>span:last-child{padding:0 0 0 var(--spacing--4xs);line-height:1.4}._titleTooltip_1weln_209{margin:0 0 0 var(--spacing--2xs);align-items:center;display:flex}._dialogButtonsContainer_1weln_215{justify-content:flex-end;display:flex}.settings-usage-and-plan[data-v-151c249f] .el-dialog__wrapper{justify-content:center;align-items:center;display:flex}.settings-usage-and-plan[data-v-151c249f] .el-dialog__wrapper .el-dialog{margin:0}.settings-usage-and-plan[data-v-151c249f] .el-dialog__wrapper .el-dialog .el-dialog__footer button{margin-left:var(--spacing--xs)}\n/*$vite$:1*/",document.head.appendChild(O);try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(ne=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[ne]="4238701a-dc23-4f35-b604-fdcaeac57da5",a._sentryDebugIdIdentifier="sentry-dbid-4238701a-dc23-4f35-b604-fdcaeac57da5")}catch(a){}var a,ne;H=["href"],F=u({__name:"EulaAcceptanceModal",props:{modelValue:{type:Boolean},eulaUrl:{}},emits:["update:modelValue","accept","cancel"],setup(e,{emit:a}){const l=a,s=o(!1),u=t((()=>!s.value)),r=()=>{s.value=!1,l("cancel")},g=()=>{l("accept")},f=()=>{l("update:modelValue",!1),r()};return(a,t)=>(_(),d(i(M),{"model-value":e.modelValue,title:i(h).baseText("settings.usageAndPlan.dialog.eula.title"),"before-close":f,width:"540px","data-test-id":"eula-acceptance-modal"},{default:p((()=>[m("div",null,[c(i(j),{color:"text-base",size:"medium"},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.dialog.eula.description")),1)])),_:1}),c(i(j),{class:y(a.$style.auditNotice),color:"text-base",size:"medium",tag:"p"},{default:p((()=>[m("em",null,n(i(h).baseText("settings.usageAndPlan.dialog.eula.audit.notice")),1)])),_:1},8,["class"]),m("div",{class:y(a.$style.checkboxWrapper)},[c(i(C),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"data-test-id":"eula-checkbox"},{label:p((()=>[m("span",null,[v(n(i(h).baseText("settings.usageAndPlan.dialog.eula.checkbox.label"))+" "+n(" ")+" ",1),m("a",{href:e.eulaUrl,target:"_blank",rel:"noopener noreferrer","data-test-id":"eula-link"},n(i(h).baseText("settings.usageAndPlan.dialog.eula.link.text")),9,H),t[1]||(t[1]=v(". ",-1))])])),_:1},8,["modelValue"])],2)])])),footer:p((()=>[m("div",{class:y(a.$style.footerActions)},[c(i(k),{variant:"subtle","data-test-id":"eula-cancel-button",onClick:r},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.dialog.eula.button.cancel")),1)])),_:1}),c(i(k),{variant:"solid",disabled:u.value,"data-test-id":"eula-accept-button",onClick:g},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.dialog.eula.button.accept")),1)])),_:1},8,["disabled"])],2)])),_:1},8,["model-value","title"]))}}),G=U(F,[["__cssModules",{$style:{auditNotice:"_auditNotice_hanyh_125",checkboxWrapper:"_checkboxWrapper_hanyh_129",footerActions:"_footerActions_hanyh_133"}}]]),J={class:"settings-usage-and-plan"},K={key:0},Q={key:0},Y={key:1},Z={key:0},X={key:1},ee=["href"],ae=["href"],te=u({__name:"SettingsUsageAndPlan",setup(e){const a=S(),u=w(),C=L(),U=W(),O=I(),H=N(),F=z(),te=R(),ne=o(`callback=${encodeURIComponent(`${window.location.origin}${window.location.pathname}`)}`),le=t((()=>`${a.viewPlansUrl}&${ne.value}&source=usage_page`)),se=t((()=>`${a.managePlanUrl}&${ne.value}`)),ie=o(!1),oe=o(""),ce=o(null),ue=o(!1),de=o(""),re=t((()=>q(["rbac"],{rbac:{scope:"license:manage"}}))),ge=t((()=>{const[e,t]=a.planName.split(" ");return{name:t,badge:e}})),pe=t((()=>"community"===a.planName.toLowerCase())),_e=t((()=>"registered community"===a.planName.toLowerCase())),fe=t((()=>D(O.currentUser?.globalScopes).community.register)),ve=(e=!1)=>{const t=e?h.baseText("settings.usageAndPlan.license.activation.success.message.eula",{interpolate:{name:a.planName}}):h.baseText("settings.usageAndPlan.license.activation.success.message",{interpolate:{name:a.planName,type:a.planId?h.baseText("settings.usageAndPlan.plan"):h.baseText("settings.usageAndPlan.edition")}});H.showMessage({type:"success",title:h.baseText("settings.usageAndPlan.license.activation.success.title"),message:t})},ye=e=>{H.showError(e,h.baseText("settings.usageAndPlan.license.activation.error.title"))},me=async e=>{try{await a.activateLicense(oe.value.trim(),e?.trim()),ie.value=!1,ue.value=!1,oe.value="",ve(!!e)}catch(t){if((e=>{const a=e;return 400===a.httpStatusCode&&!!a.meta?.eulaUrl})(t))return de.value=t.meta.eulaUrl,ue.value=!0,void(ie.value=!1);ye(t)}},be=async()=>{try{await me(de.value)}catch(e){ue.value=!1,ye(e)}},he=()=>{ue.value=!1,de.value="",oe.value=""},xe=()=>{ie.value=!1,oe.value=""},we=()=>{ue.value||xe()};r((async()=>{if(F.set(h.baseText("settings.usageAndPlan.title")),a.setLoading(!0),u.query.key)try{return await a.activateLicense(u.query.key),await C.replace({query:{}}),ve(),void a.setLoading(!1)}catch(e){ye(e)}try{!u.query.key&&re.value?await a.refreshLicenseManagementToken():await a.getLicenseInfo(),a.setLoading(!1)}catch(e){e.name||(e.name=h.baseText("settings.usageAndPlan.error")),H.showError(e,e.name,e.message)}}));const ke=e=>{const t=a.telemetryPayload;t.action=e,E.track("User clicked button on usage page",t)},Te=()=>{ie.value=!0,ke("add_activation_key")},Ae=()=>{te.goToUpgrade("usage_page","open"),ke("view_plans")},Pe=()=>{ke("manage_plan")},je=()=>{ce.value?.focus()},$e=()=>{U.openModalWithData({name:B,data:{customHeading:void 0}})};return(e,t)=>(_(),l("div",J,[c(i(V),{tag:"h2",size:"2xlarge"},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.title")),1)])),_:1}),i(a).isLoading?s("",!0):(_(),l("div",K,[c(i(V),{tag:"h3",class:y(e.$style.title),size:"large"},{default:p((()=>[c(i(b),{keypath:"settings.usageAndPlan.description",tag:"span",scope:"global"},{name:p((()=>[v(n(ge.value.name??i(a).planName),1)])),type:p((()=>[i(a).planId?(_(),l("span",Q,n(i(h).baseText("settings.usageAndPlan.plan")),1)):(_(),l("span",Y,n(i(h).baseText("settings.usageAndPlan.edition")),1))])),_:1}),ge.value.badge&&ge.value.name?(_(),l("span",{key:0,class:y(e.$style.titleTooltip)},[c(i(T),{placement:"top"},{content:p((()=>[_e.value?(_(),d(i(b),{key:0,keypath:"settings.usageAndPlan.license.communityRegistered.tooltip",scope:"global"})):s("",!0)])),default:p((()=>[c(i(x),null,{default:p((()=>[v(n(ge.value.badge),1)])),_:1})])),_:1})],2)):s("",!0)])),_:1},8,["class"]),pe.value&&fe.value?(_(),d(i(P),{key:0,class:"mt-0",theme:"warning"},{default:p((()=>[c(i(b),{keypath:"settings.usageAndPlan.callOut",scope:"global"},{link:p((()=>[c(i(k),{variant:"ghost",class:"pl-0 pr-0",label:i(h).baseText("settings.usageAndPlan.callOut.link"),onClick:$e},null,8,["label"])])),_:1})])),_:1})):s("",!0),m("div",{class:y(e.$style.quota)},[c(i(j),{size:"medium",color:"text-light"},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.activeWorkflows")),1)])),_:1}),m("div",{class:y(e.$style.chart)},[i(a).activeWorkflowTriggersLimit>0?(_(),l("span",{key:0,class:y(e.$style.chartLine)},[m("span",{class:y(e.$style.chartBar),style:g({width:`${i(a).executionPercentage}%`})},null,6)],2)):s("",!0),c(i(b),{tag:"span",class:y(e.$style.count),keypath:"settings.usageAndPlan.activeWorkflows.count",scope:"global"},{count:p((()=>[v(n(i(a).activeWorkflowTriggersCount),1)])),limit:p((()=>[i(a).activeWorkflowTriggersLimit<0?(_(),l("span",Z,n(i(h).baseText("settings.usageAndPlan.activeWorkflows.unlimited")),1)):(_(),l("span",X,n(i(a).activeWorkflowTriggersLimit),1))])),_:1},8,["class"])],2)],2),c(i(A),null,{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.activeWorkflows.hint")),1)])),_:1}),m("div",{class:y(e.$style.buttons)},[re.value?(_(),d(i(k),{key:0,variant:"subtle",class:y(e.$style.buttonTertiary),size:"large",onClick:Te},{default:p((()=>[m("span",null,n(i(h).baseText("settings.usageAndPlan.button.activation")),1)])),_:1},8,["class"])):s("",!0),i(a).managementToken?(_(),d(i(k),{key:1,size:"large",onClick:Pe},{default:p((()=>[m("a",{href:se.value,target:"_blank"},n(i(h).baseText("settings.usageAndPlan.button.manage")),9,ee)])),_:1})):(_(),d(i(k),{key:2,size:"large",onClick:f(Ae,["prevent"])},{default:p((()=>[m("a",{href:le.value,target:"_blank"},n(i(h).baseText("settings.usageAndPlan.button.plans")),9,ae)])),_:1}))],2),c(i(M),{modelValue:ie.value,"onUpdate:modelValue":t[2]||(t[2]=e=>ie.value=e),width:"480px",top:"0",title:i(h).baseText("settings.usageAndPlan.dialog.activation.title"),"modal-class":e.$style.center,onClosed:we,onOpened:je},{default:p((()=>[c(i($),{ref_key:"activationKeyInput",ref:ce,modelValue:oe.value,"onUpdate:modelValue":t[0]||(t[0]=e=>oe.value=e),placeholder:i(h).baseText("settings.usageAndPlan.dialog.activation.label")},null,8,["modelValue","placeholder"])])),footer:p((()=>[m("div",{class:y(e.$style.dialogButtonsContainer)},[c(i(k),{variant:"subtle",onClick:xe},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.dialog.activation.cancel")),1)])),_:1}),c(i(k),{disabled:!oe.value,onClick:t[1]||(t[1]=()=>me())},{default:p((()=>[v(n(i(h).baseText("settings.usageAndPlan.dialog.activation.activate")),1)])),_:1},8,["disabled"])],2)])),_:1},8,["modelValue","title","modal-class"]),c(G,{modelValue:ue.value,"onUpdate:modelValue":t[3]||(t[3]=e=>ue.value=e),"eula-url":de.value,onAccept:be,onCancel:he},null,8,["modelValue","eula-url"])]))]))}}),e("default",U(te,[["__cssModules",{$style:{center:"_center_1weln_125",actionBox:"_actionBox_1weln_129",spacedFlex:"_spacedFlex_1weln_133",title:"_title_1weln_139",quota:"_quota_1weln_145",count:"_count_1weln_157",buttons:"_buttons_1weln_162",chart:"_chart_1weln_178",chartLine:"_chartLine_1weln_185",chartBar:"_chartBar_1weln_195",titleTooltip:"_titleTooltip_1weln_209",dialogButtonsContainer:"_dialogButtonsContainer_1weln_215"}}],["__scopeId","data-v-151c249f"]]))}}}));
//# sourceMappingURL=SettingsUsageAndPlan-legacy-WfE-kds3.js.map