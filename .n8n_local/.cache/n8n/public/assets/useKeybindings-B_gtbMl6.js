(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`cbdaf180-e516-48e9-bc2b-ec8de63b456c`,e._sentryDebugIdIdentifier=`sentry-dbid-cbdaf180-e516-48e9-bc2b-ec8de63b456c`)})()}catch{}import{C as e,It as t,Nt as n,Ut as r,z as i}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{O as a,b as o}from"./_MapCache-DjbOQyB7.js";import{kt as s}from"./src-CppJvwzX.js";import{Sc as c}from"./constants-D1jZwsUK.js";import{l}from"./canvas.utils-C8dCdoZZ.js";const u=(u,d)=>{let f=i(c,t()),p=o({window:f?.value}),{isCtrlKeyPressed:m}=s(),h=t(null);async function g(){try{h.value=await navigator.keyboard?.getLayoutMap()??null}catch{h.value=null}}if(navigator.keyboard&&(g(),`addEventListener`in navigator.keyboard)){let e=()=>{g()};navigator.keyboard.addEventListener(`layoutchange`,e),n(()=>{navigator.keyboard?.removeEventListener(`layoutchange`,e)})}let _=e(()=>r(d?.disabled)),v=e(()=>p.value&&l(p.value)),y=e(()=>Object.fromEntries(Object.entries(r(u)).flatMap(([e,t])=>e.split(`|`).map(e=>[x(e),t]))));function b(e){return e.map(e=>e.toLowerCase()).sort((e,t)=>e.localeCompare(t)).join(`+`)}function x(e){if(e.length===1)return e.toLowerCase();let t=[`+`,`_`,`-`].reduce((t,n)=>e.startsWith(n)||e.endsWith(n)?t:n+t,``);return b(e.split(RegExp(`[${t}]`)))}function S(e){return e.startsWith(`Digit`)?e.replace(`Digit`,``).toLowerCase():e.startsWith(`Key`)?e.replace(`Key`,``).toLowerCase():e.toLowerCase()}function C(e){let{shiftKey:t,altKey:n}=e,r=m(e),i=`key`in e?[e.key]:[],a=`code`in e?[S(e.code)]:[],o=[];t&&o.push(`shift`),r&&o.push(`ctrl`),n&&o.push(`alt`);let s;if(h.value&&`code`in e){let t=h.value.get(e.code);t&&(s=b([...o,t]))}return{byKey:b([...o,...i]),byCode:b([...o,...a]),byLayout:s}}function w(e){if(v.value||_.value)return;let{byKey:t,byCode:n,byLayout:r}=C(e),i=y.value[t]??y.value[n]??(r?y.value[r]:void 0),a=typeof i==`function`?i:i?.disabled()?void 0:i?.run;a&&(e.preventDefault(),e.stopPropagation(),a(e))}a(f?.value?.document??document,`keydown`,w)};export{u as t};
//# sourceMappingURL=useKeybindings-B_gtbMl6.js.map