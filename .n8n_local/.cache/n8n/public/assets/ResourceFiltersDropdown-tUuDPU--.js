(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`23d9d370-fee9-4ca2-bda9-91017b01d816`,e._sentryDebugIdIdentifier=`sentry-dbid-23d9d370-fee9-4ca2-bda9-91017b01d816`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,M as a,P as o,T as s,_t as c,at as l,bt as u,et as d,j as f,q as p,vn as m,w as h}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as g}from"./_MapCache-DjbOQyB7.js";import{At as _,Hi as v,V as y,gi as b,ot as x}from"./src-CppJvwzX.js";import{t as S}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Gt as C}from"./users.store-pCkD7Zo0.js";import{Yc as w}from"./constants-D1jZwsUK.js";import{t as T}from"./EnterpriseEdition.ee-BF3fOBuQ.js";import{t as E}from"./ProjectSharing-DgwjJKfK.js";var D=S(o({__name:`ResourceFiltersDropdown`,props:{modelValue:{default:()=>({})},keys:{default:()=>[]},shareable:{type:Boolean,default:!0},reset:{type:Function,default:()=>{}},justIcon:{type:Boolean,default:!1}},emits:[`update:modelValue`,`update:filtersLength`],setup(o,{emit:S}){let D=o,O=S,k=C(),A=g(),j=e({get:()=>k.availableProjects.find(e=>e.id===D.modelValue.homeProject)??null,set:e=>P(`homeProject`,e?.id??``)}),M=e(()=>{let e=0;return D.keys.forEach(t=>{if(t===`search`)return;let n=D.modelValue[t];n===!0&&(e+=1),Array.isArray(n)&&n.length&&(e+=1),typeof n==`string`&&n!==``&&(e+=1)}),e}),N=e(()=>M.value>0),P=(e,t)=>{O(`update:modelValue`,{...D.modelValue,[e]:t})},F=()=>{if(D.reset)D.reset();else{let e={...D.modelValue};D.keys.forEach(t=>{e[t]=Array.isArray(D.modelValue[t])?[]:``}),O(`update:modelValue`,e)}j.value=null},I=e(()=>!N.value);return c(M,e=>{O(`update:filtersLength`,e)}),p(async()=>{await k.getAvailableProjects()}),(e,c)=>(d(),s(i(y),{width:`304px`,"content-class":e.$style[`popover-content`]},{trigger:u(()=>[a(i(v),{variant:`outline`,icon:`funnel`,size:`small`,iconOnly:I.value,active:N.value,class:m({[e.$style[`filter-button`]]:!0,[e.$style[`no-label`]]:o.justIcon&&M.value===0}),"data-test-id":`resources-list-filters-trigger`},{default:u(()=>[M.value>0?(d(),s(i(_),{key:0,class:m(e.$style[`filter-button-count`]),"data-test-id":`resources-list-filters-count`,theme:`primary`},{default:u(()=>[f(t(M.value),1)]),_:1},8,[`class`])):r(``,!0),o.justIcon?r(``,!0):(d(),n(`span`,{key:1,class:m(e.$style[`filter-button-text`])},t(i(A).baseText(`forms.resourceFiltersDropdown.filters`)),3))]),_:1},8,[`iconOnly`,`active`,`class`])]),content:u(()=>[h(`div`,{class:m(e.$style[`filters-dropdown`]),"data-test-id":`resources-list-filters-dropdown`},[l(e.$slots,`default`,{filters:o.modelValue,setKeyValue:P}),o.shareable&&i(k).isProjectHome?(d(),s(T,{key:0,features:[i(w).Sharing]},{default:u(()=>[a(i(x),{label:i(A).baseText(`forms.resourceFiltersDropdown.owner`),bold:!1,size:`small`,color:`text-base`,class:`mb-3xs`},null,8,[`label`]),a(E,{modelValue:j.value,"onUpdate:modelValue":[c[0]||=e=>j.value=e,c[1]||=e=>P(`homeProject`,e.id)],projects:i(k).availableProjects,placeholder:i(A).baseText(`forms.resourceFiltersDropdown.owner.placeholder`),"empty-options-text":i(A).baseText(`projects.sharing.noMatchingProjects`)},null,8,[`modelValue`,`projects`,`placeholder`,`empty-options-text`])]),_:1},8,[`features`])):r(``,!0),N.value?(d(),n(`div`,{key:1,class:m([e.$style[`filters-dropdown-footer`],`mt-s`])},[a(i(b),{onClick:F},{default:u(()=>[f(t(i(A).baseText(`forms.resourceFiltersDropdown.reset`)),1)]),_:1})],2)):r(``,!0)],2)]),_:3},8,[`content-class`]))}}),[[`__cssModules`,{$style:{"filter-button":`_filter-button_vzm35_125`,"no-label":`_no-label_vzm35_129`,"filter-button-count":`_filter-button-count_vzm35_135`,"filter-button-text":`_filter-button-text_vzm35_140`,"filters-dropdown":`_filters-dropdown_vzm35_148`,"filters-dropdown-footer":`_filters-dropdown-footer_vzm35_152`,"popover-content":`_popover-content_vzm35_158`}}]]);export{D as t};
//# sourceMappingURL=ResourceFiltersDropdown-tUuDPU--.js.map