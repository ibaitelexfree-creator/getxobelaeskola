!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./users.store-legacy-B-bVJKl3.js","./executions.store-legacy-OEeCPZk_.js"],(function(e,o){var t,n,r,i,a,s,l,d,c,w,u,f,y,v,p,m,_,h,g,x,E,k,b;return{setters:[function(e){t=e.C,n=e.D,r=e.E,i=e.Gt,a=e.It,s=e.J,l=e.M,d=e.P,c=e.Z,w=e._t,u=e.et,f=e.vn,y=e.w},function(e){v=e.yt},function(e){p=e.Et,m=e.F},function(e){_=e.t},function(e){h=e.Gt,g=e.yr},function(e){x=e.t}],execute:function(){(E=document.createElement("style")).textContent="._container_ycaoi_125{justify-content:center;width:100%;height:100%;display:flex}._workflow_ycaoi_132{visibility:hidden;width:0;height:0}._show_ycaoi_138{visibility:visible;width:100%;height:100%}._openNDV_ycaoi_144{width:100%;height:100%;z-index:var(--workflow-preview-ndv--z);position:fixed;top:0;left:0}._spinner_ycaoi_153{color:var(--color--primary);position:absolute;transform:translateY(-50%);top:50%!important}._imageLoader_ycaoi_161{justify-content:center;align-items:center;width:100%;height:100%;display:flex}._executionPreview_ycaoi_169{height:100%}\n/*$vite$:1*/",document.head.appendChild(E);try{o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(I=(new o.Error).stack)&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[I]="e5196350-bcde-41d5-86dc-7a70c3f94c56",o._sentryDebugIdIdentifier="sentry-dbid-e5196350-bcde-41d5-86dc-7a70c3f94c56")}catch(o){}var o,I;k=["src"],b=d({__name:"WorkflowPreview",props:{loading:{type:Boolean,default:!1},mode:{default:"workflow"},workflow:{default:void 0},executionId:{default:void 0},executionMode:{default:void 0},nodeId:{default:void 0},loaderType:{default:"image"},canOpenNDV:{type:Boolean,default:!0},hideNodeIssues:{type:Boolean,default:!1},focusOnLoad:{type:Boolean,default:!0},hideControls:{type:Boolean,default:!1}},emits:["close","ready"],setup(e,{emit:d}){const _=e,E=d,b=v(),I=g(),N=x(),T=h(),D=a(null),P=a(!1),j=a(!1),M=a(!1),$=a(0),L=a(0),O=t((()=>{const e=`${window.BASE_PATH??"/"}workflows/demo`;return _.hideControls?`${e}?hideControls=true`:e})),V=t((()=>!_.loading&&("workflow"===_.mode&&!!_.workflow||"execution"===_.mode&&!!_.executionId)&&j.value)),S=()=>{try{if(!_.workflow)throw new Error(b.baseText("workflowPreview.showError.missingWorkflow"));if(!_.workflow.nodes||!Array.isArray(_.workflow.nodes))throw new Error(b.baseText("workflowPreview.showError.arrayEmpty"));D.value?.contentWindow?.postMessage?.(JSON.stringify({command:"openWorkflow",workflow:_.workflow,canOpenNDV:_.canOpenNDV,hideNodeIssues:_.hideNodeIssues,projectId:T.currentProjectId}),"*")}catch(e){I.showError(e,b.baseText("workflowPreview.showError.previewError.title"),b.baseText("workflowPreview.showError.previewError.message"))}},C=()=>{try{if(!_.executionId)throw new Error(b.baseText("workflowPreview.showError.missingExecution"));D.value?.contentWindow?.postMessage?.(JSON.stringify({command:"openExecution",executionId:_.executionId,executionMode:_.executionMode??"",nodeId:_.nodeId,canOpenNDV:_.canOpenNDV,projectId:T.currentProjectId}),"*"),N.activeExecution&&D.value?.contentWindow?.postMessage?.(JSON.stringify({command:"setActiveExecution",executionId:N.activeExecution.id}),"*")}catch(e){I.showError(e,b.baseText("workflowPreview.showError.previewError.title"),b.baseText("workflowPreview.executionMode.showError.previewError.message"))}},W=()=>{M.value=!0,$.value=window.scrollX,L.value=window.scrollY},A=()=>{M.value=!1},B=({data:e})=>{if(e?.includes?.('"command"'))try{const o=JSON.parse(e);"n8nReady"===o.command?J():"openNDV"===o.command?R():"closeNDV"===o.command?Y():"error"===o.command&&z()}catch(o){console.error(o)}},J=()=>{j.value=!0,_.focusOnLoad&&setTimeout((()=>{D.value?.contentWindow?.focus()})),E("ready")},R=()=>{P.value=!0},Y=()=>{P.value=!1},z=()=>{E("close")},G=()=>{M.value&&window.scrollTo($.value,L.value)};return c((()=>{window.addEventListener("message",B),document.addEventListener("scroll",G)})),s((()=>{window.removeEventListener("message",B),document.removeEventListener("scroll",G)})),w((()=>V.value),(()=>{V.value&&("workflow"===_.mode?S():"execution"===_.mode&&C())})),w((()=>_.executionId),(()=>{"execution"===_.mode&&_.executionId&&C()})),w((()=>_.workflow),(()=>{"workflow"===_.mode&&_.workflow&&S()})),(o,t)=>(u(),n("div",{class:f(o.$style.container)},["image"!==e.loaderType||V.value?"spinner"!==e.loaderType||V.value?r("",!0):(u(),n("div",{key:1,class:f(o.$style.spinner)},[l(i(m),{type:"dots"})],2)):(u(),n("div",{key:0,class:f(o.$style.imageLoader)},[l(i(p),{loading:!V.value,rows:1,variant:"image"},null,8,["loading"])],2)),y("iframe",{ref_key:"iframeRef",ref:D,class:f({[o.$style.workflow]:!P.value,[o.$style.executionPreview]:"execution"===e.mode,[o.$style.openNDV]:P.value,[o.$style.show]:V.value}),src:O.value,"data-test-id":"workflow-preview-iframe",onMouseenter:W,onMouseleave:A},null,42,k)],2))}}),e("t",_(b,[["__cssModules",{$style:{container:"_container_ycaoi_125",workflow:"_workflow_ycaoi_132",show:"_show_ycaoi_138",openNDV:"_openNDV_ycaoi_144",spinner:"_spinner_ycaoi_153",imageLoader:"_imageLoader_ycaoi_161",executionPreview:"_executionPreview_ycaoi_169"}}]]))}}}));
//# sourceMappingURL=WorkflowPreview-legacy-C97BoFHX.js.map