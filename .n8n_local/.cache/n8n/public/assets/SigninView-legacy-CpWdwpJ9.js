!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./auth.eventBus-legacy-CATYGUiE.js","./sso.store-legacy-B2e5Mjw4.js","./AuthView-legacy-CpjlvZ0I.js"],(function(e,a){var t,o,n,r,l,i,s,u,d,c,f,m,v,p,y,g,_,b,h,C,k,x,w,T,E,L,R,O,I,j,A,B,S,M,z,$,D,F,V;return{setters:[function(e){t=e.C,o=e.Cn,n=e.D,r=e.E,l=e.Gt,i=e.It,s=e.M,u=e.P,d=e.Pt,c=e.T,f=e.Z,m=e.bt,v=e.et,p=e.j,y=e.vn,g=e.w},function(e){_=e.tt,b=e.yt},function(e){h=e.Ci,C=e.Hi,k=e.Vi,x=e.X,w=e.bt,T=e.it,E=e.wi,L=e.zi},function(e){R=e.t},function(e){},function(e){O=e.Lt,I=e.t,j=e.ws,A=e.yr},function(e){e.fl,B=e.ml,e.pl,S=e.rs,e.ul},function(e){},function(e){},function(e){},function(e){},function(e){M=e.n},function(e){z=e.n},function(e){$=e.t}],execute:function(){(D=document.createElement("style")).textContent="body{background-color:var(--color--background--light-2)}._container_1k8hu_129{padding-top:var(--spacing--2xl);flex-direction:column;align-items:center;display:flex}._container_1k8hu_129>*{width:352px}._formContainer_1k8hu_139{padding-bottom:var(--spacing--xl)}._footer_1k8hu_143{justify-content:space-between;gap:var(--spacing--2xs);display:flex}._headerContainer_1k8hu_149{text-align:center;margin-bottom:var(--spacing--xl)}._formError_1k8hu_154 input{border-color:var(--color--danger)}._recoveryCodeLink_1k8hu_158{text-decoration:underline}._infoBox_1k8hu_162{padding-top:var(--spacing--4xs)}\n/*$vite$:1*/",document.head.appendChild(D);try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(q=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[q]="20fb0f7a-5865-46c5-ae39-638aaf4d0f48",a._sentryDebugIdIdentifier="sentry-dbid-20fb0f7a-5865-46c5-ae39-638aaf4d0f48")}catch(a){}var a,q;F=u({__name:"MfaView",props:{reportError:{type:Boolean}},emits:["onFormChanged","onBackClick","submit"],setup(e,{emit:t}){const u=e,d=i(!1),h=i(M),E=i(null),R=i(!1),O=i(!1),I=i(""),{reportError:A}=_(u),S=i(null),z=b(),$=t,D=(e,a,t,o,n=!0,r="off")=>({name:e,initialValue:"",properties:{label:a,placeholder:t,maxlength:o,capitalize:!0,validateOnBlur:!1,focusInitially:n,autocomplete:r}}),F=()=>{I.value="",R.value=!0,d.value=!1,E.value=[U()],$("onFormChanged",B.MFA_RECOVERY_CODE)},V=()=>{R.value?(R.value=!1,d.value=!0,E.value=[Y()],$("onBackClick",B.MFA_RECOVERY_CODE),N()):$("onBackClick",B.MFA_TOKEN)},q=e=>{const a=e;I.value=R.value?z.baseText("mfa.recovery.invalid"):z.baseText("mfa.code.invalid"),$("submit",a)},N=()=>{setTimeout((()=>{if(S.value){const e=S.value.$el;if(!e)return;const a=e.querySelector('input[name="mfaCode"]');a&&a.focus()}}),200)},P=({target:{value:e,name:t}})=>{const o="mfaCode"===t,n=o?6:36;if(e.length!==n)return void(d.value=!1);O.value=!0,d.value=!0;const r=o?{mfaCode:e,mfaRecoveryCode:""}:{mfaCode:"",mfaRecoveryCode:e};try{q(r)}catch(a){}finally{O.value=!1}},U=()=>D("mfaRecoveryCode",z.baseText("mfa.recovery.input.label"),z.baseText("mfa.recovery.input.placeholder"),36),Y=()=>D("mfaCode",z.baseText("mfa.code.input.label"),z.baseText("mfa.code.input.placeholder"),6,!1,"one-time-code"),G=()=>{h.value.emit("submit")},{settings:{releaseChannel:H}}=j();return f((()=>{E.value=[Y()],N()})),(e,a)=>(v(),n("div",{class:y(e.$style.container)},[s(l(x),{size:"large","release-channel":l(H)},null,8,["release-channel"]),s(l(w),null,{default:m((()=>[g("div",{class:y(e.$style.headerContainer)},[s(l(L),{size:"xlarge",color:"text-dark"},{default:m((()=>[p(o(R.value?l(z).baseText("mfa.recovery.modal.title"):l(z).baseText("mfa.code.modal.title")),1)])),_:1})],2),g("div",{class:y([e.$style.formContainer,l(A)?e.$style.formError:""])},[E.value?(v(),c(l(T),{key:0,ref_key:"mfaFormRef",ref:S,"data-test-id":"mfa-login-form",inputs:E.value,"event-bus":h.value,onInput:P,onSubmit:q},null,8,["inputs","event-bus"])):r("",!0),g("div",{class:y(e.$style.infoBox)},[R.value||l(A)?r("",!0):(v(),c(l(k),{key:0,size:"small",color:"text-base",bold:!1},{default:m((()=>[p(o(l(z).baseText("mfa.code.input.info"))+" ",1),g("a",{"data-test-id":"mfa-enter-recovery-code-button",onClick:F},o(l(z).baseText("mfa.code.input.info.action")),1)])),_:1})),l(A)?(v(),c(l(k),{key:1,color:"danger",size:"small"},{default:m((()=>[p(o(I.value)+" ",1),R.value?r("",!0):(v(),n("a",{key:0,class:y(e.$style.recoveryCodeLink),onClick:F},o(l(z).baseText("mfa.recovery.input.info.action")),3))])),_:1})):r("",!0)],2)],2),g("div",{class:y(e.$style.footer)},[s(l(C),{float:"right",loading:O.value,label:R.value?l(z).baseText("mfa.recovery.button.verify"):l(z).baseText("mfa.code.button.continue"),size:"large",disabled:!d.value,onClick:G},null,8,["loading","label","disabled"]),s(l(C),{variant:"subtle",float:"left",label:l(z).baseText("mfa.button.back"),size:"large",onClick:V},null,8,["label"])],2)])),_:1})],2))}}),V=R(F,[["__cssModules",{$style:{container:"_container_1k8hu_129",formContainer:"_formContainer_1k8hu_139",footer:"_footer_1k8hu_143",headerContainer:"_headerContainer_1k8hu_149",formError:"_formError_1k8hu_154",recoveryCodeLink:"_recoveryCodeLink_1k8hu_158",infoBox:"_infoBox_1k8hu_162"}}]]),e("default",u({__name:"SigninView",setup(e){const a=I(),o=j(),l=z(),s=h(),u=E(),f=A(),m=b(),p=O(),y=i(!1),g=i(!1),_=i(""),C=i(""),k=i(!1),x=t((()=>l.ldapLoginLabel)),w=t((()=>l.isLdapLoginEnabled)),T=t((()=>{let e=m.baseText("auth.email");return w.value&&x.value&&(e=x.value),e})),L=d({title:m.baseText("auth.signin"),buttonText:m.baseText("auth.signin"),redirectText:m.baseText("forgotPassword"),redirectLink:"/forgot-password",inputs:[{name:"emailOrLdapLoginId",properties:{label:T.value,type:"email",required:!0,...!w.value&&{validationRules:[{name:"VALID_EMAIL"}]},showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"email",capitalize:!0,focusInitially:!0}},{name:"password",properties:{label:m.baseText("auth.password"),type:"password",required:!0,showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"current-password",capitalize:!0}}]}),R=async e=>{await F({emailOrLdapLoginId:_.value,password:C.value,mfaCode:e.mfaCode,mfaRecoveryCode:e.mfaRecoveryCode})},M=async e=>{await F(e)},D=()=>{let e="";return"string"==typeof s.query?.redirect&&(e=decodeURIComponent(s.query?.redirect)),e},F=async e=>{try{if(y.value=!0,await a.loginWithCreds({emailOrLdapLoginId:e.emailOrLdapLoginId,password:e.password,mfaCode:e.mfaCode,mfaRecoveryCode:e.mfaRecoveryCode}),y.value=!1,await o.getSettings(),f.clearAllStickyNotifications(),o.isMFAEnforced&&!a.currentUser?.mfaAuthenticated)return void(await u.push({name:S.PERSONAL_SETTINGS}));if(p.track("User attempted to login",{result:g.value?"mfa_success":"success"}),(()=>{const e=D();if(e.startsWith("/"))return!0;try{return new URL(e).origin===window.location.origin}catch{return!1}})()){const e=D();return e.startsWith("http")?void(window.location.href=e):void u.push(e)}await u.push({name:S.HOMEPAGE})}catch(t){if(998===t.errorCode)return g.value=!0,void P(e);if(p.track("User attempted to login",{result:g.value?"mfa_token_rejected":"credentials_error"}),!g.value)return f.showError(t,m.baseText("auth.signin.error")),void(y.value=!1);k.value=!0}},q=e=>{k.value=!1,e===B.MFA_TOKEN&&(g.value=!1,y.value=!1)},N=e=>{e===B.MFA_RECOVERY_CODE&&(k.value=!1)},P=e=>{_.value=e.emailOrLdapLoginId,C.value=e.password};return(e,a)=>(v(),n("div",null,[g.value?r("",!0):(v(),c($,{key:0,form:L,"form-loading":y.value,"with-sso":!0,"data-test-id":"signin-form",onSubmit:M},null,8,["form","form-loading"])),g.value?(v(),c(V,{key:1,"report-error":k.value,onSubmit:R,onOnBackClick:q,onOnFormChanged:N},null,8,["report-error"])):r("",!0)]))}}))}}}));
//# sourceMappingURL=SigninView-legacy-CpWdwpJ9.js.map