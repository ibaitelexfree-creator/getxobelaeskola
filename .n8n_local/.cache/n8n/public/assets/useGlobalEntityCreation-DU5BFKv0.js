(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`431ffce5-8c99-41c1-9cb7-d458e4a2185f`,e._sentryDebugIdIdentifier=`sentry-dbid-431ffce5-8c99-41c1-9cb7-d458e4a2185f`)})()}catch{}import{C as e,It as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as n}from"./_MapCache-DjbOQyB7.js";import{Wi as r,wi as i}from"./src-CppJvwzX.js";import{Gt as a,lr as o,wr as s,ws as c,yr as l}from"./users.store-pCkD7Zo0.js";import{qo as u,rs as d}from"./constants-D1jZwsUK.js";import{t as f}from"./usePageRedirectionHelper-BoF8hzbN.js";import{t as p}from"./sortByProperty-B0onItmN.js";var m=e=>typeof e==`string`&&Object.keys(r).includes(e),h=e=>m(e)||typeof e==`object`&&!!e&&`value`in e&&typeof e.value==`string`&&`type`in e&&(e.type===`emoji`||e.type===`icon`&&m(e.value));const g=()=>{let r=`create-project`,m=`workflow`,g=`credential`,_=`layers`,v=c(),y=o(),b=a(),x=s(),S=i(),C=n(),w=l(),T=t(!1),E=e(()=>p(`name`,b.myProjects.filter(e=>e.type===`team`))),D=(e=[])=>x.preferences.branchReadOnly||!u(e).workflow.create,O=(e=[])=>x.preferences.branchReadOnly||!u(e).credential.create,k=e(()=>b.isTeamProjectFeatureEnabled?[{id:m,title:`Workflow`,disabled:x.preferences.branchReadOnly,...!x.preferences.branchReadOnly&&{submenu:[{id:`workflow-title`,title:`Create in`,disabled:!0},{id:`workflow-personal`,title:C.baseText(`projects.menu.personal`),icon:`user`,disabled:D(b.personalProject?.scopes),route:{name:d.NEW_WORKFLOW,query:{projectId:b.personalProject?.id}}},...E.value.map(e=>({id:`workflow-${e.id}`,title:e.name,icon:h(e.icon)?e.icon:_,disabled:D(e.scopes),route:{name:d.NEW_WORKFLOW,query:{projectId:e.id}}}))]}},{id:g,title:`Credential`,disabled:x.preferences.branchReadOnly,...!x.preferences.branchReadOnly&&{submenu:[{id:`credential-title`,title:`Create in`,disabled:!0},{id:`credential-personal`,title:C.baseText(`projects.menu.personal`),icon:`user`,disabled:O(b.personalProject?.scopes),route:{name:d.PROJECTS_CREDENTIALS,params:{projectId:b.personalProject?.id,credentialId:`create`}}},...E.value.map(e=>({id:`credential-${e.id}`,title:e.name,icon:h(e.icon)?e.icon:_,disabled:O(e.scopes),route:{name:d.PROJECTS_CREDENTIALS,params:{projectId:e.id,credentialId:`create`}}}))]}},{id:r,title:`Project`,disabled:!b.canCreateProjects||!b.hasPermissionToCreateProjects}]:[{id:`workflow`,title:`Workflow`,route:{name:d.NEW_WORKFLOW,query:{projectId:b.personalProject?.id}}},{id:`credential`,title:`Credential`,route:{name:d.CREDENTIALS,params:{projectId:b.personalProject?.id,credentialId:`create`}}},{id:r,title:`Project`,disabled:!0}]),A=async e=>{T.value=!0;try{let t=await b.createProject({name:C.baseText(`projects.settings.newProjectName`),icon:{type:`icon`,value:_},uiContext:e});await S.push({name:d.PROJECT_SETTINGS,params:{projectId:t.id}}),w.showMessage({title:C.baseText(`projects.settings.save.successful.title`,{interpolate:{projectName:t.name}}),type:`success`})}catch(e){w.showError(e,C.baseText(`projects.error.title`))}finally{T.value=!1}},j=e=>{if(e===r){if(b.canCreateProjects&&b.hasPermissionToCreateProjects){A(`universal_button`);return}f().goToUpgrade(`rbac`,`upgrade-rbac`)}},M=e(()=>v.isCloudDeployment?C.baseText(`projects.create.limitReached.cloud`,{interpolate:{planName:y.currentPlanData?.displayName??``,limit:b.teamProjectsLimit}}):b.isTeamProjectFeatureEnabled?b.hasPermissionToCreateProjects?C.baseText(`projects.create.limitReached`,{interpolate:{limit:b.teamProjectsLimit}}):C.baseText(`projects.create.permissionDenied`):C.baseText(`projects.create.limitReached.self`));return{menu:k,handleSelect:j,createProjectAppendSlotName:e(()=>`item.append.${r}`),createWorkflowsAppendSlotName:e(()=>`item.append.${m}`),createCredentialsAppendSlotName:e(()=>`item.append.${g}`),projectsLimitReachedMessage:M,hasPermissionToCreateProjects:b.hasPermissionToCreateProjects,upgradeLabel:e(()=>v.isCloudDeployment||b.isTeamProjectFeatureEnabled?C.baseText(`generic.upgrade`):C.baseText(`generic.enterprise`)),createProject:A,isCreatingProject:T,displayProjects:E}};export{g as t};
//# sourceMappingURL=useGlobalEntityCreation-DU5BFKv0.js.map