!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./collaboration.store-legacy-COoId2Xe.js"],(function(e,t){var o,r,n,i,s,a,l,c,u,w,f,d;return e("t",(function(){const e=o(!1),t=l(),k=s(),v=a(),y=i(),p=u(),h=r(),b=d(),g=e=>{try{const{errorCode:t,hint:o}=e;if(409===t){const e=JSON.parse(o??"");if(Array.isArray(e)&&e.length>0&&Object.hasOwn(e[0],"trigger"))return e}return null}catch{return null}};return{updatingWorkflowActivation:e,publishWorkflow:async(o,r,i)=>{e.value=!0,b.requestWriteAccess();const s=!!k.getWorkflowById(o).activeVersion;if(!s){const e={workflow_id:o,is_active:!0,previous_status:!1,ndv_input:!1};c().run("workflowActivate.updateWorkflowActivation",e)}try{const a=o===t.workflowId?t.workflowChecksum:void 0,l=await t.publishWorkflow(o,{versionId:r,name:i?.name,description:i?.description,expectedChecksum:a});if(!l.activeVersion||!l.checksum)throw new Error("Failed to publish workflow");return t.setWorkflowActive(o,l.activeVersion,!0),o===t.workflowId&&t.setWorkflowVersionData({versionId:l.versionId,name:t.versionData?.name??null,description:t.versionData?.description??null},l.checksum),c().run("workflow.published",{workflowId:o,versionId:l.activeVersion.versionId}),s||"true"===n("N8N_HIDE_ACTIVATION_ALERT").value||v.openModal(w),{success:!0}}catch(a){return(e=>null!==g(e))(a)?(await(async e=>{const{trigger:t,conflict:o}=g(e)?.pop()||{};let r=o?.workflowId;try{o?.workflowId&&(r=(await k.fetchWorkflow(o?.workflowId)).name)}catch{}v.openModalWithData({name:f,data:{triggerType:t?.type,workflowName:r,...o}})})(a),{success:!1,errorHandled:!0}):(p.showError(a,h.baseText("workflowActivator.showError.title",{interpolate:{newStateName:"published"}})+":"),a.meta?.validationError||t.setWorkflowInactive(o),{success:!1})}finally{e.value=!1}},unpublishWorkflowFromHistory:async o=>{e.value=!0,b.requestWriteAccess();const r={workflow_id:o,is_active:!1,previous_status:!!k.getWorkflowById(o).activeVersion,ndv_input:!1};y.track("User set workflow active status",r),c().run("workflowActivate.updateWorkflowActivation",r);try{const r=o===t.workflowId?t.workflowChecksum:void 0;return await t.deactivateWorkflow(o,r),c().run("workflow.unpublished",{workflowId:o}),!0}catch(n){return p.showError(n,h.baseText("workflowActivator.showError.title",{interpolate:{newStateName:"deactivated"}})+":"),!1}finally{e.value=!1}}}})),{setters:[function(e){o=e.It},function(e){r=e.yt},function(e){n=e.Hr,i=e.Lt,s=e.Rr,a=e.r,l=e.s,c=e.xr,u=e.yr},function(e){w=e.Ms,e.Us,f=e.js},function(e){d=e.t}],execute:function(){try{e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(t=(new e.Error).stack)&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9549e90f-9b56-44a5-8e09-acdf030ecb57",e._sentryDebugIdIdentifier="sentry-dbid-9549e90f-9b56-44a5-8e09-acdf030ecb57")}catch(e){}var e,t}}}));
//# sourceMappingURL=useWorkflowActivate-legacy-BYoAWriG.js.map