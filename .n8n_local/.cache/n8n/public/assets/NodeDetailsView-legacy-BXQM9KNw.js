!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./date-picker-legacy-B9cF0kNe.js","./users.store-legacy-B-bVJKl3.js","./ParameterInputList-legacy-B-cVfigK.js","./dialog-legacy-fV5dITAe.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./dataTable.store-legacy-bRwnG61W.js","./useClipboard-legacy-CaRHRTup.js","./executions.store-legacy-OEeCPZk_.js","./CopyInput-legacy-tkihub7c.js","./assistant.store-legacy-5vR0xJ8p.js","./chatPanel.store-legacy-BsXu4GbL.js","./RunData-legacy-lPpXxp--.js","./NDVEmptyState-legacy-BucrD4N6.js","./useEnvFeatureFlag-legacy-D1JgdFvC.js","./externalSecrets.ee.store-legacy-iYi_lGhf.js","./uniqBy-legacy-D3DmQIZU.js","./semver-legacy-BKbx4Ujl.js","./usePinnedData-legacy-B5CI71uf.js","./nodeIcon-legacy-KJSlWBN7.js","./canvas.utils-legacy-BQnUeqx3.js","./nodeCreator.store-legacy-i0crt2uh.js","./useCanvasOperations-legacy-CEMGNuuE.js","./folders.store-legacy-BDfX2wrH.js","./QuickConnectBanner-legacy-D8p522S_.js","./useQuickConnect-legacy-C07VWAhK.js","./CredentialIcon-legacy-CaQiQjuK.js","./useDynamicCredentials-legacy-DtgrzjN_.js","./RunDataHtml-legacy-D5RK94OR.js","./Draggable-legacy-DR_TRqSl.js","./NodeIcon-legacy-DOI-M5xN.js","./VirtualSchema-legacy-DEUlCSUS.js","./useCalloutHelpers-legacy-Dcwge6qS.js","./useTelemetryContext-legacy-g7p6wUAa.js","./useRunWorkflow-legacy-4stFR283.js","./pushConnection.store-legacy-C36NF7Lj.js","./nodeTransforms-legacy-Bt0tXwjd.js","./vue-json-pretty-legacy-CxiVsaQm.js","./collaboration.store-legacy-COoId2Xe.js","./dateFormatter-legacy-Di9U0PH-.js","./useExecutionHelpers-legacy-BhqYaQxc.js","./useFreeAiCredits-legacy-CkLWMz48.js","./NodeSettings-legacy-lAEmS_aB.js","./vue-legacy-J35sU_a1.js","./useActions-legacy-Cyiwb1IV.js","./useLogsTreeExpand-legacy-D53Lg-vJ.js","./AnimatedSpinner-legacy-CrsyPpHZ.js","./useExecutionData-legacy-B-oDwo5t.js","./RunDataParsedAiContent-legacy-Dx8gqPaN.js","./TriggerPanel-legacy-CLPcI1KX.js"],(function(e,a){var n,t,i,l,o,u,r,s,d,v,c,g,p,_,f,y,h,m,b,w,x,k,j,P,C,D,I,N,R,T,$,B,O,W,E,L,M,S,A,z,H,V,F,U,q,G,J,X,Q,Z,K,Y,ee,ae,ne,te,ie,le,oe,ue,re,se,de,ve,ce,ge,pe,_e,fe,ye;return{setters:[function(e){e.o},function(e){n=e.C,t=e.Cn,i=e.D,l=e.E,o=e.G,u=e.Gt,r=e.It,s=e.J,d=e.M,v=e.P,c=e.T,g=e.Z,p=e._t,_=e.at,f=e.bn,y=e.bt,h=e.et,m=e.j,b=e.k,w=e.pt,x=e.vn,k=e.w},function(e){j=e.st,P=e.yt},function(e){C=e.I,D=e.Oi,I=e.Ui,N=e.Vi,R=e._t,T=e.kt},function(e){$=e.t},function(e){},function(e){},function(e){B=e.Bt,O=e.C,W=e.Hr,E=e.It,L=e.Lt,M=e.Tr,S=e.ba,A=e.br,z=e.ga,H=e.r,V=e.s,F=e.xr},function(e){U=e.l},function(e){q=e.t},function(e){G=e.D,e.G,J=e.Ga,e.Ss,X=e.da,e.hr,Q=e.ic,Z=e.ln,K=e.s,Y=e.so},function(e){},function(e){ee=e.N},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){ae=e.n},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){ne=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){te=e.t},function(e){},function(e){},function(e){},function(e){ie=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){le=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){oe=e.n,ue=e.r,re=e.t}],execute:function(){(se=document.createElement("style")).textContent="._dragContainer_47t4e_125{pointer-events:all}._dragButton_47t4e_129{background-color:var(--ndv--header--color);border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);cursor:grab;z-index:3;justify-content:center;align-items:center;width:64px;height:21px;display:flex;position:relative;overflow:visible}._dragButton_47t4e_129:hover ._leftArrow_47t4e_143,._dragButton_47t4e_129:hover ._rightArrow_47t4e_144{visibility:visible}._visible_47t4e_148{visibility:visible!important}._arrow_47t4e_152{color:var(--color--background--light-3);font-size:var(--font-size--3xs);visibility:hidden;position:absolute;top:0}._leftArrow_47t4e_143{left:-16px}._rightArrow_47t4e_144{right:-16px}._grid_47t4e_170>div{display:flex}._grid_47t4e_170>div:first-child>div{margin-bottom:2px}._grid_47t4e_170>div>div{background-color:var(--color--foreground--shade-2);border-radius:50%;width:2px;height:2px;margin-right:4px}._grid_47t4e_170>div>div:last-child{margin-right:0}._dataPanel_6rjea_125{height:calc(100% - 2*var(--spacing--lg));top:var(--spacing--lg);z-index:0;min-width:280px;position:absolute}._inputPanel_6rjea_134{left:var(--spacing--lg)}._inputPanel_6rjea_134>*{border-radius:var(--radius--lg)0 0 var(--radius--lg)}._outputPanel_6rjea_142{right:var(--spacing--lg)}._outputPanel_6rjea_142>*{border-radius:0 var(--radius--lg)var(--radius--lg)0}._mainPanel_6rjea_150{height:100%;position:absolute}._mainPanel_6rjea_150:hover ._draggable_6rjea_154{visibility:visible}._mainPanelInner_6rjea_158{border:var(--border);border-radius:var(--radius--lg);height:100%;overflow:hidden;box-shadow:0 4px 16px rgba(50,61,85,.1)}._mainPanelInner_6rjea_158._dragging_6rjea_165{border-color:var(--color--primary);box-shadow:0 6px 16px rgba(255,74,51,.15)}._draggable_6rjea_154{visibility:hidden}._double-width_6rjea_174{left:90%}._dragButtonContainer_6rjea_178{pointer-events:none;justify-content:center;width:100%;height:12px;display:flex;position:absolute;top:-12px}._dragButtonContainer_6rjea_178 ._draggable_6rjea_154{pointer-events:all}._dragButtonContainer_6rjea_178:hover ._draggable_6rjea_154,._visible_6rjea_194{visibility:visible}.ndv-wrapper{margin-top:0;overflow:visible}.data-display-wrapper{background:0 0;border:none;width:100%;height:100%;margin-top:var(--spacing--xl)!important;margin-bottom:var(--spacing--xl)!important}.data-display-wrapper .el-dialog__header{padding:0!important}.data-display-wrapper .el-dialog__body{border-radius:8px;height:100%;min-height:400px;overflow:visible;padding:0!important}.data-display{width:100%;height:100%;display:flex}._modalBackground_10ueg_125{width:100%;height:100%}._triggerWarning_10ueg_130{max-width:180px}._backToCanvas_10ueg_134{top:var(--spacing--xs);left:var(--spacing--lg);align-items:center;gap:var(--spacing--3xs);display:flex;position:fixed}._backToCanvas_10ueg_134 span{color:var(--ndv--back--color--text)}._backToCanvas_10ueg_134:hover{cursor:pointer}@media (min-width:1920px){._backToCanvas_10ueg_134{top:var(--spacing--xs);left:var(--spacing--md)}}._featureRequest_10ueg_155{bottom:var(--spacing--4xs);left:calc(100% + var(--spacing--sm));color:var(--feature-request--color--text);font-size:var(--font-size--2xs);white-space:nowrap;position:absolute}._featureRequest_10ueg_155 *{margin-right:var(--spacing--3xs)}\n/*$vite$:1*/",document.head.appendChild(se);try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(he=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[he]="d369a244-0b48-471a-80d0-f544981b84dc",a._sentryDebugIdIdentifier="sentry-dbid-d369a244-0b48-471a-80d0-f544981b84dc")}catch(a){}var a,he;de=v({__name:"PanelDragButton",props:{canMoveRight:{type:Boolean},canMoveLeft:{type:Boolean}},emits:["drag","dragstart","dragend"],setup(e,{emit:a}){const n=a,t=e=>{n("drag",e)},o=()=>{n("dragend")},r=()=>{n("dragstart")};return(a,n)=>(h(),c(te,{type:"panel-resize",class:x(a.$style.dragContainer),onDrag:t,onDragstart:r,onDragend:o},{default:y((({isDragging:t})=>[k("div",{class:x({[a.$style.dragButton]:!0}),"data-test-id":"panel-drag-button"},[e.canMoveLeft?(h(),i("span",{key:0,class:x({[a.$style.leftArrow]:!0,[a.$style.visible]:t})},[d(u(I),{icon:"arrow-left"})],2)):l("",!0),e.canMoveRight?(h(),i("span",{key:1,class:x({[a.$style.rightArrow]:!0,[a.$style.visible]:t})},[d(u(I),{icon:"arrow-right"})],2)):l("",!0),k("div",{class:x(a.$style.grid)},[...n[0]||(n[0]=[k("div",null,[k("div"),k("div"),k("div"),k("div"),k("div")],-1),k("div",null,[k("div"),k("div"),k("div"),k("div"),k("div")],-1)])],2)],2)])),_:1},8,["class"]))}}),ve=$(de,[["__cssModules",{$style:{dragContainer:"_dragContainer_47t4e_125",dragButton:"_dragButton_47t4e_129",leftArrow:"_leftArrow_47t4e_143 _arrow_47t4e_152",rightArrow:"_rightArrow_47t4e_144 _arrow_47t4e_152",visible:"_visible_47t4e_148",arrow:"_arrow_47t4e_152",grid:"_grid_47t4e_170"}}]]),ce=24,ge=310,pe=v({__name:"NDVDraggablePanels",props:{isDraggable:{type:Boolean},hideInputAndOutput:{type:Boolean},nodeType:{}},emits:["init","dragstart","dragend","switchSelectedNode","close"],setup(e,{emit:a}){const t={regular:390,dragless:390,unknown:390,inputless:390,wide:780},v=j((function({direction:e,x:a,width:n}){const t=ie(a),i=ie(n);"left"===e&&t<=z.value||"right"===e&&1-t<=V.value||n<=ge||(ee(i),ne("left"===e?t:O.value.relativeLeft))}),100),m=B(),b=H(),P=e,D=r(!1),I=r(!1),N=r(b.appGridDimensions.width),R=a,T=w();g((()=>{1===O.value.relativeLeft&&1===O.value.relativeRight&&(ee(),ne(Y(O.value.relativeWidth)),function(){const e=W(`${Q}_${$.value}`).value;if(e){const a=parseFloat(e);ee(a),ne(Y(a))}}()),R("init",{position:O.value.relativeLeft}),setTimeout((()=>{I.value=!0}),0),ae.on("setPositionByName",te)})),s((()=>{ae.off("setPositionByName",te)})),p((()=>b.appGridDimensions),(async e=>{const a=document.getElementById("ndv");if(a){await o();const{width:e}=a.getBoundingClientRect();N.value=e}else N.value=e.width;const n=ie(ge);O.value.relativeWidth<n&&ee(n);const t=z.value>O.value.relativeLeft,i=V.value>O.value.relativeRight;e.width>518&&t&&i&&(ee(n),ne(Y(O.value.relativeWidth))),ne(O.value.relativeLeft)}));const $=n((()=>S.value?P.isDraggable?null===P.nodeType?"unknown":P.nodeType.parameterPane??"regular":"dragless":"inputless")),O=n((()=>m.mainPanelDimensions[$.value])),E=n((()=>{const e=void 0!==T.input,a=O.value.relativeLeft+O.value.relativeWidth;return{inputPanelRelativeRight:e?1-a+O.value.relativeWidth:1-ie(ce),outputPanelRelativeLeft:a}})),L=n((()=>{const e=1-ie(334),a=E.value.outputPanelRelativeLeft-e;return a>0?a:0})),M=n((()=>{const e=["right"];return P.isDraggable&&e.push("left"),e})),S=n((()=>void 0!==T.input)),A=n((()=>ie(80))),z=n((()=>N.value<518?ie(1):S.value?ie(44)+A.value:ie(ce))),V=n((()=>N.value<518?ie(1):ie(44)+A.value)),F=n((()=>O.value.relativeLeft>z.value)),U=n((()=>O.value.relativeRight>V.value)),q=n((()=>({left:`${le(O.value.relativeLeft)}px`,right:`${le(O.value.relativeRight)}px`}))),G=n((()=>({right:`${le(E.value.inputPanelRelativeRight)}px`}))),J=n((()=>({left:`${le(E.value.outputPanelRelativeLeft)}px`,transform:`translateX(-${le(L.value)}px)`}))),X=n((()=>"wide"===P.nodeType?.parameterPane)),Z=n((()=>{const e=X.value?2:1;return N.value>1700?420*e:350*e})),K=e=>R("switchSelectedNode",e);function Y(e){return"dragless"===$.value?ie(25+Z.value):S.value?.5-e/2:z.value}function ee(e){const a=e||ie(t[$.value]);m.setMainPanelDimensions({panelType:$.value,dimensions:{relativeWidth:a}})}function ne(e){const a=e||1-E.value.inputPanelRelativeRight,n=1-a-O.value.relativeWidth,t=V.value>n,i=z.value>a,l="inputless"===$.value;i?m.setMainPanelDimensions({panelType:$.value,dimensions:{relativeLeft:z.value,relativeRight:1-O.value.relativeWidth-z.value}}):t?m.setMainPanelDimensions({panelType:$.value,dimensions:{relativeLeft:1-O.value.relativeWidth-V.value,relativeRight:V.value}}):m.setMainPanelDimensions({panelType:$.value,dimensions:{relativeLeft:l?z.value:a,relativeRight:n}})}function te(e){ne({minLeft:z.value,maxRight:V.value,initial:Y(O.value.relativeWidth)}[e])}function ie(e){return e/N.value}function le(e){return e*N.value}function oe(){se()}function re(e){I.value&&v(e)}function se(){W(`${Q}_${$.value}`).value=O.value.relativeWidth.toString()}function de(){D.value=!0,R("dragstart",{position:O.value.relativeLeft})}function pe(e){ne(ie(e[0])-O.value.relativeWidth/2)}function _e(){setTimeout((()=>{D.value=!1,R("dragend",{windowWidth:N.value,position:O.value.relativeLeft})}),0),se()}return(a,n)=>(h(),i("div",null,[u(m).activeNode?(h(),c(ue,{key:0,"root-node":u(m).activeNode,onSwitchSelectedNode:K},null,8,["root-node"])):l("",!0),e.hideInputAndOutput?l("",!0):(h(),i("div",{key:1,class:x(a.$style.inputPanel),style:f(G.value)},[_(a.$slots,"input")],6)),e.hideInputAndOutput?l("",!0):(h(),i("div",{key:2,class:x(a.$style.outputPanel),style:f(J.value)},[_(a.$slots,"output")],6)),k("div",{class:x(a.$style.mainPanel),style:f(q.value)},[d(u(C),{"is-resizing-enabled":"unknown"!==$.value,width:le(O.value.relativeWidth),"min-width":ge,"grid-size":20,"supported-directions":M.value,outset:"",onResize:re,onResizeend:oe},{default:y((()=>[k("div",{class:x(a.$style.dragButtonContainer)},[!e.hideInputAndOutput&&e.isDraggable?(h(),c(ve,{key:0,class:x({[a.$style.draggable]:!0,[a.$style.visible]:D.value}),"can-move-left":F.value,"can-move-right":U.value,onDragstart:de,onDrag:pe,onDragend:_e},null,8,["class","can-move-left","can-move-right"])):l("",!0)],2),k("div",{class:x({[a.$style.mainPanelInner]:!0,[a.$style.dragging]:D.value})},[_(a.$slots,"main")],2)])),_:3},8,["is-resizing-enabled","width","supported-directions"])],6)]))}}),_e=$(pe,[["__cssModules",{$style:{dataPanel:"_dataPanel_6rjea_125",inputPanel:"_inputPanel_6rjea_134 _dataPanel_6rjea_125",outputPanel:"_outputPanel_6rjea_142 _dataPanel_6rjea_125",mainPanel:"_mainPanel_6rjea_150",draggable:"_draggable_6rjea_154",mainPanelInner:"_mainPanelInner_6rjea_158",dragging:"_dragging_6rjea_165","double-width":"_double-width_6rjea_174",dragButtonContainer:"_dragButtonContainer_6rjea_178",visible:"_visible_6rjea_194"}}]]),fe={key:0,ref:"container",class:"data-display","data-test-id":"ndv-modal",tabindex:"0"},ye=v({__name:"NodeDetailsView",props:{workflowObject:{},readOnly:{type:Boolean,default:!1},renaming:{type:Boolean},isProductionExecutionPreview:{type:Boolean,default:!1}},emits:["valueChanged","switchSelectedNode","openConnectionNodeCreator","stopExecution"],setup(e,{emit:a}){const o=a,v=e,_=B(),f=F(),w=E(),{activeNode:j}=ee(_),C=ne(j),$=O(),W=V(),H=T(),Q=L(),te=ie({view_shown:"ndv"}),ue=P(),se=M(),{APP_Z_INDEXES:de}=A(),ve=R(),ce=r(-1),ge=n((()=>_.output.run??-1)),pe=r(),ye=r(!0),he=r(!1),me=r(!1),be=r(0),we=r(!1),xe=r(0),ke=r(0),je=r(!1),Pe=r(!1),Ce=r(!0),De=n((()=>_.pushRef)),Ie=n((()=>j.value?$.getNodeType(j.value.type,j.value.typeVersion):null)),Ne=n((()=>he.value&&!!Ie.value&&!Ie.value.group.includes("trigger")&&W.isWorkflowRunning&&W.executionWaitingForWebhook)),Re=n((()=>{if(null===Ae.value)return null;const e=Ae.value.data;return e?.resultData?e.resultData.runData:null})),Te=n((()=>j.value?v.workflowObject.getParentNodesByDepth(j.value.name,1):[])),$e=n((()=>{for(const e of Te.value){if(W?.pinnedWorkflowData?.[e.name])return e;if(Re.value?.[e.name])return e}return Te.value[0]})),Be=n((()=>(j.value&&Ie.value?X(v.workflowObject,j.value,Ie.value):[]).filter((e=>"string"==typeof e?e!==Y.Main:e.type!==Y.Main)).length>0&&j.value?v.workflowObject.getChildNodes(j.value.name,"ALL_NON_MAIN")?.[0]:pe.value??$e.value?.name)),Oe=n((()=>Be.value?W.getNodeByName(Be.value):null)),We=n((()=>_.ndvInputDataWithPinnedData.length)),Ee=n((()=>!!Ie.value&&Ie.value.group.includes("trigger"))),Le=n((()=>{const e=!!Ie.value?.triggerPanel;if("boolean"==typeof Ie.value?.triggerPanel)return e;const a=!!Ie.value?.webhooks?.length,n=Ie.value?.polling;return!v.readOnly&&Ee.value&&(a||n||e)})),Me=n((()=>!!Ie.value&&Z.includes(Ie.value.name))),Se=n((()=>!!_.activeNode&&"n8n-nodes-base.stickyNote"===_.activeNode.type)),Ae=n((()=>W.getWorkflowExecution)),ze=n((()=>{if(null===j.value)return 0;const e=Re.value;return e?.[j.value.name]&&e[j.value.name].length?e[j.value.name].length-1:0})),He=n((()=>-1===ge.value?ze.value:Math.min(ge.value,ze.value))),Ve=n((()=>{if(null===Oe.value||null===j.value)return 0;const e=v.workflowObject.getNode(j.value.name);if(!e||!Ie.value)return 0;const a=X(v.workflowObject,e,Ie.value);let n=Oe.value;const t=Re.value;return a.some((e=>e!==Y.Main))&&(n=j.value),n&&t?.hasOwnProperty(n.name)&&t[n.name].length?t[n.name].length-1:0})),Fe=n((()=>Te.value.find((({name:e})=>e===Be.value))?.indicies)),Ue=n((()=>{if(ye.value&&ze.value===Ve.value)return He.value;const e=Be.value;return-1===ce.value&&e?Fe.value?.map((a=>w.getLastRunIndexWithData(e,a))).find((e=>-1!==e))??Ve.value:Math.min(ce.value,Ve.value)})),qe=n((()=>ze.value>0&&ze.value===Ve.value)),Ge=n((()=>ye.value&&qe.value)),Je=n((()=>Ie.value?`${K}${Ie.value.name}`:"")),Xe=n((()=>_.outputPanelEditMode)),Qe=n((()=>W.executionWaitingForWebhook)),Ze=n((()=>W.isWorkflowRunning||Qe.value)),Ke=n((()=>w.getForeignCredentialsIfSharingEnabled(j.value?.credentials))),Ye=n((()=>Ke.value.length>0)),ea=n((()=>_.inputPanelDisplayMode)),aa=n((()=>_.outputPanelDisplayMode)),na=({isTooltipVisible:e})=>{we.value=e},ta=e=>{"s"===e.key&&H.isCtrlKeyPressed(e)&&e.preventDefault()},ia=e=>{if(null===e||!Be.value||!Ce.value)return void _.setHoveringItem(null);const a={nodeName:Be.value,runIndex:Ue.value,outputIndex:e.outputIndex,itemIndex:e.itemIndex};_.setHoveringItem(a)},la=e=>{xe.value=e.avgRowHeight},oa=()=>{_.unsetActiveNodeName(),z.emit("publishWorkflow")},ua=e=>{if(null===e||!j.value||!Ce.value)return void _.setHoveringItem(null);const a={nodeName:j.value?.name,runIndex:He.value,outputIndex:e.outputIndex,itemIndex:e.itemIndex};_.setHoveringItem(a)},ra=()=>{window.open(Je.value,"_blank"),j.value&&Q.track("User clicked ndv link",{node_type:j.value.type,workflow_id:W.workflowId,push_ref:De.value,pane:Y.Main,type:"i-wish-this-node-would"})},sa=e=>{me.value=!1,Q.track("User moved parameters pane",{window_width:e.windowWidth,start_position:be.value,end_position:e.position,node_type:Ie.value?Ie.value.name:"",push_ref:De.value,workflow_id:W.workflowId}),be.value=e.position},da=e=>{me.value=!0,be.value=e.position},va=e=>{be.value=e.position},ca=()=>{ye.value=!0,fa("output")},ga=e=>{ce.value=ge.value,ye.value=!1,fa(e)},pa=()=>{setTimeout((()=>{j.value&&W.isWorkflowRunning&&(he.value=!0)}),1e3)},_a=()=>{ve.emit("openSettings")},fa=e=>{Q.track("User changed ndv run linking",{node_type:Ie.value?Ie.value.name:"",push_ref:De.value,linked:Ge.value,pane:e})},ya=()=>{_.setOutputRunIndex(ce.value),ye.value=!0,fa("input")},ha=e=>{o("valueChanged",e)},ma=e=>{o("switchSelectedNode",e)},ba=(e,a,n=0)=>{o("openConnectionNodeCreator",e,a,n)},wa=async()=>{if(!me.value){if(Xe.value.enabled&&j.value){if("confirm"===await se.confirm("",ue.baseText("ndv.pinData.beforeClosing.title"),{confirmButtonText:ue.baseText("ndv.pinData.beforeClosing.confirm"),cancelButtonText:ue.baseText("ndv.pinData.beforeClosing.cancel")})){const{value:a}=Xe.value;try{C.setData(J(a),"on-ndv-close-modal")}catch(e){console.error(e)}}_.setOutputPanelEditModeEnabled(!1)}await f.run("dataDisplay.nodeEditingFinished"),Q.track("User closed node modal",{node_type:Ie.value?Ie.value?.name:"",push_ref:De.value,workflow_id:W.workflowId}),he.value=!1,_.unsetActiveNodeName(),_.resetNDVPushRef()}},xa=(e,a)=>{Q.track("User changed ndv run dropdown",{push_ref:De.value,run_index:e,node_type:Ie.value?Ie.value?.name:"",pane:a})},ka=e=>{_.setOutputRunIndex(e),xa(e,"output")},ja=e=>{ce.value=e,Ge.value&&_.setOutputRunIndex(e),xa(e,"input")},Pa=e=>{ke.value=e.avgRowHeight},Ca=(e,a)=>{ce.value=-1,ye.value=!0,pe.value=e,Q.track("User changed ndv input dropdown",{node_type:j.value?j.value.type:"",push_ref:De.value,workflow_id:W.workflowId,selection_value:a,input_node_type:Oe.value?Oe.value.type:""})},Da=()=>{o("stopExecution")},Ia=()=>{je.value=!0,Pe.value=!1},Na=()=>{je.value=!1,Pe.value=!0},Ra=e=>{Ce.value=!e},Ta=()=>{document.removeEventListener("keydown",ta,!0)},$a=e=>{pe.value=e},Ba=(e,a)=>{_.setPanelDisplayMode({pane:e,mode:a})};return p(j,((e,a)=>{if(e&&!a?document.addEventListener("keydown",ta,!0):e||Ta(),e&&e.name!==a?.name&&!Se.value){if(ce.value=-1,_.setOutputRunIndex(-1),ye.value=!0,pe.value=void 0,he.value=!1,ke.value=0,xe.value=0,setTimeout((()=>_.setNDVPushRef()),0),!Ie.value)return;f.run("dataDisplay.nodeTypeChanged",{nodeSubtitle:w.getNodeSubtitle(e,Ie.value,v.workflowObject)}),setTimeout((()=>{if(j.value){const e=W.outgoingConnectionsByNodeName(j.value?.name);Q.track("User opened node modal",{node_id:j.value?.id,node_type:Ie.value?Ie.value?.name:"",workflow_id:W.workflowId,push_ref:De.value,is_editable:!Ye.value,parameters_pane_position:be.value,input_first_connector_runs:Ve.value,output_first_connector_runs:ze.value,selected_view_inputs:Ee.value?"trigger":ea.value,selected_view_outputs:aa.value,input_connectors:Te.value.length,output_connectors:e?.main?.length,input_displayed_run_index:Ue.value,output_displayed_run_index:He.value,data_pinning_tooltip_presented:we.value,input_displayed_row_height_avg:xe.value,output_displayed_row_height_avg:ke.value,source:te.ndv_source?.value??"other"})}}),2e3)}window.top&&!Se.value&&window.top.postMessage(JSON.stringify({command:e?"openNDV":"closeNDV"}),"*")}),{immediate:!0}),p(ze,(()=>{_.setOutputRunIndex(-1)})),p(Ve,(()=>{ce.value=-1})),p(Be,(e=>{setTimeout((()=>{_.setInputNodeName(e)}),0)})),p(Ue,(e=>{setTimeout((()=>{_.setInputRunIndex(e)}),0)})),g((()=>{S.on("data-pinning-discovery",na),ae.on("updateInputNodeName",$a)})),s((()=>{S.off("data-pinning-discovery",na),ae.off("updateInputNodeName",$a),Ta()})),(a,n)=>(h(),c(u(q),{id:"ndv","model-value":(!!u(j)||e.renaming)&&!Se.value,"before-close":wa,"show-close":!1,class:"data-display-wrapper ndv-wrapper","overlay-class":"data-display-overlay",width:"auto","append-to":`#${u(G)}`,"data-test-id":"ndv","z-index":u(de).NDV},{default:y((()=>[d(u(D),{placement:"bottom-start",visible:Ne.value,disabled:!Ne.value},{content:y((()=>[k("div",{class:x(a.$style.triggerWarning)},t(u(ue).baseText("ndv.backToCanvas.waitingForTriggerWarning")),3)])),default:y((()=>[k("div",{class:x(a.$style.backToCanvas),"data-test-id":"back-to-canvas",onClick:wa},[d(u(I),{icon:"arrow-left",color:"text-xlight",size:"medium"}),d(u(N),{color:"text-xlight",size:"medium",bold:!0},{default:y((()=>[m(t(u(ue).baseText("ndv.backToCanvas")),1)])),_:1})],2)])),_:1},8,["visible","disabled"]),u(j)?(h(),i("div",fe,[k("div",{class:x(a.$style.modalBackground),onClick:wa},null,2),(h(),c(_e,{key:u(j).name,"is-trigger-node":Ee.value,"hide-input-and-output":null===Ie.value,position:Ee.value&&!Le.value?0:void 0,"is-draggable":!Ee.value,"has-double-width":"wide"===Ie.value?.parameterPane,"node-type":Ie.value,onSwitchSelectedNode:ma,onOpenConnectionNodeCreator:ba,onClose:wa,onInit:va,onDragstart:da,onDragend:sa},b({output:y((()=>[d(oe,{"data-test-id":"output-panel","workflow-object":e.workflowObject,"can-link-runs":qe.value,"run-index":He.value,"linked-runs":Ge.value,"push-ref":De.value,"is-read-only":e.readOnly||Ye.value,"block-u-i":Ze.value&&Ee.value&&!Me.value,"is-production-execution-preview":e.isProductionExecutionPreview,"is-pane-active":Pe.value,"display-mode":aa.value,onActivatePane:Na,onLinkRun:ca,onUnlinkRun:n[2]||(n[2]=()=>ga("output")),onRunChange:ka,onOpenSettings:_a,onTableMounted:Pa,onItemHover:ua,onSearch:Ra,onDisplayModeChange:n[3]||(n[3]=e=>Ba("output",e))},null,8,["workflow-object","can-link-runs","run-index","linked-runs","push-ref","is-read-only","block-u-i","is-production-execution-preview","is-pane-active","display-mode"])])),main:y((()=>[d(le,{"event-bus":u(ve),dragging:me.value,"push-ref":De.value,"foreign-credentials":Ke.value,"read-only":e.readOnly,"block-u-i":Ze.value&&Le.value,executable:!e.readOnly,"input-size":We.value,onValueChanged:ha,onExecute:pa,onStopExecution:Da,onActivate:oa,onSwitchSelectedNode:ma,onOpenConnectionNodeCreator:ba},null,8,["event-bus","dragging","push-ref","foreign-credentials","read-only","block-u-i","executable","input-size"]),Je.value?(h(),i("a",{key:0,class:x(a.$style.featureRequest),target:"_blank",onClick:ra},[d(u(I),{icon:"lightbulb"}),m(" "+t(u(ue).baseText("ndv.featureRequest")),1)],2)):l("",!0)])),_:2},[Le.value||!Ee.value?{name:"input",fn:y((()=>[Le.value?(h(),c(re,{key:0,"node-name":u(j).name,"push-ref":De.value,onExecute:pa,onActivate:oa},null,8,["node-name","push-ref"])):Ee.value?l("",!0):(h(),c(U,{key:1,"workflow-object":e.workflowObject,"can-link-runs":qe.value,"run-index":Ue.value,"linked-runs":Ge.value,"active-node-name":u(j).name,"current-node-name":Be.value,"push-ref":De.value,"read-only":e.readOnly||Ye.value,"is-production-execution-preview":e.isProductionExecutionPreview,"search-shortcut":je.value?"/":void 0,"display-mode":ea.value,"is-mapping-onboarded":u(_).isMappingOnboarded,"focused-mappable-input":u(_).focusedMappableInput,onActivatePane:Ia,onLinkRun:ya,onUnlinkRun:n[0]||(n[0]=()=>ga("input")),onRunChange:ja,onOpenSettings:_a,onChangeInputNode:Ca,onExecute:pa,onTableMounted:la,onItemHover:ia,onSearch:Ra,onDisplayModeChange:n[1]||(n[1]=e=>Ba("input",e))},null,8,["workflow-object","can-link-runs","run-index","linked-runs","active-node-name","current-node-name","push-ref","read-only","is-production-execution-preview","search-shortcut","display-mode","is-mapping-onboarded","focused-mappable-input"]))])),key:"0"}:void 0]),1032,["is-trigger-node","hide-input-and-output","position","is-draggable","has-double-width","node-type"]))],512)):l("",!0)])),_:1},8,["model-value","append-to","z-index"]))}}),e("default",$(ye,[["__cssModules",{$style:{modalBackground:"_modalBackground_10ueg_125",triggerWarning:"_triggerWarning_10ueg_130",backToCanvas:"_backToCanvas_10ueg_134",featureRequest:"_featureRequest_10ueg_155"}}]]))}}}));
//# sourceMappingURL=NodeDetailsView-legacy-BXQM9KNw.js.map