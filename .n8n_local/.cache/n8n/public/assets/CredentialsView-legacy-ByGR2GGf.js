!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./useEnvFeatureFlag-legacy-D1JgdFvC.js","./externalSecrets.ee.store-legacy-iYi_lGhf.js","./folders.store-legacy-BDfX2wrH.js","./ProjectIcon-legacy-j5-RLKs-.js","./ProjectCardBadge-legacy-CnGUtAhp.js","./CredentialIcon-legacy-CaQiQjuK.js","./useDynamicCredentials-legacy-DtgrzjN_.js","./EnterpriseEdition.ee-legacy-a_97PcVf.js","./TimeAgo-legacy-B4YnT5IQ.js","./orderBy-legacy-BePN9Mxt.js","./ProjectSharing-legacy-BSYOg5eC.js","./insights.store-legacy-BeV4G8Lk.js","./insights.constants-legacy-CSuwNipZ.js","./insights.utils-legacy-BZFivQZh.js","./readyToRun.store-legacy-CKgcGLoh.js","./EmptySharedSectionActionBox-legacy-CISdXDcM.js","./ResourcesListLayout-legacy-F7QQXxoV.js","./ResourceFiltersDropdown-legacy-CHaOqZQ_.js","./ProjectHeader-legacy-DGkAQnAC.js","./InsightsSummary-legacy-MuDFw8Uk.js","./pickBy-legacy-DXV3dvob.js"],(function(e,t){var a,n,l,s,r,d,i,c,o,u,p,y,m,f,b,g,_,v,x,h,j,S,T,w,C,k,E,I,z,P,A,N,B,L,D,$,O,U,M,q,R,V,F,H,G,W,Y,J,Z,K,X,Q,ee,te,ae,ne,le,se,re,de,ie,ce,oe,ue,pe,ye,me,fe,be,ge,_e,ve,xe,he,je,Se,Te,we;return{setters:[function(e){a=e.o},function(e){n=e.C,l=e.Cn,s=e.D,r=e.E,d=e.Gt,i=e.It,c=e.M,o=e.P,u=e.T,p=e.Z,y=e._,m=e._t,f=e.bt,b=e.et,g=e.h,_=e.it,v=e.j,x=e.p,h=e.vn,j=e.w,S=e.xt},function(e){T=e.yt},function(e){w=e.At,C=e.Ci,k=e.Oi,E=e.Pi,I=e.Tt,z=e.Ui,P=e.Vi,A=e.bt,N=e.ft,B=e.ot,L=e.pt,D=e.st,$=e.wi},function(e){O=e.t},function(e){},function(e){U=e.C,M=e.Ft,q=e.Gt,R=e.Lt,V=e.Ma,F=e.Ti,H=e.Tr,e.Ua,G=e.Wa,W=e.fn,Y=e.n,J=e.qr,Z=e.r,K=e.rt,X=e.t,Q=e.wr,ee=e.ws},function(e){e.Ss,te=e.Yc,ae=e.qo,ne=e.rs,e.yo},function(e){},function(e){},function(e){le=e.t},function(e){},function(e){},function(e){se=e.t},function(e){},function(e){},function(e){re=e.t},function(e){de=e.t},function(e){ie=e.t},function(e){},function(e){ce=e.t},function(e){},function(e){},function(e){oe=e.t},function(e){},function(e){},function(e){ue=e.r},function(e){pe=e.t},function(e){ye=e.t},function(e){},function(e){me=e.t},function(e){fe=e.t},function(e){be=e.t}],execute:function(){(ge=document.createElement("style")).textContent="._cardLink_1nez8_125{--card--padding:0 0 0 var(--spacing--sm);cursor:pointer;align-items:stretch;transition:box-shadow .3s}._cardLink_1nez8_125:hover{box-shadow:var(--shadow--card-hover)}._cardHeading_1nez8_135{font-size:var(--font-size--sm);padding:var(--spacing--sm)0 0;align-items:center;display:flex}._cardDescription_1nez8_142{min-height:19px;padding:0 0 var(--spacing--sm);align-items:center;display:flex}._cardActions_1nez8_149{padding:0 var(--spacing--sm)0 0;cursor:default;flex-direction:row;justify-content:center;align-self:stretch;align-items:center;display:flex}._dynamicBadgeText_1nez8_159{align-items:center;gap:var(--spacing--4xs);font-size:var(--font-size--3xs);height:18px;display:inline-flex}._tooltipContent_1nez8_167{gap:var(--spacing--4xs);flex-direction:column;display:flex}@media screen and (max-width:991px){._cardLink_1nez8_125{--card--padding:0 var(--spacing--sm)var(--spacing--sm);--card--append--width:100%;flex-wrap:wrap}._cardActions_1nez8_149{width:100%;padding:0}._cardBadge_1nez8_183{margin-right:auto}}._type-input_12nwp_125{--select--dropdown--max-width:265px}._sidebarContainer_12nwp_129 ul{padding:0!important}\n/*$vite$:1*/",document.head.appendChild(ge);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(Ce=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[Ce]="927ce271-3616-4215-afcd-f7422dfd8ede",t._sentryDebugIdIdentifier="sentry-dbid-927ce271-3616-4215-afcd-f7422dfd8ede")}catch(t){}var t,Ce;_e=a(le(),1),ve={key:0},xe=o({__name:"CredentialCard",props:{data:{},readOnly:{type:Boolean,default:!1},needsSetup:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const a="open",i="delete",o="move",p=t,y=e,m=T(),_=H(),C=Z(),E=K(),N=q(),{isEnabled:B}=ie(),L=n((()=>m.baseText("generic.credential").toLowerCase())),D=n((()=>E.getCredentialTypeByName(y.data.type??""))),$=n((()=>ae(y.data.scopes).credential)),O=n((()=>{const e=[{label:m.baseText("credentials.item.open"),value:a}];return $.value.delete&&e.push({label:m.baseText("credentials.item.delete"),value:i}),$.value.move&&N.isTeamProjectFeatureEnabled&&e.push({label:m.baseText("credentials.item.move"),value:o}),e})),U=n((()=>{const e=(new Date).getFullYear().toString();return(0,_e.default)(y.data.createdAt,"d mmmm"+(String(y.data.createdAt).startsWith(e)?"":", yyyy"))}));function M(){p("click",y.data.id)}async function R(e){switch(e){case a:M();break;case i:await async function(){"confirm"===await _.confirm(m.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:y.data.name}}),m.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),{confirmButtonText:m.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText")})&&await E.deleteCredential({id:y.data.id})}();break;case o:C.openModalWithData({name:V,data:{resource:y.data,resourceType:F.Credential,resourceTypeLabel:L.value}})}}return(t,a)=>(b(),u(d(A),{class:h(t.$style.cardLink),onClick:g(M,["stop"])},{prepend:f((()=>[c(de,{"credential-type-name":D.value?.name??""},null,8,["credential-type-name"])])),header:f((()=>[c(d(P),{tag:"h2",bold:"",class:h(t.$style.cardHeading)},{default:f((()=>[v(l(e.data.name)+" ",1),e.readOnly?(b(),u(d(w),{key:0,class:"ml-3xs",theme:"tertiary",bold:""},{default:f((()=>[v(l(d(m).baseText("credentials.item.readonly")),1)])),_:1})):r("",!0),e.needsSetup?(b(),u(d(w),{key:1,class:"ml-3xs",theme:"warning"},{default:f((()=>[v(l(d(m).baseText("credentials.item.needsSetup")),1)])),_:1})):r("",!0),d(B)&&e.data.isResolvable?(b(),u(d(k),{key:2,placement:"top"},{content:f((()=>[j("div",{class:h(t.$style.tooltipContent)},[j("strong",null,l(d(m).baseText("credentials.dynamic.tooltipTitle")),1),j("span",null,l(d(m).baseText("credentials.dynamic.tooltip")),1)],2)])),default:f((()=>[c(d(w),{theme:"tertiary",class:"ml-3xs pl-3xs pr-3xs","data-test-id":"credential-card-dynamic"},{default:f((()=>[j("span",{class:h(t.$style.dynamicBadgeText)},[c(d(z),{icon:"key-round",size:"medium"}),v(" "+l(d(m).baseText("credentials.dynamic.badge")),1)],2)])),_:1})])),_:1})):r("",!0)])),_:1},8,["class"])])),append:f((()=>[j("div",{class:h(t.$style.cardActions),onClick:a[0]||(a[0]=g((()=>{}),["stop"]))},[c(re,{class:h(t.$style.cardBadge),resource:e.data,"resource-type":d(F).Credential,"resource-type-label":L.value,"personal-project":d(N).personalProject,"show-badge-border":!1,global:e.data.isGlobal},null,8,["class","resource","resource-type","resource-type-label","personal-project","global"]),c(d(I),{"data-test-id":"credential-card-actions",actions:O.value,theme:"dark",onAction:R},null,8,["actions"])],2)])),default:f((()=>[j("div",{class:h(t.$style.cardDescription)},[c(d(P),{color:"text-light",size:"small"},{default:f((()=>[D.value?(b(),s("span",ve,l(D.value.displayName)+" | ",1)):r("",!0),S(j("span",null,[v(l(d(m).baseText("credentials.item.updated"))+" ",1),c(ce,{date:e.data.updatedAt},null,8,["date"]),a[1]||(a[1]=v(" | ",-1))],512),[[x,e.data]]),S(j("span",null,l(d(m).baseText("credentials.item.created"))+" "+l(U.value),513),[[x,e.data]])])),_:1})],2)])),_:1},8,["class"]))}}),he=O(xe,[["__cssModules",{$style:{cardLink:"_cardLink_1nez8_125",cardHeading:"_cardHeading_1nez8_135",cardDescription:"_cardDescription_1nez8_142",cardActions:"_cardActions_1nez8_149",dynamicBadgeText:"_dynamicBadgeText_1nez8_159",tooltipContent:"_tooltipContent_1nez8_167",cardBadge:"_cardBadge_1nez8_183"}}]]),je=a(be(),1),Se={class:"mb-s"},Te={class:"mb-s"},we={key:0,class:"mb-s"},e("default",O(o({__name:"CredentialsView",props:{credentialId:{}},setup(e){const t=e,a=K(),o=U(),g=Z(),x=Q(),S=se(),w=q(),k=X(),I=oe(),z=W(),P=C(),A=$(),O=R(),V=T(),F=ue(),H=e=>{A.replace({query:(0,je.default)(e)})},le=e=>{H({...re.value,search:e})},re=i({...P.query,setupNeeded:"true"===P.query.setupNeeded?.toString(),...P.query.externalSecretsStore?{externalSecretsStore:P.query.externalSecretsStore.toString()}:{}}),de=i(!1),ie=e=>{const t=e;return!!t&&(0===Object.keys(t).length||Object.values(t).every((e=>!e||"__n8n_EMPTY_VALUE_7b1af746-3729-4c60-9b9b-e08eb29e58da"===e)))},ce=n((()=>a.allCredentials.map((e=>({resourceType:"credential",id:e.id,name:e.name,value:"",updatedAt:e.updatedAt,createdAt:e.createdAt,homeProject:e.homeProject,scopes:e.scopes,sharedWithProjects:e.sharedWithProjects,readOnly:!ae(e.scopes).credential.update,needsSetup:ie(e.data),isGlobal:e.isGlobal,isResolvable:e.isResolvable,type:e.type}))))),be=n((()=>a.allCredentialTypes)),ge=n((()=>a.credentialTypesById)),_e=n((()=>x.preferences.branchReadOnly)),ve=n((()=>ae(w.currentProject?.scopes??w.personalProject?.scopes))),xe=n((()=>w.personalProject)),Ce=n((()=>!!P.query.externalSecretsStore&&S.isEnterpriseExternalSecretsEnabled)),ke=e=>{A.replace({params:{credentialId:e},query:P.query})},Ee=()=>{ke("create"),O.track("User clicked add cred button",{source:"Creds list"})};Y({store:g,onModalClosed(e){["selectCredential","editCredential"].includes(e)&&A.replace({params:{credentialId:""},query:P.query})}});const Ie=(e,t,a)=>{if(!J(e))return!1;const n=t;if(n.type&&n.type.length>0&&(a=a&&n.type.includes(e.type)),n.search){const t=n.search.toLowerCase();a=a||ge.value[e.type]&&ge.value[e.type].displayName.toLowerCase().includes(t)}return n.setupNeeded&&(a=a&&e.needsSetup),a},ze=()=>{"create"===t.credentialId&&(ve.value.credential.create?g.openModal(G):A.replace({name:ne.HOMEPAGE}))},Pe=async()=>{if(t.credentialId&&"create"!==t.credentialId){const e=a.getCredentialById(t.credentialId),n=ae(e?.scopes).credential;return e?n.update||n.read?void g.openExistingCredential(t.credentialId):await A.replace({name:ne.ENTITY_UNAUTHORIZED,params:{entityType:"credential"}}):await A.replace({name:ne.ENTITY_NOT_FOUND,params:{entityType:"credential"}})}},Ae=async()=>{de.value=!0;const e=ee().isEnterpriseFeatureEnabled[te.Variables],t=!F.isSharedSubPage&&F.isProjectsSubPage&&P?.params?.projectId===w.personalProject?.id,n=[S.fetchGlobalSecrets()];P?.params?.projectId!==w.personalProject?.id&&"string"==typeof P?.params?.projectId&&n.push(S.fetchProjectSecrets(P.params.projectId));const l=[a.fetchAllCredentials({projectId:P?.params?.projectId,includeScopes:!0,onlySharedWithMe:F.isSharedSubPage,includeGlobal:!t,externalSecretsStore:re.value.externalSecretsStore}),a.fetchCredentialTypes(!1),...n,o.loadNodeTypesIfNotLoaded(),e?M().fetchAllVariables():Promise.resolve()];await Promise.all(l),ze(),await Pe(),de.value=!1};return a.$onAction((({name:e,after:t})=>{"createNewCredential"===e&&t((()=>{a.fetchAllCredentials({projectId:P?.params?.projectId,includeScopes:!0,externalSecretsStore:re.value.externalSecretsStore})}))})),x.$onAction((({name:e,after:t})=>{"pullWorkfolder"===e&&t((()=>{Ae()}))})),m((()=>P?.params?.projectId),Ae),m((()=>t.credentialId),(()=>{ze(),Pe()})),m((()=>re.value.externalSecretsStore),(async(e,t)=>{e===t||void 0===e&&void 0===t||Ae()})),p((()=>{z.set(V.baseText("credentials.heading"))})),(e,t)=>(b(),u(ye,{ref:"layout",filters:re.value,"onUpdate:filters":[t[0]||(t[0]=e=>re.value=e),H],"resource-key":"credentials",resources:ce.value,initialize:Ae,"additional-filters-handler":Ie,"type-props":{itemSize:77},loading:de.value,disabled:_e.value||!ve.value.credential.create,"onUpdate:search":le},{header:f((()=>[c(me,{"main-button":"credential"},{default:f((()=>[d(F).isOverviewSubPage&&d(I).isSummaryEnabled?(b(),u(fe,{key:0,loading:d(I).weeklySummary.isLoading,summary:d(I).weeklySummary.state,"time-range":"week"},null,8,["loading","summary"])):r("",!0)])),_:1})])),default:f((({data:e})=>[c(he,{"data-test-id":"resources-list-item",class:"mb-2xs",data:e,"read-only":e.readOnly,"needs-setup":e.needsSetup,onClick:ke},null,8,["data","read-only","needs-setup"])])),filters:f((({setKeyValue:t})=>[j("div",Se,[c(d(B),{label:d(V).baseText("credentials.filters.type"),bold:!1,size:"small",color:"text-base",class:"mb-3xs"},null,8,["label"]),c(d(N),{ref:"typeInput","model-value":re.value.type,size:"medium",multiple:"",filterable:"",class:h(e.$style["type-input"]),"onUpdate:modelValue":e=>t("type",e)},{default:f((()=>[(b(!0),s(y,null,_(be.value,(e=>(b(),u(d(L),{key:e.name,value:e.name,label:e.displayName},null,8,["value","label"])))),128))])),_:1},8,["model-value","class","onUpdate:modelValue"])]),j("div",Te,[c(d(B),{label:d(V).baseText("credentials.filters.status"),bold:!1,size:"small",color:"text-base",class:"mb-3xs"},null,8,["label"]),c(d(D),{label:d(V).baseText("credentials.filters.setup"),"data-test-id":"credential-filter-setup-needed","model-value":re.value.setupNeeded,"onUpdate:modelValue":e=>t("setupNeeded",e)},null,8,["label","model-value","onUpdate:modelValue"])]),Ce.value&&re.value.externalSecretsStore?(b(),s("div",we,[c(d(B),{label:d(V).baseText("credentials.filters.secretStore"),bold:!1,size:"small",color:"text-base",class:"mb-3xs"},null,8,["label"]),c(d(N),{"model-value":re.value.externalSecretsStore,size:"medium",disabled:"","data-test-id":"credential-filter-secret-store",class:h(e.$style["type-input"])},{default:f((()=>[c(d(L),{value:re.value.externalSecretsStore,label:re.value.externalSecretsStore},null,8,["value","label"])])),_:1},8,["model-value","class"])])):r("",!0)])),empty:f((()=>[d(F).isSharedSubPage&&xe.value?(b(),u(pe,{key:0,"personal-project":xe.value,"resource-type":"credentials"},null,8,["personal-project"])):(b(),u(d(E),{key:1,"data-test-id":"empty-resources-list",icon:{type:"icon",value:"lock"},heading:d(V).baseText(d(k).currentUser?.firstName?"credentials.empty.heading":"credentials.empty.heading.userNotSetup",{interpolate:{name:d(k).currentUser?.firstName??""}}),description:d(V).baseText("credentials.empty.description"),"button-text":d(V).baseText("credentials.empty.button"),"button-type":"secondary","button-disabled":_e.value||!ve.value.credential.create,"button-icon":_e.value||!ve.value.credential.create?"lock":void 0,"onClick:button":Ee},{disabledButtonTooltip:f((()=>[v(l(_e.value?d(V).baseText("readOnlyEnv.cantAdd.credential"):d(V).baseText("credentials.empty.button.disabled.tooltip")),1)])),_:1},8,["heading","description","button-text","button-disabled","button-icon"]))])),_:1},8,["filters","resources","loading","disabled"]))}}),[["__cssModules",{$style:{"type-input":"_type-input_12nwp_125",sidebarContainer:"_sidebarContainer_12nwp_129"}}]]))}}}));
//# sourceMappingURL=CredentialsView-legacy-ByGR2GGf.js.map