(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`ebb23808-a4dc-490f-a28e-7cb712ab5175`,e._sentryDebugIdIdentifier=`sentry-dbid-ebb23808-a4dc-490f-a28e-7cb712ab5175`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,T as l,U as u,_ as d,_t as f,at as p,bt as m,et as h,ft as g,it as _,j as v,vn as y,w as b}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as x}from"./_MapCache-DjbOQyB7.js";import{At as S,Hi as C,Oi as w,Ui as T,Vi as E,ft as D,pt as O,wt as k}from"./src-CppJvwzX.js";import{t as A}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Di as j,Kt as M}from"./users.store-pCkD7Zo0.js";import{n as N,t as P}from"./ProjectIcon-D-HRIqn6.js";import{t as F}from"./orderBy-KAUxkCYD.js";var I={key:0},L=A(c({__name:`ProjectSharingInfo`,props:{project:{}},setup(e){let o=e,s=t(()=>{let{name:e,email:t}=j(o.project.name??``),n=e?.split(` `),r=n?.pop()??``;return{firstName:n?.join(` `)??``,lastName:r,email:t}}),c=t(()=>o.project.icon&&N(o.project.icon)?o.project.icon:null);return(e,t)=>(h(),r(`div`,{class:y(e.$style.projectInfo),"data-test-id":`project-sharing-info`},[b(`div`,null,[c.value?(h(),l(P,{key:0,icon:c.value,size:`large`,round:!0},null,8,[`icon`])):(h(),l(a(k),{key:1,"first-name":s.value.firstName,"last-name":s.value.lastName},null,8,[`first-name`,`last-name`])),b(`div`,{class:y(e.$style.text)},[s.value.firstName||s.value.lastName?(h(),r(`p`,I,n(s.value.firstName)+` `+n(s.value.lastName),1)):i(``,!0),b(`small`,null,n(s.value.email),1)],2)]),p(e.$slots,`default`)],2))}}),[[`__cssModules`,{$style:{projectInfo:`_projectInfo_1vlqj_125`,text:`_text_1vlqj_150`}}]]),R=e(F(),1),z=A(c({__name:`ProjectSharing`,props:u({projects:{},homeProject:{},roles:{},readonly:{type:Boolean},static:{type:Boolean},placeholder:{},emptyOptionsText:{},size:{},clearable:{type:Boolean},canShareGlobally:{type:Boolean},isSharedGlobally:{type:Boolean},allUsersLabel:{},disabledTooltip:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:u([`projectAdded`,`projectRemoved`,`clear`,`update:shareWithAllUsers`],[`update:modelValue`]),setup(e,{emit:c}){let u=x(),p=e,b={id:`all_users`,name:p.allUsersLabel??u.baseText(`projects.sharing.allUsers`),type:`public`,icon:{type:`icon`,value:`globe`},role:`member`,createdAt:`${Date.now()}`,updatedAt:`${Date.now()}`},k=g(e,`modelValue`),A=c,j=o(Array.isArray(k.value)?``:k.value?.id??``),P=t(()=>Array.isArray(k.value)?p.isSharedGlobally?[b,...k.value]:k.value:null),F=o(``),I=t(()=>p.placeholder??u.baseText(`projects.sharing.select.placeholder`)),z=t(()=>p.emptyOptionsText??u.baseText(`projects.sharing.noMatchingUsers`)),B=t(()=>p.projects.filter(e=>e.name?.toLowerCase().includes(F.value.toLowerCase())&&(Array.isArray(k.value)?!k.value?.find(t=>t.id===e.id):!0))),V=t(()=>[...p.canShareGlobally&&!p.isSharedGlobally?[b]:[],...(0,R.default)(B.value,[`type`,e=>e.name?.toLowerCase()],[`desc`,`asc`])]),H=t(()=>{let e={type:`icon`,value:`layers`},t=p.projects.find(e=>e.id===j.value);return t?.type===M.Personal?{type:`icon`,value:`user`}:t?.type===M.Team&&N(t.icon)?t.icon:e}),U=e=>{F.value=e},W=e=>{if(e===b.id){A(`update:shareWithAllUsers`,!0);return}let t=p.projects.find(t=>t.id===e);t&&(Array.isArray(k.value)?k.value=[...k.value,t]:k.value=t,A(`projectAdded`,t))},G=(e,t)=>{if(!(!Array.isArray(k.value)||p.readonly)){if(e.id===b.id&&t===`remove`){A(`update:shareWithAllUsers`,!1);return}(k.value?.findIndex(t=>t.id===e.id)??-1)!==-1&&t===`remove`&&(k.value=k.value.filter(t=>t.id!==e.id),A(`projectRemoved`,e))}};return f(()=>k.value,()=>{k.value===null||Array.isArray(k.value)?j.value=``:j.value=k.value.id},{immediate:!0}),(t,o)=>(h(),r(`div`,null,[s(a(w),{disabled:!p.disabledTooltip,placement:`top`},{content:m(()=>[v(n(p.disabledTooltip),1)]),default:m(()=>[!p.static||p.disabledTooltip?(h(),l(a(D),{key:0,"model-value":j.value,"data-test-id":`project-sharing-select`,filterable:!0,"filter-method":U,placeholder:I.value,"default-first-option":!0,"no-data-text":z.value,size:e.size??`medium`,disabled:p.readonly||!!p.disabledTooltip,clearable:e.clearable,"popper-class":t.$style.popper,"onUpdate:modelValue":W,onClear:o[0]||=e=>A(`clear`)},{prefix:m(()=>[H.value.type===`icon`?(h(),l(a(T),{key:0,icon:H.value.value,color:`text-dark`},null,8,[`icon`])):H.value.type===`emoji`?(h(),l(a(E),{key:1,color:`text-light`,class:y(t.$style.emoji)},{default:m(()=>[v(n(H.value.value),1)]),_:1},8,[`class`])):i(``,!0)]),default:m(()=>[(h(!0),r(d,null,_(V.value,e=>(h(),l(a(O),{key:e.id,value:e.id,label:e.name??``},{default:m(()=>[s(L,{project:e},null,8,[`project`])]),_:2},1032,[`value`,`label`]))),128))]),_:1},8,[`model-value`,`placeholder`,`no-data-text`,`size`,`disabled`,`clearable`,`popper-class`])):i(``,!0)]),_:1},8,[`disabled`]),P.value?(h(),r(`ul`,{key:0,class:y(t.$style.selectedProjects)},[p.homeProject?(h(),r(`li`,{key:0,class:y(t.$style.project),"data-test-id":`project-sharing-owner`},[s(L,{project:p.homeProject},{default:m(()=>[s(a(S),{theme:`tertiary`,bold:``},{default:m(()=>[v(n(a(u).baseText(`auth.roles.owner`)),1)]),_:1})]),_:1},8,[`project`])],2)):i(``,!0),(h(!0),r(d,null,_(P.value,n=>(h(),r(`li`,{key:n.id,class:y(t.$style.project),"data-test-id":`project-sharing-list-item`},[s(L,{project:n},null,8,[`project`]),p.roles?.length&&!p.static&&!(n.id===b.id&&!e.canShareGlobally)?(h(),l(a(D),{key:0,class:y(t.$style.projectRoleSelect),"model-value":p.roles[0],disabled:p.readonly,size:`small`,"onUpdate:modelValue":e=>G(n,e)},{default:m(()=>[(h(!0),r(d,null,_(e.roles,e=>(h(),l(a(O),{key:e.slug,value:e.slug,label:e.displayName},null,8,[`value`,`label`]))),128))]),_:1},8,[`class`,`model-value`,`disabled`,`onUpdate:modelValue`])):i(``,!0),!p.static&&!(n.id===b.id&&!e.canShareGlobally)?(h(),l(a(C),{key:1,variant:`subtle`,iconOnly:``,"native-type":`button`,icon:`trash-2`,disabled:p.readonly,"data-test-id":`project-sharing-remove`,onClick:e=>G(n,`remove`)},null,8,[`disabled`,`onClick`])):i(``,!0)],2))),128))],2)):i(``,!0)]))}}),[[`__cssModules`,{$style:{project:`_project_pay4y_125`,selectedProjects:`_selectedProjects_pay4y_133`,projectRoleSelect:`_projectRoleSelect_pay4y_144`,popper:`_popper_pay4y_148`,emoji:`_emoji_pay4y_152`}}]]);export{z as t};
//# sourceMappingURL=ProjectSharing-DgwjJKfK.js.map