!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./_baseOrderBy-legacy-BnyL5wLN.js"],(function(e,a){var t,s,n,l,i,o,r,u,c,d,f,v,h,w,b,g,m,y,p;return{setters:[function(e){t=e.C,s=e.It},function(e){n=e.Es,l=e.Hr,i=e.Lt,o=e.Ts,r=e.Wc,u=e.r,c=e.t,d=e.ws,f=e.yr},function(e){v=e.As,h=e.Ga,w=e.Ys,b=e.ks,g=e.sc},function(e){m=e.j,y=e.r}],execute:function(){try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(N=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[N]="8a31a862-91c2-4b50-ac09-36c193d293eb",a._sentryDebugIdIdentifier="sentry-dbid-8a31a862-91c2-4b50-ac09-36c193d293eb")}catch(a){}var a,N;p=/^(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<buildmetadata>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,e("t",m(r.VERSIONS,(()=>{const e=s({enabled:!1,whatsNewEnabled:!1,endpoint:"",whatsNewEndpoint:"",infoUrl:""}),r=s([]),m=s(),N=s({title:"",createdAt:(new Date).toISOString(),updatedAt:null,calloutText:"",footer:"",items:[]}),A=s(),C=i(),{showToast:I,showMessage:V}=f(),S=u(),k=d(),E=c(),T=l(g),W=l(w),j=t((()=>"stable"===k.settings.releaseChannel&&r.value.length>0)),D=t((()=>{if(!j.value||!m.value||!z.value)return!1;if(m.value.hasSecurityIssue)return!0;const e=m.value.name.match(p),a=z.value.name.match(p);if(!e?.groups||!a?.groups)return!1;if(Number(e.groups.major)!==Number(a.groups.major))return!0;const t=Number(e.groups.minor);return Number(a.groups.minor)-t>=2})),z=t((()=>r.value[0]??m.value)),U=t((()=>e.value.enabled)),_=t((()=>e.value.infoUrl)),O=t((()=>T.value?h(T.value,{fallbackValue:[]}):[])),Z=t((()=>W.value?h(W.value,{fallbackValue:[]}):[])),x=t((()=>N.value.items)),R=async()=>{try{const{enabled:a,endpoint:t}=e.value;if(a&&t){const e=y(),a=e.versionCli,s=e.instanceId;F({versions:await o(t,a,s),currentVersion:a})}}catch(a){console.error("Failed to fetch versions:",a)}},F=e=>{r.value=e.versions.filter((a=>a.name!==e.currentVersion)),m.value=e.versions.find((a=>a.name===e.currentVersion))},M=()=>{W.value=JSON.stringify(x.value.map((e=>e.id)))},L=()=>{const e=E.currentUser?.createdAt;let a=!1;if(e){const t=new Date(e).getTime();a=x.value.some((e=>(e.updatedAt?new Date(e.updatedAt).getTime():0)>t))}else a=!0;const t=x.value.every((e=>Z.value.includes(e.id)));return a&&!t},P=async()=>{try{const{enabled:a,whatsNewEnabled:t,whatsNewEndpoint:s}=e.value;if(a&&t&&s){const e=y(),a=e.versionCli,t=e.instanceId,l=await n(s,a,t);l.items?.length>0&&((e=>{N.value=e})(l),L()&&(A.value=V({title:N.value.title,message:N.value.calloutText,duration:0,position:"bottom-left",customClass:"clickable whats-new-notification",onClick:()=>{const e=N.value.items[0]?.id??0;C.track("User clicked on what's new notification",{article_id:e}),S.openModalWithData({name:v,data:{articleId:e}})},onClose:()=>{M()}})))}}catch(a){console.error("Failed to fetch Whats New section:",a)}};return{currentVersion:m,latestVersion:z,nextVersions:r,hasVersionUpdates:j,hasSignificantUpdates:D,areNotificationsEnabled:U,infoUrl:_,fetchVersions:R,setVersions:F,initialize:a=>{e.value=a},checkForNewVersions:async()=>{if(U.value&&(await Promise.all([R(),P()]),m.value&&m.value.hasSecurityIssue&&r.value.length)){const e=m.value.securityIssueFixVersion;let a="Please update to latest version.";e&&(a=`Please update to version ${e} or higher.`),a=`${a} <a class="primary-color">More info</a>`,I({title:"Critical update available",message:a,onClick:()=>{S.openModal(b)},closeOnClick:!0,customClass:"clickable",type:"warning",duration:0})}},fetchWhatsNew:P,whatsNew:N,whatsNewArticles:x,isWhatsNewArticleRead:e=>O.value.includes(e),setWhatsNewArticleRead:e=>{O.value.includes(e)||(T.value=JSON.stringify([...O.value,e]))},closeWhatsNewCallout:()=>{A.value?.close(),A.value=void 0},shouldShowWhatsNewCallout:L,dismissWhatsNewCallout:M}})))}}}));
//# sourceMappingURL=versions.store-legacy-DyDzuHis.js.map