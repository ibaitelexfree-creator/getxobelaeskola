!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./_baseOrderBy-legacy-BnyL5wLN.js","./useClipboard-legacy-CaRHRTup.js","./assistant.store-legacy-5vR0xJ8p.js","./RunData-legacy-lPpXxp--.js","./NDVEmptyState-legacy-BucrD4N6.js","./usePinnedData-legacy-B5CI71uf.js","./useCanvasOperations-legacy-CEMGNuuE.js","./NodeIcon-legacy-DOI-M5xN.js","./useRunWorkflow-legacy-4stFR283.js","./KeyboardShortcutTooltip-legacy-C9k84nly.js","./useKeybindings-legacy-Ba2t_Uzp.js","./fileUtils-legacy-pDkwNHwV.js","./useLogsTreeExpand-legacy-D53Lg-vJ.js","./useResizablePanel-legacy-D_ULk6eg.js"],(function(e,t){var a,n,o,s,i,l,r,c,u,d,g,p,h,v,m,f,b,y,_,w,x,k,z,T,C,O,I,E,S,R,$,N,M,D,P,B,q,H,j,L,A,W,U,V,F,K,G,Y,J,Q,X,Z,ee,te,ae,ne,oe,se,ie,le,re,ce,ue,de,ge,pe,he,ve,me,fe,be,ye,_e,we,xe,ke,ze,Te,Ce,Oe,Ie,Ee,Se,Re,$e,Ne,Me,De,Pe,Be,qe,He,je,Le,Ae,We,Ue,Ve,Fe,Ke,Ge,Ye,Je,Qe,Xe,Ze,et,tt,at,nt,ot,st,it,lt,rt,ct,ut,dt,gt,pt,ht,vt,mt,ft,bt,yt,_t,wt,xt,kt,zt,Tt,Ct,Ot,It,Et,St,Rt,$t,Nt,Mt,Dt,Pt,Bt,qt,Ht,jt,Lt,At,Wt,Ut,Vt,Ft,Kt,Gt,Yt,Jt,Qt,Xt,Zt,ea,ta,aa,na,oa,sa,ia,la,ra,ca,ua,da;function ga({chatTrigger:e,sessionId:t,executionResultData:a,onRunChatWorkflow:o,ws:s,onNewMessage:i}){const l=Y(),{showError:r}=ze(),c=d(0),u=d(!1);async function g(n,c){const d=e.value;if(!d)return void r(new Error("Chat Trigger Node could not be found!"),"Trigger Node not found");const g=gt(d),p={json:{sessionId:t.value,action:"sendMessage",[g]:n}};if(c&&c.length>0){const e=c.map((e=>function(e){return{fileName:e.name,fileSize:`${e.size} bytes`,fileExtension:e.name.split(".").pop()??"",fileType:e.type.split("/")[0],mimeType:e.type}}(e))),t=await async function(e){const t={};return await Promise.all(e.map((async(e,a)=>{const n=await nt(e);t[`data${a}`]=n}))),t}(c);p.json.files=e,p.binary=t}const h={startTime:Date.now(),executionTime:0,executionIndex:0,executionStatus:"success",data:{main:[[p]]},source:[null]};u.value=!0;const v=await o({triggerNode:d.name,nodeData:h,source:"RunData.ManualChatMessage",message:n});if(u.value=!1,s.value=null,!v?.executionId)return;if("responseNodes"===d.parameters.options?.responseMode)return;const m=a.value?mt(a.value,v.executionId,l.baseText("chat.window.chat.response.empty")):void 0;void 0!==m&&i(m)}return{previousMessageIndex:c,isLoading:n((()=>u.value)),setLoadingState:e=>{u.value=e},sendMessage:async function(a,n){if(c.value=0,""===a.trim()&&(!n||0===n.length))return void r(new Error(l.baseText("chat.window.chat.provideMessage")),l.baseText("chat.window.chat.emptyChatMessage"));const o=Me(e.value);if(o.hasData.value){if("confirm"!==await me().confirm(l.baseText("chat.window.chat.unpinAndExecute.description"),l.baseText("chat.window.chat.unpinAndExecute.title"),{confirmButtonText:l.baseText("chat.window.chat.unpinAndExecute.confirm"),cancelButtonText:l.baseText("chat.window.chat.unpinAndExecute.cancel")}))return;o.unsetData("unpin-and-send-chat-message-modal")}const d={text:a,sender:"user",sessionId:t.value,id:Te(),files:n};i(d),s.value?.readyState!==WebSocket.OPEN||u.value?await g(d.text,n):(s.value.send(JSON.stringify({sessionId:t.value,action:"sendMessage",chatInput:a,files:await _t(n)})),u.value=!0)}}}function pa(e){const t=Y(),a=xe(),o=fe(),s=Ie(),i=Pe(),l=ie(),r=ge(),{runWorkflow:c}=et({router:l}),u=d(null),g=n((()=>i.chatSessionMessages)),p=n((()=>i.chatSessionId)),h=n((()=>a.getPastChatMessages)),v=n((()=>a.allNodes.find(be)??null)),m=n((()=>!0===v.value?.parameters?.options?.allowFileUploads)),f=n((()=>v.value?.parameters?.options?.allowedFilesMimeTypes?.toString()??"")),b=n((()=>"responseNodes"===v.value?.parameters?.options?.responseMode)),{sendMessage:y,isLoading:_,setLoadingState:w}=ga({chatTrigger:v,sessionId:p,executionResultData:n((()=>a.getWorkflowExecution?.data?.resultData)),onRunChatWorkflow:async function(e){const t={triggerNode:e.triggerNode,nodeData:e.nodeData,source:e.source};a.chatPartialExecutionDestinationNode&&(t.destinationNode={nodeName:a.chatPartialExecutionDestinationNode,mode:"inclusive"},a.chatPartialExecutionDestinationNode=null);const n=await c(t);if(n){if(b.value){const e=He(s.urlBaseEditor,n.executionId,p.value,!1);u.value=new WebSocket(e),u.value.onmessage=e=>{if("n8n|heartbeat"===e.data)return void u.value?.send("n8n|heartbeat-ack");if("n8n|continue"===e.data)return void w(!0);w(!1);const t={...Fe(e.data),sessionId:p.value};k.blockUserInput.value=Ue(t),i.addChatMessage(t),i.isOpen&&qe.emit("focusInput")},u.value.onclose=()=>{w(!1),u.value=null,k.blockUserInput.value=!1}}return await async function(){return await new Promise((e=>{const t=t=>{t||(n(),e())},n=x((()=>a.isWorkflowRunning),t);t(a.isWorkflowRunning)}))}(),a.appendChatMessage(e.message),n}},onNewMessage:i.addChatMessage,ws:u}),{chatConfig:k,chatOptions:z}={chatConfig:{messages:(T={messages:g,sendMessage:y,currentSessionId:p,isLoading:_,isDisabled:n((()=>e)),allowFileUploads:m,locale:t}).messages,sendMessage:T.sendMessage,initialMessages:d([]),currentSessionId:T.currentSessionId,waitingForResponse:T.isLoading,blockUserInput:d(!1)},chatOptions:{i18n:{en:{title:"",footer:"",subtitle:"",inputPlaceholder:T.locale.baseText("chat.window.chat.placeholder"),getStarted:"",closeButtonTooltip:""}},webhookUrl:"",mode:"window",showWindowCloseButton:!0,disabled:T.isDisabled,allowFileUploads:T.allowFileUploads,allowedFilesMimeTypes:f,messageComponents:{[De.WITH_BUTTONS]:Qe}}};var T;const C=n((()=>it(a.workflowExecutionData,t.baseText("chat.window.chat.response.empty"))));function O(){o.setWorkflowExecutionData(null),r.updateNodesExecutionIssues(),i.resetChatSessionId(),i.resetMessages(),i.isOpen&&qe.emit("focusInput")}return P(zt,k),P(Le,z),x((()=>a.workflowId),((e,t)=>{t&&O()})),{currentSessionId:n((()=>i.chatSessionId)),messages:n((()=>e?C.value:i.chatSessionMessages)),previousChatMessages:h,sendMessage:y,refreshSession:O,displayExecution:function(e){const t=l.resolve({name:Oe.EXECUTION_PREVIEW,params:{name:a.workflowId,executionId:e}});window.open(t.href,"_blank")}}}function ha(){return W(je)}function va(){return{options:W(Le)}}function ma(e,t){return O(),s("svg",Mt,[...t[0]||(t[0]=[j("path",{fill:"currentColor",d:"M16.5 6v11.5a4 4 0 0 1-4 4a4 4 0 0 1-4-4V5A2.5 2.5 0 0 1 11 2.5A2.5 2.5 0 0 1 13.5 5v10.5a1 1 0 0 1-1 1a1 1 0 0 1-1-1V6H10v9.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5V5a4 4 0 0 0-4-4a4 4 0 0 0-4 4v12.5a5.5 5.5 0 0 0 5.5 5.5a5.5 5.5 0 0 0 5.5-5.5V6z"},null,-1)])])}function fa(e,t){return O(),s("svg",Pt,[...t[0]||(t[0]=[j("path",{fill:"currentColor",d:"m2 21l21-9L2 3v7l15 2l-15 2z"},null,-1)])])}function ba(e){return e instanceof HTMLStyleElement||e instanceof HTMLLinkElement&&"stylesheet"===e.rel}function ya({title:e,container:t,content:a,initialHeight:o,initialWidth:s,shouldPopOut:i,onRequestClose:l}){const r=d(),c=d(!1),u=n((()=>window.parent===window)),p=n((()=>!!r.value)),v=n((()=>p.value?a.value??void 0:void 0)),m=new MutationObserver((e=>{r.value&&function(e,t){const a=e.document.head.querySelectorAll('style, link[rel="stylesheet"]');for(const n of t){for(const t of n.addedNodes)ba(t)&&e.document.head.appendChild(t.cloneNode(!0));for(const e of n.removedNodes)if(ba(e))for(const t of a)t.isEqualNode(e)&&t.remove()}}(r.value,e)})),f=ye(r);async function b(){if(a.value){if(!r.value){const e=`popup=yes,width=${s},height=${o},left=100,top=100,toolbar=no,menubar=no,scrollbars=yes,resizable=yes`;r.value=window.open("","_blank",e)??void 0}if(r.value){!function(e,t){const a=e.document.querySelector("link[rel=icon]")?.getAttribute("href");if(a){const e=t.document.createElement("link");e.setAttribute("rel","icon"),e.setAttribute("href",a),t.document.head.appendChild(e)}}(window,r.value);for(const t of[...document.styleSheets])try{const e=[...t.cssRules].map((e=>e.cssText)).join(""),a=document.createElement("style");a.textContent=e,r.value.document.head.appendChild(a)}catch(e){const a=document.createElement("link");a.rel="stylesheet",a.type=t.type,a.media=t.media,a.href=t.href,r.value.document.head.appendChild(a)}r.value.document.body.append(a.value),r.value.addEventListener("pagehide",(()=>!c.value&&l()))}}}return m.observe(document.head,{childList:!0,subtree:!0}),P(Ce,r),ee(v),x(i,(e=>e?requestAnimationFrame(b):(r.value?.close(),r.value=void 0,void(a.value&&t.value?.appendChild(a.value)))),{immediate:!0}),x([e,r],(([e,t])=>{t&&f.set(e)}),{immediate:!0}),h((()=>{m.disconnect()})),g((()=>{c.value=!0,r.value&&(r.value.close(),l())})),{canPopOut:u,isPoppedOut:p,popOutWindow:r}}return{setters:[function(e){a=e.o},function(e){n=e.C,o=e.Cn,s=e.D,i=e.E,l=e.G,r=e.Gt,c=e.Ht,u=e.I,d=e.It,g=e.J,p=e.M,h=e.Nt,v=e.P,m=e.Q,f=e.T,b=e.Vt,y=e.W,_=e.Z,w=e._,x=e._t,k=e.at,z=e.bn,T=e.bt,C=e.ct,O=e.et,I=e.f,E=e.h,S=e.it,R=e.j,$=e.jt,N=e.k,M=e.m,D=e.mt,P=e.nt,B=e.st,q=e.ut,H=e.vn,j=e.w,L=e.xt,A=e.yn,W=e.z,U=e.zt},function(e){V=e.A,F=e.B,K=e.b,G=e.bt,Y=e.yt},function(e){J=e.Ci,Q=e.Dt,X=e.Hi,Z=e.I,ee=e.Li,te=e.Mi,ae=e.Oi,ne=e.Ui,oe=e.Vi,se=e.gi,ie=e.wi,le=e.z},function(e){re=e.t},function(e){ce=e.$,ue=e.Bt,de=e.C,ge=e.It,pe=e.Lt,he=e.S,ve=e.Sr,me=e.Tr,fe=e.Vt,be=e.d,ye=e.fn,_e=e.qc,we=e.r,xe=e.s,ke=e.wr,ze=e.yr,Te=e.zr},function(e){Ce=e.Sc,e.Ss,Oe=e.rs},function(e){Ie=e.r},function(e){Ee=e.t},function(e){Se=e.n},function(e){Re=e.n,$e=e.t},function(e){Ne=e.t},function(e){Me=e.t},function(e){De=e._,Pe=e.a,Be=e.c,qe=e.d,He=e.f,je=e.g,Le=e.h,Ae=e.i,We=e.l,Ue=e.m,Ve=e.o,Fe=e.p,Ke=e.r,Ge=e.s,Ye=e.t,Je=e.u,Qe=e.v,Xe=e.y},function(e){Ze=e.t},function(e){et=e.t},function(e){tt=e.t},function(e){at=e.t},function(e){nt=e.t},function(e){ot=e._,st=e.a,it=e.b,lt=e.f,rt=e.g,ct=e.h,ut=e.i,dt=e.l,gt=e.m,pt=e.n,ht=e.p,vt=e.r,mt=e.s,ft=e.t,bt=e.u,yt=e.v,_t=e.y},function(e){wt=e.n,xt=e.t}],execute:function(){(kt=document.createElement("style")).textContent="._container_16vzt_125{font-size:var(--font-size--2xs);text-align:left;padding-block:var(--spacing--2xs);background-color:var(--color--foreground--tint-2);line-height:var(--line-height--sm);justify-content:space-between;align-items:center;display:flex}._container_16vzt_125:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-left:var(--spacing--sm);padding-right:var(--spacing--2xs)}._container_16vzt_125:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-left:var(--spacing--sm);padding-right:var(--spacing--2xs)}._container_16vzt_125:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-right:var(--spacing--sm);padding-left:var(--spacing--2xs)}._container_16vzt_125:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-right:var(--spacing--sm);padding-left:var(--spacing--2xs)}._container_16vzt_125._clickable_16vzt_137{cursor:pointer}._container_16vzt_125:not(:last-child){border-bottom:var(--border)}._title_16vzt_145{text-overflow:ellipsis;white-space:nowrap;flex-grow:1;flex-shrink:1;overflow:hidden}._actions_16vzt_153{color:var(--color--text);max-width:70%;margin-block:calc(-1*var(--spacing--sm));flex-shrink:0;align-items:center;display:flex}._container_1dsxk_125{align-items:center;display:flex}._container_1dsxk_125>*{padding-inline:var(--spacing--2xs);text-overflow:ellipsis;white-space:nowrap;flex-shrink:1;overflow:hidden}._container_1dsxk_125>:not(:last-child){border-right:var(--border)}._container_1qsnq_125{background-color:var(--color--foreground--tint-2);flex-direction:column;flex-grow:1;flex-shrink:1;align-items:stretch;display:flex;overflow:hidden}._clearButton_1qsnq_135{color:var(--color--text--tint-1);gap:var(--spacing--5xs);border:none}._content_1qsnq_141{padding-right:var(--spacing--5xs);flex-direction:column;flex-grow:1;justify-content:stretch;align-items:stretch;display:flex;position:relative;overflow:auto}._content_1qsnq_141._empty_1qsnq_151{justify-content:center;align-items:center}._emptyText_1qsnq_156{text-align:center;max-width:20em}._summary_1qsnq_161{padding:var(--spacing--2xs)}._switchViewButtons_1qsnq_165{z-index:10;margin:var(--spacing--4xs)var(--spacing--2xs);visibility:hidden;opacity:0;transition:opacity .3s cubic-bezier(.19,1,.22,1);position:absolute;top:0;right:0}._content_1qsnq_141:hover ._switchViewButtons_1qsnq_165{visibility:visible;opacity:1}.chat-message{max-width:fit-content;font-size:var(--chat--message--font-size);padding:var(--chat--message--padding);border-radius:var(--chat--message--border-radius);scroll-margin:3rem;display:block;position:relative}.chat-message .chat-message-actions{opacity:0;gap:1rem;display:flex;position:absolute;bottom:calc(100% - .5rem);left:0;transform:translateY(-.25rem)}.chat-message.chat-message-from-user .chat-message-actions{left:auto;right:0}.chat-message:hover .chat-message-actions{opacity:1}.chat-message p{line-height:var(--chat--message-line-height);word-wrap:break-word}.chat-message+.chat-message{margin-top:var(--chat--message--margin-bottom)}.chat-message.chat-message-from-user+.chat-message.chat-message-from-bot,.chat-message.chat-message-from-bot+.chat-message.chat-message-from-user{margin-top:var(--chat--spacing)}.chat-message.chat-message-from-bot{color:var(--chat--message--bot--color);border-bottom-left-radius:0}.chat-message.chat-message-from-bot:not(.chat-message-transparent){background-color:var(--chat--message--bot--background);border:var(--chat--message--bot--border)}.chat-message.chat-message-from-user{color:var(--chat--message--user--color);border-bottom-right-radius:0;margin-left:auto}.chat-message.chat-message-from-user:not(.chat-message-transparent){background-color:var(--chat--message--user--background);border:var(--chat--message--user--border)}.chat-message .chat-message-files{flex-wrap:wrap;gap:.25rem;padding-top:.5rem;display:flex}.chat-get-started{padding-top:var(--chat--spacing);padding-bottom:var(--chat--spacing);justify-content:center;align-items:center;height:100%;display:flex}.chat-powered-by{text-align:center}.chat-powered-by a{color:var(--chat--color--primary);text-decoration:none}.chat-get-started-footer{padding:var(--chat--spacing)}.chat-input[data-v-a4112bfa]{flex-direction:column;justify-content:center;align-items:center;width:100%;display:flex;position:relative}.chat-input[data-v-a4112bfa] *{box-sizing:border-box}.chat-inputs[data-v-a4112bfa]{justify-content:center;align-items:flex-end;width:100%;display:flex}.chat-inputs textarea[data-v-a4112bfa]{font-family:inherit;font-size:var(--chat--input--font-size);border:var(--chat--input--border,0);border-radius:var(--chat--input--border-radius);width:100%;padding:var(--chat--input--padding);min-height:var(--chat--textarea--height,2.5rem);max-height:var(--chat--textarea--max-height);height:var(--chat--textarea--height,2.5rem);resize:none;background:var(--chat--input--background,white);color:var(--chat--input--text-color,initial);line-height:var(--chat--input--line-height,1.5);outline:none;overflow-y:auto}.chat-inputs textarea[data-v-a4112bfa]::placeholder{font-size:var(--chat--input--placeholder--font-size,var(--chat--input--font-size))}.chat-inputs textarea[data-v-a4112bfa]:focus,.chat-inputs textarea[data-v-a4112bfa]:hover{border-color:var(--chat--input--border-active,0)}.chat-inputs-controls[data-v-a4112bfa]{display:flex}.chat-input-send-button[data-v-a4112bfa],.chat-input-file-button[data-v-a4112bfa]{height:var(--chat--textarea--height);width:var(--chat--textarea--height);background:var(--chat--input--send--button--background,white);cursor:pointer;color:var(--chat--input--send--button--color,var(--chat--color--secondary));transition:color var(--chat--transition-duration)ease;border:0;justify-content:center;align-items:center;font-size:24px;display:inline-flex}.chat-input-send-button svg[data-v-a4112bfa],.chat-input-file-button svg[data-v-a4112bfa]{min-width:fit-content}.chat-input-send-button[disabled][data-v-a4112bfa],.chat-input-file-button[disabled][data-v-a4112bfa]{cursor:no-drop;color:var(--chat--color-disabled)}.chat-input-send-button .chat-input-send-button[data-v-a4112bfa]:hover,.chat-input-send-button .chat-input-send-button[data-v-a4112bfa]:focus,.chat-input-file-button .chat-input-send-button[data-v-a4112bfa]:hover,.chat-input-file-button .chat-input-send-button[data-v-a4112bfa]:focus{background:var(--chat--input--send--button--background-hover,var(--chat--input--send--button--background));color:var(--chat--input--send--button--color-hover)}.chat-input-file-button[data-v-a4112bfa]{background:var(--chat--input--file--button--background,white);color:var(--chat--input--file--button--color)}.chat-input-file-button[data-v-a4112bfa]:hover{background:var(--chat--input--file--button--background-hover);color:var(--chat--input--file--button--color-hover)}.chat-files[data-v-a4112bfa]{width:100%;padding:var(--chat--files-spacing);flex-flow:wrap;gap:.5rem;display:flex;overflow-x:hidden;overflow-y:auto}.chat-input-left-panel[data-v-a4112bfa]{width:var(--chat--input--left--panel--width);margin-left:.4rem}.chat-layout{width:100%;height:100%;font-family:var(--chat--font-family);flex-direction:column;display:flex;overflow-y:auto}.chat-layout .chat-header{height:var(--chat--header-height);padding:var(--chat--header--padding);background:var(--chat--header--background);color:var(--chat--header--color);border-top:var(--chat--header--border-top);border-bottom:var(--chat--header--border-bottom);border-left:var(--chat--header--border-left);border-right:var(--chat--header--border-right);flex-direction:column;justify-content:center;gap:1em;display:flex}.chat-layout .chat-header h1{font-size:var(--chat--heading--font-size);color:var(--chat--header--color)}.chat-layout .chat-header p{font-size:var(--chat--subtitle--font-size);line-height:var(--chat--subtitle--line-height)}.chat-layout .chat-body{background:var(--chat--body--background);flex-direction:column;flex:1;min-height:100px;display:flex;position:relative;overflow-y:auto}.chat-layout .chat-footer{border-top:1px solid var(--chat--color-light-shade-100);background:var(--chat--footer--background);color:var(--chat--footer--color)}.chat-heading{justify-content:space-between;align-items:center;display:flex}.chat-close-button{cursor:pointer;background:0 0;border:none;display:flex}.chat-close-button:hover{color:var(--chat--close--button--color-hover,var(--chat--color--primary))}.chat-window-wrapper{bottom:var(--chat--window--bottom);right:var(--chat--window--right);z-index:var(--chat--window--z-index);max-width:calc(100% - var(--chat--window--right,var(--chat--spacing))*2);max-height:calc(100% - var(--chat--window--bottom,var(--chat--spacing))*2);flex-direction:column;display:flex;position:fixed}.chat-window-wrapper .chat-window{width:var(--chat--window--width);height:var(--chat--window--height);border:var(--chat--window--border,1px solid var(--chat--color-light-shade-100));border-radius:var(--chat--window--border-radius,var(--chat--border-radius));max-width:100%;max-height:100%;margin-bottom:var(--chat--window--margin-bottom,var(--chat--spacing));transform-origin:100% 100%;display:flex;overflow:hidden}.chat-window-wrapper .chat-window .chat-layout{flex:1;width:auto;height:auto}.chat-window-wrapper .chat-window-toggle{background:var(--chat--toggle--background);color:var(--chat--toggle--color);cursor:pointer;width:var(--chat--toggle--width);height:var(--chat--toggle--height);border-radius:var(--chat--toggle--border-radius,50%);transition:transform var(--chat--transition-duration)ease,background var(--chat--transition-duration)ease;flex:none;justify-content:center;align-items:center;margin-left:auto;display:inline-flex}.chat-window-wrapper .chat-window-toggle:hover,.chat-window-wrapper .chat-window-toggle:focus{background:var(--chat--toggle--hover--background);transform:scale(1.05)}.chat-window-wrapper .chat-window-toggle:active{background:var(--chat--toggle--active--background);transform:scale(.95)}.chat-window-transition-enter-active,.chat-window-transition-leave-active{transition:transform var(--chat--transition-duration)ease,opacity var(--chat--transition-duration)ease}.chat-window-transition-enter-from,.chat-window-transition-leave-to{opacity:0;transform:scale(0)}.chat-window-toggle-transition-enter-active,.chat-window-toggle-transition-leave-active{transition:opacity var(--chat--transition-duration)ease}.chat-window-toggle-transition-enter-from,.chat-window-toggle-transition-leave-to{opacity:0}.chat-message-typing{max-width:80px}.chat-message-typing.chat-message-typing-animation-scaling .chat-message-typing-circle{animation:.8s ease-in-out 3.6s infinite chat-message-typing-animation-scaling}.chat-message-typing.chat-message-typing-animation-bouncing .chat-message-typing-circle{animation:.8s ease-in-out 3.6s infinite chat-message-typing-animation-bouncing}.chat-message-typing .chat-message-typing-body{justify-content:center;align-items:center;display:flex}.chat-message-typing .chat-message-typing-circle{background-color:var(--chat--color-typing);border-radius:50%;width:10px;height:10px;margin:3px;display:block}.chat-message-typing .chat-message-typing-circle:first-child{animation-delay:0s}.chat-message-typing .chat-message-typing-circle:nth-child(2){animation-delay:.333s}.chat-message-typing .chat-message-typing-circle:nth-child(3){animation-delay:.666s}@keyframes chat-message-typing-animation-scaling{0%{transform:scale(1)}33%{transform:scale(1)}50%{transform:scale(1.4)}to{transform:scale(1)}}@keyframes chat-message-typing-animation-bouncing{0%{transform:translateY(0)}33%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}.chat-messages-list{padding:var(--chat--messages-list--padding);margin-top:auto;display:block}.empty-container{justify-content:center;align-items:center;display:flex;container-type:size}.empty-container p{max-width:16em;margin:0}.empty{text-align:center;color:var(--color--text);justify-content:center;align-items:center;gap:var(--spacing--xs);padding-inline:var(--spacing--md);padding-bottom:var(--spacing--lg);flex-direction:column;display:flex;overflow:hidden}.emptyIcon{zoom:2.5;color:var(--color-button-secondary-border)}@container (height<150px){.empty{text-align:left;flex-direction:row}.emptyIcon{zoom:1.5}}._container_1lun2_125{margin:0 var(--spacing--4xs);align-items:center;display:inline-flex}._icon_1lun2_131{color:var(--color--text--tint-1);cursor:help}._icon_1lun2_131:hover{color:var(--color--primary)}._container_1clrm_125{margin:0 var(--spacing--4xs);align-items:center;display:inline-flex}._icon_1clrm_131{color:var(--color--text--tint-1);cursor:pointer}._icon_1clrm_131:hover{color:var(--color--primary)}._chat_14gab_125{--chat--spacing:var(--spacing--xs);--chat--message--padding:var(--spacing--2xs);--chat--message--font-size:var(--font-size--2xs);--chat--input--font-size:var(--font-size--sm);--chat--input--placeholder--font-size:var(--font-size--xs);--chat--message--bot--background:transparent;--chat--message--user--background:var(--color--text--tint-2);--chat--message--bot--color:var(--color--text--shade-1);--chat--message--user--color:var(--color--text--shade-1);--chat--message--bot--border:none;--chat--message--user--border:none;--chat--input--padding:var(--spacing--xs);--chat--color-typing:var(--color--text--tint-1);--chat--textarea--max-height:calc(var(--logs-panel--height)*.3);--chat--message--pre--background:var(--color--foreground--tint-1);--chat--textarea--height:calc(var(--chat--input--padding)*2 + var(--chat--input--font-size)*var(--chat--input--line-height));--chat--transition-duration:.3s;--chat--button--font-size:var(--font-size--2xs);--chat--button--line-height:1;--chat--button--border-radius:var(--radius);--chat--button--padding:var(--spacing--2xs)var(--spacing--xs);--chat--button--color--primary:var(--button--color--text--primary);--chat--button--background--primary:var(--button--color--background--primary);--chat--button--border--primary:none;--chat--button--color--primary--hover:var(--button--color--text--primary);--chat--button--background--primary--hover:var(--button--color--background--primary--hover-active-focus);--chat--button--border--primary--hover:none;--chat--button--color--primary--disabled:var(--button--color--text--primary--disabled);--chat--button--background--primary--disabled:var(--button--color--background--primary--disabled);--chat--button--border--primary--disabled:none;--chat--button--color--secondary:var(--button--color--text--secondary);--chat--button--background--secondary:var(--button--color--background--secondary);--chat--button--border--secondary:var(--border-width)var(--button--border-color--secondary)var(--border-style);--chat--button--color--secondary--hover:var(--button--color--text--secondary--hover-active-focus);--chat--button--background--secondary--hover:var(--button--color--background--secondary--hover);--chat--button--border--secondary--hover:var(--border-width)var(--button--border-color--secondary--hover-active-focus)var(--border-style);--chat--button--color--secondary--disabled:var(--button--color--text--secondary--disabled);--chat--button--background--secondary--disabled:var(--button--color--background--secondary);--chat--button--border--secondary--disabled:var(--border-width)var(--button--border-color--secondary--disabled)var(--border-style);background-color:var(--color--background--light-2);flex-direction:column;height:100%;display:flex;overflow:hidden}._chatHeader_14gab_185{font-size:var(--font-size--sm);font-weight:var(--font-weight--regular);text-align:left;border-bottom:1px solid var(--color--foreground);padding:var(--chat--spacing);background-color:var(--color--foreground--tint-2);justify-content:space-between;align-items:center;line-height:18px;display:flex}._chatTitle_14gab_198{font-weight:var(--font-weight--medium)}._session_14gab_202{align-items:center;gap:var(--spacing--2xs);color:var(--color--text);max-width:70%;display:flex}._sessionId_14gab_210{white-space:nowrap;text-overflow:ellipsis;display:inline-block;overflow:hidden}._sessionId_14gab_210._copyable_14gab_216{cursor:pointer}._headerButton_14gab_220{border:none;max-height:1.1rem}._newHeaderButton_14gab_225{color:var(--color--text--tint-1);border:none}._chatBody_14gab_230{flex-direction:column;justify-content:center;align-items:center;height:100%;display:flex;overflow:auto}._messages_14gab_239{border-radius:var(--radius);width:100%;height:100%;padding-top:var(--spacing--lg);overflow:auto}._messages_14gab_239:not(:last-child){margin-right:1em}._messagesInput_14gab_250{--input--border-color:var(--border-color);--chat--input--border:none;--chat--input--border-radius:.5rem;--chat--input--send--button--background:transparent;--chat--input--send--button--color:var(--color--primary);--chat--input--file--button--background:transparent;--chat--input--file--button--color:var(--button--color--text--secondary);--chat--input--border-active:var(--input--border-color--focus,var(--color--secondary));--chat--files-spacing:var(--spacing--2xs);--chat--input--background:transparent;--chat--input--file--button--color-hover:var(--color--primary);padding:var(--spacing--5xs);margin:0 var(--chat--spacing)var(--chat--spacing);background:var(--lm-chat--bot--color--background);border-radius:var(--chat--input--border-radius);border:var(--input--border-color,var(--border-color))var(--input--border-style,var(--border-style))var(--input--border-width,var(--border-width));flex-grow:1;transition:border-color .2s ease-in-out;display:flex}[data-theme=dark] ._messagesInput_14gab_250{--chat--input--text-color:var(--input--color--text,var(--color--text--shade-1))}@media (prefers-color-scheme:dark){._messagesInput_14gab_250{--chat--input--text-color:var(--input--color--text,var(--color--text--shade-1))}}._messagesInput_14gab_250:focus-within{--input--border-color:#4538a3}._messagesHistory_14gab_284{height:var(--chat--textarea--height);flex-direction:column;justify-content:center;align-items:center;display:flex}._component_7mlt9_125{--run-data--color--background:var(--color--background--light-2)}._title_7mlt9_129{text-transform:uppercase;letter-spacing:3px}._container_1du2i_125{flex-direction:column;flex-grow:1;flex-shrink:1;align-items:stretch;display:flex;overflow:hidden}._header_1du2i_134{padding:var(--spacing--2xs)}._actions_1du2i_138{align-items:center;gap:var(--spacing--2xs);display:flex}._actions_1du2i_138:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-right:var(--spacing--2xs)}._actions_1du2i_138:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-right:var(--spacing--2xs)}._actions_1du2i_138:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-left:var(--spacing--2xs)}._actions_1du2i_138:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-left:var(--spacing--2xs)}._actions_1du2i_138 ._pressed_1du2i_144{background-color:var(--button--outline-color--secondary--focus)}._title_1du2i_148{flex-shrink:1;align-items:center;display:flex}._icon_1du2i_154{margin-right:var(--spacing--2xs)}._executionSummary_1du2i_158{flex-shrink:1}._content_1du2i_162{flex-grow:1;flex-shrink:1;align-items:stretch;display:flex;overflow:hidden}._outputPanel_1du2i_170{flex-grow:1;width:0}._inputResizer_1du2i_175{flex-shrink:0;overflow:hidden}._inputResizer_1du2i_175:not(:-webkit-any(:last-child,._collapsed_1du2i_179,._full_1du2i_179)){border-right:var(--border)}._inputResizer_1du2i_175:not(:is(:last-child,._collapsed_1du2i_179,._full_1du2i_179)){border-right:var(--border)}._placeholder_1du2i_183{flex-grow:1;justify-content:center;align-items:center;display:flex}._container_1g4ug_125{display:flex}._container_1g4ug_125 button:hover{background-color:var(--color--background)}._popOutContent_14az5_125{height:100%;position:relative;overflow:hidden}._resizeWrapper_14az5_131{border-top:var(--border);background-color:var(--color--background--light-2);flex-basis:0;height:100%;min-height:0}._poppedOut_14az5_138 ._resizeWrapper_14az5_131{border-top:none}._container_14az5_142{flex-grow:1;height:100%;display:flex}._container_14az5_142>:not(:last-child){border-right:var(--border)}._chat_14az5_151{flex-shrink:0}._logsContainer_14az5_155{flex-grow:1;align-items:stretch;width:0;display:flex}._logsContainer_14az5_155>:not(:last-child){border-right:var(--border)}._overviewResizer_14az5_165{flex-grow:0;flex-shrink:0}._overviewResizer_14az5_165:last-child{flex-grow:1}._logsOverview_14az5_173{height:100%}._logsDetails_14az5_177{flex-grow:1;width:0}\n/*$vite$:1*/",document.head.appendChild(kt);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(h=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[h]="f84975ec-d320-45b5-ad35-54170ad90dd2",t._sentryDebugIdIdentifier="sentry-dbid-f84975ec-d320-45b5-ad35-54170ad90dd2")}catch(t){}var t,h;zt="Chat",Tt=v({__name:"LogsPanelHeader",props:{title:{},isClickable:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const a=t;function n(){e.isClickable&&a("click")}return(t,a)=>(O(),s("header",{class:H([t.$style.container,{[t.$style.clickable]:e.isClickable}]),onClick:n},[p(r(oe),{class:H(t.$style.title),bold:!0,size:"small"},{default:T((()=>[k(t.$slots,"title",{},(()=>[R(o(e.title),1)]))])),_:3},8,["class"]),j("div",{class:H(t.$style.actions)},[k(t.$slots,"actions")],2)],2))}}),Ct=re(Tt,[["__cssModules",{$style:{container:"_container_16vzt_125",clickable:"_clickable_16vzt_137",title:"_title_16vzt_145",actions:"_actions_16vzt_153"}}]]),Ot=a(ce(),1),It=re(v({__name:"LogsViewExecutionSummary",props:{status:{},consumedTokens:{},startTime:{},timeTook:{}},setup(e){const t=Y(),a=F({interval:1e3}),s=n((()=>"running"===e.status||"waiting"===e.status?t.baseText("logs.overview.body.summaryText.for",{interpolate:{status:(0,Ot.default)(e.status),time:t.displayTimer(1e3*Math.floor((a.value-e.startTime)/1e3),!0)}}):void 0===e.timeTook?(0,Ot.default)(e.status):t.baseText("logs.overview.body.summaryText.in",{interpolate:{status:(0,Ot.default)(e.status),time:t.displayTimer(e.timeTook,!0)}})));return(t,a)=>(O(),f(r(oe),{tag:"div",color:"text-light",size:"small",class:H(t.$style.container)},{default:T((()=>[j("span",null,o(s.value),1),e.consumedTokens.totalTokens>0?(O(),f(st,{key:0,"consumed-tokens":e.consumedTokens},null,8,["consumed-tokens"])):i("",!0)])),_:1},8,["class"]))}}),[["__cssModules",{$style:{container:"_container_1dsxk_125"}}]]),Et=v({__name:"LogsOverviewPanel",props:{isOpen:{type:Boolean},selected:{},isReadOnly:{type:Boolean},isCompact:{type:Boolean},execution:{},entries:{},flatLogEntries:{},latestNodeInfo:{},isHeaderClickable:{type:Boolean}},emits:["clickHeader","select","clearExecutionData","openNdv","toggleExpanded"],setup(e,{emit:t}){const a=t,l=Y(),c=function(){const e=J(),t=ke(),a=xe(),o=n((()=>a.workflowExecutionData)),s=n((()=>a.isWorkflowRunning)),i=n((()=>!!e?.meta?.readOnlyCanvas)),{editableWorkflow:l}=Ye(),r=de(),c=n((()=>t.preferences.branchReadOnly)),u=n((()=>l.value.nodes.filter((e=>r.isTriggerNode(e.type))).every((e=>e.disabled))));return n((()=>!(i.value||c.value||s.value||u.value||!o.value)))}(),u=n((()=>0===e.flatLogEntries.length||void 0===e.execution)),d=n((()=>[{label:l.baseText("logs.overview.header.switch.overview"),value:"overview"},{label:l.baseText("logs.overview.header.switch.details"),value:"details"}])),g=_e()>0,h=n((()=>rt(...e.entries.map((e=>ct(e,!1)))))),v=n((()=>e.execution?.startedAt&&e.execution.stoppedAt?+new Date(e.execution.stoppedAt)-+new Date(e.execution.startedAt):void 0)),m=n((()=>h.value.totalTokens>0||e.entries.some((e=>ct(e,!0).totalTokens>0))));function b(t){a("select","overview"===t?void 0:e.flatLogEntries[0])}return(t,n)=>(O(),s("div",{class:H([t.$style.container,g?t.$style.staticScrollBar:""]),"data-test-id":"logs-overview"},[p(Ct,{title:r(l).baseText("logs.overview.header.title"),"data-test-id":"logs-overview-header","is-clickable":e.isHeaderClickable,onClick:n[1]||(n[1]=e=>a("clickHeader"))},{actions:T((()=>[r(c)?(O(),f(r(ae),{key:0,content:r(l).baseText("logs.overview.header.actions.clearExecution.tooltip")},{default:T((()=>[p(r(X),{variant:"subtle",size:"xsmall",icon:"trash-2","icon-size":"medium","data-test-id":"clear-execution-data-button",class:H(t.$style.clearButton),onClick:n[0]||(n[0]=E((e=>a("clearExecutionData")),["stop"]))},{default:T((()=>[R(o(r(l).baseText("logs.overview.header.actions.clearExecution")),1)])),_:1},8,["class"])])),_:1},8,["content"])):i("",!0),k(t.$slots,"actions")])),_:3},8,["title","is-clickable"]),e.isOpen?(O(),s("div",{key:0,class:H([t.$style.content,u.value?t.$style.empty:""]),"data-test-id":"logs-overview-body"},[u.value||void 0===e.execution?(O(),f(r(oe),{key:0,tag:"p",size:"medium",color:"text-base",class:H(t.$style.emptyText),"data-test-id":"logs-overview-empty"},{default:T((()=>[R(o(r(l).baseText("logs.overview.body.empty.message")),1)])),_:1},8,["class"])):(O(),s(w,{key:1},[p(It,{"data-test-id":"logs-overview-status",class:H(t.$style.summary),status:e.execution.status,"consumed-tokens":h.value,"start-time":+new Date(e.execution.startedAt),"time-took":v.value},null,8,["class","status","consumed-tokens","start-time","time-took"]),p(vt,{"is-read-only":e.isReadOnly,selected:e.selected,"is-compact":e.isCompact,"should-show-token-count-column":m.value,"latest-node-info":e.latestNodeInfo,"flat-log-entries":e.flatLogEntries,"can-open-ndv":!0,execution:e.execution,onToggleExpanded:n[2]||(n[2]=e=>a("toggleExpanded",e)),onOpenNdv:n[3]||(n[3]=e=>a("openNdv",e)),onSelect:n[4]||(n[4]=e=>a("select",e))},null,8,["is-read-only","selected","is-compact","should-show-token-count-column","latest-node-info","flat-log-entries","execution"]),p(r(le),{size:"small-medium",class:H(t.$style.switchViewButtons),"model-value":e.selected?"details":"overview",options:d.value,"onUpdate:modelValue":b},null,8,["class","model-value","options"])],64))],2)):i("",!0)],2))}}),St=re(Et,[["__cssModules",{$style:{container:"_container_1qsnq_125",clearButton:"_clearButton_1qsnq_135",content:"_content_1qsnq_141",empty:"_empty_1qsnq_151",emptyText:"_emptyText_1qsnq_156",summary:"_summary_1qsnq_161",switchViewButtons:"_switchViewButtons_1qsnq_165"}}]]),Rt={key:0,class:"chat-message-actions"},$t={key:2,class:"chat-message-files"},Nt=v({__name:"Message",props:{message:{}},setup(e,{expose:t}){const{message:a}=c(e),{options:o}=va(),l=d(null),g=d({}),h=n((()=>a.value.text||"&lt;Empty response&gt;")),v=n((()=>({"chat-message-from-user":"user"===a.value.sender,"chat-message-from-bot":"bot"===a.value.sender,"chat-message-transparent":!0===a.value.transparent}))),m={...o?.messageComponents??{}};t({scrollToView:()=>{l.value?.scrollIntoView&&l.value.scrollIntoView({block:"start"})}});const b=async e=>await new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=a,n.readAsDataURL(e)}));return _((async()=>{if(a.value.files)for(const t of a.value.files)try{const e=await b(t);g.value[t.name]=e}catch(e){console.error("Error reading file:",e)}})),(e,t)=>(O(),s("div",{ref_key:"messageContainer",ref:l,class:H(["chat-message",v.value])},[e.$slots.beforeMessage?(O(),s("div",Rt,[k(e.$slots,"beforeMessage",A(u({message:r(a)})))])):i("",!0),k(e.$slots,"default",{},(()=>["component"===r(a).type&&m[r(a).key]?(O(),f(C(m[r(a).key]),A(y({key:0},r(a).arguments)),null,16)):(O(),f(Xe,{key:1,text:h.value},null,8,["text"])),(r(a).files??[]).length>0?(O(),s("div",$t,[(O(!0),s(w,null,S(r(a).files??[],(e=>(O(),s("div",{key:e.name,class:"chat-message-file"},[p(wt,{file:e,"is-removable":!1,"is-previewable":!0},null,8,["file"])])))),128))])):i("",!0)]))],2))}}),Mt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Dt={name:"mdi-paperclip",render:ma},Pt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Bt={name:"mdi-send",render:fa},qt={class:"chat-inputs"},Ht={key:0,class:"chat-input-left-panel"},jt=["disabled","placeholder"],Lt={class:"chat-inputs-controls"},At=["disabled"],Wt=["disabled"],Ut={key:0,class:"chat-files"},Vt=v({__name:"Input",props:{placeholder:{default:"inputPlaceholder"}},emits:["arrowKeyDown","escapeKeyDown"],setup(e,{emit:t}){const a=e,{t:o}=function(){const{options:e}=va(),t=e?.defaultLanguage??"en";return{t:function(a){const n=e?.i18n?.[t]?.[a];return $(n)?n.value:n??a},te:function(a){return!!e?.i18n?.[t]?.[a]}}}(),l=t,{options:c}=va(),u=ha(),{waitingForResponse:g}=u,h=d(null),v=d(null),b=d(""),y=d(!1),x=d(null),T=d(!1),C=n((()=>!!u.blockUserInput.value||!T.value&&(""===b.value||r(g)||!0===c.disabled?.value))),R=n((()=>!0===c.disabled?.value)),N=n((()=>D.value&&r(g)&&!c.disabled?.value)),D=n((()=>!0===r(c.allowFileUploads))),P=n((()=>r(c.allowedFilesMimeTypes))),B=n((()=>({"--controls-count":D.value?2:1}))),{open:q,reset:H,onChange:A}=V({multiple:!0,reset:!1});function W(){v.value&&v.value.blur()}function U(){v.value&&v.value.focus()}function F(e){b.value=e,U()}function K(){if(h.value){const e=Array.from(h.value);return H(),h.value=null,e}return[]}async function G(e){if(!e||0===e.length)return[];const t=e.map((async e=>new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>t({name:e.name,type:e.type,data:n.result}),n.onerror=()=>a(new Error(`Error reading file: ${n.error?.message??"Unknown error"}`)),n.readAsDataURL(e)}))));return await Promise.all(t)}async function Y(e){if(e.preventDefault(),C.value)return;const t=b.value;if(b.value="",y.value=!0,u.ws&&T.value)return void(await async function(e,t){const a={id:Te(),text:t,sender:"user",files:h.value?K():void 0};u.messages.value.push(a),e.send(JSON.stringify({sessionId:u.currentSessionId.value,action:"sendMessage",chatInput:t,files:await G(a.files)})),u.waitingForResponse.value=!0,T.value=!1}(u.ws,t));const a=await u.sendMessage(t,K());a?.executionId&&function(e){if(c.webhookUrl&&u.currentSessionId.value)try{const t=He(c.webhookUrl,e,u.currentSessionId.value,!0);u.ws=new WebSocket(t),u.ws.onmessage=e=>{if("n8n|heartbeat"===e.data)return void u.ws?.send("n8n|heartbeat-ack");if("n8n|continue"===e.data)return T.value=!1,void(u.waitingForResponse.value=!0);const t=Fe(e.data);u.messages.value.push(t),T.value=!0,u.waitingForResponse.value=!1,u.blockUserInput.value=Ue(t)},u.ws.onclose=()=>{u.ws=null,T.value=!1,u.waitingForResponse.value=!1,u.blockUserInput.value=!1}}catch(t){console.error("Error setting up websocket connection",t)}}(a.executionId),y.value=!1}async function J(e){e.shiftKey||e.isComposing||(await Y(e),ee())}function Q(e){if(!h.value)return;const t=new DataTransfer;for(let a=0;a<h.value.length;a++){const n=h.value[a];e.name!==n.name&&t.items.add(n)}H(),h.value=t.files}function X(e){"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),l("arrowKeyDown",{key:e.key,currentInputValue:b.value})):"Escape"===e.key&&(e.preventDefault(),l("escapeKeyDown",{currentInputValue:b.value}))}function Z(){N.value||q({accept:r(P)})}function ee(){const e=v.value;if(!e)return;e.style.height="var(--chat--textarea--height)";const t=Math.min(e.scrollHeight,480);e.style.height=`${t}px`}return A((e=>{if(!e)return;const t=new DataTransfer;if(h.value)for(let a=0;a<h.value.length;a++)t.items.add(h.value[a]);for(let a=0;a<e.length;a++)t.items.add(e[a]);h.value=t.files})),_((()=>{qe.on("focusInput",U),qe.on("blurInput",W),qe.on("setInputValue",F),v.value&&(x.value=new ResizeObserver((e=>{for(const t of e)t.target===v.value&&ee()})),x.value.observe(v.value))})),m((()=>{qe.off("focusInput",U),qe.off("blurInput",W),qe.off("setInputValue",F),x.value&&(x.value.disconnect(),x.value=null)})),(e,t)=>(O(),s("div",{class:"chat-input",style:z(B.value),onKeydown:E(X,["stop"])},[j("div",qt,[e.$slots.leftPanel?(O(),s("div",Ht,[k(e.$slots,"leftPanel",{},void 0,!0)])):i("",!0),L(j("textarea",{ref_key:"chatTextArea",ref:v,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),"data-test-id":"chat-input",disabled:R.value,placeholder:r(o)(a.placeholder),onKeydown:M(J,["enter"]),onInput:ee,onMousedown:ee,onFocus:ee},null,40,jt),[[I,b.value]]),j("div",Lt,[D.value?(O(),s("button",{key:0,disabled:N.value,class:"chat-input-file-button","data-test-id":"chat-attach-file-button",onClick:Z},[p(r(Dt),{height:"24",width:"24"})],8,At)):i("",!0),j("button",{disabled:C.value,class:"chat-input-send-button",onClick:Y},[p(r(Bt),{height:"24",width:"24"})],8,Wt)])]),!h.value?.length||y.value&&!T.value?i("",!0):(O(),s("div",Ut,[(O(!0),s(w,null,S(h.value,(e=>(O(),f(wt,{key:e.name,file:e,"is-removable":!0,"is-previewable":!0,onRemove:Q},null,8,["file"])))),128))]))],36))}}),Ft=re(Vt,[["__scopeId","data-v-a4112bfa"]]),Kt=v({__name:"MessageTyping",props:{animation:{default:"bouncing"}},setup(e){const t=e,a={id:"typing",text:"",sender:"bot"},o=d(),s=n((()=>({"chat-message-typing":!0,[`chat-message-typing-animation-${t.animation}`]:!0})));return _((()=>{o.value?.scrollToView()})),(e,t)=>(O(),f(r(Nt),{ref_key:"messageContainer",ref:o,class:H(s.value),message:a,"data-test-id":"chat-message-typing"},{default:T((()=>[...t[0]||(t[0]=[j("div",{class:"chat-message-typing-body"},[j("span",{class:"chat-message-typing-circle"}),j("span",{class:"chat-message-typing-circle"}),j("span",{class:"chat-message-typing-circle"})],-1)])])),_:1},8,["class"]))}}),Gt={key:0,class:"empty-container"},Yt={class:"empty","data-test-id":"chat-messages-empty"},Jt={key:1,class:"chat-messages-list"},Qt=v({__name:"MessagesList",props:{messages:{},emptyText:{}},setup(e){const t=ha(),a=d([]),{initialMessages:n,waitingForResponse:l}=t;return x((()=>a.value.length),(()=>{const e=a.value[a.value.length-1];e&&e.scrollToView()})),(t,c)=>e.emptyText&&0===r(n).length&&0===e.messages.length?(O(),s("div",Gt,[j("div",Yt,[p(r(ne),{icon:"message-circle",size:"large",class:"emptyIcon"}),p(r(oe),{tag:"p",size:"medium",color:"text-base"},{default:T((()=>[R(o(e.emptyText),1)])),_:1})])])):(O(),s("div",Jt,[(O(!0),s(w,null,S(r(n),(e=>(O(),f(Nt,{key:e.id,message:e},null,8,["message"])))),128)),(O(!0),s(w,null,S(e.messages,(e=>(O(),f(Nt,{key:e.id,ref_for:!0,ref_key:"messageComponents",ref:a,message:e},{beforeMessage:T((({message:e})=>[k(t.$slots,"beforeMessage",y({ref_for:!0},{message:e}))])),_:2},1032,["message"])))),128)),r(l)?(O(),f(Kt,{key:0})):i("",!0)]))}}),Xt=re(v({__name:"MessageOptionTooltip",props:{placement:{type:String,default:"top"}},setup:e=>(t,a)=>(O(),s("div",{class:H(t.$style.container)},[p(r(ae),{placement:e.placement},{content:T((()=>[k(t.$slots,"default")])),default:T((()=>[j("span",{class:H(t.$style.icon)},[p(r(ne),{icon:"info",size:"xsmall"})],2)])),_:3},8,["placement"])],2))}),[["__cssModules",{$style:{container:"_container_1lun2_125",icon:"_icon_1lun2_131"}}]]),Zt=re(v({__name:"MessageOptionAction",props:{label:{},icon:{},placement:{}},setup(e){const t=q(),a=()=>{t.onClick?.()};return(t,n)=>(O(),s("div",{class:H(t.$style.container)},[p(r(ae),{placement:e.placement},{content:T((()=>[R(o(e.label),1)])),default:T((()=>[p(r(ne),{class:H(t.$style.icon),icon:e.icon,size:"xsmall",onClick:a},null,8,["class","icon"])])),_:1},8,["placement"])],2))}}),[["__cssModules",{$style:{container:"_container_1clrm_125",icon:"_icon_1clrm_131"}}]]),ea=["onClick"],ta=v({__name:"ChatMessagesPanel",props:{pastChatMessages:{},messages:{},sessionId:{},showCloseButton:{type:Boolean},isOpen:{type:Boolean,default:!0},isReadOnly:{type:Boolean,default:!1},isHeaderClickable:{type:Boolean}},emits:["displayExecution","sendMessage","refreshSession","close","clickHeader"],setup(e,{emit:t}){const a=e,l=t,c=Ee(),u=Y(),g=ze(),h=d(-1),v=d(""),m=n((()=>u.baseText("chat.window.session.id",{interpolate:{id:`${a.sessionId.slice(0,5)}...`}}))),b=n((()=>a.messages.length>0?u.baseText("chat.window.chat.placeholder"):u.baseText("chat.window.chat.placeholderPristine")));function y(e){return"text"===e.type||!e.type}function _(e){!function(e){h.value=-1,v.value="",l("sendMessage",e)}(e.text)}function w(){l("refreshSession")}function x({currentInputValue:e,key:t}){const n=a.pastChatMessages;if(0!==n.length)if(0===e.length&&-1!==h.value&&(h.value=-1,v.value=""),-1===h.value&&e.length>0&&(v.value=e),"ArrowUp"===t){qe.emit("blurInput"),-1===h.value?h.value=n.length-1:h.value>0&&h.value--;const e=n[h.value];qe.emit("setInputValue",e),qe.emit("focusInput")}else if("ArrowDown"===t){if(-1===h.value)return;if(qe.emit("blurInput"),h.value<n.length-1){h.value++;const e=n[h.value];qe.emit("setInputValue",e)}else h.value=-1,qe.emit("setInputValue",v.value),v.value="";qe.emit("focusInput")}}function k(){-1!==h.value&&(h.value=-1,qe.emit("setInputValue",v.value),v.value="")}async function z(){await c.copy(a.sessionId),g.showMessage({title:u.baseText("generic.copiedToClipboard"),message:"",type:"success"})}return(t,a)=>(O(),s("div",{class:H([t.$style.chat,"ignore-key-press-canvas"]),"data-test-id":"workflow-lm-chat-dialog",tabindex:"0"},[p(Ct,{"data-test-id":"chat-header",title:r(u).baseText("chat.window.title"),"is-clickable":e.isHeaderClickable,onClick:a[0]||(a[0]=e=>l("clickHeader"))},{actions:T((()=>[r(c).isSupported&&!e.isReadOnly?(O(),f(r(ae),{key:0},{content:T((()=>[R(o(e.sessionId)+" ",1),a[3]||(a[3]=j("br",null,null,-1)),R(" "+o(r(u).baseText("chat.window.session.id.copy")),1)])),default:T((()=>[p(r(X),{variant:"ghost","data-test-id":"chat-session-id",size:"xsmall",class:H(t.$style.newHeaderButton),onClick:E(z,["stop"])},{default:T((()=>[R(o(m.value),1)])),_:1},8,["class"])])),_:1})):i("",!0),e.messages.length>0&&!e.isReadOnly?(O(),f(r(ae),{key:1,content:r(u).baseText("chat.window.session.resetSession")},{default:T((()=>[p(r(te),{variant:"ghost",class:H(t.$style.newHeaderButton),"data-test-id":"refresh-session-button",size:"xsmall","icon-size":"medium",icon:"undo-2",title:r(u).baseText("chat.window.session.reset"),onClick:E(w,["stop"])},null,8,["class","title"])])),_:1},8,["content"])):i("",!0)])),_:1},8,["title","is-clickable"]),e.isOpen?(O(),s("main",{key:0,class:H(t.$style.chatBody),"data-test-id":"canvas-chat-body"},[p(Qt,{messages:e.messages,class:H(t.$style.messages),"empty-text":r(u).baseText("chat.window.chat.emptyChatMessage.v2")},{beforeMessage:T((({message:t})=>[e.isReadOnly||"bot"!==t.sender||t.id.includes("preload")?i("",!0):(O(),f(Xt,{key:0,placement:"right","data-test-id":"execution-id-tooltip"},{default:T((()=>[R(o(r(u).baseText("chat.window.chat.chatMessageOptions.executionId"))+": ",1),j("a",{href:"#",onClick:e=>l("displayExecution",t.id)},o(t.id),9,ea)])),_:2},1024)),!e.isReadOnly&&y(t)&&"user"===t.sender?(O(),f(Zt,{key:1,"data-test-id":"repost-message-button",icon:"redo-2",label:r(u).baseText("chat.window.chat.chatMessageOptions.repostMessage"),placement:"left",onClickOnce:e=>_(t)},null,8,["label","onClickOnce"])):i("",!0),!e.isReadOnly&&y(t)&&"user"===t.sender?(O(),f(Zt,{key:2,"data-test-id":"reuse-message-button",icon:"files",label:r(u).baseText("chat.window.chat.chatMessageOptions.reuseMessage"),placement:"left",onClick:e=>function(e){qe.emit("setInputValue",e.text)}(t)},null,8,["label","onClick"])):i("",!0)])),_:1},8,["messages","class","empty-text"])],2)):i("",!0),e.isOpen?(O(),s("div",{key:1,class:H(t.$style.messagesInput)},[p(Ft,{"data-test-id":"lm-chat-inputs",placeholder:b.value,onArrowKeyDown:x,onEscapeKeyDown:k},N({_:2},[e.pastChatMessages.length>0?{name:"leftPanel",fn:T((()=>[j("div",{class:H(t.$style.messagesHistory)},[p(r(X),{variant:"ghost",title:"Navigate to previous message",icon:"chevron-up",size:"xsmall",disabled:0===h.value,onClick:a[1]||(a[1]=e=>x({currentInputValue:"",key:"ArrowUp"}))},null,8,["disabled"]),p(r(X),{variant:"ghost",title:"Navigate to next message",icon:"chevron-down",size:"xsmall",disabled:-1===h.value,onClick:a[2]||(a[2]=e=>x({currentInputValue:"",key:"ArrowDown"}))},null,8,["disabled"])],2)])),key:"0"}:void 0]),1032,["placeholder"])],2)):i("",!0)],2))}}),aa=re(ta,[["__cssModules",{$style:{chat:"_chat_14gab_125",chatHeader:"_chatHeader_14gab_185",chatTitle:"_chatTitle_14gab_198",session:"_session_14gab_202",sessionId:"_sessionId_14gab_210",copyable:"_copyable_14gab_216",headerButton:"_headerButton_14gab_220",newHeaderButton:"_newHeaderButton_14gab_225",chatBody:"_chatBody_14gab_230",messages:"_messages_14gab_239",messagesInput:"_messagesInput_14gab_250",messagesHistory:"_messagesHistory_14gab_284"}}]]),na=re(v({__name:"LogsViewRunData",props:{title:{},paneType:{},logEntry:{},collapsingTableColumnName:{},searchShortcut:{}},emits:["collapsingTableColumnChanged"],setup(e,{emit:t}){const a=t,s=Y(),l=ue(),c=W(Ce,d()),u=d("input"===e.paneType?"schema":"table"),g=n((()=>"input"===e.paneType&&(e.logEntry.runData?.source.length??0)>1)),h=n((()=>{if(yt(e.logEntry)||"output"===e.paneType)return{node:e.logEntry.node,runIndex:e.logEntry.runIndex};const t=e.logEntry.runData?.source[0],a=t&&e.logEntry.workflow.getNode(t.previousNode);return t&&a?{node:{...a,disabled:!1},runIndex:t.previousNodeRun??0,overrideOutputs:[t.previousNodeOutput??0]}:void 0})),v=n((()=>"output"===e.paneType&&("running"===e.logEntry.runData?.executionStatus||"waiting"===e.logEntry.runData?.executionStatus)));function m(){l.setActiveNodeName(e.logEntry.node.name,"logs_view")}function b(e){u.value=e}return(t,n)=>{const l=B("n8n-html");return h.value?(O(),f($e,y({key:0},h.value,{key:"run-data"+(r(c)?"-pop-out":""),class:t.$style.component,"workflow-object":e.logEntry.workflow,"workflow-execution":e.logEntry.execution,"no-data-in-branch-message":r(s).baseText("ndv.output.noOutputDataInBranch"),"executing-message":r(s).baseText("ndv.output.executing"),"pane-type":e.paneType,"disable-run-index-selection":!0,compact:!0,"show-actions-on-hover":!0,"disable-pin":!0,"disable-edit":!0,"disable-hover-highlight":!0,"disable-settings-hint":!0,"display-mode":u.value,"disable-ai-content":!r(yt)(e.logEntry),"is-executing":v.value,"table-header-bg-color":"light","collapsing-table-column-name":e.collapsingTableColumnName,"search-shortcut":e.searchShortcut,onDisplayModeChange:b,onCollapsingTableColumnChanged:n[0]||(n[0]=e=>a("collapsingTableColumnChanged",e))}),N({header:T((()=>[p(r(oe),{class:H(t.$style.title),bold:!0,color:"text-light",size:"small"},{default:T((()=>[R(o(e.title),1)])),_:1},8,["class"])])),"header-end":T((e=>[p(Re,y(e,{search:"schema"===u.value?"":e.search}),null,16,["search"])])),"no-output-data":T((()=>[p(Ne,{title:r(s).baseText("ndv.output.noOutputData.title")},null,8,["title"])])),"node-waiting":T((()=>[p(Ne,{title:r(s).baseText("ndv.output.waitNodeWaiting.title"),wide:""},{default:T((()=>[L(j("span",null,null,512),[[l,r(he)(e.logEntry.node,e.logEntry.workflow)]])])),_:1},8,["title"])])),_:2},[g.value?{name:"content",fn:T((()=>[])),key:"0"}:void 0,g.value?{name:"callout-message",fn:T((()=>[p(r(G),{keypath:"logs.details.body.multipleInputs",scope:"global"},{button:T((()=>[p(r(se),{size:"small",onClick:m},{default:T((()=>[R(o(r(s).baseText("logs.details.body.multipleInputs.openingTheNode")),1)])),_:1})])),_:1})])),key:"1"}:void 0]),1040,["class","workflow-object","workflow-execution","no-data-in-branch-message","executing-message","pane-type","display-mode","disable-ai-content","is-executing","collapsing-table-column-name","search-shortcut"])):i("",!0)}}}),[["__cssModules",{$style:{component:"_component_7mlt9_125",title:"_title_7mlt9_129"}}]]),oa=v({__name:"LogDetailsPanel",props:{isOpen:{type:Boolean},logEntry:{},window:{},latestInfo:{},panels:{},collapsingInputTableColumnName:{},collapsingOutputTableColumnName:{},isHeaderClickable:{type:Boolean}},emits:["clickHeader","toggleInputOpen","toggleOutputOpen","collapsingInputTableColumnChanged","collapsingOutputTableColumnChanged"],setup(e,{emit:t}){const a=t,l=Y(),c=de(),u=ue(),d=Ae(),g=n((()=>c.getNodeType(e.logEntry.node.type))),h=n((()=>ct(e.logEntry,!1))),v=n((()=>g.value?.group.includes("trigger"))),m=D("container"),b=xt("N8N_LOGS_INPUT_PANEL_WIDTH",{container:m,defaultSize:e=>e/2,minSize:200,maxSize:e=>e-200,allowCollapse:!0,allowFullSize:!0}),y=n((()=>e.panels===Je.BOTH)),_=n((()=>u.isNDVOpen||d.isMapperOpen?void 0:e.panels===Je.INPUT?"input":"output"));function x(){b.isCollapsed.value&&a("toggleInputOpen",!1),b.isFullSize.value&&a("toggleOutputOpen",!1),b.onResizeEnd()}return(t,n)=>(O(),s("div",{ref_key:"container",ref:m,class:H(t.$style.container),"data-test-id":"log-details"},[p(Ct,{"data-test-id":"log-details-header",class:H(t.$style.header),"is-clickable":e.isHeaderClickable,onClick:n[2]||(n[2]=e=>a("clickHeader"))},{title:T((()=>[j("div",{class:H(t.$style.title)},[p(Ze,{"node-type":g.value,size:16,class:H(t.$style.icon)},null,8,["node-type","class"]),p(ut,{name:e.latestInfo?.name??e.logEntry.node.name,"is-deleted":e.latestInfo?.deleted??!1},null,8,["name","is-deleted"]),e.isOpen&&void 0!==e.logEntry.runData?(O(),f(It,{key:0,class:H(t.$style.executionSummary),status:e.logEntry.runData.executionStatus??"unknown","consumed-tokens":h.value,"start-time":e.logEntry.runData.startTime,"time-took":e.logEntry.runData.executionTime},null,8,["class","status","consumed-tokens","start-time","time-took"])):i("",!0)],2)])),actions:T((()=>[!e.isOpen||v.value||r(ot)(e.logEntry)?i("",!0):(O(),s("div",{key:0,class:H(t.$style.actions)},[p(tt,{label:r(l).baseText("generic.shortcutHint"),shortcut:{keys:["i"]}},{default:T((()=>[p(r(X),{variant:"subtle",size:"xsmall",class:H(e.panels===r(Je).OUTPUT?"":t.$style.pressed),onClick:n[0]||(n[0]=E((e=>a("toggleInputOpen")),["stop"]))},{default:T((()=>[R(o(r(l).baseText("logs.details.header.actions.input")),1)])),_:1},8,["class"])])),_:1},8,["label"]),p(tt,{label:r(l).baseText("generic.shortcutHint"),shortcut:{keys:["o"]}},{default:T((()=>[p(r(X),{variant:"subtle",size:"xsmall",class:H(e.panels===r(Je).INPUT?"":t.$style.pressed),onClick:n[1]||(n[1]=E((e=>a("toggleOutputOpen")),["stop"]))},{default:T((()=>[R(o(r(l).baseText("logs.details.header.actions.output")),1)])),_:1},8,["class"])])),_:1},8,["label"])],2)),k(t.$slots,"actions")])),_:3},8,["class","is-clickable"]),e.isOpen?(O(),s("div",{key:0,class:H(t.$style.content),"data-test-id":"logs-details-body"},[r(ot)(e.logEntry)?(O(),s("div",{key:0,class:H(t.$style.placeholder)},[p(r(oe),{color:"text-base"},{default:T((()=>[R(o(r(l).baseText("ndv.output.runNodeHint")),1)])),_:1})],2)):(O(),s(w,{key:1},[v.value||e.panels===r(Je).OUTPUT?i("",!0):(O(),f(r(Z),{key:0,class:H({[t.$style.inputResizer]:!0,[t.$style.collapsed]:r(b).isCollapsed.value,[t.$style.full]:r(b).isFullSize.value}),width:r(b).size.value,style:z(y.value?{width:`${r(b).size.value??0}px`}:void 0),"supported-directions":["right"],"is-resizing-enabled":y.value,window:e.window,onResize:r(b).onResize,onResizeend:x},{default:T((()=>[p(na,{"data-test-id":"log-details-input","pane-type":"input",title:r(l).baseText("logs.details.header.actions.input"),"log-entry":e.logEntry,"collapsing-table-column-name":e.collapsingInputTableColumnName,"search-shortcut":"input"===_.value?"ctrl+f":void 0,onCollapsingTableColumnChanged:n[3]||(n[3]=e=>a("collapsingInputTableColumnChanged",e))},null,8,["title","log-entry","collapsing-table-column-name","search-shortcut"])])),_:1},8,["class","width","style","is-resizing-enabled","window","onResize"])),v.value||e.panels!==r(Je).INPUT?(O(),f(na,{key:1,"data-test-id":"log-details-output","pane-type":"output",class:H(t.$style.outputPanel),title:r(l).baseText("logs.details.header.actions.output"),"log-entry":e.logEntry,"collapsing-table-column-name":e.collapsingOutputTableColumnName,"search-shortcut":"output"===_.value?"ctrl+f":void 0,onCollapsingTableColumnChanged:n[4]||(n[4]=e=>a("collapsingOutputTableColumnChanged",e))},null,8,["class","title","log-entry","collapsing-table-column-name","search-shortcut"])):i("",!0)],64))],2)):i("",!0)],2))}}),sa=re(oa,[["__cssModules",{$style:{container:"_container_1du2i_125",header:"_header_1du2i_134",actions:"_actions_1du2i_138",pressed:"_pressed_1du2i_144",title:"_title_1du2i_148",icon:"_icon_1du2i_154",executionSummary:"_executionSummary_1du2i_158",content:"_content_1du2i_162",outputPanel:"_outputPanel_1du2i_170",inputResizer:"_inputResizer_1du2i_175",collapsed:"_collapsed_1du2i_179",full:"_full_1du2i_179",placeholder:"_placeholder_1du2i_183"}}]]),ia=v({__name:"LogsPanelActions",props:{isOpen:{type:Boolean},isSyncSelectionEnabled:{type:Boolean},showToggleButton:{type:Boolean},showPopOutButton:{type:Boolean}},emits:["popOut","toggleOpen","toggleSyncSelection"],setup(e,{emit:t}){const a=t,o=Y(),l=n((()=>o.baseText("runData.panel.actions.popOut"))),c=n((()=>o.baseText(e.isOpen?"runData.panel.actions.collapse":"runData.panel.actions.open"))),u=n((()=>[{id:"toggleSyncSelection",label:o.baseText("runData.panel.actions.sync"),checked:e.isSyncSelectionEnabled},...e.showPopOutButton?[{id:"popOut",label:l.value}]:[]]));function d(e){switch(e){case"popOut":case"toggleSyncSelection":return void a(e)}}return(t,n)=>(O(),s("div",{class:H(t.$style.container)},[!e.isOpen&&e.showPopOutButton?(O(),f(r(ae),{key:0,content:l.value},{default:T((()=>[p(r(te),{variant:"ghost",icon:"pop-out",size:"small","icon-size":"medium","aria-label":l.value,onClick:n[0]||(n[0]=E((e=>a("popOut")),["stop"]))},null,8,["aria-label"])])),_:1},8,["content"])):i("",!0),e.isOpen?(O(),f(r(Q),{key:1,"icon-size":"small","activator-icon":"ellipsis","activator-size":"small",items:u.value,teleported:!1,onSelect:d,onClick:n[1]||(n[1]=E((()=>{}),["stop"]))},null,8,["items"])):i("",!0),e.showToggleButton?(O(),f(tt,{key:`tooltip-${e.isOpen}`,label:r(o).baseText("generic.shortcutHint"),shortcut:{keys:["l"]}},{default:T((()=>[p(r(te),{variant:"ghost",size:"small","icon-size":"medium",icon:e.isOpen?"chevron-down":"chevron-up","aria-label":c.value,onClick:n[2]||(n[2]=E((e=>a("toggleOpen")),["stop"]))},null,8,["icon","aria-label"])])),_:1},8,["label"])):i("",!0)],2))}}),la=re(ia,[["__cssModules",{$style:{container:"_container_1g4ug_125"}}]]),ra=400,ca=32,ua=v({__name:"LogsViewKeyboardEventListener",props:{keyMap:{},container:{}},setup(e){const t=W(Ce,d()),a=K({window:t?.value}),o=n((()=>t?.value?null===t.value.document.activeElement:!a.value||!e.container||!e.container.contains(a.value)&&e.container!==a.value));return at(b((()=>e.keyMap)),{disabled:o}),(e,t)=>(O(),s("div"))}}),da=v({__name:"LogsPanel",props:{isReadOnly:{type:Boolean,default:!1}},setup(e){const t=e,a=D("container"),o=D("logsContainer"),c=D("popOutContainer"),u=D("popOutContent"),h=Pe(),v=ue(),m=xe(),{height:b,chatPanelWidth:_,overviewPanelWidth:w,canPopOut:k,isOpen:C,isPoppedOut:I,isCollapsingDetailsPanel:E,isOverviewPanelFullWidth:S,popOutWindow:R,onResize:$,onResizeEnd:N,onToggleOpen:M,onPopOut:P,onChatPanelResize:B,onChatPanelResizeEnd:q,onOverviewPanelResize:L,onOverviewPanelResizeEnd:W}=function(e,t,a,o,s){const i=Pe(),l=pe(),r=xt(Ge,{container:document.body,position:"bottom",snap:!1,defaultSize:e=>.3*e,minSize:160,maxSize:e=>.75*e,allowCollapse:!0}),c=xt(Be,{container:o,defaultSize:e=>Math.min(800,.3*e),minSize:240,maxSize:e=>.8*e}),u=xt(Ve,{container:s,defaultSize:e=>Math.min(240,.2*e),minSize:80,maxSize:500,allowFullSize:!0}),d=n((()=>i.isOpen?!r.isCollapsed.value:r.isResizing.value&&r.size.value>0)),p=n((()=>u.isFullSize.value)),h=n((()=>`Logs - ${e.value}`)),v=n((()=>i.state===We.FLOATING)),{canPopOut:m,isPoppedOut:f,popOutWindow:b}=ya({title:h,initialHeight:ra,initialWidth:.8*window.document.body.offsetWidth,container:t,content:a,shouldPopOut:v,onRequestClose:()=>{d.value&&(l.track("User toggled log view",{new_state:"attached"}),i.setPreferPoppedOut(!1))}});function y(e){const t=i.isOpen;e!==t&&(i.toggleOpen(e),l.track("User toggled log view",{new_state:t?"collapsed":"attached"}))}return x([()=>i.state,r.size,f],(([e,t])=>{const a=e===We.FLOATING?0:e===We.ATTACHED?t:ca;e===We.FLOATING?b?.value?.document.documentElement.style.setProperty("--logs-panel--height","100vh"):document.documentElement.style.setProperty("--logs-panel--height",`${a}px`),i.setHeight(a)}),{immediate:!0}),g((()=>i.setHeight(0))),{height:r.size,chatPanelWidth:c.size,overviewPanelWidth:u.size,canPopOut:m,isOpen:d,isCollapsingDetailsPanel:p,isPoppedOut:f,isOverviewPanelFullWidth:u.isFullSize,popOutWindow:b,onToggleOpen:y,onPopOut:function(){l.track("User toggled log view",{new_state:"floating"}),i.toggleOpen(!0),i.setPreferPoppedOut(!0)},onResize:r.onResize,onResizeEnd:function(){i.isOpen||r.isCollapsed.value||y(!0),r.isCollapsed.value&&y(!1),r.onResizeEnd()},onChatPanelResize:c.onResize,onChatPanelResizeEnd:c.onResizeEnd,onOverviewPanelResize:u.onResize,onOverviewPanelResizeEnd:u.onResizeEnd}}(n((()=>m.workflow.name)),c,u,a,o),{currentSessionId:V,messages:F,previousChatMessages:K,sendMessage:G,refreshSession:Y,displayExecution:J}=pa(t.isReadOnly),{entries:Q,execution:X,hasChat:ee,latestNodeNameById:te,resetExecutionData:ae,loadSubExecution:ne}=pt({isEnabled:C}),{flatLogEntries:oe,toggleExpanded:se}=ft(Q,ne),{selected:ie,select:le,selectNext:re,selectPrev:ce}=function(e,t,a,o){const s=pe(),i=U({type:"initial"}),l=U(),r=n((()=>void 0!==e.value?.stoppedAt)),c=n((()=>bt(i.value,t.value,!r.value))),u=Pe(),d=we(),g=ve(),p=xe();function h(e){u.isLogSelectionSyncedWithCanvas&&Ke.emit("nodes:select",{ids:[e.node.id],panIntoView:!0})}return x(c,(e=>{e&&u.setSubNodeSelected(yt(e))}),{immediate:!0}),x([()=>d.lastSelectedNode,()=>u.isLogSelectionSyncedWithCanvas],(([e,t])=>{const a=e?p.nodesByName[e]?.id:void 0;l.value=t&&!g.hasRangeSelection&&c.value?.node.id!==a?a:void 0}),{immediate:!0}),x([t,l],(([e,t])=>{if(void 0===t)return;const a=dt((e=>e.node.id===t),e);if(!a)return;l.value=void 0,i.value={type:"selected",entry:a};let n=a.parent;for(;void 0!==n;)o(n,!0),n=n.parent}),{immediate:!0}),{selected:c,select:function(t){i.value=void 0===t?{type:"none"}:{type:"selected",entry:t},t&&(h(t),s.track("User selected node in log view",{node_type:t.node.type,node_id:t.node.id,execution_id:e.value?.id,workflow_id:e.value?.workflowData.id,subworkflow_depth:lt(t)}))},selectPrev:function(){const e=a.value;if(0===e.length)return;const t=c.value?ht(e,c.value.id,-1)??e[0]:e[e.length-1];i.value={type:"selected",entry:t},h(t)},selectNext:function(){const e=a.value;if(0===e.length)return;const t=c.value?ht(e,c.value.id,1)??e[e.length-1]:e[0];i.value={type:"selected",entry:t},h(t)}}}(X,Q,oe,se),de=d(),ge=d(),he=n((()=>C.value&&void 0!==ie.value)),me=n((()=>he.value&&!E.value)),fe=n((()=>({isOpen:C.value,isSyncSelectionEnabled:h.isLogSelectionSyncedWithCanvas,showToggleButton:!I.value,showPopOutButton:k.value&&!I.value,onPopOut:P,onToggleOpen:M,onToggleSyncSelection:h.toggleLogSelectionSync}))),be=n((()=>de.value?.nodeName===ie.value?.node.name?de.value?.columnName??null:null)),ye=n((()=>ge.value?.nodeName===ie.value?.node.name?ge.value?.columnName??null:null)),_e=n((()=>({j:re,k:ce,Escape:()=>le(void 0),ArrowDown:re,ArrowUp:ce,Space:()=>ie.value&&se(ie.value),Enter:()=>ie.value&&ze(ie.value),...I.value?{i:()=>h.toggleInputOpen(),o:()=>h.toggleOutputOpen()}:{}})));function ke(){S.value&&le(void 0),W()}function ze(e){v.setActiveNodeName(e.node.name,"logs_view"),l((()=>{const t=e.runData?.source[0],a=t?.previousNodeOutput??0;Se.emit("updateInputNodeName",t?.previousNode),Se.emit("setInputBranchIndex",a),v.setOutputRunIndex(e.runIndex)}))}function Te(e){de.value=e&&ie.value?{nodeName:ie.value.node.name,columnName:e}:void 0}function Ce(e){ge.value=e&&ie.value?{nodeName:ie.value.node.name,columnName:e}:void 0}return(n,l)=>(O(),s("div",{ref_key:"popOutContainer",ref:c,"data-test-id":"logs-panel"},[(O(),f(ua,{key:String(!!r(R)),"key-map":_e.value,container:a.value},null,8,["key-map","container"])),j("div",{ref_key:"popOutContent",ref:u,class:H([n.$style.popOutContent,r(I)?n.$style.poppedOut:""])},[p(r(Z),{height:r(I)?void 0:r(b),"supported-directions":["top"],"is-resizing-enabled":!r(I),class:H(n.$style.resizeWrapper),style:z({height:r(C)&&!r(I)?`${r(b)}px`:"auto"}),onResize:r($),onResizeend:r(N)},{default:T((()=>[j("div",{ref_key:"container",ref:a,class:H(n.$style.container),tabindex:"-1"},[r(ee)&&(!t.isReadOnly||r(F).length>0)?(O(),f(r(Z),{key:0,"supported-directions":["right"],"is-resizing-enabled":r(C),width:r(_),style:z({width:`${r(_)}px`}),class:H(n.$style.chat),window:r(R),onResize:r(B),onResizeend:r(q)},{default:T((()=>[(O(),f(aa,{key:`canvas-chat-${r(V)}${r(I)?"-pop-out":""}`,"data-test-id":"canvas-chat","is-open":r(C),"is-read-only":e.isReadOnly,messages:r(F),"session-id":r(V),"past-chat-messages":r(K),"show-close-button":!1,"is-new-logs-enabled":!0,"is-header-clickable":!r(I),onClose:r(M),onRefreshSession:r(Y),onDisplayExecution:r(J),onSendMessage:r(G),onClickHeader:r(M)},null,8,["is-open","is-read-only","messages","session-id","past-chat-messages","is-header-clickable","onClose","onRefreshSession","onDisplayExecution","onSendMessage","onClickHeader"]))])),_:1},8,["is-resizing-enabled","width","style","class","window","onResize","onResizeend"])):i("",!0),j("div",{ref_key:"logsContainer",ref:o,class:H(n.$style.logsContainer)},[p(r(Z),{class:H(n.$style.overviewResizer),width:r(w),style:z({width:me.value?`${r(w)}px`:""}),"supported-directions":["right"],"is-resizing-enabled":he.value,window:r(R),onResize:r(L),onResizeend:ke},{default:T((()=>[p(St,{class:H(n.$style.logsOverview),"is-open":r(C),"is-read-only":e.isReadOnly,"is-compact":me.value,selected:r(ie),execution:r(X),entries:r(Q),"latest-node-info":r(te),"flat-log-entries":r(oe),"is-header-clickable":!r(I),onClickHeader:r(M),onSelect:r(le),onClearExecutionData:r(ae),onToggleExpanded:r(se),onOpenNdv:ze},{actions:T((()=>[me.value?i("",!0):(O(),f(la,A(y({key:0},fe.value)),null,16))])),_:1},8,["class","is-open","is-read-only","is-compact","selected","execution","entries","latest-node-info","flat-log-entries","is-header-clickable","onClickHeader","onSelect","onClearExecutionData","onToggleExpanded"])])),_:1},8,["class","width","style","is-resizing-enabled","window","onResize"]),me.value&&r(ie)?(O(),f(sa,{key:0,class:H(n.$style.logDetails),"is-open":r(C),"log-entry":r(ie),window:r(R),"latest-info":r(te)[r(ie).node.id],panels:r(h).detailsState,"collapsing-input-table-column-name":be.value,"collapsing-output-table-column-name":ye.value,"is-header-clickable":!r(I),onClickHeader:r(M),onToggleInputOpen:r(h).toggleInputOpen,onToggleOutputOpen:r(h).toggleOutputOpen,onCollapsingInputTableColumnChanged:Te,onCollapsingOutputTableColumnChanged:Ce},{actions:T((()=>[me.value?(O(),f(la,A(y({key:0},fe.value)),null,16)):i("",!0)])),_:1},8,["class","is-open","log-entry","window","latest-info","panels","collapsing-input-table-column-name","collapsing-output-table-column-name","is-header-clickable","onClickHeader","onToggleInputOpen","onToggleOutputOpen"])):i("",!0)],2)],2)])),_:1},8,["height","is-resizing-enabled","class","style","onResize","onResizeend"])],2)],512))}}),e("t",re(da,[["__cssModules",{$style:{popOutContent:"_popOutContent_14az5_125",resizeWrapper:"_resizeWrapper_14az5_131",poppedOut:"_poppedOut_14az5_138",container:"_container_14az5_142",chat:"_chat_14az5_151",logsContainer:"_logsContainer_14az5_155",overviewResizer:"_overviewResizer_14az5_165",logsOverview:"_logsOverview_14az5_173",logsDetails:"_logsDetails_14az5_177"}}]]))}}}));
//# sourceMappingURL=LogsPanel-legacy-DV5kny-U.js.map