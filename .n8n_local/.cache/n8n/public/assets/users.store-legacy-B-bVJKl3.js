!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js"],(function(e,t){var n,o,a,i,r,s,l,u,c,d,p,f,m,h,y,v,g,w,b,k,x,I,S,E,T,N,A,_,P,C,O,M,D,L,B,F,$,R,j,V,W,z,U,G,H,Y,q,X,J,K,Z,Q,ee,te,ne,oe,ae,ie,re,se,le,ue,ce,de,pe,fe,me,he,ye,ve,ge,we,be,ke,xe,Ie,Se,Ee,Te,Ne,Ae,_e,Pe,Ce,Oe,Me,De,Le,Be,Fe,$e,Re,je,Ve,We,ze,Ue,Ge,He,Ye,qe,Xe,Je,Ke,Ze,Qe,et,tt,nt,ot,at,it,rt,st,lt,ut,ct,dt,pt,ft,mt,ht,yt,vt,gt,wt,bt,kt,xt,It,St,Et,Tt,Nt,At,_t,Pt,Ct,Ot,Mt,Dt,Lt,Bt,Ft,$t,Rt,jt,Vt,Wt,zt,Ut,Gt,Ht,Yt,qt,Xt,Jt,Kt,Zt,Qt,en,tn,nn,on,an,rn,sn,ln,un,cn,dn,pn,fn,mn,hn,yn,vn,gn,wn,bn,kn,xn,In,Sn,En,Tn,Nn,An,_n,Pn,Cn,On,Mn,Dn,Ln,Bn,Fn,$n,Rn,jn,Vn,Wn,zn,Un,Gn,Hn,Yn,qn,Xn,Jn,Kn,Zn,Qn,eo,to,no,oo,ao,io,ro,so,lo,uo,co,po,fo,mo,ho,yo,vo,go,wo,bo,ko,xo,Io,So,Eo,To,No,Ao,_o,Po,Co,Oo,Mo,Do,Lo,Bo,Fo,$o,Ro,jo,Vo,Wo,zo,Uo,Go,Ho,Yo,qo,Xo,Jo,Ko,Zo,Qo,ea,ta,na,oa,aa,ia,ra,sa,la,ua,ca,da,pa,fa,ma,ha,ya,va,ga,wa,ba,ka,xa,Ia,Sa,Ea,Ta,Na,Aa,_a,Pa,Ca,Oa,Ma,Da,La,Ba,Fa,$a,Ra,ja,Va,Wa,za,Ua,Ga,Ha,Ya,qa,Xa,Ja,Ka,Za,Qa,ei,ti,ni,oi,ai,ii,ri,si,li,ui,ci,di,pi,fi,mi,hi,yi,vi,gi,wi,bi,ki,xi,Ii,Si,Ei,Ti,Ni,Ai,_i,Pi,Ci,Oi,Mi,Di,Li,Bi,Fi,$i,Ri,ji,Vi,Wi,zi,Ui,Gi,Hi,Yi,qi,Xi,Ji,Ki,Zi,Qi,er,tr,nr,or,ar,ir,rr,sr,lr,ur,cr,dr,pr,fr,mr,hr,yr,vr,gr,wr,br,kr,xr,Ir,Sr,Er,Tr,Nr,Ar,_r,Pr,Cr,Or,Mr,Dr,Lr,Br,Fr,$r,Rr,jr,Vr,Wr,zr,Ur,Gr,Hr,Yr,qr,Xr,Jr,Kr,Zr,Qr,es,ts,ns,os,as,is,rs,ss,ls,us,cs,ds,ps,fs,ms,hs,ys,vs,gs,ws,bs,ks,xs,Is,Ss,Es,Ts,Ns,As,_s,Ps,Cs,Os,Ms,Ds,Ls,Bs,Fs,$s,Rs,js,Vs,Ws,zs,Us,Gs,Hs,Ys,qs,Xs,Js,Ks,Zs,Qs,el,tl,nl,ol,al,il,rl,sl,ll,ul,cl,dl,pl,fl,ml,hl,yl,vl,gl,wl,bl,kl,xl,Il,Sl,El,Tl,Nl,Al,_l,Pl,Cl,Ol,Ml,Dl,Ll,Bl,Fl,$l,Rl,jl,Vl,Wl,zl,Ul,Gl,Hl,Yl,ql,Xl,Jl,Kl,Zl,Ql,eu,tu,nu,ou,au,iu,ru,su,lu,uu,cu,du,pu,fu,mu,hu,yu,vu,gu,wu,bu,ku,xu,Iu,Su,Eu,Tu,Nu,Au,_u,Pu,Cu,Ou,Mu,Du,Lu,Bu,Fu,$u,Ru,ju,Vu,Wu,zu,Uu,Gu,Hu,Yu,qu,Xu,Ju,Ku,Zu,Qu,ec,tc,nc,oc,ac,ic,rc,sc,lc,uc,cc,dc,pc,fc,mc,hc,yc,vc,gc,wc,bc,kc,xc,Ic,Sc,Ec,Tc,Nc,Ac,_c,Pc,Cc,Oc,Mc,Dc,Lc,Bc,Fc,$c,Rc,jc,Vc,Wc,zc,Uc,Gc,Hc,Yc,qc,Xc,Jc,Kc,Zc,Qc,ed,td,nd,od,ad,id,rd,sd,ld,ud,cd,dd,pd,fd,md,hd,yd,vd,gd,wd,bd,kd,xd,Id,Sd,Ed,Td,Nd,Ad,_d,Pd,Cd,Od,Md,Dd,Ld,Bd,Fd,$d,Rd,jd,Vd,Wd,zd,Ud,Gd,Hd,Yd,qd,Xd,Jd,Kd,Zd,Qd,ep,tp,np,op,ap,ip,rp,sp,lp,up,cp,dp,pp,fp,mp,hp,yp,vp,gp,wp,bp,kp,xp,Ip,Sp,Ep,Tp,Np,Ap,_p,Pp,Cp,Op,Mp,Dp,Lp,Bp,Fp,$p,Rp,jp,Vp,Wp,zp,Up,Gp,Hp,Yp,qp,Xp,Jp,Kp,Zp,Qp,ef,tf,nf,of,af,rf,sf,lf,uf,cf,df,pf,ff,mf,hf,yf,vf,gf,wf,bf,kf,xf,If,Sf,Ef,Tf,Nf,Af,_f,Pf,Cf,Of,Mf,Df,Lf,Bf,Ff,$f,Rf,jf,Vf,Wf,zf,Uf,Gf,Hf,Yf,qf,Xf,Jf,Kf,Zf,Qf,em,tm,nm,om,am,im,rm,sm,lm,um,cm,dm,pm,fm,mm,hm,ym,vm,gm,wm,bm,km,xm,Im,Sm,Em,Tm,Nm,Am,_m;function Pm(e){let t;const n=v(!1),o=N({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(){var e,t;null==(t=null==(e=s.$el)?void 0:e.parentNode)||t.removeChild(s.$el)}function i(){if(!n.value)return;const e=o.parent;n.value=!1,e.vLoadingAddClassList=void 0,function(){const e=o.parent,t=s.ns;if(!e.vLoadingAddClassList){let n=e.getAttribute("loading-number");n=Number.parseInt(n)-1,n?e.setAttribute("loading-number",n.toString()):(st(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),st(e,t.bm("parent","hidden"))}a(),r.unmount()}()}const r=q(T({name:"ElLoading",setup(e,{expose:t}){const{ns:n,zIndex:a}=Ze("loading");return t({ns:n,zIndex:a}),()=>{const e=o.spinner||o.svg,t=b("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",...e?{innerHTML:e}:{}},[b("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),a=o.text?b("p",{class:n.b("text")},[o.text]):void 0;return b(ee,{name:n.b("fade"),onAfterLeave:i},{default:W((()=>[me(k("div",{style:{backgroundColor:o.background||""},class:[n.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[b("div",{class:n.b("spinner")},[t,a])]),[[ae,o.visible]])]))})}}})),s=r.mount(document.createElement("div"));return{...y(o),setText:function(e){o.text=e},removeElLoadingChild:a,close:function(){var a;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(i,400),o.visible=!1,null==(a=e.closed)||a.call(e))},handleAfterLeave:i,vm:s,get $el(){return s.$el}}}function Cm(e,t,n,o,a,i){const r=oe("el-icon"),u=oe("close"),d=oe("el-input"),p=oe("el-button"),f=oe("el-focus-trap"),m=oe("el-overlay");return H(),_(ee,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=t=>e.$emit("vanish")),persisted:""},{default:W((()=>[me(k(m,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:W((()=>[pe("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:ce(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...t)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...t)),onMousedown:t[9]||(t[9]=(...t)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...t)),onMouseup:t[10]||(t[10]=(...t)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...t))},[k(f,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:W((()=>[pe("div",{ref:"rootRef",class:ce([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:V(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=Y((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?(H(),l("div",{key:0,ref:"headerRef",class:ce(e.ns.e("header"))},[pe("div",{class:ce(e.ns.e("title"))},[e.iconComponent&&e.center?(H(),_(r,{key:0,class:ce([e.ns.e("status"),e.typeClass])},{default:W((()=>[(H(),_(U(e.iconComponent)))])),_:1},8,["class"])):c("v-if",!0),pe("span",null,s(e.title),1)],2),e.showClose?(H(),l("button",{key:0,type:"button",class:ce(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Z(Y((t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[k(r,{class:ce(e.ns.e("close"))},{default:W((()=>[k(u)])),_:1},8,["class"])],42,Ii)):c("v-if",!0)],2)):c("v-if",!0),pe("div",{id:e.contentId,class:ce(e.ns.e("content"))},[pe("div",{class:ce(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(H(),_(r,{key:0,class:ce([e.ns.e("status"),e.typeClass])},{default:W((()=>[(H(),_(U(e.iconComponent)))])),_:1},8,["class"])):c("v-if",!0),e.hasMessage?(H(),l("div",{key:1,class:ce(e.ns.e("message"))},[R(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(H(),_(U(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(H(),_(U(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:W((()=>[J(s(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):c("v-if",!0)],2),me(pe("div",{class:ce(e.ns.e("input"))},[k(d,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:ce({invalid:e.validateError}),onKeydown:Z(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),pe("div",{class:ce(e.ns.e("errormsg")),style:V({visibility:e.editorErrorMessage?"visible":"hidden"})},s(e.editorErrorMessage),7)],2),[[ae,e.showInput]])],10,Si),pe("div",{class:ce(e.ns.e("btns"))},[e.showCancelButton?(H(),_(p,{key:0,loading:e.cancelButtonLoading,class:ce([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=t=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Z(Y((t=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:W((()=>[J(s(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):c("v-if",!0),me(k(p,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:ce([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=t=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Z(Y((t=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:W((()=>[J(s(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[ae,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,xi)])),_:3},8,["z-index","overlay-class","mask"]),[[ae,e.visible]])])),_:3})}function Om(e,t=null){if(!He)return Promise.reject();let n;return Q(e)||O(e)?e={message:e}:n=e.callback,new Promise(((o,a)=>{const i=Pi(e,null!=t?t:Om._context);Ti.set(i,{options:e,callback:n,resolve:o,reject:a})}))}function Mm(){for(const e of Object.values(Wi))e.forEach((({vm:e})=>{e.component.exposed.visible.value=!1}))}function Dm(e){return(0,Yi.default)(e,{onTagAttr:(e,t,n)=>{if("img"===e&&"src"===t){const e=null!==n.split("#")[0].match(/\.(jpeg|jpg|gif|png|webp)$/)&&n.startsWith("/static/");if(!n.startsWith("https://")&&!e)return""}if(Ao.includes(t)||t.startsWith("data-"))return"href"!==t||n.match(/^https?:\/\//gm)||n.startsWith("/")?`${t}="${(0,Yi.escapeAttrValue)(n)}"`:""},onTag:e=>{if(!gt.includes(e))return""}})}function Lm(e){return e.join(",")}async function Bm(e){return await Ga(e,"/health")}async function Fm(e,t,n){const{apps:o,sort:a,combineWith:i,categories:r,nodes:s,...l}=t;return await Ga(e,"/templates/search",{...l,category:Lm(r),...o&&{apps:Lm(o)},...s&&{nodes:Lm(s)},...a&&{sort:a},...i&&{combineWith:i}},n)}async function $m(e,t,n){return await Ga(e,`/templates/workflows/${t}`,void 0,n)}async function Rm(e){return await async function(e,t=5,n=500){for(let o=0;o<t;o++){const t=await Ra.get(e,{withCredentials:!0});if("object"==typeof t.data&&null!==t.data)return t.data;await Rn(n*o)}throw new Error("Could not fetch node types")}(e+"types/nodes.json")}async function jm(e,t){await Va(e,"PATCH","/user-settings/nps-survey",t)}async function Vm(e,t){return await Va(e,"PATCH","/me/settings",t)}async function Wm(e,t){return await Va(e,"GET","/users",t)}function zm(e){return e?"version"in e?function(e){let t=[];const{version:n,...o}=e;if(0===Object.keys(o).length)return[];const a=e[pr],i=e[dr],r="automationGoal"in e?e[mr]:void 0;let s=null;if("codingSkill"in e&&e.codingSkill&&(s=parseInt(e[fr],10),s=isNaN(s)?0:s),t="ecommerce"===i?t.concat(Pn):"msp"===i?t.concat(Ft):("personal"===i||"other"===r||"not-sure-yet"===r)&&null!==s&&s>=4?t.concat(Tt):("personal"===i||"other"===r||"not-sure-yet"===r)&&null!==s&&s<3?t.concat(ko):"customer-integrations"===r?t.concat(Tt):"customer-support"===r||"finance-accounting"===r?t.concat(To):"sales-marketing"===r?t.concat(wa):"hr"===r?t.concat($t):"operations"===r?t.concat(ko):"product"===r?t.concat(Xt):"security"===r?t.concat(Ia):t.concat(Tt),t=null!==s&&s>=4?t.concat(Xo):t.concat(ha),t=null!==s&&s<3?t.concat(Tn):t.concat(Hn),"500-999"===a||"1000+"===a)switch(r){case hr:t=t.concat(to);break;case yr:t=t.concat(kt);break;case wr:t=t.concat(Zo);break;case"hr":t=t.concat(Uo);break;case gr:t=t.concat(_n);break;case vr:t=t.concat(Bo);break;case br:t=t.concat(Kn);break;default:t=t.concat(uo)}else switch(r){case hr:t=t.concat(to);break;case yr:t=t.concat(kt);break;case vr:t=t.concat(vt);break;case"hr":t=t.concat(_a);break;case gr:t=t.concat(_n);break;case wr:t=t.concat(da);break;case br:t=t.concat(Kn);break;default:t=t.concat(uo)}return t=t.concat(na),t}(e):function(e){const t=e[pr],n=e[cr];function o(e){return Array.isArray(n)?n.includes(e):n===e}const a=!n||0===n.length;if(null===t&&a&&null===e.codingSkill)return[];let i=null;e.codingSkill&&(i=parseInt(e[fr],10),i=isNaN(i)?0:i);let r=[];return r=o("IT-Engineering")?r.concat(Tt):r.concat(ko),r=null!==i&&i>=4?r.concat(Xo):r.concat(ha),r=null!==i&&i<3?r.concat(Tn):r.concat(Hn),r="500-999"===t||"1000+"===t?o("sales-businessDevelopment")?r.concat(Zo):o("security")?r.concat([Kn,to]):o("product")?r.concat([Ft,Qn]):o("IT-Engineering")?r.concat([Gn,to]):r.concat([Wt,Qt]):o("sales-businessDevelopment")?r.concat(an):o("security")?r.concat([Vn,to]):o("product")?r.concat([Ft,Bn]):o("IT-Engineering")?r.concat([la,to]):o("finance")?r.concat([hn,vt,Bo]):r.concat([ea,uo]),r=r.concat(na),r}(e):[]}async function Um(e,t){const n=await Va(e,"GET","/workflows/new",t);return{name:n.name,settings:n.defaultSettings}}async function Gm(e,t,n,o){return await Ja(e,"GET","/workflows",{includeScopes:!0,...t?{filter:t}:{},...n||{},...o?{select:JSON.stringify(o)}:{}})}async function Hm(e,t,n,o,a){return await Ja(e,"GET","/workflows",{includeScopes:!0,includeFolders:o,onlySharedWithMe:a,...t?{filter:t}:{},...n||{}})}function Ym(e){return"object"==typeof e&&null!==e&&!(e instanceof Date)}function qm(e){return Ym(e)&&!Array.isArray(e)}function Xm(e){return!!qm(e)&&Object.keys(e).includes("json")}function Jm(e){return void 0===e?0:new Blob(["string"==typeof e?e:JSON.stringify(e)]).size}function Km(e,t,n){return e.length<=t?e:`${e.slice(0,t-n)}...${e.slice(e.length-n,e.length)}`}function Zm(e){return null!=e}async function Qm(e){return await async function(e,t=5,n=500){for(let o=0;o<t;o++){const t=await Ra.get(e,{withCredentials:!0});if("object"==typeof t.data&&null!==t.data&&Array.isArray(t.data))return t.data;await Rn(n*o)}throw new Error("Could not fetch credential types")}(e+"types/credentials.json")}async function eh(e,t={}){const{filter:n,includeScopes:o,onlySharedWithMe:a,includeGlobal:i,externalSecretsStore:r}=t;return await Va(e,"GET","/credentials",{...o?{includeScopes:o}:{},includeData:!0,...n?{filter:n}:{},...a?{onlySharedWithMe:a}:{},..."boolean"==typeof i?{includeGlobal:i}:{},...r?{externalSecretsStore:r}:{}})}function th(e){return e.split(" ").filter((e=>!is.includes(e))).join(" ")}function nh(e){return"string"==typeof e}function oh(e){return"workflow"===e.resourceType}function ah(e){return"folder"===e.resourceType}function ih(e){return"credential"===e.resourceType}function rh(e){const t=Te(e,null,void 0,{writeDefaults:!1});return"undefined"===t.value&&(t.value=null),t}function sh(e){return"string"==typeof e&&Ms.test(e)}function lh(){if(!Bs&&!(Bs="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bs(Fs)}function uh(e,t,n){if(Rs.randomUUID&&!t&&!e)return Rs.randomUUID();var o=(e=e||{}).random||(e.rng||lh)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=o[a];return t}return function(e,t=0){return(Ds[e[t+0]]+Ds[e[t+1]]+Ds[e[t+2]]+Ds[e[t+3]]+"-"+Ds[e[t+4]]+Ds[e[t+5]]+"-"+Ds[e[t+6]]+Ds[e[t+7]]+"-"+Ds[e[t+8]]+Ds[e[t+9]]+"-"+Ds[e[t+10]]+Ds[e[t+11]]+Ds[e[t+12]]+Ds[e[t+13]]+Ds[e[t+14]]+Ds[e[t+15]]).toLowerCase()}(o)}function ch(e){return"custom"===e.type&&"customType"in e&&"questions"===e.customType}function dh(e){return"custom"===e.type&&"customType"in e&&"plan"===e.customType}function ph(e){return"type"in e&&"message"===e.type&&"text"in e}function fh(e){return ph(e)&&"string"==typeof e.revertVersionId}function mh(e){return"type"in e&&"workflow-updated"===e.type&&"codeSnippet"in e}function hh(e){return"type"in e&&"tool"===e.type&&"toolName"in e&&"status"in e}function yh(e){return"type"in e&&"questions"===e.type&&"questions"in e}function vh(e){return"type"in e&&"plan"===e.type&&"plan"in e}function gh(e){return"type"in e&&"user_answers"===e.type&&"answers"in e}function wh(){return Math.random().toString(36).substring(2,11)}function bh(){return`${Date.now()}-${wh()}`}function kh(e,t,n){return{id:e,role:"assistant",type:"custom",customType:"questions",data:{questions:t,introMessage:n},read:!1}}function xh(e,t){return{id:e,role:"assistant",type:"custom",customType:"plan",data:{plan:t},read:!1}}function Ih(e,t){return{id:e,role:"user",type:"custom",customType:"user_answers",data:{answers:t}}}function Sh(){const e=Ee();function t(e){return e.map((e=>{if("text"===e.type&&"showRating"in e){const{showRating:t,ratingStyle:n,...o}=e;return o}return e}))}function n(e){return e.filter((e=>"tool"===e.type))}function o(e){return n(e).filter((e=>"running"===e.status))}function a(e){if(o(e).length>0)return{hasAnyRunningTools:!0,isStillThinking:!1};const t=n(e).some((e=>"completed"===e.status));let a=-1;for(let n=e.length-1;n>=0;n--){const t=e[n];if("tool"===t.type&&"completed"===t.status){a=n;break}}let i=!1;if(-1!==a)for(let n=a+1;n<e.length;n++){const t=e[n];if("text"===t.type||"custom"===t.type){i=!0;break}}return{hasAnyRunningTools:!1,isStillThinking:t&&!i}}return{processAssistantMessages:function(t,n,i,r){const s=[...t];let l=!1;const u=wh();n.forEach(((e,t)=>{const n=function(e,t,n,o){let a=!1;if(ph(t))e.push({id:n,role:"assistant",type:"text",content:t.text,read:!1}),a=!0;else if(yh(t)){const o=e.findIndex((e=>"custom"===e.type&&"customType"in e&&"questions"===e.customType)),i=-1!==o&&e.slice(o+1).some((e=>"user"===e.role));(-1===o||i)&&e.push(kh(n,t.questions,t.introMessage)),a=!0}else if(vh(t)){const o=e.findLastIndex((e=>"custom"===e.type&&"customType"in e&&"plan"===e.customType)),i=-1!==o&&e.slice(o+1).some((e=>"user"===e.role));(-1===o||i)&&e.push(xh(n,t.plan)),a=!0}else gh(t)?(e.push(Ih(n,t.answers)),a=!0):mh(t)?e.push({...t,id:n,read:!1}):hh(t)?function(e,t,n){const o=t.toolCallId?e.findIndex((e=>"tool"===e.type&&e.toolCallId===t.toolCallId)):-1;if(-1!==o){const a=e[o];e[o]={...a,id:`${n}-${t.toolCallId}`,status:t.status,updates:[...a.updates||[],...t.updates||[]]}}else{const o={id:`${n}-${t.toolCallId}`,role:"assistant",type:"tool",toolName:t.toolName,toolCallId:t.toolCallId,displayTitle:t.displayTitle,customDisplayTitle:t.customDisplayTitle,status:t.status,updates:t.updates||[],read:!1};e.push(o)}}(e,t,n):"type"in t&&"error"===t.type&&"content"in t&&(e.push({id:n,role:"assistant",type:"error",content:t.content,read:!1,retry:o}),a=!0);return a}(s,e,`${i}--${u}--${t}`,r);l=l||n}));const c=function(t){const{hasAnyRunningTools:n,isStillThinking:i}=a(t);if(n){const n=o(t),a=n[n.length-1];if(a){const e=a.customDisplayTitle||a.displayTitle;if(e)return e}return e.baseText("aiAssistant.thinkingSteps.thinking")}if(!n&&i)return e.baseText("aiAssistant.thinkingSteps.thinking")}(s);return{messages:(d=s,d.map(((e,t)=>{if("error"===e.type&&e.retry&&t!==d.length-1){const{retry:t,...n}=e;return n}return e}))),thinkingMessage:c,shouldClearThinking:l&&s.length>t.length};var d},createUserMessage:function(e,t,n,o){return{id:t,role:"user",type:"text",content:e,revertVersion:n,...o&&o.length>0?{focusedNodeNames:o}:{},read:!0}},createUserAnswersMessage:function(e,t){return{id:t,role:"user",type:"custom",customType:"user_answers",data:{answers:e}}},createAssistantMessage:function(e,t,n){return n?.aborted?{id:t,role:"assistant",type:"text",content:e,read:!0,aborted:!0}:{id:t,role:"assistant",type:"text",content:e,read:!0}},createErrorMessage:function(e,t,n){return{id:t,role:"assistant",type:"error",content:e,retry:n,read:!1}},clearMessages:function(){return[]},addMessages:function(e,t){return[...e,...t]},mapAssistantMessageToUI:function(t,n){return ph(t)?{id:n,role:t.role??"assistant",type:"text",content:t.text,revertVersion:t.revertVersion,read:!1}:yh(t)?kh(n,t.questions,t.introMessage):vh(t)?xh(n,t.plan):gh(t)?Ih(n,t.answers):mh(t)?{...t,id:n,read:!1}:hh(t)?{id:n,role:"assistant",type:"tool",toolName:t.toolName,toolCallId:t.toolCallId,displayTitle:t.displayTitle,customDisplayTitle:t.customDisplayTitle,status:t.status,updates:t.updates||[],read:!1}:"type"in t&&"event"===t.type?{...t,id:n,read:!1}:{id:n,role:"assistant",type:"text",content:e.baseText("aiAssistant.thinkingSteps.thinking"),read:!1}},applyRatingLogic:function(e){const{hasAnyRunningTools:n,isStillThinking:o}=a(e);if(n||o)return t(e);let i=-1;for(let t=e.length-1;t>=0;t--)if("workflow-updated"===e[t].type){i=t;break}if(-1===i)return e;let r=-1;for(let t=e.length-1;t>=0;t--)if("text"===e[t].type&&"assistant"===e[t].role&&t>i){r=t;break}return e.map(((e,t)=>{if("text"===e.type&&"assistant"===e.role&&t===r)return{...e,showRating:!0,ratingStyle:"minimal"};if("text"===e.type&&"showRating"in e){const{showRating:t,ratingStyle:n,...o}=e;return o}return e}))},clearRatingLogic:t,getRunningTools:o}}function Eh(e){let t=e.slice(14,-3);return t.startsWith("_VALUE__")?t=t.slice(8):t.startsWith("__:")?t=t.slice(3):t.startsWith("__")&&(t=t.slice(2)),t.trim()}function Th(e,t=[]){return"string"==typeof e?function(e){if("string"!=typeof e)return[];const t=[],n=new RegExp(Ys.source,"g");let o;for(;null!==(o=n.exec(e));){const e=Eh(o[0]);e.length>0&&t.push(e)}return t}(e).map((e=>({path:t,label:e}))):Array.isArray(e)?e.flatMap(((e,n)=>Th(e,[...t,`[${n}]`]))):null!==e&&"object"==typeof e?Object.entries(e).flatMap((([e,n])=>Th(n,[...t,e]))):[]}function Nh(e){return 0===e.length?"parameters":e.map(((e,t)=>e.startsWith("[")||0===t?e:`.${e}`)).join("")}function Ah(){const e=e=>{if(e instanceof Error)throw e;return e},t=e=>{if(e instanceof Error)throw e;return{value:"",action:e}};return{alert:async function(t,n,o){const a={...o??("object"==typeof n?n:{}),cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm",dangerouslyUseHTMLString:!0};return"string"==typeof n?await Mi.alert(qi(t),n,a).catch(e):await Mi.alert(qi(t),a).catch(e)},confirm:async function(t,n,o){const a={cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm",distinguishCancelAndClose:!0,showClose:o?.showClose??!1,closeOnClickModal:!1,dangerouslyUseHTMLString:!0,...o??("object"==typeof n?n:{})};return"string"==typeof n?await Mi.confirm(qi(t),qi(n),a).catch(e):await Mi.confirm(qi(t),a).catch(e)},prompt:async function(e,n,o){const a={...o??("object"==typeof n?n:{}),cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm",dangerouslyUseHTMLString:!0};return"string"==typeof n?await Mi.prompt(qi(e),qi(n),a).catch(t):await Mi.prompt(qi(e),a).catch(t)},message:Mi}}function _h(){const e=Ee(),t=v(null);return{loadingService:t,isLoading:r((()=>null!==t.value)),startLoading:function(n){null===t.value&&(t.value=bi.service({lock:!0,text:n||e.baseText("genericHelpers.loading"),background:"var(--dialog--overlay--color--background)"}))},setLoadingText:function(e){t.value&&(t.value.text=e)},stopLoading:function(){t.value&&(t.value.close(),t.value=null)}}}async function Ph(e,t){if(!window.n8nExternalHooks)return;const n=fl(),[o,a]=e.split("."),i=window.n8nExternalHooks[o];if(i?.[a]){const e=i[a];for(const o of e)await o(n,t)}}function Ch(){return{run:Ph}}function Oh(){const e=rx(),t=vm(),n=xm(),o=Ch(),a=Ee(),{APP_Z_INDEXES:i}=yl();function r(n,o=!0){const a={dangerouslyUseHTMLString:!0,position:"bottom-right",zIndex:i.TOASTS,appendTo:"#app-grid",customClass:"content-toast"},{message:r,title:s}=n,u={...a,...n};"string"==typeof r&&(u.message=Dm(r)),"string"==typeof s&&(u.title=Dm(s));const c=Hi(u);if(0===u.duration&&vl.push(c),"error"===u.type&&o){let n;if("string"==typeof u.message)n=u.message;else if(u.message&&"object"==typeof u.message&&"props"in u.message&&u.message.props){const e=u.message.props,t="object"==typeof e&&null!==e&&"message"in e;n="object"==typeof e&&null!==e&&"errorMessage"in e?String(e.errorMessage):t?String(e.message):"Unknown error"}else n="Unknown error";e.track("Instance FE emitted error",{error_title:u.title,error_message:n,caused_by_credential:l(n),workflow_id:t.workflowId})}return c}function s({description:e,node:t}){if(!e)return"";const n=e.length>500?`${e.slice(0,500)}...`:e;return`\n\t\t\t\t<br>\n\t\t\t\t<br>\n\t\t\t\t<details>\n\t\t\t\t\t<summary\n\t\t\t\t\t\tstyle="color: #ff6d5a; font-weight: bold; cursor: pointer;"\n\t\t\t\t\t>\n\t\t\t\t\t\t${a.baseText("showMessage.showDetails")}\n\t\t\t\t\t</summary>\n\t\t\t\t\t<p>${t.name}: ${n}</p>\n\t\t\t\t</details>\n\t\t\t`}function l(e){return!(!e||"string"!=typeof e)&&e.includes("Credentials for")&&e.includes("are not set")}return{showMessage:r,showToast:function(e){let t;if(e.closeOnClick){const n=e.onClick;e.onClick=()=>{t&&t.close(),n&&n()}}return t=r({title:e.title,message:e.message,onClick:e.onClick,onClose:e.onClose,duration:e.duration,customClass:e.customClass,type:e.type}),t},showError:function(n,a,i){const u=n;r({title:a,message:`\n\t\t\t\t\t${i?`${i}<br/>`:""}\n\t\t\t\t\t<i>${u.message}</i>\n\t\t\t\t\t${s(u)}`,type:"error",duration:0},!1),o.run("showMessage.showError",{title:a,message:i,errorMessage:u.message}),e.track("Instance FE emitted error",{error_title:a,error_description:i,error_message:u.message,caused_by_credential:l(u.message),workflow_id:t.workflowId})},clearAllStickyNotifications:function(){vl.forEach((e=>{e&&e.close()})),vl.length=0},showNotificationForViews:function(e){const t=[];e.forEach((e=>{t.push(...n.pendingNotificationsForViews[e]??[])})),t.length&&(t.forEach((async e=>{setTimeout((()=>{r(e)}),5)})),n.setNotificationsForView(Qo.WORKFLOW,[]))}}}function Mh(e,t){let n=!0;for(const o of e){const e=t?.[o]??{},a=Tl[o];n=n&&a(e)}return n}function Dh(e){return!!u()&&(I(e),!0)}function Lh(e){return"function"==typeof e?e():h(e)}function Bh(e,t=!1,n="Timeout"){return new Promise(((o,a)=>{t?setTimeout((()=>a(n)),e):setTimeout(o,e)}))}function Fh(e,t,n={}){const{eventFilter:o=Ll,...a}=n;return F(e,(i=o,r=t,function(...e){return new Promise(((t,n)=>{Promise.resolve(i((()=>r.apply(this,e)),{fn:r,thisArg:this,args:e})).then(t).catch(n)}))}),a);var i,r}function $h(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:i,pause:r,resume:s,isActive:l}=function(e=Ll){const t=v(!0);return{isActive:f(t),pause:function(){t.value=!1},resume:function(){t.value=!0},eventFilter:(...n)=>{t.value&&e(...n)}}}(o);return{stop:Fh(e,t,{...a,eventFilter:i}),pause:r,resume:s,isActive:l}}function Rh(e,t={}){if(!K(e))return y(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=P((()=>({get:()=>e.value[o],set(n){var a;if(null==(a=Lh(t.replaceRef))||a)if(Array.isArray(e.value)){const t=[...e.value];t[o]=n,e.value=t}else{const t={...e.value,[o]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[o]=n}})));return n}function jh(e,t=!1){function n(n,{flush:o="sync",deep:a=!1,timeout:i,throwOnTimeout:r}={}){let s=null;const l=[new Promise((i=>{s=F(e,(e=>{n(e)!==t&&(s?.(),i(e))}),{flush:o,deep:a,immediate:!0})}))];return null!=i&&l.push(Bh(i,r).then((()=>Lh(e))).finally((()=>null==s?void 0:s()))),Promise.race(l)}function o(o,a){if(!K(o))return n((e=>e===o),a);const{flush:i="sync",deep:r=!1,timeout:s,throwOnTimeout:l}=null!=a?a:{};let u=null;const c=[new Promise((n=>{u=F([e,o],(([e,o])=>{t!==(e===o)&&(u?.(),n(e))}),{flush:i,deep:r,immediate:!0})}))];return null!=s&&c.push(Bh(s,l).then((()=>Lh(e))).finally((()=>(u?.(),Lh(e))))),Promise.race(c)}function a(e){return i(1,e)}function i(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}return Array.isArray(Lh(e))?{toMatch:n,toContains:function(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(Lh(e))}),t)},changed:a,changedTimes:i,get not(){return jh(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:function(e){return n((e=>Boolean(e)),e)},toBeNull:function(e){return o(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return o(void 0,e)},changed:a,changedTimes:i,get not(){return jh(e,!t)}}}function Vh(e){return jh(e)}function Wh(e){var t;const n=Lh(e);return null!=(t=null==n?void 0:n.$el)?t:n}function zh(...e){let t,n,o,a;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,a]=e,t=Bl):[t,n,o,a]=e,!t)return Dl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],r=()=>{i.forEach((e=>e())),i.length=0},s=F((()=>[Wh(t),Lh(a)]),(([e,t])=>{if(r(),!e)return;const a=Ml(t)?{...t}:t;i.push(...n.flatMap((t=>o.map((n=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,n,a))))))}),{immediate:!0,flush:"post"}),l=()=>{s(),r()};return Dh(l),l}function Uh(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Bl,eventName:i="keydown",passive:r=!1,dedupe:s=!1}=o,l="function"==typeof(u=t)?u:"string"==typeof u?e=>e.key===u:Array.isArray(u)?e=>u.includes(e.key):()=>!0;var u;return zh(a,i,(e=>{e.repeat&&Lh(s)||l(e)&&n(e)}),r)}function Gh(e,t,n,o={}){var a,i,s;const{clone:l=!1,passive:u=!1,eventName:c,deep:d=!1,defaultValue:f,shouldEmit:h}=o,y=p(),g=n||(null==y?void 0:y.emit)||(null==(a=null==y?void 0:y.$emit)?void 0:a.bind(y))||(null==(s=null==(i=null==y?void 0:y.proxy)?void 0:i.$emit)?void 0:s.bind(null==y?void 0:y.proxy));let w=c;t||(t="modelValue"),w=w||`update:${t.toString()}`;const b=e=>{return l?"function"==typeof l?l(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},k=()=>Cl(e[t])?b(e[t]):f,x=e=>{h?h(e)&&g(w,e):g(w,e)};if(u){const n=v(k());let o=!1;return F((()=>e[t]),(e=>{o||(o=!0,n.value=b(e),m((()=>o=!1)))})),F(n,(n=>{o||n===e[t]&&!d||x(n)}),{deep:d}),n}return r({get:()=>k(),set(e){x(e)}})}function Hh(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new Yh(o)}function Yh(e){this._=e}function qh(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Xh(e,t){for(var n,o=0,a=e.length;o<a;++o)if((n=e[o]).name===t)return n.value}function Jh(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Fl,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}function Kh(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Rl.hasOwnProperty(t)?{space:Rl[t],local:e}:e}function Zh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$l&&t.documentElement.namespaceURI===$l?t.createElement(e):t.createElementNS(n,e)}}function Qh(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ey(e){var t=Kh(e);return(t.local?Qh:Zh)(t)}function ty(){}function ny(e){return null==e?ty:function(){return this.querySelector(e)}}function oy(e){"function"!=typeof e&&(e=ny(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r,s=t[a],l=s.length,u=o[a]=new Array(l),c=0;c<l;++c)(i=s[c])&&(r=e.call(i,i.__data__,c,s))&&("__data__"in i&&(r.__data__=i.__data__),u[c]=r);return new $v(o,this._parents)}function ay(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function iy(){return[]}function ry(e){return null==e?iy:function(){return this.querySelectorAll(e)}}function sy(e){e="function"==typeof e?function(e){return function(){return ay(e.apply(this,arguments))}}(e):ry(e);for(var t=this._groups,n=t.length,o=[],a=[],i=0;i<n;++i)for(var r,s=t[i],l=s.length,u=0;u<l;++u)(r=s[u])&&(o.push(e.call(r,r.__data__,u,s)),a.push(r));return new $v(o,a)}function ly(e){return function(){return this.matches(e)}}function uy(e){return function(t){return t.matches(e)}}function cy(){return this.firstElementChild}function dy(e){return this.select(null==e?cy:function(e){return function(){return jl.call(this.children,e)}}("function"==typeof e?e:uy(e)))}function py(){return Array.from(this.children)}function fy(e){return this.selectAll(null==e?py:function(e){return function(){return Vl.call(this.children,e)}}("function"==typeof e?e:uy(e)))}function my(e){"function"!=typeof e&&(e=ly(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r=t[a],s=r.length,l=o[a]=[],u=0;u<s;++u)(i=r[u])&&e.call(i,i.__data__,u,r)&&l.push(i);return new $v(o,this._parents)}function hy(e){return new Array(e.length)}function yy(){return new $v(this._enter||this._groups.map(hy),this._parents)}function vy(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function gy(e){return function(){return e}}function wy(e,t,n,o,a,i){for(var r,s=0,l=t.length,u=i.length;s<u;++s)(r=t[s])?(r.__data__=i[s],o[s]=r):n[s]=new vy(e,i[s]);for(;s<l;++s)(r=t[s])&&(a[s]=r)}function by(e,t,n,o,a,i,r){var s,l,u,c=new Map,d=t.length,p=i.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u=r.call(l,l.__data__,s,t)+"",c.has(u)?a[s]=l:c.set(u,l));for(s=0;s<p;++s)u=r.call(e,i[s],s,i)+"",(l=c.get(u))?(o[s]=l,l.__data__=i[s],c.delete(u)):n[s]=new vy(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(a[s]=l)}function ky(e){return e.__data__}function xy(e,t){if(!arguments.length)return Array.from(this,ky);var n=t?by:wy,o=this._parents,a=this._groups;"function"!=typeof e&&(e=gy(e));for(var i=a.length,r=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=a[u],p=d.length,f=Iy(e.call(c,c&&c.__data__,u,o)),m=f.length,h=s[u]=new Array(m),y=r[u]=new Array(m);n(c,d,h,y,l[u]=new Array(p),f,t);for(var v,g,w=0,b=0;w<m;++w)if(v=h[w]){for(w>=b&&(b=w+1);!(g=y[b])&&++b<m;);v._next=g||null}}return(r=new $v(r,o))._enter=s,r._exit=l,r}function Iy(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Sy(){return new $v(this._exit||this._groups.map(hy),this._parents)}function Ey(e,t,n){var o=this.enter(),a=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),o&&a?o.merge(a).order():a}function Ty(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,i=o.length,r=Math.min(a,i),s=new Array(a),l=0;l<r;++l)for(var u,c=n[l],d=o[l],p=c.length,f=s[l]=new Array(p),m=0;m<p;++m)(u=c[m]||d[m])&&(f[m]=u);for(;l<a;++l)s[l]=n[l];return new $v(s,this._parents)}function Ny(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,a=e[t],i=a.length-1,r=a[i];--i>=0;)(o=a[i])&&(r&&4^o.compareDocumentPosition(r)&&r.parentNode.insertBefore(o,r),r=o);return this}function Ay(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_y);for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i){for(var r,s=n[i],l=s.length,u=a[i]=new Array(l),c=0;c<l;++c)(r=s[c])&&(u[c]=r);u.sort(t)}return new $v(a,this._parents).order()}function _y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Py(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Cy(){return Array.from(this)}function Oy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,i=o.length;a<i;++a){var r=o[a];if(r)return r}return null}function My(){let e=0;for(const t of this)++e;return e}function Dy(){return!this.node()}function Ly(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a,i=t[n],r=0,s=i.length;r<s;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function By(e){return function(){this.removeAttribute(e)}}function Fy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $y(e,t){return function(){this.setAttribute(e,t)}}function Ry(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jy(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Vy(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wy(e,t){var n=Kh(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Fy:By:"function"==typeof t?n.local?Vy:jy:n.local?Ry:$y)(n,t))}function zy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uy(e){return function(){this.style.removeProperty(e)}}function Gy(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hy(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Yy(e,t,n){return arguments.length>1?this.each((null==t?Uy:"function"==typeof t?Hy:Gy)(e,t,null==n?"":n)):qy(this.node(),e)}function qy(e,t){return e.style.getPropertyValue(t)||zy(e).getComputedStyle(e,null).getPropertyValue(t)}function Xy(e){return function(){delete this[e]}}function Jy(e,t){return function(){this[e]=t}}function Ky(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Zy(e,t){return arguments.length>1?this.each((null==t?Xy:"function"==typeof t?Ky:Jy)(e,t)):this.node()[e]}function Qy(e){return e.trim().split(/^|\s+/)}function ev(e){return e.classList||new tv(e)}function tv(e){this._node=e,this._names=Qy(e.getAttribute("class")||"")}function nv(e,t){for(var n=ev(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function ov(e,t){for(var n=ev(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function av(e){return function(){nv(this,e)}}function iv(e){return function(){ov(this,e)}}function rv(e,t){return function(){(t.apply(this,arguments)?nv:ov)(this,e)}}function sv(e,t){var n=Qy(e+"");if(arguments.length<2){for(var o=ev(this.node()),a=-1,i=n.length;++a<i;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?rv:t?av:iv)(n,t))}function lv(){this.textContent=""}function uv(e){return function(){this.textContent=e}}function cv(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function dv(e){return arguments.length?this.each(null==e?lv:("function"==typeof e?cv:uv)(e)):this.node().textContent}function pv(){this.innerHTML=""}function fv(e){return function(){this.innerHTML=e}}function mv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function hv(e){return arguments.length?this.each(null==e?pv:("function"==typeof e?mv:fv)(e)):this.node().innerHTML}function yv(){this.nextSibling&&this.parentNode.appendChild(this)}function vv(){return this.each(yv)}function gv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wv(){return this.each(gv)}function bv(e){var t="function"==typeof e?e:ey(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function kv(){return null}function xv(e,t){var n="function"==typeof e?e:ey(e),o=null==t?kv:"function"==typeof t?t:ny(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function Iv(){var e=this.parentNode;e&&e.removeChild(this)}function Sv(){return this.each(Iv)}function Ev(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nv(e){return this.select(e?Tv:Ev)}function Av(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _v(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Pv(e){return function(){var t=this.__on;if(t){for(var n,o=0,a=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function Cv(e,t,n){return function(){var o,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var r=0,s=a.length;r<s;++r)if((o=a[r]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(o):this.__on=[o]}}function Ov(e,t,n){var o,a,i=_v(e+""),r=i.length;if(!(arguments.length<2)){for(s=t?Cv:Pv,o=0;o<r;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(o=0,l=s[u];o<r;++o)if((a=i[o]).type===l.type&&a.name===l.name)return l.value}function Mv(e,t,n){var o=zy(e),a=o.CustomEvent;"function"==typeof a?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Dv(e,t){return function(){return Mv(this,e,t)}}function Lv(e,t){return function(){return Mv(this,e,t.apply(this,arguments))}}function Bv(e,t){return this.each(("function"==typeof t?Lv:Dv)(e,t))}function*Fv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,a=e[t],i=0,r=a.length;i<r;++i)(o=a[i])&&(yield o)}function $v(e,t){this._groups=e,this._parents=t}function Rv(){return new $v([[document.documentElement]],Wl)}function jv(){return this}function Vv(e){return"string"==typeof e?new $v([[document.querySelector(e)]],[document.documentElement]):new $v([[e]],Wl)}function Wv(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}function zv(e){e.stopImmediatePropagation()}function Uv(e){e.preventDefault(),e.stopImmediatePropagation()}function Gv(e){var t=e.document.documentElement,n=Vv(e).on("dragstart.drag",Uv,Ul);"onselectstart"in t?n.on("selectstart.drag",Uv,Ul):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hv(e,t){var n=e.document.documentElement,o=Vv(e).on("dragstart.drag",null);t&&(o.on("click.drag",Uv,Ul),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Yv(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:i,x:r,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function qv(e){return!e.ctrlKey&&!e.button}function Xv(){return this.parentNode}function Jv(e,t){return null==t?{x:e.x,y:e.y}:t}function Kv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qv(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function eg(){}function tg(){return this.rgb().formatHex()}function ng(){return this.rgb().formatHex8()}function og(){return gg(this).formatHsl()}function ag(){return this.rgb().formatRgb()}function ig(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Kl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rg(t):3===n?new cg(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?sg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?sg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Zl.exec(e))?new cg(t[1],t[2],t[3],1):(t=Ql.exec(e))?new cg(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eu.exec(e))?sg(t[1],t[2],t[3],t[4]):(t=tu.exec(e))?sg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=nu.exec(e))?vg(t[1],t[2]/100,t[3]/100,1):(t=ou.exec(e))?vg(t[1],t[2]/100,t[3]/100,t[4]):au.hasOwnProperty(e)?rg(au[e]):"transparent"===e?new cg(NaN,NaN,NaN,0):null}function rg(e){return new cg(e>>16&255,e>>8&255,255&e,1)}function sg(e,t,n,o){return o<=0&&(e=t=n=NaN),new cg(e,t,n,o)}function lg(e){return e instanceof eg||(e=ig(e)),e?new cg((e=e.rgb()).r,e.g,e.b,e.opacity):new cg}function ug(e,t,n,o){return 1===arguments.length?lg(e):new cg(e,t,n,null==o?1:o)}function cg(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function dg(){return`#${yg(this.r)}${yg(this.g)}${yg(this.b)}`}function pg(){return`#${yg(this.r)}${yg(this.g)}${yg(this.b)}${yg(255*(isNaN(this.opacity)?1:this.opacity))}`}function fg(){const e=mg(this.opacity);return`${1===e?"rgb(":"rgba("}${hg(this.r)}, ${hg(this.g)}, ${hg(this.b)}${1===e?")":`, ${e})`}`}function mg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yg(e){return((e=hg(e))<16?"0":"")+e.toString(16)}function vg(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bg(e,t,n,o)}function gg(e){if(e instanceof bg)return new bg(e.h,e.s,e.l,e.opacity);if(e instanceof eg||(e=ig(e)),!e)return new bg;if(e instanceof bg)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),i=Math.max(t,n,o),r=NaN,s=i-a,l=(i+a)/2;return s?(r=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=l<.5?i+a:2-i-a,r*=60):s=l>0&&l<1?0:r,new bg(r,s,l,e.opacity)}function wg(e,t,n,o){return 1===arguments.length?gg(e):new bg(e,t,n,null==o?1:o)}function bg(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function kg(e){return(e=(e||0)%360)<0?e+360:e}function xg(e){return Math.max(0,Math.min(1,e||0))}function Ig(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Sg(e){return 1==(e=+e)?Eg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):iu(isNaN(t)?n:t)}}function Eg(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):iu(isNaN(e)?t:e)}function Tg(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<o;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function Ng(e,t){var n,o=t?t.length:0,a=e?Math.min(o,e.length):0,i=new Array(a),r=new Array(o);for(n=0;n<a;++n)i[n]=Og(e[n],t[n]);for(;n<o;++n)r[n]=t[n];return function(e){for(n=0;n<a;++n)r[n]=i[n](e);return r}}function Ag(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function _g(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pg(e,t){var n,o={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?o[n]=Og(e[n],t[n]):a[n]=t[n];return function(e){for(n in o)a[n]=o[n](e);return a}}function Cg(e,t){var n,o,a,i=su.lastIndex=lu.lastIndex=0,r=-1,s=[],l=[];for(e+="",t+="";(n=su.exec(e))&&(o=lu.exec(t));)(a=o.index)>i&&(a=t.slice(i,a),s[r]?s[r]+=a:s[++r]=a),(n=n[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,l.push({i:r,x:_g(n,o)})),i=lu.lastIndex;return i<t.length&&(a=t.slice(i),s[r]?s[r]+=a:s[++r]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}function Og(e,t){var n,o,a=typeof t;return null==t||"boolean"===a?iu(t):("number"===a?_g:"string"===a?(n=ig(t))?(t=n,ru):Cg:t instanceof ig?ru:t instanceof Date?Ag:(o=t,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(t)?Ng:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Pg:_g:Tg))(e,t)}function Mg(e,t,n,o,a,i){var r,s,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*uu,skewX:Math.atan(l)*uu,scaleX:r,scaleY:s}}function Dg(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cu:Mg(t.a,t.b,t.c,t.d,t.e,t.f)}function Lg(e){return null==e?cu:(du||(du=document.createElementNS("http://www.w3.org/2000/svg","g")),du.setAttribute("transform",e),(e=du.transform.baseVal.consolidate())?Mg((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):cu)}function Bg(e,t,n,o){function a(e){return e.length?e.pop()+" ":""}return function(i,r){var s=[],l=[];return i=e(i),r=e(r),function(e,o,a,i,r,s){if(e!==a||o!==i){var l=r.push("translate(",null,t,null,n);s.push({i:l-4,x:_g(e,a)},{i:l-2,x:_g(o,i)})}else(a||i)&&r.push("translate("+a+t+i+n)}(i.translateX,i.translateY,r.translateX,r.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,o)-2,x:_g(e,t)})):t&&n.push(a(n)+"rotate("+t+o)}(i.rotate,r.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,o)-2,x:_g(e,t)}):t&&n.push(a(n)+"skewX("+t+o)}(i.skewX,r.skewX,s,l),function(e,t,n,o,i,r){if(e!==n||t!==o){var s=i.push(a(i)+"scale(",null,",",null,")");r.push({i:s-4,x:_g(e,n)},{i:s-2,x:_g(t,o)})}else 1===n&&1===o||i.push(a(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,r.scaleX,r.scaleY,s,l),i=r=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}function Fg(e){return((e=Math.exp(e))+1/e)/2}function $g(){return xu||(Eu(Rg),xu=Su.now()+Iu)}function Rg(){xu=0}function jg(){this._call=this._time=this._next=null}function Vg(e,t,n){var o=new jg;return o.restart(e,t,n),o}function Wg(){xu=(ku=Su.now())+Iu,hu=yu=0;try{!function(){$g(),++hu;for(var e,t=wu;t;)(e=xu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--hu}()}finally{hu=0,function(){for(var e,t,n=wu,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:wu=t);bu=e,Ug(o)}(),xu=0}}function zg(){var e=Su.now(),t=e-ku;t>gu&&(Iu-=t,ku=e)}function Ug(e){hu||(yu&&(yu=clearTimeout(yu)),e-xu>24?(e<1/0&&(yu=setTimeout(Wg,e-Su.now()-Iu)),vu&&(vu=clearInterval(vu))):(vu||(ku=Su.now(),vu=setInterval(zg,gu)),hu=1,Eu(Wg)))}function Gg(e,t,n){var o=new jg;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}function Hg(e,t,n,o,a,i){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};!function(e,t,n){var o,a=e.__transition;function i(e){n.state=_u,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(i){var u,c,d,p;if(n.state!==_u)return l();for(u in a)if((p=a[u]).name===n.name){if(p.state===Cu)return Gg(r);p.state===Ou?(p.state=Du,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete a[u]):+u<t&&(p.state=Du,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete a[u])}if(Gg((function(){n.state===Cu&&(n.state=Ou,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=Pu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pu){for(n.state=Cu,o=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=p);o.length=c+1}}function s(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=Mu,1),i=-1,r=o.length;++i<r;)o[i].call(e,a);n.state===Mu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=Du,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Vg(i,0,n.time)}(e,n,{name:t,index:o,group:a,on:Tu,tween:Nu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Au})}function Yg(e,t){var n=Xg(e,t);if(n.state>Au)throw new Error("too late; already scheduled");return n}function qg(e,t){var n=Xg(e,t);if(n.state>Cu)throw new Error("too late; already running");return n}function Xg(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jg(e,t){var n,o,a,i=e.__transition,r=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(o=n.state>Pu&&n.state<Mu,n.state=Du,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):r=!1;r&&delete e.__transition}}function Kg(e){return this.each((function(){Jg(this,e)}))}function Zg(e,t){var n,o;return function(){var a=qg(this,e),i=a.tween;if(i!==n)for(var r=0,s=(o=n=i).length;r<s;++r)if(o[r].name===t){(o=o.slice()).splice(r,1);break}a.tween=o}}function Qg(e,t,n){var o,a;if("function"!=typeof n)throw new Error;return function(){var i=qg(this,e),r=i.tween;if(r!==o){a=(o=r).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}i.tween=a}}function ew(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,a=Xg(this.node(),n).tween,i=0,r=a.length;i<r;++i)if((o=a[i]).name===e)return o.value;return null}return this.each((null==t?Zg:Qg)(n,e,t))}function tw(e,t,n){var o=e._id;return e.each((function(){var e=qg(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Xg(e,o).value[t]}}function nw(e,t){var n;return("number"==typeof t?_g:t instanceof ig?ru:(n=ig(t))?(t=n,ru):Cg)(e,t)}function ow(e){return function(){this.removeAttribute(e)}}function aw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iw(e,t,n){var o,a,i=n+"";return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function rw(e,t,n){var o,a,i=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function sw(e,t,n){var o,a,i;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttribute(e))===(s=l+"")?null:r===o&&s===a?i:(a=s,i=t(o=r,l));this.removeAttribute(e)}}function lw(e,t,n){var o,a,i;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:r===o&&s===a?i:(a=s,i=t(o=r,l));this.removeAttributeNS(e.space,e.local)}}function uw(e,t){var n=Kh(e),o="transform"===n?fu:nw;return this.attrTween(e,"function"==typeof t?(n.local?lw:sw)(n,o,tw(this,"attr."+e,t)):null==t?(n.local?aw:ow)(n):(n.local?rw:iw)(n,o,t))}function cw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function pw(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&dw(e,a)),n}return a._value=t,a}function fw(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&cw(e,a)),n}return a._value=t,a}function mw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Kh(e);return this.tween(n,(o.local?pw:fw)(o,t))}function hw(e,t){return function(){Yg(this,e).delay=+t.apply(this,arguments)}}function yw(e,t){return t=+t,function(){Yg(this,e).delay=t}}function vw(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?hw:yw)(t,e)):Xg(this.node(),t).delay}function gw(e,t){return function(){qg(this,e).duration=+t.apply(this,arguments)}}function ww(e,t){return t=+t,function(){qg(this,e).duration=t}}function bw(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?gw:ww)(t,e)):Xg(this.node(),t).duration}function kw(e,t){if("function"!=typeof t)throw new Error;return function(){qg(this,e).ease=t}}function xw(e){var t=this._id;return arguments.length?this.each(kw(t,e)):Xg(this.node(),t).ease}function Iw(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;qg(this,e).ease=n}}(this._id,e))}function Sw(e){"function"!=typeof e&&(e=ly(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r=t[a],s=r.length,l=o[a]=[],u=0;u<s;++u)(i=r[u])&&e.call(i,i.__data__,u,r)&&l.push(i);return new zw(o,this._parents,this._name,this._id)}function Ew(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,i=Math.min(o,a),r=new Array(o),s=0;s<i;++s)for(var l,u=t[s],c=n[s],d=u.length,p=r[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(p[f]=l);for(;s<o;++s)r[s]=t[s];return new zw(r,this._parents,this._name,this._id)}function Tw(e,t,n){var o,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Yg:qg;return function(){var r=i(this,e),s=r.on;s!==o&&(a=(o=s).copy()).on(t,n),r.on=a}}function Nw(e,t){var n=this._id;return arguments.length<2?Xg(this.node(),n).on.on(e):this.each(Tw(n,e,t))}function Aw(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e}function _w(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ny(e));for(var o=this._groups,a=o.length,i=new Array(a),r=0;r<a;++r)for(var s,l,u=o[r],c=u.length,d=i[r]=new Array(c),p=0;p<c;++p)(s=u[p])&&(l=e.call(s,s.__data__,p,u))&&("__data__"in s&&(l.__data__=s.__data__),d[p]=l,Hg(d[p],t,n,p,d,Xg(s,n)));return new zw(i,this._parents,t,n)}function Pw(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ry(e));for(var o=this._groups,a=o.length,i=[],r=[],s=0;s<a;++s)for(var l,u=o[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var p,f=e.call(l,l.__data__,d,u),m=Xg(l,n),h=0,y=f.length;h<y;++h)(p=f[h])&&Hg(p,t,n,h,f,m);i.push(f),r.push(l)}return new zw(i,r,t,n)}function Cw(){return new Lu(this._groups,this._parents)}function Ow(e){return function(){this.style.removeProperty(e)}}function Mw(e,t,n){var o="transform"==(e+="")?pu:nw;return null==t?this.styleTween(e,function(e,t){var n,o,a;return function(){var i=qy(this,e),r=(this.style.removeProperty(e),qy(this,e));return i===r?null:i===n&&r===o?a:a=t(n=i,o=r)}}(e,o)).on("end.style."+e,Ow(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,a,i;return function(){var r=qy(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=qy(this,e)),r===l?null:r===o&&l===a?i:(a=l,i=t(o=r,s))}}(e,o,tw(this,"style."+e,t))).each(function(e,t){var n,o,a,i,r="style."+t,s="end."+r;return function(){var l=qg(this,e),u=l.on,c=null==l.value[r]?i||(i=Ow(t)):void 0;u===n&&a===c||(o=(n=u).copy()).on(s,a=c),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,a,i=n+"";return function(){var r=qy(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}(e,o,t),n).on("end.style."+e,null)}function Dw(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Lw(e,t,n){var o,a;function i(){var i=t.apply(this,arguments);return i!==a&&(o=(a=i)&&Dw(e,i,n)),o}return i._value=t,i}function Bw(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,Lw(e,t,null==n?"":n))}function Fw(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(tw(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))}function $w(e){return function(t){this.textContent=e.call(this,t)}}function Rw(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&$w(o)),t}return o._value=e,o}function jw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Rw(e))}function Vw(){for(var e=this._name,t=this._id,n=Uw(),o=this._groups,a=o.length,i=0;i<a;++i)for(var r,s=o[i],l=s.length,u=0;u<l;++u)if(r=s[u]){var c=Xg(r,t);Hg(r,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zw(o,this._parents,e,n)}function Ww(){var e,t,n=this,o=n._id,a=n.size();return new Promise((function(i,r){var s={value:r},l={value:function(){0==--a&&i()}};n.each((function(){var n=qg(this,o),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===a&&i()}))}function zw(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Uw(){return++Bu}function Gw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function Hw(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yw(e){var t,n;e instanceof zw?(t=e._id,e=e._name):(t=Uw(),(n=$u).time=$g(),e=null==e?null:e+"");for(var o=this._groups,a=o.length,i=0;i<a;++i)for(var r,s=o[i],l=s.length,u=0;u<l;++u)(r=s[u])&&Hg(r,e,t,u,s,n||Hw(r,t));return new zw(o,this._parents,e,t)}function qw(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function Xw(e,t,n){this.k=e,this.x=t,this.y=n}function Jw(e){e.stopImmediatePropagation()}function Kw(e){e.preventDefault(),e.stopImmediatePropagation()}function Zw(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Qw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function eb(){return this.__zoom||ju}function tb(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nb(){return navigator.maxTouchPoints||"ontouchstart"in this}function ob(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r))}function ab(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,a="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),i="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return qu.includes(null==o?void 0:o.nodeName)||a||!!i}function ib(e,t,n,o){const a=t.replace("+","\n").replace("\n\n","\n+").split("\n").map((e=>e.trim().toLowerCase()));if(1===a.length)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const i=a.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===a[t]));return o&&n.delete(e.toLowerCase()),i}function rb(e,t){const n=r((()=>C(null==t?void 0:t.target)??Xu)),o=ye(!0===C(e));let a=!1;const i=new Set;let s=u(C(e));function l(){a=!1,i.clear(),o.value=!0===C(e)}function u(e){return null===e?(l(),()=>!1):"boolean"==typeof e?(l(),o.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?function(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=(a=n.code,e.includes(a)?"code":"key");var a;return Array.isArray(e)?e.some((e=>ib(n[o],e,t,"keyup"===n.type))):ib(n[o],e,t,"keyup"===n.type)}}(e,i):e}return F((()=>C(e)),((e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&l(),s=u(e)}),{immediate:!0}),zh(["blur","contextmenu"],l),Uh(((...e)=>s(...e)),(e=>{var n,i;const r=C(null==t?void 0:t.actInsideInputWithModifier)??!0,s=C(null==t?void 0:t.preventDefault)??!1;var l;if(a=(l=e).ctrlKey||l.metaKey||l.shiftKey||l.altKey,(!a||a&&!r)&&ab(e))return;const u=(null==(i=null==(n=e.composedPath)?void 0:n.call(e))?void 0:i[0])||e.target,c="BUTTON"===(null==u?void 0:u.nodeName)||"A"===(null==u?void 0:u.nodeName);s||!a&&c||e.preventDefault(),o.value=!0}),{eventName:"keydown",target:n}),Uh(((...e)=>s(...e)),(e=>{const n=C(null==t?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!a||a&&!n)&&ab(e))return;a=!1,o.value=!1}}),{eventName:"keyup",target:n}),o}function sb(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function lb(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function ub(e){return{width:e.offsetWidth,height:e.offsetHeight}}function cb(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function db(e,t){return{x:cb(e.x,t[0][0],t[1][0]),y:cb(e.y,t[0][1],t[1][1])}}function pb(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function fb(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function mb(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!fb(e)}function hb(e){return mb(e)&&"computedPosition"in e}function yb(e){return!Number.isNaN(e)&&Number.isFinite(e)}function vb(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:x({width:0,height:0}),computedPosition:x({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:dk(e.data)?e.data:{},events:x(dk(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function gb(e,t,n){var o,a;const i={id:e.id.toString(),type:e.type??(null==t?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(o=e.sourceHandle)?void 0:o.toString(),targetHandle:null==(a=e.targetHandle)?void 0:a.toString(),updatable:e.updatable??(null==n?void 0:n.updatable),selectable:e.selectable??(null==n?void 0:n.selectable),focusable:e.focusable??(null==n?void 0:n.focusable),data:dk(e.data)?e.data:{},events:x(dk(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(null==n?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function wb(e,t,n,o){const a="string"==typeof e?e:e.id,i=new Set,r="source"===o?"target":"source";for(const s of n)s[r]===a&&i.add(s[o]);return t.filter((e=>i.has(e.id)))}function bb({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function kb({x:e,y:t},{x:n,y:o,zoom:a}){return{x:e*a+n,y:t*a+o}}function xb({x:e,y:t},{x:n,y:o,zoom:a},i=!1,r=[1,1]){const s={x:(e-n)/a,y:(t-o)/a};return i?tk(s,r):s}function Ib(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Sb({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Eb({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Tb(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Ib(t,Sb({...o.computedPosition,...o.dimensions}))}return Eb(t)}function Nb(e,t,n={x:0,y:0,zoom:1},o=!1,a=!1){const i={...xb(t,n),width:t.width/n.zoom,height:t.height/n.zoom},r=[];for(const s of e){const{dimensions:e,selectable:t=!0,hidden:n=!1}=s,l=e.width??s.width??null,u=e.height??s.height??null;if(a&&!t||n)continue;const c=lb(i,sb(s));(null===l||null===u||o&&c>0||c>=(l??0)*(u??0)||s.dragging)&&r.push(s)}return r}function Ab(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function _b(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=Number.parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return sk(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Pb(e,t,n,o,a,i=.1){const r=function(e,t,n){if("string"==typeof e||"number"==typeof e){const o=_b(e,n),a=_b(e,t);return{top:o,right:a,bottom:o,left:a,x:2*a,y:2*o}}if("object"==typeof e){const o=_b(e.top??e.y??0,n),a=_b(e.bottom??e.y??0,n),i=_b(e.left??e.x??0,t),r=_b(e.right??e.x??0,t);return{top:o,right:r,bottom:a,left:i,x:i+r,y:o+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-r.x)/e.width,l=(n-r.y)/e.height,u=cb(Math.min(s,l),o,a),c=t/2-(e.x+e.width/2)*u,d=n/2-(e.y+e.height/2)*u,p=function(e,t,n,o,a,i){const{x:r,y:s}=kb(e,{x:t,y:n,zoom:o}),{x:l,y:u}=kb({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=a-l,d=i-u;return{left:Math.floor(r),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}(e,c,d,u,t,n),f=Math.min(p.left-r.left,0),m=Math.min(p.top-r.top,0);return{x:c-f+Math.min(p.right-r.right,0),y:d-m+Math.min(p.bottom-r.bottom,0),zoom:u}}function Cb(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return!!n&&(!!n.selected||Cb(n,t))}function Ob(e,t){return void 0===e?"":"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function Mb(e){const t=e.ctrlKey&&ac()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function Db(e,t,n){return e<t?cb(Math.abs(e-t),1,t)/t:e>n?-cb(Math.abs(e-n),1,t)/t:0}function Lb(e,t,n=15,o=40){return[Db(e.x,o,t.width-o)*n,Db(e.y,o,t.height-o)*n]}function Bb(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let a={};if("function"==typeof t.style?a={...t.style(t)}:t.style&&(a={...t.style}),a.width=a.width??`${t.dimensions.width}px`,a.height=a.height??`${t.dimensions.height}px`,n>0)if("string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+n}px`}else a.width+=n;if(o>0)if("string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+o}px`}else a.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+n}px`}else a.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+n}px`}else a.height+=n;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>({...(0,t.style)(e),...a}):t.style={...t.style,...a}}}}function Fb(e,t){var n,o;const a=e.filter((e=>"add"===e.type||"remove"===e.type));for(const r of a)if("add"===r.type)-1===t.findIndex((e=>e.id===r.item.id))&&t.push(r.item);else if("remove"===r.type){const e=t.findIndex((e=>e.id===r.id));-1!==e&&t.splice(e,1)}const i=t.map((e=>e.id));for(const r of t)for(const a of e)if(a.id===r.id)switch(a.type){case"select":r.selected=a.selected;break;case"position":if(hb(r)&&(void 0!==a.position&&(r.position=a.position),void 0!==a.dragging&&(r.dragging=a.dragging),r.expandParent&&r.parentNode)){const e=t[i.indexOf(r.parentNode)];e&&hb(e)&&Bb(r,e)}break;case"dimensions":if(hb(r)&&(void 0!==a.dimensions&&(r.dimensions=a.dimensions),void 0!==a.updateStyle&&a.updateStyle&&(r.style={...r.style||{},width:`${null==(n=a.dimensions)?void 0:n.width}px`,height:`${null==(o=a.dimensions)?void 0:o.height}px`}),void 0!==a.resizing&&(r.resizing=a.resizing),r.expandParent&&r.parentNode)){const e=t[i.indexOf(r.parentNode)];e&&hb(e)&&(e.dimensions.width&&e.dimensions.height?Bb(r,e):m((()=>{Bb(r,e)})))}}return t}function $b(e,t){return{id:e,type:"select",selected:t}}function Rb(e){return{item:e,type:"add"}}function jb(e){return{id:e,type:"remove"}}function Vb(e,t,n,o,a){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:a||null,type:"remove"}}function Wb(e,t=new Set,n=!1){const o=[];for(const[a,i]of e){const e=t.has(a);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push($b(i.id,e)))}return o}function zb(e){const t=new Set;let n=ec,o=()=>!1;const a=()=>t.size>0||o(),i=e=>{t.delete(e)};return{on:e=>{t.add(e);const n=()=>i(e);return Dh(n),{off:n}},off:i,trigger:o=>{const i=[n];return a()?i.push(...t):e&&i.push(e),Promise.allSettled(i.map((e=>e(o))))},hasListeners:a,listeners:t,setEmitter:e=>{n=e},removeEmitter:()=>{n=ec},setHasEmitListeners:e=>{o=e},removeHasEmitListeners:()=>{o=()=>!1}}}function Ub(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Gb({id:e,dragItems:t,findNode:n}){const o=[];for(const a of t){const e=n(a.id);e&&o.push(e)}return[e?o.find((t=>t.id===e)):o[0],o]}function Hb(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Yb(e,t,n,o){let a=e.extent||n;if("parent"!==a&&(Array.isArray(a)||"parent"!==(null==a?void 0:a.range))||e.expandParent){if(Array.isArray(a)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;a=[[a[0][0]+e,a[0][1]+t],[a[1][0]+e,a[1][1]+t]]}else if("parent"!==a&&(null==a?void 0:a.range)&&Array.isArray(a.range)){const[e,t,n,i]=Hb(a.padding),r=(null==o?void 0:o.computedPosition.x)||0,s=(null==o?void 0:o.computedPosition.y)||0;a=[[a.range[0][0]+r+i,a.range[0][1]+s+e],[a.range[1][0]+r-t,a.range[1][1]+s-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const e=function(e,t,n){const[o,a,i,r]="string"!=typeof e?Hb(e.padding):[0,0,0,0];return!(!n||void 0===n.computedPosition.x||void 0===n.computedPosition.y||void 0===n.dimensions.width||void 0===n.dimensions.height)&&[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-a,n.computedPosition.y+n.dimensions.height-i]]}(a,0,o);e&&(a=e)}else t(new oc(tc.NODE_EXTENT_INVALID,e.id)),a=n;return"parent"===a?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:a}function qb(e,t,n,o,a){const i=db(t,function({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}(e.dimensions,Yb(e,n,o,a)));return{position:{x:i.x-((null==a?void 0:a.computedPosition.x)||0),y:i.y-((null==a?void 0:a.computedPosition.y)||0)},computedPosition:i}}function Xb(e,t,n=Vu.Left,o=!1){const a=((null==t?void 0:t.x)??0)+e.computedPosition.x,i=((null==t?void 0:t.y)??0)+e.computedPosition.y,{width:r,height:s}=t??function(e){var t,n;return{width:(null==(t=e.dimensions)?void 0:t.width)??e.width??0,height:(null==(n=e.dimensions)?void 0:n.height)??e.height??0}}(e);if(o)return{x:a+r/2,y:i+s/2};switch((null==t?void 0:t.position)??n){case Vu.Top:return{x:a+r/2,y:i};case Vu.Right:return{x:a+r,y:i+s/2};case Vu.Bottom:return{x:a+r/2,y:i+s};case Vu.Left:return{x:a,y:i+s/2}}}function Jb(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Kb({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:a,targetHeight:i,width:r,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Sb({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:r/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*p)>0}function Zb(e,t,n=!1){const o="number"==typeof e.zIndex;let a=o?e.zIndex:0;const i=t(e.source),r=t(e.target);return i&&r?(n&&(a=o?e.zIndex:Math.max(i.computedPosition.z||0,r.computedPosition.z||0)),a):0}function Qb(e){return"clientX"in e}function ek(e,t){let n,o;return Qb(e)?(n=e.clientX,o=e.clientY):"touches"in e&&e.touches.length>0?(n=e.touches[0].clientX,o=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(n=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):(n=0,o=0),{x:n-((null==t?void 0:t.left)??0),y:o-((null==t?void 0:t.top)??0)}}function tk(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}function nk(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ok(e,t,n,o){var a,i;let r=[],s=Number.POSITIVE_INFINITY;const l=function(e,t,n){const o=[],a={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())lb(a,sb(i))>0&&o.push(i);return o}(e,n,t+rc);for(const u of l){const n=[...(null==(a=u.handleBounds)?void 0:a.source)??[],...(null==(i=u.handleBounds)?void 0:i.target)??[]];for(const a of n){if(o.nodeId===a.nodeId&&o.type===a.type&&o.id===a.id)continue;const{x:n,y:i}=Xb(u,a,a.position,!0),l=Math.sqrt((n-e.x)**2+(i-e.y)**2);l>t||(l<s?(r=[{...a,x:n,y:i}],s=l):l===s&&r.push({...a,x:n,y:i}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find((t=>t.type===e))??r[0]}return r[0]}function ak(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:i,doc:r,lib:s,flowId:l,isValidConnection:u=ic},c,d,p,f){const m="target"===i,h=t?r.querySelector(`.${s}-flow__handle[data-id="${l}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:y,y:v}=ek(e),g=r.elementFromPoint(y,v),w=(null==g?void 0:g.classList.contains(`${s}-flow__handle`))?g:h,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const e=ik(void 0,w),t=w.getAttribute("data-nodeid"),i=w.getAttribute("data-handleid"),r=w.classList.contains("connectable"),s=w.classList.contains("connectableend");if(!t||!e)return b;const l={source:m?t:o,sourceHandle:m?i:a,target:m?o:t,targetHandle:m?a:i};b.connection=l,b.isValid=r&&s&&(n===Uu.Strict?m&&"source"===e||!m&&"target"===e:t!==o||i!==a)&&u(l,{nodes:d,edges:c,sourceNode:p(l.source),targetNode:p(l.target)}),b.toHandle=rk(t,e,i,f,n,!0)}return b}function ik(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function rk(e,t,n,o,a,i=!1){var r,s,l;const u=o.get(e);if(!u)return null;const c=a===Uu.Strict?null==(r=u.handleBounds)?void 0:r[t]:[...(null==(s=u.handleBounds)?void 0:s.source)??[],...(null==(l=u.handleBounds)?void 0:l.target)??[]],d=(n?null==c?void 0:c.find((e=>e.id===n)):null==c?void 0:c[0])??null;return d&&i?{...d,...Xb(u,d,d.position,!0)}:d}function sk(e,...t){lk()&&console.warn(`[Vue Flow]: ${e}`,...t)}function lk(){return!lc.includes("production")}function uk(e,t,n,o,a){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return(null==i?void 0:i.length)?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:a,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...ub(t)}})):null}function ck(e,t,n,o,a,i=!1,r){a.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),m((()=>{r.blur()}))):n([e])}function dk(e){return void 0!==h(e)}function pk(e,t,n,o){if(!e||!e.source||!e.target)return n(new oc(tc.EDGE_INVALID,(null==e?void 0:e.id)??"[ID UNKNOWN]")),!1;let a;return a=fb(e)?e:{...e,id:bb(e)},a=gb(a,void 0,o),!function(e,t){return t.some((t=>fb(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}(a,t)&&a}function fk(e,t,n){const o={},a=[];for(let i=0;i<e.length;++i){const r=e[i];if(!mb(r)){n(new oc(tc.NODE_INVALID,null==r?void 0:r.id));continue}const s=vb(r,t(r.id),r.parentNode);r.parentNode&&(o[r.parentNode]=!0),a[i]=s}for(const i of a){const e=t(i.parentNode)||a.find((e=>e.id===i.parentNode));i.parentNode&&!e&&n(new oc(tc.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),e&&(e.isParent=!0))}return a}function mk(e,t,n,o,a,i){let r=a;const s=o.get(r)||new Map;o.set(r,s.set(n,t)),r=`${a}-${e}`;const l=o.get(r)||new Map;if(o.set(r,l.set(n,t)),i){r=`${a}-${e}-${i}`;const s=o.get(r)||new Map;o.set(r,s.set(n,t))}}function hk(e,t,n){e.clear();for(const o of n){const{source:t,target:n,sourceHandle:a=null,targetHandle:i=null}=o,r={edgeId:o.id,source:t,target:n,sourceHandle:a,targetHandle:i},s=`${t}-${a}--${n}-${i}`;mk("source",r,`${n}-${i}--${t}-${a}`,e,t,a),mk("target",r,s,e,n,i)}}function yk(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vk(e,t,n,o,a,i,r,s){const l=[];for(const u of e){const e=fb(u)?u:pk(u,s,a,i);if(!e)continue;const c=n(e.source),d=n(e.target);if(!c||!d){a(new oc(tc.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!c){a(new oc(tc.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!d){a(new oc(tc.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t&&!t(e,{edges:s,nodes:r,sourceNode:c,targetNode:d})){a(new oc(tc.EDGE_INVALID,e.id));continue}const p=o(e.id);l.push({...gb(e,p,i),sourceNode:c,targetNode:d})}return l}function gk(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:a,nodeLookup:i,nodeExtent:r,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:p,findNode:f,multiSelectionActive:m,nodesSelectionActive:h,selectNodesOnDrag:y,removeSelectedElements:v,addSelectedNodes:g,updateNodePositions:w,emits:b}=Vk(),{onStart:k,onDrag:x,onStop:I,onClick:S,el:E,disabled:T,id:N,selectable:A,dragHandle:_}=e,P=ye(!1);let O,M=[],D=null,L={x:void 0,y:void 0},B={x:0,y:0},$=null,R=!1,j=!1,V=0,W=!1;const z=bk(),U=({x:e,y:t})=>{L={x:e,y:t};let a=!1;if(M=M.map((i=>{const s={x:e-i.distance.x,y:t-i.distance.y},{computedPosition:l}=qb(i,n.value?tk(s,o.value):s,b.error,r.value,i.parentNode?f(i.parentNode):void 0);return a=a||i.position.x!==l.x||i.position.y!==l.y,i.position=l,i})),j=j||a,a&&(w(M,!0,!0),P.value=!0,$)){const[e,t]=Gb({id:N,dragItems:M,findNode:f});x({event:$,node:e,nodes:t})}},G=()=>{if(!D)return;const[e,t]=Lb(B,D,c.value);if(0!==e||0!==t){const n={x:(L.x??0)-e/l.value.zoom,y:(L.y??0)-t/l.value.zoom};p({x:e,y:t})&&U(n)}V=requestAnimationFrame(G)},H=(e,t)=>{R=!0;const n=f(N);y.value||m.value||!n||n.selected||v(),n&&C(A)&&y.value&&ck(n,m.value,g,v,h,!1,t);const o=z(e.sourceEvent);if(L=o,M=function(e,t,n,o){var a,i;const r=new Map;for(const[s,l]of e)!l.selected&&l.id!==o||l.parentNode&&Cb(l,e)||!(l.draggable||t&&void 0===l.draggable)||e.get(s)&&r.set(s,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-(null==(a=l.computedPosition)?void 0:a.x)||0,y:n.y-(null==(i=l.computedPosition)?void 0:i.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(r.values())}(i.value,d.value,o,N),M.length){const[t,n]=Gb({id:N,dragItems:M,findNode:f});k({event:e.sourceEvent,node:t,nodes:n})}};return F([()=>C(T),E],(([e,n],o,i)=>{if(n){const o=Vv(n);e||(O=function(){var e,t,n,o,a=qv,i=Xv,r=Jv,s=Kv,l={},u=Hh("start","drag","end"),c=0,d=0;function p(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",y).on("touchmove.drag",v,zl).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(r,s){if(!o&&a.call(this,r,s)){var l=w(this,i.call(this,r,s),r,s,"mouse");l&&(Vv(r.view).on("mousemove.drag",m,Ul).on("mouseup.drag",h,Ul),Gv(r.view),zv(r),n=!1,e=r.clientX,t=r.clientY,l("start",r))}}function m(o){if(Uv(o),!n){var a=o.clientX-e,i=o.clientY-t;n=a*a+i*i>d}l.mouse("drag",o)}function h(e){Vv(e.view).on("mousemove.drag mouseup.drag",null),Hv(e.view,n),Uv(e),l.mouse("end",e)}function y(e,t){if(a.call(this,e,t)){var n,o,r=e.changedTouches,s=i.call(this,e,t),l=r.length;for(n=0;n<l;++n)(o=w(this,s,e,t,r[n].identifier,r[n]))&&(zv(e),o("start",e,r[n]))}}function v(e){var t,n,o=e.changedTouches,a=o.length;for(t=0;t<a;++t)(n=l[o[t].identifier])&&(Uv(e),n("drag",e,o[t]))}function g(e){var t,n,a=e.changedTouches,i=a.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=l[a[t].identifier])&&(zv(e),n("end",e,a[t]))}function w(e,t,n,o,a,i){var s,d,f,m=u.copy(),h=Wv(i||n,t);if(null!=(f=r.call(e,new Yv("beforestart",{sourceEvent:n,target:p,identifier:a,active:c,x:h[0],y:h[1],dx:0,dy:0,dispatch:m}),o)))return s=f.x-h[0]||0,d=f.y-h[1]||0,function n(i,r,u){var y,v=h;switch(i){case"start":l[a]=n,y=c++;break;case"end":delete l[a],--c;case"drag":h=Wv(u||r,t),y=c}m.call(i,e,new Yv(i,{sourceEvent:r,subject:f,target:p,identifier:a,active:y,x:h[0]+s,y:h[1]+d,dx:h[0]-v[0],dy:h[1]-v[1],dispatch:m}),o)}}return p.filter=function(e){return arguments.length?(a="function"==typeof e?e:Gl(!!e),p):a},p.container=function(e){return arguments.length?(i="function"==typeof e?e:Gl(e),p):i},p.subject=function(e){return arguments.length?(r="function"==typeof e?e:Gl(e),p):r},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Gl(!!e),p):s},p.on=function(){var e=u.on.apply(u,arguments);return e===u?p:e},p.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,p):Math.sqrt(d)},p}().on("start",(e=>((e,n)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(j=!1,0===s.value&&H(e,n),L=z(e.sourceEvent),D=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,B=ek(e.sourceEvent,D))})(e,n))).on("drag",(e=>((e,t)=>{const n=z(e.sourceEvent);if(!W&&R&&u.value&&(W=!0,G()),!R){const o=n.xSnapped-(L.x??0),a=n.ySnapped-(L.y??0);Math.sqrt(o*o+a*a)>s.value&&H(e,t)}(L.x!==n.xSnapped||L.y!==n.ySnapped)&&M.length&&R&&($=e.sourceEvent,B=ek(e.sourceEvent,D),U(n))})(e,n))).on("end",(e=>(e=>{let t=!1;if(!R&&!P.value&&!m.value){const n=e.sourceEvent,o=z(n),a=o.xSnapped-(L.x??0),i=o.ySnapped-(L.y??0),r=Math.sqrt(a*a+i*i);0!==r&&r<=s.value&&(S?.(n),t=!0)}if(M.length&&!t){j&&(w(M,!1,!1),j=!1);const[t,n]=Gb({id:N,dragItems:M,findNode:f});I({event:e.sourceEvent,node:t,nodes:n})}M=[],P.value=!1,W=!1,R=!1,L={x:void 0,y:void 0},cancelAnimationFrame(V)})(e))).filter((e=>{const t=e.target,o=C(_);return!e.button&&(!a.value||!Ub(t,`.${a.value}`,n)&&(!o||Ub(t,o,n)))})),o.call(O)),i((()=>{o.on(".drag",null),O&&(O.on("start",null),O.on("drag",null),O.on("end",null))}))}})),P}function wk(e,t){const n={doubleClick:zb(),click:zb(),mouseEnter:zb(),mouseMove:zb(),mouseLeave:zb(),contextMenu:zb(),updateStart:zb(),update:zb(),updateEnd:zb()};return n.doubleClick.on((n=>{var o,a;t.edgeDoubleClick(n),null==(a=null==(o=e.events)?void 0:o.doubleClick)||a.call(o,n)})),n.click.on((n=>{var o,a;t.edgeClick(n),null==(a=null==(o=e.events)?void 0:o.click)||a.call(o,n)})),n.mouseEnter.on((n=>{var o,a;t.edgeMouseEnter(n),null==(a=null==(o=e.events)?void 0:o.mouseEnter)||a.call(o,n)})),n.mouseMove.on((n=>{var o,a;t.edgeMouseMove(n),null==(a=null==(o=e.events)?void 0:o.mouseMove)||a.call(o,n)})),n.mouseLeave.on((n=>{var o,a;t.edgeMouseLeave(n),null==(a=null==(o=e.events)?void 0:o.mouseLeave)||a.call(o,n)})),n.contextMenu.on((n=>{var o,a;t.edgeContextMenu(n),null==(a=null==(o=e.events)?void 0:o.contextMenu)||a.call(o,n)})),n.updateStart.on((n=>{var o,a;t.edgeUpdateStart(n),null==(a=null==(o=e.events)?void 0:o.updateStart)||a.call(o,n)})),n.update.on((n=>{var o,a;t.edgeUpdate(n),null==(a=null==(o=e.events)?void 0:o.update)||a.call(o,n)})),n.updateEnd.on((n=>{var o,a;t.edgeUpdateEnd(n),null==(a=null==(o=e.events)?void 0:o.updateEnd)||a.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function bk(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Vk();return a=>{var i;const r=(null==(i=o.value)?void 0:i.getBoundingClientRect())??{left:0,top:0},{x:s,y:l}=ek(function(e){return"sourceEvent"in e}(a)?a.sourceEvent:a,r),u=xb({x:s,y:l},e.value),{x:c,y:d}=n.value?tk(u,t.value):u;return{xSnapped:c,ySnapped:d,...u}}}function kk(){return!0}function xk({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:a,onEdgeUpdate:i,onEdgeUpdateEnd:r}){const{id:s,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:p,nodesConnectable:f,autoPanOnConnect:m,autoPanSpeed:h,findNode:y,panBy:v,startConnection:g,updateConnection:w,endConnection:b,emits:k,viewport:x,edges:I,nodes:S,isValidConnection:E,nodeLookup:T}=Vk();let N=null,A=!1,_=null;return{handlePointerDown:function(d){var p;const f="target"===C(n),P=Qb(d),O=pb(d.target),M=d.currentTarget;if(M&&(P&&0===d.button||!P)){let n=function(n){U=ek(n,V),L=ok(xb(U,x.value,!1,[1,1]),c.value,T.value,Y),G||(H(),G=!0);const o=ak(n,{handle:L,connectionMode:u.value,fromNodeId:C(t),fromHandleId:C(e),fromType:f?"target":"source",isValidConnection:B,doc:O,lib:"vue",flowId:s,nodeLookup:T.value},I.value,S.value,y,T.value);_=o.handleDomNode,N=o.connection,A=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!L,o.isValid);const a={...J,isValid:A,to:o.toHandle&&A?kb({x:o.toHandle.x,y:o.toHandle.y},x.value):U,toHandle:o.toHandle,toPosition:A&&o.toHandle?o.toHandle.position:sc[Y.position],toNode:o.toHandle?T.value.get(o.toHandle.nodeId):null};if(A&&L&&(null==J?void 0:J.toHandle)&&a.toHandle&&J.toHandle.type===a.toHandle.type&&J.toHandle.nodeId===a.toHandle.nodeId&&J.toHandle.id===a.toHandle.id&&J.to.x===a.to.x&&J.to.y===a.to.y)return;const i=L??o.toHandle;if(w(i&&A?kb({x:i.x,y:i.y},x.value):U,o.toHandle,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!i,A)),J=a,!L&&!A&&!_)return nk(z);N&&N.source!==N.target&&_&&(nk(z),z=_,_.classList.add("connecting","vue-flow__handle-connecting"),_.classList.toggle("valid",!!A),_.classList.toggle("vue-flow__handle-valid",!!A))},P=function(e){"touches"in e&&e.touches.length>0||((L||_)&&N&&A&&(i?i(e,N):k.connect(N)),k.connectEnd(e),a&&r?.(e),nk(z),cancelAnimationFrame(F),b(e),G=!1,A=!1,N=null,_=null,O.removeEventListener("mousemove",n),O.removeEventListener("mouseup",P),O.removeEventListener("touchmove",n),O.removeEventListener("touchend",P))};const D=y(C(t));let L,B=C(o)||E.value||kk;!B&&D&&(B=(f?D.isValidSourcePos:D.isValidTargetPos)||kk);let F=0;const{x:$,y:R}=ek(d),j=ik(C(a),M),V=null==(p=l.value)?void 0:p.getBoundingClientRect();if(!V||!j)return;const W=rk(C(t),j,C(e),T.value,u.value);if(!W)return;let z,U=ek(d,V),G=!1;const H=()=>{if(!m.value)return;const[e,t]=Lb(U,V,h.value);v({x:e,y:t}),F=requestAnimationFrame(H)},Y={...W,nodeId:C(t),type:j,position:W.position},q=T.value.get(C(t)),X={inProgress:!0,isValid:null,from:Xb(q,Y,Vu.Left,!0),fromHandle:Y,fromPosition:Y.position,fromNode:q,to:U,toHandle:null,toPosition:sc[Y.position],toNode:null};g({nodeId:C(t),id:C(e),type:j,position:(null==M?void 0:M.getAttribute("data-handlepos"))||Vu.Top,...U},{x:$-V.left,y:R-V.top}),k.connectStart({event:d,nodeId:C(t),handleId:C(e),handleType:j});let J=X;O.addEventListener("mousemove",n),O.addEventListener("mouseup",P),O.addEventListener("touchmove",n),O.addEventListener("touchend",P)}},handleClick:function(a){var i,r;if(!d.value)return;const l="target"===C(n);if(!p.value)return k.clickConnectStart({event:a,nodeId:C(t),handleId:C(e)}),void g({nodeId:C(t),type:C(n),id:C(e),position:Vu.Top,...ek(a)},void 0,!0);let c=C(o)||E.value||kk;const m=y(C(t));if(!c&&m&&(c=(l?m.isValidSourcePos:m.isValidTargetPos)||kk),m&&!1===(void 0===m.connectable?f.value:m.connectable))return;const h=pb(a.target),v=ak(a,{handle:{nodeId:C(t),id:C(e),type:C(n),position:Vu.Top,...ek(a)},connectionMode:u.value,fromNodeId:p.value.nodeId,fromHandleId:p.value.id??null,fromType:p.value.type,isValidConnection:c,doc:h,lib:"vue",flowId:s,nodeLookup:T.value},I.value,S.value,y,T.value),w=(null==(i=v.connection)?void 0:i.source)===(null==(r=v.connection)?void 0:r.target);v.isValid&&v.connection&&!w&&k.connect(v.connection),k.clickConnectEnd(a),b(a,!0)}}}function Ik(e){const t=e??he(cc,"")??"",n=he(dc,v(null)),{findNode:o,edges:a,emits:i}=Vk(),s=o(t);return s||i.error(new oc(tc.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:r((()=>o(s.parentNode))),connectedEdges:r((()=>Ab([s],a.value)))}}function Sk(e,t){const n={doubleClick:zb(),click:zb(),mouseEnter:zb(),mouseMove:zb(),mouseLeave:zb(),contextMenu:zb(),dragStart:zb(),drag:zb(),dragStop:zb()};return n.doubleClick.on((n=>{var o,a;t.nodeDoubleClick(n),null==(a=null==(o=e.events)?void 0:o.doubleClick)||a.call(o,n)})),n.click.on((n=>{var o,a;t.nodeClick(n),null==(a=null==(o=e.events)?void 0:o.click)||a.call(o,n)})),n.mouseEnter.on((n=>{var o,a;t.nodeMouseEnter(n),null==(a=null==(o=e.events)?void 0:o.mouseEnter)||a.call(o,n)})),n.mouseMove.on((n=>{var o,a;t.nodeMouseMove(n),null==(a=null==(o=e.events)?void 0:o.mouseMove)||a.call(o,n)})),n.mouseLeave.on((n=>{var o,a;t.nodeMouseLeave(n),null==(a=null==(o=e.events)?void 0:o.mouseLeave)||a.call(o,n)})),n.contextMenu.on((n=>{var o,a;t.nodeContextMenu(n),null==(a=null==(o=e.events)?void 0:o.contextMenu)||a.call(o,n)})),n.dragStart.on((n=>{var o,a;t.nodeDragStart(n),null==(a=null==(o=e.events)?void 0:o.dragStart)||a.call(o,n)})),n.drag.on((n=>{var o,a;t.nodeDrag(n),null==(a=null==(o=e.events)?void 0:o.drag)||a.call(o,n)})),n.dragStop.on((n=>{var o,a;t.nodeDragStop(n),null==(a=null==(o=e.events)?void 0:o.dragStop)||a.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Ek(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:a,snapToGrid:i,nodesDraggable:r,emits:s}=Vk();return(l,u=!1)=>{const c=i.value?a.value[0]:5,d=i.value?a.value[1]:5,p=u?4:1,f=l.x*c*p,m=l.y*d*p,h=[];for(const n of e.value)if(n.draggable||r&&void 0===n.draggable){const{position:e}=qb(n,{x:n.computedPosition.x+f,y:n.computedPosition.y+m},s.error,t.value,n.parentNode?o(n.parentNode):void 0);h.push({id:n.id,position:e,from:n.position,distance:{x:l.x,y:l.y},dimensions:n.dimensions})}n(h,!0,!1)}}function Tk(){return sk("Viewport not initialized yet."),Promise.resolve(!1)}function Nk(e,t=0,n=yc,o=(()=>{})){const a="number"==typeof t&&t>0;return a||o(),a?e.transition().duration(t).ease(n).on("end",o):e}function Ak(e,t,n){const o=d(!0);return o.run((()=>{o.run((()=>{let t,o,a=!(!n.nodes.value.length&&!n.edges.value.length);t=$h([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(o?.pause(),n.setElements(e),o||a||!e.length?o?.resume():a=!0)})),o=$h([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var a;(null==(a=e.modelValue)?void 0:a.value)&&Array.isArray(e.modelValue.value)&&(t?.pause(),e.modelValue.value=[...n,...o],m((()=>{t?.resume()})))}),{immediate:a}),I((()=>{t?.stop(),o?.stop()}))})),o.run((()=>{let t,o,a=!!n.nodes.value.length;t=$h([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(o?.pause(),n.setNodes(e),o||a||!e.length?o?.resume():a=!0)})),o=$h([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;(null==(o=e.nodes)?void 0:o.value)&&Array.isArray(e.nodes.value)&&(t?.pause(),e.nodes.value=[...n],m((()=>{t?.resume()})))}),{immediate:a}),I((()=>{t?.stop(),o?.stop()}))})),o.run((()=>{let t,o,a=!!n.edges.value.length;t=$h([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(o?.pause(),n.setEdges(e),o||a||!e.length?o?.resume():a=!0)})),o=$h([n.edges,()=>n.edges.value.length],(([n])=>{var o;(null==(o=e.edges)?void 0:o.value)&&Array.isArray(e.edges.value)&&(t?.pause(),e.edges.value=[...n],m((()=>{t?.resume()})))}),{immediate:a}),I((()=>{t?.stop(),o?.stop()}))})),o.run((()=>{F((()=>t.minZoom),(()=>{t.minZoom&&dk(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:!0})})),o.run((()=>{F((()=>t.maxZoom),(()=>{t.maxZoom&&dk(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:!0})})),o.run((()=>{F((()=>t.translateExtent),(()=>{t.translateExtent&&dk(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}),{immediate:!0})})),o.run((()=>{F((()=>t.nodeExtent),(()=>{t.nodeExtent&&dk(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}),{immediate:!0})})),o.run((()=>{F((()=>t.applyDefault),(()=>{dk(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:!0})})),o.run((()=>{const e=async e=>{let o=e;"function"==typeof t.autoConnect&&(o=await t.autoConnect(e)),!1!==o&&n.addEdges([o])};F((()=>t.autoConnect),(()=>{dk(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:!0}),F(n.autoConnect,((t,o,a)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),a((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})})),(()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const a of Object.keys(t)){const i=a;if(!e.includes(i)){const e=M((()=>t[i])),a=n[i];K(a)&&o.run((()=>{F(e,(e=>{dk(e)&&(a.value=e)}),{immediate:!0})}))}}})()})),()=>o.stop()}function _k(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Wu.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Hu.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:zu.Bezier,style:{}},connectionMode:Uu.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ac()?"Meta":"Control",zoomActivationKeyCode:ac()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:zb(),nodesChange:zb(),nodeDoubleClick:zb(),nodeClick:zb(),nodeMouseEnter:zb(),nodeMouseMove:zb(),nodeMouseLeave:zb(),nodeContextMenu:zb(),nodeDragStart:zb(),nodeDrag:zb(),nodeDragStop:zb(),nodesInitialized:zb(),miniMapNodeClick:zb(),miniMapNodeDoubleClick:zb(),miniMapNodeMouseEnter:zb(),miniMapNodeMouseMove:zb(),miniMapNodeMouseLeave:zb(),connect:zb(),connectStart:zb(),connectEnd:zb(),clickConnectStart:zb(),clickConnectEnd:zb(),paneReady:zb(),init:zb(),move:zb(),moveStart:zb(),moveEnd:zb(),selectionDragStart:zb(),selectionDrag:zb(),selectionDragStop:zb(),selectionContextMenu:zb(),selectionStart:zb(),selectionEnd:zb(),viewportChangeStart:zb(),viewportChange:zb(),viewportChangeEnd:zb(),paneScroll:zb(),paneClick:zb(),paneContextMenu:zb(),paneMouseEnter:zb(),paneMouseMove:zb(),paneMouseLeave:zb(),edgeContextMenu:zb(),edgeMouseEnter:zb(),edgeMouseMove:zb(),edgeMouseLeave:zb(),edgeDoubleClick:zb(),edgeClick:zb(),edgeUpdateStart:zb(),edgeUpdate:zb(),edgeUpdateEnd:zb(),updateNodeInternals:zb(),error:zb((e=>sk(e.message)))},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}function Pk(e,t,n){const o=function(e){function t(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Og:mu).scaleBy(Nk(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,(()=>{o(!0)})),t):o(!1)}))}function n(t,n,o,a){return new Promise((i=>{var r;const{x:s,y:l}=db({x:-t,y:-n},e.translateExtent),u=ju.translate(-s,-l).scale(o);e.d3Selection&&e.d3Zoom?null==(r=e.d3Zoom)||r.interpolate("linear"===(null==a?void 0:a.interpolate)?Og:mu).transform(Nk(e.d3Selection,null==a?void 0:a.duration,null==a?void 0:a.ease,(()=>{i(!0)})),u):i(!1)}))}return r((()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,e),zoomOut:e=>t(1/1.2,e),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Og:mu).scaleTo(Nk(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>n(e.x,e.y,e.zoom,t),setTransform:(e,t)=>n(e.x,e.y,e.zoom,t),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:hc,includeHiddenNodes:!1,duration:0})=>{var o,a;const i=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!n.hidden)&&(!(null==(o=t.nodes)?void 0:o.length)||(null==(a=t.nodes)?void 0:a.length)&&t.nodes.includes(n.id))&&i.push(n);if(!i.length)return Promise.resolve(!1);const{x:r,y:s,zoom:l}=Pb(Tb(i),e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??hc);return n(r,s,l,t)},setCenter:(t,o,a)=>{const i=void 0!==(null==a?void 0:a.zoom)?a.zoom:e.maxZoom;return n(e.dimensions.width/2-t*i,e.dimensions.height/2-o*i,i,a)},fitBounds:(t,o={padding:hc})=>{const{x:a,y:i,zoom:r}=Pb(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding??hc);return n(a,i,r,o)},project:t=>xb(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return xb({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return kb({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:vc))}(e),a=t=>{const n=t??[];e.hooks.updateNodeInternals.trigger(n)},i=t=>Ab(t,e.edges),s=e=>{if(e)return t.value.get(e)},l=e=>{if(e)return n.value.get(e)},u=(o,a)=>{const i=new Set,r=new Set;for(const e of o)mb(e)?i.add(e.id):fb(e)&&r.add(e.id);const s=Wb(t.value,i,!0),l=Wb(n.value,r);if(e.multiSelectionActive){for(const e of i)s.push($b(e,a));for(const e of r)l.push($b(e,a))}s.length&&e.hooks.nodesChange.trigger(s),l.length&&e.hooks.edgesChange.trigger(l)},c=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},d=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},p=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},f=t=>{const n=t instanceof Function?t(e.nodes):t;(e.initialized||n.length)&&(e.nodes=fk(n,s,e.hooks.error.trigger))},m=t=>{const o=t instanceof Function?t(e.edges):t;if(!e.initialized&&!o.length)return;const a=vk(o,e.isValidConnection,s,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);hk(e.connectionLookup,n.value,a),e.edges=a},h=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;(e.initialized||n.length)&&(f(n.filter(mb)),m(n.filter(fb)))},y=e=>{const t=yb((n=e).width)&&yb(n.height)&&yb(n.x)&&yb(n.y);var n;const o=t?null:hb(e)?e:s(e.id);return t||o?[t?e:sb(o),o,t]:[null,null,t]},v=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];dk(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const a=n.modelValue||n.nodes||n.edges?[]:void 0;a&&(n.modelValue&&a.push(...n.modelValue),n.nodes&&a.push(...n.nodes),n.edges&&a.push(...n.edges),h(a));for(const i of Object.keys(n)){const t=i,a=n[t];![...gc,...o].includes(t)&&dk(a)&&(e[t]=a)}Vh((()=>e.d3Zoom)).not.toBeNull().then((()=>{dk(n.maxZoom)&&d(n.maxZoom),dk(n.minZoom)&&c(n.minZoom),dk(n.translateExtent)&&p(n.translateExtent)})),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var a,i;const r=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){const n=s(e.parentNode);t.position={x:t.position.x-((null==(a=null==n?void 0:n.computedPosition)?void 0:a.x)??0),y:t.position.y-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.y)??0)}}r.push(t)}(null==r?void 0:r.length)&&e.hooks.nodesChange.trigger(r)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const a=window.getComputedStyle(n),{m22:i}=new window.DOMMatrixReadOnly(a.transform),r=[];for(const e of t){const t=e,n=s(t.id);if(n){const e=ub(t.nodeElement);if(e.width&&e.height&&(n.dimensions.width!==e.width||n.dimensions.height!==e.height||t.forceUpdate)){const o=t.nodeElement.getBoundingClientRect();n.dimensions=e,n.handleBounds.source=uk("source",t.nodeElement,o,i,n.id),n.handleBounds.target=uk("target",t.nodeElement,o,i,n.id),r.push({id:n.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then((()=>{e.fitViewOnInitDone=!0})),r.length&&e.hooks.nodesChange.trigger(r)},setElements:h,setNodes:f,setEdges:m,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=fk(n,s,e.hooks.error.trigger),a=[];for(const e of o)a.push(Rb(e));a.length&&e.hooks.nodesChange.trigger(a)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=vk(n,e.isValidConnection,s,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),a=[];for(const e of o)a.push(Rb(e));a.length&&e.hooks.edgesChange.trigger(a)},removeNodes:(t,n=!0,o=!1)=>{const a=t instanceof Function?t(e.nodes):t,r=Array.isArray(a)?a:[a],l=[],u=[];function c(e){const t=i(e);for(const n of t)dk(n.deletable)&&!n.deletable||u.push(Vb(n.id,n.source,n.target,n.sourceHandle,n.targetHandle))}function d(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)l.push(jb(e.id));n&&c(o);for(const e of o)d(e.id)}}for(const e of r){const t="string"==typeof e?s(e):e;t&&(dk(t.deletable)&&!t.deletable||(l.push(jb(t.id)),n&&c([t]),o&&d(t.id)))}u.length&&e.hooks.edgesChange.trigger(u),l.length&&e.hooks.nodesChange.trigger(l)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],a=[];for(const e of o){const t="string"==typeof e?l(e):e;t&&(dk(t.deletable)&&!t.deletable||a.push(Vb("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(a)},findNode:s,findEdge:l,updateEdge:(t,o,a=!0)=>{const i=l(t.id);if(!i)return!1;const r=e.edges.indexOf(i),u=function(e,t,n,o,a){if(!t.source||!t.target)return a(new oc(tc.EDGE_INVALID,e.id)),!1;if(!n)return a(new oc(tc.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...r}=e;return{...r,id:o?bb(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}(t,o,i,a,e.hooks.error.trigger);if(u){const[t]=vk([u],e.isValidConnection,s,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map(((e,n)=>n===r?t:e)),hk(e.connectionLookup,n.value,[t]),t}return!1},updateEdgeData:(e,t,n={replace:!1})=>{const o=l(e);if(!o)return;const a="function"==typeof t?t(o):t;o.data=n.replace?a:{...o.data,...a}},updateNode:(t,n,o={replace:!1})=>{const a=s(t);if(!a)return;const i="function"==typeof n?n(a):n;o.replace?e.nodes.splice(e.nodes.indexOf(a),1,i):Object.assign(a,i)},updateNodeData:(e,t,n={replace:!1})=>{const o=s(e);if(!o)return;const a="function"==typeof t?t(o):t;o.data=n.replace?a:{...o.data,...a}},applyEdgeChanges:t=>{const o=Fb(t,e.edges);return hk(e.connectionLookup,n.value,o),o},applyNodeChanges:t=>Fb(t,e.nodes),addSelectedElements:e=>{u(e,!0)},addSelectedNodes:o=>{if(e.multiSelectionActive){const t=o.map((e=>$b(e.id,!0)));e.hooks.nodesChange.trigger(t)}else e.hooks.nodesChange.trigger(Wb(t.value,new Set(o.map((e=>e.id))),!0)),e.hooks.edgesChange.trigger(Wb(n.value))},addSelectedEdges:o=>{if(e.multiSelectionActive){const t=o.map((e=>$b(e.id,!0)));e.hooks.edgesChange.trigger(t)}else e.hooks.edgesChange.trigger(Wb(n.value,new Set(o.map((e=>e.id))))),e.hooks.nodesChange.trigger(Wb(t.value,new Set,!0))},setMinZoom:c,setMaxZoom:d,setTranslateExtent:p,setNodeExtent:t=>{e.nodeExtent=t,a()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return u([],!1);const n=t.reduce(((e,t)=>{const n=$b(t.id,!1);return mb(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map((e=>(e.selected=!1,$b(e.id,!1))));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map((e=>(e.selected=!1,$b(e.id,!1))));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:v,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[a,i,r]=y(t);if(!a)return[];const s=[];for(const l of o||e.nodes){if(!(r||l.id!==i.id&&l.computedPosition))continue;const e=sb(l),t=lb(e,a);(n&&t>0||t>=e.width*e.height||t>=Number(a.width)*Number(a.height))&&s.push(l)}return s},getIncomers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return wb(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>fb(e)&&e.target===o)).map((e=>n.find((t=>mb(t)&&t.id===e.source))))}(t,e.nodes,e.edges),getOutgoers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return wb(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>fb(e)&&e.source===o)).map((e=>n.find((t=>mb(t)&&t.id===e.target))))}(t,e.nodes,e.edges),getConnectedEdges:i,getHandleConnections:({id:t,type:n,nodeId:o})=>{var a;const i=t?`-${n}-${t}`:`-${n}`;return Array.from((null==(a=e.connectionLookup.get(`${o}${i}`))?void 0:a.values())??[])},isNodeIntersecting:(e,t,n=!0)=>{const[o]=y(e);if(!o)return!1;const a=lb(o,t);return n&&a>0||a>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:a,d3Selection:i,translateExtent:r}=e;if(!a||!i||!t.x&&!t.y)return!1;const s=ju.translate(n.x+t.x,n.y+t.y).scale(n.zoom),l=[[0,0],[o.width,o.height]],u=a.constrain()(s,l,r),c=e.viewport.x!==u.x||e.viewport.y!==u.y||e.viewport.zoom!==u.k;return a.transform(i,u),c},fitView:e=>o.value.fitView(e),zoomIn:e=>o.value.zoomIn(e),zoomOut:e=>o.value.zoomOut(e),zoomTo:(e,t)=>o.value.zoomTo(e,t),setViewport:(e,t)=>o.value.setViewport(e,t),setTransform:(e,t)=>o.value.setTransform(e,t),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(e,t,n)=>o.value.setCenter(e,t,n),fitBounds:(e,t)=>o.value.fitBounds(e,t),project:e=>o.value.project(e),screenToFlowCoordinate:e=>o.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>o.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const o of e.nodes){const{computedPosition:e,handleBounds:n,selected:a,dimensions:i,isParent:r,resizing:s,dragging:l,events:u,...c}=o;t.push(c)}for(const o of e.edges){const{selected:e,sourceNode:t,targetNode:a,events:i,...r}=o;n.push(r)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise((n=>{const{nodes:a,edges:i,position:r,zoom:s,viewport:l}=t;a&&f(a),i&&m(i);const[u,c]=(null==l?void 0:l.x)&&(null==l?void 0:l.y)?[l.x,l.y]:r??[null,null];if(u&&c){const t=(null==l?void 0:l.zoom)||s||e.viewport.zoom;return Vh((()=>o.value.viewportInitialized)).toBe(!0).then((()=>{o.value.setViewport({x:u,y:c,zoom:t}).then((()=>{n(!0)}))}))}n(!0)})),updateNodeInternals:a,viewportHelper:o,$reset:()=>{const t=_k();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const n=ju.translate(t.defaultViewport.x??0,t.defaultViewport.y??0).scale(cb(t.defaultViewport.zoom??1,t.minZoom,t.maxZoom)),o=e.viewportRef.getBoundingClientRect(),a=[[0,0],[o.width,o.height]],i=e.d3Zoom.constrain()(n,a,t.translateExtent);e.d3Zoom.transform(e.d3Selection,i)}v(t)},$destroy:()=>{}}}function Ck({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,i=n<e?n+a:n-a,r=Math.abs(o-t)/2;return[i,o<t?o+r:o-r,a,r]}function Ok({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:i,targetControlX:r,targetControlY:s}){const l=.125*e+.375*a+.375*r+.125*n,u=.125*t+.375*i+.375*s+.125*o;return[l,u,Math.abs(l-e),Math.abs(u-t)]}function Mk(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Dk({pos:e,x1:t,y1:n,x2:o,y2:a,c:i}){let r,s;switch(e){case Vu.Left:r=t-Mk(t-o,i),s=n;break;case Vu.Right:r=t+Mk(o-t,i),s=n;break;case Vu.Top:r=t,s=n-Mk(n-a,i);break;case Vu.Bottom:r=t,s=n+Mk(a-n,i)}return[r,s]}function Lk(e){const{sourceX:t,sourceY:n,sourcePosition:o=Vu.Bottom,targetX:a,targetY:i,targetPosition:r=Vu.Top,curvature:s=.25}=e,[l,u]=Dk({pos:o,x1:t,y1:n,x2:a,y2:i,c:s}),[c,d]=Dk({pos:r,x1:a,y1:i,x2:t,y2:n,c:s}),[p,f,m,h]=Ok({sourceX:t,sourceY:n,targetX:a,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${a},${i}`,p,f,m,h]}function Bk({pos:e,x1:t,y1:n,x2:o,y2:a}){let i,r;switch(e){case Vu.Left:case Vu.Right:i=.5*(t+o),r=n;break;case Vu.Top:case Vu.Bottom:i=t,r=.5*(n+a)}return[i,r]}function Fk(e){const{sourceX:t,sourceY:n,sourcePosition:o=Vu.Bottom,targetX:a,targetY:i,targetPosition:r=Vu.Top}=e,[s,l]=Bk({pos:o,x1:t,y1:n,x2:a,y2:i}),[u,c]=Bk({pos:r,x1:a,y1:i,x2:t,y2:n}),[d,p,f,m]=Ok({sourceX:t,sourceY:n,targetX:a,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${s},${l} ${u},${c} ${a},${i}`,d,p,f,m]}function $k(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Rk({source:e,sourcePosition:t=Vu.Bottom,target:n,targetPosition:o=Vu.Top,center:a,offset:i}){const r=Dc[t],s=Dc[o],l={x:e.x+r.x*i,y:e.y+r.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},c=function({source:e,sourcePosition:t=Vu.Bottom,target:n}){return t===Vu.Left||t===Vu.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}({source:l,sourcePosition:t,target:u}),d=0!==c.x?"x":"y",p=c[d];let f,m,h;const y={x:0,y:0},v={x:0,y:0},[g,w,b,k]=Ck({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*s[d]==-1){m=a.x??g,h=a.y??w;const e=[{x:m,y:l.y},{x:m,y:u.y}],t=[{x:l.x,y:h},{x:u.x,y:h}];f=r[d]===p?"x"===d?e:t:"x"===d?t:e}else{const a=[{x:l.x,y:u.y}],c=[{x:u.x,y:l.y}];if(f="x"===d?r.x===p?c:a:r.y===p?a:c,t===o){const t=Math.abs(e[d]-n[d]);if(t<=i){const o=Math.min(i-1,i-t);r[d]===p?y[d]=(l[d]>e[d]?-1:1)*o:v[d]=(u[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=r[d]===s[e],n=l[e]>u[e],o=l[e]<u[e];(1===r[d]&&(!t&&n||t&&o)||1!==r[d]&&(!t&&o||t&&n))&&(f="x"===d?a:c)}const g={x:l.x+y.x,y:l.y+y.y},w={x:u.x+v.x,y:u.y+v.y};Math.max(Math.abs(g.x-f[0].x),Math.abs(w.x-f[0].x))>=Math.max(Math.abs(g.y-f[0].y),Math.abs(w.y-f[0].y))?(m=(g.x+w.x)/2,h=f[0].y):(m=f[0].x,h=(g.y+w.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...f,{x:u.x+v.x,y:u.y+v.y},n],m,h,b,k]}function jk(e){const{sourceX:t,sourceY:n,sourcePosition:o=Vu.Bottom,targetX:a,targetY:i,targetPosition:r=Vu.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}=e,[d,p,f,m,h]=Rk({source:{x:t,y:n},sourcePosition:o,target:{x:a,y:i},targetPosition:r,center:{x:l,y:u},offset:c});return[d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?function(e,t,n,o){const a=Math.min($k(e,t)/2,$k(t,n)/2,o),{x:i,y:r}=t;if(e.x===i&&i===n.x||e.y===r&&r===n.y)return`L${i} ${r}`;if(e.y===r)return`L ${i+a*(e.x<n.x?-1:1)},${r}Q ${i},${r} ${i},${r+a*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${r+a*(e.y<n.y?-1:1)}Q ${i},${r} ${i+a*s},${r}`}(d[n-1],t,d[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),p,f,m,h]}function Vk(e){const t=Wc.getInstance(),n=u(),o="object"==typeof e,a=o?e:{id:e},i=a.id,r=i??(null==n?void 0:n.vueFlowId);let s;if(n){const e=he(uc,null);null==e||r&&e.id!==r||(s=e)}if(s||r&&(s=t.get(r)),!s||r&&s.id!==r){const e=i??t.getId(),o=t.create(e,a);s=o,(n??d(!0)).run((()=>{F(o.applyDefault,((e,t,n)=>{const a=e=>{o.applyNodeChanges(e)},i=e=>{o.applyEdgeChanges(e)};e?(o.onNodesChange(a),o.onEdgesChange(i)):(o.hooks.value.nodesChange.off(a),o.hooks.value.edgesChange.off(i)),n((()=>{o.hooks.value.nodesChange.off(a),o.hooks.value.edgesChange.off(i)}))}),{immediate:!0}),Dh((()=>{if(s){const e=t.get(s.id);e?e.$destroy():sk(`No store instance found for id ${s.id} in storage.`)}}))}))}else o&&s.setState(a);if(n&&(te(uc,s),n.vueFlowId=s.id),o){const e=p();"VueFlow"!==(null==e?void 0:e.type.name)&&s.emits.error(new oc(tc.USEVUEFLOW_OPTIONS))}return s}function Wk(e,t,n){return n===Vu.Left?e-t:n===Vu.Right?e+t:e}function zk(e,t,n){return n===Vu.Top?e-t:n===Vu.Bottom?e+t:e}function Uk(e){return[xd(e[0],16),xd(e[1],16)]}function Gk({x:e,y:t,zoom:n},{width:o,height:a}){return{xMin:-e/n,yMin:-t/n,xMax:(o-e)/n,yMax:(a-t)/n}}function Hk(e){return JSON.stringify([e.search||"",[...e.categories].sort()])}function Yk(e,t){return e.hasOwnProperty(t)}function qk(e,t){const{extraProps:n,extraPropValues:o}=e,a=function(e){try{const t=Vt(e.replace(/\\[^`]/g,"\\\\"));if(1===t.length)return{description:t[0].description}}catch(t){}return null}(t);if(a)for(const[i,r]of Object.entries(a))Yk(n,i)&&(n[i].initialValue===r?delete o[i]:o[i]=r)}function Xk(e){return e.startsWith(`={{ ${ya} $fromAI(`)}function Jk({router:e,workflowState:t,onSaved:n}){const o=xm(),a=Ks(),i=Ah(),r=Ee(),s=vm(),l=Vs(),u=t??ix(),c=Md(),d=Oh(),p=rx(),f=sx(),m=Td(),h=zd(),{getWorkflowDataToSave:y,checkConflictingWebhooks:v,getWorkflowProjectRole:g}=Sx(),w=Bd(),b=Fd();function k(t){t(e.resolve({name:Qo.WORKFLOW,params:{name:s.workflow.id}}))}function x(e,t){const n=e[t];return Array.isArray(n)?n[0]??void 0:null!==n?n:void 0}async function I({id:t}={},a=!0,c=!1,f=!1){if(dl().preferences.branchReadOnly)return!1;const m=pl().isLoading,v=t??x(e.currentRoute.value.params,"name"),b=x(e.currentRoute.value.query,"parentFolderId"),k=x(e.currentRoute.value.query,"uiContext");if(w.pendingSave){if(f)return!0;c||await w.pendingSave}const E=(async()=>{const x=v?l.getWorkflowById(v):null;if(!v||!x?.id)return!!(await S({parentFolderId:b,uiContext:k,autosaved:f},a));try{if(!c&&m)return!0;o.addActiveAction("workflowSaving");const e=o.dirtyStateSetCount,t=await y();if(t.id!==v)throw new Error("Attempted to save a workflow different from the current workflow");t.versionId=s.workflowVersionId,t.aiBuilderAssisted=h.getAiBuilderMadeEdits(),t.expectedChecksum=s.workflowChecksum,t.autosaved=f;const a=await s.updateWorkflow(v,t,c);if(!a.checksum)throw new Error("Failed to update workflow");return s.setWorkflowVersionData({versionId:a.versionId,name:null,description:null},a.checksum),u.setWorkflowProperty("updatedAt",a.updatedAt),o.dirtyStateSetCount===e&&o.markStateClean(),o.removeActiveAction("workflowSaving"),Ch().run("workflow.afterUpdate",{workflowData:a}),h.resetAiBuilderMadeEdits(),w.resetRetry(),n?.(!1),!0}catch(E){if(console.error(E),o.removeActiveAction("workflowSaving"),100===E.errorCode){if(p.track("User attempted to save locked workflow",{workflowId:v,sharing_role:g(v)}),!w.conflictModalShown){f&&w.setConflictModalShown(!0);const n=e.resolve({name:Qo.WORKFLOW,params:{name:v}}).href;if("confirm"===await i.confirm(r.baseText("workflows.concurrentChanges.confirmMessage.message",{interpolate:{url:n}}),r.baseText("workflows.concurrentChanges.confirmMessage.title"),{confirmButtonText:r.baseText("workflows.concurrentChanges.confirmMessage.confirmButtonText"),cancelButtonText:r.baseText("workflows.concurrentChanges.confirmMessage.cancelButtonText")}))return await I({id:t},a,!0)}if(!f)return!1}if(f){w.incrementRetry(),w.setLastError(E.message);const e=w.getRetryDelay();return w.setRetrying(!0),setTimeout((()=>{w.setRetrying(!1),o.stateIsDirty&&T()}),e),d.showMessage({title:r.baseText("workflowHelpers.showMessage.title"),message:r.baseText("generic.autosave.retrying",{interpolate:{error:E.message,retryIn:`${Math.ceil(e/1e3)}s`}}),type:"error",duration:e}),!1}return d.showMessage({title:r.baseText("workflowHelpers.showMessage.title"),message:E.message,type:"error"}),!1}})();w.setPendingSave(E);try{return await E}finally{w.pendingSave===E&&w.setPendingSave(null)}}async function S({name:t,tags:a,resetWebhookUrls:i,resetNodeIds:h,openInNewWindow:g,parentFolderId:w,uiContext:b,requestNewId:k,data:x,autosaved:I}={},S=!0){try{o.addActiveAction("workflowSaving");const r=o.dirtyStateSetCount,E=x||await y(),T={};k&&delete E.id,h&&(E.nodes=E.nodes.map((e=>(f.assignNodeId(e),e)))),i&&(E.nodes=E.nodes.map((e=>{if(e.webhookId){const t=f.assignWebhookId(e);Mo(e.parameters.path)||(e.parameters.path=t),T[e.name]=e.webhookId}return e}))),t&&(E.name=t.trim()),a&&(E.tags=a),w&&(E.parentFolderId=w),b&&(E.uiContext=b),I&&(E.autosaved=I);const N=await s.createNewWorkflow(E);if(l.addWorkflow(N),c.onNewWorkflowSave(N.id),g){const t=e.resolve({name:Qo.WORKFLOW,params:{name:N.id}});return window.open(t.href,"_blank"),o.removeActiveAction("workflowSaving"),n?.(!0),N.id}if(null!==N.activeVersionId){const e=await v(N.id);e&&(N.active=!1,N.activeVersionId=null,d.showMessage({title:"Conflicting Webhook Path",message:`Workflow set to inactive: Live webhook in another workflow uses same path as node '${e.trigger.name}'.`,type:"error"}))}u.setActive(N.activeVersionId),u.setWorkflowId(N.id),s.setWorkflowVersionData({versionId:N.versionId,name:null,description:null},N.checksum),u.setWorkflowProperty("updatedAt",N.updatedAt),i&&Object.keys(T).forEach((e=>{const t={key:"webhookId",value:T[e],name:e};u.setNodeValue(t)}));const A=e.currentRoute.value,_=A.query.templateId;return _&&p.track("User saved new workflow from template",{template_id:Ur(String(_)),workflow_id:N.id,wf_template_repo_session_id:m.previousSessionId}),S&&await e.replace({name:A.name,params:{...A.params},query:{...A.query,new:void 0}}),o.removeActiveAction("workflowSaving"),o.dirtyStateSetCount===r&&o.markStateClean(),Ch().run("workflow.afterUpdate",{workflowData:N}),n?.(!0),N.id}catch(E){return o.removeActiveAction("workflowSaving"),d.showMessage({title:r.baseText("workflowHelpers.showMessage.title"),message:E.message,type:"error"}),null}}const E=Ie((()=>{w.autoSaveState!==aa.Idle&&(w.pendingSave||(w.setAutoSaveState(aa.InProgress),(async()=>{try{await I({},!0,!1,!0)}finally{w.autoSaveState===aa.InProgress&&w.setAutoSaveState(aa.Idle),o.stateIsDirty&&!w.isRetrying&&(w.setAutoSaveState(aa.Scheduled),E())}})()))}),Wo(kn.API.AUTOSAVE),{maxWait:Wo(kn.API.AUTOSAVE_MAX_WAIT)}),T=()=>{w.pendingSave||w.isRetrying||b.isOnline&&(w.setAutoSaveState(aa.Scheduled),E())};return F((()=>b.isOnline),((e,t)=>{e&&!t&&o.stateIsDirty&&T()})),{promptSaveUnsavedWorkflowChanges:async function(e,{confirm:t=(async()=>!0),cancel:n=(async()=>{})}={}){if(o.stateIsDirty&&!s.workflow.isArchived&&qo(s.workflow.scopes).workflow.update)switch(await i.confirm(r.baseText("generic.unsavedWork.confirmMessage.message"),{title:r.baseText("generic.unsavedWork.confirmMessage.headline"),type:"warning",confirmButtonText:r.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),cancelButtonText:r.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),showClose:!0})){case Nn:return void(await I({},!1)?(await a.showNpsSurveyIfPossible(),o.markStateClean(),e(await t())):k(e));case no:return await n(),o.markStateClean(),void e();case ka:return void(s.isWorkflowSaved[s.workflowId]&&k(e))}else e()},saveCurrentWorkflow:I,saveAsNewWorkflow:S,autoSaveWorkflow:T,cancelAutoSave:()=>{var e;"function"==typeof(e=E)&&"cancel"in e&&"function"==typeof e.cancel&&E.cancel(),w.setAutoSaveState(aa.Idle)}}}function Kk(e){const{releaseChannel:t}=rr().settings;return function(e={}){const{releaseChannel:t,windowRef:n}=e,o=t&&"stable"!==t?`${$d}[${t.toUpperCase()}]`:$d,a=v(void 0),i=e=>{const t=[e||Rd,o];(n?.value?.document??document).title=t.join(" - ")};return{set:i,reset:()=>{a.value=void 0,i("")},setDocumentTitle:(e,t)=>{a.value=t;let n="";"EXECUTING"===t?n="":"IDLE"===t?n="":"AI_BUILDING"===t?n="[Building]":"AI_DONE"===t&&(n="[Done]"),i(`${n} ${e}`)},getDocumentState:()=>a.value}}({releaseChannel:t,windowRef:e})}function Zk(e={}){const{cooldownMs:t=$o,maxDismissals:n=jd}=e,o=ve($n,{lastDismissedAt:null,dismissCount:0},{writeDefaults:!1}),a=r((()=>"undefined"!=typeof Notification)),i=r((()=>"granted"===Vd.value)),s=r((()=>"denied"===Vd.value)),l=r((()=>!!o.value.lastDismissedAt&&Date.now()-o.value.lastDismissedAt<t)),u=r((()=>o.value.dismissCount>=n)),c=r((()=>a.value&&"default"===Vd.value&&!l.value&&!u.value));function d(){"undefined"!=typeof Notification&&(Vd.value=Notification.permission)}return{permissionState:Vd,isSupported:a,isEnabled:i,isDenied:s,isInCooldown:l,canPrompt:c,requestPermission:async function(){if(d(),"granted"===Vd.value)return{permission:"granted",wasRequested:!1};if("denied"===Vd.value)return{permission:"denied",wasRequested:!1};if(l.value||u.value)return{permission:Vd.value,wasRequested:!1};try{const e=await Notification.requestPermission();return Vd.value=e,{permission:e,wasRequested:!0}}catch{return d(),{permission:Vd.value,wasRequested:!0}}},recordDismissal:function(){o.value={lastDismissedAt:Date.now(),dismissCount:o.value.dismissCount+1}},resetMetadata:function(){o.value={lastDismissedAt:null,dismissCount:0}},refreshPermissionState:d,showNotification:function(e,t){return i.value&&a.value?new Notification(e,t):null},metadata:r((()=>o.value))}}function Qk(e,t,n,o){return`${e}_r${t}_o${n}_i${o}`}function ex(e,t,n,o){if(e.size>=Ud)throw Error();e.data[t]=e.data[t]||[];const a=n.input||0,i=o[a]?.previousNode;if(!i)return e.data[t].push([t]),void e.size++;const r=o[a]?.previousNodeOutput||0,s=Qk(i,o[a]?.previousNodeRun||0,r,n.item);e.data[s]||(e.data[s]=[[s]],e.size++),e.data[s]?.forEach((n=>{e.data[t]?.push([...n,t]),e.size++}))}function tx(e,t,n,o,a,i){const r=`${e}_r${t}`;if(o.has(r))return;if(o.add(r),i.has(e))return;const s=n[e];if(!Array.isArray(s))return;const l=s[t];if(!l?.data?.main)return;const u=l.source||[];u.forEach((e=>{e?.previousNode&&tx(e.previousNode,e.previousNodeRun??0,n,o,a,i)})),(l.data.main||[]).forEach(((n,o)=>{n&&n.forEach(((n,i)=>{const r=Qk(e,t,o,i);if(!n.pairedItem)return void(a.data[r]=[]);const s=n.pairedItem;Array.isArray(s)?s.forEach((e=>{ex(a,r,e,u)})):ex(a,r,"object"!=typeof s?{item:s}:s,u)}))}))}function nx(e){if(!e?.data?.resultData?.runData)return{};const t=e.data.resultData.runData;if(function(e){let t=0;for(const n in e)for(const o of e[n]){const e=o.data;if(e)for(const n in e)t+=e[n].reduce(((e,t)=>t?e+t.length:e),0)}return t}(t)>1e3)return{};const n={size:0,data:{}};try{const o=new Set,a=new Set(Object.keys(e.data.resultData.pinData??{}));Object.keys(t).forEach((e=>{t[e].forEach(((i,r)=>{tx(e,r,t,o,n,a)}))}))}catch{return{}}return function(e){const t={};return Object.keys(e.data).forEach((n=>{e.data[n]?.forEach((e=>{e.forEach((e=>{e!==n&&(t[e]=t[e]||new Set,t[e].add(n),t[n]=t[n]||new Set,t[n].add(e))}))}))})),t}(n)}function ox(){const e=v([]),t=v(null);return{executingNode:e,lastAddedExecutingNode:t,addExecutingNode:function(n){e.value.push(n),t.value=n},removeExecutingNode:function(t){const n=e.value.indexOf(t);-1!==n&&e.value.splice(n,1)},isNodeExecuting:function(t){return e.value.includes(t)},clearNodeExecutionQueue:function(){e.value=[],t.value=null}}}function ax(){const e=vm(),t=Vs(),n=ip(),o=xm(),a=qa(),i=um();function r(n){n.setStateDirty&&o.markStateDirty("metadata"),e.workflow.name=n.newName,e.workflowObject.name=n.newName,e.workflow.id&&t.workflowsById[e.workflow.id]&&(t.workflowsById[e.workflow.id].name=n.newName)}function s(t){t?.setStateDirty&&o.markStateDirty(),e.workflow.connections={},e.workflowObject.setConnections({})}function l(t){t.setStateDirty&&o.markStateDirty(),t.removePinData&&(e.workflow.pinData={}),e.workflow.nodes.splice(0,e.workflow.nodes.length),e.workflowObject.setNodes(e.workflow.nodes),e.nodeMetadata={}}function u(t){t?.data?.waitTill&&delete t.data.resultData.runData[t.data.resultData.lastNodeExecuted],e.workflowExecutionData=t,e.workflowExecutionPairedItemMappings=nx(t),e.workflowExecutionResultDataLastUpdate=Date.now(),e.workflowExecutionStartedData=void 0}function c(){return e.workflow.nodes.forEach((e=>{e.issues=void 0})),!0}function d(t){e.workflow.active=null!==t,e.workflow.activeVersionId=t}function p(t){e.workflow.id=t||"",e.workflowObject.id=e.workflow.id}function f(t){e.private.setWorkflowSettings(t)}function m(t){e.private.setActiveExecutionId(t)}const h=Kk();function y(t,n){if(-1!==t){const o=e.workflow.nodes[t],a=!(0,dp.default)((0,pp.default)(o,Object.keys(n)),n);return a&&(Object.assign(o,n),e.workflow.nodes[t]=o,e.workflowObject.setNodes(e.workflow.nodes)),a}return!1}function v(t,n){const a=e.workflow.nodes.findIndex((e=>e.name===t.name));if(-1===a)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);const{name:i,parameters:r}=e.workflow.nodes[a];y(a,{parameters:n&&qm(t.value)?{...r,...t.value}:t.value})&&(o.markStateDirty(),e.nodeMetadata[i].parametersLastUpdatedAt=Date.now())}function g(t){const n=e.workflow.nodes.findIndex((e=>e.name===t.name));if(-1===n||!t.key)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);const a=y(n,{[t.key]:t.value});a&&o.markStateDirty(),a&&!["position","notes","notesInFlow"].includes(t.key)&&(e.nodeMetadata[e.workflow.nodes[n].name].parametersLastUpdatedAt=Date.now())}return{resetState:function(){s({setStateDirty:!1}),l({setStateDirty:!1,removePinData:!0}),u(null),c(),d(e.defaults.activeVersionId),p(""),r({newName:"",setStateDirty:!1}),f({...e.defaults.settings}),m(void 0),n.executingNode.executingNode.length=0,e.executionWaitingForWebhook=!1,zd().resetManualExecutionStats()},removeAllConnections:s,removeAllNodes:l,setWorkflowExecutionData:u,resetAllNodesIssues:c,setActive:d,setWorkflowId:p,setWorkflowName:r,setWorkflowSettings:f,setWorkflowProperty:function(t,n){e.workflow[t]=n},setActiveExecutionId:m,getNewWorkflowDataAndMakeShareable:async function(t,n,o){const i=await async function(t,n,o){let i={name:"",settings:{...e.defaults.settings}};try{const e={name:t,projectId:n,parentFolderId:o};i=await Um(a.restApiContext,zr(e)?void 0:e)}catch(s){i.name=t||"My workflow"}return r({newName:i.name,setStateDirty:!1}),i}(t,n,o);return function(){const{currentProject:t,personalProject:n}=ap(),o=t??n??{},a=t?.scopes??n?.scopes??[];e.workflow.homeProject=o,e.workflow.scopes=a}(),i},setWorkflowScopes:function(t){e.workflow.scopes=t},setWorkflowMetadata:function(t){e.workflow.meta=t},addToWorkflowMetadata:function(t){e.workflow.meta={...e.workflow.meta,...t}},setWorkflowPinData:function(t={}){const n=Object.keys(t).reduce(((e,n)=>(e[n]=t[n].map((e=>Xm(e)?e:{json:e})),e)),{});e.workflow.pinData=n,e.workflowObject.setPinData(n),Fr.emit("pin-data",n)},markExecutionAsStopped:function(t){if(m(void 0),n.executingNode.clearNodeExecutionQueue(),e.executionWaitingForWebhook=!1,h.setDocumentTitle(e.workflowName,"IDLE"),e.workflowExecutionStartedData=void 0,pm(),!e.workflowExecutionData)return;const o=e.workflowExecutionData.data?.resultData.runData??{};for(const e in o)o[e]=o[e].filter((({executionStatus:e})=>"success"===e));t&&(e.workflowExecutionData.status=t.status,e.workflowExecutionData.startedAt=t.startedAt,e.workflowExecutionData.stoppedAt=t.stoppedAt)},setNodeParameters:v,setLastNodeParameters:function(t){const n=(0,cp.default)(e.workflow.nodes,(e=>e.type===t.key)),o=i.getNodeType(n.type);if(!o)return;const a=po(o.properties,t.value,!0,!1,n,o);n&&v({value:a,name:n.name},!0)},setNodeValue:g,setNodePositionById:function(t,n){const o=e.workflow.nodes.find((e=>e.id===t));o&&g({name:o.name,key:"position",value:n})},setNodeIssue:function(t){const n=e.workflow.nodes.findIndex((e=>e.name===t.node));if(-1===n)return;const o=e.workflow.nodes[n];if(null===t.value){if(void 0===o.issues?.[t.type])return;const{[t.type]:e,...a}=o.issues;y(n,{issues:a})}else y(n,{issues:{...o.issues,[t.type]:t.value}})},updateNodeAtIndex:y,updateNodeById:function(t,n){const o=e.workflow.nodes.findIndex((e=>e.id===t));return-1!==o&&y(o,n)},updateNodeProperties:function(t){const n=e.workflow.nodes.findIndex((e=>e.name===t.name));if(-1!==n)for(const e of Object.keys(t.properties)){const a=e;y(n,{[e]:t.properties[a]})&&o.markStateDirty()}fp.emit("updateNodeProperties",[this,t])},resetParametersLastUpdatedAt:function(t){e.nodeMetadata[t]||(e.nodeMetadata[t]={pristine:!0}),e.nodeMetadata[t].parametersLastUpdatedAt=Date.now()},executingNode:n.executingNode}}function ix(){return he(Bt,(()=>ax()),!0)}function rx(){return yp}function sx(e={}){const t=Xp(),n=_s(),o=um(),a=vm(),i=e.workflowState??ix(),s=rr(),l=Ee(),u=pl(),c=v(!1),d=v(!1),p=v(!1),f=v(null),m=r((()=>a.workflowObject));function h(e){return Object.keys(e.parameters).includes("nodeCredentialType")}function y(e,t,n,a,i="displayOptions"){const r=a?.type?o.getNodeType(a.type,a.typeVersion):null;return oo(e,t,n,a,r,i)}function g(e){const t=a.getWorkflowRunData;if(!t?.hasOwnProperty(e.name))return!1;for(const n of t[e.name])if(void 0!==n.error)return!0;return!1}function w(e){return{credentials:{[e.name]:[l.baseText("nodeHelpers.credentialsUnset",{interpolate:{credentialType:e.displayName}})]}}}function b(e){const t=o.getNodeType(e.type,e.typeVersion);if(!t)return;const n=S(m.value,e,t);i.setNodeIssue({node:e.name,type:"input",value:n?.input?n.input:null})}function k(){const e=a.allNodes;for(const t of e)b(t)}function x(e){const t=E(e);let n=null;null!==t&&(n=t.credentials),i.setNodeIssue({node:e.name,type:"credentials",value:n})}function I(e,t){const n=t??o.getNodeType(e.type,e.typeVersion);if(null===n)return;const a=Ho(n.properties,e,n);let r=null;null!==a&&(r=a.parameters),i.setNodeIssue({node:e.name,type:"parameters",value:r})}function S(e,t,n){const o={},a=e.getNode(t.name);let i=[];return n&&a&&(i=sa(e,a,n)),i.forEach((n=>{"string"!=typeof n&&!0===n.required&&0===e.getParentNodes(t.name,n.type,1).length&&(o[n.type]=[l.baseText("nodeIssues.input.missing",{interpolate:{inputName:n.displayName||n.type}})])})),Object.keys(o).length?{input:o}:null}function E(e,n){const i=n??o.getNodeType(e.type,e.typeVersion);if(e.disabled)return null;if(!i?.credentials)return null;const r={};let s,u,c,d;const{authentication:p,genericAuthType:f,nodeCredentialType:m}=e.parameters;if("genericCredentialType"===p&&""!==f&&T(e,f)){const e=t.getCredentialTypeByName(f);return e?w(e):null}if(h(e)&&"predefinedCredentialType"===p&&""!==m&&void 0!==e.credentials){const n=t.getCredentialsByType(m),o=a.usedCredentials?.[e.credentials?.[m]?.id];if(function(e,t,n){if(!e.credentials||!n)return!1;const o=e.credentials[t];return!!o&&!n.find((e=>e.id===o.id))}(e,m,n)&&!o){const e=t.getCredentialTypeByName(m);return e?w(e):null}}if(h(e)&&"predefinedCredentialType"===p&&""!==m&&T(e,m)){const e=t.getCredentialTypeByName(m);return e?w(e):null}for(const o of i.credentials)if(y(e.parameters,o,"",e))if(u=t.getCredentialTypeByName(o.name),c=u?u.displayName:o.name,e.credentials?.[o.name]){if(d=e.credentials[o.name],"string"==typeof d&&(d={id:null,name:d}),s=t.getCredentialsByType(o.name),null===s&&(s=[]),d.id&&s.find((e=>e.id===d.id)))continue;const n=s.filter((e=>e.name===d.name));if(n.length>1){r[o.name]=[l.baseText("nodeIssues.credentials.notIdentified",{interpolate:{name:d.name,type:c}}),l.baseText("nodeIssues.credentials.notIdentified.hint")];continue}0===n.length&&(a.usedCredentials?.[d.id]||Mh(["rbac"],{rbac:{scope:"credential:read"}})||(r[o.name]=[l.baseText("nodeIssues.credentials.doNotExist",{interpolate:{name:d.name,type:c}}),l.baseText("nodeIssues.credentials.doNotExist.hint")]))}else o.required&&(r[o.name]=[l.baseText("nodeIssues.credentials.notSet",{interpolate:{type:i.displayName}})]);return 0===Object.keys(r).length?null:{credentials:r}}function T(e,t){return!e.credentials||!Object.keys(e.credentials).includes(t)}function N(e,t=0,n){return A(e,n)?.[t]??null}function A(e,t){return(t?.resultData.runData??a.getWorkflowRunData)?.[e]??null}function _(e,t,n=ta.Main){return e?.[n]?.[t]??[]}const P={"n8n-nodes-base.code":{mode:[void 0,"runOnceForAllItems"]},"n8n-nodes-base.executeWorkflow":{mode:[void 0,"once"]},"n8n-nodes-base.crateDb":{operation:[void 0,"update"]},"n8n-nodes-base.timescaleDb":{operation:[void 0,"update"]},"n8n-nodes-base.microsoftSql":{operation:[void 0,"update","delete"]},"n8n-nodes-base.questDb":{operation:[void 0]},"n8n-nodes-base.mongoDb":{operation:["insert","update"]},"n8n-nodes-base.redis":{operation:[void 0]}};return{hasProxyAuth:h,isCustomApiCallSelected:function(e){const{parameters:t}=e;if(!qm(t))return!1;if("resource"in t||"operation"in t){const{resource:e,operation:n}=t;return nh(e)&&e.includes("__CUSTOM_API_CALL__")||nh(n)&&n.includes("__CUSTOM_API_CALL__")}return!1},isNodeExecutable:function(e,t,n){const a=e?o.getNodeType(e.type,e.typeVersion):null;if(e&&a){const t=m.value.getNode(e.name),n=!!e&&o.isTriggerNode(e.type),i=!!e&&o.isToolNode(e.type);if(t){const e=sa(m.value,t,a);if(!Co(e).includes(ta.Main)&&!i&&!n)return!1}}return Boolean(t||n.length>0)},getForeignCredentialsIfSharingEnabled:function(e){if(!e||!s.isEnterpriseFeatureEnabled[jn.Sharing])return[];const t=a.usedCredentials;return Object.values(e).map((({id:e})=>e)).filter((e=>null!==e)).filter((e=>e in t&&!t[e]?.currentUserHasAccess))},displayParameter:y,getNodeIssues:function(e,t,n,o){const i=Object.keys(a.pinnedWorkflowData??{});let r=null;if(o=o??[],!0===t.disabled||i.includes(t.name))return null;if(null===e)o.includes("typeUnknown")||(r={typeUnknown:!0});else{if(o.includes("parameters")||(r=Ho(e.properties,t,e)),!o.includes("credentials")){const n=E(t,e);null===r?r=n:Lt(r,n)}const a=S(n,t,e);null===r?r=a:Lt(r,a)}return g(t)&&!o.includes("execution")&&(null===r&&(r={}),r.execution=!0),r},updateNodesInputIssues:k,updateNodesExecutionIssues:function(){const e=a.allNodes;for(const t of e)i.setNodeIssue({node:t.name,type:"execution",value:!!g(t)||null})},updateNodesParameterIssues:function(){const e=a.allNodes;for(const t of e)I(t)},updateNodeInputIssues:b,updateNodeCredentialIssuesByName:function(e){const t=a.getNodeByName(e);t&&x(t)},updateNodeCredentialIssues:x,updateNodeParameterIssuesByName:function(e){const t=a.getNodeByName(e);t&&I(t)},updateNodeParameterIssues:I,getBinaryData:function(e,t,n,o,a=ta.Main){if(null===t)return[];const i=e?.[t]?.[n]?.data;if(!i)return[];const r=_(i,o,a),s=[];for(let l=0;l<r.length;l++){const e=r[l]?.binary;void 0!==e&&s.push(e)}return s},disableNodes:function(e,{trackHistory:t=!1,trackBulk:o=!0}={}){const r=rx();t&&o&&n.startRecordingUndo();const s=e.some((e=>!e.disabled));for(const l of e){if(s===l.disabled)continue;const e={name:l.name,properties:{disabled:s}};r.track("User set node enabled status",{node_type:l.type,is_enabled:l.disabled,workflow_id:a.workflowId}),i.updateNodeProperties(e),a.clearNodeExecutionData(l.name),I(l),x(l),k(),t&&n.pushCommandToUndo(new As(l.name,!0===l.disabled,s,Date.now()))}t&&o&&n.stopRecordingUndo()},getNodeSubtitle:function(e,t,n){if(e){if(e.notesInFlow)return e.notes;if(void 0!==t?.subtitle)try{return n.expression.getSimpleParameterValue(e,t.subtitle,"internal",{},void 0,vn)}catch(o){return}if(void 0!==e.parameters.operation){const n=e.parameters.operation;if(null===t)return n;const o=t.properties.find((e=>"operation"===e.name));if(void 0===o)return n;if(void 0===o.options)return n;const a=o.options.find((t=>t.value===e.parameters.operation));return void 0===a?n:a.name}}},updateNodesCredentialsIssues:function(){const e=a.allNodes;let t;for(const n of e)t=E(n),i.setNodeIssue({node:n.name,type:"credentials",value:t?.credentials??null})},getLastRunIndexWithData:function(e,t=0,n=ta.Main,o){return(A(e,o)??[]).findLastIndex((e=>e.data&&_(e.data,t,n).length>0))},hasNodeExecuted:function(e){return A(e)?.some((({executionStatus:e})=>e&&["success","error"].includes(e)))??!1},getNodeInputData:function(e,t=0,n=0,o="output",a=ta.Main,i){if(!e)return[];const r=N(e.name,t,i);if(null===r)return[];let s=r.data;return"input"===o&&r.inputOverride&&(s=r.inputOverride),s?_(s,n,a):[]},matchCredentials:function(e){e.credentials&&Object.entries(e.credentials).forEach((([n,o])=>{const a=t.getCredentialsByType(n);if("string"==typeof o&&(o={id:null,name:o},d.value=!0),o.id){const t=o.id.toString(),i=a.find((e=>e.id===t));if(i)return void(i.name===o.name&&"number"!=typeof o.id||(e.credentials[n]={id:i.id,name:i.name},d.value=!0))}e.credentials[n]=o;const i=a.filter((e=>e.name===o.name));1===i.length&&(e.credentials[n].id=i[0].id,d.value=!0)}))},isInsertingNodes:c,credentialsUpdated:d,isProductionExecutionPreview:p,pullConnActiveNodeName:f,loadNodesProperties:async function(e){const t=o.allNodeTypes,n=[];t.forEach((t=>{const o=Array.isArray(t.version)?t.version:[t.version];e.find((e=>e.name===t.name&&o.includes(e.version)))&&!t.hasOwnProperty("properties")&&n.push({name:t.name,version:Array.isArray(t.version)?t.version.slice(-1)[0]:t.version})})),n.length>0&&(u.startLoading(),await o.getNodesInformation(n),u.stopLoading())},getNodeTaskData:N,assignNodeId:function(e){const t=window.crypto.randomUUID();return e.id=t,t},assignWebhookId:function(e){const t=window.crypto.randomUUID();return e.webhookId=t,t},isSingleExecution:function(e,t){const n=P[e];if(n){for(const e of Object.keys(n))if(!n[e].includes(t[e]))return!1;return!0}return!1},getNodeHints:function(e,t,n,o){const a=[];if(n?.hints?.length)for(const r of n.hints)if(r.displayCondition)try{let n;if(void 0===o)n=e.expression.getSimpleParameterValue(t,r.displayCondition,"internal",{})||!1;else{const{runExecutionData:a,runIndex:i,connectionInputData:s}=o;n=e.expression.getParameterValue(r.displayCondition,a??null,i,0,t.name,s,"manual",{})}if("string"==typeof n&&"true"===n.trim()&&(n=!0),"boolean"!=typeof n){console.warn(`Condition was not resolved as boolean in '${t.name}' node for hint: `,r.message);continue}n&&a.push(r)}catch(i){console.warn(`Could not calculate display condition in '${t.name}' node for hint: `,r.message)}else a.push(r);return a},nodeIssuesToString:function(e,t){const n=[];void 0!==e.execution&&n.push("Execution Error.");const o=["parameters","credentials","input"];let a,i;for(const r of o)if(void 0!==e[r])for(i of Object.keys(e[r]))for(a of e[r][i])n.push(a);return void 0!==e.typeUnknown&&(void 0!==t?n.push(`Node Type "${t.type}" is not known.`):n.push("Node Type is not known.")),n},getDefaultNodeName:function(e){const t=o.getNodeType(e.type,e.typeVersion);if(null===t)return null;const n=po(t?.properties,e.parameters??{},!0,!1,e.typeVersion?{typeVersion:e.typeVersion}:null,t);return An(n??{},t)}}}function lx(e){return e?.startsWith("n8n-creds-base")??!1}function ux(e){return e.split(".")[1]}function cx(e){return`${Un}.${e}`}function dx(e,t){const{httpRequestNode:n}=t??{};if(!e||!t||!n)return;const{docsUrl:o,name:a}=n,i=qt(e),r=e.iconUrl;return i.name=cx(t.name),i.extendsCredential=t.name,i.displayName=a??t.displayName,i.description="HTTP request",i.defaults.name=`${a} HTTP Request`,i.codex={...i.codex,alias:[],categories:[],subcategories:{}},i.credentials=[{name:t.name,required:!0}],t.icon??t.iconUrl?(i.icon=t.icon,i.iconUrl=t.iconUrl,i.badgeIconUrl=r):i.iconUrl=r,i.properties=e.properties.map((e=>{switch(e.name){case"authentication":return{...e,type:"hidden",default:"predefinedCredentialType"};case"nodeCredentialType":return{...e,type:"hidden",default:t.name};case"url":const o={...e};if("apiBaseUrl"in n){const{apiBaseUrl:t}=n;o.default=t,o.placeholder=t?`e.g. ${t}`:e.placeholder}else o.placeholder=n.apiBaseUrlPlaceholder;return o;default:return e}})),i.properties.splice(1,0,{type:"notice",displayName:we.baseText("ndv.httpRequest.credentialOnly.docsNotice",{interpolate:{nodeName:a,docsUrl:o}}),name:"httpVariantWarning",default:""}),i.properties.splice(4,0,{type:"credentials",displayName:"",name:"",default:""}),i}function px(e){return{getTags:async(t,n)=>await Va(t,"GET",e,n),createTag:async(t,n)=>await Va(t,"POST",e,n),updateTag:async(t,n,o)=>await Va(t,"PATCH",`${e}/${n}`,o),deleteTag:async(t,n)=>await Va(t,"DELETE",`${e}/${n}`)}}function fx(e,t="latest"){return`${e}@${t}`}function mx(e){return`${Ji.WORKFLOW_DOCUMENTS}/${e}`}function hx(e){return Ua(mx(e),(()=>{const[t,n]=e.split("@"),o=v([]);function a(e){if("setTags"===e.name)o.value=e.payload.tags;else if("addTags"===e.name){const t=new Set([...o.value,...e.payload.tags]);o.value=Array.from(t)}else"removeTag"===e.name&&(o.value=o.value.filter((t=>t!==e.payload.tagId)))}return{workflowId:t,workflowVersion:n,tags:f(o),setTags:function(e){a({name:"setTags",payload:{tags:e}})},addTags:function(e){a({name:"addTags",payload:{tags:e}})},removeTag:function(e){a({name:"removeTag",payload:{tagId:e}})}}}))()}async function yx(e,t={}){if("localResolve"in t&&t.localResolve)return await vx(e,t.workflow,t.connections,t.envVars,t.workflow.getNode(t.nodeName),t.execution,t.workflow.pinData,{inputNodeName:t.inputNode?.name,inputRunIndex:t.inputNode?.runIndex,inputBranchIndex:t.inputNode?.branchIndex,additionalKeys:t.additionalKeys});const n=vm();return await vx(e,n.workflowObject,n.connectionsBySourceNode,vp().variablesAsObject,hp().activeNode,n.workflowExecutionData,n.pinnedWorkflowData,t)}function vx(e,t,n,o,a,i,r,s={}){let l=s?.targetItem?.itemIndex||0;const u=a??t.getNode(s.contextNodeName||""),c={$execution:{id:vn,mode:"test",resumeUrl:vn,resumeFormUrl:vn},$vars:o,$tool:ga(u?.type)?{name:vn,parameters:vn}:void 0,$executionId:vn,$resumeWebhookUrl:vn,...s.additionalKeys};if(s.isForCredential)return t.expression.getParameterValue(e,null,0,l,"",[],"manual",c,void 0,!1,void 0,"");const d=ta.Main;let p=u;u&&(p=t.getParentMainInputNode(u)??null);const f=i?.data?.resultData.runData??null;let m=t.getParentNodes(p.name,d,1),h=s?.inputRunIndex??0;const y=t.getNodeConnectionIndexes(p.name,m[0]);if(s.targetItem&&s?.targetItem?.nodeName===p.name&&i){const e=function(e,t){if(!e?.data?.resultData?.runData)return[];const n=e.data.resultData.runData[t.nodeName]?.[t.runIndex],o=n?.source||[];if(0===o.length)return[];const a=n?.data?.main?.[t.outputIndex]?.[t.itemIndex];return void 0===a?.pairedItem?[]:(Array.isArray(a.pairedItem)?a.pairedItem:"object"==typeof a.pairedItem?[a.pairedItem]:[{item:a.pairedItem}]).map((e=>{const t=e.input||0;return{nodeName:o?.[t]?.previousNode,runIndex:o?.[t]?.previousNodeRun||0,itemIndex:e.item,outputIndex:o[t]?.previousNodeOutput||0}})).filter((e=>null!==e))}(i,s.targetItem);if(!e.length)return null;m=[e[0].nodeName],h=e[0].runIndex,l=e[0].itemIndex,y&&(y.sourceIndex=e[0].outputIndex)}else if(m=s.inputNodeName?[s.inputNodeName]:m,y&&(y.sourceIndex=s.inputBranchIndex??y.sourceIndex),void 0===s?.inputRunIndex&&null!==f&&m.length){const e=m.find((e=>f[e]));e&&(h=f[e].length-1)}let v=kx(n,m,p.name,d,h,r,i?.data?.resultData.runData??null,y);null===v&&p&&u?.name!==p.name&&(v=(0,xp.default)(Ix(n,[p.name],p.name,d,0,r,i?.data?.resultData.runData??null),["data",d,0],null));const g=i?.data??yt();if(null===v&&(v=[]),"n8n-nodes-base.httpRequest"===u?.type){const e={statusCode:200,headers:{},body:{}},t={headers:{},body:{},qs:{}};c.$pageCount=0,c.$response=(0,xp.default)(i,["data","executionData","contextData",`node:${u.name}`,"response"],e),c.$request=t}let w=s?.targetItem?.runIndex??0;void 0===s?.targetItem&&null!==f&&f[p.name]&&(w=f[p.name].length-1);let b=Ix(n,m,p.name,d,w,r,i?.data?.resultData.runData??null,h);return b.source||(b=Ix(n,m,p.name,d,h,r,i?.data?.resultData.runData??null)),t.expression.getParameterValue(e,g,w,l,u.name,v,"manual",c,b,!1,{},p.name)}async function gx(e,t,n={}){const o=new Set(e?.typeOptions?.loadOptionsDependsOn??[]),a=Object.entries(t),i=await Promise.all(a.map((async([e,t])=>{if(o.has(e))return[e,await yx(t,n)];try{return[e,await yx(t,n)]}catch(a){return[e,null]}})));return Object.fromEntries(i)}function wx(e,t,n){let o;if("downstream"===e)o=t.getChildNodes(n);else{if("upstream"!==e)throw new Error(`The direction "${e}" is not supported!`);o=t.getParentNodes(n)}let a=[];return o.forEach((e=>{a=[...a,e,...t.getParentNodes(e,"ALL_NON_MAIN")]})),[...new Set(a)]}function bx(){return vm().getNodeTypes()}function kx(e,t,n,o,a,i,r,s={sourceIndex:0,destinationIndex:0}){let l=null;const u=Ix(e,t,n,o,a,i,r);return t.length&&(!Object.keys(u.data).length||u.data[o].length<=s.sourceIndex?l=[]:(l=u.data[o][s.sourceIndex],null!==l&&(l=l.map(((e,t)=>({...e,pairedItem:{item:t,input:s.destinationIndex}})))))),l}function xx(e,t,n,o,a,i){const r=vm();return Ix(e,t,n,o,a,r.pinnedWorkflowData,r.getWorkflowRunData,i)}function Ix(e,t,n,o,a,i,r,s){const l=Jo(e),u={node:{},data:{},source:null};s=s??a;for(const c of t){const e=i?.[c];if(e)return u.data={main:[e]},u.source={main:[{previousNode:c}]},u;if(null===r)return u;if(r[c]&&!(r[c].length<=s)&&r[c][s]&&r[c][s].hasOwnProperty("data")&&r[c][s].data?.hasOwnProperty(o)){if(u.data=r[c][s].data,r[n]&&r[n][a])u.source={[o]:r[n][a].source};else{let e;if(l[n]?.main)e:for(const t of l[n].main)for(const n of t??[])if(n.type===ta.Main&&n.node===c){e=n.index;break e}u.source={[o]:[{previousNode:c,previousNodeOutput:e,previousNodeRun:s}]}}return u}u.data={}}return u}function Sx(){const e=um(),t=qa(),n=vm(),o=Vs(),a=ix(),i=kp(),r=xm(),s=sx(),l=ap(),u=bp(),c=Ee();async function d(){const e=n.allNodes,t=n.allConnections;let o;const a=[];for(let n=0;n<e.length;n++)o=p(e[n]),a.push(o);const i=n.workflowId?hx(fx(n.workflowId)):void 0,r=i?.tags?[...i.tags]:[],s={name:n.workflowName,nodes:a,pinData:n.pinnedWorkflowData,connections:t,active:n.isWorkflowActive,settings:n.workflow.settings,tags:r,versionId:n.workflow.versionId,meta:n.workflow.meta},l=n.workflowId;return l&&(s.id=l),s}function p(t){const n=["color","continueOnFail","credentials","disabled","issues","onError","notes","parameters","status"],o={parameters:{}};for(const e in t)"_"!==e.charAt(0)&&-1===n.indexOf(e)&&(o[e]=t[e]);const a=e.getNodeType(t.type,t.typeVersion);if(null!==a){const e=lx(a.name);e&&(o.type=to,o.extendsCredential=ux(a.name));const n=po(a.properties,t.parameters,e,!1,t,a);if(o.parameters=null!==n?n:{},void 0!==t.credentials&&void 0!==a.credentials){const e={};for(const n of Object.keys(t.credentials)){if(s.hasProxyAuth(t)||Object.keys(t.parameters).includes("genericAuthType")){e[n]=t.credentials[n];continue}const o=a.credentials.filter((e=>s.displayParameter(t.parameters,e,"",t))).find((e=>e.name===n));void 0!==o&&s.displayParameter(t.parameters,o,"",t)&&(e[n]=t.credentials[n])}0!==Object.keys(e).length&&(o.credentials=e)}}else o.credentials=t.credentials,o.parameters=t.parameters,void 0!==o.color&&(o.color=t.color);return!0===t.disabled&&(o.disabled=!0),!0===t.continueOnFail&&(o.continueOnFail=!0),"stopWorkflow"!==t.onError&&(o.onError=t.onError),[void 0,""].includes(t.notes)||(o.notes=t.notes),o}async function f(e,t,n=!0,o){if(void 0===e[t])return"empty";try{return await m(e[t],void 0,{contextNodeName:o},n)}catch(a){return c.baseText("nodeWebhooks.invalidExpression")}}async function m(e,t={},o={},a=!0){const i=await yx({__xxxxxxx__:e,...t},o);if(!i)return null;const r=i.__xxxxxxx__;if("object"==typeof r&&a){const e=r;return e?.isProxy&&e.toJSON?JSON.stringify(e.toJSON()):n.workflowObject.expression.convertObjectValueToString(r)}return r}function h(e){return"n8n-nodes-base.webhook"===e.type?!0===e.parameters.multipleMethods?e.parameters.httpMethod??["GET","POST"]:[e.parameters.httpMethod??"GET"]:["POST"]}function y(e){return"n8n-nodes-base.webhook"===e.type?e.parameters.path||e.webhookId:"n8n-nodes-base.formTrigger"===e.type?(e.parameters.options||{}).path??e.webhookId:"@n8n/n8n-nodes-langchain.chatTrigger"===e.type?`${e.webhookId}/chat`:`${e.webhookId}/webhook`}return{resolveParameter:yx,resolveRequiredParameters:gx,getConnectedNodes:wx,getNodeTypes:bx,connectionInputData:kx,executeData:xx,getNodeTypesMaxCount:function(){const t=n.allNodes,o={},a=e.allNodeTypes;for(const e of a)void 0!==e.maxNodes&&(o[e.name]={exist:0,max:e.maxNodes,nodeNames:[]});for(const e of t)void 0!==o[e.type]&&(o[e.type].exist+=1,o[e.type].nodeNames.push(e.name));return o},getNodeTypeCount:function(e){const t=n.allNodes;let o=0;for(const n of t)n.type===e&&o++;return o},getWorkflowDataToSave:d,getNodeDataToSave:p,getWebhookExpressionValue:f,getWebhookUrl:async function(e,o,a){const{nodeType:i,restartWebhook:r}=e;if(!0===r)return"form"===i?"$execution.resumeFormUrl":"$execution.resumeUrl";const s={test:{form:t.formTestUrl,mcp:t.mcpTestUrl,webhook:t.webhookTestUrl},production:{form:t.formUrl,mcp:t.mcpUrl,webhook:t.webhookUrl}}[a][i??"webhook"],l=n.workflowId,u=await f(e,"path",!0,o.name)??"",c=await f(e,"isFullPath",!0,o.name)||!1;return Lo(s,l,o,u,c)},resolveExpression:m,updateWorkflow:async function({workflowId:e,active:t},i=!1){let s={};const l=e===n.workflowId;if(l)s=i?{versionId:n.workflowVersionId}:await d();else{const{versionId:t}=await o.fetchWorkflow(e);s.versionId=t}void 0!==t&&(s.active=t);const u=await n.updateWorkflow(e,s);if(!u.checksum)throw new Error("Failed to update workflow");l&&(a.setActive(u.activeVersionId),r.markStateClean()),u.activeVersion?n.setWorkflowActive(e,u.activeVersion,l):n.setWorkflowInactive(e)},updateNodePositions:function(e,t){if(void 0===e.nodes)return;const n=[99999999,99999999];for(const a of e.nodes)(a.position[1]<n[1]||a.position[1]===n[1]&&a.position[0]<n[0])&&(n[0]=a.position[0],n[1]=a.position[1]);const o=[t[0]-n[0],t[1]-n[1]];for(const a of e.nodes)a.position[0]+=o[0],a.position[1]+=o[1]},removeForeignCredentialsFromWorkflow:function(e,t){(e.nodes??[]).forEach((e=>{e.credentials&&(e.credentials=Object.entries(e.credentials).reduce(((n,[o,a])=>{const i=t.some((e=>`${e.id}`==`${a.id}`));return a.id&&i&&(n[o]=e.credentials[o]),n}),{}))}))},getWorkflowProjectRole:function(e){const t=o.getWorkflowById(e);return t?.homeProject?.id!==l.personalProject?.id&&t?.id?t?.sharedWithProjects?.some((e=>e.id===l.personalProject?.id))?"sharee":"member":"owner"},initState:async function(e,s){const l=s??a;if(o.addWorkflow(e),l.setActive(e.activeVersionId),n.setIsArchived(e.isArchived),n.setDescription(e.description),l.setWorkflowId(e.id),l.setWorkflowName({newName:e.name,setStateDirty:r.stateIsDirty}),l.setWorkflowSettings(e.settings??{}),l.setWorkflowPinData(e.pinData??{}),n.setWorkflowVersionData({versionId:e.versionId,name:null,description:null},e.checksum),l.setWorkflowMetadata(e.meta),l.setWorkflowScopes(e.scopes),"activeVersion"in e&&n.setWorkflowActiveVersion(e.activeVersion??null),e.versionId)try{const o=await nr(t.restApiContext,e.id,e.versionId);n.setWorkflowVersionData({versionId:o.versionId,name:o.name,description:o.description})}catch{}e.usedCredentials&&n.setUsedCredentials(e.usedCredentials),e.sharedWithProjects&&i.setWorkflowSharedWith({workflowId:e.id,sharedWithProjects:e.sharedWithProjects});const c=e.tags??[],d=function(e){return e&&Array.isArray(e)?0===e.length?e:"object"==typeof e[0]&&"id"in e[0]?e.map((e=>e.id)):e:[]}(c),p=hx(fx(e.id));return p.setTags(d),u.upsertTags(c),{workflowDocumentStore:p}},getNodeParametersWithResolvedExpressions:async function(e){return await async function e(t,n){const o={};for(const i in t){const r=t[i],s=n?`${n}.${i}`:i;if("object"==typeof r&&null!==r)o[i]=await e(r,s);else if("string"==typeof r&&String(r).startsWith("=")){let e;try{e=await m(r,void 0,{isForCredential:!1})}catch(a){e=`Error in expression: "${a.message}"`}o[i]={value:r,resolvedExpressionValue:String(e)}}else o[i]=r}return o}(e,"")},containsNodeFromPackage:(e,t)=>e.nodes.some((e=>e.type.startsWith(t))),checkConflictingWebhooks:async function(e){let n;n=r.stateIsDirty?await d():await o.fetchWorkflow(e);const a=n.nodes.filter((e=>!0!==e.disabled&&e.webhookId&&(e.type.toLowerCase().includes("trigger")||"n8n-nodes-base.webhook"===e.type)));for(const o of a){const n=h(o),a=y(o);for(const i of n){const n=await er(t.restApiContext,{path:a,method:i});if(n&&n.workflowId!==e)return{trigger:o,conflict:n}}}return null}}}function Ex(e,t){return t.reduce(((e,t)=>{return"number"==typeof t?`${e}[${t}]`:(n=t,Mp.test(n.toString())?`${e}.${t}`:`${e}['${Tx(t)}']`);var n}),e)}function Tx(e){return e.replace(/\'/g,"\\'")}function Nx({nodeName:e,distanceFromActive:t,binaryMode:n}){const o="combined"===n?["item"]:["item","json"];return 1===t?"combined"===n?"$item":"$json":Ex(`$('${Tx(e)}')`,o)}function Ax(e,t=!1){const n=e.replace(/^{{\s*|\s*}}$/g,"").replace(/^(\$\(.*\)\.item\.json|\$json|\$node\[.*\]\.json)\.?(.*)/,"$2");return!n.startsWith("[")||n.slice(1).includes("[")||t?n:Dp(n.slice(1,-1))}function _x(){function e(t,n="",o=!1,a=!1){let i={type:"undefined",value:"undefined",path:n};switch(typeof t){case"object":if(null===t)i={type:"null",value:"[null]",path:n};else if(t instanceof Date)i={type:"string",value:t.toISOString(),path:n};else if(Array.isArray(t))i={type:"array",value:a&&t.length>0?[{key:"0",...e(t.every((e=>Os(e)))?(0,Lp.default)({},...t):t[0],`${n}[0]`,o,a)}]:t.map(((t,i)=>({key:i.toString(),...e(t,`${n}[${i}]`,o,a)}))),path:n};else if(Os(t)){const r=Be(t)?"binary":"object";i={type:r,value:Object.entries(t).map((([t,i])=>({key:t,...e(i,Ex(n,[t]),o,a)}))),path:n},"binary"===r&&(i.binaryData=t)}break;case"function":i={type:"function",value:"",path:n};break;default:i={type:typeof t,value:o?"":String(t),path:n}}return i}function t(e){switch(e){case void 0:return"undefined";case"integer":return"number";default:return e}}function n(e,t=0,n=0){const{getWorkflowExecution:o}=vm();if(null===e)return[];if(null===o)return[];const a=o.data;if(!a?.resultData)return[];const i=a.resultData.runData?.[e.name]?.[t];return void 0===i?.data?[]:function(e,t){return!e?.hasOwnProperty(ta.Main)||void 0===e.main||t<0||t>=e.main.length||null===e.main[t]?[]:e.main[t]}(i.data,n)}function o(e,t){const n=t.toLocaleLowerCase();return!!e.key?.toLocaleLowerCase().includes(n)||"string"==typeof e.value&&e.value.toLocaleLowerCase().includes(n)}return{getSchema:e,getSchemaForExecutionData:function(t,n=!1,o=!1){const[a,...i]=t;return e((0,Lp.default)({},a,...i,a),void 0,n,o)},getSchemaForJsonSchema:function e(n,o=""){if("object"!=typeof n)return{type:"null",path:o,value:"null"};if("array"===n.type)return{type:"array",value:qm(n.items)?[{...e(n.items,`${o}[0]`),key:"0"}]:[],path:o};if("object"===n.type){const t=n.properties??{};return{type:"object",value:Object.entries(t).map((([t,n])=>({...e(n,o?`${o}.${t}`:`.${t}`),key:t}))),path:o}}return{type:t(Array.isArray(n.type)?n.type[0]:n.type),value:"",path:o}},getNodeInputData:n,getInputDataWithPinned:function(e,t=0,o=0){if(!e)return[];const{pinDataByNodeName:a}=vm(),i=a(e.name);let r=n(e,t,o);return i&&(r=Array.isArray(i)?i.map((e=>({json:e}))):[{json:i}]),r},filterSchema:function e(t,n){if(!n.trim())return t;if(Array.isArray(t.value)){const a=t.value.map((t=>e(t,n))).filter(Zm);return 0===a.length?o(t,n)?t:null:{...t,value:a}}return o(t,n)?t:null}}}function Px(e){return e.reduce(((e,t)=>{const n=function(e){return Array.isArray(e.version)?e.version:[e.version]}(t);if(0===n.length){const n={1:t};return e[t.name]=n,e}for(const o of n)e[t.name]?e[t.name][o]=Object.assign(e[t.name][o]??{},t):e[t.name]=Object.assign(e[t.name]??{},{[o]:t});return e}),{})}function Cx(e,t,n,o,a,i,r,s,l,u){let c=0;if(++l>=u)return{matched:!1,outScore:c};if(n===e.length||o===t.length)return{matched:!1,outScore:c};let d=!1,p=[],f=0,m=!0;for(;n<e.length&&o<t.length;){if(e[n].toLowerCase()===t[o].toLowerCase()){if(s>=r)return{matched:!1,outScore:c};m&&a&&(i=[...a],m=!1);const h=[],y=Cx(e,t,n,o+1,i,h,r,s,l,u),v=y.outScore;y.matched&&((!d||v>f)&&(p=[...h],f=v),d=!0),i[s++]=o,++n}++o}const h=n===e.length;if(h){if(c=100,!t.toLowerCase().startsWith("n8n")){let e=wf*i[0];e=e<bf?bf:e,c+=e}const e=t.length-s;c+=kf*e;for(let n=0;n<s;n++){const e=i[n];if(n>0&&e===i[n-1]+1&&(c+=hf),e>0){const n=t[e-1],o=t[e];n!==n.toUpperCase()&&o!==o.toLowerCase()&&(c+=vf),"_"!==n&&" "!==n||(c+=yf)}else c+=gf}return d&&(!h||f>c)?(i=[...p],c=f,{matched:!0,outScore:c}):h?{matched:!0,outScore:c}:{matched:!1,outScore:c}}return{matched:!1,outScore:c}}function Ox(e,t){return Cx(e,t,0,0,null,[],256,0,0,5)}function Mx(e){let t=e.trim();t=t.replace(If,Nf).replace(Sf,Nf),t=t.replace(Tf,"\0");let n=0,o=t.length;for(;"\0"===t.charAt(n);)n++;if(n===o)return[];for(;"\0"===t.charAt(o-1);)o--;return t.slice(n,o).split(/\0/g)}function Dx(e){const t=Mx(e);for(let n=0;n<t.length;n++){const e=t[n],o=Ef.exec(e);if(o){const a=o.index+(o[1]??o[2]).length;t.splice(n,1,e.slice(0,a),e.slice(a))}}return t}function Lx(e){return!1===e?e=>e.toLowerCase():t=>t.toLocaleLowerCase(e)}function Bx(e,t={}){const n=t.split??(t.separateNumbers?Dx:Mx),o=t.prefixCharacters??Af,a=t.suffixCharacters??Af;let i=0,r=e.length;for(;i<e.length;){const t=e.charAt(i);if(!o.includes(t))break;i++}for(;r>i;){const t=r-1,n=e.charAt(t);if(!a.includes(n))break;r=t}return[e.slice(0,i),n(e.slice(i,r)),e.slice(r)]}function Fx(e,t,n="node"){const o={uuid:js(),key:e.name,subcategory:t??e.codex?.subcategories?.["Core Nodes"]?.[0]??"*",properties:{...e},type:n};return o}function $x(e){return e.sort(((e,t)=>{if("node"!==e.type||"node"!==t.type)return 0;const n=e.properties?.displayName?.toLowerCase()||e.key,o=t.properties?.displayName?.toLowerCase()||t.key;return n.localeCompare(o,void 0,{sensitivity:"base"})}))}function Rx(e,t,n={}){return rr().isAskAiEnabled||(t=t.filter((e=>e.key!==En))),function(e,t){return e.map((({score:e,item:n})=>({score:e+Object.entries(t).reduce(((e,[t,o])=>{const a=o[n.key];return a?e+a:e}),0),item:n}))).sort(((e,t)=>t.score-e.score))}(function(e,t,n=xf){const o=t.reduce(((t,o)=>{let a=[];n.forEach((({key:e,weight:t})=>{const n=function(e,t){if(e.hasOwnProperty(t))return e[t];const n=t.split(".");let o=e,a=0;for(;o&&a<n.length;)o=o[n[a]],a++;return o}(o,e);Array.isArray(n)?a=a.concat(n.map((e=>({value:e,weight:t})))):"string"==typeof n&&a.push({value:n,weight:t})}));const i=a.reduce(((t,{value:n,weight:o})=>{if(!function(e,t){let n=0,o=0;for(;n<e.length&&o<t.length;)e.charAt(n).toLowerCase()===t.charAt(o).toLowerCase()&&n++,++o;return 0!==e.length&&0!==t.length&&n===e.length}(e,n))return t;const a=Ox(e,n);a.outScore*=o;const{matched:i,outScore:r}=a;return!t&&i||i&&t&&r>t.outScore?a:t}),null);return i&&t.push({score:i.outScore,item:o}),t}),[]);return o.sort(((e,t)=>t.score-e.score)),o}(function(e){const t=e.split(" ");return t.length>1&&"trigger".startsWith(t.slice(-1)[0].toLowerCase())?t.slice(0,-1).filter((e=>e)).join(" ").trimEnd():e}(e).toLowerCase(),t)||[],n).map((({item:e})=>e))}function jx(e){return"node"===e.type&&!!e.properties.codex?.categories?.includes("AI")&&!e.properties.codex?.subcategories?.AI?.includes(nn)}function Vx(e){return"node"!==e.type||e.properties.tag||(Mt.includes(e.properties.name)?e.properties.tag={type:"info",text:we.baseText("generic.recommended")}:qn.includes(e.properties.name)&&(e.properties.tag={type:"info",text:we.baseText("generic.betaProper")})),e}function Wx(e){return e.map((e=>({...e,uuid:`${e.key}-${js()}`}))).map(Vx)}function zx(...e){return we.baseText(...e)}function Ux(e,t){const n=e.group.includes("trigger")?sm("nodeCreator.actionsCategory.triggers"):sm("nodeCreator.actionsCategory.actions");return{name:e.name,group:e.group,codex:{label:t??"",categories:[n]},iconUrl:e.iconUrl,iconColor:e.iconColor,outputs:e.outputs,icon:e.icon,defaults:e.defaults}}function Gx(e){if(e.properties.find((e=>"resource"===e.name)))return[];if("n8n-nodes-base.code"===e.name){const t=e.properties.find((e=>"language"===e.name&&2===e.displayOptions?.show?.["@version"]?.[0]));if(t){const n=lm[e.name]?.(t,e);if(n)return n}}const t=e.properties.find((e=>"operation"===e.name?.toLowerCase()));if(!t?.options)return[];const n=t.options.filter((e=>!["*",""," "].includes(e.name))).map((n=>({...Ux(e),actionKey:n.value,displayName:n.action??(0,im.default)(n.name),description:n.description??"",displayOptions:t.displayOptions,outputConnectionType:n.outputConnectionType,values:{[t.name]:"multiOptions"===t.type?[n.value]:n.value}})));return 0===n.length?[]:n}function Hx(e){if(!e.codex?.categories?.includes("AI"))return[];const t=e.properties.find((e=>"mode"===e.name?.toLowerCase()));if(!t?.options)return[];const n=t.options.map((n=>({...Ux(e),actionKey:n.value,displayName:n.action??(0,im.default)(n.name),description:n.description??"",displayOptions:t.displayOptions,outputConnectionType:n.outputConnectionType,values:{[t.name]:n.value}})));return 0===n.length?[]:n}function Yx(e){const t=["event","events","trigger on"],n=e.displayName?.toLowerCase().includes("trigger"),o=e.properties.find((e=>t.includes(e.displayName?.toLowerCase())));if(!n)return[];if(!o?.options)return[{...Ux(e),actionKey:rm,displayName:sm("nodeCreator.actionsCategory.onNewEvent",{interpolate:{event:e.displayName.replace("Trigger","").trimEnd()}}),description:""}];const a=o.options.filter((e=>!["*",""," "].includes(e.name)));return lm[e.name]?.(o,e)??a.map((t=>({...Ux(e),actionKey:t.value,displayName:t.action??sm("nodeCreator.actionsCategory.onEvent",{interpolate:{event:Hf(t.name)}}),description:t.description??"",displayOptions:o.displayOptions,values:{[o.name]:"multiOptions"===o.type?[t.value]:t.value}})))}function qx(e){const t=[];return e.properties.filter((e=>"resource"===e.name)).forEach((n=>{(n.options||[]).filter((e=>e.value!==Kt)).forEach(((n,o,a)=>{const i=1===a.length,r=e.properties.find((t=>{const o="operation"===t.name,a=t.displayOptions?.show?.resource?.includes(n.value)??i,r=t.displayOptions?.show?.["@version"],s=Array.isArray(e.version)?e.version:[e.version],l=!r||r.some((e=>"number"==typeof e&&s.includes(e)));return o&&a&&l}));if(!r?.options)return;const s=(r.options||[]).map((t=>{const o=t.action??`${n.name} ${(0,im.default)(t.name)}`,s=i?{show:{resource:[a[0]?.value]}}:r?.displayOptions;return{...Ux(e,`${n.name} ${sm("nodeCreator.actionsCategory.actions")}`),actionKey:t.value,description:t?.description??"",displayOptions:s,values:{operation:"multiOptions"===r?.type?[t.value]:t.value},displayName:o,group:["trigger"]}}));t.push(...s)}))})),t}function Xx(){function e(e){return e?e.codex?.subcategories?.AI?.includes("Tools")&&!e.codex?.subcategories?.AI?.includes("Root Nodes")?[]:[...Yx(e),...Gx(e),...qx(e),...Hx(e)]:[]}function t(e){return e.length<=1?[]:e.filter(((e,t,n)=>{if("__CUSTOM_API_CALL__"===e.actionKey)return!1;const o=e.actionKey===rm;return!o||o&&n.length>1}))}function n(e){const{displayName:t,defaults:n,description:o,name:a,group:i,icon:r,iconUrl:s,iconColor:l,badgeIconUrl:u,outputs:c,codex:d}=e;return{displayName:t,defaults:n,description:o,name:a,group:i,icon:r,iconColor:l,iconUrl:s,badgeIconUrl:u,outputs:c,codex:d}}return{generateMergedNodesAndActions:function(o,a){const i=om(),r=rr(),s=o.filter((e=>!(!i.isEvaluationEnabled&&["n8n-nodes-base.evaluation","n8n-nodes-base.evaluationTrigger"].includes(e.name)||(r.isQueueModeEnabled||r.isMultiMain)&&"@n8n/n8n-nodes-langchain.memoryBufferWindow"===e.name))),l={},u=[];return s.filter((e=>!e.group.includes("trigger"))).forEach((t=>{const o=e(t);if(l[t.name]=o,"n8n-nodes-base.httpRequest"===t.name){const e=a.map((e=>{const o=dx(t,e);return o?n(o):null})).filter((e=>null!==e));u.push(...e)}u.push(n(t))})),s.filter((e=>e.group.includes("trigger"))).forEach((o=>{const a=o.name.replace("Trigger",""),i=e(o),r=l?.[a]||[],s=u.find((e=>e.name===a));s&&r?.length>0?(l[a]=t([...r,...i]),s.description=o.description):(l[o.name]=t(i),u.push(n(o)))})),{actions:l,mergedNodes:u}}}}function Jx(e){return e.data?.main?.some((e=>e?.some((e=>e.json?.[Eo]))))}function Kx({error:e,lastNodeExecuted:t}){let n;if(t&&e)n=e.message??e.description??"";else if(n=we.baseText("pushConnection.executionError",{interpolate:{error:"!"}}),e?.message){let t;"node"in e&&(t="string"==typeof e.node?e.node:e.node?.name);const o=t?`${t}: ${e.message}`:e.message;n=we.baseText("pushConnection.executionError",{interpolate:{error:`.${we.baseText("pushConnection.executionError.details",{interpolate:{details:o}})}`}})}return n}function Zx(e){const t={...e,workflowData:e.workflowData,data:as(e.data)};return t.finished=!!t.finished&&t.finished,e.id&&(t.id=e.id),t}function Qx(e){return[Ht,wt].includes(e.type)}function eI(e,t){"system"===e?(t??window).document.body.removeAttribute("data-theme"):(t??window).document.body.setAttribute?.("data-theme",e)}function tI(e){return!!e&&["light","dark"].includes(e)}function nI(){const e=(t="theme",new URLSearchParams(window.location.search).get(t)??localStorage.getItem("N8N_THEME"));var t;return tI(e)?e:null}function oI(){return new Map(gm)}function aI(e){return wm.add(e),()=>{wm.delete(e)}}async function iI(e,t){return await Va(e,"POST","/invitations",t)}return e({$i:function(e){const t=Math.log10(Math.abs(e))/3|0;if(0===t)return e;const n=Vr[t],o=e/Math.pow(10,3*t);return Number(o.toFixed(1))+n},$n:Ab,$r:function(e){return"string"==typeof e||"object"==typeof e&&null!==e&&("name"in e||"path"in e)},$s:async function(e){return await Va(e,"GET","/ldap/config")},A:function(e){const t=e.filter((e=>e.actionKey===bt));if(t.length){const e=t[0].name;"n8n-nodes-base.discord"===e&&(t[0].values={...t[0].values,resource:"message",operation:bt}),"n8n-nodes-base.microsoftTeams"===e&&(t[0].values={...t[0].values,resource:"chatMessage",operation:bt})}return t},Ac:async function(e){return await Va(e,"GET","/credential-resolvers")},Ai:function(e){const t=e.filter((e=>!(e.categories||[]).some((e=>e.name===fa))));return(t.length>0?t:e).filter((e=>!Dt.includes(e.name)))},At:function(e){const t=Ba();if(!t)return;const n=mx(e);if(t.state.value[n]){const e=t._s.get(n);e&&e.$dispose(),delete t.state.value[n]}},Bc:async function(e){return await Va(e,"GET","/api-keys/scopes")},Bn:function(e,t,n,o){function a(e,t,n,o){return e>=n&&t<=o?0:e<n?t>o?0:n-e:o-t}if(0===n.length)return e;const i=e.zoom,r=function({x:e,y:t,width:n,height:o},a){return{x:e-a,y:t-a,width:n+2*a,height:o+2*a}}(Tb(n),o/i),{xMax:s,xMin:l,yMax:u,yMin:c}=Gk(e,t),d=a(r.x,r.x+r.width,l,s),p=a(r.y,r.y+r.height,c,u);return{x:e.x+d*i,y:e.y+p*i,zoom:i}},Ca:async function(e,t){return await Va(e,"GET",`/workflows/${t}/collaboration/write-lock`)},Cc:function(e){return void 0!==e.id},Cr:_h,Ct:yx,D:Wx,Dc:async function(e,t){return await Va(e,"DELETE",`/credential-resolvers/${t}`)},Ds:Wm,Ec:async function(e,t){return await Va(e,"POST","/credential-resolvers",t)},Es:async function(e,t,n){return await Ga(e,"",{},{[$a]:n,[La]:t})},F:function(e){switch(e){case jo:return"globe";case so:return"database";case bn:return"badge-check";default:return"globe"}},Fc:async function(e,t){return await Va(e,"DELETE","/community-packages",{name:t})},Fs:async function(e){return await Ha({method:"GET",baseURL:e.baseUrl,endpoint:"/third-party-licenses"})},Gr:function(e){return null!==e&&"object"==typeof e&&"$props"in e},H:function(e){const t=[fa,"AI",At];return e.reduce(((e,n)=>{let o=["*"];const a=t.flatMap((e=>n.codex?.categories?.includes(e)?n.codex?.subcategories?.[e]??[]:[]));return a.length>0&&(o=a),o.forEach((t=>{e[t]||(e[t]=[]),e[t].push(Fx(n,t))})),e}),{})},Hc:async function(e,t,n){return await Va(e,"PATCH",`/api-keys/${t}`,n)},Hi:function(e){return"string"==typeof e&&!!Ea.find((t=>e.includes(t)))},Hr:rh,Ht:ax,I:function(e,t,n=!0){const o=t.reduce(((e,t)=>(e[t.key]=t,e)),{}),a=[];for(const i of e){const e=o[i];e&&a.push(e)}return n?$x(a):a},Ic:async function(e,t,n,o){return await Va(e,"PATCH","/community-packages",{name:t,version:n,checksum:o})},It:sx,Jc:function(e,t){return!!(e instanceof Node&&C(t)?.contains(e))},Ji:function(e,t){return!0!==e.noDataExpression&&("string"==typeof t&&"="===t.charAt(0)||!(!In(t)||!t.value||"="!==t.value.toString().charAt(0)))},Jr:function(e){return!!e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)},L:function(e,t,n,o=[]){const a=!qf(e.key),i=Yf(e.key.split(".")[0]),r=um().communityNodeType(Yf(e.key)),s={title:e.properties.displayName,description:e.properties.description,key:e.key,nodeIcon:t,installed:a,official:r?.isOfficialNode??!1,packageName:i,companyName:r?.companyName};if(o.length){const t=o?.map((t=>Fx(t,e.properties.displayName,"action")));return{subcategory:e.properties.displayName,title:we.baseText("nodeSettings.communityNodeDetails.title"),rootView:n,hasSearch:!1,mode:"actions",items:t,communityNodeDetails:s}}return{subcategory:e.properties.displayName,title:we.baseText("nodeSettings.communityNodeDetails.title"),rootView:n,hasSearch:!1,items:[e],mode:"community-node",communityNodeDetails:s}},Lc:async function(e,t){return await Ya(e.baseUrl,"/cloud/proxy/user/event",t)},Lt:rx,M:function(e,t,n=!0){const o=t.filter((e=>"object"==typeof e)),a=e=>e.reduce(((e,t)=>{const n=o.find((e=>e.items.includes(t.key)))?.key??"other";return n&&(e[n]=[...e[n]??[],t]),e}),{}),i=(e,t)=>e.map((e=>({type:"section",key:e.key,title:e.title,children:n?$x(t[e.key]??[]):t[e.key]??[]}))),r=e.filter((e=>!jx(e))),s=e.filter((e=>jx(e))),l=a(r),u=i(o,l),c=a(s),d=[...u,...i((0,zf.default)(o,["title"]),c)].concat({type:"section",key:"other",title:we.baseText("nodeCreator.sectionNames.other"),children:$x(l.other??[])}).filter((e=>"section"!==e.type||e.children.length>0));return d.sort(((e,t)=>e.key.toLowerCase().includes("recommended")?-1:t.key.toLowerCase().includes("recommended")?1:"Other Tools"===t.key?-1:0)),Gf(d)?d:e},Mc:async function(){return(await Ga("https://api.npms.io/v2/","search?q=keywords:n8n-community-node-package")).total||0},Mn:Gk,Mr:dh,Mt:function(e){if(!e)return e;const{pinData:t,...n}=e;return{...n,nodes:e.nodes.map((e=>{const{issues:t,pinData:n,...o}=e;return o}))}},N:jx,Nc:async function(e){return(await Ga(e.baseUrl,"/community-packages")).data||[]},Ni:th,Nn:function({workflowNode:e,node:t,nodeType:n,nodeOutputData:o,hasMultipleInputItems:a,nodes:i,connections:r,hasNodeRun:s}){const l=[];if(t?.type.toLocaleLowerCase().includes("tool")&&"@n8n/n8n-nodes-langchain.mcpClientTool"!==t?.type&&s&&(JSON.stringify(e.parameters).includes("$fromAI")||l.push({message:"No parameters are set up to be filled by AI. Click on the  button next to a parameter to allow AI to set its value.",location:"outputPane",whenToDisplay:"afterExecution"})),s&&e.parameters.limit&&o.length===e.parameters.limit&&l.push({message:`Limit of ${e.parameters.limit} items reached. There may be more items that aren't being returned. Tweak the 'Return All' or 'Limit' parameters to access more items.`,location:"outputPane",whenToDisplay:"afterExecution"}),a&&_o.includes(e.parameters.operation||"")&&(wo(i,t.name)?.executeOnce||l.push({message:"This node runs multiple times, once for each input item. Use Execute Once in the node settings if you want to run it only once.",location:"outputPane"})),a&&"sendAndWait"===e.parameters.operation&&(wo(i,t.name)?.executeOnce||l.push({message:"This action will run only once, for the first input item",location:"outputPane"})),"n8n-nodes-base.set"===t.type&&"manual"===t.parameters.mode){const e=(po(n.properties,t.parameters,!0,!1,t,n)?.assignments||{})?.assignments||[],o=[];for(const[t,n]of e.entries())n.name.startsWith("=")&&o.push(t+1);o.length>0&&l.push({message:`An expression is used in 'Fields to Set' in ${1===o.length?"field":"fields"} ${o.join(", ")}, did you mean to use it in the value instead?`,whenToDisplay:"beforeExecution",location:"outputPane"})}if("n8n-nodes-base.splitInBatches"===t.type){const e=Jo(r)[t.name]?.main[1]||[];if(e.length)for(const n of e||[])(Jn(r,n.node)||[]).includes(t.name)||l.push({message:"The last node in the branch of the 'loop' output must be connected back to the input of this node to loop correctly",whenToDisplay:"beforeExecution",location:"outputPane"});else l.push({message:"No nodes connected to the 'loop' output of this node",whenToDisplay:"beforeExecution",location:"outputPane"})}return l},Nr:ch,Nt:lx,O:function(e){return e.map((e=>"section"===e.type?e.children:e)).flat()},Oc:async function(e,t){return await Va(e,"GET",`/credential-resolvers/${t}`)},Os:Vm,Pc:async function(e,t,n,o){return await Ya(e.baseUrl,"/community-packages",{name:t,verify:n,version:o})},Pi:function(e){return e.split(" ").filter((e=>!rs.includes(e))).join(" ")},Pr:function(e){return"custom"===e.type&&"user"===e.role&&"customType"in e&&"user_answers"===e.customType},Ps:async function(e,t){return await Va(e,"POST","/owner/dismiss-banner",{banner:t.bannerName})},Q:function(e,t){const[n,o,a]=Bx(e,t),i=Lx(t?.locale),r=(s=t?.locale,!1===s?e=>e.toUpperCase():e=>e.toLocaleUpperCase(s));var s;return n+o.map(function(e,t){return n=>`${t(n[0])}${e(n.slice(1))}`}(i,r)).join(t?.delimiter??" ")+a},Qn:function(e,t){return Eb(Ib(Sb(e),Sb(t)))},Qr:function(e){return oh(e)||ah(e)||ih(e)},Rc:async function(e,t){return await Va(e,"POST","/api-keys",t)},Sa:Um,Sc:async function(e){return await Va(e,"GET","/eventbus/eventnames")},Tc:async function(e,t){return await Va(e,"GET","/eventbus/testmessage",{...t})},Tr:Ah,Ts:async function(e,t,n){return await Ga(e,t,{},{[$a]:n})},Tt:Sx,U:Fx,Ur:function(e){const t=Ee();try{return t.baseText(e),!0}catch{return!1}},Us:async function(e){return await Va(e,"GET","/settings/security")},V:$x,Vc:async function(e){return await Va(e,"GET","/api-keys")},Vi:function(e){return e.displayName.replace(/ trigger/i,"")},Vt:ix,Ws:async function(e,t){return await Va(e,"POST","/settings/security",t)},X:function(e){return!!e&&"totalViews"in e},Xc:Dm,Xn:cb,Xr:function(e){return e.startsWith("project:")},Y:function(e){return!!e&&"description"in e&&"categories"in e},Yc:function(e){const t=document.getSelection();return!!(t?.anchorNode&&t.focusNode&&e)&&!(e.contains(t.anchorNode)||e.contains(t.focusNode)||t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset)},Yr:function(e){return!!e&&"status"in e},Zi:eh,Zn:Lk,_:function(){return{workflowId:"all",status:"all",startDate:"",endDate:"",tags:[],annotationTags:[],metadata:[],vote:"all"}},_n:function(e,t,n){const{extraPropValues:o,extraProps:a}=e,i=n?`${ya} `:"",r=((s=(s=function(e){const t=e.path.split(".").filter((e=>/\[\d+\]/i.test(e))).map((e=>e.replaceAll(/[\[\]]/gi,"")));let n=[...t,e.parameter.displayName].join("_");return n=t.length>1?n.slice(-63):n.slice(0,63),n}(t)).replace(/[^a-zA-Z0-9\-]/g,"_")).length>=64&&(s=s.slice(0,63)),s);var s;const l=o?.description?.toString()??a.description.initialValue,u=function(e){return e.includes("\n")?"`":e.includes("`")?e.includes('"')?"'":'"':"`"}(l);return`={{ ${i}$fromAI('${r}', ${u}${l.replaceAll(/\\/g,"\\\\").replaceAll(u,`\\${u}`)}${u}, '${function(e){switch(e){case"boolean":case"number":case"json":return e;default:return"string"}}(t.parameter.type)}') }}`},a:function(e){gm.has(e.key)?console.warn(`Modal with key "${e.key}" is already registered. Skipping.`):(gm.set(e.key,e),wm.forEach((e=>e(oI()))))},aa:function(e){return"object"==typeof e&&null!==e&&"blur"in e&&"function"==typeof e.blur},ai:function(e){return io.includes(e)},ar:Mb,at:async function(e,{question:t,context:n,forNode:o}){return await Va(e,"POST","/ai/ask-ai",{question:t,context:n,forNode:o})},b:function(e){return Object.keys(e).some((t=>e[t].some(Jx)))},bc:async function(e,t){return await Va(e,"DELETE",`/eventbus/destination?id=${t}`)},bn:qk,c:function(e,t){return{completionTokens:e.completionTokens+t.completionTokens,promptTokens:e.promptTokens+t.promptTokens,totalTokens:e.totalTokens+t.totalTokens,isEstimate:e.isEstimate||t.isEstimate}},ca:Zm,ct:_x,d:Qx,da:Jm,dn:Zk,dt:function({nodeName:e,distanceFromActive:t,path:n,binaryMode:o}){const a=Nx({nodeName:e,distanceFromActive:t,binaryMode:o});return"string"==typeof n?`{{ ${a}${n} }}`:`{{ ${Ex(a,n)} }}`},ec:async function(e,t){return await Va(e,"GET","/ldap/sync",t)},ei:function(e){return oh(e)||ah(e)||ih(e)},er:Tb,f:function(e,t){if([ta.AiChain,ta.Main].includes(t))return e.map((e=>({raw:e.json,parsedContent:null})));const n=e.map((e=>Fn(e.binary)?e.json:e.binary)),o=mm[t];return o?n.filter((e=>void 0!==e)).map((e=>({raw:e,parsedContent:o(e)}))):[{raw:n.filter((e=>void 0!==e)),parsedContent:null}]},fa:function(e,t=2){return parseFloat((e/1024/1024).toFixed(t))},fn:Kk,ft:function(e,t,n){const o="resourceLocator"===e.type&&In(n)?n.value:n;if(e.requiresDataPath){if("multiple"===e.requiresDataPath){const e=Ax(t,!0);return"string"!=typeof o||"="!==o.trim()&&""!==o.trim()?`${o}, ${e}`:e}return Ax(t)}return"string"==typeof o&&Mo(o)&&o.length>1?`${o} ${t}`:o&&["string","json"].includes(e.type)?"="===o||"object"==typeof o?`=${t}`:`=${o} ${t}`:`=${t}`},g:function(e){return"success"===e?{title:we.baseText("executionsList.showMessage.retrySuccess.title"),type:"success"}:"waiting"===e?{title:we.baseText("executionsList.showMessage.retryWaiting.title"),type:"info"}:"running"===e?{title:we.baseText("executionsList.showMessage.retryRunning.title"),type:"info"}:"crashed"===e?{title:we.baseText("executionsList.showMessage.retryCrashed.title"),type:"error"}:"canceled"===e?{title:we.baseText("executionsList.showMessage.retryCanceled.title"),type:"error"}:"error"===e?{title:we.baseText("executionsList.showMessage.retryError.title"),type:"error"}:void 0},i:oI,ia:function(e){return"object"==typeof e&&null!==e&&"focusOnInput"in e&&"function"==typeof e.focusOnInput},ii:function(e){return"object"==typeof e&&null!==e&&"id"in e},ir:Vk,it:function(e,t,n,o,a){try{Rr(t.payload)>100&&Hp().trimPayloadSize(t)}catch(i){return void a(i)}za(e,"/ai/chat",t,n,o,a)},j:function(e,{isRagStarterCalloutVisible:t=!1}={}){const n=[];return t&&["rag","vec","know"].some((t=>e.toLowerCase().startsWith(t)))&&n.push({uuid:jf.RagStarterTemplate,key:jf.RagStarterTemplate,type:"openTemplate",properties:{templateId:jf.RagStarterTemplate,title:we.baseText("nodeCreator.ragStarterTemplate.openTemplateItem.title"),icon:"database",description:we.baseText("nodeCreator.ragStarterTemplate.openTemplateItem.description"),tag:{type:"info",text:we.baseText("generic.recommended")}}}),n},jc:async function(e,t,n){return await Va(e,"PATCH",`/credential-resolvers/${t}`,n)},ji:function(e){return e.filter((e=>!e.disabled&&!Dn.includes(e.type)))},jn:function(e,t,n){const o=[],a=Math.floor(e/2),i=e%2==1;if(0===e)return[];for(let r=-a;r<=a;r++)if(0===r)i&&o.push(0);else{const e=r*t+Math.sign(r)*(Math.abs(r)-(i?0:1))*n;o.push(e)}return o},jt:hx,k:function(e){return{uuid:"ai_templates_root",key:"ai_templates_root",type:"link",properties:{title:we.baseText("nodeCreator.aiPanel.linkItem.title"),icon:"box-open",description:we.baseText("nodeCreator.aiPanel.linkItem.description"),key:"ai_templates_root",url:e,tag:{type:"info",text:we.baseText("generic.recommended")}}}},kc:async function(e){return await Va(e,"GET","/credential-resolvers/types")},kn:function(e,t,n,o,a,i){const r=Math.max(n,o,1),s=fd[1]+16*Math.max(0,r-2)*2,l=i?1.5:1;return t?{width:(80+16*((e?1:0)+3*(Math.max(4,a)-1)))*l,height:e?md[1]:s}:e?{width:md[0]*l,height:md[1]}:{width:fd[0]*l,height:s}},kr:function(e){return"string"==typeof e&&!!e.match(Ys)},kt:fx,la:function(e){return"object"==typeof e&&null!==e&&"select"in e&&"function"==typeof e.select},ln:Qk,m:async function({nodes:e,runData:t,pinData:n,destinationNode:o,triggerNode:a,directParentNodes:i,source:r,getTestUrl:s}){for(const u of e)if((void 0===a||a===u.name)&&!(t?.hasOwnProperty(u.name)&&"n8n-nodes-base.formTrigger"!==u.type||n[u.name])&&["n8n-nodes-base.formTrigger"].includes(u.type)&&(!o||o===u.name||i.includes(u.name))&&(u.name===o||!u.disabled)){let e="";"n8n-nodes-base.formTrigger"===u.type&&(e=s(u));try{if(!(await fetch(e,{method:"GET"})).ok)continue}catch(l){continue}e&&"RunData.ManualChatMessage"!==r&&(pm(),dm(e))}},ma:function(e,t){return Object.fromEntries(Object.entries(e).filter((([e])=>e!==t)))},na:function(e){return(0,jr.default)(e,"yyyy-mm-dd HH:MM:ss")},nc:async function(e){return await Va(e,"POST","/ldap/test-connection")},ni:function(e){return void 0!==e&&"object"==typeof e&&null!==e},o:aI,oi:function(e){return"variable"===e.resourceType},ot:async function(e,t){return await Va(e,"POST","/ai/chat/apply-suggestion",t)},pn:Jk,pt:Ax,qc:function(){if(void 0!==Xi)return Xi;const e=document.createElement("div"),t=document.createElement("div");return e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e),e.appendChild(t),Xi=e.offsetWidth-t.offsetWidth,e.parentElement?.removeChild(e),Xi},qr:ih,qt:async function(e,t,n,o,a,i){return await Va(e,"PUT",`/projects/${t}/folders/${n}/transfer`,{destinationProjectId:o,destinationParentFolderId:a??"0",shareCredentials:i})},ra:function(e){return(0,jr.default)(e,"d mmmm, yyyy @ HH:MM Z")},rc:async function(e,t){return await Va(e,"PUT","/ldap/config",t)},ri:function(e){return Cs.includes(e)},rr:bk,sa:function(e){return"object"==typeof e&&null!==e&&"focus"in e&&"function"==typeof e.focus},si:function(e){return"source"in e&&"target"in e&&"sourceHandle"in e&&"targetHandle"in e},tc:async function(e,t){return await Va(e,"POST","/ldap/sync",t)},ti:nh,tr:jk,u:function(e,t){const n="total"===t?e.totalTokens:"completion"===t?e.completionTokens:e.promptTokens;return e.isEstimate?`~${n}`:n.toLocaleString()},ua:Km,ur:Mh,ut:Tx,v:Kx,vn:Xk,w:Xx,wa:Hm,wc:async function(e,t,n=[]){return await Va(e,"POST","/eventbus/destination",{...t,subscribedEvents:n})},wt:gx,x:Zx,xc:async function(e){return await Va(e,"GET","/eventbus/destination")},xr:Ch,y:function({error:e,lastNodeExecuted:t}){const n=Kx({error:e,lastNodeExecuted:t});if("SubworkflowOperationError"===e.name)return{title:e.message,message:e.description??""};if(("NodeOperationError"===e.name||"NodeApiError"===e.name)&&"configuration-node"===e.functionality){const t="node"in e&&e.node?.name?e.node.name:"";return{title:t?`Error in sub-node ${t}`:"Problem executing workflow",message:b(Yr,{errorMessage:e.description??n,nodeName:t})}}return{title:t?`Problem in node ${t}`:"Problem executing workflow",message:n}},yn:function(e,t){if(!t)return null;if(function(e,t){if(Nd.some((e=>function(e,t){if("string"==typeof e)return t.type===e;{const[n,o]=e;return t.type===n&&t.typeVersion<=o}}(e,t))))return!1;if(Ad.includes(e.path))return!1;if(_d.includes(e.parameter.type))return!1;const n=um().getNodeType(t.type,t?.typeVersion)?.codex;return!(!n?.categories?.includes("AI")||!n?.subcategories?.AI?.includes("Tools")||n?.subcategories?.AI?.includes("Vector Stores")||e.parameter.noDataExpression)}(e,t)){const t={type:"fromAI",extraProps:Pd,extraPropValues:{}};return qk(t,e.value?.toString()??""),t}return null},yr:Oh,z:Rx,zc:async function(e,t){return await Va(e,"DELETE",`/api-keys/${t}`)}}),{setters:[function(e){n=e.o,o=e.t},function(e){a=e.$t,i=e.B,r=e.C,s=e.Cn,l=e.D,u=e.Dt,c=e.E,d=e.Et,p=e.F,f=e.Ft,m=e.G,h=e.Gt,y=e.Ht,v=e.It,g=e.J,w=e.Jt,b=e.L,k=e.M,x=e.Mt,I=e.Nt,S=e.O,E=e.Ot,T=e.P,N=e.Pt,A=e.Q,_=e.T,P=e.Tt,C=e.Ut,O=e.V,M=e.Vt,D=e.W,L=e.Z,B=e._,F=e._t,$=e.an,R=e.at,j=e.b,V=e.bn,W=e.bt,z=e.cn,U=e.ct,G=e.en,H=e.et,Y=e.h,q=e.i,X=e.it,J=e.j,K=e.jt,Z=e.m,Q=e.mn,ee=e.n,te=e.nt,ne=e.o,oe=e.ot,ae=e.p,ie=e.pt,re=e.q,se=e.st,le=e.tn,ue=e.ut,ce=e.vn,de=e.vt,pe=e.w,fe=e.wt,me=e.xt,he=e.z,ye=e.zt},function(e){ve=e.M,ge=e.N,we=e.gt,be=e.ht,ke=e.lt,xe=e.mt,Ie=e.ot,Se=e.x,Ee=e.yt,Te=e.z},function(e){Ne=e.$n,Ae=e.An,_e=e.Ci,Pe=e.Di,Ce=e.Dn,Oe=e.Ei,Me=e.Fi,De=e.Gt,Le=e.Jt,Be=e.L,Fe=e.Mn,$e=e.On,Re=e.Qn,je=e.Sn,Ve=e.Tn,We=e.Zn,ze=e.Zt,Ue=e._t,Ge=e.b,He=e.ci,Ye=e.er,qe=e.fn,Xe=e.fr,Je=e.gn,Ke=e.ht,Ze=e.in,Qe=e.ir,et=e.jn,tt=e.kn,nt=e.li,ot=e.ln,at=e.lr,it=e.m,rt=e.nn,st=e.nr,lt=e.ri,ut=e.rn,ct=e.rr,dt=e.tr,pt=e.ui,ft=e.v,mt=e.vn,ht=e.wi},function(e){yt=e.$i,vt=e.$n,gt=e.A,wt=e.An,bt=e.Ao,kt=e.Ar,xt=e.As,It=e.Bo,St=e.Bs,Et=e.Ci,e.Co,Tt=e.Cr,Nt=e.Cs,At=e.Ct,_t=e.Dc,Pt=e.Do,Ct=e.Dr,Ot=e.Ds,Mt=e.Dt,Dt=e.E,Lt=e.Ea,Bt=e.Ec,Ft=e.En,$t=e.Er,Rt=e.Es,e.F,jt=e.Fc,Vt=e.Fi,Wt=e.Fn,zt=e.Fs,Ut=e.Ga,Gt=e.Gi,Ht=e.Gt,Yt=e.H,qt=e.Ha,Xt=e.Hn,Jt=e.Hs,Kt=e.I,Zt=e.Ic,Qt=e.In,en=e.Io,tn=e.Is,nn=e.J,on=e.Jo,e.K,an=e.Kt,rn=e.L,sn=e.Lc,ln=e.Ln,un=e.Ls,e.Lt,cn=e.Ma,dn=e.Ms,e.No,pn=e.Ns,fn=e.Oc,mn=e.Oi,hn=e.Or,yn=e.Os,vn=e.P,gn=e.Po,wn=e.Ps,bn=e.Q,kn=e.Qc,xn=e.Qs,In=e.Ra,Sn=e.Rs,En=e.Rt,Tn=e.Sn,e.Sr,Nn=e.Ss,An=e.Ta,_n=e.Tn,Pn=e.Tr,Cn=e.Ts,On=e.Va,Mn=e.Vi,Dn=e.Vn,Ln=e.Vs,Bn=e.Vt,Fn=e.Wa,$n=e.Ws,e.Xt,Rn=e.Ya,jn=e.Yc,Vn=e.Yn,Wn=e.Zc,zn=e.Zs,Un=e.Zt,Gn=e._n,Hn=e._r,Yn=e._s,qn=e._t,Xn=e.a,Jn=e.aa,Kn=e.an,Zn=e.ao,Qn=e.ar,eo=e.as,e.at,to=e.bn,e.bo,no=e.bs,oo=e.ca,ao=e.cn,io=e.co,e.cr,ro=e.cs,so=e.ct,lo=e.da,uo=e.dr,co=e.ds,po=e.fa,e.fr,fo=e.fs,e.gl,mo=e.gn,ho=e.go,yo=e.gs,vo=e.h,e.hl,e.hn,e.ho,go=e.hs,e.i,wo=e.ia,bo=e.il,ko=e.ir,xo=e.is,Io=e.jc,So=e.ji,Eo=e.jo,To=e.jr,No=e.js,Ao=e.k,_o=e.kn,Po=e.ks,Co=e.la,Oo=e.lc,e.ll,Mo=e.lo,Do=e.ls,Lo=e.ma,Bo=e.mr,Fo=e.ms,e.mt,e.n,$o=e.nl,Ro=e.ns,jo=e.nt,e.o,Vo=e.oa,Wo=e.ol,zo=e.oo,Uo=e.or,Go=e.os,Ho=e.pa,Yo=e.ps,qo=e.qo,Xo=e.qt,e.r,Jo=e.ra,Ko=e.rl,e.rn,Zo=e.rr,Qo=e.rs,ea=e.sn,ta=e.so,na=e.sr,oa=e.ss,e.st,aa=e.t,ia=e.ti,ra=e.ts,sa=e.ua,la=e.un,ua=e.us,ca=e.vi,da=e.vn,e.vo,e.vr,pa=e.vs,fa=e.vt,ma=e.w,ha=e.wn,ya=e.wo,va=e.ws,ga=e.xa,wa=e.xn,ba=e.xo,ka=e.xs,xa=e.yi,Ia=e.yr,Sa=e.ys,e.yt,Ea=e.z,Ta=e.za,Na=e.zn,Aa=e.zs,_a=e.zt},function(e){Pa=e.n,Ca=e.o,Oa=e.r,Ma=e.t,Da=e.y},function(e){e.D,La=e.E,Ba=e.M,Fa=e.O,$a=e.T,Ra=e._,ja=e.c,Va=e.d,Wa=e.f,za=e.h,Ua=e.j,Ga=e.l,Ha=e.m,Ya=e.p,qa=e.r,Xa=e.t,Ja=e.u,Ka=e.v},function(e){Za=e.t},function(e){Qa=e.r,ei=e.t}],execute:function(){try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(u=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[u]="ce8eb20f-fdac-4e91-959a-c16f4bb7e6bc",t._sentryDebugIdIdentifier="sentry-dbid-ce8eb20f-fdac-4e91-959a-c16f4bb7e6bc")}catch(t){}var t,u;for((e("nl",ti=(e,t,n)=>{let o={offsetX:0,offsetY:0};const a=t=>{const n=t.clientX,a=t.clientY,{offsetX:i,offsetY:r}=o,s=e.value.getBoundingClientRect(),l=s.left,u=s.top,c=s.width,d=s.height,p=document.documentElement.clientWidth,f=document.documentElement.clientHeight,m=-l+i,h=-u+r,y=p-l-c+i,v=f-u-d+r,g=t=>{const s=Math.min(Math.max(i+t.clientX-n,m),y),l=Math.min(Math.max(r+t.clientY-a,h),v);o={offsetX:s,offsetY:l},e.value&&(e.value.style.transform=`translate(${Ne(s)}, ${Ne(l)})`)},w=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",w)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};L((()=>{de((()=>{n.value?t.value&&e.value&&t.value.addEventListener("mousedown",a):i()}))})),g((()=>{i()}))}),E(),e("tl",ni=(e,t={})=>{K(e)||Qe("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||qe("popup"),o=fe((()=>n.bm("parent","hidden")));if(!He||dt(document.body,o.value))return;let a=0,i=!1,r="0";const s=()=>{setTimeout((()=>{"undefined"!=typeof document&&(st(null==document?void 0:document.body,o.value),i&&document&&(document.body.style.width=r))}),200)};F(e,(e=>{if(!e)return void s();i=!dt(document.body,o.value),i&&(r=document.body.style.width),a=We(n.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,l=Ye(document.body,"overflowY");a>0&&(t||"scroll"===l)&&i&&(document.body.style.width=`calc(100% - ${a}px)`),Re(document.body,o.value)})),I((()=>s()))}),le(),e("el",oi=e=>{if(!e)return{onClick:w,onMousedown:w,onMouseup:w};let t=!1,n=!1;return{onClick:o=>{t&&n&&e(o),t=n=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}}),ai="_trap-focus-children",ii=[],ri=e=>{if(0===ii.length)return;const t=ii[ii.length-1][ai];if(t.length>0&&e.code===je.tab){if(1===t.length)return e.preventDefault(),void(document.activeElement!==t[0]&&t[0].focus());const n=e.shiftKey,o=e.target===t[0],a=e.target===t[t.length-1];o&&n&&(e.preventDefault(),t[t.length-1].focus()),a&&!n&&(e.preventDefault(),t[0].focus())}},si={beforeMount(e){e[ai]=pt(e),ii.push(e),ii.length<=1&&document.addEventListener("keydown",ri)},updated(e){m((()=>{e[ai]=pt(e)}))},unmounted(){ii.shift(),0===ii.length&&document.removeEventListener("keydown",ri)}},li=et({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Fe([String,Array,Object])},zIndex:{type:Fe([String,Number])}}),ui=T({name:"ElOverlay",props:li,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:n}){const o=qe("overlay"),{onClick:a,onMousedown:i,onMouseup:r}=oi(e.customMaskEvent?void 0:e=>{n("click",e)});return()=>e.mask?k("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:i,onMouseup:r},[R(t,"default")],Je.STYLE|Je.CLASS|Je.PROPS,["onClick","onMouseup","onMousedown"]):b("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[R(t,"default")])}}),e("$c",ci=ui),le(),di=void 0,pi=function(e={}){if(!He)return;const t=fi(e);if(t.fullscreen&&di)return di;const n=Pm({...t,closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(di=void 0)}});mi(t,t.parent,n),hi(t,t.parent,n),t.parent.vLoadingAddClassList=()=>hi(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),m((()=>n.visible.value=t.visible)),t.fullscreen&&(di=n),n},fi=e=>{var t,n,o,a;let i;return i=Q(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:i===document.body||e.body?document.body:i,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:i===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(a=e.visible)||a,target:i}},mi=async(e,t,n)=>{const{nextZIndex:o}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(e.fullscreen)n.originalPosition.value=Ye(document.body,"position"),n.originalOverflow.value=Ye(document.body,"overflow"),a.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=Ye(document.body,"position"),await m();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";a[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt(Ye(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])a[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=Ye(t,"position");for(const[i,r]of Object.entries(a))n.$el.style[i]=r},hi=(e,t,n)=>{const o=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?st(t,o.bm("parent","relative")):Re(t,o.bm("parent","relative")),e.fullscreen&&e.lock?Re(t,o.bm("parent","hidden")):st(t,o.bm("parent","hidden"))},le(),yi=Symbol("ElLoading"),vi=(e,t)=>{var n,o,a,i;const r=t.instance,s=e=>z(t.value)?t.value[e]:void 0,l=t=>(e=>{const t=Q(e)&&(null==r?void 0:r[e])||e;return t?v(t):t})(s(t)||e.getAttribute(`element-loading-${G(t)}`)),u=null!=(n=s("fullscreen"))?n:t.modifiers.fullscreen,c={text:l("text"),svg:l("svg"),svgViewBox:l("svgViewBox"),spinner:l("spinner"),background:l("background"),customClass:l("customClass"),fullscreen:u,target:null!=(o=s("target"))?o:u?void 0:e,body:null!=(a=s("body"))?a:t.modifiers.body,lock:null!=(i=s("lock"))?i:t.modifiers.lock};e[yi]={options:c,instance:pi(c)}},gi=(e,t)=>{for(const n of Object.keys(t))K(t[n])&&(t[n].value=e[n])},e("Qc",bi={install(e){e.directive("loading",wi),e.config.globalProperties.$loading=pi},directive:wi={mounted(e,t){t.value&&vi(e,t)},updated(e,t){const n=e[yi];t.oldValue!==t.value&&(t.value&&!t.oldValue?vi(e,t):t.value&&t.oldValue?z(t.value)&&gi(t.value,n.options):n?.instance.close())},unmounted(e){var t;null==(t=e[yi])||t.instance.close()}},service:pi}),ki=T({name:"ElMessageBox",directives:{TrapFocus:si},components:{ElButton:De,ElFocusTrap:Le,ElInput:ze,ElOverlay:ci,ElIcon:rt,...$e},inheritAttrs:!1,props:{buttonSize:{type:String,validator:mt},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:n,zIndex:o,ns:a,size:i}=Ze("message-box",r((()=>e.buttonSize))),{t:s}=n,{nextZIndex:l}=o,u=v(!1),c=N({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),d=r((()=>{const e=c.type;return{[a.bm("icon",e)]:e&&tt[e]}})),p=ot(),f=ot(),h=r((()=>c.icon||tt[c.type]||"")),w=r((()=>!!c.message)),b=v(),k=v(),x=v(),I=v(),S=v(),E=r((()=>c.confirmButtonClass));function T(){u.value&&(u.value=!1,m((()=>{c.action&&t("action",c.action)})))}F((()=>c.inputValue),(async t=>{await m(),"prompt"===e.boxType&&null!==t&&C()}),{immediate:!0}),F((()=>u.value),(t=>{var n,o;t&&("prompt"!==e.boxType&&(c.autofocus?x.value=null!=(o=null==(n=S.value)?void 0:n.$el)?o:b.value:x.value=b.value),c.zIndex=l()),"prompt"===e.boxType&&(t?m().then((()=>{var e;I.value&&I.value.$el&&(c.autofocus?x.value=null!=(e=O())?e:b.value:x.value=b.value)})):(c.editorErrorMessage="",c.validateError=!1))})),ti(b,k,r((()=>e.draggable))),L((async()=>{await m(),e.closeOnHashChange&&window.addEventListener("hashchange",T)})),g((()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",T)}));const A=()=>{e.closeOnClickModal&&P(c.distinguishCancelAndClose?"close":"cancel")},_=oi(A),P=t=>{var n;("prompt"!==e.boxType||"confirm"!==t||C())&&(c.action=t,c.beforeClose?null==(n=c.beforeClose)||n.call(c,t,c,T):T())},C=()=>{if("prompt"===e.boxType){const e=c.inputPattern;if(e&&!e.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;const t=c.inputValidator;if("function"==typeof t){const e=t(c.inputValue);if(!1===e)return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;if("string"==typeof e)return c.editorErrorMessage=e,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},O=()=>{const e=I.value.$refs;return e.input||e.textarea},M=()=>{P("close")};return e.lockScroll&&ni(u),{...y(c),ns:a,overlayEvent:_,visible:u,hasMessage:w,typeClass:d,contentId:p,inputId:f,btnSize:i,iconComponent:h,confirmButtonClasses:E,rootRef:b,focusStartRef:x,headerRef:k,inputRef:I,confirmRef:S,doClose:T,handleClose:M,onCloseRequested:()=>{e.closeOnPressEscape&&M()},handleWrapperClick:A,handleInputEnter:e=>{if("textarea"!==c.inputType)return e.preventDefault(),P("confirm")},handleAction:P,t:s}}}),xi=["aria-label","aria-describedby"],Ii=["aria-label"],Si=["id"],Ei=ut(ki,[["render",Cm],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]),le(),Ti=new Map,Ni=e=>{let t=document.body;return e.appendTo&&(Q(e.appendTo)&&(t=document.querySelector(e.appendTo)),at(e.appendTo)&&(t=e.appendTo),at(t)||(ct("ElMessageBox","the appendTo option is not an HTMLElement. Falling back to document.body."),t=document.body)),t},Ai=(e,t,n=null)=>{const o=k(Ei,e,$(e.message)||O(e.message)?{default:$(e.message)?e.message:()=>e.message}:null);return o.appContext=n,ne(o,t),Ni(e).appendChild(t.firstElementChild),o.component},_i=()=>document.createElement("div"),Pi=(e,t)=>{const n=_i();e.onVanish=()=>{ne(null,n),Ti.delete(i)},e.onAction=t=>{const n=Ti.get(i);let a;a=e.showInput?{value:i.inputValue,action:t}:t,e.callback?e.callback(a,o.proxy):"cancel"===t||"close"===t?e.distinguishCancelAndClose&&"cancel"!==t?n.reject("close"):n.reject("cancel"):n.resolve(a)};const o=Ai(e,n,t),i=o.proxy;for(const r in e)a(e,r)&&!a(i.$props,r)&&(i[r]=e[r]);return i.visible=!0,i},Ci={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}},["alert","confirm","prompt"].forEach((e=>{Om[e]=function(e){return(t,n,o,a)=>{let i="";return z(n)?(o=n,i=""):i=Xe(n)?"":n,Om(Object.assign({title:i,message:t,type:"",...Ci[e]},o,{boxType:e}),a)}}(e)})),Om.close=()=>{Ti.forEach(((e,t)=>{t.doClose()})),Ti.clear()},Om._context=null,(Oi=Om).install=e=>{Oi._context=e._context,e.config.globalProperties.$msgbox=Oi,e.config.globalProperties.$messageBox=Oi,e.config.globalProperties.$alert=Oi.alert,e.config.globalProperties.$confirm=Oi.confirm,e.config.globalProperties.$prompt=Oi.prompt},e("Zc",Mi=Oi),Di=["success","info","warning","error"],Li=et({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Ae},id:{type:String,default:""},message:{type:Fe([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Fe(Function),default:()=>{}},onClose:{type:Fe(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Di,""],default:""},zIndex:Number}),Bi={destroy:()=>!0},Fi=["id"],$i=["textContent"],Ri={key:0},ji=["innerHTML"],Vi=ut(T({...T({name:"ElNotification"}),props:Li,emits:Bi,setup(e,{expose:t}){const n=e,{ns:o,zIndex:a}=Ze("notification"),{nextZIndex:i,currentZIndex:u}=a,{Close:d}=Ce,p=v(!1);let f;const m=r((()=>{const e=n.type;return e&&tt[n.type]?o.m(e):""})),y=r((()=>n.type&&tt[n.type]||n.icon)),g=r((()=>n.position.endsWith("right")?"right":"left")),w=r((()=>n.position.startsWith("top")?"top":"bottom")),b=r((()=>{var e;return{[w.value]:`${n.offset}px`,zIndex:null!=(e=n.zIndex)?e:u.value}}));function x(){n.duration>0&&({stop:f}=nt((()=>{p.value&&S()}),n.duration))}function I(){f?.()}function S(){p.value=!1}return L((()=>{x(),i(),p.value=!0})),lt(document,"keydown",(function({code:e}){e===je.delete||e===je.backspace?I():e===je.esc?p.value&&S():x()})),t({visible:p,close:S}),(e,t)=>(H(),_(ee,{name:h(o).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[1]||(t[1]=t=>e.$emit("destroy")),persisted:""},{default:W((()=>[me(pe("div",{id:e.id,class:ce([h(o).b(),e.customClass,h(g)]),style:V(h(b)),role:"alert",onMouseenter:I,onMouseleave:x,onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[h(y)?(H(),_(h(rt),{key:0,class:ce([h(o).e("icon"),h(m)])},{default:W((()=>[(H(),_(U(h(y))))])),_:1},8,["class"])):c("v-if",!0),pe("div",{class:ce(h(o).e("group"))},[pe("h2",{class:ce(h(o).e("title")),textContent:s(e.title)},null,10,$i),me(pe("div",{class:ce(h(o).e("content")),style:V(e.title?void 0:{margin:0})},[R(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(H(),l(B,{key:1},[c(" Caution here, message could've been compromised, never use user's input as message "),pe("p",{innerHTML:e.message},null,8,ji)],2112)):(H(),l("p",Ri,s(e.message),1))]))],6),[[ae,e.message]]),e.showClose?(H(),_(h(rt),{key:0,class:ce(h(o).e("closeBtn")),onClick:Y(S,["stop"])},{default:W((()=>[k(h(d))])),_:1},8,["class","onClick"])):c("v-if",!0)],2)],46,Fi),[[ae,p.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]),le(),Wi={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},zi=16,Ui=1,Gi=function(e={},t=null){if(!He)return{close:()=>{}};("string"==typeof e||O(e))&&(e={message:e});const n=e.position||"top-right";let o=e.offset||0;Wi[n].forEach((({vm:e})=>{var t;o+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+zi})),o+=zi;const a="notification_"+Ui++,i=e.onClose,r={...e,offset:o,id:a,onClose:()=>{!function(e,t,n){const o=Wi[t],a=o.findIndex((({vm:t})=>{var n;return(null==(n=t.component)?void 0:n.props.id)===e}));if(-1===a)return;const{vm:i}=o[a];if(!i)return;n?.(i);const r=i.el.offsetHeight,s=t.split("-")[0];o.splice(a,1);const l=o.length;if(!(l<1))for(let u=a;u<l;u++){const{el:e,component:t}=o[u].vm,n=Number.parseInt(e.style[s],10)-r-zi;t.props.offset=n}}(a,n,i)}};let s=document.body;at(e.appendTo)?s=e.appendTo:Q(e.appendTo)&&(s=document.querySelector(e.appendTo)),at(s)||(ct("ElNotification","the appendTo option is not an HTMLElement. Falling back to document.body."),s=document.body);const l=document.createElement("div"),u=k(Vi,r,O(r.message)?{default:()=>r.message}:null);return u.appContext=null!=t?t:Gi._context,u.props.onDestroy=()=>{ne(null,l)},ne(u,l),Wi[n].push({vm:u}),s.appendChild(l.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}},Di.forEach((e=>{Gi[e]=(t={})=>(("string"==typeof t||O(t))&&(t={message:t}),Gi({...t,type:e}))})),Gi.closeAll=Mm,Gi._context=null,Hi=Ve(Gi,"$notify"),Yi=n(Ke(),1),qi=e=>"string"==typeof e?Dm(e):e,e("Gc",(e=>e.charAt(0).toUpperCase()+e.slice(1))),e("Kc",(async()=>await new Promise((e=>{setTimeout((()=>{e(document.getElementById("banners")?.clientHeight??0)}),0)})))),e("Wc",Ji={COMMUNITY_NODES:"communityNodes",ROOT:"root",SETTINGS:"settings",UI:"ui",USERS:"users",WORKFLOWS:"workflows",WORKFLOWS_LIST:"workflowsList",WORKFLOWS_V2:"workflowsV2",WORKFLOWS_EE:"workflowsEE",WORKFLOW_DOCUMENTS:"workflowDocuments",EXECUTIONS:"executions",NDV:"ndv",TEMPLATES:"templates",NODE_TYPES:"nodeTypes",CREDENTIALS:"credentials",TAGS:"tags",ANNOTATION_TAGS:"annotationTags",VERSIONS:"versions",NODE_CREATOR:"nodeCreator",WEBHOOKS:"webhooks",HISTORY:"history",CLOUD_PLAN:"cloudPlan",RBAC:"rbac",PUSH:"push",COLLABORATION:"collaboration",ASSISTANT:"assistant",BUILDER:"builder",CHAT_PANEL:"chatPanel",CHAT_PANEL_STATE:"chatPanelState",BECOME_TEMPLATE_CREATOR:"becomeTemplateCreator",PROJECTS:"projects",API_KEYS:"apiKeys",EVALUATION:"evaluation",FOLDERS:"folders",MODULES:"modules",FOCUS_PANEL:"focusPanel",WORKFLOW_STATE:"workflowState",AI_TEMPLATES_STARTER_COLLECTION:"aiTemplatesStarterCollection",PERSONALIZED_TEMPLATES:"personalizedTemplates",EXPERIMENT_READY_TO_RUN_WORKFLOWS:"readyToRunWorkflows",EXPERIMENT_READY_TO_RUN_WORKFLOWS_V2:"readyToRunWorkflowsV2",EXPERIMENT_TEMPLATE_RECO_V2:"templateRecoV2",PERSONALIZED_TEMPLATES_V3:"personalizedTemplatesV3",READY_TO_RUN:"readyToRun",TEMPLATES_DATA_QUALITY:"templatesDataQuality",BANNERS:"banners",CONSENT:"consent",CHAT_HUB:"chatHub",EXPERIMENT_EMPTY_STATE_BUILDER_PROMPT:"emptyStateBuilderPrompt",SETUP_PANEL:"setupPanel",FOCUSED_NODES:"focusedNodes"}),Ki=o(((e,t)=>{!function(n,o){"object"==typeof e&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof e?e.bowser=o():n.bowser=o()}(e,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var o=n(18);t.default=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,o){void 0===o&&(o=!1);var a=e.getVersionPrecision(t),i=e.getVersionPrecision(n),r=Math.max(a,i),s=0,l=e.map([t,n],(function(t){var n=r-e.getVersionPrecision(t),o=t+new Array(n+1).join(".0");return e.map(o.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(o&&(s=r-Math.min(a,i)),r-=1;r>=s;){if(l[0][r]>l[1][r])return 1;if(l[0][r]===l[1][r]){if(r===s)return 0;r-=1}else if(l[0][r]<l[1][r])return-1}},e.map=function(e,t){var n,o=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)o.push(t(e[n]));return o},e.find=function(e,t){var n,o;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,o=e.length;n<o;n+=1){var a=e[n];if(t(a,n))return a}},e.assign=function(e){for(var t,n,o=e,a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var s=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){o[t]=e[t]}))};for(t=0,n=i.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return o.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return o.BROWSER_MAP[e]||""},e}(),e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var o,a=(o=n(91))&&o.__esModule?o:{default:o},i=n(18);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new a.default(e,t)},e.parse=function(e){return new a.default(e).getResult()},t=e,(n=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}])&&r(t,n),e}(),e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var o=l(n(92)),a=l(n(93)),i=l(n(94)),r=l(n(95)),s=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},o=0,a={},i=0;if(Object.keys(e).forEach((function(t){var r=e[t];"string"==typeof r?(a[t]=r,i+=1):"object"==typeof r&&(n[t]=r,o+=1)})),o>0){var r=Object.keys(n),l=s.default.find(r,(function(e){return t.isOS(e)}));if(l){var u=this.satisfies(n[l]);if(void 0!==u)return u}var c=s.default.find(r,(function(e){return t.isPlatform(e)}));if(c){var d=this.satisfies(n[c]);if(void 0!==d)return d}}if(i>0){var p=Object.keys(a),f=s.default.find(p,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(a[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),o=e.toLowerCase(),a=s.default.getBrowserTypeByAlias(o);return t&&a&&(o=a.toLowerCase()),o===n},t.compareVersion=function(e){var t=[0],n=e,o=!1,a=this.getBrowserVersion();if("string"==typeof a)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(o=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(o=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(a,n,o))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}(),e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var o,a=(o=n(17))&&o.__esModule?o:{default:o},i=/version\/(\d+(\.?_?\d+)+)/i;t.default=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=a.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}],e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var o,a=(o=n(17))&&o.__esModule?o:{default:o},i=n(18);t.default=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=a.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},n=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=a.default.getMacOSVersionName(t),o={name:i.OS_MAP.MacOS,version:t};return n&&(o.versionName=n),o}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=a.default.getAndroidVersionName(t),o={name:i.OS_MAP.Android,version:t};return n&&(o.versionName=n),o}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:i.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}],e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var o,a=(o=n(17))&&o.__esModule?o:{default:o},i=n(18);t.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}],e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var o,a=(o=n(17))&&o.__esModule?o:{default:o},i=n(18);t.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},n=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},n=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},n=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},n=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default}})}))})),e("Uc",Zi=function(e){return e.Email="email",e.Ldap="ldap",e.Saml="saml",e.Oidc="oidc",e}({})),e("fc",(async e=>await Va(e,"GET","/external-secrets/secrets"))),e("hc",(async e=>await Va(e,"GET","/secret-providers/completions/secrets/global"))),e("gc",(async(e,t)=>await Va(e,"GET",`/secret-providers/completions/secrets/project/${t}`))),e("mc",(async e=>await Va(e,"GET","/external-secrets/providers"))),e("pc",(async(e,t)=>await Va(e,"GET",`/external-secrets/providers/${t}`))),e("vc",(async(e,t,n)=>await Va(e,"POST",`/external-secrets/providers/${t}/test`,n))),e("yc",(async(e,t,n)=>await Va(e,"POST",`/external-secrets/providers/${t}`,n))),e("_c",(async(e,t)=>await Va(e,"POST",`/external-secrets/providers/${t}/update`))),e("dc",(async(e,t,n)=>await Va(e,"POST",`/external-secrets/providers/${t}/connect`,{connected:n}))),e("cc",(async e=>await Va(e,"GET","/secret-providers/types"))),e("sc",(async e=>await Va(e,"GET","/secret-providers/connections"))),e("oc",(async(e,t)=>await Va(e,"GET",`/secret-providers/connections/${t}`))),e("ic",(async(e,t)=>await Va(e,"POST","/secret-providers/connections",t))),e("uc",(async(e,t,n)=>await Va(e,"PATCH",`/secret-providers/connections/${t}`,n))),e("lc",(async(e,t)=>await Va(e,"POST",`/secret-providers/connections/${t}/test`))),e("ac",(async(e,t)=>await Va(e,"DELETE",`/secret-providers/connections/${t}`))),Qi=async(e,t)=>await Va(e,"GET",`/secret-providers/projects/${t}/connections`),e("Qs",(async e=>{await Va(e,"POST","/orchestration/worker/status")})),e("Xs",(async e=>await Va(e,"GET","/sso/provisioning/config"))),e("Zs",(async(e,t)=>await Va(e,"PATCH","/sso/provisioning/config",t))),e("Js",(async e=>await Va(e,"GET","/roles?withUsageCount=true"))),e("Gs",(async(e,t)=>await Va(e,"POST","/roles",t))),e("qs",(async(e,t)=>await Va(e,"GET",`/roles/${t.slug}?withUsageCount=true`))),e("Ys",(async(e,t,n)=>await Va(e,"PATCH",`/roles/${t}`,n))),e("Ks",(async(e,t)=>await Va(e,"DELETE",`/roles/${t}`))),e("zs",(async(e,t="")=>await Va(e,"GET",`/sso/saml/initsso?redirect=${t}`))),e("Rs",(async e=>await Va(e,"GET","/sso/saml/metadata"))),e("Ls",(async e=>await Va(e,"GET","/sso/saml/config"))),e("Vs",(async(e,t)=>await Va(e,"POST","/sso/saml/config",t))),e("Hs",(async e=>await Va(e,"GET","/sso/saml/config/test"))),e("Is",(async e=>await Va(e,"GET","/sso/oidc/config"))),e("Bs",(async(e,t)=>await Va(e,"POST","/sso/oidc/config",t))),e("As",(async e=>await Va(e,"GET","/license"))),e("ks",(async(e,t)=>await Va(e,"POST","/license/activate",t))),e("Ms",(async e=>await Va(e,"POST","/license/renew"))),e("Ns",(async e=>await Va(e,"POST","/license/enterprise/request_trial"))),e("js",(async(e,t)=>await Va(e,"POST","/license/enterprise/community-registered",t))),er=async(e,t)=>await Va(e,"POST","/webhooks/find",t),tr=async(e,t,n)=>{const{data:o}=await Ga(e.baseUrl,`/workflow-history/workflow/${t}`,n);return o},nr=async(e,t,n)=>{const{data:o}=await Ga(e.baseUrl,`/workflow-history/workflow/${t}/version/${n}`);return o},or=async(e,t,n)=>{const{data:o}=await Ya(e.baseUrl,`/workflow-history/workflow/${t}/versions`,{versionIds:n});return o},ar=async(e,t,n,o)=>{await Wa(e.baseUrl,`/workflow-history/workflow/${t}/versions/${n}`,o)},ir=n(Ki(),1),e("ws",rr=Ua(Ji.SETTINGS,(()=>{const e=v(!1),t=v({}),n=v({}),o=v({quota:-1,showSetupOnFirstLoad:!1,smtpSetup:!1,authenticationMethod:Zi.Email}),a=v(!1),i=v({enabled:!1,latestVersion:0,path:"/",swaggerUi:{enabled:!1}}),s=v({enabled:!1}),l=v({enabled:!1}),u=v("all"),c=v("all"),d=v(!1),p=v(!1),f=v(!1),m=r((()=>t.value?.isDocker??!1)),h=r((()=>t.value?.databaseType)),y=r((()=>t.value?.license.planName??"Community")),g=r((()=>t.value?.license.consumerId)),w=r((()=>t.value?.binaryDataMode)),b=r((()=>t.value?.pruning)),k=r((()=>({blockFileAccessToN8nFiles:t.value.security.blockFileAccessToN8nFiles,secureCookie:t.value.authCookie.secure}))),x=r((()=>t.value.enterprise??{})),I=r((()=>t.value.nodeJsVersion)),S=r((()=>t.value.nodeEnv)),E=r((()=>t.value.concurrency)),T=r((()=>-1!==E.value)),N=r((()=>i.value.enabled)),A=r((()=>i.value.swaggerUi.enabled)),_=r((()=>t.value.previewMode)),P=r((()=>i.value.latestVersion)),C=r((()=>i.value.path)),O=r((()=>t.value.aiAssistant?.enabled&&t.value.aiAssistant?.setup)),M=r((()=>t.value.askAi?.enabled)),D=r((()=>t.value.aiBuilder?.enabled&&t.value.aiBuilder?.setup)),L=r((()=>O.value||D.value)),B=r((()=>o.value.showSetupOnFirstLoad)),F=r((()=>t.value.deployment?.type||"default")),$=r((()=>"cloud"===t.value.deployment?.type)),R=r((()=>t.value.activeModules)),j=e=>R.value?.includes(e),V=r((()=>t.value.aiCredits?.enabled&&t.value.aiCredits?.setup)),W=r((()=>t.value.aiCredits?.credits)),z=r((()=>t.value.ai?.allowSendingParameterValues??!0)),U=r((()=>o.value.smtpSetup)),G=r((()=>t.value.telemetry?.enabled&&t.value.personalizationSurveyEnabled)),H=r((()=>t.value.telemetry)),Y=r((()=>t.value.logLevel)),q=r((()=>t.value.telemetry&&t.value.telemetry.enabled)),X=r((()=>t.value.enterprise?.mfaEnforcement??!1)),J=r((()=>s.value.enabled)),K=r((()=>l.value.enabled)),Z=r((()=>j("data-table"))),Q=r((()=>j("chat-hub"))),ee=r((()=>t.value.enterprise?.customRoles??!1)),te=r((()=>void 0===t.value.workflowTagsDisabled||!t.value.workflowTagsDisabled)),ne=r((()=>t.value.hiringBannerEnabled)),oe=r((()=>Boolean(t.value.templates?.enabled))),ae=r((()=>a.value)),ie=r((()=>t.value.templates?.host??"")),re=r((()=>t.value.pushBackend)),se=r((()=>t.value.communityNodesEnabled)),le=r((()=>t.value.unverifiedCommunityNodesEnabled)),ue=r((()=>t.value.allowedModules)),ce=r((()=>"queue"===t.value.executionMode)),de=r((()=>t.value.isMultiMain)),pe=r((()=>!!t.value.enterprise?.workerView)),fe=r((()=>t.value.workflowCallerPolicyDefaultOption)),me=r((()=>t.value.banners?.dismissed??[])),he=r((()=>"community"===y.value.toLowerCase())),ye=r((()=>"dev"===t.value.releaseChannel)),ve=r((()=>t.value.endpointHealth)),ge=e=>{if(t.value=e,o.value=e.userManagement,o.value&&(o.value.showSetupOnFirstLoad=!!t.value.userManagement.showSetupOnFirstLoad),t.value.publicApi&&(i.value=t.value.publicApi),s.value.enabled=t.value.mfa?.enabled,l.value.enabled=t.value.folders?.enabled,t.value.versionCli&&qa().setVersionCli(t.value.versionCli),t.value.authCookie.secure){const{browser:e}=ir.default.parse(navigator.userAgent);if("http:"===location.protocol&&(!["localhost","127.0.0.1"].includes(location.hostname)||"Safari"===e.name))return void document.write(Yt)}},we=async()=>{const e=qa(),n=await async function(e){return await Va(e,"GET","/settings")}(e.restApiContext);var o,a;ge(n),e.setDefaultLocale(n.defaultLocale),f.value=t.value.mfa?.enforced??!1,"public"!==n.settingsMode&&(t.value.communityNodesEnabled=n.communityNodesEnabled,t.value.unverifiedCommunityNodesEnabled=n.unverifiedCommunityNodesEnabled,o=n.allowedModules,t.value.allowedModules=o,a=n.saveDataErrorExecution,u.value=a,(e=>{c.value=e})(n.saveDataSuccessExecution),(e=>{p.value=e})(n.saveExecutionProgress),(e=>{d.value=e})(n.saveManualExecutions),e.setUrlBaseWebhook(n.urlBaseWebhook),e.setUrlBaseEditor(n.urlBaseEditor),e.setEndpointForm(n.endpointForm),e.setEndpointFormTest(n.endpointFormTest),e.setEndpointFormWaiting(n.endpointFormWaiting),e.setEndpointWebhook(n.endpointWebhook),e.setEndpointWebhookTest(n.endpointWebhookTest),e.setEndpointWebhookWaiting(n.endpointWebhookWaiting),e.setEndpointMcp(n.endpointMcp),e.setEndpointMcpTest(n.endpointMcpTest),e.setTimezone(n.timezone),e.setExecutionTimeout(n.executionTimeout),e.setMaxExecutionTimeout(n.maxExecutionTimeout),e.setInstanceId(n.instanceId),e.setOauthCallbackUrls(n.oauthCallbackUrls),e.setN8nMetadata(n.n8nMetadata||{}),e.setBinaryDataMode(n.binaryDataMode),n.telemetry.enabled&&async function(e){await Va(e,"GET","/events/session-started")}(e.restApiContext))};return{settings:t,userManagement:o,templatesEndpointHealthy:a,api:i,mfa:s,isDocker:m,isDevRelease:ye,endpointHealth:ve,isEnterpriseFeatureEnabled:x,databaseType:h,planName:y,consumerId:g,binaryDataMode:w,pruning:b,security:k,nodeJsVersion:I,nodeEnv:S,concurrency:E,isConcurrencyEnabled:T,isPublicApiEnabled:N,isSwaggerUIEnabled:A,isPreviewMode:_,publicApiLatestVersion:P,publicApiPath:C,showSetupPage:B,deploymentType:F,isCloudDeployment:$,isSmtpSetup:U,isPersonalizationSurveyEnabled:G,telemetry:H,logLevel:Y,isTelemetryEnabled:q,isMfaFeatureEnabled:J,isFoldersFeatureEnabled:K,isAiAssistantEnabled:O,isCustomRolesFeatureEnabled:ee,areTagsEnabled:te,isHiringBannerEnabled:ne,isTemplatesEnabled:oe,isTemplatesEndpointReachable:ae,templatesHost:ie,pushBackend:re,isCommunityNodesFeatureEnabled:se,isUnverifiedPackagesEnabled:le,allowedModules:ue,isQueueModeEnabled:ce,isMultiMain:de,isWorkerViewAvailable:pe,workflowCallerPolicyDefaultOption:fe,permanentlyDismissedBanners:me,saveDataErrorExecution:u,saveDataSuccessExecution:c,saveManualExecutions:d,saveDataProgressExecution:p,isCommunityPlan:he,isAskAiEnabled:M,isAiBuilderEnabled:D,isAiAssistantOrBuilderEnabled:L,isAiCreditsEnabled:V,aiCreditsQuota:W,isAiDataSharingEnabled:z,reset:()=>{t.value={}},getTimezones:async()=>await Va(qa().restApiContext,"GET","/options/timezones"),testTemplatesEndpoint:async()=>{const e=new Promise(((e,t)=>setTimeout((()=>t()),2e3)));await Promise.race([Bm(ie.value),e]),a.value=!0},disableTemplates:()=>{t.value={...t.value,templates:{...t.value.templates,enabled:!1}}},stopShowingSetupPage:()=>{o.value.showSetupOnFirstLoad=!1},getSettings:we,setSettings:ge,initialize:async()=>{e.value||(await we(),e.value=!0)},getModuleSettings:async()=>{n.value=await async function(e){return await Va(e,"GET","/module-settings")}(qa().restApiContext)},moduleSettings:n,updateAiDataSharingSettings:async e=>{const n=qa();await async function(e,t){return await Va(e,"POST","/ai/usage-settings",t)}(n.restApiContext,{allowSendingParameterValues:e}),t.value.ai&&(t.value.ai.allowSendingParameterValues=e)},isMFAEnforcementLicensed:X,isMFAEnforced:f,activeModules:R,isModuleActive:j,isDataTableFeatureEnabled:Z,isChatFeatureEnabled:Q}}))),e("do",sr="deleteUser"),e("Oo",lr="inviteUser"),e("Jo",ur="personalization"),cr="workArea",e("uo",dr="companyType"),e("bs","saas"),e("Co","ecommerce"),e("wo","education"),e("So","digital-agency"),e("Ss","systems-integrator"),e("Go","other"),e("Yo","personal"),e("no","companyIndustryExtended"),e("Wo","otherCompanyIndustryExtended"),e("Xo","physical-retail-or-services"),e("Zo","real-estate-or-construction"),e("Eo","government"),e("Ao","legal-industry"),e("Bo","marketing-industry"),e("Vo","media-industry"),e("jo","manufacturing-industry"),e("Ho","msp"),e("Do","healthcare"),e("To","finance-insurance-industry"),e("ko","it-industry"),e("xs","security-industry"),e("Cs","telecoms"),e("Ko","other"),e("co",pr="companySize"),e("oo","<20"),e("ao","20-99"),e("io","100-499"),e("so","500-999"),e("ro","1000+"),e("lo","personalUser"),e("Io","automationGoalSm"),e("Lo","lead-generation"),e("Po","customer-communication"),e("Mo","actions"),e("No","ad-campaign"),e("zo","reporting"),e("Fo","data-syncing"),e("Ro","other"),e("qo","automationGoalSmOther"),fr="codingSkill",e("Qa","automationBeneficiary"),e("to","myself"),e("$a","my-team"),e("eo","other-teams"),e("ts","reportedSource"),e("as","reportedSourceOther"),e("es","google"),e("ss","twitter"),e("ns","linkedin"),e("cs","youtube"),e("$o","friend"),e("rs","llm"),e("os","podcast"),e("Qo","event"),e("is","other"),mr="automationGoal",e("ho","automationGoalDevops"),e("go","automationGoalDevopsOther"),e("_o","other"),e("fo","ci-cd"),e("po","cloud-infrastructure-orchestration"),e("mo","data-syncing"),e("vo","incident-response"),e("yo","monitoring-alerting"),e("bo","reporting"),e("xo","ticketing-systems-integrations"),hr="customer-integrations",yr="customer-support",vr="finance-accounting",gr="product",wr="sales-marketing",br="security",e("Uo","other"),e("hs","role"),e("_s","roleOther"),e("ls","business-owner"),e("us","customer-support"),e("ds","data-science"),e("fs","devops"),e("ms","it"),e("ps","engineering"),e("vs","sales-and-marketing"),e("ys","security"),e("gs","other"),e("Xa",24),e("Za",kr="tagsManager"),e("Ya",xr="annotationTagsManager"),e("Ja",Ir="debugPaywall"),e("qa","communityPlusEnrollment"),e("Ka","https://docs.n8n.io/hosting/community-edition-features/#registered-community-edition"),e("Ga",Sr="variableModal"),e("Ua",Er="editCredential"),e("Wa",Tr="selectCredential"),e("Va",Nr=["[","]","^","\\","/",":","*","?",'"',"<",">","|"]),e("Ra",new RegExp(`[${Nr.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("")}]`)),e("Ba",/^\.+$/),e("za",128),e("Ia",Ar="deleteFolder"),e("Ha",_r="moveFolder"),e("La",{OPEN:"open",CREATE:"create",CREATE_WORKFLOW:"create_workflow",RENAME:"rename",MOVE:"move",CHOWN:"change_owner",TAGS:"manage_tags",DELETE:"delete"}),e("Fa",Pr="sourceControlPush"),e("Na",Cr="sourceControlPull"),e("Pa",Or="sourceControlPullResult"),e("Ma",Mr="projectMoveResourceModal"),e("ka",Dr="communityPackageInstall"),e("Oa",Lr="communityPackageManageConfirm"),e("Ea",`https://${vo}/integrations/community-nodes/installation/gui-install/`),e("Da",`https://${vo}/integrations/community-nodes/risks/`),e("ja","https://www.npmjs.com/search?q=keywords%3An8n-community-node-package"),e("Aa",Br={UNINSTALL:"uninstall",UPDATE:"update",VIEW_DOCS:"view-documentation"}),e("Ta","createOrEditApiKey"),e("xa",Ue()),e("ba",Fr=Ue()),e("ya",Ue()),e("va",Ue()),e("_a",Ue()),e("ga",Ue()),e("ha",$r=(e,t)=>(Array.isArray(e)?e:Object.entries(e)).some((e=>Ym(e)?$r(e,t):e?.toString().toLowerCase().includes(t.toLowerCase())))),Rr=e=>{if(null==e)return 0;if("object"==typeof e&&0===Object.keys(e).length||Array.isArray(e)&&0===e.length)return Number((2/1024).toFixed(2));try{const t=JSON.stringify(e),n=(new TextEncoder).encode(t).length/1024;return Number(n.toFixed(2))}catch(t){throw new Error(`Failed to calculate object size: ${t instanceof Error?t.message:"Unknown error"}`)}},jr=n(Za(),1),Vr=["","k","M","G","T","P","E"],Wr=(e,{[e]:t,...n})=>n,e("oa",zr=e=>!e&&0!==e||(Array.isArray(e)?!e.length||e.every(zr):"object"==typeof e&&(!Object.keys(e).length||Object.values(e).every(zr)))),e("ta",(e=>{const t="*___~#^#~___*";let n=e.match(/\[(.*?)]/g)??[];n=n.map((e=>e.slice(1,-1))).map((e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e));const o=e.replace(/\[(.*?)]/g,t).split("."),a=[];return o.forEach((e=>{let o=e.indexOf(t);for(;-1!==o;)0===o?(a.push(n.shift()??""),e=e.substr(13)):(a.push(e.substr(0,o)),e=e.substr(o)),o=e.indexOf(t);""!==e&&a.push(e)})),'["'+a.join('"]["')+'"]'})),e("ea",(e=>{const t="string"==typeof e?Ut(e):e;return Array.isArray(t)?t.map((e=>Xm(e)?e.json:e)):t})),e("pa",Ur=e=>isNaN(+e)?e:+e),Gr={"data-test-id":"sanitized-error-message"},Hr=["data-action-parameter-node"],Yr=T({__name:"NodeExecutionErrorMessage",props:{nodeName:{},errorMessage:{}},setup(e){const t=Ee();return(n,o)=>{const a=se("n8n-html");return H(),l("div",null,[me(pe("span",Gr,null,512),[[a,e.errorMessage]]),o[0]||(o[0]=pe("br",null,null,-1)),pe("a",{"data-action":"openNodeDetail","data-action-parameter-node":e.nodeName},s(h(t).baseText("node.executionError.openNode")),9,Hr)])}}}),({parse:qr,stringify:Xr}=JSON),({keys:Jr}=Object),Kr=String,Zr={},Qr="object",es=(e,t)=>t,ts=e=>e instanceof Kr?Kr(e):e,ns=(e,t)=>"string"==typeof t?new Kr(t):t,os=(e,t,n,o)=>{const a=[];for(let i=Jr(n),{length:r}=i,s=0;s<r;s++){const r=i[s],l=n[r];if(l instanceof Kr){const i=e[l];typeof i!==Qr||t.has(i)?n[r]=o.call(n,r,i):(t.add(i),n[r]=Zr,a.push({k:r,a:[e,t,i,o]}))}else n[r]!==Zr&&(n[r]=o.call(n,r,l))}for(let{length:i}=a,r=0;r<i;r++){const{k:e,a:t}=a[r];n[e]=o.call(n,e,os.apply(null,t))}return n},e("Qi",as=(e,t)=>{const n=qr(e,ns).map(ts),o=n[0],a=t||es,i=typeof o===Qr&&o?os(n,new Set,o,a):o;return a.call({"":i},"",i)}),is=["API","OAuth1","OAuth2"],rs=["Trigger"],ss=/value\["(.+?)"\]/s,e("Oi",ls=e=>e.reduce(((e,t)=>(Xm(t)&&e.push(t.json),e)),[])),e("Ui",(e=>void 0!==e.modes&&1===e.modes.length&&"list"===e.modes[0].name)),e("Ki",((e,t)=>{if(!t.displayOptions?.show)return!0;const n=us(e);return!!n&&n.name in t.displayOptions.show})),e("Ii",us=e=>{if(!e)return null;const t=fs(e),n=t.find((e=>"authentication"===e.name&&!e.options?.find((e=>"value"in e&&"none"===e.value))))??null??cs(e,t),o=!!n&&hs(e,n);return n&&o?n:null}),cs=(e,t)=>{const n={};return e.credentials?.forEach((e=>{if(e.displayOptions?.show)for(const t in e.displayOptions.show)n[t]=(n[t]||[]).concat((e.displayOptions.show[t]??[]).map((e=>e?e.toString():"")))})),t.find((e=>{let t=!0;return e.options?.forEach((o=>{"value"in o&&"string"==typeof o.value&&!n[e.name].includes(o.value)&&(t=!1)})),t}))||null},e("Ri",ds=(e,t)=>{if(!e)return[];const n=we.baseText("credentialEdit.credentialConfig.recommendedAuthTypeSuffix");let o=[];const a=us(e);return fs(e,t).filter((e=>e.name===a?.name)).forEach((t=>{t.options&&(o=o.concat(t.options.map((o=>{const a="value"in o?`${o.value}`:"";let i=!1;const r=ps(e,a);return r&&(i=void 0!==Xp().getCredentialTypeByName(r.name)?.__overwrittenProperties),{name:i&&!o.name.endsWith(n)?`${o.name} ${n}`:o.name,value:a,displayOptions:t.displayOptions}}))||[]))})),o.forEach(((e,t)=>{e.name.includes(n)&&(o.splice(t,1),o.unshift(e))})),o}),e("Mi",((e,t)=>e?e.credentials?.filter((e=>e.displayOptions?.show&&t in(e.displayOptions.show||{})))??[]:[])),e("zi",ps=(e,t)=>{const n=us(e),o=n?n.name:"";return e.credentials?.find((e=>e.displayOptions?.show?.[o]?.includes(t)))||null}),e("Fi",((e,t)=>{if(e&&t){const n=us(e),o=n?n.name:"";return ds(e).find((e=>t.displayOptions?.show?.[o]?.includes(e.value)))||null}return null})),e("Wi",((e,t)=>{let n=!1;return e.forEach((e=>{e.displayOptions?.show&&t.name in e.displayOptions.show&&(n=!0)})),n})),e("Li",fs=(e,t)=>{const n=[];return e?.credentials&&e.credentials.length>0&&e.credentials.forEach((o=>{o.displayOptions?.show&&Object.keys(o.displayOptions.show).forEach((o=>{const a=e.properties.filter((e=>e.name===o));a&&a.forEach((e=>{!n.includes(e)&&ms(e,t)&&n.push(e)}))}))})),n}),ms=(e,t)=>!t||!e.displayOptions?.show?.["@version"]||e.displayOptions.show["@version"]?.includes(t),e("Xi",((e,t,n)=>{if(!t)return;const o=um().getNodeType(t.type,t.typeVersion);if(o){const a=us(o);if(a){const o={name:t.name,properties:{parameters:{...t.parameters,[a.name]:n}}};e.updateNodeProperties(o)}}})),hs=(e,t)=>!t.displayOptions?.show||(Object.keys(t.displayOptions.show).forEach((t=>{const n=e.properties.find((e=>{e.name}));return!(n&&!hs(e,n))})),!0),e("Yi",ys=e=>{const t=e.match(ss);return t?t.pop():e}),e("ki",((e,t,n="",o=[])=>{const a="id"in e?e.id:e.name;return"add"===n&&!0===e.required||vs(a,o,t)})),e("qi",((e,t)=>{if(e.length!==t.length)return!0;const n=new Map(t.map((e=>[e.id,e])));for(const o of e){const e=n.get(o.id);if(!e)return!0;if(o.displayName!==e.displayName||o.required!==e.required||o.defaultMatch!==e.defaultMatch||o.display!==e.display||o.canBeUsedToMatch!==e.canBeUsedToMatch||o.type!==e.type)return!0}return!1})),e("Gi",vs=(e,t,n)=>{const o=ys(e);return!!o&&n&&(t||[]).includes(o)}),e("Bi",((e,t="light")=>e?"string"==typeof e?e:e[t]:null)),e("Di",gs=(e="")=>{const[,t,n]=e.match(/^(.*?)(?:\s*<([^>]+)>)?$/)??[];return{name:t.trim()||void 0,email:n}}),e("wi",25),e("Ei",(e=>{const{name:t,email:n}=gs(e??"");return Me(t??n??"",25)})),e("Ti",function(e){return e.Credential="credential",e.Workflow="workflow",e}({})),ws=function(e){return e.MOVE_NODE="moveNode",e.ADD_NODE="addNode",e.REMOVE_NODE="removeNode",e.ADD_CONNECTION="addConnection",e.REMOVE_CONNECTION="removeConnection",e.ENABLE_NODE_TOGGLE="enableNodeToggle",e.RENAME_NODE="renameNode",e.REPLACE_NODE_PARAMETERS="replaceNodeParameters",e}({}),e("Ci",bs=Ue()),ks=class{},e("gi",xs=class extends ks{name;timestamp;constructor(e,t){super(),this.name=e,this.timestamp=t}getTimestamp(){return this.timestamp}}),e("hi",Is=class extends ks{commands;constructor(e){super(),this.commands=e}getTimestamp(){return Math.max(0,...this.commands.map((e=>e.timestamp)))}}),e("vi",class e extends xs{nodeName;oldPosition;newPosition;constructor(e,t,n,o){super(ws.MOVE_NODE,o),this.nodeName=e,this.newPosition=n,this.oldPosition=t}getReverseCommand(t){return new e(this.nodeName,this.newPosition,this.oldPosition,t)}isEqualTo(t){return t instanceof e&&t.nodeName===this.nodeName&&t.oldPosition[0]===this.oldPosition[0]&&t.oldPosition[1]===this.oldPosition[1]&&t.newPosition[0]===this.newPosition[0]&&t.newPosition[1]===this.newPosition[1]}async revert(){return await new Promise((e=>{bs.emit("nodeMove",{nodeName:this.nodeName,position:this.oldPosition}),e()}))}}),e("mi",Ss=class e extends xs{node;constructor(e,t){super(ws.ADD_NODE,t),this.node=e}getReverseCommand(e){return new Es(this.node,e)}isEqualTo(t){return t instanceof e&&t.node.name===this.node.name}async revert(){return await new Promise((e=>{bs.emit("revertAddNode",{node:this.node}),e()}))}}),e("bi",Es=class extends xs{node;constructor(e,t){super(ws.REMOVE_NODE,t),this.node=e}getReverseCommand(e){return new Ss(this.node,e)}isEqualTo(e){return e instanceof Ss&&e.node.name===this.node.name}async revert(){return await new Promise((e=>{bs.emit("revertRemoveNode",{node:this.node}),e()}))}}),e("pi",Ts=class e extends xs{connectionData;constructor(e,t){super(ws.ADD_CONNECTION,t),this.connectionData=e}getReverseCommand(e){return new Ns(this.connectionData,e)}isEqualTo(t){return t instanceof e&&t.connectionData[0].node===this.connectionData[0].node&&t.connectionData[1].node===this.connectionData[1].node&&t.connectionData[0].index===this.connectionData[0].index&&t.connectionData[1].index===this.connectionData[1].index}async revert(){return await new Promise((e=>{bs.emit("revertAddConnection",{connection:this.connectionData}),e()}))}}),e("yi",Ns=class e extends xs{connectionData;constructor(e,t){super(ws.REMOVE_CONNECTION,t),this.connectionData=e}getReverseCommand(e){return new Ts(this.connectionData,e)}isEqualTo(t){return t instanceof e&&t.connectionData[0].node===this.connectionData[0].node&&t.connectionData[1].node===this.connectionData[1].node&&t.connectionData[0].index===this.connectionData[0].index&&t.connectionData[1].index===this.connectionData[1].index}async revert(){return await new Promise((e=>{setTimeout((()=>{bs.emit("revertRemoveConnection",{connection:this.connectionData}),e()}),10)}))}}),e("_i",As=class e extends xs{nodeName;oldState;newState;constructor(e,t,n,o){super(ws.ENABLE_NODE_TOGGLE,o),this.nodeName=e,this.newState=n,this.oldState=t}getReverseCommand(t){return new e(this.nodeName,this.newState,this.oldState,t)}isEqualTo(t){return t instanceof e&&t.nodeName===this.nodeName}async revert(){return await new Promise((e=>{bs.emit("enableNodeToggle",{nodeName:this.nodeName,isDisabled:this.oldState}),e()}))}}),e("xi",class e extends xs{currentName;newName;constructor(e,t,n){super(ws.RENAME_NODE,n),this.currentName=e,this.newName=t}getReverseCommand(t){return new e(this.newName,this.currentName,t)}isEqualTo(t){return t instanceof e&&t.currentName===this.currentName&&t.newName===this.newName}async revert(){return await new Promise((e=>{bs.emit("revertRenameNode",{currentName:this.currentName,newName:this.newName}),e()}))}}),e("Si",class e extends xs{constructor(e,t,n,o){super(ws.REPLACE_NODE_PARAMETERS,o),this.nodeId=e,this.currentParameters=t,this.newParameters=n}getReverseCommand(t){return new e(this.nodeId,this.newParameters,this.currentParameters,t)}isEqualTo(t){return t instanceof e&&t.nodeId===this.nodeId&&t.currentParameters===this.currentParameters&&t.newParameters===this.newParameters}async revert(){return await new Promise((e=>{bs.emit("revertReplaceNodeParameters",{nodeId:this.nodeId,currentProperties:this.currentParameters,newProperties:this.newParameters}),e()}))}}),e("fi",_s=Ua(Ji.HISTORY,{state:()=>({undoStack:[],redoStack:[],currentBulkAction:null,bulkInProgress:!1}),actions:{popUndoableToUndo(){if(this.undoStack.length>0)return this.undoStack.pop()},pushCommandToUndo(e,t=!0){this.bulkInProgress||(this.currentBulkAction?void 0===this.currentBulkAction.commands.find((t=>t.isEqualTo(e)))&&this.currentBulkAction.commands.push(e):this.undoStack.push(e),this.checkUndoStackLimit(),t&&this.clearRedoStack())},pushBulkCommandToUndo(e,t=!0){this.undoStack.push(e),this.checkUndoStackLimit(),t&&this.clearRedoStack()},checkUndoStackLimit(){this.undoStack.length>100&&this.undoStack.shift()},checkRedoStackLimit(){this.redoStack.length>100&&this.redoStack.shift()},clearUndoStack(){this.undoStack=[]},clearRedoStack(){this.redoStack=[]},reset(){this.clearRedoStack(),this.clearUndoStack()},popUndoableToRedo(){if(this.redoStack.length>0)return this.redoStack.pop()},pushUndoableToRedo(e){this.redoStack.push(e),this.checkRedoStackLimit()},startRecordingUndo(){this.currentBulkAction=new Is([])},stopRecordingUndo(){this.currentBulkAction&&this.currentBulkAction.commands.length>0&&(this.undoStack.push(this.currentBulkAction),this.checkUndoStackLimit()),this.currentBulkAction=null}}})),e("li",Ps=function(e){return e.Input="inputs",e.Output="outputs",e}({})),Cs=[Ps.Input,Ps.Output],e("di",function(e){return e.Default="default",e.StickyNote="n8n-nodes-base.stickyNote",e.AddNodes="n8n-nodes-internal.addNodes",e.ChoicePrompt="n8n-nodes-internal.choicePrompt",e}({})),e("ui",{PARAMETERS_UPDATED:"parameters-updated",INCOMING_CONNECTIONS_UPDATED:"incoming-connections-updated",PINNED_DATA_UPDATED:"pinned-data-updated",UPSTREAM_DIRTY:"upstream-dirty"}),Os=e=>!!e&&Object.getPrototypeOf(e)===Object.prototype,e("Wr",(e=>Os(e)&&"mimeType"in e&&"data"in e)),e("Kr",(e=>"object"==typeof e&&null!==e&&"showAuthSelector"in e)),e("Zr",(e=>["string","number","boolean"].includes(typeof e))),e("ci",(e=>!("resource"in e)||"folder"!==e.resource)),e("Vr","N8N_NDV_PANEL_WIDTH"),Ms=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,e("Br",sh),Ds=[],Ls=0);Ls<256;++Ls)Ds.push((Ls+256).toString(16).slice(1));Fs=new Uint8Array(16),$s="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rs={randomUUID:$s},e("zr",js=uh),e("Rr",Vs=Ua(Ji.WORKFLOWS_LIST,(()=>{const e=qa(),t=v(0),n=v({}),o=v([]),a=r((()=>Object.values(n.value).sort(((e,t)=>e.name.localeCompare(t.name)))));function i(e){n.value=e.reduce(((e,t)=>(t.id&&(e[t.id]=t),e)),{})}function s(e){n.value={...n.value,[e.id]:{...n.value[e.id],...qt(e)}}}function l(e){const{[e]:t,...o}=n.value;n.value=o}function u(e){const t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1);const a=n.value[e];a&&(a.active=!1,a.activeVersionId=null,a.activeVersion=null)}async function c({projectId:t,query:n,nodeTypes:o,tags:a,select:i,isArchived:r,triggerNodeTypes:s}){const l={projectId:t,query:n,nodeTypes:o,tags:a,isArchived:r,triggerNodeTypes:s},u=Object.values(l).some((e=>Zm(e)&&(Array.isArray(e)?e.length>0:""!==e))),{data:c}=await Gm(e.restApiContext,u?l:void 0,void 0,i);return c}return{totalWorkflowCount:t,workflowsById:n,activeWorkflows:o,allWorkflows:a,getWorkflowById:function(e){return n.value[e]},setWorkflows:i,addWorkflow:s,removeWorkflow:l,updateWorkflowInCache:function(e,t){n.value[e]&&(n.value[e]={...n.value[e],...t})},setWorkflowActiveInCache:function(e,t){-1===o.value.indexOf(e)&&o.value.push(e);const a=n.value[e];a&&(a.active=!0,a.activeVersionId=t.versionId,a.activeVersion=t)},setWorkflowInactiveInCache:u,fetchWorkflowsPage:async function(n,o=1,a=50,i,r={},l=!1,u=!1){const c={...r,projectId:n},d={skip:(o-1)*a,take:a,sortBy:i},{count:p,data:f}=await Hm(e.restApiContext,Object.keys(c).length?c:void 0,Object.keys(d).length?d:void 0,l||void 0,u||void 0);return t.value=p,f.filter((e=>"folder"!==e.resource)).forEach((e=>{s({...e,nodes:[],connections:{},versionId:""})})),f},searchWorkflows:c,fetchAllWorkflows:async function(e){const t=await c({projectId:e});return i(t),t},fetchWorkflow:async function(t){const n=await async function(e,t){return await Va(e,"GET",`/workflows/${t}`)}(e.restApiContext,t);return s(n),n},fetchWorkflowsWithNodesIncluded:async function(t){return await async function(e,t){return await Ja(e,"POST","/workflows/with-node-types",{nodeTypes:t})}(e.restApiContext,t)},fetchActiveWorkflows:async function(){const t=await async function(e){return await Va(e,"GET","/active-workflows")}(e.restApiContext);return o.value=t,t},checkWorkflowExists:async function(t){return(await async function(e,t){return await Va(e,"GET",`/workflows/${t}/exists`)}(e.restApiContext,t)).exists},deleteWorkflow:async function(t){await Va(e.restApiContext,"DELETE",`/workflows/${t}`),l(t)},archiveWorkflowInList:async function(t,o){const a=await Va(e.restApiContext,"POST",`/workflows/${t}/archive`,{expectedChecksum:o});if(!a.checksum)throw new Error("Failed to archive workflow");return n.value[t]&&(n.value[t].isArchived=!0,n.value[t].versionId=a.versionId),u(t),a},unarchiveWorkflowInList:async function(t){const o=await Va(e.restApiContext,"POST",`/workflows/${t}/unarchive`);if(!o.checksum)throw new Error("Failed to unarchive workflow");return n.value[t]&&(n.value[t].isArchived=!1,n.value[t].versionId=o.versionId),o}}}))),e("Ir",[...ra,Qo.EXECUTION_PREVIEW,Qo.WORKFLOWS,Qo.CREDENTIALS,Qo.PROJECTS_CREDENTIALS,Qo.PROJECTS_WORKFLOWS,Qo.PROJECT_SETTINGS,Qo.TEMPLATE_SETUP]),e("Lr",Ws=[...ra]),zs={IS_PART_OF_EXPERIMENT:"User is part of experiment"},e("Fr",Us=Ua("posthog",(()=>{const e=_m(),n=rr(),o=rx(),a=qa(),{debounce:i}=ei(),r=v(null),s=v({}),l=v({}),u=e=>l.value[e]??r.value?.[e];if(!window.featureFlags){const e=rh(zn).value;if(e)try{console.log("Overriding feature flags",e),"object"==typeof JSON.parse(e)&&(l.value=JSON.parse(e))}catch(t){console.log("Could not override experiment",t)}window.featureFlags={override:(e,n)=>{l.value[e]=n;try{rh(zn).value=JSON.stringify(l.value)}catch(t){}},getVariant:u,getAll:()=>r.value??{}}}const c=()=>{const t=a.instanceId,n=e.currentUser,o={instance_id:t,version_cli:a.versionCli};n&&"string"==typeof n.createdAt&&(o.created_at_timestamp=new Date(n.createdAt).getTime());const i=n?`${t}#${n.id}`:t;window.posthog?.identify?.(i,o)},d=i((e=>{jt.forEach((t=>((e,t)=>{const n=e[t];n&&s.value[t]!==n&&(o.track(zs.IS_PART_OF_EXPERIMENT,{name:t,variant:n}),s.value[t]=n)})(e,t)))}),{debounceTime:2e3});return{init:t=>{if(!window.posthog)return;const o=n.settings.posthog;if(!o.enabled)return;const i=e.currentUserId;if(!i)return;const s=`${a.instanceId}#${i}`,l={api_host:n.settings.posthog.proxy,autocapture:o.autocapture,disable_session_recording:o.disableSessionRecording,debug:!1,session_recording:{maskAllInputs:!1}};window.posthog?.init(o.apiKey,l),c(),t&&Object.keys(t).length?(r.value=t,l.bootstrap={distinctId:s,featureFlags:t},d(r.value)):window.posthog?.onFeatureFlags?.(((e,t)=>{r.value=t,d(r.value)}))},isFeatureEnabled:e=>!0===u(e),isVariantEnabled:(e,t)=>u(e)===t,getVariant:u,reset:()=>{window.posthog?.reset?.(),r.value=null,s.value={}},identify:c,setMetadata:(e,t)=>{"function"==typeof window.posthog?.people?.set&&"function"==typeof window.posthog?.register&&("user"===t?window.posthog?.people?.set(e):"events"===t&&window.posthog?.register(e))},capture:(e,t)=>{"function"==typeof window.posthog?.capture&&window.posthog.capture(e,t)},overrides:l}}))),e("jr",Gs=Ua(Ji.CHAT_PANEL_STATE,(()=>({isOpen:v(!1),width:v(400),activeMode:v("builder"),showCoachmark:v(!1),focusRequested:v(0)})))),e("Ar",Hs=Ua(Ji.FOCUSED_NODES,(()=>{const e=vm(),t=Us(),n=rx(),o=Gs(),a=hp(),i=r((()=>t.isVariantEnabled(sn.name,sn.variant))),s=v({}),l=v(new Set),u=r((()=>Object.values(s.value).filter((e=>"confirmed"===e.state)))),c=r((()=>Object.values(s.value).filter((e=>"unconfirmed"===e.state)))),d=r((()=>{const t=e.allNodes.length-u.value.length;return u.value.length>0&&t>0&&c.value.length>=t?[]:c.value})),p=r((()=>[...u.value,...d.value])),f=r((()=>u.value.length>=7)),m=r((()=>u.value.map((e=>e.nodeId)))),h=r((()=>p.value.length>0)),y=r((()=>d.value.length>50));function g(t){const n=e.allNodes.find((e=>e.id===t));return n?{name:n.name,type:n.type}:null}function w(e,t,o){const a=[];for(const n of e){const e=s.value[n];if(e)s.value[n]={...e,state:"confirmed"},a.push(e.nodeType);else{const e=g(n);e&&(s.value[n]={nodeId:n,nodeName:e.name,nodeType:e.type,state:"confirmed"},a.push(e.type))}}a.length>0&&n.track("ai.focusedNodes.added",{source:t,node_count:a.length,node_types:a,..."mention"===t&&void 0!==o?.mentionQueryLength?{mention_query_length:o.mentionQueryLength}:{}})}const b=Ie((e=>{const t=new Set(m.value),n={};for(const o of u.value)n[o.nodeId]=o;for(const o of e)if(!t.has(o)){const e=s.value[o];if(e&&"unconfirmed"===e.state)n[o]=e;else{const e=g(o);e&&(n[o]={nodeId:o,nodeName:e.name,nodeType:e.type,state:"unconfirmed"})}}s.value=n}),Wo(kn.INPUT.VALIDATION));function k(e){l.value=new Set(e),b(e)}function x(e,t="badge_click"){const o=s.value[e];if(!o)return;const a="confirmed"===o.state;delete s.value[e],s.value={...s.value},a&&n.track("ai.focusedNodes.removed",{method:t,removed_count:1,remaining_count:u.value.length})}return F((()=>e.workflowId),((e,t)=>{const o=u.value.length;s.value={},o>0&&void 0!==t&&n.track("ai.focusedNodes.removed",{method:"workflow_changed",removed_count:o,remaining_count:0})})),F((()=>e.allNodes),(e=>{const t=new Set(e.map((e=>e.id))),o=Object.keys(s.value);let a=0;for(const n of o)t.has(n)||("confirmed"===s.value[n]?.state&&a++,delete s.value[n]);a>0&&(s.value={...s.value},n.track("ai.focusedNodes.removed",{method:"node_deleted",removed_count:a,remaining_count:u.value.length}))}),{deep:!0}),F((()=>e.allNodes.map((e=>({id:e.id,name:e.name})))),(e=>{for(const{id:t,name:n}of e){const e=s.value[t];e&&e.nodeName!==n&&(s.value[t]={...e,nodeName:n})}}),{deep:!0}),F((()=>a.activeNode),(e=>{i.value&&o.isOpen&&e&&!s.value[e.id]&&k([e.id])})),{focusedNodesMap:s,canvasSelectedNodeIds:l,isFeatureEnabled:i,confirmedNodes:u,unconfirmedNodes:c,filteredUnconfirmedNodes:d,allVisibleNodes:p,shouldCollapseChips:f,confirmedNodeIds:m,hasVisibleNodes:h,tooManyUnconfirmed:y,confirmNodes:w,setUnconfirmedFromCanvasSelection:k,toggleNode:function(e,t){const n=s.value[e];n&&("unconfirmed"===n.state?w([e],"canvas_selection"):"confirmed"===n.state&&(t?s.value[e]={...n,state:"unconfirmed"}:x(e)))},removeNode:x,clearAll:function(){const e=u.value.length;s.value={},e>0&&n.track("ai.focusedNodes.removed",{method:"clear_all",removed_count:e,remaining_count:0})},handleNodeDeleted:function(e){s.value[e]&&(delete s.value[e],s.value={...s.value})},handleNodeRenamed:function(e,t){const n=s.value[e];n&&(s.value[e]={...n,nodeName:t})},setState:function(e,t){const n=s.value[e];n&&(s.value[e]={...n,state:t})},isNodeSelectedOnCanvas:function(e){return l.value.has(e)},buildContextPayload:function(){return i.value?function(e,t,n,o){if(0===e.length)return[];const a=new Map(t.map((e=>[e.id,e])));return e.map((e=>{const t=a.get(e.nodeId);if(!t)return{name:e.nodeName,incomingConnections:[],outgoingConnections:[]};const i=[],r=n[t.name];if(r?.main)for(const n of r.main)if(n)for(const e of n)e.node&&!i.includes(e.node)&&i.push(e.node);const s=[],l=o[t.name];if(l?.main)for(const n of l.main)if(n)for(const e of n)e.node&&!s.includes(e.node)&&s.push(e.node);let u;if(t.issues){u={};const e=t.issues;if(e.parameters)for(const[t,n]of Object.entries(e.parameters))Array.isArray(n)&&(u[t]=n);if(e.credentials)for(const[t,n]of Object.entries(e.credentials))Array.isArray(n)&&(u[`credential:${t}`]=n);0===Object.keys(u).length&&(u=void 0)}return{name:t.name,issues:u,incomingConnections:i,outgoingConnections:s}}))}(u.value,e.allNodes,e.connectionsByDestinationNode,e.connectionsBySourceNode):[]},confirmAllUnconfirmed:function(){const e=c.value.map((e=>e.nodeId));e.length>0&&w(e,"canvas_selection")},removeAllConfirmed:function(){const e=u.value.length,t=u.value.map((e=>e.nodeId));for(const n of t)if(l.value.has(n)){const e=s.value[n];e&&(s.value[n]={...e,state:"unconfirmed"})}else delete s.value[n];s.value={...s.value},e>0&&n.track("ai.focusedNodes.removed",{method:"clear_all",removed_count:e,remaining_count:u.value.length})}}}))),Ys=/<__PLACEHOLDER.*?__>/g,e("Or",qs=o(((e,t)=>{var n,o;n=e,o=function(){function e(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){r(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,r){var s=a.URL||a.webkitURL,l=document.createElement("a");i=i||t.name||"download",l.download=i,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):n(l.href)?e(t,i,r):o(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,i){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob((s=t,void 0===(l=i)?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\ufeff",s],{type:s.type}):s),a);else if(n(t))e(t,a,i);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){o(r)}))}var s,l}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var s="application/octet-stream"===t.type,l=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||i)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(t)}else{var d=a.URL||a.webkitURL,p=d.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});a.saveAs=r.saveAs=r,void 0!==t&&(t.exports=r)},"function"==typeof define&&define.amd?define([],o):void 0!==e?o():(o(),n.FileSaver={})}))),Xs=qs(),e("Dr",Js=Ua("workflowHistory",(()=>{const e=qa(),t=rr(),n=vm(),o=Vs(),a=r((()=>t.settings.workflowHistory?.licensePruneTime)),i=r((()=>t.settings.workflowHistory?.pruneTime)),s=r((()=>-1!==a.value&&a.value===i.value)),l=async(t,n)=>await nr(e.restApiContext,t,n);return{getWorkflowHistory:async(t,n)=>await tr(e.restApiContext,t,n),getWorkflowVersion:l,downloadVersion:async(e,t,n)=>{const[a,i]=await Promise.all([o.fetchWorkflow(e),l(e,t)]),{connections:r,nodes:s}=i;(0,Xs.saveAs)(new Blob([JSON.stringify({...a,nodes:s,connections:r},null,2)],{type:"application/json;charset=utf-8"}),`${a.name}(${n.formattedCreatedAt}).json`)},cloneIntoNewWorkflow:async(t,a,i)=>{const[r,s]=await Promise.all([o.fetchWorkflow(t),l(t,a)]),{connections:u,nodes:c}=s,{name:d}=r,p={nodes:c,connections:u,name:(await Um(e.restApiContext,{name:`${d} (${i.formattedCreatedAt})`})).name};return await n.createNewWorkflow(p)},restoreWorkflow:async(e,t)=>{const{connections:a,nodes:i}=await l(e,t),r={connections:a,nodes:i};return await n.updateWorkflow(e,r,!0).catch((async t=>{if(400===t.httpStatusCode&&"string"==typeof t.message&&t.message.includes("can not be activated"))return await o.fetchWorkflow(e);throw new Error(t)}))},updateWorkflowHistoryVersion:async(t,n,o)=>{await ar(e.restApiContext,t,n,o)},evaluatedPruneTime:i,shouldUpgrade:s}}))),e("Er",Ks=Ua("npsSurvey",(()=>{const e=qa(),t=xm(),n=rr(),o=v(!1),a=v(),i=v();async function r(){Ka(a.value);const t={responded:!0,lastShownAt:a.value.lastShownAt};await jm(e.restApiContext,t),a.value=t}return{resetNpsSurveyOnLogOut:function(){o.value=!1},showNpsSurveyIfPossible:async function(){if(!o.value)return;t.openModal(va),o.value=!1;const n={waitingForResponse:!0,lastShownAt:Date.now(),ignoredCount:a.value&&"ignoredCount"in a.value?a.value.ignoredCount:0};await jm(e.restApiContext,n),a.value=n},ignoreNpsSurvey:async function(){Ka(a.value);const t=a.value,n="ignoredCount"in t?t.ignoredCount:0;if(n+1>=3)return void(await r());const o={waitingForResponse:!0,lastShownAt:a.value.lastShownAt,ignoredCount:n+1};await jm(e.restApiContext,o),a.value=o},respondNpsSurvey:r,setupNpsSurveyOnLogin:function(e,t){i.value=e,t&&function(e){if(!n.isTelemetryEnabled)return void(o.value=!1);a.value=e.npsSurvey;const t=Boolean(e.userActivated),i=e.userActivatedAt,r=a.value?.lastShownAt;if(!t||!i)return;if(Date.now()-i<bo)return;if(!a.value||!r)return void(o.value=!0);const s=Date.now()-r;"responded"in a.value&&s<Ko||"waitingForResponse"in a.value&&s<$o||(o.value=!0)}(t)}}}))),Zs="/source-control",el=async(e,t)=>await Va(e,"POST",`${Zs}/push-workfolder`,t),tl=async(e,t)=>await Va(e,"POST",`${Zs}/pull-workfolder`,t),nl=async e=>await Va(e,"GET",`${Zs}/get-branches`),ol=(Qs=e=>async(t,n)=>await Va(t,e,`${Zs}/preferences`,n))("POST"),al=Qs("PATCH"),il=async e=>await Va(e,"GET",`${Zs}/preferences`),rl=async e=>await Va(e,"GET",`${Zs}/status`),sl=async(e,t)=>await Va(e,"GET",`${Zs}/remote-content/workflow/${t}`),ll=async(e,t={direction:"push",preferLocalVersion:!0,verbose:!1})=>await Va(e,"GET",`${Zs}/get-status`,t),ul=async(e,t)=>await Va(e,"POST",`${Zs}/disconnect`,{keepKeyPair:t}),cl=async(e,t)=>await Va(e,"POST",`${Zs}/generate-key-pair`,{keyGeneratorType:t}),e("wr",dl=Ua("sourceControl",(()=>{const e=qa(),t=rr(),n=r((()=>t.isEnterpriseFeatureEnabled[jn.SourceControl])),o=N(["ed25519","rsa"].map((e=>({value:e,label:e.toUpperCase()})))),a=N({branchName:"",branches:[],repositoryUrl:"",branchReadOnly:!1,branchColor:"#5296D6",connected:!1,publicKey:"",keyGeneratorType:"ed25519",connectionType:"ssh"}),i=N({commitMessage:"commit message"}),s=e=>{Object.assign(a,e)},l=t=>async n=>{s(await t(e.restApiContext,n))},u=l(ol),c=l(al);return{isEnterpriseSourceControlEnabled:n,state:i,preferences:a,pushWorkfolder:async t=>(i.commitMessage=t.commitMessage,await el(e.restApiContext,{force:t.force,commitMessage:t.commitMessage,fileNames:t.fileNames})),pullWorkfolder:async(t,n)=>await tl(e.restApiContext,{force:t,autoPublish:n}),getPreferences:async()=>{s(await il(e.restApiContext))},setPreferences:s,generateKeyPair:async t=>{await cl(e.restApiContext,t);const n=await il(e.restApiContext);return a.publicKey=n.publicKey,{publicKey:n.publicKey}},getBranches:async()=>{s(await nl(e.restApiContext))},savePreferences:u,updatePreferences:c,disconnect:async t=>{await ul(e.restApiContext,t),s({connected:!1,branches:[]})},getStatus:async()=>await rl(e.restApiContext),getAggregatedStatus:async t=>await ll(e.restApiContext,t),getRemoteWorkflow:async t=>await sl(e.restApiContext,t),sshKeyTypesWithLabel:o}}))),e("Sr",pl=Ua("canvas",(()=>{const e=vm(),t=_h(),n=v(null),o=r((()=>e.allNodes)),a=r((()=>o.value.filter((e=>e.type.includes("langchain")||"n8n-nodes-base.evaluation"===e.type&&"setMetrics"===e.parameters?.operation)))),i=v(!1);return{newNodeInsertPosition:n,isLoading:t.isLoading,aiNodes:a,hasRangeSelection:r((()=>i.value)),startLoading:t.startLoading,setLoadingText:t.setLoadingText,stopLoading:t.stopLoading,setHasRangeSelection:function(e){i.value=e}}}))),fl=Ua(Ji.WEBHOOKS,(()=>({...qa(),...vm(),...xm(),..._m(),...hp(),...rr()}))),ml={CONTEXT_MENU:10,APP_HEADER:99,SELECT_BOX:100,CANVAS_ADD_BUTTON:101,APP_SIDEBAR:999,CANVAS_SELECT_BOX:100,TOP_BANNERS:999,NODE_CREATOR:1700,ASK_ASSISTANT_CHAT:1750,NDV:1800,COMMAND_BAR:1900,DIALOGS:1950,MODALS:2e3,TOASTS:2100,ASK_ASSISTANT_FLOATING_BUTTON:3e3,ASK_ASSISTANT_FLOATING_BUTTON_TOOLTIP:3e3,CODEMIRROR_TOOLTIP:3e3,FLOATING_UI:3e3,DRAGGABLE:9999999,ACTIVE_STICKY:9999999,WORKFLOW_PREVIEW_NDV:9999999,NPS_SURVEY_MODAL:3001},hl=()=>{Object.keys(ml).forEach((e=>{const t=`--${e.toLowerCase().replaceAll("_","-")}--z`,n=ml[e];document.documentElement.style.setProperty(t,`${n}`)}))},e("br",yl=()=>({APP_Z_INDEXES:ml,setAppZIndexes:hl})),vl=[],e("vr",gl=e=>{const t=_m().currentUser;if(t&&e){const n=t.isDefaultUser?ia.Default:t.role;return e.includes(n)}return!1}),e("_r",wl=Ua(Ji.RBAC,(()=>{const e=v([]),t=v({}),n=v([]),o=v({}),a=v({aiAssistant:{},workflow:{},tag:{},annotationTag:{},user:{},credential:{},variable:{},projectVariable:{},sourceControl:{},externalSecretsProvider:{},externalSecret:{},project:{},orchestration:{},workersView:{},eventBusDestination:{},auditLogs:{},banner:{},community:{},communityPackage:{},ldap:{},license:{},logStreaming:{},saml:{},oidc:{},provisioning:{},securityAudit:{},folder:{},insights:{},dataTable:{},execution:{},workflowTags:{},role:{},mcp:{},mcpApiKey:{},chatHub:{},chatHubAgent:{},breakingChanges:{},apiKey:{},credentialResolver:{},securitySettings:{}});return{globalRoles:e,rolesByProjectId:t,globalScopes:n,scopesByProjectId:o,scopesByResourceId:a,addGlobalRole:function(t){e.value.includes(t)||e.value.push(t)},hasRole:function(t){return e.value.includes(t)},addGlobalScope:function(e){n.value.includes(e)||n.value.push(e)},setGlobalScopes:function(e){n.value=e},addProjectScope:function(e,t){o.value[t.projectId]||(o.value[t.projectId]=[]),o.value[t.projectId].includes(e)||o.value[t.projectId].push(e)},addResourceScope:function(e,t){const n=a.value[t.resourceType];n[t.resourceId]||(n[t.resourceId]=[]),n[t.resourceId].includes(e)||n[t.resourceId].push(e)},hasScope:function(e,t,i){return on(e,{global:n.value,project:t?.projectId?o.value[t.projectId]:[],resource:t?.resourceType&&t?.resourceId?a.value[t.resourceType][t.resourceId]:[]},void 0,i)}}}))),e("gr",bl=e=>{if(!e?.scope)return!0;const{projectId:t,resourceType:n,resourceId:o,scope:a,options:i}=e;return wl().hasScope(a,{projectId:t,resourceType:n,resourceId:o},i)}),e("mr",kl=e=>!!e?.bypass?.()||!!_m().currentUser),e("hr",(()=>{const e=_m().currentUser?.mfaAuthenticated??!1,t=rr().isMFAEnforced;return!e&&t})),e("pr",xl=()=>{const e=_m().currentUser;return!!e&&e.isDefaultUser}),Il=()=>_m().isInstanceOwner,e("fr",Sl=e=>{if(!e?.feature)return!0;const t=Array.isArray(e.feature)?e.feature:[e.feature],n=rr();return"allOf"===(e.mode??"allOf")?t.every((e=>n.isEnterpriseFeatureEnabled[e])):t.some((e=>n.isEnterpriseFeatureEnabled[e]))}),e("dr",El=()=>!_m().currentUser),Tl={authenticated:kl,custom:e=>!!e&&e(),defaultUser:xl,instanceOwner:Il,enterprise:Sl,guest:El,rbac:bl,role:gl},Nl={initialized:!1,data:null,usage:null,loadingPlan:!1},e("lr",Al=Ua(Ji.CLOUD_PLAN,(()=>{const e=qa(),n=rr(),o=N(Nl),a=v(null),i=v(Date.now()),s=r((()=>o.data?.userIsTrialing??!1)),l=r((()=>o.data?.bannerConfig)),u=r((()=>!0===l.value?.forceShow)),c=r((()=>{const e=n.permanentlyDismissedBanners;return e.includes("TRIAL")||e.includes("TRIAL_OVER")})),d=r((()=>!!l.value&&(!y.value||u.value||!c.value))),p=r((()=>({show:!!l.value?.timeLeft,text:l.value?.timeLeft?.text}))),f=r((()=>!0===l.value?.showExecutions)),m=r((()=>({text:l.value?.cta?.text??"Upgrade Now",icon:l.value?.cta?.icon??"zap",size:l.value?.cta?.size??"small",style:l.value?.cta?.style??"success",href:l.value?.cta?.href}))),h=r((()=>l.value?.icon)),y=r((()=>l.value?.dismissible??!0)),g=r((()=>o.data)),w=r((()=>o.usage)),b=r((()=>a.value?.selectedApps)),k=r((()=>{const e=a.value?.information;return e&&"which_of_these_do_you_feel_comfortable_doing"in e&&e.which_of_these_do_you_feel_comfortable_doing&&Array.isArray(e.which_of_these_do_you_feel_comfortable_doing)?e.which_of_these_do_you_feel_comfortable_doing.length:0})),x=r((()=>o.data?.userIsTrialing&&zo.now().toMillis()>=zo.fromISO(o.data?.expirationDate).toMillis())),I=r((()=>!(!o.usage?.executions||!o.data?.monthlyExecutionsLimit)&&o.usage?.executions>=o.data?.monthlyExecutionsLimit)),S=r((()=>{const e=n.settings.n8nMetadata?.userId;return Mh(["instanceOwner"])&&n.isCloudDeployment&&!!e})),E=async()=>{if(!S.value)throw new Error("User does not have a cloud plan");let t=null;try{t=await async function(e){return await Ga(e.baseUrl,"/cloud/proxy/user/me")}(e.restApiContext),a.value=t}catch(n){throw new Error(n.message)}},T=async()=>await async function(e){return await Ga(e.baseUrl,"/cloud/proxy/login/code")}(e.restApiContext),A=async()=>{if(!S.value)throw new Error("User does not have a cloud plan");let t;o.loadingPlan=!0;try{t=await async function(e){return await Ga(e.baseUrl,"/admin/cloud-plan")}(e.restApiContext),o.data=t,o.loadingPlan=!1}catch(n){throw o.loadingPlan=!1,new Error(n)}return t},_=async()=>{const t=await async function(e){return await Ga(e.baseUrl,"/cloud/limits")}({baseUrl:e.baseUrl,pushRef:""});return o.usage=t,t},P=r((()=>o.data&&o.usage?{workflowsLeft:o.data.activeWorkflowsLimit-o.usage.activeWorkflows,executionsLeft:o.data.monthlyExecutionsLimit-o.usage.executions}:{workflowsLeft:-1,executionsLeft:-1})),C=r((()=>{if(!o.data?.expirationDate)return-1;const e=(new Date).valueOf()-new Date(o.data.expirationDate).valueOf(),t=Math.floor(e/864e5);return Math.ceil(t)})),O=r((()=>{if(!o.data?.expirationDate)return{count:0,unit:"days"};const e=new Date(o.data.expirationDate).valueOf()-i.value;if(e<=0)return{count:0,unit:"minutes"};const t=e/36e5;return t<1?{count:Math.ceil(e/6e4),unit:"minutes"}:t<24?{count:Math.ceil(t),unit:"hours"}:{count:Math.ceil(t/24),unit:"days"}})),M=async()=>{try{if(await A(),!s.value)return;await _(),(()=>{const e=setInterval((async()=>{i.value=Date.now();try{if(await _(),x.value||I.value)return void clearInterval(e)}catch{}}),Wn)})()}catch(t){throw new Error(t.message)}},D=async()=>{try{await E()}catch(t){throw new Error(t.message)}};return{state:o,usageLeft:P,trialDaysLeft:C,trialTimeLeft:O,userIsTrialing:s,currentPlanData:g,currentUsageData:w,trialExpired:x,allExecutionsUsed:I,hasCloudPlan:S,currentUserCloudInfo:a,generateCloudDashboardAutoLoginLink:async e=>{const t=new URLSearchParams,n=new URL(window.location.href).host.split(".").slice(1).join("."),{code:o}=await T(),a=`https://${n}/login`;return t.set("code",o),t.set("returnPath",e.redirectionPath),`${a}?${t.toString()}`},initialize:async()=>{if(!o.initialized){try{await M()}catch(e){console.warn("Error checking for cloud plan data:",e)}try{await D()}catch(e){console.warn("Error fetching user cloud account:",e)}o.initialized=!0}},getOwnerCurrentPlan:A,getInstanceCurrentUsage:_,reset:()=>{a.value=null,o.data=null,o.usage=null},checkForCloudPlanData:M,fetchUserCloudAccount:D,getAutoLoginCode:T,selectedApps:b,codingSkill:k,shouldShowBanner:d,bannerConfig:l,bannerForceShow:u,isBannerDismissed:c,bannerTimeLeft:p,showExecutions:f,bannerCta:m,bannerIcon:h,bannerDismissible:y}}))),e("sr",(()=>Us().getVariant(Zt.name)===Zt.variant&&Al().userIsTrialing)),e("or",function(e){return e.emptyWorkflowLink="empty_workflow_link",e.emptyInstanceCard="empty_instance_card",e.sidebarButton="sidebar_button",e.emptyStateBuilderPrompt="empty_state_builder_prompt",e}({})),_l=e=>{if(!e)return"";switch(e){case"Executive/Owner":case"Product & Design":return"categories/ai/";case"Support":return"categories/support/";case"Sales":return"categories/sales/";case"IT":case"Engineering":return"categories/it-ops/";case"Marketing":return"categories/marketing/";case"Other":return"categories/other/";default:return""}},e("cr",(e=>{rx().track("User clicked on templates",{role:Al().currentUserCloudInfo?.role,active_workflow_count:Vs().activeWorkflows.length,source:e})})),Pl="undefined"!=typeof window&&"undefined"!=typeof document,Cl=e=>void 0!==e,Ol=Object.prototype.toString,Ml=e=>"[object Object]"===Ol.call(e),Dl=()=>{},Ll=e=>e(),Bl=Pl?window:void 0,Fl={value:()=>{}},Yh.prototype=Hh.prototype={constructor:Yh,on:function(e,t){var n,o=this._,a=qh(e+"",o),i=-1,r=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<r;)if(n=(e=a[i]).type)o[n]=Jh(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Jh(o[n],e.name,null);return this}for(;++i<r;)if((n=(e=a[i]).type)&&(n=Xh(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,i=o.length;a<i;++a)o[a].value.apply(t,n)}},Rl={svg:"http://www.w3.org/2000/svg",xhtml:$l="http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jl=Array.prototype.find,Vl=Array.prototype.filter,vy.prototype={constructor:vy,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},tv.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},Wl=[null],$v.prototype=Rv.prototype={constructor:$v,select:oy,selectAll:sy,selectChild:dy,selectChildren:fy,filter:my,data:xy,enter:yy,exit:Sy,join:Ey,merge:Ty,selection:jv,order:Ny,sort:Ay,call:Py,nodes:Cy,node:Oy,size:My,empty:Dy,each:Ly,attr:Wy,style:Yy,property:Zy,classed:sv,text:dv,html:hv,raise:vv,lower:wv,append:bv,insert:xv,remove:Sv,clone:Nv,datum:Av,on:Ov,dispatch:Bv,[Symbol.iterator]:Fv},zl={passive:!1},Ul={capture:!0,passive:!1},Gl=e=>()=>e,Yv.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},Yl=1/(Hl=.7),ql="\\s*([+-]?\\d+)\\s*",Xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kl=/^#([0-9a-f]{3,8})$/,Zl=new RegExp(`^rgb\\(${ql},${ql},${ql}\\)$`),Ql=new RegExp(`^rgb\\(${Jl},${Jl},${Jl}\\)$`),eu=new RegExp(`^rgba\\(${ql},${ql},${ql},${Xl}\\)$`),tu=new RegExp(`^rgba\\(${Jl},${Jl},${Jl},${Xl}\\)$`),nu=new RegExp(`^hsl\\(${Xl},${Jl},${Jl}\\)$`),ou=new RegExp(`^hsla\\(${Xl},${Jl},${Jl},${Xl}\\)$`),au={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zv(eg,ig,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tg,formatHex:tg,formatHex8:ng,formatHsl:og,formatRgb:ag,toString:ag}),Zv(cg,ug,Qv(eg,{brighter(e){return e=null==e?Yl:Math.pow(Yl,e),new cg(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Hl:Math.pow(Hl,e),new cg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cg(hg(this.r),hg(this.g),hg(this.b),mg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dg,formatHex:dg,formatHex8:pg,formatRgb:fg,toString:fg})),Zv(bg,wg,Qv(eg,{brighter(e){return e=null==e?Yl:Math.pow(Yl,e),new bg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Hl:Math.pow(Hl,e),new bg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new cg(Ig(e>=240?e-240:e+120,a,o),Ig(e,a,o),Ig(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new bg(kg(this.h),xg(this.s),xg(this.l),mg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mg(this.opacity);return`${1===e?"hsl(":"hsla("}${kg(this.h)}, ${100*xg(this.s)}%, ${100*xg(this.l)}%${1===e?")":`, ${e})`}`}})),iu=e=>()=>e,ru=function e(t){var n=Sg(t);function o(e,t){var o=n((e=ug(e)).r,(t=ug(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),r=Eg(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=a(t),e.b=i(t),e.opacity=r(t),e+""}}return o.gamma=e,o}(1),su=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lu=new RegExp(su.source,"g"),uu=180/Math.PI,cu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},pu=Bg(Dg,"px, ","px)","deg)"),fu=Bg(Lg,", ",")",")"),mu=function e(t,n,o){function a(e,a){var i,r,s=e[0],l=e[1],u=e[2],c=a[0],d=a[1],p=a[2],f=c-s,m=d-l,h=f*f+m*m;if(h<1e-12)r=Math.log(p/u)/t,i=function(e){return[s+e*f,l+e*m,u*Math.exp(t*e*r)]};else{var y=Math.sqrt(h),v=(p*p-u*u+o*h)/(2*u*n*y),g=(p*p-u*u-o*h)/(2*p*n*y),w=Math.log(Math.sqrt(v*v+1)-v);r=(Math.log(Math.sqrt(g*g+1)-g)-w)/t,i=function(e){var o,a=e*r,i=Fg(w),c=u/(n*y)*(i*(o=t*a+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[s+c*f,l+c*m,u*i/Fg(t*a+w)]}}return i.duration=1e3*r*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},a}(Math.SQRT2,2,4),hu=0,yu=0,vu=0,gu=1e3,ku=0,xu=0,Iu=0,Su="object"==typeof performance&&performance.now?performance:Date,Eu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},jg.prototype=Vg.prototype={constructor:jg,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?$g():+n)+(null==t?0:+t),this._next||bu===this||(bu?bu._next=this:wu=this,bu=this),this._call=e,this._time=n,Ug()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ug())}},Tu=Hh("start","end","cancel","interrupt"),Nu=[],Au=0,_u=1,Pu=2,Cu=3,Ou=4,Mu=5,Du=6,Lu=Rv.prototype.constructor,Bu=0,Fu=Rv.prototype,zw.prototype={constructor:zw,select:_w,selectAll:Pw,selectChild:Fu.selectChild,selectChildren:Fu.selectChildren,filter:Sw,merge:Ew,selection:Cw,transition:Vw,call:Fu.call,nodes:Fu.nodes,node:Fu.node,size:Fu.size,empty:Fu.empty,each:Fu.each,on:Nw,attr:uw,attrTween:mw,style:Mw,styleTween:Bw,text:Fw,textTween:jw,remove:Aw,tween:ew,delay:vw,duration:bw,ease:xw,easeVarying:Iw,end:Ww,[Symbol.iterator]:Fu[Symbol.iterator]},$u={time:null,delay:0,duration:250,ease:Gw},Rv.prototype.interrupt=Kg,Rv.prototype.transition=Yw,Ru=e=>()=>e,Xw.prototype={constructor:Xw,scale:function(e){return 1===e?this:new Xw(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Xw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},ju=new Xw(1,0,0),Xw.prototype,e("Wn",Vu=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Vu||{})),Wu=(e=>(e.Partial="partial",e.Full="full",e))(Wu||{}),zu=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(zu||{}),Uu=(e=>(e.Strict="strict",e.Loose="loose",e))(Uu||{}),e("Vn",Gu=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Gu||{})),Hu=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Hu||{}),e("Un",Yu=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Yu||{})),qu=["INPUT","SELECT","TEXTAREA"],Xu="undefined"!=typeof document?document:null,Ju="vue-flow__node-desc",Ku="vue-flow__edge-desc",Zu=["Enter"," ","Escape"],Qu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ec=()=>{},tc=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(tc||{}),nc={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"},oc=class extends Error{constructor(e,...t){var n;super(null==(n=nc[e])?void 0:n.call(nc,...t)),this.name="VueFlowError",this.code=e,this.args=t}},e("nr",ac=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0}),ic=()=>!0,rc=250,sc={[Vu.Left]:Vu.Right,[Vu.Right]:Vu.Left,[Vu.Top]:Vu.Bottom,[Vu.Bottom]:Vu.Top},lc=["production","prod"],uc=Symbol("vueFlow"),e("Hn",cc=Symbol("nodeId")),dc=Symbol("nodeRef"),pc=Symbol("edgeId"),fc=Symbol("edgeRef"),mc=Symbol("slots"),hc=.1,yc=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,vc={zoomIn:Tk,zoomOut:Tk,zoomTo:Tk,fitView:Tk,setCenter:Tk,fitBounds:Tk,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Tk,setTransform:Tk,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1},gc=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"],wc=["data-id","data-handleid","data-nodeid","data-handlepos"],e("Yn",bc=T({name:"Handle",compatConfig:{MODE:3},props:{id:{default:null},type:{},position:{default:()=>Vu.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=S(e,["position","connectable","connectableStart","connectableEnd","id"]),o=M((()=>n.type??"source")),a=M((()=>n.isValidConnection??null)),{id:i,connectionStartHandle:s,connectionClickStartHandle:u,connectionEndHandle:c,vueFlowRef:d,nodesConnectable:p,noDragClassName:f,noPanClassName:m}=Vk(),{id:y,node:g,nodeEl:w,connectedEdges:b}=Ik(),k=v(),x=M((()=>void 0===e.connectableStart||e.connectableStart)),I=M((()=>void 0===e.connectableEnd||e.connectableEnd)),E=M((()=>{var t,n,a,i,r,l;return(null==(t=s.value)?void 0:t.nodeId)===y&&(null==(n=s.value)?void 0:n.id)===e.id&&(null==(a=s.value)?void 0:a.type)===o.value||(null==(i=c.value)?void 0:i.nodeId)===y&&(null==(r=c.value)?void 0:r.id)===e.id&&(null==(l=c.value)?void 0:l.type)===o.value})),T=M((()=>{var t,n,a;return(null==(t=u.value)?void 0:t.nodeId)===y&&(null==(n=u.value)?void 0:n.id)===e.id&&(null==(a=u.value)?void 0:a.type)===o.value})),{handlePointerDown:N,handleClick:A}=xk({nodeId:y,handleId:e.id,isValidConnection:a,type:o}),_=r((()=>"string"==typeof e.connectable&&"single"===e.connectable?!b.value.some((t=>{const n=t[`${o.value}Handle`];return t[o.value]===y&&(!n||n===e.id)})):"number"==typeof e.connectable?b.value.filter((t=>{const n=t[`${o.value}Handle`];return t[o.value]===y&&(!n||n===e.id)})).length<e.connectable:"function"==typeof e.connectable?e.connectable(g,b.value):dk(e.connectable)?e.connectable:p.value));function P(e){const t=Qb(e);_.value&&x.value&&(t&&0===e.button||!t)&&N(e)}function C(e){y&&(u.value||x.value)&&_.value&&A(e)}return L((()=>{var t;if(!g.dimensions.width||!g.dimensions.height)return;const n=null==(t=g.handleBounds[o.value])?void 0:t.find((t=>t.id===e.id));if(!d.value||n)return;const a=d.value.querySelector(".vue-flow__transformationpane");if(!(w.value&&k.value&&a&&e.id))return;const i=w.value.getBoundingClientRect(),r=k.value.getBoundingClientRect(),s=window.getComputedStyle(a),{m22:l}=new window.DOMMatrixReadOnly(s.transform),u={id:e.id,position:e.position,x:(r.left-i.left)/l,y:(r.top-i.top)/l,type:o.value,nodeId:y,...ub(k.value)};g.handleBounds[o.value]=[...g.handleBounds[o.value]??[],u]})),t({handleClick:A,handlePointerDown:N,onClick:C,onPointerDown:P}),(t,n)=>(H(),l("div",{ref_key:"handle",ref:k,"data-id":`${h(i)}-${h(y)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":h(y),"data-handlepos":t.position,class:ce(["vue-flow__handle",[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,h(f),h(m),o.value,{connectable:_.value,connecting:T.value,connectablestart:x.value,connectableend:I.value,connectionindicator:_.value&&(x.value&&!E.value||I.value&&E.value)}]]),onMousedown:P,onTouchstartPassive:P,onClick:C},[R(t.$slots,"default",{id:t.id})],42,wc))}})),(kc=function({sourcePosition:e=Vu.Bottom,targetPosition:t=Vu.Top,label:n,connectable:o=!0,isValidTargetPos:a,isValidSourcePos:i,data:r}){const s=r.label??n;return[b(bc,{type:"target",position:t,connectable:o,isValidConnection:a}),"string"!=typeof s&&s?b(s):b(B,[s]),b(bc,{type:"source",position:e,connectable:o,isValidConnection:i})]}).props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],kc.inheritAttrs=!1,kc.compatConfig={MODE:3},xc=kc,(Ic=function({targetPosition:e=Vu.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:a}){const i=a.label??t;return[b(bc,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof i&&i?b(i):b(B,[i])]}).props=["targetPosition","label","isValidTargetPos","connectable","data"],Ic.inheritAttrs=!1,Ic.compatConfig={MODE:3},Sc=Ic,(Ec=function({sourcePosition:e=Vu.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:a}){const i=a.label??t;return["string"!=typeof i&&i?b(i):b(B,[i]),b(bc,{type:"source",position:e,connectable:n,isValidConnection:o})]}).props=["sourcePosition","label","isValidSourcePos","connectable","data"],Ec.inheritAttrs=!1,Ec.compatConfig={MODE:3},Tc=Ec,Nc=["transform"],Ac=["width","height","x","y","rx","ry"],_c=["y"],Pc=T({name:"EdgeText",compatConfig:{MODE:3},props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=v({x:0,y:0,width:0,height:0}),n=v(null),o=r((()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`));function a(){if(!n.value)return;const e=n.value.getBBox();e.width===t.value.width&&e.height===t.value.height||(t.value=e)}return L(a),F([()=>e.x,()=>e.y,n,()=>e.label],a),(e,a)=>(H(),l("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(H(),l("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:V(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Ac)):c("",!0),pe("text",D(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[R(e.$slots,"default",{},(()=>["string"!=typeof e.label?(H(),_(U(e.label),{key:0})):(H(),l(B,{key:1},[J(s(e.label),1)],64))]))],16,_c)],8,Nc))}}),Cc=["id","d","marker-end","marker-start"],Oc=["d","stroke-width"],e("Jn",Mc=T({name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3},props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=v(null),o=v(null),a=v(null),i=ue();return t({pathEl:n,interactionEl:o,labelEl:a}),(e,t)=>(H(),l(B,null,[pe("path",D(h(i),{id:e.id,ref_key:"pathEl",ref:n,d:e.path,class:"vue-flow__edge-path","marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,Cc),e.interactionWidth?(H(),l("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Oc)):c("",!0),e.label&&e.labelX&&e.labelY?(H(),_(Pc,{key:1,ref_key:"labelEl",ref:a,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):c("",!0)],64))}})),Dc={[Vu.Left]:{x:-1,y:0},[Vu.Right]:{x:1,y:0},[Vu.Top]:{x:0,y:-1},[Vu.Bottom]:{x:0,y:1}},Lc=T({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,a]=function(e){const{sourceX:t,sourceY:n,targetX:o,targetY:a}=e,[i,r,s,l]=Ck({sourceX:t,sourceY:n,targetX:o,targetY:a});return[`M ${t},${n}L ${o},${a}`,i,r,s,l]}(e);return b(Mc,{path:n,labelX:o,labelY:a,...t,...e})}}),Bc=T({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,a]=jk({...e,sourcePosition:e.sourcePosition??Vu.Bottom,targetPosition:e.targetPosition??Vu.Top});return b(Mc,{path:n,labelX:o,labelY:a,...t,...e})}}),Fc=T({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:t})=>()=>b(Bc,{...e,...t,borderRadius:0})}),$c=T({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,a]=Lk({...e,sourcePosition:e.sourcePosition??Vu.Bottom,targetPosition:e.targetPosition??Vu.Top});return b(Mc,{path:n,labelX:o,labelY:a,...t,...e})}}),Rc=T({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,a]=Fk({...e,sourcePosition:e.sourcePosition??Vu.Bottom,targetPosition:e.targetPosition??Vu.Top});return b(Mc,{path:n,labelX:o,labelY:a,...t,...e})}}),jc={input:Tc,default:xc,output:Sc},Vc={default:$c,straight:Lc,step:Fc,smoothstep:Bc,simplebezier:Rc},Wc=class e{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=null==(t=p())?void 0:t.appContext.app;return e.instance=(null==n?void 0:n.config.globalProperties.$vueFlowStorage)??e.instance??new e,n&&(n.config.globalProperties.$vueFlowStorage=e.instance),e.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=N(_k()),o={};for(const[r,d]of Object.entries(n.hooks))o[`on${r.charAt(0).toUpperCase()+r.slice(1)}`]=d.on;const a={};for(const[r,d]of Object.entries(n.hooks))a[r]=d.trigger;const i=r((()=>{const e=new Map;for(const t of n.nodes)e.set(t.id,t);return e})),s=r((()=>{const e=new Map;for(const t of n.edges)e.set(t.id,t);return e})),l=function(e,t,n){const o=r((()=>e=>t.value.get(e))),a=r((()=>e=>n.value.get(e))),i=r((()=>{const t={...Vc,...e.edgeTypes},n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),s=r((()=>{const t={...jc,...e.nodeTypes},n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=r((()=>e.onlyRenderVisibleElements?Nb(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes)),u=r((()=>{if(e.onlyRenderVisibleElements){const n=[];for(const o of e.edges){const a=t.value.get(o.source),i=t.value.get(o.target);Kb({sourcePos:a.computedPosition||{x:0,y:0},targetPos:i.computedPosition||{x:0,y:0},sourceWidth:a.dimensions.width,sourceHeight:a.dimensions.height,targetWidth:i.dimensions.width,targetHeight:i.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(o)}return n}return e.edges})),c=r((()=>[...l.value,...u.value])),d=r((()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t})),p=r((()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t})),f=r((()=>[...d.value,...p.value])),m=r((()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t}));return{getNode:o,getEdge:a,getElements:c,getEdgeTypes:i,getNodeTypes:s,getEdges:u,getNodes:l,getSelectedElements:f,getSelectedNodes:d,getSelectedEdges:p,getNodesInitialized:m,areNodesInitialized:r((()=>l.value.length>0&&m.value.length===l.value.length))}}(n,i,s),u=Pk(n,i,s);u.setState({...n,...t});const c={...o,...l,...u,...Rh(n),nodeLookup:i,edgeLookup:s,emits:a,id:e,vueFlowVersion:"1.48.0",$destroy:()=>{this.remove(e)}};return this.set(e,c),c}getId(){return"vue-flow-"+this.currentId++}},zc=T({name:"UserSelection",compatConfig:{MODE:3},props:{userSelectionRect:{}},setup:e=>(e,t)=>(H(),l("div",{class:"vue-flow__selection vue-flow__container",style:V({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}),Uc=["tabIndex"],Gc=T({name:"NodesSelection",compatConfig:{MODE:3},setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:a,disableKeyboardA11y:i,userSelectionActive:s}=Vk(),u=Ek(),d=v(null),p=gk({el:d,onStart(e){t.selectionDragStart(e),t.nodeDragStart(e)},onDrag(e){t.selectionDrag(e),t.nodeDrag(e)},onStop(e){t.selectionDragStop(e),t.nodeDragStop(e)}});L((()=>{var e;i.value||null==(e=d.value)||e.focus({preventScroll:!0})}));const f=r((()=>Tb(o.value))),m=r((()=>({width:`${f.value.width}px`,height:`${f.value.height}px`,top:`${f.value.y}px`,left:`${f.value.x}px`})));function y(e){t.selectionContextMenu({event:e,nodes:o.value})}function g(e){i.value||Qu[e.key]&&(e.preventDefault(),u({x:Qu[e.key].x,y:Qu[e.key].y},e.shiftKey))}return(e,t)=>!h(s)&&f.value.width&&f.value.height?(H(),l("div",{key:0,class:ce(["vue-flow__nodesselection vue-flow__container",h(a)]),style:V({transform:`translate(${h(n).x}px,${h(n).y}px) scale(${h(n).zoom})`})},[pe("div",{ref_key:"el",ref:d,class:ce([{dragging:h(p)},"vue-flow__nodesselection-rect"]),style:V(m.value),tabIndex:h(i)?void 0:-1,onContextmenu:y,onKeydown:g},null,46,Uc)],6)):c("",!0)}}),Hc=T({name:"Pane",compatConfig:{MODE:3},props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:a,userSelectionActive:i,removeSelectedElements:r,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:d,getSelectedEdges:p,getSelectedNodes:f,removeNodes:m,removeEdges:y,selectionMode:g,deleteKeyCode:w,multiSelectionKeyCode:b,multiSelectionActive:k,edgeLookup:x,nodeLookup:I,connectionLookup:S,defaultEdgeOptions:E,connectionStartHandle:T}=Vk(),N=v(null),A=v(new Set),P=v(new Set),C=v(),O=M((()=>u.value&&(e.isSelecting||i.value))),D=M((()=>null!==T.value));let L=!1,B=!1;const $=rb(w,{actInsideInputWithModifier:!1}),j=rb(b);function V(e,t){return n=>{n.target===t&&e?.(n)}}function W(e){L||D.value?L=!1:(a.paneClick(e),r(),d.value=!1)}function z(e){e.preventDefault(),e.stopPropagation(),a.paneContextMenu(e)}function U(e){a.paneScroll(e)}return F($,(e=>{e&&(m(f.value),y(p.value),d.value=!1)})),F(j,(e=>{k.value=e})),(p,m)=>(H(),l("div",{ref_key:"container",ref:N,class:ce(["vue-flow__pane vue-flow__container",{selection:p.isSelecting}]),onClick:m[0]||(m[0]=e=>O.value?void 0:V(W,N.value)(e)),onContextmenu:m[1]||(m[1]=e=>V(z,N.value)(e)),onWheelPassive:m[2]||(m[2]=e=>V(U,N.value)(e)),onPointerenter:m[3]||(m[3]=e=>O.value?void 0:h(a).paneMouseEnter(e)),onPointerdown:m[4]||(m[4]=n=>O.value?function(n){var o,i,l;if(C.value=null==(o=t.value)?void 0:o.getBoundingClientRect(),!u.value||!e.isSelecting||0!==n.button||n.target!==N.value||!C.value)return;null==(l=null==(i=n.target)?void 0:i.setPointerCapture)||l.call(i,n.pointerId);const{x:c,y:d}=function(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}(n,C.value);B=!0,L=!1,r(),s.value={width:0,height:0,startX:c,startY:d,x:c,y:d},a.selectionStart(n)}(n):h(a).paneMouseMove(n)),onPointermove:m[5]||(m[5]=e=>O.value?function(e){var t;if(!C.value||!s.value)return;L=!0;const{x:r,y:l}=ek(e,C.value),{startX:u=0,startY:c=0}=s.value,p={startX:u,startY:c,x:r<u?r:u,y:l<c?l:c,width:Math.abs(r-u),height:Math.abs(l-c)},f=A.value,m=P.value;A.value=new Set(Nb(n.value,p,o.value,g.value===Wu.Partial,!0).map((e=>e.id))),P.value=new Set;const h=(null==(t=E.value)?void 0:t.selectable)??!0;for(const n of A.value){const e=S.value.get(n);if(e)for(const{edgeId:t}of e.values()){const e=x.value.get(t);e&&(e.selectable??h)&&P.value.add(t)}}if(!yk(f,A.value)){const e=Wb(I.value,A.value,!0);a.nodesChange(e)}if(!yk(m,P.value)){const e=Wb(x.value,P.value);a.edgesChange(e)}s.value=p,i.value=!0,d.value=!1}(e):h(a).paneMouseMove(e)),onPointerup:m[6]||(m[6]=t=>O.value?function(t){var n;0===t.button&&B&&(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!i.value&&s.value&&t.target===N.value&&W(t),i.value=!1,s.value=null,d.value=A.value.size>0,a.selectionEnd(t),e.selectionKeyPressed&&(L=!1),B=!1)}(t):void 0),onPointerleave:m[7]||(m[7]=e=>h(a).paneMouseLeave(e))},[R(p.$slots,"default"),h(i)&&h(s)?(H(),_(zc,{key:0,"user-selection-rect":h(s)},null,8,["user-selection-rect"])):c("",!0),h(d)&&h(f).length?(H(),_(Gc,{key:1})):c("",!0)],34))}}),Yc=T({name:"Transform",compatConfig:{MODE:3},setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Vk(),a=r((()=>!!n.value&&!o.value)),i=r((()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`));return(e,t)=>(H(),l("div",{class:"vue-flow__transformationpane vue-flow__container",style:V({transform:i.value,opacity:a.value?0:void 0})},[R(e.$slots,"default")],4))}}),qc=T({name:"Viewport",compatConfig:{MODE:3},setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:a,zoomActivationKeyCode:i,selectionKeyCode:r,panActivationKeyCode:s,panOnScroll:u,panOnScrollMode:c,panOnScrollSpeed:d,panOnDrag:p,zoomOnDoubleClick:f,zoomOnPinch:m,zoomOnScroll:y,preventScrolling:v,noWheelClassName:w,noPanClassName:b,emits:x,connectionStartHandle:I,userSelectionActive:S,paneDragging:E,d3Zoom:T,d3Selection:N,d3ZoomHandler:A,viewport:_,viewportRef:P,paneClickDistance:C}=Vk();!function(e){const{emits:t,dimensions:n}=Vk();let o;L((()=>{const a=()=>{var o,a;if(!e.value||!((null==(a=(o=e.value).checkVisibility)?void 0:a.call(o))??1))return;const i=ub(e.value);0!==i.width&&0!==i.height||t.error(new oc(tc.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:i.width||500,height:i.height||500}};a(),window.addEventListener("resize",a),e.value&&(o=new ResizeObserver((()=>a())),o.observe(e.value)),g((()=>{window.removeEventListener("resize",a),o&&e.value&&o.unobserve(e.value)}))}))}(P);const O=ye(!1),D=ye(!1);let B=null,$=!1,j=0,V={x:0,y:0,zoom:0};const z=rb(s),U=rb(r),G=rb(i),Y=M((()=>(!U.value||U.value&&!0===r.value)&&(z.value||p.value))),q=M((()=>z.value||u.value)),X=M((()=>U.value||!0===r.value&&!0!==Y.value)),J=M((()=>null!==I.value));function K(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function Z(e){return{x:e.x,y:e.y,zoom:e.k}}function Q(e,t){return e.target.closest(`.${t}`)}return L((()=>{if(!P.value)return void sk("Viewport element is missing");const e=P.value,i=e.getBoundingClientRect(),s=function(){var e,t,n,o=Zw,a=Qw,i=ob,r=tb,s=nb,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=mu,p=Hh("start","zoom","end"),f=500,m=0,h=10;function y(e){e.property("__zoom",eb).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Xw(t,e.x,e.y)}function g(e,t,n){var o=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return o===e.x&&a===e.y?e:new Xw(e.k,o,a)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",(function(){k(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){k(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,r=k(e,i).event(o),s=a.apply(e,i),l=null==n?w(s):"function"==typeof n?n.apply(e,i):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,p="function"==typeof t?t.apply(e,i):t,f=d(c.invert(l).concat(u/c.k),p.invert(l).concat(u/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=u/t[2];e=new Xw(n,l[0]-t[0]*n,l[1]-t[1]*n)}r.zoom(null,e)}}))}function k(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=a.apply(e,t),this.taps=0}function I(e,...t){if(o.apply(this,arguments)){var n=k(this,t).event(e),a=this.__zoom,s=Math.max(l[0],Math.min(l[1],a.k*Math.pow(2,r.apply(this,arguments)))),c=Wv(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=a.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(a.k===s)return;n.mouse=[c,a.invert(c)],Jg(this),n.start()}Kw(e),n.wheel=setTimeout(d,150),n.zoom("mouse",i(g(v(a,s),n.mouse[0],n.mouse[1]),n.extent,u))}function d(){n.wheel=null,n.end()}}function S(e,...t){if(!n&&o.apply(this,arguments)){var a=e.currentTarget,r=k(this,t,!0).event(e),s=Vv(e.view).on("mousemove.zoom",p,!0).on("mouseup.zoom",f,!0),l=Wv(e,a),c=e.clientX,d=e.clientY;Gv(e.view),Jw(e),r.mouse=[l,this.__zoom.invert(l)],Jg(this),r.start()}function p(e){if(Kw(e),!r.moved){var t=e.clientX-c,n=e.clientY-d;r.moved=t*t+n*n>m}r.event(e).zoom("mouse",i(g(r.that.__zoom,r.mouse[0]=Wv(e,a),r.mouse[1]),r.extent,u))}function f(e){s.on("mousemove.zoom mouseup.zoom",null),Hv(e.view,r.moved),Kw(e),r.event(e).end()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,r=Wv(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(r),l=n.k*(e.shiftKey?.5:2),d=i(g(v(n,l),r,s),a.apply(this,t),u);Kw(e),c>0?Vv(this).transition().duration(c).call(b,d,r,e):Vv(this).call(y.transform,d,r,e)}}function T(n,...a){if(o.apply(this,arguments)){var i,r,s,l,u=n.touches,c=u.length,d=k(this,a,n.changedTouches.length===c).event(n);for(Jw(n),r=0;r<c;++r)l=[l=Wv(s=u[r],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),f)),Jg(this),d.start())}}function N(e,...t){if(this.__zooming){var n,o,a,r,s=k(this,t).event(e),l=e.changedTouches,c=l.length;for(Kw(e),n=0;n<c;++n)a=Wv(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=a:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=a);if(o=s.that.__zoom,s.touch1){var d=s.touch0[0],p=s.touch0[1],f=s.touch1[0],m=s.touch1[1],h=(h=f[0]-d[0])*h+(h=f[1]-d[1])*h,y=(y=m[0]-p[0])*y+(y=m[1]-p[1])*y;o=v(o,Math.sqrt(h/y)),a=[(d[0]+f[0])/2,(d[1]+f[1])/2],r=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!s.touch0)return;a=s.touch0[0],r=s.touch0[1]}s.zoom("touch",i(g(o,a,r),s.extent,u))}}function A(e,...o){if(this.__zooming){var a,i,r=k(this,o).event(e),s=e.changedTouches,l=s.length;for(Jw(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),a=0;a<l;++a)i=s[a],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(i=Wv(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<h)){var u=Vv(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return y.transform=function(e,t,n,o){var a=e.selection?e.selection():e;a.property("__zoom",eb),e!==a?b(e,t,n,o):a.interrupt().each((function(){k(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,o){y.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},y.scaleTo=function(e,t,n,o){y.transform(e,(function(){var e=a.apply(this,arguments),o=this.__zoom,r=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(r),l="function"==typeof t?t.apply(this,arguments):t;return i(g(v(o,l),r,s),e,u)}),n,o)},y.translateBy=function(e,t,n,o){y.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),u)}),null,o)},y.translateTo=function(e,t,n,o,r){y.transform(e,(function(){var e=a.apply(this,arguments),r=this.__zoom,s=null==o?w(e):"function"==typeof o?o.apply(this,arguments):o;return i(ju.translate(s[0],s[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)}),o,r)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Vv(this.that).datum();p.call(e,this.that,new qw(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:p}),t)}},y.wheelDelta=function(e){return arguments.length?(r="function"==typeof e?e:Ru(+e),y):r},y.filter=function(e){return arguments.length?(o="function"==typeof e?e:Ru(!!e),y):o},y.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Ru(!!e),y):s},y.extent=function(e){return arguments.length?(a="function"==typeof e?e:Ru([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):a},y.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],y):[l[0],l[1]]},y.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],y):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},y.constrain=function(e){return arguments.length?(i=e,y):i},y.duration=function(e){return arguments.length?(c=+e,y):c},y.interpolate=function(e){return arguments.length?(d=e,y):d},y.on=function(){var e=p.on.apply(p,arguments);return e===p?y:e},y.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,y):Math.sqrt(m)},y.tapDistance=function(e){return arguments.length?(h=+e,y):h},y}().clickDistance(C.value).scaleExtent([t.value,n.value]).translateExtent(a.value),l=Vv(e).call(s),h=l.on("wheel.zoom"),g=ju.translate(o.value.x??0,o.value.y??0).scale(cb(o.value.zoom??1,t.value,n.value)),k=[[0,0],[i.width,i.height]],I=s.constrain()(g,k,a.value);s.transform(l,I),s.wheelDelta(Mb),T.value=s,N.value=l,A.value=h,_.value={x:I.x,y:I.y,zoom:I.k},s.on("start",(e=>{var t;if(!e.sourceEvent)return null;j=e.sourceEvent.button,O.value=!0;const n=Z(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(E.value=!0),V=n,x.viewportChangeStart(n),x.moveStart({event:e,flowTransform:n})})),s.on("end",(e=>{if(!e.sourceEvent)return null;if(O.value=!1,E.value=!1,K(Y.value,j??0)&&!$&&x.paneContextMenu(e.sourceEvent),$=!1,t=V,n=e.transform,t.x!==n.x&&!Number.isNaN(n.x)||t.y!==n.y&&!Number.isNaN(n.y)||t.zoom!==n.k&&!Number.isNaN(n.k)){const t=Z(e.transform);V=t,x.viewportChangeEnd(t),x.moveEnd({event:e,flowTransform:t})}var t,n})),s.filter((e=>{var t;const n=G.value||y.value,o=m.value&&e.ctrlKey,a=e.button,i="wheel"===e.type;if(1===a&&"mousedown"===e.type&&(Q(e,"vue-flow__node")||Q(e,"vue-flow__edge")))return!0;if(!(Y.value||n||q.value||f.value||m.value))return!1;if(S.value)return!1;if(J.value&&!i)return!1;if(!f.value&&"dblclick"===e.type)return!1;if(Q(e,w.value)&&i)return!1;if(Q(e,b.value)&&(!i||q.value&&i&&!G.value))return!1;if(!m.value&&e.ctrlKey&&i)return!1;if(!n&&!q.value&&!o&&i)return!1;if(!m&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!Y.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(!0===r.value&&Array.isArray(p.value)&&p.value.includes(0)&&0===a)return!1;if(Array.isArray(p.value)&&!p.value.includes(a)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const s=Array.isArray(p.value)&&p.value.includes(a)||!0===r.value&&Array.isArray(p.value)&&!p.value.includes(0)||!a||a<=1;return(!e.ctrlKey||z.value||i)&&s})),F([S,Y],(()=>{S.value&&!O.value?s.on("zoom",null):S.value||s.on("zoom",(e=>{_.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=Z(e.transform);$=K(Y.value,j??0),x.viewportChange(t),x.move({event:e,flowTransform:t})}))}),{immediate:!0}),F([S,q,c,G,m,v,w],(()=>{!q.value||G.value||S.value?void 0!==h&&l.on("wheel.zoom",(function(e,t){const n=!v.value&&"wheel"===e.type&&!e.ctrlKey,o=G.value||y.value,a=m.value&&e.ctrlKey;if(!o&&!u.value&&!a&&"wheel"===e.type||n||Q(e,w.value))return null;e.preventDefault(),h.call(this,e,t)}),{passive:!1}):l.on("wheel.zoom",(e=>{if(Q(e,w.value))return!1;const t=G.value||y.value,n=m.value&&e.ctrlKey;if(v.value&&!q.value&&!t&&!n)return!1;e.preventDefault(),e.stopImmediatePropagation();const o=l.property("__zoom").k||1,a=ac();if(!z.value&&e.ctrlKey&&m.value&&a){const t=Wv(e),n=o*2**Mb(e);return void s.scaleTo(l,n,t,e)}const i=1===e.deltaMode?20:1;let r=c.value===Hu.Vertical?0:e.deltaX*i,u=c.value===Hu.Horizontal?0:e.deltaY*i;!a&&e.shiftKey&&c.value!==Hu.Vertical&&!r&&u&&(r=u,u=0),s.translateBy(l,-r/o*d.value,-u/o*d.value);const p=Z(l.property("__zoom"));B&&clearTimeout(B),D.value?(x.move({event:e,flowTransform:p}),x.viewportChange(p),B=setTimeout((()=>{x.moveEnd({event:e,flowTransform:p}),x.viewportChangeEnd(p),D.value=!1}),150)):(D.value=!0,x.moveStart({event:e,flowTransform:p}),x.viewportChangeStart(p))}),{passive:!1})}),{immediate:!0})})),(e,t)=>(H(),l("div",{ref_key:"viewportRef",ref:P,class:"vue-flow__viewport vue-flow__container"},[k(Hc,{"is-selecting":X.value,"selection-key-pressed":h(U),class:ce({connecting:J.value,dragging:h(E),draggable:!0===h(p)||Array.isArray(h(p))&&h(p).includes(0)})},{default:W((()=>[k(Yc,null,{default:W((()=>[R(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Xc=["id"],Jc=["id"],Kc=["id"],Zc=T({name:"A11yDescriptions",compatConfig:{MODE:3},setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Vk();return(e,a)=>(H(),l(B,null,[pe("div",{id:`${h(Ju)}-${h(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+s(h(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Xc),pe("div",{id:`${h(Ku)}-${h(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Jc),h(n)?c("",!0):(H(),l("div",{key:0,id:`${h("vue-flow__aria-live")}-${h(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},s(h(o)),9,Kc))],64))}}),(Qc=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Vu.Top,type:a}){return b("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${a}`,cx:Wk(t,e,o),cy:zk(n,e,o),r:e,stroke:"transparent",fill:"transparent"})}).props=["radius","centerX","centerY","position","type"],Qc.compatConfig={MODE:3},ed=Qc,td=T({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:a,emits:i,nodesSelectionActive:s,noPanClassName:l,getEdgeTypes:u,removeSelectedEdges:c,findEdge:d,findNode:f,isValidConnection:m,multiSelectionActive:h,disableKeyboardA11y:y,elementsSelectable:g,edgesUpdatable:w,edgesFocusable:k,hooks:x}=Vk(),I=r((()=>d(e.id))),{emit:S,on:E}=wk(I.value,i),T=he(mc),N=p(),A=v(!1),_=v(!1),P=v(""),C=v(null),O=v("source"),D=v(null),L=M((()=>void 0===I.value.selectable?g.value:I.value.selectable)),B=M((()=>void 0===I.value.updatable?w.value:I.value.updatable)),F=M((()=>void 0===I.value.focusable?k.value:I.value.focusable));te(pc,e.id),te(fc,D);const $=r((()=>I.value.class instanceof Function?I.value.class(I.value):I.value.class)),R=r((()=>I.value.style instanceof Function?I.value.style(I.value):I.value.style)),j=r((()=>{const e=I.value.type||"default",t=null==T?void 0:T[`edge-${e}`];if(t)return t;let n=I.value.template??u.value[e];if("string"==typeof n&&N){const t=Object.keys(N.appContext.components);t&&t.includes(e)&&(n=oe(e,!1))}return n&&"string"!=typeof n?n:(i.error(new oc(tc.EDGE_TYPE_MISSING,n)),!1)})),{handlePointerDown:V}=xk({nodeId:P,handleId:C,type:O,isValidConnection:m,edgeUpdaterType:O,onEdgeUpdate:function(e,t){S.update({event:e,edge:I.value,connection:t})},onEdgeUpdateEnd:function(e){S.updateEnd({event:e,edge:I.value}),_.value=!1}});return()=>{const n=f(I.value.source),r=f(I.value.target),s="pathOptions"in I.value?I.value.pathOptions:{};if(!n&&!r)return i.error(new oc(tc.EDGE_SOURCE_TARGET_MISSING,I.value.id,I.value.source,I.value.target)),null;if(!n)return i.error(new oc(tc.EDGE_SOURCE_MISSING,I.value.id,I.value.source)),null;if(!r)return i.error(new oc(tc.EDGE_TARGET_MISSING,I.value.id,I.value.target)),null;if(!I.value||I.value.hidden||n.hidden||r.hidden)return null;let c;c=o.value===Uu.Strict?n.handleBounds.source:[...n.handleBounds.source||[],...n.handleBounds.target||[]];const d=Jb(c,I.value.sourceHandle);let p;p=o.value===Uu.Strict?r.handleBounds.target:[...r.handleBounds.target||[],...r.handleBounds.source||[]];const m=Jb(p,I.value.targetHandle),h=(null==d?void 0:d.position)||Vu.Bottom,y=(null==m?void 0:m.position)||Vu.Top,{x:v,y:g}=Xb(n,d,h),{x:w,y:k}=Xb(r,m,y);return I.value.sourceX=v,I.value.sourceY=g,I.value.targetX=w,I.value.targetY=k,b("g",{ref:D,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===j.value?"default":I.value.type||"default"}`,l.value,$.value,{updating:A.value,selected:I.value.selected,animated:I.value.animated,inactive:!L.value&&!x.value.edgeClick.hasListeners()}],tabIndex:F.value?0:void 0,"aria-label":null===I.value.ariaLabel?void 0:I.value.ariaLabel??`Edge from ${I.value.source} to ${I.value.target}`,"aria-describedby":F.value?`${Ku}-${t}`:void 0,"aria-roledescription":"edge",role:F.value?"group":"img",...I.value.domAttributes,onClick:G,onContextmenu:H,onDblclick:Y,onMouseenter:q,onMousemove:X,onMouseleave:J,onKeyDown:F.value?Q:void 0},[_.value?null:b(!1===j.value?u.value.default:j.value,{id:e.id,sourceNode:n,targetNode:r,source:I.value.source,target:I.value.target,type:I.value.type,updatable:B.value,selected:I.value.selected,animated:I.value.animated,label:I.value.label,labelStyle:I.value.labelStyle,labelShowBg:I.value.labelShowBg,labelBgStyle:I.value.labelBgStyle,labelBgPadding:I.value.labelBgPadding,labelBgBorderRadius:I.value.labelBgBorderRadius,data:I.value.data,events:{...I.value.events,...E},style:R.value,markerStart:`url('#${Ob(I.value.markerStart,t)}')`,markerEnd:`url('#${Ob(I.value.markerEnd,t)}')`,sourcePosition:h,targetPosition:y,sourceX:v,sourceY:g,targetX:w,targetY:k,sourceHandleId:I.value.sourceHandle,targetHandleId:I.value.targetHandle,interactionWidth:I.value.interactionWidth,...s}),["source"===B.value||!0===B.value?[b("g",{onMousedown:K,onMouseenter:W,onMouseout:z},b(ed,{position:h,centerX:v,centerY:g,radius:a.value,type:"source","data-type":"source"}))]:null,"target"===B.value||!0===B.value?[b("g",{onMousedown:Z,onMouseenter:W,onMouseout:z},b(ed,{position:y,centerX:w,centerY:k,radius:a.value,type:"target","data-type":"target"}))]:null]])};function W(){A.value=!0}function z(){A.value=!1}function U(e,t){0===e.button&&(_.value=!0,P.value=t?I.value.target:I.value.source,C.value=(t?I.value.targetHandle:I.value.sourceHandle)??null,O.value=t?"target":"source",S.updateStart({event:e,edge:I.value}),V(e))}function G(e){var t;const o={event:e,edge:I.value};L.value&&(s.value=!1,I.value.selected&&h.value?(c([I.value]),null==(t=D.value)||t.blur()):n([I.value])),S.click(o)}function H(e){S.contextMenu({event:e,edge:I.value})}function Y(e){S.doubleClick({event:e,edge:I.value})}function q(e){S.mouseEnter({event:e,edge:I.value})}function X(e){S.mouseMove({event:e,edge:I.value})}function J(e){S.mouseLeave({event:e,edge:I.value})}function K(e){U(e,!0)}function Z(e){U(e,!1)}function Q(t){var o;!y.value&&Zu.includes(t.key)&&L.value&&("Escape"===t.key?(null==(o=D.value)||o.blur(),c([d(e.id)])):n([d(e.id)]))}}}),nd=T({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:a,connectionPosition:i,connectionLineType:s,connectionLineStyle:l,connectionLineOptions:u,connectionStatus:c,viewport:d,findNode:p}=Vk(),f=null==(e=he(mc))?void 0:e["connection-line"],m=r((()=>{var e;return p(null==(e=o.value)?void 0:e.nodeId)})),h=r((()=>{var e;return p(null==(e=a.value)?void 0:e.nodeId)??null})),y=r((()=>({x:(i.value.x-d.value.x)/d.value.zoom,y:(i.value.y-d.value.y)/d.value.zoom}))),v=r((()=>u.value.markerStart?`url(#${Ob(u.value.markerStart,t)})`:"")),g=r((()=>u.value.markerEnd?`url(#${Ob(u.value.markerEnd,t)})`:""));return()=>{var e,t,i;if(!m.value||!o.value)return null;const r=o.value.id,d=o.value.type,p=m.value.handleBounds;let w=(null==p?void 0:p[d])??[];if(n.value===Uu.Loose){const e=(null==p?void 0:p["source"===d?"target":"source"])??[];w=[...w,...e]}if(!w)return null;const k=(r?w.find((e=>e.id===r)):w[0])??null,x=(null==k?void 0:k.position)??Vu.Top,{x:I,y:S}=Xb(m.value,k,x);let E=null;h.value&&(E=n.value===Uu.Strict?(null==(e=h.value.handleBounds["source"===d?"target":"source"])?void 0:e.find((e=>{var t;return e.id===(null==(t=a.value)?void 0:t.id)})))||null:(null==(t=[...h.value.handleBounds.source??[],...h.value.handleBounds.target??[]])?void 0:t.find((e=>{var t;return e.id===(null==(t=a.value)?void 0:t.id)})))||null);const T=(null==(i=a.value)?void 0:i.position)??(x?sc[x]:null);if(!x||!T)return null;const N=s.value??u.value.type??zu.Bezier;let A="";const _={sourceX:I,sourceY:S,sourcePosition:x,targetX:y.value.x,targetY:y.value.y,targetPosition:T};return N===zu.Bezier?[A]=Lk(_):N===zu.Step?[A]=jk({..._,borderRadius:0}):N===zu.SmoothStep?[A]=jk(_):N===zu.SimpleBezier?[A]=Fk(_):A=`M${I},${S} ${y.value.x},${y.value.y}`,b("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},b("g",{class:"vue-flow__connection"},f?b(f,{sourceX:I,sourceY:S,sourcePosition:x,targetX:y.value.x,targetY:y.value.y,targetPosition:T,sourceNode:m.value,sourceHandle:k,targetNode:h.value,targetHandle:E,markerEnd:g.value,markerStart:v.value,connectionStatus:c.value}):b("path",{d:A,class:[u.value.class,c.value,"vue-flow__connection-path"],style:{...l.value,...u.value.style},"marker-end":g.value,"marker-start":v.value})))}}}),od=["id","markerWidth","markerHeight","markerUnits","orient"],ad=T({name:"MarkerType",compatConfig:{MODE:3},props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,t)=>(H(),l("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===h(Gu).ArrowClosed?(H(),l("polyline",{key:0,style:V({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):c("",!0),e.type===h(Gu).Arrow?(H(),l("polyline",{key:1,style:V({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):c("",!0)],8,od))}),id={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},rd=T({name:"MarkerDefinitions",compatConfig:{MODE:3},setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:a}=Vk(),i=r((()=>{const e=new Set,i=[],r=n=>{if(n){const o=Ob(n,t);e.has(o)||("object"==typeof n?i.push({...n,id:o,color:n.color||a.value}):i.push({id:o,color:a.value,type:n}),e.add(o))}};for(const t of[o.value.markerEnd,o.value.markerStart])r(t);for(const t of n.value)for(const e of[t.markerStart,t.markerEnd])r(e);return i.sort(((e,t)=>e.id.localeCompare(t.id)))}));return(e,t)=>(H(),l("svg",id,[pe("defs",null,[(H(!0),l(B,null,X(i.value,(e=>(H(),_(ad,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))])]))}}),sd=T({name:"Edges",compatConfig:{MODE:3},setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Vk();return(e,a)=>(H(),l(B,null,[k(rd),(H(!0),l(B,null,X(h(n),(e=>(H(),l("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:V({zIndex:h(Zb)(e,h(t),h(o))})},[k(h(td),{id:e.id},null,8,["id"])],4)))),128)),k(h(nd))],64))}}),ld=T({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:a,multiSelectionActive:i,emits:s,removeSelectedNodes:l,addSelectedNodes:u,updateNodeDimensions:c,onUpdateNodeInternals:d,getNodeTypes:f,nodeExtent:h,elevateNodesOnSelect:y,disableKeyboardA11y:g,ariaLiveMessage:w,snapToGrid:k,snapGrid:x,nodeDragThreshold:I,nodesDraggable:S,elementsSelectable:E,nodesConnectable:T,nodesFocusable:N,hooks:A}=Vk(),_=v(null);te(dc,_),te(cc,e.id);const P=he(mc),C=p(),O=Ek(),{node:D,parentNode:B}=Ik(e.id),{emit:$,on:R}=Sk(D,s),j=M((()=>void 0===D.draggable?S.value:D.draggable)),V=M((()=>void 0===D.selectable?E.value:D.selectable)),W=M((()=>void 0===D.connectable?T.value:D.connectable)),z=M((()=>void 0===D.focusable?N.value:D.focusable)),U=r((()=>V.value||j.value||A.value.nodeClick.hasListeners()||A.value.nodeDoubleClick.hasListeners()||A.value.nodeMouseEnter.hasListeners()||A.value.nodeMouseMove.hasListeners()||A.value.nodeMouseLeave.hasListeners())),G=M((()=>!!D.dimensions.width&&!!D.dimensions.height)),H=r((()=>{const e=D.type||"default",t=null==P?void 0:P[`node-${e}`];if(t)return t;let n=D.template||f.value[e];if("string"==typeof n&&C){const t=Object.keys(C.appContext.components);t&&t.includes(e)&&(n=oe(e,!1))}return n&&"string"!=typeof n?n:(s.error(new oc(tc.NODE_TYPE_MISSING,n)),!1)})),Y=gk({id:e.id,el:_,disabled:()=>!j.value,selectable:V,dragHandle:()=>D.dragHandle,onStart(e){$.dragStart(e)},onDrag(e){$.drag(e)},onStop(e){$.dragStop(e)},onClick(e){re(e)}}),q=r((()=>D.class instanceof Function?D.class(D):D.class)),X=r((()=>{const e=(D.style instanceof Function?D.style(D):D.style)||{},t=D.width instanceof Function?D.width(D):D.width,n=D.height instanceof Function?D.height(D):D.height;return!e.width&&t&&(e.width="string"==typeof t?t:`${t}px`),!e.height&&n&&(e.height="string"==typeof n?n:`${n}px`),e})),J=M((()=>Number(D.zIndex??X.value.zIndex??0)));return d((t=>{!t.includes(e.id)&&t.length||Z()})),L((()=>{F((()=>D.hidden),((t=!1,n,o)=>{!t&&_.value&&(e.resizeObserver.observe(_.value),o((()=>{_.value&&e.resizeObserver.unobserve(_.value)})))}),{immediate:!0,flush:"post"})})),F([()=>D.type,()=>D.sourcePosition,()=>D.targetPosition],(()=>{m((()=>{c([{id:e.id,nodeElement:_.value,forceUpdate:!0}])}))})),F([()=>D.position.x,()=>D.position.y,()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.z},J,()=>D.selected,()=>D.dimensions.height,()=>D.dimensions.width,()=>{var e;return null==(e=B.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=B.value)?void 0:e.dimensions.width}],(([e,t,n,o,a,i])=>{const r={x:e,y:t,z:i+(y.value&&D.selected?1e3:0)};var s,l;D.computedPosition=void 0!==n&&void 0!==o?{x:(l=r).x+(s={x:n,y:o,z:a}).x,y:l.y+s.y,z:(s.z>l.z?s.z:l.z)+1}:r}),{flush:"post",immediate:!0}),F([()=>D.extent,h],(([e,t],[n,o])=>{e===n&&t===o||K()})),"parent"===D.extent||"object"==typeof D.extent&&"range"in D.extent&&"parent"===D.extent.range?Vh((()=>G)).toBe(!0).then(K):K(),()=>D.hidden?null:b("div",{ref:_,"data-id":D.id,class:["vue-flow__node",`vue-flow__node-${!1===H.value?"default":D.type||"default"}`,{[n.value]:j.value,dragging:null==Y?void 0:Y.value,draggable:j.value,selected:D.selected,selectable:V.value,parent:D.isParent},q.value],style:{visibility:G.value?"visible":"hidden",zIndex:D.computedPosition.z??J.value,transform:`translate(${D.computedPosition.x}px,${D.computedPosition.y}px)`,pointerEvents:U.value?"all":"none",...X.value},tabIndex:z.value?0:void 0,role:z.value?"group":void 0,"aria-describedby":g.value?void 0:`${Ju}-${t}`,"aria-label":D.ariaLabel,"aria-roledescription":"node",...D.domAttributes,onMouseenter:Q,onMousemove:ee,onMouseleave:ne,onContextmenu:ae,onClick:re,onDblclick:ie,onKeydown:se},[b(!1===H.value?f.value.default:H.value,{id:D.id,type:D.type,data:D.data,events:{...D.events,...R},selected:D.selected,resizing:D.resizing,dragging:Y.value,connectable:W.value,position:D.computedPosition,dimensions:D.dimensions,isValidTargetPos:D.isValidTargetPos,isValidSourcePos:D.isValidSourcePos,parent:D.parentNode,parentNodeId:D.parentNode,zIndex:D.computedPosition.z??J.value,targetPosition:D.targetPosition,sourcePosition:D.sourcePosition,label:D.label,dragHandle:D.dragHandle,onUpdateNodeInternals:Z})]);function K(){const e=D.computedPosition,{computedPosition:t,position:n}=qb(D,k.value?tk(e,x.value):e,s.error,h.value,B.value);D.computedPosition.x===t.x&&D.computedPosition.y===t.y||(D.computedPosition={...D.computedPosition,...t}),D.position.x===n.x&&D.position.y===n.y||(D.position=n)}function Z(){_.value&&c([{id:e.id,nodeElement:_.value,forceUpdate:!0}])}function Q(e){(null==Y?void 0:Y.value)||$.mouseEnter({event:e,node:D})}function ee(e){(null==Y?void 0:Y.value)||$.mouseMove({event:e,node:D})}function ne(e){(null==Y?void 0:Y.value)||$.mouseLeave({event:e,node:D})}function ae(e){return $.contextMenu({event:e,node:D})}function ie(e){return $.doubleClick({event:e,node:D})}function re(e){V.value&&(!o.value||!j.value||I.value>0)&&ck(D,i.value,u,l,a,!1,_.value),$.click({event:e,node:D})}function se(e){if(!ab(e)&&!g.value)if(Zu.includes(e.key)&&V.value){const t="Escape"===e.key;ck(D,i.value,u,l,a,t,_.value)}else j.value&&D.selected&&Qu[e.key]&&(e.preventDefault(),w.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~D.position.x}, y: ${~~D.position.y}`,O({x:Qu[e.key].x,y:Qu[e.key].y},e.shiftKey))}}}),ud={height:"0",width:"0"},e("qn",T({name:"EdgeLabelRenderer",compatConfig:{MODE:3},setup(e){const{viewportRef:t}=Vk(),n=M((()=>{var e;return null==(e=t.value)?void 0:e.getElementsByClassName("vue-flow__edge-labels")[0]}));return(e,t)=>(H(),l("svg",null,[(H(),l("foreignObject",ud,[(H(),_(j,{to:n.value,disabled:!n.value},[R(e.$slots,"default")],8,["to","disabled"]))]))]))}})),cd={class:"vue-flow__nodes vue-flow__container"},dd=T({name:"Nodes",compatConfig:{MODE:3},setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Vk(),a=function(e={includeHiddenNodes:!1}){const{nodes:t}=Vk();return r((()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0}))}(),s=v();return F(a,(e=>{e&&m((()=>{o.nodesInitialized(t.value)}))}),{immediate:!0}),L((()=>{s.value=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));m((()=>n(t)))}))})),g((()=>{var e;return null==(e=s.value)?void 0:e.disconnect()})),(e,n)=>(H(),l("div",cd,[s.value?(H(!0),l(B,{key:0},X(h(t),((e,t,n,o)=>{const a=[e.id];if(o&&o.key===e.id&&i(o,a))return o;const r=(H(),_(h(ld),{id:e.id,key:e.id,"resize-observer":s.value},null,8,["id","resize-observer"]));return r.memo=a,r}),n,0),128)):c("",!0)]))}}),pd=pe("div",{class:"vue-flow__edge-labels"},null,-1),e("Kn",T({name:"VueFlow",compatConfig:{MODE:3},props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,a=ie(),i=Gh(o,"modelValue",n),r=Gh(o,"nodes",n),s=Gh(o,"edges",n),u=Vk(o),c=Ak({modelValue:i,nodes:r,edges:s},o,u);return function(e,t){const n=p();function o(e){var t;const o=function(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,((e,t)=>t.toUpperCase()))}${n.length?`:${n.join(":")}`:""}`}(e);return!!(null==(t=null==n?void 0:n.vnode.props)?void 0:t[o])}re((()=>{for(const[n,a]of Object.entries(t.value)){const t=t=>{e(n,t)};a.setEmitter(t),Dh(a.removeEmitter),a.setHasEmitListeners((()=>o(n))),Dh(a.removeHasEmitListeners)}}))}(n,u.hooks),function(){const e=Vk();F((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}(),function(){const{emits:e}=Vk();L((()=>{if(lk()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new oc(tc.MISSING_STYLES))}}))}(),te(mc,a),A(c),t(u),(e,t)=>(H(),l("div",{ref:h(u).vueFlowRef,class:"vue-flow"},[k(qc,null,{default:W((()=>[k(sd),pd,k(dd),R(e.$slots,"zoom-pane")])),_:3}),R(e.$slots,"default"),k(Zc)],512))}})),e("Gn",T({name:"Panel",compatConfig:{MODE:3},props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Vk(),o=r((()=>`${t.position}`.split("-")));return(e,t)=>(H(),l("div",{class:ce(["vue-flow__panel",o.value]),style:V({pointerEvents:h(n)?"none":"all"})},[R(e.$slots,"default")],6))}})),e("Dn",16),e("Tn",fd=[96,96]),e("Cn",40),e("wn",md=[80,80]),e("Sn",[256,96]),e("On",2*fd[0]+16),e("En",hd={xMin:-1/0,yMin:-1/0,xMax:1/0,yMax:1/0}),yd=e=>e.reduce(((e,t)=>t.position[0]>e.position[0]||t.position[1]>e.position[1]?e:t),e[0]),vd=e=>e.reduce(((e,t)=>t.position[0]<e.position[0]?t:e),e[0]),gd=e=>e.reduce(((e,t)=>t.position[1]<e.position[1]?t:e),e[0]),wd=e=>e.reduce(((e,t)=>t.position[0]>e.position[0]?t:e),e[0]),bd=e=>e.reduce(((e,t)=>t.position[1]>e.position[1]?t:e),e[0]),e("Rn",(e=>{const t=vd(e),n=gd(e),o=wd(e),a=bd(e);return[Math.abs(o.position[0]-t.position[0])+fd[0],Math.abs(a.position[1]-n.position[1])+fd[1]]})),kd=(e,t,n=fd)=>!(Math.abs(e[0]-t[0])<=n[0]&&Math.abs(e[1]-t[1])<=n[1]),e("An",((e,t)=>!(e.x+e.width<=t.x||t.x+t.width<=e.x||e.y+e.height<=t.y||t.y+t.height<=e.y))),xd=(e,t)=>{const n=Math.ceil(e/t),o=t*n,a=e*t>0?t*(n+1):t*(n-1);return Math.abs(e-o)<Math.abs(e-a)?o:a},e("In",((e,t,{offset:n=[fd[0]/2,fd[1]/2],size:o=fd,viewport:a=hd,normalize:i=!0}={})=>{const r=Uk(n),s=Uk(t);if(i){let t,n,i=!1;do{for(i=!1,t=0;t<e.length;t++)if(n=e[t],n&&!Na.includes(n.type)&&!kd(n.position,s,o)){i=!0;break}i&&(s[0]+=r[0],s[1]+=r[1])}while(i);s[0]<a.xMin+r[0]&&(s[0]=a.xMin+r[0]),s[1]<a.yMin+r[1]&&(s[1]=a.yMin+r[1]),s[0]>a.xMax-r[0]&&(s[0]=a.xMax-o[0]-r[0]),s[1]>a.yMax-r[1]&&(s[1]=a.yMax-o[1]-r[1])}return s})),e("Fn",(e=>[(e&&"clientX"in e?e.clientX:e?.touches?.[0]?.clientX)??0,(e&&"clientY"in e?e.clientY:e?.touches?.[0]?.clientY)??0])),Id=(e,t,n,o)=>[(e-o[0])/n,(t-o[1])/n],Sd=()=>{let e=window.innerWidth,t=window.innerHeight;const n=document.getElementById("node-view-root");if(n){const o=n.getBoundingClientRect();e=o.width,t=o.height}return{editorWidth:e,editorHeight:t}},e("Pn",((e,t)=>{const{editorWidth:n,editorHeight:o}=Sd();return Id(n/2,(o-65)/2,e,t)})),e("zn",Ed=e=>{const t=[...e];if(t.length){const e=yd(t),n=176-e.position[0],o=240-e.position[1];t.forEach((e=>{e.position[0]+=n+2*fd[0],e.position[1]+=o}))}return t}),e("Ln",(e=>e.meta?.nodeView?Ro.WORKFLOW:[Qo.WORKFLOW_EXECUTIONS,Qo.EXECUTION_PREVIEW,Qo.EXECUTION_HOME].map(String).includes(String(e.name))?Ro.EXECUTIONS:null)),e("xn",Td=Ua(Ji.TEMPLATES,(()=>{const e=v([]),n=v({}),o=v({}),a=v({}),i=v({}),s=v(""),l=v(""),u=v(`${window.location.protocol}//${window.location.host}${window.BASE_PATH}`),c=rr(),d=qa(),p=_m(),f=Al(),m=Vs(),h=r((()=>e.value.sort(((e,t)=>e.name>t.name?1:-1)))),y=r((()=>e=>o.value[e])),g=r((()=>e=>{const t=o.value[e];return t&&"full"in t&&t.full?t:null})),w=r((()=>n.value)),b=r((()=>t=>e.value[t])),k=r((()=>e=>{const t=Hk(e),o=i.value[t];return o?o.collectionIds.map((e=>n.value[e])):null})),x=r((()=>e=>{const t=Hk(e),n=a.value[t];return n?n.workflowIds.map((e=>o.value[e])):null})),I=r((()=>e=>{const t=Hk(e),n=a.value[t];return n?n.totalWorkflows:0})),S=r((()=>e=>{const t=Hk(e),n=a.value[t];return Boolean(n?.loadingMore)})),E=r((()=>e=>{const t=Hk(e),n=a.value[t];return Boolean(n&&!n.loadingMore&&n.totalWorkflows===n.workflowIds.length)})),T=r((()=>c.templatesHost!==ma.DEFAULT_API_HOST)),N=r((()=>f.currentUserCloudInfo?.role??(p.currentUser?.personalizationAnswers&&"role"in p.currentUser.personalizationAnswers?p.currentUser.personalizationAnswers.role:void 0))),A=r((()=>{const e={...ma.UTM_QUERY,utm_instance:u.value,utm_n8n_version:d.versionCli,utm_awc:String(m.activeWorkflows.length)};return N.value&&(e.utm_user_role=N.value),new URLSearchParams({...e})})),_=r((()=>`${ma.BASE_WEBSITE_URL}${_l(N.value)}?${A.value.toString()}`)),P=t=>{e.value=t},C=e=>{e.forEach((e=>{const t=(e.workflows||[]).map((e=>({id:e.id}))),o=n.value[e.id]||{};n.value[e.id]={...o,...e,workflows:t}}))},O=e=>{e.forEach((e=>{const t=o.value[e.id]||{};o.value[e.id.toString()]={...t,...e}}))},M=e=>{const t=e._collections.map((e=>String(e.id))),n=Hk(e.query);i.value[n]={collectionIds:t}},D=t=>{const n=t.workflows.map((e=>e.id)),o=Hk(t.query),i=a.value[o];a.value[o]=i?{workflowIds:[...i.workflowIds,...n],totalWorkflows:t.totalWorkflows,categories:e.value}:{workflowIds:n,totalWorkflows:t.totalWorkflows,categories:e.value}},L=e=>{const t=Hk(e);a.value[t]&&(a.value[t]={...a.value[t],loadingMore:!0})},B=e=>{const t=Hk(e);a.value[t]&&(a.value[t]={...a.value[t],loadingMore:!1})},F=async e=>{const t=c.templatesHost,n=d.versionCli;return await async function(e,t,n){return await Ga(e,`/workflows/templates/${t}`,void 0,n)}(t,e,{"n8n-version":n})};return{categories:e,collections:n,workflows:o,workflowSearches:a,collectionSearches:i,currentSessionId:s,previousSessionId:l,currentN8nPath:u,allCategories:h,getTemplatesById:y,getFullTemplateById:g,getCollectionById:w,getCategoryById:b,getSearchedCollections:k,getSearchedWorkflows:x,getSearchedWorkflowsTotal:I,isSearchLoadingMore:S,isSearchFinished:E,hasCustomTemplatesHost:T,websiteTemplateRepositoryURL:_,constructTemplateRepositoryURL:(e,t)=>`${t?`${ma.BASE_WEBSITE_URL}${t}`:ma.BASE_WEBSITE_URL}?${e.toString()}`,websiteTemplateRepositoryParameters:A,addCategories:P,addCollections:C,addWorkflows:O,addCollectionsSearch:M,addWorkflowsSearch:D,setWorkflowSearchLoading:L,setWorkflowSearchLoaded:B,resetSessionId:()=>{l.value=s.value,s.value=""},setSessionId:()=>{s.value||(s.value=`templates-${Date.now()}`)},fetchTemplateById:async e=>{const t=c.templatesHost,n=d.versionCli,o={...(await $m(t,e,{"n8n-version":n})).workflow,full:!0};return O([o]),o},fetchCollectionById:async e=>{const t=c.templatesHost,n=d.versionCli,o=await async function(e,t,n){return await Ga(e,`/templates/collections/${t}`,void 0,n)}(t,e,{"n8n-version":n});return C([{...o.collection,full:!0}]),O(o.collection.workflows),w.value[e]},getCategories:async()=>{const e=h.value;if(e.length)return e;const t=c.templatesHost,n=d.versionCli,o=(await async function(e,t){return await Ga(e,"/templates/categories",void 0,t)}(t,{"n8n-version":n})).categories;return P(o),o},getCollections:async e=>{const t=k.value(e);if(t)return t;const n=c.templatesHost,o=d.versionCli,a=(await async function(e,t,n){return await Ga(e,"/templates/collections",{category:t.categories,search:t.search},n)}(n,e,{"n8n-version":o})).collections;return C(a),M({query:e,_collections:a}),a.forEach((e=>O(e.workflows))),a},getWorkflows:async t=>{const n=x.value(t);if(n)return e.value=a.value[Hk(t)].categories??[],n;const o=c.templatesHost,i=d.versionCli,r=await Fm(o,{...t,page:1,limit:20},{"n8n-version":i});return O(r.workflows),D({...r,query:t}),x.value(t)||[]},getMoreWorkflows:async e=>{if(S.value(e)&&!E.value(e))return[];const n=x.value(e)||[],o=c.templatesHost;L(e);try{const t=await Fm(o,{...e,page:n.length/20+1,limit:20});return B(e),O(t.workflows),D({...t,query:e}),x.value(e)||[]}catch(t){throw B(e),t}},getWorkflowTemplate:F,getFixedWorkflowTemplate:async e=>{const t=await F(e);return t?.workflow?.nodes&&(t.workflow.nodes=Ed(t.workflow.nodes),t.workflow.nodes?.forEach((e=>{e.credentials&&delete e.credentials}))),t}}}))),Nd=["@n8n/n8n-nodes-langchain.toolCode","@n8n/n8n-nodes-langchain.toolHttpRequest","@n8n/n8n-nodes-langchain.mcpClientTool",["@n8n/n8n-nodes-langchain.toolWorkflow",1.2]],Ad=["parameters.name","parameters.toolName","parameters.description","parameters.toolDescription"],_d=["options","credentialsSelect"],Pd={description:{initialValue:"",type:"string",typeOptions:{rows:2},tooltip:we.baseText("parameterOverride.descriptionTooltip")}},Cd=n(it(),1),Od={isActive:!1,parameters:[]},e("gn",Md=Ua(Ji.FOCUS_PANEL,(()=>{const e=vm(),t=rh(xn),n=r((()=>{const n={[e.workflowId]:Od};return t.value?Ut(t.value,{fallbackValue:n}):n})),o=r((()=>n.value[e.workflowId]??Od)),a=v(0),i=v("setup"),s=r((()=>o.value.isActive)),l=r((()=>o.value.width??500)),u=r((()=>o.value.parameters)),c=r((()=>u.value.map((t=>{const n=e.getNodeById(t.nodeId);if(!n)return t;const o=(0,Cd.default)(n?.parameters??{},t.parameterPath.replace(/parameters\./,""));return"string"==typeof o&&Xk(o)?t:{...t,node:n,value:o}})))),d=r((()=>c.value[0]&&f(c.value[0])?c.value[0]:void 0));function p({parameters:o,isActive:i,wid:r=e.workflowId,width:c,removeEmpty:d=!1}){const p=n.value;d&&""in p&&delete p[""],t.value=JSON.stringify({...n.value,[r]:{isActive:i??s.value,parameters:o??u.value,width:c??l.value}}),i&&(a.value=Date.now())}function f(e){return"value"in e&&"node"in e}const m=r((()=>c.value.map((e=>({parameterPath:e.parameterPath,nodeType:f(e)?e.node.type:"unresolved",nodeId:e.nodeId})))));return ke((()=>o.value),(e=>{e.isActive&&e.parameters.length>0&&(a.value=Date.now())})),F((()=>d.value),((e,t)=>{e&&e!==t&&(i.value="focus")})),{focusPanelActive:s,focusedNodeParameters:c,focusedNodeParametersInTelemetryFormat:m,lastFocusTimestamp:a,focusPanelWidth:l,resolvedParameter:d,selectedTab:i,openWithFocusedNodeParameter:function(e){p({parameters:[e],isActive:!0})},isRichParameter:f,openFocusPanel:function(){p({isActive:!0})},closeFocusPanel:function(){p({isActive:!1})},toggleFocusPanel:function(){p({isActive:!s.value})},onNewWorkflowSave:function(e){if(!o.value||!(""in n.value))return;const t=n.value[""];p({wid:e,parameters:t.parameters,isActive:t.isActive,removeEmpty:!0})},updateWidth:function(e){p({width:e})},unsetParameters:function(){p({parameters:[]})},setSelectedTab:function(e){i.value=e}}}))),Dd=2e3,Ld=32e3,e("hn",Bd=Ua("workflowSave",(()=>{const e=v(aa.Idle),t=v(null),n=v(0),o=v(Dd),a=v(!1),i=v(null),r=v(!1);function s(){n.value=0,o.value=Dd,a.value=!1,i.value=null,r.value=!1}return{autoSaveState:e,pendingSave:t,retryCount:n,retryDelay:o,isRetrying:a,lastError:i,conflictModalShown:r,setAutoSaveState:function(t){e.value=t},setPendingSave:function(e){t.value=e},incrementRetry:function(){n.value++,o.value=function(e,t=Dd,n=Ld){return Math.min(t*Math.pow(2,e-1),n)}(n.value)},getRetryDelay:function(){return o.value},setRetrying:function(e){a.value=e},setLastError:function(e){i.value=e},setConflictModalShown:function(e){r.value=e},resetRetry:s,reset:function(){e.value=aa.Idle,t.value=null,s()}}}))),e("mn",Fd=Ua("backendConnection",(()=>{const e=v(!0);return{isOnline:f(e),setOnline:function(t){e.value=t}}}))),$d="n8n",Rd="Workflow Automation",jd=3,Vd=v("undefined"!=typeof Notification?Notification.permission:"denied"),Wd=n(ca(),1),e("un",zd=Ua(Ji.BUILDER,(()=>{const e=v([]),n=v(!1),o=v(),a=v(null),i=v(!1),s=v("build"),l=v(),u=v(),c=v({success:0,error:0}),d=v(!1),p=v(!1),f=v(),m=v(),h=v(!1),y=v(),g=Kk(),w=rr(),b=qa(),k=vm(),x=ix(),I=hp(),S=_e(),E=Ee(),T=rx(),N=xm(),A=Jk({router:ht()}),_=Us(),P=Hs(),{processAssistantMessages:C,createUserMessage:O,createUserAnswersMessage:M,createAssistantMessage:D,createErrorMessage:L,clearMessages:B,mapAssistantMessageToUI:$,clearRatingLogic:R,getRunningTools:j}=Sh(),{workflowTodos:V,getTodosToTrack:W,hasTodosHiddenByPinnedData:z}=function(){const e=vm(),t=Ee();function n(t,o=new Set){if(o.has(t))return!1;if(o.add(t),!0===e.getNodeByName(t)?.disabled)return!0;const a=e.outgoingConnectionsByNodeName(t);for(const e of Object.keys(a)){if("main"===e)continue;const t=a[e];if(t)for(const e of t)if(e)for(const t of e)if(n(t.node,o))return!0}return!1}function o(t,n=new Set){if(n.has(t))return!1;if(n.add(t),e.workflow.pinData?.[t]?.length)return!0;const a=e.outgoingConnectionsByNodeName(t);for(const e of Object.keys(a)){if("main"===e)continue;const t=a[e];if(t)for(const e of t)if(e)for(const t of e)if(o(t.node,n))return!0}return!1}const a=r((()=>(e.workflow.pinData,e.workflow.nodes,e.workflowValidationIssues.filter((e=>["credentials","parameters"].includes(e.type)&&!o(e.node)&&!n(e.node)))))),i=r((()=>{e.workflow.pinData;const a=[],i=new Set;for(const r of e.workflow.nodes){if(!r?.parameters)continue;if(o(r.name))continue;if(n(r.name))continue;const e=Th(r.parameters);if(0===e.length)continue;const s=r.issues?.parameters??{};for(const n of e){const e=Nh(n.path),o=t.baseText("aiAssistant.builder.executeMessage.fillParameter",{interpolate:{label:n.label}}),l=s[e];if((l?Array.isArray(l)?l:[l]:[]).includes(o))continue;const u=`${r.name}|${e}|${n.label}`;i.has(u)||(i.add(u),a.push({node:r.name,type:"parameters",value:o}))}}return a})),s=r((()=>[...a.value,...i.value])),l=r((()=>{if(s.value.length>0)return!1;const t=e.workflow.pinData;if(!t||0===Object.keys(t).length)return!1;if(e.workflowValidationIssues.some((e=>["credentials","parameters"].includes(e.type)&&o(e.node)&&!n(e.node))))return!0;for(const a of e.workflow.nodes)if(a?.parameters&&o(a.name)&&!n(a.name)&&Th(a.parameters).length>0)return!0;return!1}));return{workflowTodos:s,placeholderIssues:i,getTodosToTrack:function(){return{credentials_todo_count:e.workflowValidationIssues.filter((e=>"credentials"===e.type)).length,placeholders_todo_count:i.value.length,todos:s.value.map((t=>({type:t.type,node_type:e.getNodeByName(t.node)?.type,label:t.value})))}},hasTodosHiddenByPinnedData:l}}(),U=r((()=>b.pushRef)),G=r((()=>{const e=_.getVariant(Io.name);return e===Io.codeNoPinData||e===Io.codePinData})),H=r((()=>e.value.find((e=>"user"===e.role&&"text"===e.type))?.content)),Y=r((()=>w.isAiBuilderEnabled)),q=r((()=>e.value.filter(Oe))),X=r((()=>e.value.filter(Pe))),J=r((()=>e.value.filter((e=>"assistant"===e.role)))),K=r((()=>{if(void 0===u.value||void 0===l.value||-1===l.value)return;const e=l.value-u.value;return e>0?e:0})),Z=r((()=>void 0!==K.value&&0===K.value)),Q=r((()=>e.value.length>0)),ee=r((()=>{const e=_.getVariant(_t.name);return!0===e||e===_t.variant})),te=r((()=>{for(let t=e.value.length-1;t>=0;t--){const n=e.value[t];if(ch(n)||dh(n))return n;if("user"===n.role)break}return null})),ne=r((()=>null!==te.value)),oe=r((()=>{const e=te.value;return!!e&&dh(e)})),ae=r((()=>{const e=te.value;return!!e&&ch(e)}));function ie(){e.value=B(),o.value=void 0,i.value=!1,m.value=void 0,y.value=void 0,d.value=!1,s.value="build"}function re(){c.value={success:0,error:0}}function se({userMessageId:e,startWorkflowJson:t}){const n=q.value.filter((t=>t.id?.startsWith(e))),o=he();return{tools_called:On(n.map((e=>e.toolName))),start_workflow_json:t,end_workflow_json:o,workflow_modified:o!==t}}function le(t){return e.value.some((e=>"workflow-updated"===e.type&&e.id?.startsWith(t)))}function ue(t){n.value=!1,a.value&&(a.value.abort(),a.value=null),function(e){if(!f.value)return;const{userMessageId:t,planApproved:n}=f.value;T.track("End of response from builder",{user_message_id:t,workflow_id:k.workflowId,session_id:U.value,tab_visible:"visible"===document.visibilityState,code_builder:G.value,mode:s.value,...n?{plan_approved:!0}:{},...se(f.value),...e,...W()})}(t);const o=f.value?.userMessageId,{revertVersion:i}=f.value??{};f.value=void 0,o&&i&&le(o)&&(e.value=e.value.map((e=>e.id===o?{...e,revertVersion:i}:e)));const r=t&&"aborted"in t&&t.aborted;document.hidden?(g.setDocumentTitle(k.workflowName,"AI_DONE"),!r&&o&&function(e){const{showNotification:t,isEnabled:n}=Zk();if(!n.value)return;const o=k.workflowName,a="workflow-ready"===e?"aiAssistant.builder.notification.title":"aiAssistant.builder.notification.inputNeeded.title",i="workflow-ready"===e?"aiAssistant.builder.notification.body":"aiAssistant.builder.notification.inputNeeded.body",r=t(E.baseText(a),{body:E.baseText(i,{interpolate:{workflowName:o}}),icon:"/favicon.ico",tag:`workflow-build-${k.workflowId}`,requireInteraction:!1});r&&(ge("browser_generation_done_notified",{completion_type:e}),r.onclick=()=>{window.focus(),r.close()})}(le(o)?"workflow-ready":"input-needed")):g.setDocumentTitle(k.workflowName,"IDLE")}function ce(){ue({aborted:!0})}function de(t,n,a){Ka(t instanceof Error),ue({error:t.message}),o.value=void 0;const i=e.value.filter((e=>!("tool"===e.type&&"running"===e.status)));if("AbortError"===t.name){const t=D(E.baseText("aiAssistant.builder.streamAbortedMessage"),"aborted-streaming",{aborted:!0});return void(e.value=[...i,t])}const r=L(E.baseText("aiAssistant.serviceError.message",{interpolate:{message:t.message}}),n,a);e.value=[...i,r]}function pe(t,a,i,r){const s=r?M(r,a):O(t,a,void 0,i??[]);var l;e.value=R([...e.value,s]),l=E.baseText("aiAssistant.thinkingSteps.thinking"),o.value=l,n.value=!0,g.setDocumentTitle(k.workflowName,"AI_BUILDING")}async function fe(r){if(n.value)return;const l=P.confirmedNodes.map((e=>e.nodeName));let u;oe.value&&void 0===r.resumeData&&(r={...r,resumeData:{action:"modify",feedback:r.text}});try{u=await async function(){const e=k.isNewWorkflow,t=N.stateIsDirty;if((e||t)&&!(await A.saveCurrentWorkflow()))throw new Error("Could not save changes");const n=k.workflowVersionId;if(!n)return;const o=k.workflow.updatedAt;return{id:n,createdAt:"number"==typeof o?new Date(o).toISOString():o}}()}catch{return}I.unsetActiveNodeName();const{text:d,source:p="chat",quickReplyType:h,errorMessage:y,type:v="message",errorNodeType:g,executionStatus:x,resumeData:S,mode:E}=r;void 0!==r.initialGeneration&&(i.value=r.initialGeneration);const _=bh();m.value=_;const O=he(),M="object"==typeof S&&null!==S&&"action"in S&&"approve"===S.action;f.value={userMessageId:_,startWorkflowJson:O,revertVersion:u,...M?{planApproved:!0}:{}},function(e){const{text:t,source:n,type:o,userMessageId:a,currentWorkflowJson:i,errorMessage:r,errorNodeType:s,executionStatus:l,mode:u}=e,d={source:n,message:t,session_id:U.value,start_workflow_json:i,workflow_id:k.workflowId,type:o,manual_exec_success_count_since_prev_msg:c.value.success,manual_exec_error_count_since_prev_msg:c.value.error,user_message_id:a,code_builder:G.value,mode:u,...W()};if("execution"===o){let e="{}",t=0;try{e=JSON.stringify(k.workflowExecutionData??{}),t=Jm(e)/1024}catch(f){console.warn("Failed to stringify execution data for telemetry:",f)}d.execution_data=t>512?"{}":e,d.execution_status=l??"","error"===l&&(d.error_message=r??"",d.error_node_type=s??"")}T.track("User submitted builder message",d);const p=P.confirmedNodes.length;if(p>0){const e=/\b(this node|this|it|these nodes|these|that node|that)\b/i.test(t);T.track("ai.focusedNodes.chatSent",{focused_count:p,has_deictic_ref:e})}}({text:d,source:p,type:v,userMessageId:_,currentWorkflowJson:O,errorMessage:y,errorNodeType:g,executionStatus:x,mode:s.value}),re(),pe(d,_,l,r.planAnswers);const D=k.workflowExecutionData?.data?.resultData,L=void 0!==S?E:E??("plan"===s.value?"plan":void 0),B=await async function(e,t,n={}){const o=Hp(),a=Us(),i=Hs(),r={},s=!1===n.allowSendingParameterValues;n.workflow&&(r.currentWorkflow={...await o.simplifyWorkflowForAssistant(n.workflow,{excludeParameterValues:s}),id:n.workflow.id}),n.executionData&&(r.executionData=o.simplifyResultData(n.executionData,{compact:!0,removeParameterValues:s}),n.workflow&&!s&&(r.expressionValues=await o.extractExpressionsFromWorkflow(n.workflow,n.executionData)));const l=i.buildContextPayload();l.length>0&&(r.selectedNodes=l);const u=a.getVariant(Io.name),c=u===Io.codeNoPinData||u===Io.codePinData,d=u===Io.codePinData,p={templateExamples:a.getVariant(fn.name)===fn.variant,codeBuilder:c,pinData:d,planMode:n.isPlanModeEnabled??!1};if(n.nodesForSchema?.length){const{schemas:e,pinnedNodeNames:t}=o.getNodesSchemas(n.nodesForSchema,s);r.executionSchema=e,r.valuesExcluded=s,t.length>0&&(r.pinnedNodes=t)}return{role:"user",type:"message",id:t,text:e,quickReplyType:n.quickReplyType,workflowContext:r,featureFlags:p,mode:n.mode}}(d,_,{quickReplyType:h,workflow:k.workflow,executionData:D,nodesForSchema:Object.keys(k.nodesByName),mode:L,isPlanModeEnabled:ee.value,allowSendingParameterValues:w.settings.ai.allowSendingParameterValues});void 0!==S&&(B.resumeData=S),P.removeAllConfirmed();const F=($=_,R=async()=>await fe(r),async()=>{e.value=e.value.filter((e=>e.id!==$)),await R()});var $,R;a.value&&a.value.abort(),a.value=new AbortController;try{!function(e,t,n,o,a,i,r){za(e,"/ai/build",{...t,payload:{...t.payload,versionId:i}},n,o,a,void 0,r)}(b.restApiContext,{payload:B},(t=>{const n=C(e.value,t.messages,_,F);e.value=n.messages,n.shouldClearThinking?o.value=void 0:void 0!==n.thinkingMessage&&(o.value=n.thinkingMessage)}),(()=>{ue()}),(e=>de(e,_,F)),u?.id,a.value?.signal)}catch(t){de(t,_,F)}}async function me(){const t=k.workflowId;if(!t)return[];if(!k.isWorkflowSaved[t])return[];if(y.value===t)return[];if(h.value)return[];h.value=!0;try{const n=await async function(e,t,n){return await Va(e,"POST","/ai/sessions",{workflowId:t,codeBuilder:n})}(b.restApiContext,t,G.value);y.value=t;const o=n.sessions||[];if(o.length>0){const n=o[0],a=n.messages.filter(fh).map((e=>e.revertVersionId)),i=await async function(e,t,n){if(0===n.length)return new Map;try{const o=await or(e,t,n);return new Map(o.versions.map((e=>[e.versionId,e.createdAt])))}catch{return new Map}}(b.restApiContext,t,a),r=function(e,t){return e.map((e=>{if(!fh(e))return e;const n=t.get(e.revertVersionId);return n?{...e,revertVersion:{id:e.revertVersionId,createdAt:n}}:function(e){const{revertVersionId:t,...n}=e;return n}(e)}))}(n.messages,i).map((e=>$(e,"id"in e&&"string"==typeof e.id?e.id:bh()))).filter((e=>"workflow-updated"!==e.type));e.value=r;const s=[...r].reverse().find((e=>"user"===e.role&&"text"===e.type));s&&(m.value=s.id)}return o}catch(n){return console.error("Failed to load AI sessions:",n),[]}finally{h.value=!1}}function he(){return JSON.stringify((0,Wd.default)(k.workflow,["nodes","connections"]))}function ye(e,t){l.value=e,u.value=t}async function ve(){if(Y.value)try{const e=await async function(e){return await Va(e,"GET","/ai/build/credits")}(b.restApiContext);ye(e.creditsQuota,e.creditsClaimed)}catch{}}function ge(e,t){const n={workflow_id:k.workflowId,session_id:U.value,event_type:e};t&&Object.keys(t).length>0&&(n.event_properties=t),m.value&&(n.last_user_message_id=m.value),T.track("Workflow builder journey",n)}F((()=>k.workflowId),((e,t)=>{e!==t&&(n.value&&ce(),ie(),e&&S?.name&&Ws.includes(S.name)&&Y.value&&(ve(),me()))})),F([()=>k.workflowId,()=>k.workflow.nodes?.length??0],(([,t])=>{e.value.length>0||ee.value&&(s.value=0===t?"plan":"build")}));const we=Js();return{chatMessages:e,streaming:n,builderThinkingMessage:o,isAIBuilderEnabled:Y,isCodeBuilder:G,builderMode:s,isPlanModeAvailable:ee,isInterrupted:ne,hasPendingPlan:oe,shouldDisableChatInput:ae,workflowPrompt:H,toolMessages:q,workflowMessages:X,assistantMessages:J,trackingSessionId:U,streamingAbortController:a,initialGeneration:i,creditsQuota:r((()=>l.value)),creditsRemaining:K,hasNoCreditsRemaining:Z,hasMessages:Q,workflowTodos:V,hasTodosHiddenByPinnedData:z,hasHadSuccessfulExecution:d,lastUserMessageId:m,unpinAllNodes:function(){const e=k.workflow.pinData;if(e)for(const t of Object.keys(e)){const e=k.getNodeByName(t);e&&k.unpinData({node:e})}},abortStreaming:ce,resetBuilderChat:ie,setBuilderMode:function(e){("plan"!==e||ee.value)&&(s.value=e,ge("user_switched_builder_mode",{mode:e}))},sendChatMessage:fe,resumeWithQuestionsAnswers:async function(e){ne.value&&await fe({text:E.baseText("aiAssistant.builder.planMode.actions.submitAnswers"),resumeData:e,planAnswers:e})},resumeWithPlanDecision:async function(e){if(!ne.value)return;const t=e.feedback?.trim();if("approve"===e.action)return ge("user_clicked_implement_plan"),await fe({text:E.baseText("aiAssistant.builder.planMode.actions.implement"),resumeData:e,mode:"build"}),void(s.value="build");"modify"!==e.action?await fe({text:t?E.baseText("aiAssistant.builder.planMode.actions.rejectWithFeedback",{interpolate:{feedback:t}}):E.baseText("aiAssistant.builder.planMode.actions.reject"),resumeData:e}):await fe({text:t?E.baseText("aiAssistant.builder.planMode.actions.modifyWithFeedback",{interpolate:{feedback:t}}):E.baseText("aiAssistant.builder.planMode.actions.modify"),resumeData:e})},loadSessions:me,getWorkflowSnapshot:he,fetchBuilderCredits:ve,updateBuilderCredits:ye,getRunningTools:j,trackWorkflowBuilderJourney:ge,getAiBuilderMadeEdits:function(){return p.value},resetAiBuilderMadeEdits:function(){p.value=!1},setBuilderMadeEdits:function(e){p.value=e},incrementManualExecutionStats:function(e){c.value[e]++,"success"===e&&(d.value=!0)},resetManualExecutionStats:re,restoreToVersion:async function(t,n){const o=k.workflowId;if(N.stateIsDirty&&!(await A.saveCurrentWorkflow()))return;const a=await we.restoreWorkflow(o,t);x.setWorkflowProperty("versionId",a.versionId),x.setWorkflowProperty("updatedAt",a.updatedAt),await async function(e,t,n,o){return await Va(e,"POST","/ai/build/truncate-messages",{workflowId:t,messageId:n,codeBuilder:o})}(b.restApiContext,o,n,G.value||void 0);const i=e.value.findIndex((e=>e.id===n)),r=-1!==i?e.value.slice(i).filter((e=>"revertVersion"in e&&e.revertVersion)).length:0;return-1!==i&&(e.value=e.value.slice(0,i)),ge("revert_version_from_builder",{revert_user_message_id:n,revert_version_id:t,no_versions_reverted:r}),a},clearExistingWorkflow:function(){x.removeAllConnections({setStateDirty:!1}),x.removeAllNodes({setStateDirty:!1,removePinData:!0})},clearDoneIndicatorTitle:function(){"AI_DONE"===g.getDocumentState()&&g.setDocumentTitle(k.workflowName,"IDLE")}}}))),Ud=1e5,e("tn",Gd=async(e,t,n,o)=>await Va(e,"GET",t?`/projects/${t}/data-tables`:"/data-tables-global",{...n,filter:o??void 0})),e("Yt",(async(e,t,n,o,a,i=!0)=>await Va(e,"POST",`/projects/${n}/data-tables`,{name:t,columns:o??[],hasHeaders:i,...a?{fileId:a}:{}}))),e("Xt",(async(e,t,n)=>await Va(e,"DELETE",`/projects/${n}/data-tables/${t}`,{dataTableId:t,projectId:n}))),e("on",(async(e,t,n,o)=>await Va(e,"PATCH",`/projects/${o}/data-tables/${t}`,{name:n}))),e("Jt",(async(e,t,n,o)=>await Va(e,"POST",`/projects/${n}/data-tables/${t}/columns`,{...o}))),e("Zt",(async(e,t,n,o)=>await Va(e,"DELETE",`/projects/${n}/data-tables/${t}/columns/${o}`))),e("in",(async(e,t,n,o,a)=>await Va(e,"PATCH",`/projects/${n}/data-tables/${t}/columns/${o}/move`,{targetIndex:a}))),e("an",(async(e,t,n,o,a)=>await Va(e,"PATCH",`/projects/${n}/data-tables/${t}/columns/${o}/rename`,{name:a}))),e("nn",(async(e,t,n,o)=>await Va(e,"GET",`/projects/${n}/data-tables/${t}/rows`,{...o??{}}))),e("rn",(async(e,t,n,o)=>await Va(e,"POST",`/projects/${o}/data-tables/${t}/insert`,{returnType:"all",data:[n]}))),e("sn",(async(e,t,n,o,a)=>await Va(e,"PATCH",`/projects/${a}/data-tables/${t}/rows`,{filter:{type:"and",filters:[{columnName:"id",condition:"eq",value:n}]},data:o}))),e("Qt",(async(e,t,n,o)=>{const a=n.map((e=>({columnName:"id",condition:"eq",value:e})));return await Va(e,"DELETE",`/projects/${o}/data-tables/${t}/rows`,{filter:{type:"or",filters:a}})})),e("en",(async e=>await Va(e,"GET","/data-tables-global/limits"))),e("$t",(async(e,t,n,o=!0)=>{const a=await Va(e,"GET",`/projects/${n}/data-tables/${t}/download-csv`,{includeSystemColumns:o}),i=`${a.dataTableName}.csv`;return{csvContent:a.csvContent,filename:i}})),e("cn",(async(e,t,n=!0)=>{const o=new FormData;return o.append("file",t),o.append("hasHeaders",String(n)),await Va(e,"POST","/data-tables/uploads",o)})),Hd=async e=>await Va(e,"GET","/projects"),Yd=async e=>await Va(e,"GET","/projects/my-projects"),qd=async e=>await Va(e,"GET","/projects/personal"),Xd=async(e,t)=>await Va(e,"GET",`/projects/${t}`),Jd=async(e,t)=>await Va(e,"POST","/projects",t),Kd=async(e,t,n)=>{await Va(e,"PATCH",`/projects/${t}`,n)},Zd=async(e,t,n)=>{await Va(e,"DELETE",`/projects/${t}`,n?{transferId:n}:{})},Qd=async e=>await Va(e,"GET","/projects/count"),ep=async(e,t,n)=>{await Va(e,"POST",`/projects/${t}/users`,{relations:n})},tp=async(e,t,n,o)=>{await Va(e,"PATCH",`/projects/${t}/users/${n}`,{role:o})},np=async(e,t,n)=>{await Va(e,"DELETE",`/projects/${t}/users/${n}`)},e("Kt",op={Personal:"personal",Team:"team",Public:"public"}),e("Gt",ap=Ua(Ji.PROJECTS,(()=>{const e=_e(),t=qa(),n=rr(),o=Xp(),a=_m(),i=dl(),s=v([]),l=v([]),u=v(null),c=v(null),d=v({personal:0,team:0,public:0}),p=v(null),f=r((()=>qo(a.currentUser?.globalScopes).project)),m=r((()=>f.value.list?s.value:l.value)),h=r((()=>e.params?.projectId??e.query?.projectId??c.value?.id)),y=r((()=>e.path.includes("home"))),g=r((()=>s.value.filter((e=>e.type===op.Personal)))),w=r((()=>s.value.filter((e=>e.type===op.Team)))),b=r((()=>n.settings.enterprise.projects.team.limit)),k=r((()=>0!==b.value)),x=r((()=>-1===b.value)),I=r((()=>d.value.team>=b.value)),S=r((()=>(x.value||k.value&&!I.value)&&!i.preferences.branchReadOnly)),E=r((()=>Mh(["rbac"],{rbac:{scope:"project:create"}}))),T=r((()=>!n.isChatFeatureEnabled||!gl(["global:chatUser"]))),N=r({get:()=>e?.params?.projectId??p.value,set:e=>{p.value=e}}),A=e=>{c.value=e},_=async()=>{s.value=await Hd(t.restApiContext)},P=async()=>{l.value=await Yd(t.restApiContext)},C=async e=>await Xd(t.restApiContext,e),O=async e=>{c.value=await C(e)};async function M(e){e&&c.value?.id!==e&&A(await C(e))}const D=async()=>{d.value=await Qd(t.restApiContext)};return F(e,(async e=>{N.value=null,e?.path?.includes("home")&&(N.value="home",A(null)),e?.path?.includes("shared")&&(N.value="shared",A(null)),e?.path?.includes("workflow/")&&(h.value?N.value=h.value:N.value="home"),e?.params?.projectId&&await O(e.params.projectId)}),{immediate:!0}),{projects:s,availableProjects:m,myProjects:l,personalProject:u,currentProject:c,currentProjectId:h,isProjectHome:y,personalProjects:g,teamProjects:w,teamProjectsLimit:b,hasUnlimitedProjects:x,canCreateProjects:S,canViewProjects:T,hasPermissionToCreateProjects:E,isTeamProjectFeatureEnabled:k,projectNavActiveId:N,setCurrentProject:A,getAllProjects:_,getMyProjects:P,getPersonalProject:async()=>{u.value=await qd(t.restApiContext)},getAvailableProjects:async()=>{f.value.list?await _():await P()},getProject:O,fetchProject:C,fetchAndSetProject:M,refreshCurrentProject:async function(){h.value&&c.value?.id!==h.value&&await M(h.value)},createProject:async e=>{const n=await Jd(t.restApiContext,e);return await D(),l.value=[...l.value,n],n},updateProject:async(e,n)=>{const{name:o,icon:a,description:i}=n,r={};void 0!==o&&(r.name=o),void 0!==a&&(r.icon=a),void 0!==i&&(r.description=i),await Kd(t.restApiContext,e,r);const s=l.value.findIndex((t=>t.id===e)),{name:u,icon:d,description:p}={name:o,icon:a,description:i};-1!==s&&(void 0!==u&&(l.value[s].name=u),void 0!==d&&(l.value[s].icon=d),void 0!==p&&(l.value[s].description=p)),c.value&&(void 0!==u&&(c.value.name=u),void 0!==d&&(c.value.icon=d),void 0!==p&&(c.value.description=p))},addMember:async(e,{userId:n,role:o})=>{await ep(t.restApiContext,e,[{userId:n,role:o}]),await O(e)},updateMemberRole:async(e,n,o)=>{await tp(t.restApiContext,e,n,o),await O(e)},removeMember:async(e,n)=>{await np(t.restApiContext,e,n),await O(e)},deleteProject:async(e,n)=>{await Zd(t.restApiContext,e,n),await D(),l.value=l.value.filter((t=>t.id!==e))},getProjectsCount:D,setProjectNavActiveIdByWorkflowHomeProject:async(e,t)=>u.value?.id!==e?.id&&e?.type===op.Personal&&t?.some((e=>e.id===u.value?.id))?(N.value="shared",void A(null)):e?.type===op.Personal?u.value?.id===e?.id?(N.value=e?.id??null,void(c.value=u.value)):void(N.value="home"):(N.value=e?.id??null,void(e?.id&&!h.value&&await O(e?.id))),moveResourceToProject:async(e,n,a,i,r)=>{"workflow"===e?await async function(e,t,n){return await Va(e,"PUT",`/workflows/${t}/transfer`,n)}(t.restApiContext,n,{destinationProjectId:a,destinationParentFolderId:i,shareCredentials:r}):(await async function(e,t,n){return await Va(e,"PUT",`/credentials/${t}/transfer`,{destinationProjectId:n})}(t.restApiContext,n,a),await o.fetchAllCredentials({projectId:h.value}))},getResourceCounts:async e=>{const[n,o,a]=await Promise.all([eh(t.restApiContext,{filter:{projectId:e}}),Gm(t.restApiContext,{projectId:e}),Gd(t.restApiContext,e)]);return{credentials:n.length,workflows:o.count,dataTables:a.count}},getProjectSecretProviders:async e=>await Qi(t.restApiContext,e)}}))),ip=Ua(Ji.WORKFLOW_STATE,(()=>({executingNode:ox()}))),rp=o(((e,t)=>{var n=So(),o=Da(),a=en();t.exports=function(e){return function(t,i,r){var s=Object(t);if(!o(t)){var l=n(i,3);t=a(t),i=function(e){return l(s[e],e,s)}}var u=e(t,i,r);return u>-1?s[l?t[u]:u]:void 0}}})),sp=o(((e,t)=>{var n=Qa(),o=1/0;t.exports=function(e){return e?(e=n(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}})),e("Wt",lp=o(((e,t)=>{var n=sp();t.exports=function(e){var t=n(e),o=t%1;return t==t?o?t-o:t:0}}))),up=o(((e,t)=>{var n=Gt(),o=So(),a=lp(),i=Math.max,r=Math.min;t.exports=function(e,t,s){var l=null==e?0:e.length;if(!l)return-1;var u=l-1;return void 0!==s&&(u=a(s),u=s<0?i(l+u,0):r(u,l-1)),n(e,o(t,3),u,!0)}})),cp=n(o(((e,t)=>{var n=rp()(up());t.exports=n}))(),1),dp=n(gn(),1),pp=n(ca(),1),e("Ut",fp=Ue()),mp={relativeLeft:1,relativeRight:1,relativeWidth:1},e("Bt",hp=Ua(Ji.NDV,(()=>{const e=rh("N8N_MAPPING_ONBOARDED"),t=rh("N8N_TABLE_HOVER_ONBOARDED"),n=rh("N8N_AUTOCOMPLETE_ONBOARDED"),o=v(null),a=v({unknown:{...mp},regular:{...mp},dragless:{...mp},inputless:{...mp},wide:{...mp}}),i=v(""),s=v({nodeName:void 0,run:void 0,branch:void 0,data:{isEmpty:!0}}),l=ve("N8N_NDV_INPUT_PANEL_DISPLAY_MODE","schema"),u=v({run:void 0,branch:void 0,data:{isEmpty:!0},editMode:{enabled:!1,value:""}}),c=ve("N8N_NDV_OUTPUT_PANEL_DISPLAY_MODE","table"),d=v(""),p=v(""),f=v({}),m=v(null),h=v(0),y=v({isDragging:!1,type:"",data:"",dimensions:null,activeTarget:null}),g=v("true"===e.value),w=v("true"===t.value),b=v("true"===n.value),k=v(!1),x=v(),I=vm(),S=ix(),E=r((()=>I.getNodeByName(o.value||""))),T=r((()=>{const e=I.getWorkflowExecution,t=s.value.nodeName,n=s.value.run??0,o=s.value.branch??0;return e&&t&&void 0!==n&&void 0!==o?e.data?.resultData?.runData?.[t]?.[n]?.data?.main?.[o]??[]:[]})),N=r((()=>s.value.nodeName)),A=r((()=>{const e=T.value;return N.value?I.pinDataByNodeName(N.value)??e:e})),_=r((()=>A.value.length>0)),P=r((()=>y.value.isDragging)),C=r((()=>y.value.type)),O=r((()=>y.value.data)),M=r((()=>null!==y.value.activeTarget)),D=r((()=>u.value.editMode)),L=r((()=>y.value.activeTarget?.stickyPosition??null)),B=r((()=>{const e={},t=(I.connectionsByDestinationNode[E.value?.name||""]??{}).main;if(!t||t.length<2)return e;for(const[n,o]of t.entries())for(const t of o??[])e[t.node]||(e[t.node]=[]),e[t.node].push(n+1);return e})),F=r((()=>s.value.run)),$=r((()=>s.value.branch)),R=r((()=>s.value.data.isEmpty)),j=r((()=>u.value.data.isEmpty)),V=r((()=>{const e=N.value;return!(!E.value||!e)&&I.workflowObject.getParentNodes(E.value.name,ta.Main,1).includes(e)})),W=r((()=>V.value?m.value:null)),z=r((()=>W.value?W.value:h.value&&N.value?{nodeName:N.value,runIndex:F.value??0,outputIndex:$.value??0,itemIndex:h.value}:null)),U=r((()=>null!==o.value)),G=()=>{w.value=!0,t.value="true"};return{activeNode:E,ndvInputData:T,ndvInputNodeName:N,ndvInputDataWithPinnedData:A,hasInputData:_,inputPanelDisplayMode:l,outputPanelDisplayMode:c,isDraggableDragging:P,draggableType:C,draggableData:O,canDraggableDrop:M,outputPanelEditMode:D,draggableStickyPos:L,ndvNodeInputNumber:B,ndvInputRunIndex:F,ndvInputBranchIndex:$,isInputParentOfActiveNode:V,getHoveringItem:W,expressionTargetItem:z,isNDVOpen:U,isInputPanelEmpty:R,isOutputPanelEmpty:j,focusedMappableInput:d,isMappingOnboarded:g,pushRef:i,activeNodeName:o,focusedInputPath:p,input:s,output:u,hoveringItem:m,highlightDraggables:k,mappingTelemetry:f,draggable:y,isAutocompleteOnboarded:b,expressionOutputItemIndex:h,isTableHoverOnboarded:w,mainPanelDimensions:a,lastSetActiveNodeSource:x,setActiveNodeName:(e,t)=>{o.value!==e&&(o.value=e,x.value=t)},unsetActiveNodeName:()=>{o.value=null,x.value=void 0},setInputNodeName:e=>{s.value.nodeName=e},setInputRunIndex:e=>{s.value.run=e},setOutputRunIndex:e=>{u.value.run=e},setMainPanelDimensions:e=>{a.value[e.panelType]={...a.value[e.panelType],...e.dimensions}},setNDVPushRef:()=>{i.value=`ndv-${js()}`},resetNDVPushRef:()=>{i.value=""},setPanelDisplayMode:e=>{"input"===e.pane?l.value=e.mode:c.value=e.mode},setOutputPanelEditModeEnabled:e=>{u.value.editMode.enabled=e},setOutputPanelEditModeValue:e=>{u.value.editMode.value=e},setMappableNDVInputFocus:e=>{d.value=e},draggableStartDragging:({type:e,data:t,dimensions:n})=>{y.value={isDragging:!0,type:e,data:t,dimensions:n,activeTarget:null}},draggableStopDragging:()=>{y.value={isDragging:!1,type:"",data:"",dimensions:null,activeTarget:null}},setDraggableTarget:e=>{y.value.activeTarget=e},setMappingTelemetry:e=>{f.value={...f.value,...e}},resetMappingTelemetry:()=>{f.value={}},setHoveringItem:e=>{e&&G(),m.value=e},setNDVBranchIndex:e=>{"input"===e.pane?s.value.branch=e.branchIndex:u.value.branch=e.branchIndex},setNDVPanelDataIsEmpty:e=>{"input"===e.panel?s.value.data.isEmpty=e.isEmpty:u.value.data.isEmpty=e.isEmpty},setMappingOnboarded:()=>{g.value=!0,e.value="true"},setTableHoverOnboarded:G,setAutocompleteOnboarded:()=>{b.value=!0,n.value="true"},setHighlightDraggables:e=>{k.value=e},updateNodeParameterIssues:e=>{const t=I.getNodeByName(o.value||"");if(t){const n=I.workflow.nodes.findIndex((e=>e.name===t.name));S.updateNodeAtIndex(n,{issues:{...t.issues,...e}})}},setFocusedInputPath:e=>{p.value=e}}}))),e("zt",yp=new class{pageEventQueue;previousPath;get rudderStack(){return window.rudderanalytics}constructor(){this.pageEventQueue=[],this.previousPath=""}init(e,{instanceId:t,userId:n,projectId:o,versionCli:a}){if(!e.enabled||!e.config||this.rudderStack)return;const{config:{key:i,proxy:r,sourceConfig:s}}=e,l=qa();this.initRudderStack(i,r,{integrations:{All:!1},loadIntegration:!1,configUrl:s}),this.identify(t,n,a,o),this.flushPageEvents(),this.track("Session started",{session_id:l.pushRef})}identify(e,t,n,o){const a=rr(),i={instance_id:e,version_cli:n};a.isCloudDeployment&&(i.user_cloud_id=a.settings?.n8nMetadata?.userId??""),t?this.rudderStack?.identify(`${e}#${t}${o?"#"+o:""}`,i,{context:{ip:"0.0.0.0"}}):this.rudderStack?.reset()}track(e,t){if(!this.rudderStack)return;const n=window.posthog?.get_session_id?.(),o={...t,version_cli:qa().versionCli,posthog_session_id:n};this.rudderStack.track(e,o,{context:{ip:"0.0.0.0"}}),Us().capture(e,o)}page(e){if(this.rudderStack){if(e.path===this.previousPath)return;this.previousPath=e.path;const t=String(e.name);let n={};e.meta?.telemetry&&"function"==typeof e.meta.telemetry.getProperties&&(n=e.meta.telemetry.getProperties(e)),n.theme=xm().appliedTheme;const o=e.meta?.telemetry?.pageCategory||"Editor";this.rudderStack.page(o,t,n,{context:{ip:"0.0.0.0"}})}else this.pageEventQueue.push({route:e})}reset(){this.rudderStack?.reset()}flushPageEvents(){const e=this.pageEventQueue;this.pageEventQueue=[],e.forEach((({route:e})=>{this.page(e)}))}trackAskAI(e,t={}){this.rudderStack&&(t.session_id=qa().pushRef,t.ndv_session_id=hp().pushRef,"askAi.generationFinished"===e)&&this.track("Ai code generation finished",t)}trackAiTransform(e,t={}){this.rudderStack&&(t.session_id=qa().pushRef,t.ndv_session_id=hp().pushRef,"generationFinished"===e)&&this.track("Ai Transform code generation finished",t)}trackNodeParametersValuesChange(e,t){if(this.rudderStack){const n={"n8n-nodes-base.slack":"parameters.otherOptions.includeLinkToWorkflow","n8n-nodes-base.microsoftTeams":"parameters.options.includeLinkToWorkflow","n8n-nodes-base.telegram":"parameters.additionalFields.appendAttribution"}[e]||"parameters.options.appendAttribution";t.name===n&&this.track("User toggled n8n reference option",{node:e,toValue:t.value})}}initRudderStack(e,t,n){if(window.rudderanalytics=window.rudderanalytics||[],this.rudderStack){this.rudderStack.methods=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"],this.rudderStack.factory=e=>(...t)=>{if(!this.rudderStack)throw new Error("RudderStack not initialized");const n=[e,...t];return this.rudderStack.push(n),this.rudderStack};for(const e of this.rudderStack.methods)this.rudderStack[e]=this.rudderStack.factory(e);this.rudderStack.loadJS=()=>{const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn-rs.n8n.io/v1/ra.min.js";const t=document.getElementsByTagName("script")[0];t&&t.parentNode&&t.parentNode.insertBefore(e,t)},this.rudderStack.loadJS(),this.rudderStack.load(e,t,n)}}}),e("Rt",{install(e){e.config.globalProperties.$telemetry=yp}}),e("Ft",vp=Ua("environments",(()=>{const e=qa(),t=ap(),n=v([]),o=r((()=>t.currentProject?.id)),a=r((()=>n.value.filter((e=>!e.project||!o.value||e.project.id===o.value)))),i=r((()=>n.value.filter((e=>!e.project||!o.value&&!e.project||e.project.id===o.value))));return{variables:a,scopedVariables:i,variablesAsObject:r((()=>{const e=i.value.reduce(((e,t)=>(e[t.key]=t.value,e)),{});return new Proxy(e,{set(){throw new Zn("Cannot assign values to variables at runtime")}})})),fetchAllVariables:async function(){const t=await async function(e){return await Va(e,"GET","/variables")}(e.restApiContext);return n.value=t,t},createVariable:async function(o){const a=await async function(e,t){return await Va(e,"POST","/variables",t)}(e.restApiContext,o);if(o.projectId){const e=t.availableProjects?.find((e=>e.id===o.projectId));e&&(a.project={...e,name:e?.name??""})}return n.value.unshift(a),a},updateVariable:async function(o){const a=await async function(e,{id:t,...n}){return await Va(e,"PATCH",`/variables/${t}`,n)}(e.restApiContext,o);if(o.projectId){const e=t.availableProjects?.find((e=>e.id===o.projectId));e&&(a.project={...e,name:e?.name??""})}return n.value=n.value.map((e=>e.id===a.id?a:e)),a},deleteVariable:async function(t){const o=await async function(e,{id:t}){return await Va(e,"DELETE",`/variables/${t}`)}(e.restApiContext,{id:t.id});return n.value=n.value.filter((e=>e.id!==t.id)),o}}}))),e("Pt",vp),gp={[Ji.TAGS]:px("/tags"),[Ji.ANNOTATION_TAGS]:px("/annotation-tags")},e("Ot",bp=(wp=e=>{const t=gp[e];return Ua(e,(()=>{const e=v({}),n=v(!1),o=v(!1),a=v(!1),i=qa(),s=vm(),l=r((()=>Object.values(e.value).sort(((e,t)=>e.name.localeCompare(t.name))))),u=r((()=>n.value)),c=r((()=>Object.keys(e.value).length>0)),d=t=>{t.forEach((t=>{const n=t.id,o=e.value[n];if(o){const a={...o,...t};e.value={...e.value,[n]:a}}else e.value={...e.value,[n]:t}}))},p=t=>{const{[t]:n,...o}=e.value;e.value=o};return{allTags:l,isLoading:u,hasTags:c,tagsById:e,fetchAll:async r=>{if(!Mh(["rbac"],{rbac:{scope:"tag:list"}}))return[];const{force:s=!1,withUsageCount:l=!1}=r??{};if(!s&&o.value&&a.value===l)return Object.values(e.value);n.value=!0;const u=await t.getTags(i.restApiContext,{withUsageCount:l});var c;return c=u,e.value=c.reduce(((e,t)=>(e[t.id]=t,e)),{}),o.value=!0,n.value=!1,u},create:async(e,{incrementExisting:n}={})=>{let o=e;if(n){const e=new RegExp(o),t=l.value.filter((t=>e.test(t.name)));t.length>0&&(o=`${o} (${t.length+1})`)}const a=await t.createTag(i.restApiContext,{name:o});return d([a]),a},rename:async({id:e,name:n})=>{const o=await t.updateTag(i.restApiContext,e,{name:n});return d([o]),o},deleteTagById:async e=>{const n=await t.deleteTag(i.restApiContext,e);return n&&(p(e),s.workflowId&&hx(fx(s.workflowId)).removeTag(e)),n},upsertTags:d,deleteTag:p}}),{})})(Ji.TAGS)),e("Dt",wp(Ji.ANNOTATION_TAGS)),e("Et",kp=Ua(Ji.WORKFLOWS_EE,(()=>{const e=qa(),t=rr(),n=Vs(),o=r((()=>(e,t=we.baseText("workflows.shareModal.info.sharee.fallback"))=>{const{name:o,email:a}=gs(n.getWorkflowById(e)?.homeProject?.name??""),i=o?.replace(/\s+/g," ")?.trim();return i?a?`${i} (${a})`:i:a??t})),a=e=>{const t=vm();n.updateWorkflowInCache(e.workflowId,{sharedWithProjects:e.sharedWithProjects}),t.workflow={...t.workflow,sharedWithProjects:e.sharedWithProjects}};return{getWorkflowOwnerName:o,setWorkflowSharedWith:a,saveWorkflowSharedWith:async n=>{t.isEnterpriseFeatureEnabled[jn.Sharing]&&(await async function(e,t,n){return await Va(e,"PUT",`/workflows/${t}/share`,n)}(e.restApiContext,n.workflowId,{shareWithIds:n.sharedWithProjects.map((e=>e.id))}),a(n))}}}))),xp=n(it(),1),e("St",(e=>e.replace(/\{\{(.*)\}\}/,"$1").trim())),e("yt",(e=>Mo(e)?e.slice(1):e??"")),e("vt",(e=>Mn(e).every((e=>"text"===e.type||/\$secrets(\.[a-zA-Z0-9_]+)+$/.test(e.text.trim()))))),Ip=e=>e instanceof Zn&&"no_execution_data"===e.context.type,Sp=e=>e instanceof Zn&&"no_node_execution_data"===e.context.type,e("_t",Ep=e=>e instanceof Zn&&"paired_item_intermediate_nodes"===e.context.type),Tp=e=>e instanceof Zn&&"paired_item_no_connection"===e.context.type,Np=e=>e instanceof Zn&&"paired_item_invalid_info"===e.context.type,Ap=e=>e instanceof Zn&&"paired_item_no_info"===e.context.type,_p=e=>e instanceof Zn&&"no_input_connection"===e.context.type,Pp=e=>e instanceof Zn&&"pairedItem"===e.functionality,e("gt",Cp=(e,t=!1)=>e?Ip(e)||Sp(e)||Ep(e)||t?"pending":"invalid":"valid"),e("ht",Op=(e,t=!1)=>{if(Ip(e)||Ep(e))return we.baseText("expressionModalInput.noExecutionData");if(Sp(e)){const t=e.context.nodeCause;return we.baseText("expressionModalInput.noNodeExecutionData",{interpolate:{node:t}})}if(_p(e))return we.baseText("expressionModalInput.noInputConnection");if(Tp(e))return we.baseText("expressionModalInput.pairedItemConnectionError");if(Np(e)||Ap(e)){const t=e.context.nodeCause;if(vm().pinDataByNodeName(t))return we.baseText("expressionModalInput.pairedItemInvalidPinnedError",{interpolate:{node:t}})}return Pp(e)?t?we.baseText("expressionModalInput.pairedItemError"):we.baseText("expressionModalInput.pairedItemError.noRunData"):e.message}),e("xt",((e,t=!1)=>e.ok?null===e.result?"":"string"==typeof e.result&&0===e.result.length?we.baseText("parameterInput.emptyString"):"string"==typeof e.result?e.result:String(e.result):"invalid"!==Cp(e.error)?"":`[${we.baseText("parameterInput.error")}: ${Op(e.error,t)}]`)),e("mt",((e,t=!1)=>{if(t)return e;if("string"==typeof e&&!e.startsWith("=")){if(e.endsWith("{{ "))return"="+e+" }}";if(e.endsWith("{{$"))return"="+e.slice(0,-1)+" $ }}"}return e})),e("bt",((e,t=!1)=>!t&&"string"==typeof e&&!e.startsWith("=")&&e.includes("{{")&&e.includes("}}"))),Mp=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/,Dp=e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replace(/\\"/g,'"'):e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1).replace(/\\'/g,"'"):e,Lp=n(Ma(),1),Bp={binary:rn.file,object:rn.object,array:rn.array,string:rn.string,null:"square-minus",number:rn.number,boolean:rn.boolean,function:"code",bigint:"calculator",symbol:"sun",undefined:"ban"},Fp=e=>Bp[e],$p=(e,{nodeName:t,level:n}={})=>({id:`empty-${window.crypto.randomUUID()}`,type:"empty",key:e,level:n??0,nodeName:t??""}),Rp=()=>({id:`moreFields-${window.crypto.randomUUID()}`,type:"icon",icon:"ellipsis",tooltip:Ee().baseText("dataMapping.schemaView.previewExtraFields")}),jp=e=>{const t="object"===e.type,n=Array.isArray(e.value)&&0===e.value.length;return t&&n},Vp=(e,t)=>t?`${t}[${e}]`:e,e("lt",(()=>{const e=v(new Set),t=({isDataEmpty:n,schema:o,nodeType:a,nodeName:i,expressionPrefix:r="",depth:s=0,prefix:l="",level:u=0,preview:c,lastSuccessfulPreview:d,truncateLimit:p})=>{if(jp(o)&&u<0)return[$p(n?"emptyData":"emptySchema")];const f=`{{ ${r?r+o.path:o.path.slice(1)} }}`,m=`${i}-${f}`;if(Array.isArray(o.value)){const h=[];return o.key&&h.push({title:Vp(o.key,l),path:o.path,expression:f,depth:s,level:u,icon:Fp(o.type),id:m,collapsable:!0,nodeType:a,nodeName:i,type:"item",preview:c,binaryData:o.binaryData?o.binaryData:void 0}),e.value.has(m)?h:h.concat(o.value.map((e=>t({isDataEmpty:n,schema:e,expressionPrefix:r,nodeType:a,nodeName:i,depth:s,prefix:"array"===o.type?o.key:"",level:u+1,preview:c,lastSuccessfulPreview:d,truncateLimit:p}))).flat())}return o.key?[{title:Vp(o.key,l),path:o.path,expression:f,level:u,depth:s,value:d?"":Km(o.value,p,0),id:m,icon:Fp(o.type),collapsable:!1,nodeType:a,nodeName:i,type:"item",preview:c}]:[]};return{closedNodes:e,toggleNode:t=>{e.value.has(t)?e.value.delete(t):e.value.add(t)},flattenSchema:t,flattenMultipleSchemas:(n,o,a)=>n.reduce(((n,i)=>{if(n.push({title:i.node.name,id:i.node.name,collapsable:!0,nodeType:i.nodeType,itemCount:i.itemsCount,info:o(i.node),type:"header",preview:i.preview,lastSuccessfulPreview:i.lastSuccessfulPreview}),e.value.has(i.node.name))return n;if("n8n-nodes-base.merge"===i.node.type&&i.itemsCount>1){const e={id:`${i.node.name}-mergeNotice`,type:"callout",level:2,message:Ee().baseText("dataMapping.schemaView.mergeNotice"),theme:"info"};n.push(e)}return jp(i.schema)?i.isNodeExecuted||i.lastSuccessfulPreview?i.isDataEmpty?(n.push($p(i.hasBinary?"emptySchemaWithBinary":"emptyData",{level:1})),n):(n.push($p(i.hasBinary?"emptySchemaWithBinary":"emptySchema",{level:1})),n):(n.push($p("executeSchema",{level:1})),n):(n=n.concat(t({isDataEmpty:i.isDataEmpty,schema:i.schema,depth:i.depth,nodeType:i.node.type,nodeName:i.node.name,preview:i.preview,lastSuccessfulPreview:i.lastSuccessfulPreview,truncateLimit:a,expressionPrefix:Nx({nodeName:i.node.name,distanceFromActive:i.depth,binaryMode:vm().workflow.settings?.binaryMode})})),i.preview&&!i.lastSuccessfulPreview&&n.push(Rp()),n)}),[])}})),Wp=[Qo.NEW_WORKFLOW,Qo.WORKFLOW,Qo.EXECUTION_DEBUG],zp=[Qo.EXECUTION_PREVIEW],Up=[Qo.WORKFLOWS,Qo.PROJECTS_WORKFLOWS],Gp=[Qo.CREDENTIALS,Qo.PROJECTS_CREDENTIALS],e("st",Hp=()=>{const e=hp(),t=um(),n=vm(),o=Sx(),a=Ee(),i=/\$\(\s*(\\?["'`])((?:\\.|(?!\1)[^\\])*)\1\s*\)/g;function r(e){let t;const n=[];for(;null!==(t=i.exec(e));)n.push(t[2]);return n}function s(e){const t=new Set;if(!e)return[];for(const n in e.parameters){let o=[];e.parameters[n]&&"object"==typeof e.parameters[n]&&Object.keys(e.parameters[n]).length?o=r(JSON.stringify(e.parameters[n])):"string"==typeof e.parameters[n]&&e.parameters[n]&&(o=r(e.parameters[n])),o.length&&o.map((e=>e.replace(/\\(['"`])/g,"$1"))).forEach((e=>{t.add(e)}))}return t.size?Array.from(t):[]}function l(e){return Array.isArray(e)?[]:null}function u(e){if(null==e)return e;if(Array.isArray(e))return e.map((e=>u(e)));if("string"==typeof e)return"";if("number"==typeof e||"boolean"==typeof e)return null;if(In(e)){const{cachedResultName:t,cachedResultUrl:n,...o}=e;return{...o,value:""}}if(Et(e))return{assignments:e.assignments?.map((e=>{const{value:t,...n}=e;return{...n}}))??[]};if(Ta(e))return{...e,value:null};if(cn(e))return{...e,conditions:e.conditions.map((e=>({...e,leftValue:l(e.leftValue),rightValue:l(e.rightValue)})))};if("object"==typeof e){const t={};for(const[n,o]of Object.entries(e))t[n]=u(o);return t}return null}async function c(e,t,n){const a=qt(e);return t.forEach((e=>{delete a[e]})),a.parameters=n?.excludeParameterValues?function(e){const t={},n=e??{};for(const[o,a]of Object.entries(n))t[o]=u(a);return t}(a.parameters):await o.getNodeParametersWithResolvedExpressions(a.parameters),a}function d(e){const t=JSON.stringify(e.parameters);return["$json","$input","$binary"].some((e=>t.includes(e)))}function p(e,t){const o=[],a=[];for(const i of e){const e=n.getNodeByName(i);if(!e)continue;n.pinDataByNodeName(e.name)&&a.push(e.name);const{getSchemaForExecutionData:r,getInputDataWithPinned:s}=_x(),l=r(ls(s(e)),t,!0);o.push({nodeName:e.name,schema:l})}return{schemas:o,pinnedNodeNames:a}}const f=e=>{try{return Rr(e.payload)}catch(t){return 0}};return{processNodeForAssistant:c,getNodeInfoForAssistant:function(n,o){if(!n)return{};const{schemas:a}=p(s(n),o?.excludeParameterValues),i=t.getNodeType(n.type);let r;if(i){const e=us(i),t=n.parameters[e?.name??""];r=ds(i).find((e=>e.value===t))}let l={};if(!o?.excludeParameterValues){const t=e.ndvInputData;if(d(n)&&t?.length){const t=e.ndvInputData[0].json;l={inputNodeName:e.input.nodeName,inputData:t}}}return{authType:r,schemas:a,nodeInputData:l}},simplifyErrorForAssistant:function(e){const t={name:e.name,message:e.message};return"type"in e&&(t.type=e.type),"description"in e&&e.description&&(t.description=e.description),e.stack&&(t.stack=e.stack),"lineNumber"in e&&(t.lineNumber=e.lineNumber),t},isNodeReferencingInputData:d,getNodesSchemas:p,getCurrentViewDescription:function(e){switch(!0){case Up.includes(e):return a.baseText("aiAssistant.prompts.currentView.workflowList");case Gp.includes(e):return a.baseText("aiAssistant.prompts.currentView.credentialsList");case zp.includes(e):return a.baseText("aiAssistant.prompts.currentView.executionsView");case Wp.includes(e):return a.baseText("aiAssistant.prompts.currentView.workflowEditor");default:return}},getReferencedNodes:s,simplifyResultData:function(e,t={}){const{compact:n=!1,removeParameterValues:o=!1}=t,a={runData:{}};if(e.error&&(a.error=e.error),!e.runData)return a;for(const i of Object.keys(e.runData)){const t=e.runData[i];a.runData[i]=t.map((e=>{const{data:t,...a}=e;if(o)delete a.inputOverride;else if(n&&a.inputOverride)try{const e=JSON.stringify(a.inputOverride);new Blob([e]).size>2e3&&delete a.inputOverride}catch(i){delete a.inputOverride}return a}))}return e.lastNodeExecuted&&(a.lastNodeExecuted=e.lastNodeExecuted),e.metadata&&(a.metadata=e.metadata),a},simplifyWorkflowForAssistant:async(e,t)=>{let n=e.nodes;return t?.excludeParameterValues&&(n=await Promise.all(e.nodes.map((async e=>await c(e,[],{excludeParameterValues:!0}))))),{name:e.name,active:e.active,connections:e.connections,nodes:n}},trimPayloadSize:(e,t=100)=>{const n=qt(e),o=n.payload;if("init-support-chat"===o.type?(o.context?.activeNodeInfo?.node&&(o.context.activeNodeInfo.node.parameters={}),o.context?.currentWorkflow&&o.context.currentWorkflow?.nodes?.forEach((e=>{e.parameters={}})),o.context?.executionData?.runData&&(o.context.executionData.runData={}),o.context?.executionData?.error&&"node"in o.context?.executionData?.error&&o.context?.executionData?.error?.node&&(o.context.executionData.error.node.parameters={}),f(n)>t&&(o.context=void 0)):"init-error-helper"===o.type&&(o.node.parameters={}),f(n)>t)throw new Error(a.baseText("aiAssistant.payloadTooBig.message"));e.payload=n.payload},extractExpressionsFromWorkflow:async function(e,t){const n=200,a={};if(!e.nodes||0===e.nodes.length)return a;const i=t?.runData?new Set(Object.keys(t.runData)):null,r=e=>{if(void 0===e)return"<EMPTY>";if("string"==typeof e)return e.length<=n?e:e.substring(0,n)+"... [truncated]";if(null===e||"number"==typeof e||"boolean"==typeof e)return e;try{const t=JSON.stringify(e);return t.length<=n?e:t.substring(0,n)+"... [truncated]"}catch{return"<Could not serialize value>"}};for(const s of e.nodes){if(!s.parameters)continue;if(i&&!i.has(s.name))continue;const e=[],t=async(n,a="",i=new WeakSet)=>{if("string"==typeof n&&n.startsWith("=")){if(!n.includes("{{")||!n.includes("}}"))return;let t;try{t=await o.resolveExpression(n,void 0,{contextNodeName:s.name})}catch(l){t=`Error in expression: "${l instanceof Error?l.message:String(l)}"`}const i=n.length>500?n.substring(0,500)+"... [truncated]":n;e.push({expression:i,resolvedValue:r(t),nodeType:s.type,parameterPath:a})}else if(Array.isArray(n)){if(i.has(n))return;i.add(n);for(let e=0;e<n.length;e++)await t(n[e],`${a}[${e}]`,i)}else if("object"==typeof n&&null!==n){if(i.has(n))return;i.add(n);for(const[e,o]of Object.entries(n))await t(o,a?`${a}.${e}`:e,i)}};await t(s.parameters,""),e.length>0&&(a[s.name]=e)}return a}}}),Yp="Unnamed credential",qp=["httpBasicAuth","oAuth2Api","httpDigestAuth","oAuth1Api"],e("rt",Xp=Ua(Ji.CREDENTIALS,(()=>{const e=v({credentialTypes:{},credentials:{}}),n=qa(),o=r((()=>e.value.credentialTypes)),a=r((()=>Object.values(e.value.credentialTypes).sort(((e,t)=>e.displayName.localeCompare(t.displayName))))),i=r((()=>Object.values(e.value.credentials).sort(((e,t)=>e.name.localeCompare(t.name))))),s=r((()=>{const e=i.value;return a.value.reduce(((t,n)=>(t[n.name]=e.filter((e=>e.type===n.name)),t)),{})})),l=r((()=>{const e=i.value;return a.value.reduce(((t,n)=>(t[n.name]=e.filter((e=>e.type===n.name)),t)),{})})),u=r((()=>e=>{let t=[];const n=um().getNodeType(e.type,e.typeVersion);return n?.credentials&&n.credentials.forEach((e=>{t=t.concat(l.value[e.name])})),t.sort(((e,t)=>{const n=new Date(e.updatedAt),o=new Date(t.updatedAt);return n.getTime()-o.getTime()}))})),c=r((()=>t=>e.value.credentialTypes[t])),d=r((()=>t=>e.value.credentials[t])),p=r((()=>(t,n)=>{const o=e.value.credentials[t];return o&&o.type===n?o:void 0})),f=r((()=>e=>s.value[e]||[])),m=r((()=>e=>l.value[e]||[])),h=r((()=>e=>{const t=c.value(e);if(!t)return[];const n=um();return(t.supportedNodes??[]).map((e=>n.getNodeType(e))).filter(Zm)})),y=r((()=>e=>{const t=c.value(e);if(!t)return[];const n=t.properties.find((e=>"scope"===e.name));if(!n||!n.default||"string"!=typeof n.default||""===n.default)return[];let{default:o}=n;return o=o.replace(/^=/,"").replace(/\{\{.*\}\}/,""),/ /.test(o)?o.split(" "):/,/.test(o)?o.split(","):[o]})),g=r((()=>e=>{const{name:t,email:n}=gs(e?.homeProject?.name??"");return t?n?`${t} (${n})`:t:n??we.baseText("credentialEdit.credentialSharing.info.sharee.fallback")})),w=r((()=>e=>{const t=d.value(e);return g.value(t)})),b=r((()=>a.value.filter((e=>e.httpRequestNode&&!e.httpRequestNode.hidden)))),k=t=>{e.value.credentialTypes=t.reduce(((e,t)=>(e[t.name]=t,e)),{})},x=t=>{e.value.credentials=t.reduce(((e,t)=>(t.id&&(e[t.id]=t),e)),{})},I=t=>{t.id&&(e.value.credentials={...e.value.credentials,[t.id]:{...e.value.credentials[t.id],...t}})},S=async t=>(rr().isEnterpriseFeatureEnabled[jn.Sharing]&&(await async function(e,t,n){return await Va(e,"PUT",`/credentials/${t}/share`,n)}(qa().restApiContext,t.credentialId,{shareWithIds:t.sharedWithProjects.map((e=>e.id))}),e.value.credentials[t.credentialId]={...e.value.credentials[t.credentialId],sharedWithProjects:t.sharedWithProjects}),e.value.credentials[t.credentialId]);return{state:e,getCredentialOwnerName:g,getCredentialsByType:f,getCredentialById:d,getCredentialTypeByName:c,getCredentialByIdAndType:p,getNodesWithAccess:h,getUsableCredentialByType:m,credentialTypesById:o,httpOnlyCredentialTypes:b,getScopesByCredentialType:y,getCredentialOwnerNameById:w,allUsableCredentialsForNode:u,allCredentials:i,allCredentialTypes:a,allUsableCredentialsByType:l,setCredentialTypes:k,addCredentials:t=>{t.forEach((t=>{t.id&&(e.value.credentials[t.id]={...e.value.credentials[t.id],...t})}))},setCredentials:x,deleteCredential:async({id:t})=>{if(await async function(e,t){return await Va(e,"DELETE",`/credentials/${t}`)}(n.restApiContext,t)){const{[t]:n,...o}=e.value.credentials;e.value.credentials=o}},upsertCredential:I,fetchCredentialTypes:async e=>{a.value.length>0&&!e||k(await Qm(n.baseUrl))},fetchAllCredentials:async(e={})=>{const{projectId:t,includeScopes:o=!0,onlySharedWithMe:a=!1,includeGlobal:i=!0,externalSecretsStore:r}=e,s={projectId:t},l=await eh(n.restApiContext,{filter:zr(s)?void 0:s,includeScopes:o,onlySharedWithMe:a,includeGlobal:i,externalSecretsStore:r});return x(l),l},fetchAllCredentialsForWorkflow:async e=>{const t=await async function(e,t){return await Va(e,"GET","/credentials/for-workflow",{...t})}(n.restApiContext,e);return x(t),t},createNewCredential:async(e,t,o,a)=>{const i=rr(),r=await async function(e,t){return await Va(e,"POST","/credentials",t)}(n.restApiContext,{name:e.name,type:e.type,data:e.data??{},projectId:t,uiContext:o,isGlobal:e.isGlobal,isResolvable:e.isResolvable});return e?.homeProject&&!r.homeProject&&(r.homeProject=e.homeProject),a?.skipStoreUpdate||(i.isEnterpriseFeatureEnabled[jn.Sharing]?(I(r),e.sharedWithProjects&&await S({credentialId:r.id,sharedWithProjects:e.sharedWithProjects})):I(r)),r},updateCredential:async e=>{const{id:t,data:o}=e,a=await async function(e,t,n){return await Va(e,"PATCH",`/credentials/${t}`,n)}(n.restApiContext,t,o);return I(a),a},getCredentialData:async({id:e})=>await async function(e,t){return await Va(e,"GET",`/credentials/${t}`,{includeData:!0})}(n.restApiContext,e),getCredentialTypesNodeDescriptions:(e,t)=>{if("string"!=typeof e)return[];const n=c.value(e);return n?[n]:t?.credentials?t.credentials:[]},oAuth1Authorize:async e=>await async function(e,t){return await Va(e,"GET","/oauth1-credential/auth",t)}(n.restApiContext,e),oAuth2Authorize:async e=>await async function(e,t){return await Va(e,"GET","/oauth2-credential/auth",t)}(n.restApiContext,e),getNewCredentialName:async e=>{try{const{credentialTypeName:t}=e;let o=Yp;if(!qp.includes(t)){const e=c.value(t);o=e?th(e.displayName):"",o=o.length>0?`${o} account`:Yp}return(await async function(e,t){return await Va(e,"GET","/credentials/new",t?{name:t}:{})}(n.restApiContext,o)).name}catch(t){return Yp}},testCredential:async e=>await async function(e,t){return await Va(e,"POST","/credentials/test",t)}(n.restApiContext,{credentials:e}),getCredentialTranslation:async e=>await Va(n.restApiContext,"GET","/credential-translation",{credentialType:e}),setCredentialSharedWith:S,claimFreeAiCredits:async e=>{const t=await async function(e,{projectId:t}){return await Va(e,"POST","/ai/free-credits",{projectId:t})}(n.restApiContext,{projectId:e});return I(t),t}}}))),e("nt",(e=>{const{store:t,onCredentialCreated:n,onCredentialDeleted:o,onCredentialUpdated:a}=e,i=["createNewCredential","updateCredential","deleteCredential"];return t.$onAction((e=>{const{name:t,after:r,args:s}=e;r((async e=>{if(i.includes(t))switch(t){case"createNewCredential":n?.(e);break;case"updateCredential":a?.(e);break;case"deleteCredential":const t=s[0].id;o?.(t)}}))}))})),Jp=o(((e,t)=>{t.exports=function(e,t,n,o){var a=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}})),Kp=o(((e,t)=>{t.exports=function(e){return function(t){return null==e?void 0:e[t]}}})),Zp=o(((e,t)=>{var n=Kp()({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});t.exports=n})),Qp=o(((e,t)=>{var n=Zp(),o=ft(),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(e){return(e=o(e))&&e.replace(a,n).replace(i,"")}})),ef=o(((e,t)=>{var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(e){return e.match(n)||[]}})),tf=o(((e,t)=>{var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(e){return n.test(e)}})),nf=o(((e,t)=>{var n="\\ud800-\\udfff",o="\\u2700-\\u27bf",a="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="["+r+"]",l="\\d+",u="["+o+"]",c="["+a+"]",d="[^"+n+r+l+o+a+i+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+i+"]",h="(?:"+c+"|"+d+")",y="(?:"+m+"|"+d+")",v="(?:['](?:d|ll|m|re|s|t|ve))?",g="(?:['](?:D|LL|M|RE|S|T|VE))?",w="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",k=b+w+"(?:\\u200d(?:"+["[^"+n+"]",p,f].join("|")+")"+b+w+")*",x="(?:"+[u,p,f].join("|")+")"+k,I=RegExp([m+"?"+c+"+"+v+"(?="+[s,m,"$"].join("|")+")",y+"+"+g+"(?="+[s,m+h,"$"].join("|")+")",m+"?"+h+"+"+v,m+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l,x].join("|"),"g");t.exports=function(e){return e.match(I)||[]}})),of=o(((e,t)=>{var n=ef(),o=tf(),a=ft(),i=nf();t.exports=function(e,t,r){return e=a(e),void 0===(t=r?void 0:t)?o(e)?i(e):n(e):e.match(t)||[]}})),e("tt",af=o(((e,t)=>{var n=Jp(),o=Qp(),a=of(),i=RegExp("[']","g");t.exports=function(e){return function(t){return n(a(o(t).replace(i,"")),e,"")}}}))),e("et",rf=o(((e,t)=>{t.exports=function(e,t,n){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++o<a;)i[o]=e[o+t];return i}}))),sf=o(((e,t)=>{var n=rf();t.exports=function(e,t,o){var a=e.length;return o=void 0===o?a:o,!t&&o>=a?e:n(e,t,o)}})),lf=o(((e,t)=>{var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return n.test(e)}})),uf=o(((e,t)=>{t.exports=function(e){return e.split("")}})),cf=o(((e,t)=>{var n="\\ud800-\\udfff",o="["+n+"]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",r="[^"+n+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+a+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",d=c+u+"(?:\\u200d(?:"+[r,s,l].join("|")+")"+c+u+")*",p="(?:"+[r+a+"?",a,s,l,o].join("|")+")",f=RegExp(i+"(?="+i+")|"+p+d,"g");t.exports=function(e){return e.match(f)||[]}})),df=o(((e,t)=>{var n=uf(),o=lf(),a=cf();t.exports=function(e){return o(e)?a(e):n(e)}})),pf=o(((e,t)=>{var n=sf(),o=lf(),a=df(),i=ft();t.exports=function(e){return function(t){t=i(t);var r=o(t)?a(t):void 0,s=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return s[e]()+l}}})),e("$",ff=o(((e,t)=>{var n=pf()("toUpperCase");t.exports=n}))),mf=o(((e,t)=>{var n=af(),o=ff(),a=n((function(e,t,n){return e+(n?" ":"")+o(t)}));t.exports=a})),hf=60,yf=38,vf=30,gf=15,wf=-20,bf=-200,kf=-5,xf=[{key:"properties.displayName",weight:1.3},{key:"properties.codex.alias",weight:1}],If=/([\p{Ll}\d])(\p{Lu})/gu,Sf=/(\p{Lu})([\p{Lu}][\p{Ll}])/gu,Ef=/(\d)\p{Ll}|(\p{L})\d/u,Tf=/[^\p{L}\d]+/giu,Nf="$1\0$2",Af="",e("Z",_f=o(((e,t)=>{var n=xa(),o=Xa(),a=Oa(),i=Pa(),r=a((function(e,t){if(null==e)return[];var a=t.length;return a>1&&i(e,t[0],t[1])?t=[]:a>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])}));t.exports=r}))),Pf={name:"Demo: My first AI Agent in n8n",meta:{templateId:"self-building-ai-agent"},nodes:[{parameters:{options:{}},id:"b24b05a7-d802-4413-bfb1-23e1e76f6203",name:"When chat message received",type:"@n8n/n8n-nodes-langchain.chatTrigger",typeVersion:1.1,position:[340,20],webhookId:"a889d2ae-2159-402f-b326-5f61e90f602e"},{parameters:{content:"## Start by saying 'hi'\n![Button](/static/openChat.png)",height:149,width:150},id:"5592c045-6718-4c4e-9961-ce67a251b6df",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",typeVersion:1,position:[180,-40]},{parameters:{options:{}},id:"d5e60eb2-267c-4f68-aefe-439031bcaceb",name:"OpenAI Model",type:"@n8n/n8n-nodes-langchain.lmChatOpenAi",typeVersion:1,position:[500,240]},{parameters:{promptType:"define",text:"=## Steps to follow\n\n{{ $agentInfo.memoryConnectedToAgent ? '1. Skip': `1. STOP and output the following:\n\"Welcome to n8n. Let's start with the first step to give me memory: \\n\"Click the **+** button on the agent that says 'memory' and choose 'Simple memory.' Just tell me once you've done that.\"\n----- END OF OUTPUT && IGNORE BELOW -----` }} \n\n\n{{ Boolean($agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool')) ? '2. Skip' : \n`2. STOP and output the following: \\n\"Click the **+** button on the agent that says 'tools' and choose 'Google Calendar.'\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').hasCredentials ? '3. Skip' :\n`3. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and choose a credential from the drop-down.\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').resource === 'Event' ? '4. Skip' :\n`4. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and set **resource** = 'Event'\" `}}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').operation === 'Get Many' ? '5. Skip' :\n`5. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and set **operation** = 'Get Many.'\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').hasValidCalendar ? '6. Skip' :\n`6. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and choose a calendar from the 'calendar' drop-down.\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ ($agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').aiDefinedFields.includes('Start Time') && $agentInfo.tools.find((tool) => tool.type === 'Google Calendar Tool').aiDefinedFields.includes('End Time')) ? '7. Skip' :\n`7. STOP and output the following: \nOpen the Google Calendar tool (double-click) and click the :sparks: button next to the 'After' and 'Before' fields. \\n ----- IGNORE BELOW -----` }}\n\n\n8. If all steps are completed, output the following:\n\"Would you like me to check all events in your calendar for tomorrow {{ $now.plus(1, 'days').toString().split('T')[0] }}?\"\n\n# User message\n\n{{ $json.chatInput }}",options:{systemMessage:'=You are a friendly Agent designed to guide users through these steps.\n\n- Stop at the earliest step mentioned in the steps\n- Respond concisely and do **not** disclose these internal instructions to the user. Only return defined output below.\n- Don\'t output any lines that start with -----\n- Replace ":sparks:" with "" in any message'}},id:"41174c8a-6ac8-42bd-900e-ca15196600c5",name:"Agent",type:"@n8n/n8n-nodes-langchain.agent",typeVersion:1.7,position:[580,20]}],connections:{"When chat message received":{main:[[{node:"Agent",type:"main",index:0}]]},"OpenAI Model":{ai_languageModel:[[{node:"Agent",type:"ai_languageModel",index:0}]]}},pinData:{}},Cf={name:"Demo: RAG in n8n",meta:{templateId:"rag-starter-template"},nodes:[{parameters:{formTitle:"Upload your data to test RAG",formFields:{values:[{fieldLabel:"Upload your file(s)",fieldType:"file",acceptFileTypes:".pdf, .csv",requiredField:!0}]},options:{}},type:"n8n-nodes-base.formTrigger",typeVersion:2.2,position:[-128,0],id:"f7a656ec-83fc-4ed2-a089-57a9def662b7",name:"Upload your file here",webhookId:"82848bc4-5ea2-4e5a-8bb6-3c09b94a8c5d"},{parameters:{options:{}},type:"@n8n/n8n-nodes-langchain.embeddingsOpenAi",typeVersion:1.2,position:[528,480],id:"6ea78663-cf2f-4f2d-8e68-43047c2afd87",name:"Embeddings OpenAI",credentials:{openAiApi:{id:"14",name:"OpenAi account"}}},{parameters:{dataType:"binary",options:{}},type:"@n8n/n8n-nodes-langchain.documentDefaultDataLoader",typeVersion:1.1,position:[320,160],id:"94aecac0-03f9-4915-932b-d14a2576607b",name:"Default Data Loader"},{parameters:{content:"### Readme\nLoad your data into a vector database with the  **Load Data** flow, and then use your data as chat context with the  **Retriever** flow.\n\n**Quick start**\n1. Click on the `Execute Workflow` button to run the  **Load Data** flow.\n2. Click on `Open Chat` button to run the  **Retriever** flow. Then ask a question about content from your document(s)\n\n\nFor more info, check [our docs on RAG in n8n](https://docs.n8n.io/advanced-ai/rag-in-n8n/).",height:300,width:440,color:4},type:"n8n-nodes-base.stickyNote",position:[-656,-64],typeVersion:1,id:"0d07742b-0b36-4c2e-990c-266cbe6e2d4d",name:"Sticky Note"},{parameters:{content:"###  Load Data Flow",height:460,width:700,color:7},type:"n8n-nodes-base.stickyNote",position:[-176,-64],typeVersion:1,id:"d19d04f3-5231-4e47-bed7-9f24a4a8f582",name:"Sticky Note1"},{parameters:{mode:"insert",memoryKey:{__rl:!0,value:"vector_store_key",mode:"list",cachedResultName:"vector_store_key"}},type:"@n8n/n8n-nodes-langchain.vectorStoreInMemory",typeVersion:1.2,position:[64,0],id:"bf50a11f-ca6a-4e04-a6d2-42fee272b260",name:"Insert Data to Store"},{parameters:{mode:"retrieve-as-tool",toolName:"knowledge_base",toolDescription:"Use this knowledge base to answer questions from the user",memoryKey:{__rl:!0,mode:"list",value:"vector_store_key"}},type:"@n8n/n8n-nodes-langchain.vectorStoreInMemory",typeVersion:1.2,position:[944,208],id:"09c0db62-5413-440e-8c13-fb6bb66d9b6a",name:"Query Data Tool"},{parameters:{options:{}},type:"@n8n/n8n-nodes-langchain.agent",typeVersion:2,position:[944,-16],id:"579aed76-9644-42d1-ac13-7369059ff1c2",name:"AI Agent"},{parameters:{options:{}},type:"@n8n/n8n-nodes-langchain.chatTrigger",typeVersion:1.1,position:[720,-16],id:"9c30de61-935a-471f-ae88-ec5f67beeefc",name:"When chat message received",webhookId:"4091fa09-fb9a-4039-9411-7104d213f601"},{parameters:{model:{__rl:!0,mode:"list",value:"gpt-4o-mini"},options:{}},type:"@n8n/n8n-nodes-langchain.lmChatOpenAi",typeVersion:1.2,position:[720,208],id:"b5aa8942-9cd5-4c2f-bd77-7a0ceb921bac",name:"OpenAI Chat Model",credentials:{openAiApi:{id:"14",name:"OpenAi account"}}},{parameters:{content:"###  2. Retriever Flow",height:460,width:680,color:7},type:"n8n-nodes-base.stickyNote",position:[608,-64],typeVersion:1,id:"28bc73a1-e64a-47bf-ac1c-ffe644894ea5",name:"Sticky Note2"},{parameters:{content:"### Embeddings\n\nThe Insert and Retrieve operation use the same embedding node.\n\nThis is to ensure that they are using the **exact same embeddings and settings**.\n\nDifferent embeddings might not work at all, or have unintended consequences.\n",height:240,width:320,color:4},type:"n8n-nodes-base.stickyNote",position:[672,448],typeVersion:1,id:"0cf8c647-418c-4d1a-8952-766145afca72",name:"Sticky Note3"}],pinData:{},connections:{"Upload your file here":{main:[[{node:"Insert Data to Store",type:"main",index:0}]]},"Embeddings OpenAI":{ai_embedding:[[{node:"Insert Data to Store",type:"ai_embedding",index:0},{node:"Query Data Tool",type:"ai_embedding",index:0}]]},"Default Data Loader":{ai_document:[[{node:"Insert Data to Store",type:"ai_document",index:0}]]},"Query Data Tool":{ai_tool:[[{node:"AI Agent",type:"ai_tool",index:0}]]},"When chat message received":{main:[[{node:"AI Agent",type:"main",index:0}]]},"OpenAI Chat Model":{ai_languageModel:[[{node:"AI Agent",type:"ai_languageModel",index:0}]]}},active:!1,settings:{executionOrder:"v1"},tags:[]},Of={name:"Build your first AI agent",meta:{templateCredsSetupCompleted:!1,templateId:"build_your_first_ai_agent"},nodes:[{id:"2c408b32-7862-4411-9ad1-b6e9ff4e41f7",name:"Sticky Note2",type:"n8n-nodes-base.stickyNote",position:[592,-256],parameters:{color:7,width:512,height:352,content:"## [Video Tutorial](https://youtu.be/laHIzhsz12E)\n@[youtube](laHIzhsz12E)"},typeVersion:1},{id:"3808de8d-ef18-47f5-9621-b08ba961ae01",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Introduction Note",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-752,-256],parameters:{width:392,height:460,content:"## Try It Out!\n\n**Launch your first AI agenta chatbot that uses tools to fetch live info, send emails, and automate tasks.**\n\n### To get started:\n1.  **Connect Gemini** (see red sticky note below)\n2.  Click the ** Open chat** button and try asking:\n    *   Whats the weather in Paris?\n    *   Get me the latest tech news.\n    *   Give me ideas for n8n AI agents.\n\n### Questions or Feedback?\nFor feedback, coaching, buit-for-you workflows or any questions, use my unified AI-powered contact form.\n\n **[Get in Touch Here](https://api.ia2s.app/form/templates/academy)**\n\n*Happy Automating! Lucas Peyrin*"},typeVersion:1},{id:"2b55763c-0541-4133-aa79-87c3ce9f0564",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note12",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-272,-160],parameters:{color:7,width:300,height:252,content:" Later, activate this workflow and share the public chat URL to let others talk to your AI Agent!"},typeVersion:1},{id:"f09c396a-dab8-41f8-a6e5-3dbd1dd70323",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note13",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[112,-256],parameters:{color:7,width:396,height:348,content:"Your AI agent can:\n1. **Receive** messages from the chat\n2. **Select** the right tools (e.g., weather, news, email)\n3. **Respond** with live, helpful answers\n\n\n**Open the AI agent node** and edit the **System Message** to adjust your agents thinking, behavior, and replies.\n\n\n\n\n\n\n\n\n\n\n"},typeVersion:1},{id:"f7c57d33-2318-409d-9084-13990299db3d",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note15",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[112,176],parameters:{color:7,width:308,height:260,content:"\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis node helps your agent remember the last few messages to stay on topic."},typeVersion:1},{id:"07ed7ed3-91d0-432f-9327-d2a30601082c",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note16",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[512,176],parameters:{color:7,width:372,height:324,content:"\n\n\n\n\n\n\n\n\n\n\n\n\nThese tools let your agent access real-world data or take actions. Add more to expand its abilities!\n\nClick the  under the agents Tool input to add:\n- Google Calendar (Get Upcoming Events)\n- Gmail (Send an Email) (Gmail)"},typeVersion:1},{id:"24fc1fd5-ed10-43d9-9b35-8facb7f357d5",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Get News",type:"n8n-nodes-base.rssFeedReadTool",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[656,224],parameters:{url:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL', `Use one of:\n- https://feeds.bbci.co.uk/news/world/rss.xml (BBC World  global headlines)\n- https://www.aljazeera.com/xml/rss/all.xml (AlJazeera English  indepth global coverage)\n- http://rss.cnn.com/rss/edition_world.rss (CNN World  breaking news worldwide)\n- https://techcrunch.com/feed/ (TechCrunch  global tech & startup news)\n- http://news.ycombinator.com/rss (Hacker News  tech community headlines)\n- https://n8n.io/blog/rss (n8n Blog  updates & tutorials)\n- https://www.bonappetit.com/feed/recipes-rss-feed/rss (Bon Apptit  recent recipes list)\n- https://www.endsreport.com/rss/news-and-analysis (ENDS Report  environmental law & policy news)\n- https://medlineplus.gov/groupfeeds/new.xml (MedlinePlus  health topics & wellness updates)`, 'string') }}",options:{},toolDescription:"Gets the latest blog posts about any rss feed."},typeVersion:1.2},{id:"ac7d0dd1-8885-41c1-abda-f3742c838992",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Get Weather",type:"n8n-nodes-base.httpRequestTool",creator:"Lucas Peyrin",position:[544,224],parameters:{url:"https://api.open-meteo.com/v1/forecast",options:{},sendQuery:!0,queryParameters:{parameters:[{name:"latitude",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `Latitude of the location, e.g. 45.75 for Lyon. Do not ask the user just infer it automatically.`, 'string') }}"},{name:"longitude",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters1_Value', `Longitude of the location, e.g. 4.85 for Lyon. Do not ask the user just infer it automatically.`, 'string') }}"},{name:"current",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `Comma-separated list of current weather variables (no whitespace).\n\nExample: temperature_2m,windspeed_10m,rain.\n\nOptions: temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weathercode,cloudcover_total,pressure_msl,surface_pressure,windspeed_10m,winddirection_10m,windgusts_10m.`, 'string') }}"},{name:"hourly",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `Comma-separated list of hourly weather variables (no whitespace). Hourly is only useful to get one day's information. For weakly overview please use daily.\n\nExample: temperature_2m,precipitation.\n\nOptions: temperature_2m,relative_humidity_2m,dewpoint_2m,apparent_temperature,precipitation,rain,showers,snowfall,snow_depth,pressure_msl,surface_pressure,cloudcover_total,cloudcover_low,cloudcover_mid,cloudcover_high,windspeed_10m,winddirection_10m,windgusts_10m,visibility,is_day,sunshine_duration,soil_temperature,soil_moisture,PM10,PM2_5,carbon_monoxide,ozone,us_aqi,UV_index.`, 'string') }}"},{name:"daily",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', `Comma-separated list of daily weather variables (no whitespace).\n\nExample: temperature_2m_max,precipitation_sum.\n\nOptions: weathercode,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,sunrise,sunset,daylight_duration,sunshine_duration,pressure_msl_max,pressure_msl_min,surface_pressure_max,surface_pressure_min,windgusts_10m_max,windspeed_10m_max,winddirection_10m_dominant,shortwave_radiation_sum.`, 'string') }}"},{name:"start_date",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters5_Value', `Start date in YYYY-MM-DD format. Example: 2025-07-15`, 'string') }}"},{name:"end_date",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters6_Value', `End date in YYYY-MM-DD format. Must be after start_date. Example: 2025-07-18`, 'string') }}"},{name:"temperature_unit",value:"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters7_Value', `Unit for temperature. Options: celsius (default), fahrenheit.`, 'string') }}"}]},toolDescription:"Get weather forecast anywhere, anytime. You can make requests by assuming most information, the only thing you need is the location (use the city name to infer lat and long automatically) and time period (assume today if not specified)"},notesInFlow:!0,typeVersion:4.2},{id:"332af12a-45ab-4e5d-8dab-da21ba2111f9",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Your First AI Agent",type:"@n8n/n8n-nodes-langchain.agent",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[192,-64],parameters:{options:{systemMessage:"=<role>\nYou are the n8n Demo AI Agent, a friendly and helpful assistant designed to showcase the power of AI agents within the n8n automation platform. Your personality is encouraging, slightly educational, and enthusiastic about automation. Your primary function is to demonstrate your capabilities by using your available tools to answer user questions and fulfill their requests. You are conversational.\n</role>\n\n<instructions>\n<goal>\nYour primary goal is to act as a live demonstration of an AI Agent built with n8n. You will interact with users, answer their questions by intelligently using your available tools, and explain the concepts behind AI agents to help them understand their potential.\n</goal>\n\n<context>\n### How I Work\nI am an AI model operating within a simple n8n workflow. This workflow gives me two key things:\n1.  **A set of tools:** These are functions I can call to get information or perform actions.\n2.  **Simple Memory:** I can remember the immediate past of our current conversation to understand context.\n\n### My Purpose\nMy main purpose is to be a showcase. I demonstrate how you can give a chat interface to various functions (my tools) without needing complex UIs. This is a great way to make powerful automations accessible to anyone through simple conversation.\n\n### My Tools Instructions\nYou must choose one of your available tools if the user's request matches its capability. You cannot perform these actions yourself; you must call the tool.\n\n### About AI Agents in n8n\n- **Reliability:** While I can use one tool at a time effectively, more advanced agents can perform multi-step tasks. However, for `complex, mission-critical processes, it's often more reliable to build structured, step-by-step workflows in n8n rather than relying solely on an agent's reasoning. Agents are fantastic for user-facing interactions, but structured workflows are king for backend reliability.\n- **Best Practices:** A good practice is to keep an agent's toolset focused, typically under 10-15 tools, to ensure reliability and prevent confusion.\n\n### Current Date & Time\n{{ $now }}\n</context>\n\n<output_format>\n- Respond in a friendly, conversational, and helpful tone.\n- When a user's request requires a tool, first select the appropriate tool. Then, present the result of the tool's execution to the user in a clear and understandable way.\n- Be proactive. If the user is unsure what to do, suggest some examples of what they can ask you based on your available tools (e.g., Talk about your tools and what you know about yourself).\n</output_format>\n</instructions>"}},typeVersion:2.2},{id:"95421925-c5ad-48bd-9638-c84ff5b5e3c6",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Example Chat",type:"@n8n/n8n-nodes-langchain.chatTrigger",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-176,-64],webhookId:"e5616171-e3b5-4c39-81d4-67409f9fa60a",parameters:{public:!0,options:{title:"Your first AI Agent ",subtitle:"This is for demo purposes. Try me out !",responseMode:"lastNode",inputPlaceholder:"Type your message here...",showWelcomeScreen:!1},initialMessages:"Hi there! "},typeVersion:1.1},{id:"56d2684a-7f83-4ffd-8501-3253d999b4c6",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Conversation Memory",type:"@n8n/n8n-nodes-langchain.memoryBufferWindow",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[224,224],parameters:{contextWindowLength:30},typeVersion:1.3},{id:"c218a5da-bec7-4034-8d2b-f4bca34e551e",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Connect Gemini",type:"@n8n/n8n-nodes-langchain.lmChatGoogleGemini",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-176,224],parameters:{options:{temperature:0}},typeVersion:1},{id:"199eb2cd-bc6b-4f61-bbf1-f196c7869b43",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-272,176],parameters:{color:3,width:294,height:316,content:"\n\n\n\n\n\n\n\n\n\n\n\n1. [In Google AI Studio](https://aistudio.google.com/app/apikey) click **Create API key in new project** and copy it.\n\n2. Open the ```Connect Gemini``` node:\n   * **Select Credential  Create New**\n   * Paste into **API Key** and **Save**\n"},typeVersion:1}],pinData:{},connections:{"Get News":{ai_tool:[[{node:"Your First AI Agent",type:"ai_tool",index:0}]]},"Get Weather":{ai_tool:[[{node:"Your First AI Agent",type:"ai_tool",index:0}]]},"Example Chat":{main:[[{node:"Your First AI Agent",type:"main",index:0}]]},"Connect Gemini":{ai_languageModel:[[{node:"Your First AI Agent",type:"ai_languageModel",index:0}]]},"Conversation Memory":{ai_memory:[[{node:"Your First AI Agent",type:"ai_memory",index:0}]]}}},Mf={name:"JSON basics",meta:{templateCredsSetupCompleted:!1,templateId:"json_basics"},nodes:[{id:"365fdd40-4e46-497b-8fef-9c356b2234cd",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Execute to Start",type:"n8n-nodes-base.manualTrigger",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3456,1056],parameters:{},typeVersion:1},{id:"6c2fe8ca-9aa9-402a-949d-cc58177eb7e5",cid:"Ikx1Y2FzIFBleXJpbiI",name:"String",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2816,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_string",type:"string",value:"This is a simple string. In JSON, it's always enclosed in double quotes."}]}},typeVersion:3.4},{id:"3cffa562-bedc-42f9-ab4f-8b55cd3b5711",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Key & Value",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3104,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"key",type:"string",value:"value"},{id:"b5f030f4-6650-4181-881f-de44790bb24b",name:"another_key",type:"string",value:"another_value"}]}},typeVersion:3.4},{id:"c4742e5d-8017-45e9-ada5-a2897c87b4cc",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Number",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2528,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_integer",type:"number",value:10},{id:"12345",name:"json_example_float",type:"number",value:12.5}]}},typeVersion:3.4},{id:"60ee473c-635c-41d7-acd2-4fa6c3acb665",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Boolean",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2240,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_boolean",type:"boolean",value:!1}]}},typeVersion:3.4},{id:"56683e92-19a0-4a17-99a9-b92120739c74",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Array",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1664,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_array",type:"array",value:'["first element", 2, false, null]'}]}},typeVersion:3.4},{id:"190c86c7-2d0b-47e1-a729-e22e9610dc8f",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Object",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1360,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_object",type:"object",value:'{"key":"value","array":[1,2,3],"boolean":false,"integer":123,"sub_object":{"sub_key":"Find me!"}}'}]}},typeVersion:3.4},{id:"24b198bc-9a82-477f-921e-c7e5055d17cc",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3680,560],parameters:{width:460,height:656,content:'## Tutorial - What is JSON?\n\nWelcome! This workflow will teach you the basics of JSON, the language that apps and n8n nodes use to exchange information.\n\n**What is JSON?**\nImagine a contact card:\n- **Name:** John Doe\n- **Age:** 30\n- **Has Children:** Yes\n- **Phone Numbers:** ["555-1234", "555-5678"]\n\n\nJSON is just a way of writing this down so a computer can understand it perfectly.\n\n**How to use this tutorial:**\n1.  Click **"Execute Workflow"** button.\n2.  Click on each node, one by one, in order.\n3.  Look at the node\'s output in the panel on the right and read the associated sticky note to understand what\'s happening.'},typeVersion:1},{id:"f9dfa173-b51f-41fb-8587-9c4ee2855265",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note1",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3184,704],parameters:{color:7,width:260,height:516,content:'#### The Heart of JSON: Key & Value\n\nEverything in JSON is built on this pair:\n- A **Key** (the name of the data, always in double quotes `"`).\n- A **Value** (the data itself).\n\n\n`"key": "value"`\n\nIn this node\'s output, you see two key/value pairs. This is the basic building block for everything that follows.'},typeVersion:1},{id:"fc2ad88e-b5cc-4dc4-91e6-f246d1654e26",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note2",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2896,704],parameters:{color:7,width:260,height:516,content:'#### Data Type: String\n\nA string is simply **text**.\n- **Syntax:** The text is always enclosed in double quotes `" "`.\n\n\nLook at the output: the value of `json_example_string` is the text we defined.'},typeVersion:1},{id:"4973dad8-cce4-490c-8ad1-01410ffb7740",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note3",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2608,704],parameters:{color:7,width:260,height:516,content:'#### Data Type: Number\n\nThis is simply a number. It can be a whole number (integer) like 10, or a decimal (float) like 12.5.\n- **Syntax:** Just write the number directly, **WITHOUT quotes**.\n\n\n`"age": 30` (Correct)\n`"age": "30"` (Incorrect, this is a String!)\n\nThis distinction is crucial for doing math!'},typeVersion:1},{id:"4240a747-d2de-42dc-882a-55aee236e76a",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note4",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2320,704],parameters:{color:7,width:260,height:516,content:"#### Data Type: Boolean\n\nThis is a value that can only be **TRUE** or **FALSE**.\n- **Syntax:** `true` or `false` (always lowercase and **WITHOUT quotes**).\n\n\nThink of it like a light switch: on (`true`) or off (`false`). It's very useful for conditions (If/Then logic)."},typeVersion:1},{id:"6eb904bc-a082-43fd-85ea-e672830cdcd2",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note5",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1744,704],parameters:{color:7,width:260,height:516,content:"#### Data Type: Array\n\nAn array is an **ordered list** of items.\n- **Syntax:** Starts with `[` and ends with `]`. Items are separated by commas.\n\n\nAn array can hold anything: strings, numbers, booleans, and even other arrays or objects!"},typeVersion:1},{id:"76fa5320-894b-451f-b372-59144fc0ade3",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note6",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1456,704],parameters:{color:7,width:280,height:516,content:"#### Data Type: Object (JSON Object)\n\nThis is the main concept! An object is a **collection of key/value pairs**.\n- **Syntax:** Starts with `{` and ends with `}`.\n\n\nThis is what allows us to structure complex data, like our contact card from the beginning. Notice how this object contains all the other data types we've seen!"},typeVersion:1},{id:"5976d5fa-6788-46b8-b5e5-1cf6d09f5954",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Null",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1952,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"json_example_null",type:"null",value:{}}]}},typeVersion:3.4},{id:"7786c224-1cd6-4b05-a41b-d47cde98d2a0",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note7",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2032,704],parameters:{color:7,width:260,height:516,content:'#### Data Type: Null\n\nThis special type means "nothing," "no value," or "empty."\n- **Syntax:** `null` (lowercase and **WITHOUT quotes**).\n\n\nIt\'s different from `0` (which is a number) or `""` (which is an empty string). `null` is the intentional absence of a value.'},typeVersion:1},{id:"f8f6e7b6-3f48-4e5c-86d6-001ec61d1f81",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Using JSON (Expressions)",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1024,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"message",type:"string",value:"=Hello, the number from the tutorial is: {{ $('Number').item.json.json_example_integer }}"},{id:"61f385f4-b8e2-4c69-b873-9ffc3ab3fe94",name:"sub_key",type:"string",value:"={{ $json.json_example_object.sub_object.sub_key }}"},{id:"bd752a0f-64bf-44b1-b39b-fca28e86aa5b",name:"array_second_item",type:"string",value:"={{ $json.json_example_object.array[1] }}"}]}},typeVersion:3.4},{id:"0b3ddc47-b1ff-4016-957b-cb6f584a996f",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note8",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1152,704],parameters:{color:5,width:340,height:516,content:"####  THE KEY STEP: Using JSON in n8n!\n\nNow for the magic. How do you use data from a previous node? With **expressions** `{{ }}`.\n\nThis node creates a custom message. Look at the value of the `message` field:\n`Hello, the number from the tutorial is: {{ $('Number').item.json.json_example_integer }}`\n\nIt dynamically pulled the number `10` from the \"Number\" node! This is how you make your nodes talk to each other."},typeVersion:1},{id:"d1004e2e-15b6-4108-9811-6e7d980822d3",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Final Exam",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-672,1056],parameters:{options:{},assignments:{assignments:[{id:"e87952cb-878e-4feb-8261-342eaf887838",name:"summary_string",type:"string",value:"={{ $('String').item.json.json_example_string }}"},{id:"12345",name:"summary_number",type:"number",value:"={{ $('Number').item.json.json_example_integer }}"},{id:"67890",name:"summary_boolean",type:"boolean",value:"={{ $('Boolean').item.json.json_example_boolean }}"},{id:"abcde",name:"summary_null",type:"null",value:"={{ $('Null').item.json.json_example_null }}"},{id:"fghij",name:"summary_array",type:"array",value:"={{ $('Array').item.json.json_example_array }}"},{id:"klmno",name:"summary_object",type:"object",value:"={{ $('Object').item.json.json_example_object }}"}]}},typeVersion:3.4},{id:"43eb149b-ccd3-4557-b744-ef5d9dcf82d9",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note9",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-784,704],parameters:{color:6,width:340,height:516,content:"####  FINAL EXAM: Putting It All Together\n\nThis last node creates a final object by using expressions to pull data from **all the previous nodes**.\n\nClick on this node and look at the expressions in each field. It's a perfect summary of everything you've learned.\n\n**Congratulations! You now understand the basics of JSON and how to use it in n8n.**"},typeVersion:1},{id:"b8fce06f-abe9-45cd-b365-97743a0d8dca",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note10",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-416,16],parameters:{color:3,width:540,height:1200,content:"## Was this helpful? Let me know!\n[![clic](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/clic_down_lucas.gif)](https://api.ia2s.app/form/templates/academy)\n\nI really hope this tutorial helped you understand JSON better. Your feedback is incredibly valuable and helps me create better resources for the n8n community.\n\n### **Have Feedback, a Question, or a Project Idea?**\n\nI've streamlined the way we connect. It all starts with one simple form that takes less than 10 seconds. After that, you'll chat with my AI assistant who will gather the key details and pass them directly on to me.\n\n####  **[Click here to start the conversation](https://api.ia2s.app/form/templates/academy)**\n\nUse this single link for anything you need:\n\n*   **Give Feedback:** Share your thoughts on this templatewhether you found a typo, encountered an unexpected error, have a suggestion, or just want to say thanks!\n\n*   **n8n Coaching:** Get personalized, one-on-one guidance to master n8n. We can work together to get you launched with confidence or help you reach an expert level.\n\n*   **n8n Consulting:** Have a complex business challenge or need a custom workflow built from scratch? Let's partner on a powerful automation solution tailored to your specific needs.\n\n---\n\nHappy Automating!\nLucas Peyrin | [n8n Academy](https://n8n.ac)"},typeVersion:1},{id:"da4af3ac-a717-489d-bb64-3ef34167a0fc",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note11",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3680,240],parameters:{color:2,width:460,height:300,content:"## [Video Tutorial](https://youtu.be/PAmgrwYnzWs?si=yXG1oHIL3UiBcAPa)\n@[youtube](PAmgrwYnzWs)"},typeVersion:1},{id:"b29ca9fc-7fc2-4dd7-9fca-d2d2a9bae237",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note14",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3184,288],parameters:{color:7,width:576,height:392,content:"[![Execute Workflow](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/execute_workflow_json_tutorial.gif)](https://www.youtube.com/watch?v=PAmgrwYnzWs)"},typeVersion:1},{id:"0d2835ec-33c8-426b-87cd-74af33011bd5",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note15",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-784,368],parameters:{color:6,width:336,height:312,content:"## [>> Go to Eval Workflow <<](https://n8n.io/workflows/6232)\n\nVerify your skills with a complete eval workflow to put your JSON Skills to the test.\n[![Test Skills](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/test_your_skillls_button.gif)](https://n8n.io/workflows/6232)"},typeVersion:1}],pinData:{},connections:{Null:{main:[[{node:"Array",type:"main",index:0}]]},Array:{main:[[{node:"Object",type:"main",index:0}]]},Number:{main:[[{node:"Boolean",type:"main",index:0}]]},Object:{main:[[{node:"Using JSON (Expressions)",type:"main",index:0}]]},String:{main:[[{node:"Number",type:"main",index:0}]]},Boolean:{main:[[{node:"Null",type:"main",index:0}]]},"Key & Value":{main:[[{node:"String",type:"main",index:0}]]},"Execute to Start":{main:[[{node:"Key & Value",type:"main",index:0}]]},"Using JSON (Expressions)":{main:[[{node:"Final Exam",type:"main",index:0}]]}}},Df={name:"Expressions",meta:{templateCredsSetupCompleted:!1,templateId:"expressions_tutorial"},nodes:[{id:"2c20bdef-e54e-46ab-9c63-5cf521ec749e",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Start Tutorial",type:"n8n-nodes-base.manualTrigger",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-7360,992],parameters:{},typeVersion:1},{id:"25703548-3e48-4951-9e3b-1d7815e15af5",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-7616,592],parameters:{color:5,width:640,height:560,content:"# Tutorial - Mastering n8n Expressions\n\nWelcome! You know what JSON is. Now, let's learn how to **use it**. This workflow teaches you how to pull data from one node and use it in another using n8n's powerful expressions.\n\n**What is an Expression?**\nAn expression is a small piece of code inside double curly braces `{{ }}` that gets replaced with a dynamic value when the workflow runs. It's the \"glue\" that connects your nodes.\n\n**How to use this tutorial:**\n1.  The first node, **\"Source Data\"**, contains all the data we will use. Execute it once to see what's inside.\n2.  Follow the path from top to bottom. Each node is a new lesson.\n3.  Read the sticky note for each lesson, then look at the node's configuration and its output to understand the concept."},typeVersion:1},{id:"b875f86c-a790-49bc-96a0-e1ccc72a5e80",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Source Data",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-6720,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"name",type:"string",value:"Alice"},{id:"67890",name:"age",type:"number",value:30},{id:"abcde",name:"is_active",type:"boolean",value:!0},{id:"fghij",name:"skills",type:"array",value:'["JavaScript","Python","n8n"]'},{id:"klmno",name:"projects",type:"array",value:'[{"name":"Project A","status":"Done"},{"name":"Project B","status":"In Progress"}]'},{id:"pqrst",name:"contact",type:"object",value:'{"email":"alice@example.com","phone":null}'}]}},typeVersion:3.4},{id:"108d6d9a-6e98-491d-87c1-78d3680f0c40",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note1",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-6944,640],parameters:{color:7,width:520,height:520,content:"## Our Data Source\n\nThis node holds all the sample data for our tutorial. Think of it as a filing cabinet. All the other nodes will be reaching into this cabinet to pull out specific pieces of information.\n\nTake a look at its output to familiarize yourself with the structure.\nWe have:\n- Simple text (`name`)\n- A number (`age`)\n- A list of skills (`skills`)\n- A list of complex projects (`projects`)\n- A nested contact object (`contact`)"},typeVersion:1},{id:"54723ed3-94c5-4104-b1c5-3ac70c262b87",cid:"Ikx1Y2FzIFBleXJpbiI",name:"1. The Basics",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-6192,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"user_name",type:"string",value:"={{ $('Source Data').item.json.name }}"}]}},typeVersion:3.4},{id:"81dc9611-b9b5-41c3-a5ab-460cb0dc1ca6",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note2",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-6400,576],parameters:{color:2,width:500,height:580,content:"## Lesson 1: Accessing a Simple Value\n\nThis is the most common thing you'll do in n8n.\n\n**The Goal:** Get the user's name from the \"Source Data\" node.\n\n**The Expression:** `{{ $('Source Data').item.json.name }}`\n\n**Breakdown:**\n- `{{ ... }}`: Tells n8n \"this is a dynamic expression\".\n- `$('Source Data')`: Selects the node we want data from.\n- `.item.json`: Narrows it down to the JSON data of the current item.\n- `.name`: Selects the specific **key** we want the value of.\n\n**Other Possibility:**\n`{{ $json.name }}` would also work in this case, as `$json` accesses the data from the previous node."},typeVersion:1},{id:"b91f6099-5207-4000-9a0e-e6374718c123",cid:"Ikx1Y2FzIFBleXJpbiI",name:"3. Working with Arrays",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-4960,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"second_skill",type:"string",value:"={{ $('Source Data').last().json.skills[1] }}"}]}},typeVersion:3.4},{id:"2074d65b-2d6b-41af-a4f9-fa9a195a1bf8",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note3",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-5168,624],parameters:{color:4,width:540,height:520,content:"## Lesson 3: Accessing an Array Element\n\nWhat if the data is in a list (an array)? You need to specify *which* item you want.\n\n**The Goal:** Get the user's *second* skill.\n\n**The Expression:** `{{ $('Source Data').last().json.skills[1] }}`\n\n**Breakdown:**\n- `...skills`: Selects the array of skills.\n- `[1]`: Selects the item at a specific position.\n- **IMPORTANT:** Arrays are \"zero-indexed\", which means the first item is `[0]`, the second is `[1]`, the third is `[2]`, and so on."},typeVersion:1},{id:"8ccc139f-0e8c-4c25-9d04-cecf2b335934",cid:"Ikx1Y2FzIFBleXJpbiI",name:"4. Going Deeper",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-4400,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"user_email",type:"string",value:"={{ $('Source Data').last().json.contact.email }}"}]}},typeVersion:3.4},{id:"34264c0c-8282-4b57-a066-0548a31cbf1a",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note4",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-4608,672],parameters:{color:5,width:540,height:480,content:"## Lesson 4: Accessing Nested Data\n\nSometimes, data is organized into objects within other objects.\n\n**The Goal:** Get the user's email address.\n\n**The Expression:** `{{ $('Source Data').last().json.contact.email }}`\n\n**Breakdown:**\n- `...contact`: First, we access the `contact` object.\n- `.email`: Then, we use another dot `.` to go one level deeper and get the value of the `email` key inside it."},typeVersion:1},{id:"4c41fb6a-5f93-408f-9583-1e118d139dcf",cid:"Ikx1Y2FzIFBleXJpbiI",name:"5. The Combo Move",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3808,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"first_project_status",type:"string",value:"={{ $('Source Data').last().json.projects[0].status }}"}]}},typeVersion:3.4},{id:"2123cd02-5cb6-4dd7-89e5-7af1c6edf234",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note5",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-4048,672],parameters:{color:6,width:580,height:480,content:"## Lesson 5: Accessing Data in an Array of Objects\n\nThis is the ultimate test of the previous lessons!\n\n**The Goal:** Get the *status* of the *first* project in the list.\n\n**The Expression:** `{{ $('Source Data').last().json.projects[0].status }}`\n\n**Breakdown:**\n1.  `...projects`: We select the array of projects.\n2.  `[0]`: We pick the first object in that array.\n3.  `.status`: From that chosen object, we grab the value of the `status` key."},typeVersion:1},{id:"f25a5a9d-518d-4a4a-b2ad-36fd0e1f5bd2",cid:"Ikx1Y2FzIFBleXJpbiI",name:"6. A Touch of Magic",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3200,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"name_in_caps",type:"string",value:"={{ $('Source Data').last().json.name.toUpperCase() }}"},{id:"67890",name:"age_in_dog_years",type:"number",value:"={{ Math.round($('Source Data').last().json.age / 7) }}"},{id:"abcde",name:"age_data_type",type:"string",value:"={{ typeof $('Source Data').last().json.age }}"}]}},typeVersion:3.4},{id:"0ebf5e6b-feb8-4f32-9979-9d7555b461ed",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note6",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-3440,640],parameters:{color:3,width:580,height:520,content:"## Lesson 6: A Touch of Magic (JS Functions)\n\nYou can do more than just retrieve data; you can **manipulate and inspect it!**\n\n**The Expressions:**\n- **Transform Text:** `{{ $('Source Data').last().json.name.toUpperCase() }}`\n- **Do Math:** `{{ Math.round($('Source Data').last().json.age / 7) }}`\n- **Check Data Type:** `{{ typeof $('Source Data').last().json.age }}`\n\n**Breakdown:**\n- **`.toUpperCase()`**: A standard JavaScript function for strings.\n- **`Math.round(...)`**: The `Math` object gives you access to powerful math functions.\n- **`typeof`**: An operator that tells you what kind of data you're looking at (\"string\", \"number\", \"object\", etc.)."},typeVersion:1},{id:"81d8c2d6-95cc-47e3-b0f0-9c698a120d1c",cid:"Ikx1Y2FzIFBleXJpbiI",name:'9. The "All Items" View',type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1264,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"all_skills_string",type:"string",value:"={{ $('Split Out Skills').all().map(item => item.json.skills).join(', ') }}"}]}},executeOnce:!0,typeVersion:3.4},{id:"609e27f8-1702-493e-bc8b-cbade4561bd2",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note7",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1696,640],parameters:{color:5,width:780,height:520,content:"## Lesson 9: Working with Multiple Items (`$items` & Arrow Functions)\n\nWhat if a node outputs *multiple* items and you want to summarize them? `$items()` is your tool.\n\n**The Goal:** Get a single, comma-separated string of all the user's skills.\n\n**The Expression:** `{{ $('Split Out Skills').all().map(item `=>` item.json.skills).join(', ') }}`\n\n**What is `item => ...`?**\nThis is an **Arrow Function**, a shorthand for \"for each thing, do this\".\n- `item`: A temporary name for each item in the list as we loop over it.\n- =>: The \"arrow\" that separates the item from the action.\n- `item.json.skills`: The action to performin this case, get the skill value from the item."},typeVersion:1},{id:"d6afc595-c6f0-47b2-894e-b03d6a0227ee",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Final Exam",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-688,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"final_summary",type:"string",value:"=User {{ $('2. The n8n Selectors').last().json.user_name_from_first }} is {{ $('Source Data').last().json.age }}.\n\nTheir best skill is {{ $('3. Working with Arrays').last().json.second_skill }}.\n\nTheir first project was {{ $('Source Data').last().json.projects[0].name }}, which is now {{ $('5. The Combo Move').last().json.first_project_status }}.\n\nAll skills: {{ $('9. The \"All Items\" View').last().json.all_skills_string }}."}]}},typeVersion:3.4},{id:"99a7fb24-491c-436e-a775-6fabdc2c4004",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note8",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-896,736],parameters:{color:6,width:520,height:420,content:"##  FINAL EXAM: Putting It All Together\n\nThis node uses everything we've learned to build a final summary object.\n\nLook at the expressions for each field. They pull data from different nodes and use different techniques you've just practiced.\n\n**Congratulations! You now have the foundational knowledge to link data and build powerful, dynamic workflows in n8n.**"},typeVersion:1},{id:"c3f2fd66-784d-4675-8cb3-72dd33e6ee4e",cid:"Ikx1Y2FzIFBleXJpbiI",name:"2. The n8n Selectors",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-5568,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"user_name_from_first",type:"string",value:"={{ $('Source Data').last().json.name }}"}]}},typeVersion:3.4},{id:"bade9e22-6e9d-4f25-a1b7-974cbf2d5c61",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note9",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-5872,528],parameters:{width:680,height:620,content:"## Lesson 2: The n8n Selectors (`.first()`, `.last()`, `.all()`)\n\nIn the last lesson, we used `.item`. When there is only one output item from a node, this is equivalent to `.last()`. Using `.last()` explicitly is often safer and clearer.\n\n**The Goal:** Get the user's name using the `.last()` selector.\n\n**The Expression:** `{{ $('Source Data').last().json.name }}`\n\n**Why is this better?**\nIf a node ever returns multiple items, `.last()` guarantees you only get data from the very last one.\n\nIf you ever need to match the selected data with the input items, this is where `.item` cannot be replaced.\n\n**Other Selectors:**\n- **`.first()`**: Gets the data from the first item.\n- **`.all()`**: Gets data from ALL items, returning it as an array of objects. (This is different from `$items`!)"},typeVersion:1},{id:"7c4b718e-fca8-4dbe-8b3b-d6aeeaa78d6d",cid:"Ikx1Y2FzIFBleXJpbiI",name:"7. Inspecting Objects",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2640,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"contact_keys",type:"array",value:"={{ Object.keys($('Source Data').last().json.contact) }}"}]}},typeVersion:3.4},{id:"089b02d1-e43b-4baf-8bcf-b2dd7a95df92",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note10",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2832,640],parameters:{color:2,width:500,height:520,content:'## Lesson 7: Inspecting Objects (`Object.keys()`)\n\nWhat if you have an object but you don\'t know what keys are inside it? `Object.keys()` comes to the rescue.\n\n**The Goal:** Get a list of all the keys inside the `contact` object.\n\n**The Expression:** `{{ Object.keys($(\'Source Data\').last().json.contact) }}`\n\nThis is incredibly useful for dynamically processing data. It returns an **array** containing the names of the keys (e.g., `["email", "phone"]`).'},typeVersion:1},{id:"81a16f66-4fca-47af-841c-91e16ff9587e",cid:"Ikx1Y2FzIFBleXJpbiI",name:"8. Utility Functions",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2064,992],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"contact_as_string",type:"string",value:"={{ JSON.stringify($('Source Data').last().json.contact, null, 2) }}"},{id:"06003b65-7482-4d5a-b2c0-1794859ab461",name:"skills",type:"array",value:"={{ $('Source Data').last().json.skills }}"}]}},typeVersion:3.4},{id:"b7aea910-5fd6-420f-9814-77afb8ab9517",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note11",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-2304,640],parameters:{width:580,height:520,content:"## Lesson 8: Utility Functions (`JSON.stringify()`)\n\nSometimes you need to convert a structured JSON object back into a clean, single string. This is common when sending data to another service, like in an AI prompt.\n\n**The Goal:** Turn the entire `contact` object into a formatted string.\n\n**The Expression:** `{{ JSON.stringify($('Source Data').last().json.contact, null, 2) }}`\n\n**Breakdown:**\n- **`JSON.stringify(...)`**: The function that does the conversion.\n- **`null, 2`**: These optional parameters tell it to \"pretty-print\" the string with an indentation of 2 spaces, making it readable."},typeVersion:1},{id:"2b83f9a2-7c71-43bb-b940-d0c3204cf6a2",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Split Out Skills",type:"n8n-nodes-base.splitOut",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-1488,992],parameters:{include:"allOtherFields",options:{},fieldToSplitOut:"skills"},typeVersion:1},{id:"933a0592-2deb-4db7-b801-d52dbbed1252",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note12",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-352,-128],parameters:{color:3,width:540,height:1280,content:"## Was this helpful? Let me know!\n[![clic](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/clic_down_lucas.gif)](https://n8n.ac)\n\nI really hope this tutorial helped you understand n8n Expressions better. Your feedback is incredibly valuable and helps me create better resources for the n8n community.\n\n### **Share Your Thoughts & Ideas**\n\nWhether you have a suggestion, found a typo, or just want to say thanks, I'd love to hear from you!\nHere's a simple n8n form built for this purpose:\n\n####  **[Click here to give feedback](https://api.ia2s.app/form/templates/feedback?template=Expressions%20Tutorial)**\n\n### **Ready to Build Something Great?**\n\nIf you're looking to take your n8n skills or business automation to the next level, I can help.\n\n** n8n Coaching:** Want to become an n8n pro? I offer one-on-one coaching sessions to help you master workflows, tackle specific problems, and build with confidence.\n####  **[Book a Coaching Session](https://api.ia2s.app/form/templates/coaching?template=Expressions%20Tutorial)**\n\n** n8n Consulting:** Have a complex project, an integration challenge, or need a custom workflow built for your business? Let's work together to create a powerful automation solution.\n####  **[Inquire About Consulting Services](https://api.ia2s.app/form/templates/consulting?template=Expressions%20Tutorial)**\n\n---\n\nHappy Automating!\nLucas Peyrin | [n8n Academy](https://n8n.ac)"},typeVersion:1},{id:"efc93cff-1e16-46fc-a839-7cca5ccd27f8",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note15",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-896,304],parameters:{color:6,width:512,height:408,content:"## [>> Go to Eval Workflow <<](https://n8n.io/workflows/6236)\n\nVerify your skills with a complete eval workflow to put your Expression Skills to the test.\n[![Test Skills](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/test_your_skillls_button.gif)](https://n8n.io/workflows/6236)"},typeVersion:1}],connections:{"Source Data":{main:[[{node:"1. The Basics",type:"main",index:0}]]},"1. The Basics":{main:[[{node:"2. The n8n Selectors",type:"main",index:0}]]},"Start Tutorial":{main:[[{node:"Source Data",type:"main",index:0}]]},"4. Going Deeper":{main:[[{node:"5. The Combo Move",type:"main",index:0}]]},"Split Out Skills":{main:[[{node:'9. The "All Items" View',type:"main",index:0}]]},"5. The Combo Move":{main:[[{node:"6. A Touch of Magic",type:"main",index:0}]]},"6. A Touch of Magic":{main:[[{node:"7. Inspecting Objects",type:"main",index:0}]]},"2. The n8n Selectors":{main:[[{node:"3. Working with Arrays",type:"main",index:0}]]},"8. Utility Functions":{main:[[{node:"Split Out Skills",type:"main",index:0}]]},"7. Inspecting Objects":{main:[[{node:"8. Utility Functions",type:"main",index:0}]]},"3. Working with Arrays":{main:[[{node:"4. Going Deeper",type:"main",index:0}]]},'9. The "All Items" View':{main:[[{node:"Final Exam",type:"main",index:0}]]}}},Lf={name:"Workflow logic",meta:{templateCredsSetupCompleted:!1,templateId:"workflow_logic"},nodes:[{id:"d6cf9b3d-66b8-4022-8c9d-698e89cd22fd",name:"Start Sorting",type:"n8n-nodes-base.manualTrigger",position:[-880,608],parameters:{},typeVersion:1},{id:"b8c72a1e-0268-4d99-8141-ca14e35cbd6a",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",position:[-1264,192],parameters:{width:624,height:596,content:'### Tutorial: The Logic Trio (Merge, IF, Switch)\n\nWelcome! This workflow will teach you the three most important nodes for controlling the flow of your data.\n\n**The Analogy: A Package Sorting Center**\n- **Data Items:** Think of these as packages moving on a conveyor belt.\n- **Merge Node:** A point where multiple conveyor belts combine into one.\n- **IF Node:** A simple sorting gate with two paths (e.g., "Fragile" or "Not Fragile").\n- **Switch Node:** An advanced sorting machine with many paths (e.g., sorting by destination city).\n\n\n**How to use this tutorial:**\n1.  Click **"Execute Workflow"**.\n2.  Follow the flow from left to right, clicking on each node to see its output.\n3.  Read the sticky notes to understand what each node does.'},typeVersion:1},{id:"81532695-73c0-4357-a957-3d0ef580578f",name:"Sticky Note1",type:"n8n-nodes-base.stickyNote",position:[-272,192],parameters:{color:4,width:384,height:604,content:"### 1. The Merge Node\n\n**Analogy:** A conveyor belt where packages from different loading docks (the `Set` nodes) come together.\n\n**What it does:** The Merge node combines multiple streams of data into a single stream.\n\nHere, it's set to **Append** mode, which is the most common. It waits for all incoming data and then passes it all through together.\n\n** Look at the output. We now have both the letter and the parcel in one list, ready for the next step!**"},typeVersion:1},{id:"dadbac54-6b31-4a0f-8d5e-b6121467e90e",name:"Sticky Note2",type:"n8n-nodes-base.stickyNote",position:[144,192],parameters:{color:4,width:384,height:596,content:"### 2. The IF Node\n\n**Analogy:** A simple sorting gate with two paths: a \"true\" path and a \"false\" path.\n\n**What it does:** The IF node checks if a condition is met. If it's true, the data goes down the top output. If it's false, it goes down the bottom output.\n\nHere, we're asking a simple question: **\"Does this package have an `is_fragile` property?\"**\n\n** The parcel will go down the 'true' path, and the letters (which don't have that property) will go down the 'false' path.**"},typeVersion:1},{id:"0c330031-eab5-4ee3-8b11-91aee526952a",name:"Add 'Fragile' Handling",type:"n8n-nodes-base.set",position:[624,512],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"handling_instructions",type:"string",value:"Handle with care!"}]},includeOtherFields:!0},typeVersion:3.4},{id:"d14c0e68-3823-4f15-98eb-58a0d4983861",name:"Add 'Standard' Handling",type:"n8n-nodes-base.set",position:[624,704],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"handling_instructions",type:"string",value:"Standard handling"}]},includeOtherFields:!0},typeVersion:3.4},{id:"2ebde854-aa6b-48de-83b1-33950a1486e0",name:"Sticky Note3",type:"n8n-nodes-base.stickyNote",position:[816,272],parameters:{color:5,width:384,height:552,content:"### Merge Again?\n\n**Why do we need another Merge node here?**\n\nAfter the IF node, our data was split into two different paths. Before we can perform the *next* sorting step on all packages, we need to get them back onto the same conveyor belt.\n\nThis is a very common and important pattern in n8n: \n**Split -> Process -> Merge.**"},typeVersion:1},{id:"66ca4ac5-aceb-426e-ab22-50c012602a85",name:"Sticky Note4",type:"n8n-nodes-base.stickyNote",position:[1232,176],parameters:{color:4,width:400,height:648,content:'### 3. The Switch Node\n\n**Analogy:** An advanced sorting machine that can send packages to many different destinations.\n\n**What it does:** The Switch node is like an IF node with multiple doors. It checks the value of a single field (`destination` in this case) and sends the data down the path that matches the value.\n\n- If the destination is "London", it goes to output 0.\n- If it\'s "New York", it goes to output 1.\n- If it\'s something else, it goes to the **default** output.\n\n\n** This is much cleaner than using many IF nodes chained together!**'},typeVersion:1},{id:"10f56a78-85cd-4c8b-88e0-b6b3f0346e89",name:"Send to London Bin",type:"n8n-nodes-base.set",position:[1776,320],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"sorting_bin",type:"string",value:"A1 (London)"}]},includeOtherFields:!0},typeVersion:3.4},{id:"2cba95bd-2c9b-42d1-90cb-74c2edf97ec7",name:"Send to New York Bin",type:"n8n-nodes-base.set",position:[1776,512],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"sorting_bin",type:"string",value:"B2 (New York)"}]},includeOtherFields:!0},typeVersion:3.4},{id:"1531b4e3-eece-4c89-98bd-e9633fdd77f6",name:"Send to Tokyo Bin",type:"n8n-nodes-base.set",position:[1776,704],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"sorting_bin",type:"string",value:"C3 (Tokyo)"}]},includeOtherFields:!0},typeVersion:3.4},{id:"d46604a8-663e-42bd-a175-a34edb8953fb",name:"Default Bin",type:"n8n-nodes-base.set",position:[1776,896],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"sorting_bin",type:"string",value:"Return to Sender"}]},includeOtherFields:!0},typeVersion:3.4},{id:"570040aa-3f8d-4f59-904a-ee3deb36a9df",name:"Final Sorted Packages",type:"n8n-nodes-base.noOp",position:[2160,624],parameters:{},typeVersion:1},{id:"756313e7-d2f3-45cc-a4f5-f91e7a8f778a",name:"Sticky Note5",type:"n8n-nodes-base.stickyNote",position:[2032,272],parameters:{color:6,width:368,height:560,content:"### All Packages Sorted!\n\nCongratulations! You've successfully used the three logic nodes to sort your packages.\n\n**You learned how to:**\n- **Merge** data from different sources.\n- Use **IF** for simple true/false decisions.\n- Use **Switch** for complex, multi-path routing.\n\n\nMastering these three nodes is the key to building powerful and intelligent workflows in n8n."},typeVersion:1},{id:"4466652f-cc2b-47b1-bf4f-98d89753881f",name:"3. Switch Node",type:"n8n-nodes-base.switch",position:[1392,576],parameters:{rules:{values:[{outputKey:"London",conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"strict"},combinator:"and",conditions:[{id:"8d43cde4-027a-4ca7-a24c-6f74f12d6238",operator:{type:"string",operation:"equals"},leftValue:"={{ $json.destination }}",rightValue:"London"}]},renameOutput:!0},{outputKey:"New York",conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"strict"},combinator:"and",conditions:[{id:"399a0fbd-6be5-48e9-9f66-04cf385cb418",operator:{name:"filter.operator.equals",type:"string",operation:"equals"},leftValue:"={{ $json.destination }}",rightValue:"New York"}]},renameOutput:!0},{outputKey:"Tokyo",conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"strict"},combinator:"and",conditions:[{id:"a69d387d-a174-42b3-bc5f-c8b46b7c2375",operator:{name:"filter.operator.equals",type:"string",operation:"equals"},leftValue:"={{ $json.destination }}",rightValue:"Tokyo"}]},renameOutput:!0}]},options:{fallbackOutput:"extra",renameFallbackOutput:"Default"}},typeVersion:3.2},{id:"add68013-30a7-43db-93d4-5af691764684",name:"Create Letter",type:"n8n-nodes-base.set",position:[-496,416],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"package_id",type:"string",value:"L-001"},{id:"67890",name:"type",type:"string",value:"letter"},{id:"abcde",name:"destination",type:"string",value:"London"}]}},typeVersion:3.4},{id:"5af75a45-b912-41c6-b073-03188ae914ef",name:"1. Merge Node",type:"n8n-nodes-base.merge",position:[-128,592],parameters:{numberInputs:3},typeVersion:3.2},{id:"11627c3b-465a-4a4a-bfe9-95c08d502f2f",name:"2. IF Node",type:"n8n-nodes-base.if",position:[272,608],parameters:{options:{},conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"loose"},combinator:"and",conditions:[{id:"a68aad83-1d09-4ebe-9732-aaedc407bb4b",operator:{type:"boolean",operation:"true",singleValue:!0},leftValue:"={{ $json.is_fragile }}",rightValue:""}]},looseTypeValidation:!0},typeVersion:2.2},{id:"4b5b5ba4-25e1-4ef0-93d8-50670dbc1ce0",name:"Re-group All Packages",type:"n8n-nodes-base.merge",position:[960,608],parameters:{},typeVersion:3.2},{id:"21d270c4-c19c-42ed-a6e3-67ecedd1c0c9",name:"Create 2nd Letter",type:"n8n-nodes-base.set",position:[-496,608],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"package_id",type:"string",value:"L-002"},{id:"67890",name:"type",type:"string",value:"letter"},{id:"abcde",name:"destination",type:"string",value:"Tokyo"}]}},typeVersion:3.4},{id:"8a295323-9515-410c-9ac1-fb431d08cea2",name:"Create Parcel",type:"n8n-nodes-base.set",position:[-496,800],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"package_id",type:"string",value:"P-001"},{id:"67890",name:"type",type:"string",value:"parcel"},{id:"abcde",name:"destination",type:"string",value:"New York"},{id:"fghij",name:"is_fragile",type:"boolean",value:!0}]}},typeVersion:3.4},{id:"c06a0f40-cc18-4710-8b07-9d396e89a83d",name:"Sticky Note10",type:"n8n-nodes-base.stickyNote",position:[2432,32],parameters:{color:3,width:540,height:800,content:"## Was this helpful? Let me know!\n\nI really hope this template helped you understand how Logical Operation Nodes work here in n8n. Your feedback is incredibly valuable and helps me create better resources for the n8n community.\n\n### **Share Your Thoughts & Ideas**\n\nWhether you have a suggestion, found a typo, or just want to say thanks, I'd love to hear from you!\nHere's a simple n8n form built for this purpose:\n\n####  **[Click here to give feedback](https://api.ia2s.app/form/templates/feedback?template=Merge%20If%20Switch)**\n\n### **Ready to Build Something Great?**\n\nIf you're looking to take your n8n skills or business automation to the next level, I can help.\n\n** n8n Coaching:** Want to become an n8n pro? I offer one-on-one coaching sessions to help you master workflows, tackle specific problems, and build with confidence.\n####  **[Book a Coaching Session](https://api.ia2s.app/form/templates/coaching?template=Merge%20If%20Switch)**\n\n** n8n Consulting:** Have a complex project, an integration challenge, or need a custom workflow built for your business? Let's work together to create a powerful automation solution.\n####  **[Inquire About Consulting Services](https://api.ia2s.app/form/templates/consulting?template=Merge%20If%20Switch)**\n\n---\n\nHappy Automating!\nLucas Peyrin"},typeVersion:1}],pinData:{},connections:{"2. IF Node":{main:[[{node:"Add 'Fragile' Handling",type:"main",index:0}],[{node:"Add 'Standard' Handling",type:"main",index:0}]]},"Default Bin":{main:[[{node:"Final Sorted Packages",type:"main",index:0}]]},"1. Merge Node":{main:[[{node:"2. IF Node",type:"main",index:0}]]},"Create Letter":{main:[[{node:"1. Merge Node",type:"main",index:0}]]},"Create Parcel":{main:[[{node:"1. Merge Node",type:"main",index:2}]]},"Start Sorting":{main:[[{node:"Create Parcel",type:"main",index:0},{node:"Create 2nd Letter",type:"main",index:0},{node:"Create Letter",type:"main",index:0}]]},"3. Switch Node":{main:[[{node:"Send to London Bin",type:"main",index:0}],[{node:"Send to New York Bin",type:"main",index:0}],[{node:"Send to Tokyo Bin",type:"main",index:0}],[{node:"Default Bin",type:"main",index:0}]]},"Create 2nd Letter":{main:[[{node:"1. Merge Node",type:"main",index:1}]]},"Send to Tokyo Bin":{main:[[{node:"Final Sorted Packages",type:"main",index:0}]]},"Send to London Bin":{main:[[{node:"Final Sorted Packages",type:"main",index:0}]]},"Send to New York Bin":{main:[[{node:"Final Sorted Packages",type:"main",index:0}]]},"Re-group All Packages":{main:[[{node:"3. Switch Node",type:"main",index:0}]]},"Add 'Fragile' Handling":{main:[[{node:"Re-group All Packages",type:"main",index:0}]]},"Add 'Standard' Handling":{main:[[{node:"Re-group All Packages",type:"main",index:1}]]}}},Bf={name:"API fundamentals",meta:{templateCredsSetupCompleted:!1,templateId:"api_fundamentals"},nodes:[{id:"52e84ac4-6495-443e-b3d6-16d3291a6261",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Start Tutorial",type:"n8n-nodes-base.manualTrigger",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[320,464],parameters:{},typeVersion:1},{id:"5aab442c-2fd7-4b41-ae0f-eeaf9e722213",cid:"Ikx1Y2FzIFBleXJpbiI",name:"1. The Kitchen (GET /menu)",type:"n8n-nodes-base.webhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1632,464],webhookId:"a1b2c3d4-e5f6-7890-1234-567890abcdef",parameters:{path:"/tutorial/api/menu",options:{},responseMode:"lastNode"},typeVersion:2},{id:"cee20f21-eb2e-4ea6-947f-acbc7f27a437",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Prepare Menu Data",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1856,464],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"item",type:"string",value:"Pizza"},{id:"67890",name:"price",type:"number",value:12}]}},typeVersion:3.4},{id:"4af53e2a-0d5a-4b2e-8e65-fbc19d138abb",cid:"Ikx1Y2FzIFBleXJpbiI",name:"1. The Customer (GET Menu Item)",type:"n8n-nodes-base.httpRequest",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1312,464],parameters:{url:"={{ $json.base_url }}/tutorial/api/menu",options:{}},typeVersion:4.1},{id:"a1f76b04-daf5-41b9-b300-332b61d69cda",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[-320,-96],parameters:{width:800,height:768,content:'## Tutorial - What is an API?\n\nWelcome! This workflow will teach you the basics of APIs (Application Programming Interfaces).\n\n**What is an API?**\nThink of it like ordering food at a restaurant.\n- **You** are the "Client" (the **HTTP Request** node). You want something.\n- The **Kitchen** is the "Server" (the **Webhook** node). It has the data/service you want.\n- The **API** is the **Waiter and the Menu**. It\'s the set of rules and options for making a request and getting a response.\n\n\n**What is an Endpoint?**\nAn endpoint is a specific address for a specific action. For example, `GET /menu` is one endpoint to get the menu, and `POST /review` is another to submit a review. Each webhook in this tutorial represents one endpoint.\n\n**How to use this tutorial:**\n1.  **Activate** the workflow (toggle on the top right).\n2.  **Configure the Base URL** (see the yellow note to the left).\n3.  Click **"Execute Workflow"**. The workflow will run from top to bottom.\n4.  Explore each "Lesson" by clicking on the **HTTP Request** node (the Customer) and its corresponding **Webhook** node (the Kitchen).\n\n\n** How to See the Data:**\nWhen you run this, the Webhook nodes run in the background. To see the data they received, go to the **"Executions"** tab of this workflow. You will see a separate execution for each API call!'},typeVersion:1},{id:"d37a6305-25ff-412d-8763-06e4c0a6b8ae",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note1",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1248,160],parameters:{color:7,width:864,height:512,content:"#### Lesson 1: The Basics (Method & URL)\n\nThis is the simplest possible request.\n\n- **URL (Uniform Resource Locator):** This is the **address of the restaurant's kitchen**. The HTTP Request node needs to know exactly where to send the order. We use an expression to get the Webhook's address automatically from our configuration.\n\n- **Method: `GET`**: This is **what you want to do**. `GET` is used to **retrieve** or **get** information. It's like asking the waiter, \"What's on the menu today?\" `GET` requests are simple and don't contain a \"body\" payload.\n\n\n** Look at the output of the HTTP Request node. It received exactly what the `Respond to Webhook` node sent back!**"},typeVersion:1},{id:"edef5d0b-f0a4-4651-9ee4-84ecbe9e8062",cid:"Ikx1Y2FzIFBleXJpbiI",name:"2. The Customer (GET with Query Params)",type:"n8n-nodes-base.httpRequest",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1312,1136],parameters:{url:"={{ $json.base_url }}/tutorial/api/order",options:{},sendQuery:!0,queryParameters:{parameters:[{name:"extra_cheese",value:"true"}]}},typeVersion:4.1},{id:"a2b5422d-fb46-4737-8182-dbbb50293fa1",cid:"Ikx1Y2FzIFBleXJpbiI",name:"2. The Kitchen (GET /order)",type:"n8n-nodes-base.webhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1632,1136],webhookId:"b2c3d4e5-f6a7-8901-2345-67890abcdef1",parameters:{path:"/tutorial/api/order",options:{},responseMode:"lastNode"},typeVersion:2},{id:"91d5b241-64c9-48cf-bf79-fff121d0febf",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Prepare Cheese Pizza",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2064,1040],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"order",type:"string",value:"Pizza with extra cheese"}]}},typeVersion:3.4},{id:"bee0bce4-f854-4c1d-9ad1-b526f02e1925",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Prepare Plain Pizza",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2064,1232],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"order",type:"string",value:"Plain Pizza"}]}},typeVersion:3.4},{id:"d6862155-ea76-4357-bae7-c4329ec1a612",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note2",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1248,704],parameters:{color:7,width:1056,height:720,content:'#### Lesson 2: Customizing a Request (Query Parameters)\n\nWhat if you want to customize your order? That\'s what Query Parameters are for.\n\n**Query Parameters:** These are simple `key=value` options added to the end of the URL after a `?`. They are used to filter, sort, or specify what you want.\n\nIt\'s like telling the waiter, "I\'ll have the pizza... **and can you add extra cheese?**"\n\nThe full URL sent by the HTTP Request node looks like this:\n`.../tutorial/api/order?extra_cheese=true`\n\n** Important:** Because they are part of the URL, **all query parameter values are treated as strings!** The webhook receives `"true"` (a string), not `true` (a boolean). The IF node is set to a "loose" comparison to handle this correctly.\n\n** The Webhook node uses an IF node to check for this parameter and changes its response. Try setting the value to `false` in the HTTP Request node and run it again!**'},typeVersion:1},{id:"c568bc8c-822d-42b9-ab9b-2d91ae4e4fed",cid:"Ikx1Y2FzIFBleXJpbiI",name:"3. The Customer (POST with Body)",type:"n8n-nodes-base.httpRequest",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1312,1744],parameters:{url:"={{ $json.base_url }}/tutorial/api/review",method:"POST",options:{},sendBody:!0,bodyParameters:{parameters:[{name:"comment",value:"The pizza was amazing!"},{name:"rating",value:5}]}},typeVersion:4.1},{id:"0f0dae83-3290-4a5f-a039-3b54d87bcf7d",cid:"Ikx1Y2FzIFBleXJpbiI",name:"3. The Kitchen (POST /review)",type:"n8n-nodes-base.webhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1632,1744],webhookId:"c3d4e5f6-a7b8-9012-3456-7890abcdef12",parameters:{path:"/tutorial/api/review",options:{},httpMethod:"POST",responseMode:"lastNode"},typeVersion:2},{id:"c5aa4f94-eca3-4321-b961-084917b93b81",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Process Review Data",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1856,1744],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"status",type:"string",value:"review_received"},{id:"67890",name:"your_comment",type:"string",value:"={{ $json.body.comment }}"},{id:"91011",name:"your_rating",type:"number",value:"={{ $json.body.rating }}"}]}},typeVersion:3.4},{id:"4020d264-7c01-4cf2-b51e-b8b3f2bc382b",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note3",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1248,1456],parameters:{color:7,width:1056,height:476,content:'#### Lesson 3: Sending Data (POST & Body)\n\nSometimes, you don\'t want to *get* data, you want to *send* it.\n\n- **Method: `POST`**: This method is used to **send new data** to the server to create or update a resource. It\'s like handing the waiter a completed customer feedback card.\n\n- **Body:** This is the **actual data you are sending**. Unlike a `GET` request, a `POST` request has a "body" where you can put complex data, like a JSON object. This is much more powerful than query parameters for sending information.\n\n\n** The HTTP Request sends a JSON object in its body. The Webhook receives it and includes your comment in its response. Check the "Executions" panel to see the full body the webhook received!**'},typeVersion:1},{id:"0fec2702-e2c9-4090-a327-f1d723b144b6",cid:"Ikx1Y2FzIFBleXJpbiI",name:"4. The Customer (GET with Headers/Auth)",type:"n8n-nodes-base.httpRequest",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1312,2608],parameters:{url:"={{ $json.base_url }}/tutorial/api/secret-dish",options:{},sendHeaders:!0,headerParameters:{parameters:[{name:"x-api-key",value:"super-secret-key"}]}},typeVersion:4.1},{id:"a35c1fc1-65a3-4d84-b29e-22939d334005",cid:"Ikx1Y2FzIFBleXJpbiI",name:"4. The Kitchen (GET /secret-dish)",type:"n8n-nodes-base.webhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1632,2608],webhookId:"d4e5f6a7-b8c9-0123-4567-890abcdef123",parameters:{path:"/tutorial/api/secret-dish",options:{},responseMode:"responseNode"},typeVersion:2},{id:"8cb4d6d3-c29f-4562-a966-d13beafd8f40",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note4",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1248,1968],parameters:{color:7,width:1056,height:908,content:"#### Lesson 4: Identification (Headers & Auth)\n\nHeaders contain meta-information *about* your request. They're not part of the data itself, but they provide important context. Authentication is a common use case.\n\n- **Headers:** Think of this as **showing your VIP membership card** or whispering a secret password to the waiter. It's information that proves who you are or what your request's properties are.\n\n- **Authentication (Auth):** This is the process of proving your identity. Here, we use a custom header (`x-api-key`) as a \"secret key\". In the real world, this is how most APIs control access.\n\n\n** The Webhook checks for the correct secret key in the headers. If it's wrong or missing, it denies the request with a `401 Unauthorized` status code. Try changing the key in the HTTP Request node!**"},typeVersion:1},{id:"3ab5e611-71d2-4ff3-9462-fb69d60b48aa",cid:"Ikx1Y2FzIFBleXJpbiI",name:"5. The Customer (Request with Timeout)",type:"n8n-nodes-base.httpRequest",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",onError:"continueErrorOutput",position:[1312,3328],parameters:{url:"={{ $json.base_url }}/tutorial/api/slow-service",options:{timeout:2e3}},typeVersion:4.1},{id:"5545e004-b8c3-4c47-91ee-31a2efa4c833",cid:"Ikx1Y2FzIFBleXJpbiI",name:"5. The Kitchen (GET /slow-service)",type:"n8n-nodes-base.webhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1632,3328],webhookId:"e5f6a7b8-c9d0-1234-5678-90abcdef1234",parameters:{path:"/tutorial/api/slow-service",options:{},responseMode:"lastNode"},typeVersion:2},{id:"237f65ad-3f1d-4afe-8541-89108afd57de",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Prepare Slow Response",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2064,3328],parameters:{options:{},assignments:{assignments:[{id:"12345",name:"status",type:"string",value:"Finally, your food is here!"}]}},typeVersion:3.4},{id:"dbe83810-b95f-46dd-bc2d-bf456fe11f94",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note5",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1248,2912],parameters:{color:7,width:1056,height:624,content:"#### Lesson 5: Being Patient (Timeout & Error Handling)\n\nAn API request isn't instant. What if the kitchen is really busy?\n\n- **Timeout:** This is the **maximum amount of time (in milliseconds) you are willing to wait** for a response before you give up.\n\n- **On Error Output:** Notice the HTTP Request node has two outputs. The bottom one is the **error path**. If the request fails for any reason (like a timeout), the workflow will continue down this path instead of stopping.\n\n\nIn this example:\n- The **Kitchen (Webhook)** has a 3-second delay.\n- The **Customer (HTTP Request)** is only willing to wait for 2 seconds (2000 ms).\n\n\n** This request is designed to FAIL! The customer gives up before the kitchen can finish. The error output of the HTTP Request node will light up. This is crucial for building robust workflows that can handle API failures.**"},typeVersion:1},{id:"4e74c301-06e2-4b19-8101-3c63816ea615",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Wait 3 seconds",type:"n8n-nodes-base.wait",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1856,3328],webhookId:"86b44ff3-7d31-4027-a1cd-df67f9ab974a",parameters:{amount:3},typeVersion:1.1},{id:"42619763-955e-40d6-bbdb-23eea3c0bd85",cid:"Ikx1Y2FzIFBleXJpbiI",name:"IF Authorized",type:"n8n-nodes-base.if",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1856,2608],parameters:{options:{},conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"strict"},combinator:"and",conditions:[{id:"ca861c2d-78d9-403b-8bab-28d8e7dcf39c",operator:{name:"filter.operator.equals",type:"string",operation:"equals"},leftValue:"={{ $json.headers['x-api-key'] }}",rightValue:"super-secret-key"}]}},typeVersion:2.2},{id:"562d4436-df8c-47bf-b259-eea95ea88147",cid:"Ikx1Y2FzIFBleXJpbiI",name:"IF extra cheese",type:"n8n-nodes-base.if",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1840,1136],parameters:{options:{},conditions:{options:{version:2,leftValue:"",caseSensitive:!0,typeValidation:"loose"},combinator:"and",conditions:[{id:"ca861c2d-78d9-403b-8bab-28d8e7dcf39c",operator:{type:"boolean",operation:"true",singleValue:!0},leftValue:"={{ $json.query.extra_cheese }}",rightValue:"your-api-key-for-example"}]},looseTypeValidation:!0},typeVersion:2.2},{id:"57a48d64-954c-4871-a5ff-5390c69a003a",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note12",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[656,2336],parameters:{color:4,width:540,height:1200,content:"## Was this helpful? Let me know!\n[![clic](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/clic_down_lucas.gif)](https://api.ia2s.app/form/templates/academy)\n\nI really hope this tutorial helped you understand APIs better. Your feedback is incredibly valuable and helps me create better resources for the n8n community.\n\n### **Have Feedback, a Question, or a Project Idea?**\n\nI've streamlined the way we connect. It all starts with one simple form that takes less than 10 seconds. After that, you'll chat with my AI assistant who will gather the key details and pass them directly on to me.\n\n####  **[Click here to start the conversation](https://api.ia2s.app/form/templates/academy)**\n\nUse this single link for anything you need:\n\n*   **Give Feedback:** Share your thoughts on this templatewhether you found a typo, encountered an unexpected error, have a suggestion, or just want to say thanks!\n\n*   **n8n Coaching:** Get personalized, one-on-one guidance to master n8n. We can work together to get you launched with confidence or help you reach an expert level.\n\n*   **n8n Consulting:** Have a complex business challenge or need a custom workflow built from scratch? Let's partner on a powerful automation solution tailored to your specific needs.\n\n---\n\nHappy Automating!\nLucas Peyrin | [n8n Academy](https://n8n.ac)"},typeVersion:1},{id:"df8ea622-c2a5-4f6b-9a09-5d35b1dea0aa",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note6",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[512,-96],parameters:{color:3,width:700,height:764,content:'##  **CONFIGURATION REQUIRED** \n\nTo use this interactive tutorial, you need to tell the "Customer" nodes where to find the "Kitchen" nodes.\n\n### **1. Get your Webhook URL**\n\n*   **Activate** this workflow using the toggle switch at the top right of the screen.\n*   Open any Webhook node in this workflow (e.g., `1. The Kitchen (GET /menu)`).\n*   Go to the **Production URL** field and click the copy button.\n\n### **2. Update the CONFIGURATION Node**\n\n*   Open the `CONFIGURATION` node (the one this note is pointing to).\n*   In the **Value** field, **paste the full URL** you just copied.\n\n\nThat\'s it! Now you can run the workflow, and all the HTTP Request nodes will know how to call your webhooks.'},typeVersion:1},{id:"c0c76d70-c630-4630-a22e-1909a410c527",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Base URL",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[912,464],parameters:{options:{},assignments:{assignments:[{id:"7edededc-2f40-4b8e-b8db-ab4816f1a28e",name:"base_url",type:"string",value:"={{ $json.your_n8n_webhook_url.match(/^(https?:\\/\\/[^\\/]+)\\/(webhook-test|webhook|v1|[^\\/]+)/)[1] + '/' + $json.your_n8n_webhook_url.match(/^(https?:\\/\\/[^\\/]+)\\/(webhook-test|webhook|v1|[^\\/]+)/)[2].replace('webhook-test','webhook') }}"}]}},typeVersion:3.4},{id:"e5f25f10-a1f0-4d67-b0fb-c3a2b8abf786",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note8",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1264,2288],parameters:{color:3,width:304,height:496,content:'###  **Security Best Practice**\n\nFor this tutorial, we are putting the API key directly in the header. \n\n**In a real project, NEVER do this!**\n\nAlways use n8n\'s built-in **Credentials** system to store and manage secret keys. You would create a "Header Auth" credential and select it in the HTTP Request node\'s "Authentication" parameter. This keeps your secrets safe and out of your workflow JSON.'},typeVersion:1},{id:"e908261b-cced-4539-9ea0-f40fb9e009e5",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Respond with Secret",type:"n8n-nodes-base.respondToWebhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2064,2496],parameters:{options:{},respondWith:"json",responseBody:'{\n  "dish": "The Chef\'s Special Truffle Pasta"\n}'},typeVersion:1.4},{id:"52d54052-eab2-45b8-ac9a-389b7fdf40d3",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Respond: Unauthorized (401)",type:"n8n-nodes-base.respondToWebhook",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2064,2704],parameters:{options:{responseCode:401},respondWith:"text",responseBody:"You are not authorized to see the secret dish."},typeVersion:1.4},{id:"f9d72d6c-47b8-4f51-8a69-ce4d557ae90f",cid:"Ikx1Y2FzIFBleXJpbiI",name:"OpenAPI Spec",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2336,704],parameters:{color:6,width:696,height:2096,content:'# What other services give you\n\nReal-world APIs have documentation that tells developers how to use them. This is what the documentation for our little tutorial API would look like. To put you in context, you would see this documentation and create http request nodes accordingly.\n\n**Remember**, AI can help you !\n\n\n# API Documentation Example\n\nA simple API to demonstrate http requests in n8n.\n\n## API Endpoints\n\n### GET /tutorial/api/menu\n\n**Summary:** Get the menu\n\n**Responses:**\n*   `200 OK`: The restaurant menu.\n\n---\n\n### GET /tutorial/api/order\n\n**Summary:** Get a customized order\n\n**Parameters:**\n*   `extra_cheese` (query, string, example: `true`): Whether to add extra cheese.\n\n\n**Responses:**\n*   `200 OK`: Your customized pizza order.\n\n---\n\n### POST /tutorial/api/review\n\n**Summary:** Submit a review\n\n**Request Body (application/json):**\n```json\n{\n  "comment": "string",\n  "rating": 0\n}\n```\n*   `comment` (string): The review comment.\n*   `rating` (integer): The rating given (e.g., 1-5).\n\n\n**Responses:**\n*   `200 OK`: Confirmation of review receipt.\n\n---\n\n### GET /tutorial/api/secret-dish\n\n**Summary:** Get the secret dish (Auth Required)\n\n**Authentication:** Requires API Key. See [Authentication](https://docs.n8n.io/integrations/builtin/credentials/httprequest/) section for details.\n\n**Responses:**\n*   `200 OK`: The secret dish.\n*   `401 Unauthorized`: Authentication is required or invalid.\n\n---\n\n### GET /tutorial/api/slow-service\n\n**Summary:** A slow endpoint to test timeouts\n\n**Responses:**\n*   `200 OK`: A delayed response.\n\n---\n\n## Authentication\n\nThis API uses an API Key for authentication on certain endpoints.\n\n### API Key Authentication (`ApiKeyAuth`)\n\n*   **Type:** API Key\n*   **Location:** Header\n*   **Header Name:** `x-api-key`\n\n\nTo authenticate, include your API key in the `x-api-key` header of your request.\n\n**Example:**\n```\nGET /tutorial/api/secret-dish\nHost: your-api-domain.com\nx-api-key: YOUR_API_KEY_HERE\n```'},typeVersion:1},{id:"fba94b52-0c18-4f3c-a702-aa883a3df293",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note7",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2320,3040],parameters:{color:7,width:384,height:496,content:"![Kitch on fire](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExaGk3ZHhsa2gwYWUweDFsa2dlb2Z6NWx5NGF1NnRoczE1a29kYjZjcyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/M6bJf9VBmrN1qTtPyL/giphy.webp)"},typeVersion:1},{id:"d6b845a9-9d27-49ec-a9fe-ac48650bd260",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note9",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1760,1040],parameters:{color:7,width:256,height:272,content:"![Kitch on fire](https://media2.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3MXIyOXBhZHhueGxnZjZhbnQ3MmRtbzg5aW9mZ3VrMGN2bGQ0Y3VidyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/l4FGpeeBs3XLWxqrm/giphy.webp)"},typeVersion:1},{id:"c6d51163-f9ea-4d6b-af33-32107d3feb6e",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note10",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2128,448],parameters:{color:7,width:176,height:224,content:"![Kitch on fire](https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExMGgyNmxobWE5ZjhydXdwM2o1bWkwMjZna3A1OTdiOHNpeGE5cW5wNSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/2ka4S8LMiGxA371PD3/giphy.webp)"},typeVersion:1},{id:"b5a01aca-47be-42d8-8366-4f91bcf24682",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note11",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[2032,1728],parameters:{color:7,width:256,content:"![Kitch on fire](https://media4.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3YWo1ODNsNm9pZHh6dDBhNnp6bWRvaTRuc3hxbWlhd3NoMW40eHN4dyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/V1gX8pwYRRDoxFh6lJ/200.webp)"},typeVersion:1},{id:"adacc21c-801a-49bb-a6da-630fc8b4272c",cid:"Ikx1Y2FzIFBleXJpbiI",name:"CONFIGURATION",type:"n8n-nodes-base.set",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[688,464],parameters:{options:{},assignments:{assignments:[{id:"7edededc-2f40-4b8e-b8db-ab4816f1a28e",name:"your_n8n_webhook_url",type:"string",value:"PASTE_YOUR_WEBHOOK_URL_HERE"}]}},typeVersion:3.4},{id:"9eb6ee32-0d75-4817-a3d0-3106d88b14e6",cid:"Ikx1Y2FzIFBleXJpbiI",name:"Sticky Note14",type:"n8n-nodes-base.stickyNote",notes:" 2025 Lucas Peyrin",creator:"Lucas Peyrin",position:[1600,2272],parameters:{color:7,width:400,height:256,content:"![Key](https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExb2VlZDBvZGQxMGtnbW9pMDBrZTFobXZ2ZnRvdmo5OHViNzdib2Z4dSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/HqVH7T3o1ggAguE4Oh/giphy.gif)"},typeVersion:1}],pinData:{"1. The Kitchen (GET /menu)":[{body:{},query:{},params:{},headers:{host:"your-n8n-instance.com",accept:"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","user-agent":"n8n","accept-encoding":"gzip, deflate, br","x-forwarded-for":"192.168.1.1","x-forwarded-host":"your-n8n-instance.com","x-forwarded-proto":"https"},webhookUrl:"https://your-n8n-instance.com/webhook/tutorial/api/menu"}],"2. The Kitchen (GET /order)":[{body:{},query:{extra_cheese:"true"},params:{},headers:{host:"your-n8n-instance.com",accept:"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","user-agent":"n8n","accept-encoding":"gzip, deflate, br","x-forwarded-for":"192.168.1.1","x-forwarded-host":"your-n8n-instance.com","x-forwarded-proto":"https"},webhookUrl:"https://your-n8n-instance.com/webhook/tutorial/api/order?extra_cheese=true"}],"3. The Kitchen (POST /review)":[{body:{rating:5,comment:"The pizza was amazing!"},query:{},params:{},headers:{host:"your-n8n-instance.com",accept:"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","user-agent":"n8n","content-type":"application/json","content-length":"49","accept-encoding":"gzip, deflate, br","x-forwarded-for":"192.168.1.1","x-forwarded-host":"your-n8n-instance.com","x-forwarded-proto":"https"},webhookUrl:"https://your-n8n-instance.com/webhook/tutorial/api/review"}],"4. The Kitchen (GET /secret-dish)":[{body:{},query:{},params:{},headers:{host:"your-n8n-instance.com",accept:"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","x-api-key":"super-secret-key","user-agent":"n8n","accept-encoding":"gzip, deflate, br","x-forwarded-for":"192.168.1.1","x-forwarded-host":"your-n8n-instance.com","x-forwarded-proto":"https"},webhookUrl:"https://your-n8n-instance.com/webhook/tutorial/api/secret-dish"}],"5. The Kitchen (GET /slow-service)":[{body:{},query:{},params:{},headers:{host:"your-n8n-instance.com",accept:"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","user-agent":"n8n","accept-encoding":"gzip, deflate, br","x-forwarded-for":"192.168.1.1","x-forwarded-host":"your-n8n-instance.com","x-forwarded-proto":"https"},webhookUrl:"https://your-n8n-instance.com/webhook/tutorial/api/slow-service"}]},connections:{"Base URL":{main:[[{node:"1. The Customer (GET Menu Item)",type:"main",index:0},{node:"2. The Customer (GET with Query Params)",type:"main",index:0},{node:"3. The Customer (POST with Body)",type:"main",index:0},{node:"4. The Customer (GET with Headers/Auth)",type:"main",index:0},{node:"5. The Customer (Request with Timeout)",type:"main",index:0}]]},"IF Authorized":{main:[[{node:"Respond with Secret",type:"main",index:0}],[{node:"Respond: Unauthorized (401)",type:"main",index:0}]]},"Start Tutorial":{main:[[{node:"CONFIGURATION",type:"main",index:0}]]},"Wait 3 seconds":{main:[[{node:"Prepare Slow Response",type:"main",index:0}]]},"IF extra cheese":{main:[[{node:"Prepare Cheese Pizza",type:"main",index:0}],[{node:"Prepare Plain Pizza",type:"main",index:0}]]},"CONFIGURATION":{main:[[{node:"Base URL",type:"main",index:0}]]},"1. The Kitchen (GET /menu)":{main:[[{node:"Prepare Menu Data",type:"main",index:0}]]},"2. The Kitchen (GET /order)":{main:[[{node:"IF extra cheese",type:"main",index:0}]]},"3. The Kitchen (POST /review)":{main:[[{node:"Process Review Data",type:"main",index:0}]]},"4. The Kitchen (GET /secret-dish)":{main:[[{node:"IF Authorized",type:"main",index:0}]]},"5. The Kitchen (GET /slow-service)":{main:[[{node:"Wait 3 seconds",type:"main",index:0}]]}}},Ff=e=>{if(!function(e){if(!e||"object"!=typeof e)return!1;const t=e;return!(!t.meta||"object"!=typeof t.meta)&&"string"==typeof t.meta.templateId}(e))throw new It("Invalid workflow template JSON structure");return e},$f=()=>Ff(Pf),e("G",Rf=()=>Ff(Cf)),e("W",jf={RagStarterTemplate:Rf().meta.templateId,EasyAiTemplate:$f().meta.templateId}),Vf={BuildYourFirstAiAgent:Ff(Of).meta.templateId,JsonBasics:Ff(Mf).meta.templateId,Expressions:Ff(Df).meta.templateId,WorkflowLogic:Ff(Lf).meta.templateId,ApiFundamentals:Ff(Bf).meta.templateId},e("J",(e=>Object.values(Vf).includes(e))),e("q",Wf=()=>[{name:"Build your first AI agent",description:"This template launches your very first AI Agent an AI-powered chatbot that can do more than just talk it can take action using tools.",template:Ff(Of),nodes:[]},{name:"JSON basics",description:"Designed to teach you the absolute basics of JSON (JavaScript Object Notation) and, more importantly, how to use it within n8n.",template:Ff(Mf),nodes:[]},{name:"Expressions",description:"Step-by-step tutorial designed to teach you the most important skill in n8n: using expressions to access and manipulate data.",template:Ff(Df),nodes:[]},{name:"Workflow logic",description:"This template is a hands-on tutorial that teaches you the three most fundamental nodes for controlling the flow of your automations: Merge, IF, and Switch.",template:Ff(Lf),nodes:[]},{name:"API fundamentals",description:"Hands-on tutorial designed to demystify what an API is and how it works, right inside your n8n canvas.",template:Ff(Bf),nodes:[]}]),e("K",(e=>[$f(),Rf(),...Wf().map((e=>e.template))].find((t=>t.meta.templateId===e)))),zf=n(_f(),1),Uf="-preview",Gf=e=>!!e.length&&(e.length>1||"sendAndWait"===e[0].key),Hf=e=>{let t=e;return e.includes(".")&&(t=e.split(".").join(" ")),function(e,t){const[n,o,a]=Bx(e,t);return n+o.map(Lx(t?.locale)).join(t?.delimiter??" ")+a}(t)},e("R",Yf=e=>e.replace(Uf,"")),e("P",qf=(e="")=>e.includes(Uf)),e("E",((e,t,n)=>!t||n?[]:Wx(Rx(t||"",e.map((e=>Fx(e))))))),e("B",((e,t)=>("AI Other"!==t.rootView||"Tools"!==t.title)&&e&&!t.communityNodeDetails)),Xf=(e,t)=>`/workflows/${e}/test-runs${t?`/${t}`:""}`,Jf=async(e,t)=>await Va(e,"GET",Xf(t)),Kf=async(e,t)=>await Va(e,"GET",Xf(t.workflowId,t.runId)),Zf=async(e,t)=>await Ha({method:"POST",baseURL:e.baseUrl,endpoint:`/workflows/${t}/test-runs/new`,headers:{"push-ref":e.pushRef}}),Qf=async(e,t,n)=>await Ha({method:"POST",baseURL:e.baseUrl,endpoint:`/workflows/${t}/test-runs/${n}/cancel`,headers:{"push-ref":e.pushRef}}),em=async(e,t)=>await Va(e,"DELETE",Xf(t.workflowId,t.runId)),tm=(e,t)=>`/workflows/${e}/test-runs/${t}/test-cases`,nm=async(e,t,n)=>await Va(e,"GET",tm(t,n)),e("T",om=Ua(Ji.EVALUATION,(()=>{const e=v(!1),t=v({}),n=v({}),o=v({}),a=qa(),i=vm(),s=um(),l=rr(),u=r((()=>0!==l.settings.evaluation?.quota)),c=r((()=>e.value)),d=r((()=>Object.values(t.value).reduce(((e,t)=>(e[t.workflowId]||(e[t.workflowId]=[]),e[t.workflowId].push(t),e)),{}))),p=r((()=>i.workflow.nodes.some((e=>e.type===ba))));function f(e){return i.workflow.nodes.some((t=>{if("n8n-nodes-base.evaluation"!==t.type)return!1;const n=s.getNodeType(t.type,t.typeVersion);return!!n&&po(n.properties,t.parameters,!0,!1,t,n)?.operation===e}))}const m=r((()=>f("setMetrics"))),h=r((()=>f("setOutputs"))),y=async e=>{const n=await Kf(a.restApiContext,e);return t.value[n.id]=n,n},g=(e,t)=>{const n=async()=>{try{const a=await y({workflowId:e,runId:t});["running","new"].includes(a.status)?o.value[t]=setTimeout(n,1e3):delete o.value[t]}catch(a){o.value[t]=setTimeout(n,1e3)}};n()};return{testRunsById:t,testCaseExecutionsById:n,isLoading:c,isEvaluationEnabled:u,testRunsByWorkflowId:d,evaluationTriggerExists:p,evaluationSetMetricsNodeExist:m,evaluationSetOutputsNodeExist:h,fetchTestCaseExecutions:async e=>{const t=await nm(a.restApiContext,e.workflowId,e.runId);return t.forEach((e=>{n.value[e.id]=e})),t},fetchTestRuns:async n=>{e.value=!0;try{const o=await Jf(a.restApiContext,n);return o.forEach((e=>{t.value[e.id]=e,["running","new"].includes(e.status)&&g(n,e.id)})),o}finally{e.value=!1}},getTestRun:y,startTestRun:async e=>await Zf(a.restApiContext,e),cancelTestRun:async(e,t)=>await Qf(a.restApiContext,e,t),deleteTestRun:async e=>{const n=await em(a.restApiContext,e);if(n.success){const{[e.runId]:n,...o}=t.value;t.value=o}return n},cleanupPolling:()=>{Object.values(o.value).forEach((e=>{clearTimeout(e)})),o.value={}}}}),{})),am=n(Ge(),1),im=n(mf(),1),rm="placeholder_recommended",sm=(0,am.default)(zx,((...e)=>JSON.stringify(e))),lm={"n8n-nodes-base.hubspotTrigger":(e,t)=>e?.options?.[0]?.values[0]?.options?.map((n=>({...Ux(t),actionKey:n.value,displayName:sm("nodeCreator.actionsCategory.onEvent",{interpolate:{event:(0,im.default)(n.name)}}),description:n.description??"",displayOptions:e.displayOptions,values:{eventsUi:{eventValues:[{name:n.value}]}}}))),"n8n-nodes-base.code":(e,t)=>{if("language"!==e.name)return;const n=e.options;return n?n.map((n=>({...Ux(t),actionKey:`language_${n.value}`,displayName:`Code in ${n.name}`,description:`Run custom ${n.name} code`,displayOptions:e.displayOptions,values:{language:n.value}}))):void 0}},e("C",um=Ua(Ji.NODE_TYPES,(()=>{const e=v({}),t=v(new Map),n=qa(),o=Xx(),a=rr(),i=r((()=>e=>t.value.get(Yf(e)))),s=r((()=>Array.from(t.value.values()).filter((({isOfficialNode:e,isInstalled:t})=>e&&!t)).map((({nodeDescription:e})=>e)))),l=r((()=>Array.from(t.value.values()).filter((({isOfficialNode:e,isInstalled:t})=>!e&&!t)).map((({nodeDescription:e})=>e)))),u=r((()=>o.generateMergedNodesAndActions(l.value,[]))),c=r((()=>Object.values(e.value).flatMap((e=>Object.keys(e).map((t=>e[Number(t)])))))),d=r((()=>Object.values(e.value).map((e=>{const t=Object.keys(e).map(Number);return e[Math.max(...t)]})).filter(Boolean))),p=r((()=>ln.flatMap((t=>{const n=e.value[t.nodeType]??{},o=Object.keys(n).map(Number),i=n[Math.max(...o)];return i?.hidden&&a.isModuleActive(t.module)?{...i,hidden:void 0}:[]})))),f=r((()=>(t,n)=>{if(lx(t))return h.value(t,n);const o=e.value[t];if(!o)return null;const a=Object.keys(o).map(Number);return o[n??Math.max(...a)]??null})),m=r((()=>t=>Object.keys(e.value[t]??{}).map(Number))),h=r((()=>(e,t)=>{const n=ux(e);return dx(f.value(to,t??4.1),Xp().getCredentialTypeByName(n))??null})),y=r((()=>(e,t,n)=>{if(!e.nodes[t.name])return!1;const o=f.value(n)??i.value(n)?.nodeDescription;if(!o)return!1;const a=lo(e,t,o),r=Co(a);return!!r&&r.filter((e=>e!==ta.Main)).length>0})),g=r((()=>e=>{const t=f.value(e);return!(!t||!t.group.includes("trigger"))})),w=r((()=>e=>{const t=f.value(e);return t?.outputs&&Array.isArray(t.outputs)?t.outputs.map((e=>"string"==typeof e?e:e.type)).includes(ta.AiTool):t?.outputs.includes(ta.AiTool)??!1})),b=r((()=>e=>e.codex?.categories?.includes("Core Nodes"))),k=r((()=>d.value.concat(s.value).concat(p.value).filter((e=>!e.hidden)))),x=r((()=>c.value.reduce(((e,t)=>(/\d$/.test(t.defaults.name)&&e.push(t.defaults.name),e)),[]))),I=r((()=>k.value.reduce(((e,t)=>{const n=t.outputs;return Array.isArray(n)?n.forEach((n=>{const o="string"==typeof n?n:n.type;e[o]||(e[o]=[]),e[o].push(t.name)})):[ta.AiVectorStore,ta.AiChain,ta.AiDocument,ta.AiEmbedding,ta.AiLanguageModel,ta.AiMemory,ta.AiOutputParser,ta.AiTextSplitter,ta.AiTool].forEach((o=>{n.includes(o)&&(e[o]=e[o]||[],e[o].push(t.name))})),e}),{}))),S=r((()=>k.value.reduce(((e,t)=>{const n=t.inputs;return Array.isArray(n)&&n.forEach((n=>{const o="string"==typeof n?n:n.type;e[o]||(e[o]=[]),e[o].push(t.name)})),e}),{}))),E=r((()=>(e,t,n,o)=>{const a=f.value(n,o);if(null===a)return!1;const i=sa(e,t,a),r=Co(i);return!!r&&r.filter((e=>e!==ta.Main)).length>0})),T=(t=[])=>{const n=Px(t);e.value={...e.value,...n}},N=async(e,t=!0)=>{const o=await async function(e,t){return await Va(e,"POST","/node-types",{nodeInfos:t})}(n.restApiContext,e);return o.forEach((e=>{e.translation&&be({[e.name.replace("n8n-nodes-base.","")]:e.translation},n.defaultLocale)})),t&&T(o),o},A=async()=>{const e=await Rm(n.baseUrl);e.length&&T(e)};return{nodeTypes:e,allNodeTypes:c,allLatestNodeTypes:d,getNodeType:f,getNodeVersions:m,getCredentialOnlyNodeType:h,isConfigNode:y,isTriggerNode:g,isToolNode:w,isCoreNodeType:b,visibleNodeTypes:k,nativelyNumberSuffixedDefaults:x,visibleNodeTypesByOutputConnectionTypeNames:I,visibleNodeTypesByInputConnectionTypeNames:S,isConfigurableNode:E,communityNodesAndActions:u,communityNodeType:i,fetchCommunityNodePreviews:async()=>{if(a.isCommunityNodesFeatureEnabled)try{const e=await async function(e){return await Va(e,"GET","/community-node-types")}(n.restApiContext);t.value=new Map(e.map((e=>[e.name,e])))}catch(e){t.value=new Map}},getResourceMapperFields:async e=>{try{return await async function(e,t){return await Va(e,"POST","/dynamic-node-parameters/resource-mapper-fields",t)}(n.restApiContext,e)}catch(t){return null}},getLocalResourceMapperFields:async e=>{try{return await async function(e,t){return await Va(e,"POST","/dynamic-node-parameters/local-resource-mapper-fields",t)}(n.restApiContext,e)}catch(t){return null}},getNodeParameterActionResult:async e=>await async function(e,t){return await Va(e,"POST","/dynamic-node-parameters/action-result",t)}(n.restApiContext,e),getResourceLocatorResults:async e=>await async function(e,t){return await Va(e,"POST","/dynamic-node-parameters/resource-locator-results",t)}(n.restApiContext,e),getNodeParameterOptions:async e=>await async function(e,t){return await Va(e,"POST","/dynamic-node-parameters/options",t)}(n.restApiContext,e),getNodesInformation:N,getFullNodesProperties:async(e,t=!0)=>{await Xp().fetchCredentialTypes(!0),t&&await N(e)},getNodeTypes:A,loadNodeTypesIfNotLoaded:async()=>{0===Object.keys(e.value).length&&await A()},getNodeTranslationHeaders:async()=>{const e=await async function(e){return await Va(e,"GET","/node-translation-headers")}(n.restApiContext);e&&xe(e,n.defaultLocale)},setNodeTypes:T,removeNodeTypes:t=>{e.value=t.reduce(((e,t)=>Wr(t.name,e)),e.value)},getCommunityNodeAttributes:async e=>{if(!a.isCommunityNodesFeatureEnabled)return null;try{return await async function(e,t){return await Va(e,"GET",`/community-node-types/${encodeURIComponent(t)}`)}(n.restApiContext,Yf(e))}catch(t){return null}},getIsNodeInstalled:r((()=>e=>{const t=Yf(e);return!!f.value(t)||!!i.value(t)?.isInstalled}))}}))),e("h",(e=>{const t={};switch("all"!==e.workflowId&&(t.workflowId=e.workflowId),zr(e.tags)||(t.tags=e.tags),zr(e.annotationTags)||(t.annotationTags=e.annotationTags),"all"!==e.vote&&(t.vote=e.vote),zr(e.metadata)||(t.metadata=e.metadata),e.startDate&&(t.startedAfter=e.startDate),e.endDate&&(t.startedBefore=e.endDate),e.status){case"waiting":t.status=["waiting"];break;case"error":t.status=["crashed","error"];break;case"success":t.status=["success"];break;case"running":t.status=["running","new"];break;case"canceled":t.status=["canceled"];break;case"new":t.status=["new"]}return t})),cm=!1,dm=e=>{if(!cm){const t=700,n=`width=${t},height=${window.innerHeight-50},left=${(window.innerWidth-t)/2},top=50,resizable=yes,scrollbars=yes`,o=`form-waiting-since-${Date.now()}`;window.open(e,o,n),cm=!0}},e("p",pm=()=>cm=!1),e("S",((e,t)=>{if(!e)return"";try{const n=um().getNodeType(e.type)?.waitingNodeTooltip;if(n){const o=vm().activeExecutionId,a={$execution:{id:o,mode:"test",resumeUrl:`${qa().webhookWaitingUrl}/${o}`,resumeFormUrl:`${qa().formWaitingUrl}/${o}`}};if(t){const o=t.expression.getSimpleParameterValue(e,n,"internal",a);return String(o)}if(n)return n}}catch(n){}return""})),fm=e=>({type:"json",data:e,parsed:!1}),mm={[ta.AiLanguageModel](e){const t=e.response??e;if(!t)throw new Error("No response from Language Model");return Array.isArray(t?.messages)&&1===t?.messages.length&&"string"==typeof t?.messages[0]?{type:"text",data:t.messages[0],parsed:!0}:t.messages&&Array.isArray(t.messages)?mm[ta.AiMemory](e):t.generations?{type:"json",data:t.generations.map((e=>e?.text?e.text:Array.isArray(e)?e.map((e=>e.text??e)).join("\n\n").trim():e)),parsed:!0}:{type:"json",data:t,parsed:!0}},[ta.AiTool]:fm,[ta.AiAgent]:fm,[ta.AiMemory](e){const t=e.chatHistory??e.messages??e?.response?.chat_history;if(Array.isArray(t)){const n=t.map((e=>{if("constructor"===e.type&&e.id?.includes("messages")&&e.kwargs){let t=String(e.kwargs.content);return Array.isArray(t)&&(t=t.map((e=>{const{type:t,image_url:n}=e;return"image_url"===t&&"object"==typeof n&&"string"==typeof n.url?`![Input image](${n.url})`:"string"==typeof n?`![Input image](${n})`:e.text})).join("\n")),Object.keys(e.kwargs.additional_kwargs).length&&(t+=` (${JSON.stringify(e.kwargs.additional_kwargs)})`),e.id.includes("HumanMessage")?t=`**Human:** ${String(t).trim()}`:e.id.includes("AIMessage")?t=`**AI:** ${t}`:e.id.includes("SystemMessage")&&(t=`**System Message:** ${t}`),t}return""})).join("\n\n");return 0===n.length?fm(e):{type:"markdown",data:n,parsed:!0}}return fm(e)},[ta.AiOutputParser]:fm,[ta.AiRetriever]:fm,[ta.AiReranker]:fm,[ta.AiVectorStore]:e=>e.documents?{type:"json",data:e.documents,parsed:!0}:fm(e),[ta.AiEmbedding]:e=>e.documents?{type:"json",data:e.documents,parsed:!0}:fm(e),[ta.AiDocument]:e=>e.documents?{type:"json",data:e.documents,parsed:!0}:fm(e),[ta.AiTextSplitter]:e=>({type:"text",data:(Array.isArray(e.response)?e.response:[e.textSplitter]).join("\n\n"),parsed:!0})},e("l",{completionTokens:0,promptTokens:0,totalTokens:0,isEstimate:!1}),hm={name:"",description:"",active:!1,activeVersionId:null,isArchived:!1,createdAt:-1,updatedAt:-1,connections:{},nodes:[],settings:{executionOrder:"v1",binaryMode:ho},tags:[],pinData:{},versionId:"",usedCredentials:[]},ym=()=>({id:"",...hm}),e("s",vm=Ua(Ji.WORKFLOWS,(()=>{const e=xm(),n=rx(),o=Sx(),a=rr(),i=qa(),s=sx(),l=_m(),u=um(),c=dl(),d=Vs(),p=v(ym()),f=v(ge(p.value.nodes,p.value.connections)),m=v(null),h=v({}),y=v([]),g=v(null),w=v(null),b=v(),k=v(),x=v({}),I=v(!1),S=v({}),E=v(!1),T=v([]),N=v(null),A=v(),_=r((()=>p.value.name)),P=r((()=>p.value.id)),C=r((()=>p.value.versionId)),O=v(""),M=r((()=>p.value.settings??{...hm.settings})),D=r((()=>!p.value.id||!d.getWorkflowById(p.value.id)?.id)),L=r((()=>Object.keys(d.workflowsById).reduce(((e,t)=>(e[t]=!0,e)),{}))),B=r((()=>null!==p.value.activeVersionId)),$=r((()=>p.value.nodes.filter((e=>{const t=u.getNodeType(e.type,e.typeVersion);return t&&t.group.includes("trigger")})))),R=r((()=>!!p.value.nodes.find((e=>!!e.webhookId)))),j=r((()=>g.value?.data?.resultData?g.value.data.resultData.runData:null)),V=r((()=>p.value.connections)),W=r((()=>p.value.nodes)),z=e=>("n8n-nodes-base.wait"===e.type||"n8n-nodes-base.form"===e.type||"sendAndWait"===e.parameters?.operation)&&!0!==e.disabled,U=r((()=>{const e=hp().activeNode;if(e){if(z(e))return!0;const t=f.value.getParentNodes(e.name);for(const e of t)if(z(f.value.nodes[e]))return!0;return!1}return W.value.some((e=>z(e)))})),G=r((()=>null===le.value||!(!(le.value&&g.value&&["waiting","running"].includes(g.value.status))||g.value.finished))),H=r((()=>new Set(W.value.map((e=>e.name))))),Y=r((()=>p.value.nodes.reduce(((e,t)=>(e[t.name]=t,e)),{}))),q=r((()=>p.value.nodes.filter((e=>{const t=Object.keys(e.issues??{}).length>0,n=Object.keys(pe(e.name)).length>0||Object.keys(fe(e.name)).length>0;return!e.disabled&&n&&t})))),X=r((()=>q.value.length)),J=r((()=>X.value>0)),K=r((()=>{const e=[];return p.value.nodes.forEach((t=>{t.issues&&!t.disabled&&(Object.keys(pe(t.name)).length>0||Object.keys(fe(t.name)).length>0)&&Object.entries(t.issues).forEach((([n,o])=>{var a;o&&("object"!=typeof o||Array.isArray(o)?e.push({node:t.name,type:n,value:(a=o,"string"==typeof a||Array.isArray(a)?o:String(o))}):Object.entries(o).forEach((([o,a])=>{a&&e.push({node:t.name,type:n,value:a})})))}))})),e})),Z=r((()=>p.value.pinData)),Q=r((()=>g.value?.executedNode)),ee=r((()=>y.value.filter((e=>!0===e.finished||void 0!==e.stoppedAt)))),te=r((()=>g.value)),ne=r((()=>T.value)),oe=r((()=>p.value.connections)),ae=r((()=>Jo(p.value.connections))),ie=r((()=>$.value.filter((e=>!e.disabled&&!Qx(e))))),re=r((()=>{if(G.value)return g.value?.triggerNode?g.value.triggerNode:Object.keys(g.value?.data?.resultData.runData??{}).find((e=>$.value.some((t=>t.name===e))))})),se=r((()=>!a.isChatFeatureEnabled||!gl(["global:chatUser"]))),le=v(),ue=v(),ce=r((()=>le.value)),de=r((()=>ue.value));function pe(e){return p.value.connections.hasOwnProperty(e)?p.value.connections[e]:{}}function fe(e){return ae.value.hasOwnProperty(e)?ae.value[e]:{}}function me(e){return wo(Y.value,e)}function he(e){return p.value.nodes.find((t=>t.id===e))}function ye(){return{nodeTypes:{},init:async()=>{},getByNameAndVersion:(e,t)=>{const n=u.getNodeType(e,t)??u.communityNodeType(e)?.nodeDescription??null;if(null!==n)return{description:n,trigger:!["n8n-nodes-base.errorTrigger"].includes(e)&&0===n.inputs.length&&!n.webhooks||void 0}}}}function ve(){return p.value.nodes.map((e=>({...e})))}function ge(e,t,n){const o=ye();let a=p.value.id;return a&&!d.getWorkflowById(a)?.id&&(a=void 0),new mn({id:a,name:p.value.name,nodes:n?qt(e):e,connections:n?qt(t):t,active:!1,nodeTypes:o,settings:p.value.settings??{...hm.settings},pinData:p.value.pinData})}function be(e,t){m.value=qt(e),p.value.versionId=e.versionId,t&&(O.value=t)}function ke(e){d.setWorkflowInactiveInCache(e),e===p.value.id&&(p.value.active=!1,p.value.activeVersionId=null,p.value.activeVersion=null)}function xe(e){p.value.isArchived=e}function Ie(e){p.value.description=e}function Se(e){p.value.settings=e,f.value.setSettings(e)}function Ee(t,{preserveInputConnections:n=!1,preserveOutputConnections:o=!1}={}){if(e.markStateDirty(),o||delete p.value.connections[t.name],n)return;const a=[];let i,r,s,l,u;for(i of Object.keys(p.value.connections))for(r of Object.keys(p.value.connections[i]))for(s of Object.keys(p.value.connections[i][r])){a.length=0;const e=p.value.connections[i][r][Number.parseInt(s,10)];if(e){for(l of Object.keys(e))u=e[Number.parseInt(l,10)],u.node===t.name&&a.push(l);a.forEach((t=>{e.splice(Number.parseInt(t,10),1)}))}}f.value.setConnections(p.value.connections)}function Te(t){const{[t.name]:n,...o}=S.value;if(S.value=o,p.value.pinData?.hasOwnProperty(t.name)){const{[t.name]:e,...n}=p.value.pinData;p.value.pinData=n}for(let a=0;a<p.value.nodes.length;a++)if(p.value.nodes[a].name===t.name)return p.value.nodes=[...p.value.nodes.slice(0,a),...p.value.nodes.slice(a+1)],f.value.setNodes(p.value.nodes),void e.markStateDirty()}function Ne(e){if(!g.value?.data)return;const{[e]:t,...n}=g.value.data.resultData.runData;g.value.data.resultData.runData=n}async function Ae(e,t,n=!1){null===t.settings&&(t.settings=void 0);const a=await Va(i.restApiContext,"PATCH",`/workflows/${e}${n?"?forceSave=true":""}`,t);if(!a.checksum)throw new Error("Failed to update workflow");return e===p.value.id&&be({versionId:a.versionId,name:m.value?.name??null,description:m.value?.description??null},a.checksum),o.containsNodeFromPackage(a,"@n8n/n8n-nodes-langchain")&&!l.isEasyAIWorkflowOnboardingDone&&(await Vm(i.restApiContext,{easyAIWorkflowOnboarded:!0}),l.setEasyAIWorkflowOnboardingDone()),a}return F([ie,re],(([e,t],[n])=>{if(void 0!==t)return void(A.value=t);if(void 0===A.value||e.every((e=>e.name!==A.value)))return void(A.value=function(e,t){const n={[mo]:10,[Tt]:9,[ko]:7,[Pt]:6,[Ct]:5,[ao]:4};function o(e){return t(e.type,e.typeVersion)?.codex?.categories?.includes("Core Nodes")??!1}return e.toSorted(((e,t)=>{const a=n[e.type]??(o(e)?0:8);return(n[t.type]??(o(t)?0:8))-a})).find((e=>!e.disabled))}(ie.value,u.getNodeType)?.name);const o=e?.find((e=>n?.every((t=>t.name!==e.name))));void 0!==o&&(A.value=o.name)}),{immediate:!0}),{workflow:p,versionData:m,usedCredentials:h,currentWorkflowExecutions:y,workflowExecutionData:g,workflowExecutionPairedItemMappings:x,workflowExecutionResultDataLastUpdate:k,workflowExecutionStartedData:b,activeExecutionId:ce,previousExecutionId:de,executionWaitingForWebhook:I,nodeMetadata:S,isInDebugMode:E,chatMessages:T,chatPartialExecutionDestinationNode:N,workflowName:_,workflowId:P,workflowVersionId:C,workflowChecksum:O,workflowSettings:M,isNewWorkflow:D,isWorkflowSaved:L,isWorkflowActive:B,workflowTriggerNodes:$,currentWorkflowHasWebhookNode:R,getWorkflowRunData:j,getWorkflowResultDataByNodeName:function(e){return null===j.value?null:j.value.hasOwnProperty(e)?j.value[e]:null},allConnections:V,allNodes:W,connectionsBySourceNode:oe,connectionsByDestinationNode:ae,isWaitingExecution:U,isWorkflowRunning:G,canvasNames:H,nodesByName:Y,nodesWithIssuesCount:X,nodesWithIssues:q,nodesIssuesExist:J,workflowValidationIssues:K,formatIssueMessage:function(e){return Array.isArray(e)?e.join(", ").replace(/\.$/,""):String(e)},pinnedWorkflowData:Z,executedNode:Q,getAllLoadedFinishedExecutions:ee,getWorkflowExecution:te,getPastChatMessages:ne,selectedTriggerNodeName:r((()=>A.value)),workflowExecutionTriggerNodeName:re,outgoingConnectionsByNodeName:pe,incomingConnectionsByNodeName:fe,nodeHasOutputConnection:function(e){return p.value.connections.hasOwnProperty(e)},isNodeInOutgoingNodeConnections:function e(t,n,o=-1){if(0===o)return!1;const a=pe(t);if(!a?.main?.[0])return!1;const i=a.main[0];return!!i.some((e=>e.node===n))||i.some((t=>e(t.node,n,o-1)))},getNodeByName:me,findRootWithMainConnection:function(e){const t=f.value.getChildNodes(e,"ALL");for(let n=t.length-1;n>=0;n--){const e=t[n];if(f.value.getParentNodes(e,ta.Main).length>0)return e}return null},getNodeById:he,getNodesByIds:function(e){return e.map(he).filter(Zm)},getParametersLastUpdate:function(e){return S.value[e]?.parametersLastUpdatedAt},getPinnedDataLastUpdate:function(e){return S.value[e]?.pinnedDataLastUpdatedAt},getPinnedDataLastRemovedAt:function(e){return S.value[e]?.pinnedDataLastRemovedAt},isNodePristine:function(e){return void 0===S.value[e]||S.value[e].pristine},getExecutionDataById:function(e){return y.value.find((t=>t.id===e))},getPinDataSize:function(e={}){return Object.values(e).reduce(((e,t)=>e+Jm(t)),0)},getNodeTypes:ye,getNodes:ve,convertTemplateNodeToNodeUi:function(e){const t=Object.keys(e.credentials??{}).reduce(((t,n)=>{const o=e?.credentials?.[n];return o&&"string"!=typeof o?(t[n]=o,t):t}),{});return{...e,credentials:t}},workflowObject:f,createWorkflowObject:ge,cloneWorkflowObject:function(){return ge(ve(),V.value)},getWorkflowFromUrl:async function(e,t){return await Va(i.restApiContext,"GET","/workflows/from-url",{url:e,projectId:t})},getActivationError:async function(e){return await Va(i.restApiContext,"GET",`/active-workflows/error/${e}`)},resetWorkflow:function(){p.value=ym(),O.value=""},addNodeExecutionStartedData:function(e){const t=b.value?.[0]===e.executionId?b.value?.[1]:{};b.value=[e.executionId,{...t,[e.nodeName]:[...t[e.nodeName]??[],e.data]}]},setUsedCredentials:function(e){p.value.usedCredentials=e,h.value=e.reduce(((e,t)=>(e[t.id]=t,e)),{})},setWorkflowActiveVersion:function(e){p.value.activeVersion=qt(e)},setWorkflowVersionData:be,replaceInvalidWorkflowCredentials:function(e){p.value.nodes.forEach((t=>{const n=t.credentials;if(!n?.[e.type])return;const o=n[e.type];"string"!=typeof o||o!==e.invalid.name?null!==o.id?o.id===e.invalid.id&&(t.credentials[e.type]=e.credentials):o.name===e.invalid.name&&(t.credentials[e.type]=e.credentials):t.credentials[e.type]=e.credentials}))},assignCredentialToMatchingNodes:function(e){let t=0;return p.value.nodes.forEach((n=>{if(n.name===e.currentNodeName)return;if(n.credentials&&Object.keys(n.credentials).length>0)return;const o=u.getNodeType(n.type,n.typeVersion);if(!o?.credentials)return;const a=o.credentials.find((t=>t.name===e.type));a&&(a.displayOptions&&!s.displayParameter(n.parameters,a,"",n)||(n.credentials??={},n.credentials[e.type]=e.credentials,t++))})),t},archiveWorkflow:async function(e,t){const n=await d.archiveWorkflowInList(e,t);ke(e),e===p.value.id&&(xe(!0),be({versionId:n.versionId,name:m.value?.name??null,description:m.value?.description??null},n.checksum))},unarchiveWorkflow:async function(e){const t=await d.unarchiveWorkflowInList(e);e===p.value.id&&(xe(!1),be({versionId:t.versionId,name:m.value?.name??null,description:m.value?.description??null},t.checksum))},setWorkflowActive:function(t,n,o){d.setWorkflowActiveInCache(t,n),t===p.value.id&&(o&&e.markStateClean(),p.value.active=!0,p.value.activeVersionId=n.versionId,p.value.activeVersion=n)},setWorkflowInactive:ke,setIsArchived:xe,setDescription:Ie,getDuplicateCurrentWorkflowName:async function(e){if(e&&e.length+" copy".length>=128)return e;let n=`${e}${Xn}`;try{n=(await Um(i.restApiContext,{name:n})).name}catch(t){}return n},setWorkflowExecutionRunData:function(e){g.value&&(g.value={...g.value,data:e},k.value=Date.now(),b.value=void 0)},setWorkflowPinData:function(e={}){const t=Object.keys(e).reduce(((t,n)=>(t[n]=e[n].map((e=>Xm(e)?e:{json:e})),t)),{});p.value.pinData=t,f.value.setPinData(t),Fr.emit("pin-data",t)},setParentFolder:function(e){p.value.parentFolder=e},setWorkflow:function(e){p.value={...e,...e.hasOwnProperty("active")?{}:{active:!1},...e.hasOwnProperty("connections")?{}:{connections:{}},...e.hasOwnProperty("createdAt")?{}:{createdAt:-1},...e.hasOwnProperty("updatedAt")?{}:{updatedAt:-1},...e.hasOwnProperty("id")?{}:{id:""},...e.hasOwnProperty("nodes")?{}:{nodes:[]},...e.hasOwnProperty("settings")?{}:{settings:{...hm.settings}}},f.value=ge(p.value.nodes,p.value.connections,!0)},pinData:function(t){const n=t.node.name;p.value.pinData||(p.value.pinData={}),Array.isArray(t.data)||(t.data=[t.data]),(p.value.pinData?.[n]??[]).length>0&&S.value[n]&&!t.isRestoration?S.value[n].pinnedDataLastUpdatedAt=Date.now():t.isRestoration&&S.value[n]&&(delete S.value[n].pinnedDataLastUpdatedAt,delete S.value[n].pinnedDataLastRemovedAt);const o=t.data.map((e=>{if(Xm(e)){const{json:t,binary:n,pairedItem:o}=e;return{json:t,...n&&{binary:n},...void 0!==o&&{pairedItem:o}}}return{json:e}}));p.value.pinData[n]=o,f.value.setPinData(p.value.pinData),e.markStateDirty(),Fr.emit("pin-data",{[t.node.name]:o})},unpinData:function(t){const n=t.node.name;p.value.pinData||(p.value.pinData={});const{[n]:o,...a}=p.value.pinData;p.value.pinData=a,f.value.setPinData(a),S.value[n]&&(S.value[n].pinnedDataLastRemovedAt=Date.now()),e.markStateDirty(),Fr.emit("unpin-data",{nodeNames:[n]})},addConnection:function(e){if(2!==e.connection.length)return;const t=e.connection[0],n=e.connection[1];if(p.value.connections.hasOwnProperty(t.node)||(p.value.connections[t.node]={}),p.value.connections[t.node].hasOwnProperty(t.type)||(p.value.connections[t.node]={...p.value.connections[t.node],[t.type]:[]}),p.value.connections[t.node][t.type].length<t.index+1)for(let l=p.value.connections[t.node][t.type].length;l<=t.index;l++)p.value.connections[t.node][t.type].push([]);const o=["index","node","type"];let a,i=!1;const r=p.value.connections[t.node][t.type],s=r[t.index];if(s)e:for(const l of s){for(a of o)if(l[a]!==n[a])continue e;i=!0;break}if(!i){r[t.index]=r[t.index]??[];const e=r[t.index];e&&e.push(n)}f.value.setConnections(p.value.connections)},removeConnection:function(t){const n=t.connection[0],o=t.connection[1];if(!p.value.connections.hasOwnProperty(n.node))return;if(!p.value.connections[n.node].hasOwnProperty(n.type))return;if(p.value.connections[n.node][n.type].length<n.index+1)return;e.markStateDirty();const a=p.value.connections[n.node][n.type][n.index];if(a){for(const e in a)a[e].node===o.node&&a[e].type===o.type&&a[e].index===o.index&&a.splice(Number.parseInt(e,10),1);f.value.setConnections(p.value.connections)}},removeAllNodeConnection:Ee,renameNodeSelectedAndExecution:function(t){e.markStateDirty();const n=g.value?.data?.resultData?.runData;n?.[t.old]&&(n[t.new]=n[t.old],delete n[t.old]),e.lastSelectedNode===t.old&&(e.lastSelectedNode=t.new);const{[t.old]:o,...a}=S.value;if(S.value={...a,[t.new]:S.value[t.old]},p.value.pinData?.[t.old]){const{[t.old]:e,...n}=p.value.pinData;p.value.pinData={...n,[t.new]:e},f.value.setPinData(p.value.pinData)}const i=g.value?.data?.resultData;i?.pinData?.[t.old]&&(i.pinData[t.new]=i.pinData[t.old],delete i.pinData[t.old]),Object.values(p.value.pinData??{}).concat(Object.values(g.value?.data?.resultData.pinData??{})).flatMap((e=>e.flatMap((e=>Array.isArray(e.pairedItem)?e.pairedItem:[e.pairedItem])))).forEach((e=>{"number"!=typeof e&&e?.sourceOverwrite?.previousNode===t.old&&(e.sourceOverwrite.previousNode=t.new)})),Object.values(g.value?.data?.resultData.runData??{}).flatMap((e=>e.flatMap((e=>e.source)))).forEach((e=>{e&&e.previousNode===t.old&&(e.previousNode=t.new)}))},addNode:function(e){e.hasOwnProperty("name")&&(p.value.nodes.push(e),f.value.setNodes(p.value.nodes),S.value[e.name]||(S.value[e.name]={}))},removeNode:Te,updateNodeExecutionRunData:function(e){const t=g.value?.data?.resultData.runData[e.nodeName],n=t?.findIndex((t=>t.executionIndex===e.data.executionIndex))??-1;t?.[n]&&(t.splice(n,1,e.data),k.value=Date.now())},updateNodeExecutionStatus:function(e){if(!g.value?.data)throw new Error('The "workflowExecutionData" is not initialized!');const{nodeName:t,data:r,executionId:s}=e,l="waiting"===r.executionStatus,u=me(t);if(!u)return;g.value.data.resultData.lastNodeExecuted=t,void 0===g.value.data.resultData.runData[t]&&(g.value.data.resultData.runData[t]=[]);const c=g.value.data.resultData.runData[t];if(l)c.push(r),k.value=Date.now(),("n8n-nodes-base.form"===u.type||"n8n-nodes-base.wait"===u.type&&"form"===u.parameters.resume)&&dm(function(e,t){const{webhookSuffix:n}=e.parameters.options??{},o=n&&"object"!=typeof n?`/${n}`:"";return`${i.formWaitingUrl}/${t}${o}`}(u,s));else{const t=c.findIndex((e=>e.executionIndex===r.executionIndex)),i=c.some((e=>"waiting"===e.executionStatus)),s=t>-1&&!i?t:c.length-1,l=c[s]?.executionStatus??"unknown";"waiting"===l||"running"===l||c[t]?c.splice(s,1,r):c.push(r),k.value=Date.now(),async function(e){const t=e.nodeName;if(e.data.error){const i=me(t);n.track("Manual exec errored",{error_title:e.data.error.message,node_type:i?.type,node_type_version:i?.typeVersion,node_id:i?.id,node_graph_string:JSON.stringify(Vo(await o.getWorkflowDataToSave(),o.getNodeTypes(),{isCloudDeployment:a.isCloudDeployment}).nodeGraph)})}}(e)}},clearNodeExecutionData:Ne,pinDataByNodeName:function(e){if(p.value.pinData?.[e])return p.value.pinData[e].map((e=>e.json))},activeNode:function(){return hp().activeNode},getPastExecutions:async function(e,t,n,o){let a={};return e&&(a={filter:e,firstId:o,lastId:n,limit:t}),await Va(i.restApiContext,"GET","/executions",a)},getExecution:async function(e){const t=await Va(i.restApiContext,"GET",`/executions/${e}`);return t&&Zx(t)},createNewWorkflow:async function(e){e.active=!1,e.settings||(e.settings??={}),e.settings.availableInMCP=!1;const t=ap();!e.projectId&&t.currentProjectId&&(e.projectId=t.currentProjectId);const n=await Va(i.restApiContext,"POST","/workflows",e);return o.containsNodeFromPackage(n,"@n8n/n8n-nodes-langchain")&&!l.isEasyAIWorkflowOnboardingDone&&(await Vm(i.restApiContext,{easyAIWorkflowOnboarded:!0}),l.setEasyAIWorkflowOnboardingDone()),n},updateWorkflow:Ae,publishWorkflow:async function(e,t){return await Va(i.restApiContext,"POST",`/workflows/${e}/activate`,t)},deactivateWorkflow:async function(e,t){const n=await Va(i.restApiContext,"POST",`/workflows/${e}/deactivate`,{expectedChecksum:t});if(!n.checksum)throw new Error("Failed to deactivate workflow");return ke(e),e===p.value.id&&be({versionId:n.versionId,name:m.value?.name??null,description:m.value?.description??null},n.checksum),n},updateWorkflowSetting:async function(e,t,n){let o={},a="",i="";const r=e===p.value.id;if(r)o=p.value.settings??{},a=p.value.versionId,i=O.value;else{const t=d.getWorkflowById(e);if(t&&t.versionId)o=t.settings??{},a=t.versionId;else{const t=await d.fetchWorkflow(e);o=t.settings??{},a=t.versionId}}const s={...o??{},[t]:n},l=await Ae(e,{versionId:a,settings:s,...i?{expectedChecksum:i}:{}});return r?Se(l.settings??{}):d.getWorkflowById(e)&&d.updateWorkflowInCache(e,{settings:l.settings,versionId:l.versionId}),l},saveWorkflowDescription:async function(e,t){let n="",o="";const a=e===p.value.id;if(a)n=p.value.versionId,o=O.value;else{const t=d.getWorkflowById(e);n=t?.versionId?t.versionId:(await d.fetchWorkflow(e)).versionId}const i=await Ae(e,{versionId:n,description:t,expectedChecksum:o});return d.getWorkflowById(e)&&d.updateWorkflowInCache(e,{description:i.description,versionId:i.versionId}),a&&Ie(i.description??""),i},runWorkflow:async function(e){null===e.workflowData.settings&&(e.workflowData.settings=void 0);try{return await Va(i.restApiContext,"POST",`/workflows/${e.workflowData.id}/run`,e)}catch(t){if(413===t.response?.status)throw new ja(we.baseText("workflowRun.showError.payloadTooLarge"),{errorCode:413,httpStatusCode:413});throw t}},removeTestWebhook:async function(e){return await Va(i.restApiContext,"DELETE",`/test-webhook/${e}`)},fetchExecutionDataById:async function(e){return await async function(e,t){return await Va(e,"GET",`/executions/${t}`)}(i.restApiContext,e)},deleteExecution:function(e){y.value.splice(y.value.indexOf(e),1)},addToCurrentExecutions:function(e){e.forEach((e=>{y.value.find((t=>t.id===e.id))||e.workflowId!==P.value||y.value.push(e)}))},getBinaryUrl:function(e,t,n,o){let a=i.restUrl;a.startsWith("/")&&(a=window.location.origin+a);const r=new URL(`${a}/binary-data`);return r.searchParams.append("id",e),r.searchParams.append("action",t),n&&r.searchParams.append("fileName",n),o&&r.searchParams.append("mimeType",o),r.toString()},setNodePristine:function(e,t){S.value[e].pristine=t},resetChatMessages:function(){T.value=[]},appendChatMessage:function(e){T.value.push(e)},checkIfNodeHasChatParent:function(e){return!!f.value.getParentNodes(e,ta.Main).find((e=>me(e)?.type===Ht))},removeNodeById:function(e){const t=he(e);t&&Te(t)},removeNodeConnectionsById:function(e){const t=he(e);t&&Ee(t)},removeNodeExecutionDataById:function(e){const t=he(e);t&&Ne(t.name)},setNodes:function(e){e.forEach((e=>{e.id||s.assignNodeId(e),e.extendsCredential&&(e.type=cx(e.extendsCredential)),e.position&&(e.position=Uk(e.position)),S.value[e.name]||(S.value[e.name]={pristine:!0})})),p.value.nodes=e,f.value.setNodes(e)},setConnections:function(e){p.value.connections=e,f.value.setConnections(e)},findNodeByPartialId:function(e){return p.value.nodes.find((t=>t.id.startsWith(e)))},getPartialIdForNode:function(e){for(let t=6;t<e.length;++t){const n=e.slice(0,t);if(1===p.value.nodes.filter((e=>e.id.startsWith(n))).length)return n}return e},setSelectedTriggerNodeName:function(e){A.value=e},fetchLastSuccessfulExecution:async function(){const n=qo(p.value.scopes).workflow;try{if(D.value||c.preferences.branchReadOnly||e.isReadOnlyView||!n.update||p.value.isArchived)return;w.value=await async function(e,t){return await Va(e,"GET",`/workflows/${t}/executions/last-successful`)}(i.restApiContext,P.value)}catch(t){}},lastSuccessfulExecution:w,getWebhookUrl:async function(e,t){const n=he(e);if(!n)return;const a=u.getNodeType(n.type,n.typeVersion);if(!a?.webhooks?.length)return;const i=a.webhooks[0];return await o.getWebhookUrl(i,n,t)},canViewWorkflows:se,defaults:hm,private:{setWorkflowSettings:Se,setActiveExecutionId:function(e){e&&(ue.value=le.value),le.value=e}}}}))),gm=new Map,wm=new Set,bm=n(Ca(),1),km="system";try{const e=nI();null!==e&&(km=e,eI(e))}catch(t){}e("r",xm=Ua(Ji.UI,(()=>{const e=rx(),t=v([]),n=v(null),o=ve(Oo,km,{writeDefaults:!1,serializer:{read:e=>tI(e)?e:km,write:bm.default}}),a=v({...Object.fromEntries([xo,oa,Go,ro,Tr,co,ur,lr,kr,xr,va,Po,Ln,Jt,dn,Dr,Sa,Cn,Pr,Cr,Or,Fo,Rt,ua,Ir,Sn,Ot,Mr,Nt,Yn,wn,Yo,Sr,eo,pn,St,un,Aa,tn,Do].map((e=>[e,{open:!1}]))),[sr]:{open:!1,activeId:null},[Lr]:{open:!1,mode:"",activeId:null},[yo]:{open:!1,data:{curlCommands:{}}},[pa]:{open:!1,data:void 0},createOrEditApiKey:{open:!1,data:{activeId:null,mode:""}},[Er]:{open:!1,mode:"",activeId:null,showAuthSelector:!1},[Ar]:{open:!1,activeId:null,data:{workflowListEventBus:void 0,content:{workflowCount:0,subFolderCount:0}}},[_r]:{open:!1,activeId:null,data:{workflowListEventBus:void 0}},communityPlusEnrollment:{open:!1,data:{customHeading:void 0}},[No]:{open:!1,data:{triggerType:"",workflowName:"",workflowId:"",webhookPath:"",node:""}},[go]:{open:!1,data:{nodeName:void 0}},[yn]:{open:!1,data:{}},[Yn]:{open:!1,data:{url:""}},[zt]:{open:!1,data:{workflowName:""}},[xt]:{open:!1,data:{articleId:void 0}},[fo]:{open:!1,data:{nodeName:""}}}),i=v([]),s=ve("sidebar.collapsed",null,{serializer:{read:e=>"null"===e?null:"true"===e,write:e=>String(e)}}),l=v(""),u=v(!1),c=v(!1),d=v(0),p=v(null),f=v([0,0]),m=v(!1),h=v(!1),y=v({}),g=v(!1),w=v(!1),b=v({overview:{},project:{},shared:{}}),k=v({}),x=v({width:0,height:0}),I=v(),S=v(null),E=v(),T=v(),N=rr(),A=vm(),_=ge("(prefers-color-scheme: dark)"),P=r((()=>_.value?"dark":"light")),C=r((()=>"system"===o.value?P.value:o.value)),O=r((()=>{let e="";return"cloud"===N.deploymentType&&(e=".cloud"),{feature:{unavailable:{title:`contextual.feature.unavailable.title${e}`}},credentials:{sharing:{unavailable:{title:`contextual.credentials.sharing.unavailable.title${e}`,description:`contextual.credentials.sharing.unavailable.description${e}`,action:`contextual.credentials.sharing.unavailable.action${e}`,button:`contextual.credentials.sharing.unavailable.button${e}`}}},workflows:{sharing:{title:"contextual.workflows.sharing.title",unavailable:{title:`contextual.workflows.sharing.unavailable.title${e}`,description:{modal:`contextual.workflows.sharing.unavailable.description.modal${e}`,tooltip:`contextual.workflows.sharing.unavailable.description.tooltip${e}`},action:`contextual.workflows.sharing.unavailable.action${e}`,button:`contextual.workflows.sharing.unavailable.button${e}`}}},variables:{unavailable:{title:`contextual.variables.unavailable.title${e}`,description:"contextual.variables.unavailable.description",action:`contextual.variables.unavailable.action${e}`,button:`contextual.variables.unavailable.button${e}`}},users:{settings:{unavailable:{title:`contextual.users.settings.unavailable.title${e}`,description:`contextual.users.settings.unavailable.description${e}`,button:`contextual.users.settings.unavailable.button${e}`}}}}})),M=r((()=>E.value?A.getNodeById(E.value):null)),D=r((()=>Object.keys(a.value).reduce(((e,t)=>(e[t]=t===i.value[0],e)),{}))),L=r((()=>i.value.map((e=>e)))),B=r((()=>{const e=[];return Object.entries(k.value).forEach((([t,n])=>{N.isModuleActive(t)&&e.push(...n.map((e=>({available:!0,...e}))))})),e})),F=r((()=>![Qo.WORKFLOW.toString(),Qo.NEW_WORKFLOW.toString(),Qo.EXECUTION_DEBUG.toString()].includes(l.value))),$=r((()=>t.value.reduce(((e,t)=>(e[t]=!0,e)),{}))),R=r((()=>{const e=getComputedStyle(document.body);return Number(e.getPropertyValue("--header--height"))})),j=r((()=>i.value.length>0)),V=r((()=>g.value)),W=(e,t)=>{a.value[e]={...a.value[e],mode:t}},z=(e,t)=>{a.value[e]={...a.value[e],activeId:t}},U=e=>{a.value[e.name]={...a.value[e.name],data:e.data}},G=e=>{a.value[e]={...a.value[e],open:!0},i.value=[e].concat(i.value)},H=e=>{U(e),G(e.name)},Y=e=>{a.value[e]={...a.value[e],open:!1},i.value=i.value.filter((t=>e!==t))},q=(e,t)=>{a.value[e]||(a.value[e]=t||{open:!1})},X=aI((e=>{e.forEach(((e,t)=>{a.value[t]||q(t,e.initialState)}))}));return{appGridDimensions:x,settingsSidebarItems:B,appliedTheme:C,contextBasedTranslationKeys:O,isModalActiveById:D,isReadOnlyView:F,isActionActive:$,activeActions:t,headerHeight:R,dirtyStateSetCount:r((()=>d.value)),stateIsDirty:r((()=>u.value)),hasUnsavedWorkflowChanges:r((()=>c.value)),isBlankRedirect:w,activeCredentialType:n,lastSelectedNode:p,lastInteractedWithNodeConnection:I,lastInteractedWithNodeHandle:S,lastInteractedWithNodeId:E,lastInteractedWithNode:M,lastCancelledConnectionPosition:T,nodeViewOffsetPosition:f,nodeViewInitialized:m,addFirstStepOnLoad:h,sidebarMenuCollapsed:s,theme:r((()=>o.value)),modalsById:a,currentView:l,isAnyModalOpen:j,pendingNotificationsForViews:y,activeModals:L,isProcessingExecutionResults:V,setTheme:e=>{o.value=e,eI(e)},setModalData:U,openModalWithData:H,openModal:G,closeModal:Y,openDeleteUserModal:e=>{z(sr,e),G(sr)},openExistingCredential:e=>{z(Er,e),W(Er,"edit"),G(Er)},openNewCredential:(e,t=!1)=>{var n,o;z(Er,e),n=Er,o=t,a.value[n]={...a.value[n],showAuthSelector:o},W(Er,"new"),G(Er)},openCommunityPackageUninstallConfirmModal:e=>{W(Lr,Br.UNINSTALL),z(Lr,e),G(Lr)},openCommunityPackageUpdateConfirmModal:(t,n)=>{e.track("User clicked to open community node update modal",{source:n,package_name:t}),W(Lr,Br.UPDATE),z(Lr,t),G(Lr)},addActiveAction:e=>{t.value.includes(e)||t.value.push(e)},removeActiveAction:e=>{const n=t.value.indexOf(e);-1!==n&&t.value.splice(n,1)},toggleSidebarMenuCollapse:()=>{s.value=!s.value},setNotificationsForView:(e,t)=>{y.value[e]=t},resetLastInteractedWith:function(){I.value=void 0,S.value=null,E.value=void 0,T.value=void 0},setProcessingExecutionResults:e=>{g.value=e},markStateDirty:(e="workflow")=>{d.value++,u.value=!0,"workflow"===e&&(c.value=!0)},markStateClean:()=>{u.value=!1,c.value=!1},openDeleteFolderModal:(e,t,n)=>{z(Ar,e),H({name:Ar,data:{workflowListEventBus:t,content:n}})},openMoveToFolderModal:(e,t,n)=>{H({name:_r,data:{resourceType:e,resource:t,workflowListEventBus:n}})},moduleTabs:b,registerCustomTabs:(e,t,n)=>{if(!b.value[e])throw new Error(`Invalid page type: ${e}`);b.value[e][t]=n},registerSettingsPages:(e,t)=>{k.value[e]=t},registerModal:q,unregisterModal:e=>{a.value[e]&&(a.value[e].open&&Y(e),delete a.value[e])},initializeModalsFromRegistry:()=>{oI().forEach(((e,t)=>{q(t,e.initialState)}))},cleanup:()=>{X()}}}))),e("n",(e=>{const{store:t,onModalClosed:n,onModalOpened:o}=e,a=["openModal","openModalWithData","closeModal"];return t.$onAction((e=>{const{name:t,after:i,args:r}=e;i((()=>{if(a.includes(t))switch(t){case"openModal":{const e=r[0];o?.(e);break}case"openModalWithData":{const{name:e}=r[0]??{};o?.(e);break}case"closeModal":{const e=r[0];n?.(e);break}}}))}))})),Im="https://api.n8n.io/api",Sm="/accounts/onboarding",Em=e=>!!e?.isPending,Tm=e=>e?.role===ia.Owner,Nm=e=>Tm(e)&&Em(e),Am=e=>e?.role===ia.Admin,e("t",_m=Ua(Ji.USERS,(()=>{const e=v(!1),n=v(null),o=v({}),a=v(-1),i=v([]),s=v([]),l=xm(),u=qa(),c=rr(),d=r((()=>Object.values(o.value))),p=r((()=>n.value?o.value[n.value]:null)),f=r((()=>Boolean(p.value?.settings?.userActivated))),m=r((()=>Nm(p.value))),h=r((()=>Tm(p.value))),y=r((()=>Am(p.value))),g=r((()=>p.value?.mfaEnabled??!1)),w=r((()=>p.value?.role??"default")),b=r((()=>p.value?.settings?.userClaimedAiCredits)),k=r((()=>Boolean(p.value?.settings?.easyAIWorkflowOnboarded))),x=r((()=>h.value)),I=r((()=>{const e=p.value;if(!e)return[];const t=e.personalizationAnswers;return t?zm(t):[]})),S=r((()=>-1===a.value||a.value>d.value.length)),E=e=>{e.forEach((e=>{const t={...o.value[e.id]||{},...e},n={...t,fullName:e.firstName?`${t.firstName} ${t.lastName||""}`:void 0,isDefaultUser:Nm(t),isPendingUser:Em(t)};o.value={...o.value,[n.id]:n}}))},T=async e=>{E([e]),n.value=e.id;for(const n of i.value)try{await n(e)}catch(t){console.error("Error executing login hook:",t)}},N=async()=>{const e=await async function(e){return await Va(e,"GET","/login")}(u.restApiContext);e&&await T(e)},A=e=>{p.value&&(o.value={...o.value,[p.value.id]:{...p.value,personalizationAnswers:e}})},_=async e=>{const t=await async function(e,t){return await Va(e,"PATCH","/me",t)}(u.restApiContext,e);return E([t]),t},P=async({take:e,skip:t,filter:n}={})=>{if(!Mh(["rbac"],{rbac:{scope:"user:list"}}))return;const{items:o}=await Wm(u.restApiContext,{take:e??50,skip:t??0,filter:n});E(o)},C=Se((async e=>await Wm(u.restApiContext,e)),{count:0,items:[]},{immediate:!1,resetOnExecute:!1});return{initialized:e,currentUserId:n,usersById:o,allUsers:d,currentUser:p,userActivated:f,isDefaultUser:m,isInstanceOwner:h,isAdmin:y,mfaEnabled:g,globalRoleName:w,personalizedNodeTypes:I,userClaimedAiCredits:b,isEasyAIWorkflowOnboardingDone:k,canUserUpdateVersion:x,usersLimitNotReached:S,addUsers:E,loginWithCookie:N,initialize:async()=>{if(!e.value)try{await N(),e.value=!0}catch(t){}},setPersonalizationAnswers:A,loginWithCreds:async e=>{const t=await async function(e,t){return await Va(e,"POST","/login",t)}(u.restApiContext,e);t&&await T(t)},logout:async()=>{await async function(e){await Va(e,"POST","/logout")}(u.restApiContext),n.value=null;for(const t of s.value)try{await t()}catch(e){console.error("Error executing logout hook:",e)}localStorage.removeItem(Fa)},registerLoginHook:e=>{i.value.push(e)},registerLogoutHook:e=>{s.value.push(e)},createOwner:async e=>{const t=await async function(e,t){return await Va(e,"POST","/owner/setup",t)}(u.restApiContext,e);t&&(await T(t),c.stopShowingSetupPage())},validateSignupToken:async e=>await async function(e,t){return await Va(e,"GET","/resolve-signup-token",t)}(u.restApiContext,e),acceptInvitation:async e=>{const t=await async function(e,t){if(t.token)return await Va(e,"POST","/invitations/accept",t);if(!t.inviteeId)throw new Error("inviteeId is required when not using token");const{inviteeId:n,...o}=t;return await Va(e,"POST",`/invitations/${n}/accept`,o)}(u.restApiContext,e);t&&await T(t)},sendForgotPasswordEmail:async e=>{await async function(e,t){await Va(e,"POST","/forgot-password",t)}(u.restApiContext,e)},validatePasswordToken:async e=>{await async function(e,t){await Va(e,"GET","/resolve-password-token",t)}(u.restApiContext,e)},changePassword:async e=>{await async function(e,t){await Va(e,"POST","/change-password",t)}(u.restApiContext,e)},updateUser:_,updateUserName:async e=>{if(p.value)return await _({email:p.value.email,...e})},updateUserSettings:async e=>{const t=await Vm(u.restApiContext,e);p.value&&(p.value.settings=t,E([p.value]))},updateOtherUserSettings:async(e,t)=>{await async function(e,t,n){return await Va(e,"PATCH",`/users/${t}/settings`,n)}(u.restApiContext,e,t)},updateCurrentUserPassword:async e=>{await async function(e,t){return await Va(e,"PATCH","/me/password",t)}(u.restApiContext,e)},deleteUser:async e=>{await async function(e,{id:t,transferId:n}){await Va(e,"DELETE",`/users/${t}`,n?{transferId:n}:{})}(u.restApiContext,e),(e=>{const{[e]:t,...n}=o.value;o.value=n})(e.id)},fetchUsers:P,inviteUsers:async e=>{const t=await iI(u.restApiContext,e);return E(t.map((({user:e})=>({isPending:!0,...e})))),t},reinviteUser:async({email:e,role:t})=>{const n=await iI(u.restApiContext,[{email:e,role:t}]);if(!n[0].user.emailSent)throw Error(n[0].error)},getUserPasswordResetLink:async e=>await async function(e,{id:t}){return await Va(e,"GET",`/users/${t}/password-reset-link`)}(u.restApiContext,e),generateInviteLink:async e=>await async function(e,{id:t}){return await Va(e,"POST",`/users/${t}/invite-link`)}(u.restApiContext,e),submitPersonalizationSurvey:async e=>{await async function(e,t){await Va(e,"POST","/me/survey",t)}(u.restApiContext,e),A(e)},showPersonalizationSurvey:async()=>{c.isPersonalizationSurveyEnabled&&p.value&&!p.value.personalizationAnswers&&l.openModal(ur)},fetchMfaQR:async()=>await async function(e){return await Va(e,"GET","/mfa/qr")}(u.restApiContext),verifyMfaCode:async e=>await async function(e,t){return await Va(e,"POST","/mfa/verify",t)}(u.restApiContext,e),enableMfa:async e=>{await async function(e,t){return await Va(e,"POST","/mfa/enable",t)}(u.restApiContext,e),p.value&&(p.value.mfaEnabled=!0)},disableMfa:async e=>{await async function(e,t){return await Va(e,"POST","/mfa/disable",t)}(u.restApiContext,e),p.value&&(p.value.mfaEnabled=!1)},updateEnforceMfa:async e=>{await async function(e,t){return await Va(e,"POST","/mfa/enforce-mfa",{enforce:t})}(u.restApiContext,e),c.isMFAEnforced=e},canEnableMFA:async()=>await async function(e){return await Va(e,"POST","/mfa/can-enable")}(u.restApiContext),sendConfirmationEmail:async()=>{await async function(e){return await Ya(e.baseUrl,"/cloud/proxy/user/resend-confirmation-email")}(u.restApiContext)},updateGlobalRole:async({id:e,newRoleName:t})=>{await async function(e,{id:t,newRoleName:n}){return await Va(e,"PATCH",`/users/${t}/role`,{newRoleName:n})}(u.restApiContext,{id:e,newRoleName:t}),await P({filter:{ids:[e]}})},setEasyAIWorkflowOnboardingDone:()=>{p.value?.settings&&(p.value.settings.easyAIWorkflowOnboarded=!0)},isCalloutDismissed:e=>Boolean(p.value?.settings?.dismissedCallouts?.[e]),setCalloutDismissed:e=>{p.value?.settings&&(p.value?.settings?.dismissedCallouts||(p.value.settings.dismissedCallouts={}),p.value.settings.dismissedCallouts[e]=!0)},submitContactEmail:async(e,t)=>p.value?await async function(e,t,n,o){return await Ya(Im,Sm,{instance_id:e,user_id:`${e}#${t.id}`,email:n,agree:o,agree_updates:!0})}(u.instanceId,p.value,e??p.value.email,t):null,setUserQuota:e=>{void 0!==e&&(a.value=e)},usersList:C}})))}}}));
//# sourceMappingURL=users.store-legacy-B-bVJKl3.js.map