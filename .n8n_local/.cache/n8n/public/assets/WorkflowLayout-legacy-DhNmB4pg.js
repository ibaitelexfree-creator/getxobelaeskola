!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./MainSidebarHeader-legacy-fQV6qyAC.js","./BaseLayout-legacy-i7T0-7rf.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./banners.store-legacy-B3TV_6lC.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./usePageRedirectionHelper-legacy-DkG-ZaDD.js","./dataTable.store-legacy-bRwnG61W.js","./useClipboard-legacy-CaRHRTup.js","./useBugReporting-legacy-xyWBZTdL.js","./executions.store-legacy-OEeCPZk_.js","./assistant.store-legacy-5vR0xJ8p.js","./chatPanel.store-legacy-BsXu4GbL.js","./RunData-legacy-lPpXxp--.js","./NDVEmptyState-legacy-BucrD4N6.js","./useEnvFeatureFlag-legacy-D1JgdFvC.js","./externalSecrets.ee.store-legacy-iYi_lGhf.js","./uniqBy-legacy-D3DmQIZU.js","./usePinnedData-legacy-B5CI71uf.js","./nodeIcon-legacy-KJSlWBN7.js","./canvas.utils-legacy-BQnUeqx3.js","./nodeCreator.store-legacy-i0crt2uh.js","./useCanvasOperations-legacy-CEMGNuuE.js","./folders.store-legacy-BDfX2wrH.js","./ProjectIcon-legacy-j5-RLKs-.js","./useDynamicCredentials-legacy-DtgrzjN_.js","./RunDataHtml-legacy-D5RK94OR.js","./NodeIcon-legacy-DOI-M5xN.js","./useRunWorkflow-legacy-4stFR283.js","./pushConnection.store-legacy-C36NF7Lj.js","./vue-json-pretty-legacy-CxiVsaQm.js","./collaboration.store-legacy-COoId2Xe.js","./dateFormatter-legacy-Di9U0PH-.js","./useExecutionHelpers-legacy-BhqYaQxc.js","./TimeAgo-legacy-B4YnT5IQ.js","./roles.store-legacy-DOWLLO4H.js","./KeyboardShortcutTooltip-legacy-C9k84nly.js","./TagsDropdown-legacy-BxHqGla1.js","./WorkflowTagsDropdown-legacy-DpQYAd99.js","./dist-legacy-CPj4q_aQ.js","./sso.store-legacy-B2e5Mjw4.js","./router-legacy-BqAYjr9q.js","./insights.store-legacy-BeV4G8Lk.js","./insights.constants-legacy-CSuwNipZ.js","./insights.utils-legacy-BZFivQZh.js","./mcp.constants-legacy-DUR_mUvx.js","./sourceControl.eventBus-legacy-DO0IFl0k.js","./utils-legacy-Dl8SPFUn.js","./useMcp-legacy-BnFtTyT-.js","./useKeybindings-legacy-Ba2t_Uzp.js","./injectStrict-legacy-BDpFN7qf.js","./useWorkflowActivate-legacy-BYoAWriG.js","./useGlobalEntityCreation-legacy-zUUPbY_v.js","./LoadingView-legacy-wiq2grJC.js","./useSettingsItems-legacy-D8YlORgn.js","./AppSidebar-legacy-kx1KyWLc.js","./readyToRun.store-legacy-CKgcGLoh.js","./resourceCenter.store-legacy-Bu9txJli.js","./useLogsTreeExpand-legacy-D53Lg-vJ.js","./LogsPanel-legacy-DV5kny-U.js","./AnimatedSpinner-legacy-CrsyPpHZ.js","./useResizablePanel-legacy-D_ULk6eg.js","./aiTemplatesStarterCollection.store-legacy-Ch_qppxf.js","./FolderBreadcrumbs-legacy-FM8APFoR.js","./useExecutionDebugging-legacy-CMYL4mJb.js","./ProjectBreadcrumb-legacy-DAFk_R0v.js","./ConnectionTracker-legacy-DrdY1yoj.js","./useWorkflowsCache-legacy-B5cWDIah.js","./usePushConnection-legacy-OU2Q923F.js"],(function(e,t){var a,o,n,s,i,r,l,c,u,d,f,p,w,v,m,h,g,b,k,y,_,x,T,I,W,E,j,S,C,O,N,A,D,P,M,R,B,L,F,V,U,$,H,z,K,X,q,G,J,Y,Z,Q,ee,te,ae,oe,ne,se,ie,re,le,ce,ue,de,fe,pe,we,ve,me,he,ge,be,ke,ye,_e,xe,Te,Ie,We,Ee,je,Se,Ce,Oe,Ne,Ae,De,Pe,Me,Re,Be,Le,Fe,Ve,Ue,$e,He,ze,Ke,Xe,qe,Ge,Je,Ye,Ze,Qe,et,tt,at,ot,nt,st,it,rt,lt,ct,ut,dt,ft,pt,wt,vt,mt,ht,gt,bt,kt,yt,_t,xt,Tt,It,Wt,Et,jt,St,Ct,Ot,Nt,At,Dt,Pt,Mt,Rt,Bt,Lt,Ft,Vt,Ut,$t,Ht,zt,Kt,Xt,qt,Gt,Jt,Yt,Zt,Qt,ea,ta,aa,oa,na,sa,ia,ra,la,ca,ua,da,fa,pa,wa,va,ma,ha,ga,ba,ka,ya,_a,xa,Ta,Ia,Wa,Ea,ja,Sa,Ca,Oa,Na,Aa,Da,Pa,Ma,Ra,Ba;return{setters:[function(e){a=e.o},function(e){o=e.$t,n=e.C,s=e.Cn,i=e.D,r=e.E,l=e.G,c=e.Gt,u=e.It,d=e.J,f=e.L,p=e.M,w=e.P,v=e.T,m=e.Z,h=e._,g=e._t,b=e.at,k=e.bn,y=e.bt,_=e.c,x=e.ct,T=e.en,I=e.et,W=e.it,E=e.j,j=e.k,S=e.mt,C=e.nt,O=e.ot,N=e.p,A=e.q,D=e.tn,P=e.v,M=e.vn,R=e.w,B=e.xt,L=e.z,F=e.zt},function(e){V=e.M,U=e.w,$=e.yt},function(e){H=e.At,z=e.Ci,K=e.D,X=e.Dt,q=e.Hi,G=e.Ki,J=e.M,Y=e.Mi,Z=e.N,Q=e.Ni,ee=e.Oi,te=e.Ui,ae=e._i,oe=e._t,ne=e.d,se=e.fi,ie=e.wi,re=e.z},function(e){le=e.t},function(e){},function(e){ce=e.At,ue=e.Bt,de=e.C,fe=e.Dr,pe=e.Ft,we=e.Gt,ve=e.Ht,me=e.K,he=e.Kc,ge=e.Kt,be=e.Lt,ke=e.Ma,ye=e.Or,_e=e.Ot,xe=e.Rr,Te=e.T,Ie=e.Ti,We=e.Tr,Ee=e.Tt,je=e.Vt,Se=e.br,Ce=e.fi,Oe=e.fn,Ne=e.ga,Ae=e.hn,De=e.ji,Pe=e.jt,Me=e.kt,Re=e.pn,Be=e.r,Le=e.rt,Fe=e.s,Ve=e.t,Ue=e.un,$e=e.ur,He=e.wr,ze=e.ws,Ke=e.xr,Xe=e.yr,qe=e.zt},function(e){},function(e){Ge=e.t},function(e){Je=e.$s,Ye=e.Bs,Ze=e.Ec,Qe=e.Hs,et=e.Is,tt=e.Ms,at=e.Ns,e.Ss,ot=e.T,nt=e.Tc,st=e.Vs,it=e.Yc,rt=e._,lt=e._s,e.br,ct=e.ds,ut=e.el,dt=e.g,e.hr,ft=e.ns,e.o,pt=e.qo,wt=e.rs,vt=e.t,mt=e.wc,ht=e.xl,gt=e.y,bt=e.zs},function(e){},function(e){kt=e.r},function(e){yt=e.t},function(e){},function(e){_t=e.n,xt=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){Tt=e.t},function(e){It=e.t},function(e){Wt=e.t},function(e){},function(e){},function(e){},function(e){Et=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){jt=e.n,St=e.t},function(e){Ct=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){Ot=e.t},function(e){},function(e){},function(e){Nt=e.t},function(e){},function(e){},function(e){},function(e){At=e.t},function(e){Dt=e.t},function(e){},function(e){Pt=e.t},function(e){},function(e){},function(e){},function(e){Mt=e.a,Rt=e.s},function(e){},function(e){Bt=e.i,Lt=e.r},function(e){Ft=e.t},function(e){Vt=e.t},function(e){Ut=e.t},function(e){$t=e.t},function(e){},function(e){Ht=e.t},function(e){},function(e){zt=e.t},function(e){},function(e){},function(e){},function(e){Kt=e.t},function(e){},function(e){},function(e){Xt=e.t},function(e){qt=e.n,Gt=e.t},function(e){Jt=e.t},function(e){},function(e){Yt=e.t},function(e){Zt=e.t},function(e){Qt=e.t}],execute:function(){(ea=document.createElement("style")).textContent="._container_m8h8t_125{right:var(--spacing--sm);bottom:var(--ask-assistant--floating-button--margin-bottom,--spacing--2xl);z-index:var(--ask-assistant-floating-button--z);position:absolute}._tooltip_m8h8t_132{min-width:150px;line-height:normal;max-width:265px!important}._assistant_m8h8t_138{font-size:var(--font-size--3xs);line-height:var(--spacing--sm);font-weight:var(--font-weight--bold);margin-top:var(--spacing--xs)}._assistant_m8h8t_138>span{margin-left:var(--spacing--4xs)}._text_m8h8t_148{-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._container_11dda_125{min-height:30px;padding:var(--spacing--5xs);background-color:var(--color--foreground);border-radius:var(--radius);z-index:100;transition:all .15s ease-in-out;display:flex;position:absolute;bottom:0;left:50%;transform:translate(-50%)translateY(50%)}@media screen and (max-width:430px){._container_11dda_125{flex-direction:column}}.tags-container[data-v-8ecf8b55]{max-width:300px;display:block}.hideTag[data-v-8ecf8b55]{visibility:hidden}.tags[data-v-8ecf8b55]{gap:var(--spacing--4xs);display:flex}.count-container[data-v-8ecf8b55]{text-overflow:ellipsis;max-width:40px;position:absolute;overflow:hidden}._deleteItem_ldsb8_125{color:var(--color--danger)}._group_ldsb8_129{gap:var(--spacing--xs);display:flex}._hiddenInput_ldsb8_134{display:none}._container_cvwuq_125{margin:0 var(--spacing--4xs)}._container_joo8n_125{display:contents}._activeVersionIndicator_joo8n_129{align-items:center;display:inline-flex}._activeVersionIndicator_joo8n_129 ._icon_joo8n_133:focus{outline:none}._publishButtonWrapper_joo8n_137{margin-right:var(--spacing--2xs);display:inline-flex;position:relative}._buttonGroup_joo8n_143{display:inline-flex}._groupButtonLeft_joo8n_147,._groupButtonLeft_joo8n_147:disabled,._groupButtonLeft_joo8n_147:hover:disabled{border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}._groupButtonLeft_joo8n_147:hover{border-right-color:inherit}._groupButtonRight_joo8n_159{border-top-left-radius:0;border-bottom-left-radius:0}._buttonGroup_joo8n_143:has(._groupButtonLeft_joo8n_147:not(:disabled):hover) ._groupButtonRight_joo8n_159{border-left-color:transparent}._indicatorDot_joo8n_168{height:var(--spacing--2xs);width:var(--spacing--2xs);margin-right:var(--spacing--2xs);border-radius:50%;display:inline-block}._indicatorPublished_joo8n_176{background-color:var(--color--mint-600)}._indicatorPublishedText_joo8n_180{color:var(--color--text--tint-1)}._indicatorChanges_joo8n_184{background-color:var(--color--yellow-500)}._indicatorIssues_joo8n_188{background-color:var(--color--red-600)}._flex_joo8n_192{align-items:center;display:flex}.name-container[data-v-25155f8e]{margin-right:var(--spacing--sm)}.name-container[data-v-25155f8e] .el-input{padding:0}.name[data-v-25155f8e]{color:var(--color--text--shade-1);font-size:var(--font-size--sm);padding:var(--spacing--3xs)var(--spacing--4xs)var(--spacing--4xs)}.add-tag[data-v-25155f8e]{color:var(--color--text--tint-1);font-size:12px;font-weight:var(--font-weight--bold);white-space:nowrap;padding:20px 0}.add-tag[data-v-25155f8e]:hover{color:var(--color--primary)}.tags[data-v-25155f8e]{flex:1;align-items:center;width:100%;margin-right:20px;display:flex}.tags-edit[data-v-25155f8e]{width:100%;min-width:100px;max-width:460px}.actions[data-v-25155f8e]{align-items:center;gap:var(--spacing--md);flex-wrap:nowrap;display:flex}@media screen and (max-width:767px){.name[data-v-25155f8e] input{min-width:180px}}@media (max-width:1390px){.name-container[data-v-25155f8e]{margin-right:var(--spacing--xs)}.actions[data-v-25155f8e]{gap:var(--spacing--xs)}}@media (max-width:1350px){.name-container[data-v-25155f8e]{margin-right:var(--spacing--2xs)}.actions[data-v-25155f8e]{gap:var(--spacing--2xs)}}._container_h2714_125{width:100%;padding:var(--spacing--xs)var(--spacing--md);flex-wrap:nowrap;align-items:center;display:flex;position:relative}._path-separator_h2714_134{font-size:var(--font-size--xl);color:var(--color--foreground);padding:var(--spacing--3xs)var(--spacing--4xs)var(--spacing--4xs)}._closeNodeViewDiscovery_h2714_140{right:var(--spacing--xs);top:var(--spacing--xs);cursor:pointer;position:absolute}._header-controls_h2714_147{align-items:center;gap:var(--spacing--md);width:100%;margin:0 var(--spacing--md);flex:1;display:flex}._container_19rmf_125{align-items:center;width:100%;display:flex;position:relative}._main-header_19rmf_132{min-height:var(--navbar--height);background-color:var(--color--background--light-3);box-sizing:border-box;border-bottom:var(--border-width)var(--border-style)var(--color--foreground);width:100%}._top-menu_19rmf_140{height:var(--navbar--height);font-size:.9em;font-weight:var(--font-weight--regular);align-items:center;display:flex;position:relative;overflow-x:auto;overflow-y:hidden}._github-button_19rmf_151{padding:var(--spacing--5xs)var(--spacing--md);background-color:var(--color--background--light-3);border-left:var(--border-width)var(--border-style)var(--color--foreground);align-self:stretch;align-items:center;display:flex}._close-github-button_19rmf_160{color:var(--color--foreground--shade-2);background-color:var(--color--background--light-3);cursor:pointer;border-radius:100%;display:none;position:absolute;top:0;right:0;transform:translate(50%,-46%)}._close-github-button_19rmf_160:hover{color:var(--color--orange-400)}._github-button-container_19rmf_175{position:relative}._github-button_19rmf_151:hover ._close-github-button_19rmf_160{display:block}@media (max-width:1390px){._github-button_19rmf_151{padding:var(--spacing--5xs)var(--spacing--xs)}}@media (max-width:1340px){._github-button_19rmf_151{border-left:0;padding-left:0}}@media (max-width:1290px){._github-button_19rmf_151{display:none}}\n/*$vite$:1*/",document.head.appendChild(ea);try{La="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(Fa=(new La.Error).stack)&&(La._sentryDebugIds=La._sentryDebugIds||{},La._sentryDebugIds[Fa]="c0b6ec28-c5be-458c-989e-9220c21faa0c",La._sentryDebugIdIdentifier="sentry-dbid-c0b6ec28-c5be-458c-989e-9220c21faa0c")}catch(La){}var La,Fa;ta=le(w({__name:"AskAssistantFloatingButton",setup(e){const t=It(),a=Ue(),o=Wt(),r=ze(),l=$(),{APP_Z_INDEXES:u}=Se(),d=n((()=>{const e=t.lastUnread;return"block"===e?.type?e.title:"text"===e?.type?e.content:"code-diff"===e?.type?e.description:""})),f=n((()=>r.settings.ai.allowSendingParameterValues)),w=async()=>{a.isAIBuilderEnabled&&f.value?o.isOpen&&o.isBuilderModeActive?o.close():await o.open({mode:"builder"}):await o.toggle({mode:"assistant"}),o.isOpen&&t.trackUserOpenedAssistant({source:"canvas",task:"placeholder",has_existing_session:!t.isSessionEnded})};return(e,a)=>(I(),i("div",{class:M(e.$style.container),"data-test-id":"ask-assistant-floating-button"},[p(c(ee),{"z-index":c(u).ASK_ASSISTANT_FLOATING_BUTTON_TOOLTIP,placement:"top",visible:!!d.value,"popper-class":e.$style.tooltip},{content:y((()=>[R("div",{class:M(e.$style.text)},s(d.value),3),R("div",{class:M(e.$style.assistant)},[p(c(se),{size:"mini"}),R("span",null,s(c(l).baseText("aiAssistant.name")),1)],2)])),default:y((()=>[p(c(Q),{"unread-count":c(t).unreadCount,onClick:w},null,8,["unread-count"])])),_:1},8,["z-index","visible","popper-class"])],2))}}),[["__cssModules",{$style:{container:"_container_m8h8t_125",tooltip:"_tooltip_m8h8t_132",assistant:"_assistant_m8h8t_138",text:"_text_m8h8t_148"}}]]),aa=w({__name:"TabBar",props:{items:{},modelValue:{default:ft.WORKFLOW}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t;function o(e,t){a("update:modelValue",e,t)}return(t,a)=>e.items?(I(),i("div",{key:0,class:M({[t.$style.container]:!0,"tab-bar-container":!0})},[p(c(re),{"model-value":e.modelValue,options:e.items,"onUpdate:modelValue":o},null,8,["model-value","options"])],2)):r("",!0)}}),oa=le(aa,[["__cssModules",{$style:{container:"_container_11dda_125"}}]]),na=w({__name:"BreakpointsObserver",props:{valueXS:{},valueXL:{},valueLG:{},valueMD:{},valueSM:{},valueDefault:{}},setup(e){const t=e,{callDebounced:a}=xt(),o=yt(),s=u(window.innerWidth),r=n((()=>s.value<768?"XS":s.value>=1920?"XL":s.value>=1200?"LG":s.value>=992?"MD":"SM")),c=n((()=>t.valueXS&&s.value<768?t.valueXS:t.valueXL&&s.value>=1920?t.valueXL:t.valueLG&&s.value>=1200?t.valueLG:t.valueMD&&s.value>=992?t.valueMD:t.valueSM?t.valueSM:t.valueDefault)),f=()=>{a(p,{debounceTime:50})},p=async()=>{s.value=window.innerWidth,await l();const e=await he();o.updateBannersHeight(e)};return m((()=>{window.addEventListener("resize",f)})),d((()=>{window.removeEventListener("resize",f)})),(e,t)=>(I(),i("span",null,[b(e.$slots,"default",{bp:r.value,value:c.value})]))}}),sa=w({__name:"WorkflowProductionChecklist",props:{workflow:{}},setup(e){const t=e,a=$(),o=ie(),s=Te(),i=de(),l=Zt(),d=Be(),f=We(),p=be(),w=He(),h=ze(),{isEligibleForMcpAccess:b}=Ft(),k=Ve(),y=u(!1),_=u(null),x=n((()=>t.workflow.nodes.some((e=>i.getNodeType(e.type,e.typeVersion)?.codex?.categories?.includes("AI"))))),T=n((()=>s.evaluationSetOutputsNodeExist)),W=n((()=>!!t.workflow.settings?.errorWorkflow)),E=n((()=>!!t.workflow?.nodes&&t.workflow.nodes.some((e=>"n8n-nodes-base.timeSaved"===e.type&&!0!==e.disabled)))),j=n((()=>void 0!==t.workflow.settings?.timeSavedPerExecution||E.value)),S=n((()=>d.isModalActiveById[tt])),C=n((()=>w.preferences.branchReadOnly)),O=n((()=>k.isInstanceOwner)),N=n((()=>k.isAdmin)),A=n((()=>h.isModuleActive("mcp"))),D=n((()=>h.moduleSettings.mcp?.mcpAccessEnabled??!1)),P=n((()=>b(t.workflow))),M=n((()=>O.value||N.value)),R=n((()=>{if(null===t.workflow.activeVersionId||l.isCacheLoading.value)return[];const e=[],o=_.value?.suggestedActions??{};o.errorWorkflow?.ignored||e.push({id:"errorWorkflow",title:a.baseText("workflowProductionChecklist.errorWorkflow.title"),description:a.baseText("workflowProductionChecklist.errorWorkflow.description"),moreInfoLink:dt,completed:W.value}),x.value&&s.isEvaluationEnabled&&!o.evaluations?.ignored&&e.push({id:"evaluations",title:a.baseText("workflowProductionChecklist.evaluations.title"),description:a.baseText("workflowProductionChecklist.evaluations.description"),moreInfoLink:rt,completed:T.value}),o.timeSaved?.ignored||e.push({id:"timeSaved",title:a.baseText("workflowProductionChecklist.timeSaved.title"),description:a.baseText("workflowProductionChecklist.timeSaved.description"),moreInfoLink:ot,completed:j.value});const n=function(){if(!A.value||!P.value)return null;const e={title:a.baseText("mcp.productionChecklist.title"),moreInfoLink:Mt};return D.value?o["workflow-mcp-access"]?.ignored?null:{...e,id:"workflow-mcp-access",description:a.baseText("mcp.productionChecklist.workflow.description"),completed:t.workflow.settings?.availableInMCP??!1}:!M.value||o["instance-mcp-access"]?.ignored?null:{...e,id:"instance-mcp-access",description:a.baseText("mcp.productionChecklist.instance.description"),completed:!1}}();return n&&e.push(n),e}));async function B(){t.workflow.id&&(_.value=await l.getMergedWorkflowSettings(t.workflow.id))}async function L(e){switch(e){case"evaluations":await o.push({name:wt.EVALUATION_EDIT,params:{name:t.workflow.id}});break;case"errorWorkflow":case"timeSaved":case"workflow-mcp-access":d.openModal(st);break;case"instance-mcp-access":await o.push({name:Rt})}y.value=!1}async function F(e){["evaluations","errorWorkflow","timeSaved","workflow-mcp-access","instance-mcp-access"].includes(e)&&(await l.ignoreSuggestedAction(t.workflow.id,e),await B(),p.track("user clicked ignore suggested action",{actionId:e}))}async function V(){"confirm"===await f.confirm(a.baseText("workflowProductionChecklist.ignoreAllConfirmation.description"),a.baseText("workflowProductionChecklist.ignoreAllConfirmation.title"),{confirmButtonText:a.baseText("workflowProductionChecklist.ignoreAllConfirmation.confirm")})&&(await l.ignoreAllSuggestedActionsForAllWorkflows(R.value.map((e=>e.id))),await B(),p.track("user clicked ignore suggested actions for all workflows"))}function U(e){e?(y.value=!0,p.track("user opened suggested actions checklist")):S.value||(y.value=!1)}return g((()=>!!t.workflow.activeVersionId),(async(e,a)=>{e&&!a&&(_.value?.firstActivatedAt||setTimeout((()=>{y.value=!0}),0),await l.updateFirstActivatedAt(t.workflow.id))})),m((async()=>{await B()})),(e,t)=>R.value.length>0?(I(),v(c(J),{key:0,open:y.value,title:c(a).baseText("workflowProductionChecklist.title"),actions:R.value,"ignore-all-label":c(a).baseText("workflowProductionChecklist.turnOffWorkflowSuggestions"),notice:C.value?c(a).baseText("workflowProductionChecklist.readOnlyNotice"):"","popover-alignment":"end",onActionClick:L,onIgnoreClick:F,onIgnoreAll:V,"onUpdate:open":U},null,8,["open","title","actions","ignore-all-label","notice"])):r("",!0)}}),ia=w({__name:"IntersectionObserver",props:{threshold:{default:0},enabled:{type:Boolean,default:!1},eventBus:{}},emits:["observed"],setup(e,{emit:t}){const a=e,o=t,n=u(null),s=u(null);return d((()=>{a.enabled&&n.value&&n.value.disconnect()})),m((()=>{if(!a.enabled)return;const e={root:s.value,rootMargin:"0px",threshold:a.threshold},t=new IntersectionObserver((e=>{e.forEach((({target:e,isIntersecting:t})=>{o("observed",{el:e,isIntersecting:t})}))}),e);n.value=t,a.eventBus.on("observe",(e=>{e&&t.observe(e)})),a.eventBus.on("unobserve",(e=>{t.unobserve(e)}))})),(e,t)=>(I(),i("div",{ref_key:"root",ref:s},[b(e.$slots,"default")],512))}}),ra=ia,la=w({__name:"IntersectionObserved",props:{enabled:{type:Boolean,default:!1},eventBus:{}},setup(e){const t=e,a=u(null);return m((async()=>{t.enabled&&(await l(),t.eventBus.emit("observe",a.value))})),d((()=>{t.enabled&&t.eventBus.emit("unobserve",a.value)})),(e,t)=>(I(),i("span",{ref_key:"observed",ref:a},[b(e.$slots,"default")],512))}}),ca=la,ua=a(_t(),1),da={class:"tags"},fa=["onClick"],pa=w({__name:"TagsContainer",props:{tagIds:{},tagsById:{},limit:{default:20},clickable:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const a=e,o=t,s=u(320),r=oe(),f=u({}),w=u(),g=n((()=>({"max-width":`${s.value}px`}))),b=n((()=>{const e=a.tagIds.map((e=>a.tagsById[e])).filter(Boolean);let t=a.limit?e.slice(0,a.limit):e;t=t.map((e=>({...e,hidden:a.responsive&&!f.value[e.id]})));let o=t.length;if(a.responsive&&(o=Object.values(f.value).reduce(((e,t)=>t?e+1:e),0)),o<e.length){const a=e.slice(o),n=a.reduce(((e,t)=>e?`${e}, ${t.name}`:t.name),""),s={id:"count",name:`+${a.length}`,title:n,isCount:!0};t.splice(o,0,s)}return t})),_=()=>{const e=w.value?.$el?.parentNode;e&&(s.value=0,l((()=>{s.value=e.clientWidth})))},x=(0,ua.default)(_,100),T=({el:e,isIntersecting:t})=>{e.dataset.id&&(f.value={...f.value,[e.dataset.id]:t})};return m((()=>{_(),window.addEventListener("resize",x)})),d((()=>{window.removeEventListener("resize",x)})),(t,n)=>(I(),v(ra,{ref_key:"tagsContainer",ref:w,threshold:1,class:"tags-container",style:k(g.value),enabled:e.responsive,"event-bus":c(r),onObserved:T},{default:y((()=>[R("span",da,[(I(!0),i(h,null,W(b.value,(t=>(I(),i("span",{key:t.id,class:M({clickable:!t.hidden}),onClick:e=>((e,t)=>{a.clickable&&e.stopPropagation(),t.hidden||o("click",t.id)})(e,t)},[t.isCount?(I(),v(c(Z),{key:0,title:t.title,text:t.name,clickable:!1,class:"count-container"},null,8,["title","text"])):(I(),v(ca,{key:1,class:M({hideTag:t.hidden}),"data-id":t.id,enabled:e.responsive,"event-bus":c(r)},{default:y((()=>[p(c(Z),{title:t.name,text:t.name,clickable:e.clickable},null,8,["title","text","clickable"])])),_:2},1032,["class","data-id","enabled","event-bus"]))],10,fa)))),128))])])),_:1},8,["style","enabled","event-bus"]))}}),wa=le(pa,[["__scopeId","data-v-8ecf8b55"]]),va=w({__name:"WorkflowTagsContainer",props:{tagIds:{},limit:{},clickable:{type:Boolean},responsive:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const a=t,o=_e(),s=n((()=>o.tagsById));function i(e){a("click",e)}return(t,a)=>(I(),v(wa,{"tag-ids":e.tagIds,"tags-by-id":s.value,limit:e.limit,clickable:e.clickable,responsive:e.responsive,onClick:i},null,8,["tag-ids","tags-by-id","limit","clickable","responsive"]))}}),ma=va,ha=a(ye(),1),ga=(e,t)=>e??("string"==typeof t?t:void 0),ba=w({__name:"ActionsDropdownMenu",props:{workflowPermissions:{},isNewWorkflow:{type:Boolean},isArchived:{type:Boolean},id:{},name:{},tags:{},currentFolder:{},meta:{}},setup(e,{expose:t}){const a=e,o=u(),s=Xe(),r=$(),l=z(),d=we(),f=He(),w=Ot(),v=xe(),m=Be(),h=_(),g=kt(),b=_e(),k=ze(),y=Ve(),x=Ee(),T=oe(),W=be(),E=n((()=>l.meta&&(l.meta.nodeView||!0===l.meta.keepWorkflowAlive))),j=n((()=>[wt.EXECUTION_HOME.toString(),wt.WORKFLOW_EXECUTIONS.toString(),wt.EXECUTION_PREVIEW].includes(l.name||""))),S=n((()=>w.shouldBeReadOnly)),C=n((()=>k.isEnterpriseFeatureEnabled[it.Sharing])),O=n((()=>{const e=[{id:ht.DOWNLOAD,label:r.baseText("menuActions.download"),disabled:!E.value}];return C.value&&e.push({id:ht.SHARE,label:r.baseText("workflowDetails.share"),disabled:!E.value}),a.workflowPermissions.move&&d.isTeamProjectFeatureEnabled&&e.push({id:ht.CHANGE_OWNER,label:r.baseText("workflows.item.changeOwner"),disabled:a.isNewWorkflow}),S.value||a.isArchived||f.preferences.branchReadOnly||e.push({id:ht.RENAME,label:r.baseText("generic.rename"),disabled:!E.value||!0!==a.workflowPermissions.update}),(!0!==a.workflowPermissions.update||S.value||a.isArchived||f.preferences.branchReadOnly)&&!a.isNewWorkflow||(e.unshift({id:ht.DUPLICATE,label:r.baseText("menuActions.duplicate"),disabled:!E.value||!a.id}),e.unshift({id:ht.EDIT_DESCRIPTION,label:r.baseText("menuActions.editDescription"),disabled:!E.value||!a.id}),e.push({id:ht.IMPORT_FROM_URL,label:r.baseText("menuActions.importFromUrl"),disabled:!E.value||j.value},{id:ht.IMPORT_FROM_FILE,label:r.baseText("menuActions.importFromFile"),disabled:!E.value||j.value})),$e(["rbac"],{rbac:{scope:"sourceControl:push"}})&&e.push({id:ht.PUSH,label:r.baseText("menuActions.push"),disabled:!f.isEnterpriseSourceControlEnabled||!E.value||j.value||f.preferences.branchReadOnly}),e.push({id:ht.SETTINGS,label:r.baseText("generic.settings"),disabled:!E.value||a.isNewWorkflow}),(!0===a.workflowPermissions.delete&&!S.value&&!f.preferences.branchReadOnly||a.isNewWorkflow)&&(a.isArchived?(e.push({id:ht.UNARCHIVE,label:r.baseText("menuActions.unarchive"),disabled:!E.value||a.isNewWorkflow}),e.push({id:ht.DELETE,label:r.baseText("menuActions.delete"),disabled:!E.value||a.isNewWorkflow,customClass:h.deleteItem,divided:!0})):e.push({id:ht.ARCHIVE,label:r.baseText("menuActions.archive"),disabled:!E.value||a.isNewWorkflow,customClass:h.deleteItem,divided:!0})),e}));async function N(e){switch(e){case ht.EDIT_DESCRIPTION:{const e=ga(a.id,l.params.name);if(!e)return;const t=v.getWorkflowById(e).description;m.openModalWithData({name:at,data:{workflowId:e,workflowDescription:t}});break}case ht.DUPLICATE:m.openModalWithData({name:ct,data:{id:a.id,name:a.name,tags:a.tags,parentFolderId:a.currentFolder?.id}});break;case ht.RENAME:Ne.emit("renameWorkflow");break;case ht.DOWNLOAD:{const e=await x.getWorkflowDataToSave(),{tags:t,...o}=e,n={...o,meta:{...a.meta,instanceId:g.instanceId},tags:(t??[]).map((e=>{const{usageCount:t,...a}=b.tagsById[e];return a}))},s=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});let i=a.name||"unsaved_workflow";i=Dt(i),qe.track("User exported workflow",{workflow_id:e.id}),(0,ha.default)(s,i+".json");break}case ht.IMPORT_FROM_URL:m.openModal(lt);break;case ht.IMPORT_FROM_FILE:Ne.emit("importWorkflowFromFile");break;case ht.PUSH:try{Pt.push({query:{...l.query,sourceControl:"push"}})}catch(t){"source_control_not_connected"===t.message?s.showError({...t,message:""},r.baseText("settings.sourceControl.error.not.connected.title"),r.baseText("settings.sourceControl.error.not.connected.message")):s.showError(t,r.baseText("error"))}break;case ht.SETTINGS:m.openModal(st);break;case ht.SHARE:m.openModalWithData({name:Qe,data:{id:a.id}}),W.track("User opened sharing modal",{workflow_id:a.id,user_id_sharer:y.currentUser?.id,sub_view:l.name===wt.WORKFLOWS?"Workflows listing":"Workflow editor"});break;case ht.ARCHIVE:Ne.emit("archiveWorkflow");break;case ht.UNARCHIVE:Ne.emit("unarchiveWorkflow");break;case ht.DELETE:Ne.emit("deleteWorkflow");break;case ht.CHANGE_OWNER:{const e=ga(a.id,l.params.name);if(!e)return;T.once("resource-moved",(async()=>await Pt.push({name:wt.WORKFLOWS}))),m.openModalWithData({name:ke,data:{resource:v.workflowsById[e],resourceType:Ie.Workflow,resourceTypeLabel:r.baseText("generic.workflow").toLowerCase(),eventBus:T}});break}}}return t({importFileRef:o}),(e,t)=>(I(),i("div",{class:M([c(h).group])},[R("input",{ref_key:"importFileRef",ref:o,class:M(c(h).hiddenInput),type:"file","data-test-id":"workflow-import-input",onChange:t[0]||(t[0]=e=>function(){const e=o.value;if(e?.files&&0!==e.files.length){const t=new FileReader;t.onload=()=>{let a;try{a=JSON.parse(t.result)}catch(o){return void s.showMessage({title:r.baseText("mainSidebar.showMessage.handleFileImport.title"),message:r.baseText("mainSidebar.showMessage.handleFileImport.message"),type:"error"})}finally{t.onload=null,e.value=""}Ne.emit("importWorkflowData",{data:a})},t.readAsText(e.files[0])}}())},null,34),p(c(X),{items:O.value,"data-test-id":"workflow-menu",onSelect:N},null,8,["items"])],2))}}),ka=le(ba,[["__cssModules",{$style:{deleteItem:"_deleteItem_ldsb8_125",group:"_group_ldsb8_129",hiddenInput:"_hiddenInput_ldsb8_134"}}]]),ya={key:0},_a={key:1},xa={key:2},Ta={key:3},Ia=w({__name:"WorkflowHistoryButton",props:{workflowId:{},isNewWorkflow:{type:Boolean}},setup(e){const t=$(),a=e,o=Be(),l=Ae(),d=u(!1),{debounce:f}=xt(),w=f((()=>{d.value=!1}),{debounceTime:ut,trailing:!0});g((()=>o.isActionActive.workflowSaving),(e=>{e?d.value=!0:w()}));const m=n((()=>({name:wt.WORKFLOW_HISTORY,params:{workflowId:a.workflowId}}))),h=n((()=>l.autoSaveState===vt.Scheduled)),b=n((()=>a.isNewWorkflow||h.value||d.value));return(a,o)=>e.workflowId?(I(),v(c(ee),{key:0,placement:"bottom","show-after":300},{content:y((()=>[e.isNewWorkflow?(I(),i("span",ya,s(c(t).baseText("workflowHistory.button.tooltip.empty")),1)):h.value?(I(),i("span",_a,s(c(t).baseText("workflowHistory.button.tooltip.scheduled")),1)):d.value?(I(),i("span",xa,s(c(t).baseText("workflowHistory.button.tooltip.saving")),1)):(I(),i("span",Ta,s(c(t).baseText("workflowHistory.button.tooltip")),1))])),default:y((()=>[(I(),v(x(b.value?"div":c(ae)),{to:b.value?void 0:m.value},{default:y((()=>[p(c(Y),{class:"n8n-button--highlight",variant:"ghost",disabled:b.value,loading:d.value,"data-test-id":"workflow-history-button",icon:"history",size:"medium"},null,8,["disabled","loading"])])),_:1},8,["to"]))])),_:1})):r("",!0)}}),Wa=Ia,Ea=le(w({__name:"CollaborationPane",setup(e){const t=Ot(),a=Ve();g(U(),(e=>{"hidden"===e?t.stopHeartbeat():t.startHeartbeat()}));const o=n((()=>t.collaborators.length>1)),s=n((()=>{const e=t.collaborators.map((({user:e})=>e)),o=e.findIndex((e=>e.id===a.currentUser?.id));if(o<1)return{defaultGroup:e};const[n]=e.splice(o,1);return{defaultGroup:[n,...e]}})),l=n((()=>a.currentUser?.email));return m((()=>{t.initialize()})),d((()=>{t.terminate()})),(e,t)=>o.value?(I(),i("div",{key:0,class:M(`collaboration-pane-container ${e.$style.container}`),"data-test-id":"collaboration-pane"},[p(c(K),{users:s.value,"current-user-email":l.value},null,8,["users","current-user-email"])],2)):r("",!0)}}),[["__cssModules",{$style:{container:"_container_cvwuq_125"}}]]),ja={"data-test-id":"workflow-active-version-info"},Sa=function(e){return e.PUBLISH="publish",e.NAME_VERSION="name-version",e.UNPUBLISH="unpublish",e}(Sa||{}),Ca=w({__name:"WorkflowHeaderDraftPublishActions",props:{id:{},tags:{},name:{},meta:{},currentFolder:{},isArchived:{type:Boolean},isNewWorkflow:{type:Boolean},workflowPermissions:{}},setup(e,{expose:t}){const a=e,o=S("actionsMenu"),l=Be(),f=Fe(),w=Ot(),g=we(),b=fe(),k=ze(),_=$(),x=ie(),T=Xe(),W=Ae(),{saveCurrentWorkflow:j,cancelAutoSave:C}=Re({router:x}),O=$t(),N=n((()=>k.isEnterpriseFeatureEnabled[it.NamedVersions])),A=u(!1),D=n((()=>o.value?.importFileRef)),P=n((()=>De(f.workflowTriggerNodes))),B=n((()=>P.value.length>0)),L=n((()=>{const e=!!f.workflow.activeVersion,t=f.workflow.versionId!==f.workflow.activeVersion?.versionId||l.hasUnsavedWorkflowChanges;return e?B.value?f.nodesIssuesExist?"published-node-issues":t?"published-with-changes":"published-no-changes":"published-invalid-trigger":B.value&&!f.nodesIssuesExist?"not-published-eligible":"not-published-not-eligible"})),F=n((()=>w.shouldBeReadOnly)),V=n((()=>a.workflowPermissions.update)),U=n((()=>a.workflowPermissions.publish)),H=n((()=>a.workflowPermissions.unpublish)),z=n((()=>g.currentProject?.type===ge.Personal)),K=async()=>{let e=!1;if(W.autoSaveState===vt.InProgress&&W.pendingSave){A.value=!0;try{await W.pendingSave,e=!0}catch{}finally{A.value=!1}}else W.autoSaveState===vt.Scheduled&&C();return(!e||l.stateIsDirty||a.isNewWorkflow)&&(A.value=!0,e=await j({},!0),A.value=!1),e},G=async()=>{(!l.stateIsDirty&&!a.isNewWorkflow||await K())&&l.openModalWithData({name:Ye,data:{}})},J=n((()=>{if(!U.value){const e={text:_.baseText("workflows.publish"),enabled:!1,showIndicator:!1,indicatorClass:"",tooltip:z.value?_.baseText("workflows.publish.personalSpaceRestricted"):_.baseText("workflows.publish.permissionDenied"),showVersionInfo:!1};return f.workflow.activeVersion?{...e,showIndicator:!0,showVersionInfo:!0,indicatorClass:"published"}:e}return a.isNewWorkflow?{text:_.baseText("workflows.publish"),enabled:B.value&&!f.nodesIssuesExist,showIndicator:!1,indicatorClass:"",tooltip:B.value?f.nodesIssuesExist?_.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title",{interpolate:{count:f.nodesWithIssues.length},adjustToNumber:f.nodesWithIssues.length}):"":_.baseText("workflows.publishModal.noTriggerMessage"),showVersionInfo:!1}:{"not-published-not-eligible":{text:_.baseText("workflows.publish"),enabled:!1,showIndicator:!1,indicatorClass:"",tooltip:B.value?_.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title",{interpolate:{count:f.nodesWithIssues.length},adjustToNumber:f.nodesWithIssues.length}):_.baseText("workflows.publishModal.noTriggerMessage"),showVersionInfo:!1},"not-published-eligible":{text:_.baseText("workflows.publish"),enabled:!0,showIndicator:!1,indicatorClass:"",tooltip:"",showVersionInfo:!1},"published-no-changes":{text:_.baseText("generic.published"),enabled:!1,showIndicator:!0,indicatorClass:"published",tooltip:"",showVersionInfo:!0},"published-with-changes":{text:_.baseText("workflows.publish"),enabled:!0,showIndicator:!0,indicatorClass:"changes",tooltip:_.baseText("workflows.publishModal.changes"),showVersionInfo:!1},"published-node-issues":{text:_.baseText("workflows.publish"),enabled:!1,showIndicator:!0,indicatorClass:"error",tooltip:_.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title",{interpolate:{count:f.nodesWithIssues.length},adjustToNumber:f.nodesWithIssues.length}),showVersionInfo:!0},"published-invalid-trigger":{text:_.baseText("workflows.publish"),enabled:!1,showIndicator:!0,indicatorClass:"changes",tooltip:_.baseText("workflows.publishModal.noTriggerMessage"),showVersionInfo:!0}}[L.value]})),Z=n((()=>!a.isNewWorkflow&&(a.isArchived||!V.value&&!U.value))),Q=n((()=>a.isNewWorkflow||F.value||!J.value.enabled||!U.value)),te=n((()=>f.workflow.activeVersion)),ae=n((()=>te.value?te.value.name??Lt(te.value.versionId):"")),ne=n((()=>Bt(te.value?.workflowPublishHistory??[])?.createdAt)),se=n((()=>{const e=[{id:Sa.PUBLISH,label:_.baseText("workflows.publish"),shortcut:{shiftKey:!0,keys:["P"]},disabled:Q.value}];return N.value&&e.push({id:Sa.NAME_VERSION,label:_.baseText("generic.nameVersion"),shortcut:{metaKey:!0,keys:["S"]},disabled:!V.value||!f.workflow.versionId}),e.push({id:Sa.UNPUBLISH,label:_.baseText("workflows.unpublish"),disabled:!te.value||F.value||!H.value,divided:!0,shortcut:{metaKey:!0,keys:["U"]}}),e})),re=async()=>{if((l.stateIsDirty||a.isNewWorkflow)&&!(await K()))return;const e=f.workflow.versionId,t=f.versionData,o=oe(),n=u({versionId:e,versionName:t?.name??void 0,description:t?.description??void 0,modalTitle:_.baseText("workflowHistory.nameVersionModal.title"),submitButtonLabel:_.baseText("workflowHistory.nameVersionModal.confirmButton"),submitting:!1,eventBus:o});o.once("submit",(async t=>{n.value.submitting=!0;try{await b.updateWorkflowHistoryVersion(a.id,e,{name:t.name,description:t.description}),f.setWorkflowVersionData({versionId:e,name:t.name,description:t.description}),T.showMessage({title:_.baseText("workflowHistory.action.nameVersion.success.title"),type:"success"}),l.closeModal(et)}catch(o){T.showError(o,_.baseText("workflowHistory.action.nameVersion.error.title"))}finally{n.value.submitting=!1}})),l.openModalWithData({name:et,data:n.value})},le=()=>{if(!te.value)return void T.showMessage({title:_.baseText("workflowHistory.action.unpublish.notAvailable"),type:"warning"});const e=oe();e.once("unpublish",(async()=>{const e=await O.unpublishWorkflowFromHistory(a.id);l.closeModal(bt),e&&T.showMessage({title:_.baseText("workflowHistory.action.unpublish.success.title"),type:"success"})})),l.openModalWithData({name:bt,data:{versionName:te.value.name,eventBus:e}})},ce=async e=>{switch(e){case Sa.PUBLISH:await G();break;case Sa.NAME_VERSION:await re();break;case Sa.UNPUBLISH:le()}};return Vt({shift_p:{disabled:()=>Q.value,run:async()=>{await G()}},"ctrl+s":{disabled:()=>!N.value||!V.value||!f.workflow.versionId,run:async()=>{await re()}},"ctrl+u":{disabled:()=>!te.value||!U.value||F.value,run:le}}),m((()=>{Ne.on("publishWorkflow",G),Ne.on("unpublishWorkflow",le)})),d((()=>{Ne.off("publishWorkflow",G),Ne.off("unpublishWorkflow",le)})),t({importFileRef:D}),(t,o)=>(I(),i("div",{class:M(t.$style.container)},[e.isNewWorkflow?r("",!0):(I(),v(Ea,{key:0})),Z.value?r("",!0):(I(),i("div",{key:1,class:M(t.$style.publishButtonWrapper)},[R("div",{class:M(t.$style.buttonGroup)},[p(c(ee),{disabled:"not-published-eligible"===L.value&&a.workflowPermissions.publish,"show-after":300,offset:15},{content:y((()=>[R("div",null,[J.value.tooltip?(I(),i(h,{key:0},[E(s(J.value.tooltip)+" ",1),o[0]||(o[0]=R("br",null,null,-1))],64)):r("",!0),te.value&&J.value.showVersionInfo?(I(),i(h,{key:1},[R("span",ja,s(ae.value),1),o[1]||(o[1]=R("br",null,null,-1)),E(s(c(_).baseText("workflowHistory.item.active"))+" ",1),ne.value?(I(),v(Nt,{key:0,date:ne.value},null,8,["date"])):r("",!0)],64)):r("",!0)])])),default:y((()=>[p(c(q),{class:M(t.$style.groupButtonLeft),loading:A.value,disabled:!J.value.enabled||Q.value,variant:"subtle","data-test-id":"workflow-open-publish-modal-button",onClick:G},{default:y((()=>[R("div",{class:M([t.$style.flex])},[J.value.showIndicator?(I(),i("span",{key:0,"data-test-id":"workflow-active-version-indicator",class:M({[t.$style.indicatorDot]:!0,[t.$style.indicatorPublished]:"published"===J.value.indicatorClass,[t.$style.indicatorChanges]:"changes"===J.value.indicatorClass,[t.$style.indicatorIssues]:"error"===J.value.indicatorClass})},null,2)):r("",!0),R("span",{class:M(["published-no-changes"===L.value&&t.$style.indicatorPublishedText])},s(J.value.text),3)],2)])),_:1},8,["class","loading","disabled"])])),_:1},8,["disabled"]),p(c(X),{items:se.value,placement:"bottom-end","data-test-id":"version-menu",onSelect:ce},{activator:y((()=>[p(c(Y),{class:M(t.$style.groupButtonRight),variant:"subtle",icon:"chevron-down","data-test-id":"version-menu-button"},null,8,["class"])])),_:1},8,["items"])],2)],2)),p(Wa,{"workflow-id":a.id,"is-new-workflow":e.isNewWorkflow},null,8,["workflow-id","is-new-workflow"]),p(ka,{id:e.id,ref:"actionsMenu","workflow-permissions":e.workflowPermissions,"is-new-workflow":e.isNewWorkflow,"is-archived":e.isArchived,name:e.name,tags:e.tags,"current-folder":e.currentFolder,meta:e.meta},null,8,["id","workflow-permissions","is-new-workflow","is-archived","name","tags","current-folder","meta"])],2))}}),Oa=le(Ca,[["__cssModules",{$style:{container:"_container_joo8n_125",activeVersionIndicator:"_activeVersionIndicator_joo8n_129",icon:"_icon_joo8n_133",publishButtonWrapper:"_publishButtonWrapper_joo8n_137",buttonGroup:"_buttonGroup_joo8n_143",groupButtonLeft:"_groupButtonLeft_joo8n_147",groupButtonRight:"_groupButtonRight_joo8n_159",indicatorDot:"_indicatorDot_joo8n_168",indicatorPublished:"_indicatorPublished_joo8n_176",indicatorPublishedText:"_indicatorPublishedText_joo8n_180",indicatorChanges:"_indicatorChanges_joo8n_184",indicatorIssues:"_indicatorIssues_joo8n_188",flex:"_flex_joo8n_192"}}]]),Na={class:"tags","data-test-id":"workflow-tags-container"},Aa={key:1},Da=w({__name:"WorkflowDetails",props:{id:{},tags:{},name:{},meta:{},scopes:{},active:{type:Boolean},currentFolder:{},isArchived:{type:Boolean},description:{}},setup(e){const t={XS:150,SM:200,MD:250,LG:500,XL:1e3},a=e,o=_(),l=ze(),f=Be(),w=Fe(),b=xe(),k=we(),x=Ot(),T=He(),W=Ct(),j=$(),C=ie(),O=z(),N=$(),A=be(),D=We(),P=Xe(),B=Oe(),F=je(),V=L(mt,null),U=u(!1),K=u([]),X=S("workflowHeaderActions"),q=oe(),G=n((()=>!w.isWorkflowSaved[a.id])),J=n((()=>pt(a.scopes).workflow)),Y=n((()=>T.preferences.branchReadOnly||x.shouldBeReadOnly)),Z=n((()=>G.value?Y.value:Y.value||a.isArchived||!J.value.update)),Q=n((()=>a.tags)),ee=n((()=>{if(!G.value&&a.currentFolder)return a.currentFolder;const e=O.query.parentFolderId;return e?W.getCachedFolder(e):null}));function te(){Z.value||(K.value=[...a.tags],U.value=!0,setTimeout((()=>{re.value?.forceCancel(),q.emit("focus")}),0))}function ae(){const e=a.tags,t=K.value;((e,t)=>{if(e.length!==t.length)return!0;const a=new Set(e);return t.reduce(((e,t)=>e||!a.has(t)),!1)})(e,t)?(Z.value||(x.requestWriteAccess(),V?.value&&V.value.setTags(t),f.markStateDirty("metadata"),A.track("User edited workflow tags",{workflow_id:a.id,new_tag_count:t.length})),U.value=!1):U.value=!1}function se(){U.value=!1}g((()=>a.id),(()=>{U.value=!1,re.value?.forceCancel()}));const re=S("renameInput");function le(){re.value?.forceFocus&&re.value.forceFocus()}function ce(e){const t=e.trim();if(!t)return P.showMessage({title:N.baseText("renameAction.emptyName.title"),message:N.baseText("renameAction.emptyName.message"),type:"error"}),void re.value?.forceCancel();t!==a.name?(F.setWorkflowName({newName:t,setStateDirty:!0}),B.setDocumentTitle(t,"IDLE"),re.value?.forceCancel()):re.value?.forceCancel()}async function ue(){if(a.active&&"confirm"!==await D.confirm(N.baseText("mainSidebar.confirmMessage.workflowArchive.message",{interpolate:{workflowName:a.name}}),N.baseText("mainSidebar.confirmMessage.workflowArchive.headline"),{type:"warning",confirmButtonText:N.baseText("mainSidebar.confirmMessage.workflowArchive.confirmButtonText"),cancelButtonText:N.baseText("mainSidebar.confirmMessage.workflowArchive.cancelButtonText")}))return;try{const e=a.id===w.workflowId?w.workflowChecksum:void 0;await w.archiveWorkflow(a.id,e)}catch(t){return void P.showError(t,N.baseText("generic.archiveWorkflowError"))}f.markStateClean(),P.showMessage({title:N.baseText("mainSidebar.showMessage.handleArchive.title",{interpolate:{workflowName:a.name}}),type:"success"});const e=b.getWorkflowById(a.id);e?.homeProject?.type===ge.Team?await C.push({name:wt.PROJECTS_WORKFLOWS,params:{projectId:e.homeProject.id}}):await C.push({name:wt.WORKFLOWS})}async function de(){await w.unarchiveWorkflow(a.id),P.showMessage({title:N.baseText("mainSidebar.showMessage.handleUnarchive.title",{interpolate:{workflowName:a.name}}),type:"success"})}async function fe(){if("confirm"!==await D.confirm(N.baseText("mainSidebar.confirmMessage.workflowDelete.message",{interpolate:{workflowName:a.name}}),N.baseText("mainSidebar.confirmMessage.workflowDelete.headline"),{type:"warning",confirmButtonText:N.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),cancelButtonText:N.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText")}))return;const e=b.getWorkflowById(a.id),t=e?.homeProject?.type===ge.Team;try{await b.deleteWorkflow(a.id)}catch(o){return void P.showError(o,N.baseText("generic.deleteWorkflowError"))}f.markStateClean(),B.reset(),P.showMessage({title:N.baseText("mainSidebar.showMessage.handleSelect1.title",{interpolate:{workflowName:a.name}}),type:"success"}),t&&e?.homeProject?await C.push({name:wt.PROJECTS_WORKFLOWS,params:{projectId:e.homeProject.id}}):await C.push({name:wt.WORKFLOWS})}const pe=e=>{e.href&&C.push(e.href).catch((e=>{P.showError(e,j.baseText("folders.open.error.title"))}))},ve=()=>{X.value?.importFileRef&&X.value.importFileRef.click()};return m((()=>{Ne.on("importWorkflowFromFile",ve),Ne.on("archiveWorkflow",ue),Ne.on("unarchiveWorkflow",de),Ne.on("deleteWorkflow",fe),Ne.on("renameWorkflow",le),Ne.on("addTag",te)})),d((()=>{Ne.off("importWorkflowFromFile",ve),Ne.off("archiveWorkflow",ue),Ne.off("unarchiveWorkflow",de),Ne.off("deleteWorkflow",fe),Ne.off("renameWorkflow",le),Ne.off("addTag",te)})),(a,n)=>(I(),i("div",{class:M(c(o).container)},[p(na,{"value-x-s":15,"value-s-m":25,"value-m-d":50,class:"name-container","data-test-id":"canvas-breadcrumbs"},{default:y((({bp:a})=>[p(Gt,{"current-folder":ee.value,"current-folder-as-link":!0,onItemSelected:pe},{append:y((()=>[c(k).currentProject??c(k).personalProject?(I(),i("span",{key:0,class:M(c(o)["path-separator"])},"/",2)):r("",!0),(I(),v(c(ne),{ref_key:"renameInput",ref:re,key:e.id,placeholder:"Workflow name","data-test-id":"workflow-name-input",class:"name","model-value":e.name,"max-length":c(128),"max-width":t[a],"read-only":Z.value,disabled:Z.value,"onUpdate:modelValue":ce},null,8,["model-value","max-length","max-width","read-only","disabled"]))])),_:2},1032,["current-folder"])])),_:1}),R("span",Na,[c(l).areTagsEnabled?(I(),i(h,{key:0},[U.value&&!Z.value?(I(),v(At,{key:0,ref:"dropdown",modelValue:K.value,"onUpdate:modelValue":n[0]||(n[0]=e=>K.value=e),"event-bus":c(q),placeholder:c(j).baseText("workflowDetails.chooseOrCreateATag"),class:"tags-edit","data-test-id":"workflow-tags-dropdown",onBlur:ae,onEsc:se},null,8,["modelValue","event-bus","placeholder"])):0!==e.tags.length||Z.value?(I(),v(ma,{key:e.id,"tag-ids":Q.value,clickable:!0,responsive:!0,"data-test-id":"workflow-tags",onClick:te},null,8,["tag-ids"])):(I(),i("div",Aa,[R("span",{class:"add-tag clickable","data-test-id":"new-tag-link",onClick:te}," + "+s(c(j).baseText("workflowDetails.addTag")),1)]))],64)):r("",!0),R("span",{class:M(c(o)["header-controls"])},[e.isArchived?(I(),v(c(H),{key:0,class:"ml-3xs",theme:"tertiary",bold:"","data-test-id":"workflow-archived-tag"},{default:y((()=>[E(s(c(N).baseText("workflows.item.archived")),1)])),_:1})):r("",!0)],2)]),p(Yt,{class:"actions"},{default:y((()=>[G.value?r("",!0):(I(),v(sa,{key:0,workflow:c(w).workflow},null,8,["workflow"])),p(Oa,{id:e.id,ref:"workflowHeaderActions",tags:e.tags,name:e.name,meta:e.meta,"is-archived":e.isArchived,"is-new-workflow":G.value,"workflow-permissions":J.value},null,8,["id","tags","name","meta","is-archived","is-new-workflow","workflow-permissions"])])),_:1})],2))}}),Pa=le(Da,[["__cssModules",{$style:{container:"_container_h2714_125","path-separator":"_path-separator_h2714_134",closeNodeViewDiscovery:"_closeNodeViewDiscovery_h2714_140","header-controls":"_header-controls_h2714_147"}}],["__scopeId","data-v-25155f8e"]]),D(),Ma=w({name:"github-button",props:{href:String,ariaLabel:String,title:String,dataIcon:String,dataColorScheme:String,dataSize:String,dataShowCount:String,dataText:String},render:function(){const e={ref:"_"};for(const t in this.$props)e[T(t)]=this.$props[t];return f("span",[o(this.$slots,"default")?f("a",e,this.$slots.default()):f("a",e)])},mounted:function(){this.paint()},beforeUpdate:function(){this.reset()},updated:function(){this.paint()},beforeUnmount:function(){this.reset()},methods:{paint:function(){if(this.$el.lastChild!==this.$refs._)return;const e=this.$el.appendChild(document.createElement("span")),a=this;G((()=>t.import("./buttons.esm-legacy-BLqZgz5l.js")),void 0).then((function(t){a.$el.lastChild===e&&t.render(e.appendChild(a.$refs._),(function(t){a.$el.lastChild===e&&e.parentNode.replaceChild(t,e)}))}))},reset:function(){null!=this.$refs._&&this.$el.replaceChild(this.$refs._,this.$el.lastChild)}}}),Ra=le(w({__name:"MainHeader",setup(e){const t=ie(),a=z(),o=$(),l=Qt({router:t}),f=Xe(),w=ue(),h=Be(),b=Fe(),k=xe(),_=Tt(),x=ze(),T=u(ft.WORKFLOW),W=u(""),j=u(""),S=u(!1),C=V(Je,!1),O=[wt.EVALUATION_EDIT,wt.EVALUATION_RUNS_DETAIL],D=[wt.WORKFLOW,wt.NEW_WORKFLOW,wt.EXECUTION_DEBUG],P=[wt.EXECUTION_HOME,wt.WORKFLOW_EXECUTIONS,wt.EXECUTION_PREVIEW],F=n((()=>[{value:ft.WORKFLOW,label:o.baseText("generic.editor")},{value:ft.EXECUTIONS,label:o.baseText("generic.executions")},{value:ft.EVALUATION,label:o.baseText("generic.tests")}])),U=n((()=>w.activeNode)),H=n((()=>Boolean(U.value&&"n8n-nodes-base.stickyNote"!==U.value.type))),K=n((()=>b.workflow)),X=Ut(nt),q=L(mt,null),G=n((()=>q?.value?.tags??[])),J=n((()=>!(!a.meta.nodeView&&!a.meta.keepWorkflowAlive))),Y=n((()=>x.isQueueModeEnabled&&x.isWorkerViewAvailable)),Z=n((()=>x.isTelemetryEnabled)),Q=n((()=>!Y.value&&!x.settings.inE2ETests&&!C.value&&Z.value)),ee=n((()=>{if(K.value.parentFolder)return{id:K.value.parentFolder.id,name:K.value.parentFolder.name,parentFolder:K.value.parentFolder.parentFolderId??void 0}}));function ae(e,t){const a=[{routes:O,tab:ft.EVALUATION},{routes:P,tab:ft.EXECUTIONS},{routes:D,tab:ft.WORKFLOW}];if(e.name&&"string"==typeof(o=e.name)&&[O,D,P].flat().includes(o)){const t=a.find((({routes:t})=>t.includes(e.name)));t&&(T.value=t.tab)}var o;"string"==typeof e.params.name&&(W.value=e.params.name),t?.name===wt.EXECUTION_PREVIEW&&e.params.name===t.params.name&&"string"==typeof t.params.executionId&&(j.value=t.params.executionId)}function oe(e,o){const n=o.ctrlKey||o.metaKey;switch(e){case ft.WORKFLOW:!async function(e){let o;if(o=W.value&&""!==W.value?{name:wt.WORKFLOW,params:{name:W.value},query:a.query}:{name:wt.NEW_WORKFLOW,query:a.query},e){const{href:e}=t.resolve(o);window.open(e,"_blank")}else a.name!==o.name&&(a.name===wt.NEW_WORKFLOW&&(S.value?h.markStateDirty():h.markStateClean()),T.value=ft.WORKFLOW,await t.push(o))}(n);break;case ft.EXECUTIONS:!async function(e){const o=_.activeExecution?.id||j.value,n=o?{name:wt.EXECUTION_PREVIEW,params:{name:X.value,executionId:o},query:a.query}:{name:wt.EXECUTION_HOME,params:{name:X.value},query:a.query};if(e){const{href:e}=t.resolve(n);window.open(e,"_blank")}else a.name!==n.name&&(S.value=h.stateIsDirty,W.value=X.value,T.value=ft.EXECUTIONS,await t.push(n))}(n);break;case ft.EVALUATION:!async function(e){const o={name:wt.EVALUATION_EDIT,params:{name:X.value},query:a.query};if(e){const{href:e}=t.resolve(o);window.open(e,"_blank")}else a.name!==o.name&&(S.value=h.stateIsDirty,W.value=X.value,T.value=ft.EXECUTIONS,await t.push(o))}(n)}}function ne(){C.value=!0}async function se(){if(x.isModuleActive("mcp")&&K.value.settings?.availableInMCP)try{const e=await k.fetchWorkflow(K.value.id);b.setWorkflow(e),f.showToast({title:o.baseText("mcp.workflowDeactivated.title"),message:o.baseText("mcp.workflowDeactivated.message"),type:"info"})}catch(e){f.showError(e,o.baseText("workflowSettings.showError.fetchSettings.title"))}}return g(a,((e,t)=>{ae(e,t)})),A((()=>{l.initialize()})),d((()=>{l.terminate()})),m((async()=>{S.value=h.stateIsDirty,ae(a)})),(e,t)=>(I(),i("div",{class:M(e.$style.container)},[R("div",{class:M({[e.$style["main-header"]]:!0,[e.$style.expanded]:!c(h).sidebarMenuCollapsed})},[B(R("div",{class:M(e.$style["top-menu"])},[K.value?.name?(I(),v(Pa,{key:0,id:K.value.id,tags:G.value,name:K.value.name,meta:K.value.meta,scopes:K.value.scopes,active:K.value.active,"current-folder":ee.value,"is-archived":K.value.isArchived,description:K.value.description,"onWorkflow:deactivated":se},null,8,["id","tags","name","meta","scopes","active","current-folder","is-archived","description"])):r("",!0),Q.value?(I(),i("div",{key:1,class:M([e.$style["github-button"],"hidden-sm-and-down"])},[R("div",{class:M(e.$style["github-button-container"])},[p(c(Ma),{href:c(gt),"data-color-scheme":c(h).appliedTheme,"data-size":"large","data-show-count":"true","aria-label":c(o).baseText("editor.mainHeader.githubButton.label")},{default:y((()=>[E(s(c(o).baseText("generic.star")),1)])),_:1},8,["href","data-color-scheme","aria-label"]),p(c(te),{class:M(e.$style["close-github-button"]),icon:"circle-x",size:"medium",onClick:ne},null,8,["class"])],2)],2)):r("",!0)],2),[[N,!H.value]]),J.value?(I(),v(oa,{key:0,items:F.value,"model-value":T.value,"onUpdate:modelValue":oe},null,8,["items","model-value"])):r("",!0)],2)],2))}}),[["__cssModules",{$style:{container:"_container_19rmf_125","main-header":"_main-header_19rmf_132","top-menu":"_top-menu_19rmf_140","github-button":"_github-button_19rmf_151","close-github-button":"_close-github-button_19rmf_160","github-button-container":"_github-button-container_19rmf_175"}}]]),Ba=w({__name:"AppHeader",setup:e=>(e,t)=>(I(),v(Ra))}),e("default",w({__name:"WorkflowLayout",setup(e){const{layoutProps:t}=function(){const e=z();return{layoutProps:n((()=>e.meta.layoutProps??{}))}}(),a=It(),o=ve();C(Ze,o);const{isLoading:s,workflowId:i,currentWorkflowDocumentStore:l,isDebugRoute:f,initializeData:w,initializeWorkflow:h,handleDebugModeRoute:b,cleanup:k}=function(e){const t=z(),a=ie(),o=$(),s=Xe(),i=Oe(),r=Ke(),l=Fe(),c=xe(),d=Be(),f=de(),p=Le(),w=pe(),v=Et(),m=ze(),h=we(),g=Ce(),b=Ue(),k=Xt(),y=qt(),_=be(),{resetWorkspace:x,initializeWorkspace:T,fitView:I,openWorkflowTemplate:W,openWorkflowTemplateFromJSON:E}=St(),{fetchAndSetParentFolder:j}=jt(),{applyExecutionData:S}=Jt(e),C=u(!0),O=u(),N=F(null);function A(){N.value&&(ce(Me(N.value.workflowId,N.value.workflowVersion)),N.value=null)}const D=n((()=>{const e=t.params.name;return(Array.isArray(e)?e[0]:e)??""})),P=n((()=>"true"===t.query.new)),M=n((()=>t.name===wt.DEMO)),R=n((()=>t.name===wt.TEMPLATE_IMPORT)),B=n((()=>t.name===wt.WORKFLOW_ONBOARDING)),L=n((()=>t.name===wt.EXECUTION_DEBUG));async function V(){let e;if(D.value&&!P.value)e={workflowId:D.value};else{const a=("string"==typeof t.query?.projectId?t.query?.projectId:void 0)??h.personalProject?.id;if(void 0===a)throw new Error("Could not find projectId in the query nor could I find the personal project in the project store");e={projectId:a}}await p.fetchAllCredentialsForWorkflow(e)}async function U(){if(!R.value)return!1;const e=t.params.id;if(!e)return!1;if(A(),"true"===t.query.fromJson){const t=me(e.toString());if(!t)return s.showError(new Error(o.baseText("nodeView.couldntLoadWorkflow.invalidWorkflowObject")),o.baseText("nodeView.couldntImportWorkflow")),await a.replace({name:wt.NEW_WORKFLOW}),!0;await E(t)}else await W(e.toString());const n=l.workflowId;return n&&(N.value=Pe(Me(n))),!0}async function H(){if(L.value&&(i.setDocumentTitle(l.workflowName,"DEBUG"),!l.isInDebugMode)){const e=t.params.executionId;"string"==typeof e&&(await S(e),l.isInDebugMode=!0)}}async function K(e){A(),x(),b.streaming?i.setDocumentTitle(e.name,"AI_BUILDING"):i.setDocumentTitle(e.name,"IDLE");const{workflowDocumentStore:t}=await T(e);N.value=t,r.run("workflow.open",{workflowId:e.id,workflowName:e.name}),I()}async function X(){A(),x();const a=t.query.parentFolderId;await e.getNewWorkflowDataAndMakeShareable(void 0,h.currentProjectId,a),e.setWorkflowId(D.value),N.value=Pe(Me(D.value)),await h.refreshCurrentProject(),await j(a),d.nodeViewInitialized=!0,O.value=D.value,I()}async function q(e){try{const t=await c.fetchWorkflow(e);await K(t),t.parentFolder&&l.setParentFolder(t.parentFolder),t.meta?.onboardingId&&_.track(`User opened workflow from onboarding template with ID ${t.meta.onboardingId}`,{workflow_id:e}),t.meta?.templateId?.startsWith("035_template_onboarding")&&k.trackUserOpenedWorkflow(t.meta.templateId.split("-").pop()??""),t.meta?.templateId?.startsWith("37_onboarding_experiments_batch_aug11")&&y.trackOpenWorkflow(t.meta.templateId.split("-").pop()??""),await h.setProjectNavActiveIdByWorkflowHomeProject(t.homeProject,t.sharedWithProjects),l.fetchLastSuccessfulExecution()}catch(t){if(404===t.httpStatusCode)return await a.replace({name:wt.ENTITY_NOT_FOUND,params:{entityType:"workflow"}});if(403===t.httpStatusCode)return await a.replace({name:wt.ENTITY_UNAUTHORIZED,params:{entityType:"workflow"}});s.showError(t,o.baseText("openWorkflow.workflowNotFoundError")),a.push({name:wt.NEW_WORKFLOW})}finally{d.nodeViewInitialized=!0,O.value=D.value}}return{isLoading:C,initializedWorkflowId:O,workflowId:D,currentWorkflowDocumentStore:N,isNewWorkflowRoute:P,isDemoRoute:M,isTemplateRoute:R,isOnboardingRoute:B,isDebugRoute:L,loadCredentials:V,initializeData:async function(){const e=m.isPreviewMode&&M.value,t=(()=>{if(e)return[];const t=[c.fetchActiveWorkflows(),p.fetchCredentialTypes(!0),V()];return m.isEnterpriseFeatureEnabled[it.Variables]&&t.push(w.fetchAllVariables()),m.isEnterpriseFeatureEnabled[it.ExternalSecrets]&&(t.push(v.fetchGlobalSecrets()),h.currentProjectId!==h.personalProject?.id&&"string"==typeof h.currentProjectId&&t.push(v.fetchProjectSecrets(h.currentProjectId))),t})();0===f.allNodeTypes.length&&t.push(f.getNodeTypes());try{e?t.push(f.fetchCommunityNodePreviews()):f.fetchCommunityNodePreviews(),await Promise.all(t)}catch(a){s.showError(a,o.baseText("nodeView.showError.mounted1.title"),o.baseText("nodeView.showError.mounted1.message")+":")}},openWorkflow:K,initializeWorkspaceForNewWorkflow:X,initializeWorkspaceForExistingWorkflow:q,handleTemplateImportRoute:U,handleDebugModeRoute:H,initializeWorkflow:async function(e=!1){if(d.isBlankRedirect)return d.isBlankRedirect=!1,void(C.value=!1);if(await U())C.value=!1;else if(D.value){if(!e&&O.value&&O.value===D.value)return await H(),void(C.value=!1);C.value=!0;try{if(g.reset(),M.value)return void(await X());if(P.value){if(!(await c.checkWorkflowExists(D.value))&&!0===t.meta?.nodeView)return void(await X());await a.replace({...t,query:{...t.query,new:void 0}})}await q(D.value),await H()}finally{C.value=!1}}else C.value=!1},cleanup:function(){A(),x(),d.nodeViewInitialized=!1}}}(o);return C(nt,i),C(mt,l),m((async()=>{await w(),await h()})),g(i,(async(e,t)=>{e!==t&&e&&await h(!0)}),{flush:"post"}),g(f,(async(e,t)=>{!e||t||s.value||await b()}),{flush:"post"}),d((()=>k())),(e,o)=>{const n=O("RouterView");return I(),v(Ge,null,j({header:y((()=>[p(Ba)])),sidebar:y((()=>[p(zt)])),overlays:y((()=>[c(a).isFloatingButtonShown?(I(),v(ta,{key:0})):r("",!0)])),default:y((()=>[c(s)?(I(),v(Ht,{key:0})):(I(),v(n,{key:1},{default:y((({Component:e})=>[(I(),v(P,{include:"NodeView",max:1},[(I(),v(x(e)))],1024))])),_:1}))])),_:2},[c(t).logs?{name:"footer",fn:y((()=>[p(Kt)])),key:"0"}:void 0]),1024)}}}))}}}));
//# sourceMappingURL=WorkflowLayout-legacy-DhNmB4pg.js.map