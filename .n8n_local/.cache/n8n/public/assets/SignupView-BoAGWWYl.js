(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`068f5186-6cf5-4b90-a41f-b0b0abdee799`,e._sentryDebugIdIdentifier=`sentry-dbid-068f5186-6cf5-4b90-a41f-b0b0abdee799`)})()}catch{}import{C as e,It as t,P as n,T as r,Z as i,et as a}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as o}from"./_MapCache-DjbOQyB7.js";import{Ci as s,wi as c}from"./src-CppJvwzX.js";import"./sanitize-html-K63Olwt_.js";import{t as l,yr as u}from"./users.store-pCkD7Zo0.js";import{rs as d}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import"./sso.store-Dd63iqNy.js";import{t as f}from"./AuthView-O45Jsyy-.js";var p=n({__name:`SignupView`,setup(n){let p=l(),m=u(),h=o(),g=c(),_=s(),v={title:h.baseText(`auth.signup.setupYourAccount`),buttonText:h.baseText(`auth.signup.finishAccountSetup`),inputs:[{name:`firstName`,properties:{label:h.baseText(`auth.firstName`),maxlength:32,required:!0,autocomplete:`given-name`,capitalize:!0,focusInitially:!0}},{name:`lastName`,properties:{label:h.baseText(`auth.lastName`),maxlength:32,required:!0,autocomplete:`family-name`,capitalize:!0}},{name:`password`,properties:{label:h.baseText(`auth.password`),type:`password`,validationRules:[{name:`DEFAULT_PASSWORD_RULES`}],required:!0,infoText:h.baseText(`auth.defaultPasswordRequirements`),autocomplete:`new-password`,capitalize:!0}},{name:`agree`,properties:{label:h.baseText(`auth.agreement.label`),type:`checkbox`}}]},y=t(!1),b=t(null),x=t(void 0),S=t(void 0),C=t(void 0),w=e(()=>b.value?h.baseText(`settings.signup.signUpInviterInfo`,{interpolate:{firstName:b.value.firstName,lastName:b.value.lastName}}):``);i(async()=>{let e=E(`inviterId`),t=E(`inviteeId`),n=E(`token`);try{if(!n&&!e&&!t)throw Error(h.baseText(`auth.signup.missingTokenError`));x.value=e??void 0,S.value=t??void 0,C.value=n??void 0,b.value=(await p.validateSignupToken({inviteeId:S.value,inviterId:x.value,token:C.value})).inviter}catch(e){m.showError(e,h.baseText(`auth.signup.tokenValidationError`)),g.replace({name:d.SIGNIN})}});async function T(e){if(!C.value&&(!x.value||!S.value)){m.showError(Error(h.baseText(`auth.signup.tokenValidationError`)),h.baseText(`auth.signup.setupYourAccountError`));return}try{if(y.value=!0,await p.acceptInvitation({...e,inviterId:x.value,inviteeId:S.value,token:C.value}),e.agree===!0)try{await p.submitContactEmail(e.email.toString(),e.agree)}catch{}await g.push({name:d.HOMEPAGE})}catch(e){m.showError(e,h.baseText(`auth.signup.setupYourAccountError`))}y.value=!1}function E(e){return!_.query[e]||typeof _.query[e]!=`string`?null:_.query[e]}return(e,t)=>(a(),r(f,{form:v,"form-loading":y.value,subtitle:w.value,onSubmit:T},null,8,[`form-loading`,`subtitle`]))}});export{p as default};
//# sourceMappingURL=SignupView-BoAGWWYl.js.map