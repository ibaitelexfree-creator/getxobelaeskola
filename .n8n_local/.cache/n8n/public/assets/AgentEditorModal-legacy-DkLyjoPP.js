!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./Modal-legacy-BQYiVbf3.js","./nodeIcon-legacy-KJSlWBN7.js","./CredentialIcon-legacy-CaQiQjuK.js","./NodeIcon-legacy-DOI-M5xN.js","./dist-legacy-CPj4q_aQ.js","./chat.store-legacy-BiASMOEd.js","./ChatAgentAvatar-legacy-D6I_tkAP.js","./useCustomAgent-legacy-jghmHXuj.js"],(function(e,t){var a,l,n,o,s,i,d,u,c,r,g,m,v,p,f,b,y,_,h,x,w,T,H,I,j,C,$,N,A,E,V,M,k,S,B,P,D,q;return{setters:[function(e){a=e.C,l=e.Cn,n=e.E,o=e.Gt,s=e.It,i=e.M,d=e.P,u=e.T,c=e.Z,r=e._t,g=e.bt,m=e.et,v=e.j,p=e.mt,f=e.vn,b=e.w},function(e){y=e.yt},function(e){_=e.Hi,h=e.ji,x=e.ot,w=e.w,T=e.zi},function(e){H=e.t},function(e){},function(e){I=e.Tr,j=e.r,C=e.yr},function(e){$=e.fi},function(e){},function(e){N=e.r,A=e.v},function(e){},function(e){},function(e){E=e.t},function(e){},function(e){},function(e){},function(e){},function(e){V=e.C,M=e._,k=e.m,S=e.t},function(e){},function(e){B=e.n,P=e.r,D=e.t}],execute:function(){(q=document.createElement("style")).textContent="._header_5439g_125{justify-content:space-between;align-items:center;gap:var(--spacing--s);padding-right:var(--spacing--xl);display:flex}._deleteButton_5439g_133{margin-top:calc(-1*var(--spacing--xs))}._content_5439g_137{gap:var(--spacing--md);padding:var(--spacing--sm)0;flex-direction:column;display:flex}._input_5439g_144{width:100%}._agentName_5439g_148{align-items:center;gap:var(--spacing--xs);display:flex}._agentNameInput_5439g_154{flex:1}._row_5439g_158{gap:var(--spacing--sm);flex-direction:row;display:flex}._modelSelector_5439g_164{width:fit-content}._footer_5439g_168{justify-content:flex-end;gap:var(--spacing--2xs);display:flex}\n/*$vite$:1*/",document.head.appendChild(q);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(R=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[R]="40f0dc6f-32e5-45af-9ca9-21a2538199d0",t._sentryDebugIdIdentifier="sentry-dbid-40f0dc6f-32e5-45af-9ca9-21a2538199d0")}catch(t){}var t,R;e("default",H(d({__name:"AgentEditorModal",props:{modalName:{},data:{}},setup(e){const t=e,d=S(),H=y(),q=C(),R=I(),U=j(),{customAgent:z,isLoading:L}=D(t.data.agentId),Z=s(""),G=s(""),J=s(""),O=s(null),X=s(!1),Y=s(!1),F=s([]),K=s($),Q=s(!1),W=p("nameInput"),ee=s(M),te=s({}),ae=a((()=>O.value&&ue.value[O.value.provider])),le=a((()=>O.value&&d.getAgent(O.value,{name:O.value.model}))),ne=a((()=>!!t.data.agentId)),oe=a((()=>ne.value&&L.value)),se=a((()=>ne.value?H.baseText("chatHub.agent.editor.title.edit"):H.baseText("chatHub.agent.editor.title.new"))),ie=a((()=>X.value?H.baseText("chatHub.agent.editor.saving"):H.baseText("chatHub.agent.editor.save"))),de=a((()=>Z.value.trim().length>0&&J.value.trim().length>0&&null!==O.value&&!!ae.value)),ue=a((()=>({...t.data.credentials,...te.value}))),ce=a((()=>le.value?.metadata.capabilities.functionCalling??!1));function re(){U.closeModal(t.modalName)}function ge(e,t){te.value={...te.value,[e]:t}}function me(e){F.value.includes(e)?F.value=F.value.filter((t=>t!==e)):F.value=[...F.value,e]}function ve(e){A(k(e)),O.value=e}async function pe(){if(de.value&&!X.value){X.value=!0;try{A(O.value),A(ae.value);const e={name:Z.value.trim(),description:G.value.trim()||void 0,systemPrompt:J.value.trim(),...O.value,credentialId:ae.value,toolIds:F.value,icon:ee.value};if(ne.value&&t.data.agentId)await d.updateCustomAgent(t.data.agentId,e,t.data.credentials),q.showMessage({title:H.baseText("chatHub.agent.editor.success.update"),type:"success"});else{const a=await d.createCustomAgent(e,t.data.credentials);t.data.onCreateCustomAgent?.(a),q.showMessage({title:H.baseText("chatHub.agent.editor.success.create"),type:"success"})}re()}catch(e){const t=e instanceof Error?e.message:"";q.showError(e,H.baseText("chatHub.agent.editor.error.save"),t)}finally{X.value=!1}}}async function fe(){if(ne.value&&t.data.agentId&&!Y.value&&"confirm"===await R.confirm(H.baseText("chatHub.agent.editor.delete.confirm.message"),H.baseText("chatHub.agent.editor.delete.confirm.title"),{confirmButtonText:H.baseText("chatHub.agent.editor.delete.confirm.button"),cancelButtonText:H.baseText("chatHub.agent.editor.delete.cancel.button"),type:"warning"})){Y.value=!0;try{await d.deleteCustomAgent(t.data.agentId,t.data.credentials),q.showMessage({title:H.baseText("chatHub.agent.editor.success.delete"),type:"success"}),t.data.onClose?.(),re()}catch(e){const t=e instanceof Error?e.message:"";q.showError(e,H.baseText("chatHub.agent.editor.error.delete"),t)}finally{Y.value=!1}}}return r(le,(e=>{e&&!e.metadata.capabilities.functionCalling&&(F.value=[])}),{immediate:!0}),r(z,(e=>{e&&(ee.value=e.icon??M,Z.value=e.name,G.value=e.description??"",J.value=e.systemPrompt,O.value={provider:e.provider,model:e.model},F.value=e.toolIds??[],e.credentialId&&(te.value[e.provider]=e.credentialId))}),{immediate:!0}),c((()=>{r([oe,W],(([e,t])=>{e||t?.focus()}),{immediate:!0,flush:"post"})})),r(ue,(async e=>{if(e){Q.value=!0;try{K.value=await V(N().restApiContext,{credentials:e})}finally{Q.value=!1}}}),{immediate:!0}),(t,a)=>(m(),u(E,{name:e.modalName,width:"640px",loading:oe.value},{header:g((()=>[b("div",{class:f(t.$style.header)},[i(o(T),{tag:"h2",size:"large"},{default:g((()=>[v(l(se.value),1)])),_:1}),ne.value?(m(),u(o(_),{key:0,variant:"subtle",icon:"trash-2",class:f(t.$style.deleteButton),disabled:Y.value,loading:Y.value,onClick:fe},null,8,["class","disabled","loading"])):n("",!0)],2)])),content:g((()=>[b("div",{class:f(t.$style.content)},[i(o(x),{"input-name":"agent-name",label:o(H).baseText("chatHub.agent.editor.name.label"),required:!0},{default:g((()=>[b("div",{class:f(t.$style.agentName)},[i(o(w),{modelValue:ee.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ee.value=e),"button-tooltip":o(H).baseText("chatHub.agent.editor.iconPicker.button.tooltip")},null,8,["modelValue","button-tooltip"]),i(o(h),{id:"agent-name",ref:"nameInput",modelValue:Z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Z.value=e),placeholder:o(H).baseText("chatHub.agent.editor.name.placeholder"),maxlength:128,class:f(t.$style.agentNameInput)},null,8,["modelValue","placeholder","class"])],2)])),_:1},8,["label"]),i(o(x),{"input-name":"agent-description",label:o(H).baseText("chatHub.agent.editor.description.label")},{default:g((()=>[i(o(h),{id:"agent-description",modelValue:G.value,"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e),type:"textarea",placeholder:o(H).baseText("chatHub.agent.editor.description.placeholder"),maxlength:512,rows:3,class:f(t.$style.input)},null,8,["modelValue","placeholder","class"])])),_:1},8,["label"]),i(o(x),{"input-name":"agent-system-prompt",label:o(H).baseText("chatHub.agent.editor.systemPrompt.label"),required:!0},{default:g((()=>[i(o(h),{id:"agent-system-prompt",modelValue:J.value,"onUpdate:modelValue":a[3]||(a[3]=e=>J.value=e),type:"textarea",placeholder:o(H).baseText("chatHub.agent.editor.systemPrompt.placeholder"),rows:6,class:f(t.$style.input)},null,8,["modelValue","placeholder","class"])])),_:1},8,["label"]),b("div",{class:f(t.$style.row)},[i(o(x),{"input-name":"agent-model",class:f(t.$style.input),label:o(H).baseText("chatHub.agent.editor.model.label"),required:!0},{default:g((()=>[i(P,{"selected-agent":le.value,"include-custom-agents":!1,credentials:ue.value,agents:K.value,"is-loading":Q.value,class:f(t.$style.modelSelector),"warn-missing-credentials":"",onChange:ve,onSelectCredential:ge},null,8,["selected-agent","credentials","agents","is-loading","class"])])),_:1},8,["class","label"]),i(o(x),{"input-name":"agent-tool",class:f(t.$style.input),label:o(H).baseText("chatHub.agent.editor.tools.label"),required:!1},{default:g((()=>[b("div",null,[i(B,{disabled:!ce.value,"disabled-tooltip":ce.value?void 0:O.value?o(H).baseText("chatHub.tools.selector.disabled.tooltip"):o(H).baseText("chatHub.tools.selector.disabled.noModel.tooltip"),"checked-tool-ids":F.value,onToggle:me},null,8,["disabled","disabled-tooltip","checked-tool-ids"])])])),_:1},8,["class","label"])],2)],2)])),footer:g((()=>[b("div",{class:f(t.$style.footer)},[i(o(_),{variant:"subtle",onClick:re},{default:g((()=>[v(l(o(H).baseText("chatHub.tools.editor.cancel")),1)])),_:1}),i(o(_),{variant:"solid",disabled:!de.value||X.value,onClick:pe},{default:g((()=>[v(l(ie.value),1)])),_:1},8,["disabled"])],2)])),_:1},8,["name","loading"]))}}),[["__cssModules",{$style:{header:"_header_5439g_125",deleteButton:"_deleteButton_5439g_133",content:"_content_5439g_137",input:"_input_5439g_144",agentName:"_agentName_5439g_148",agentNameInput:"_agentNameInput_5439g_154",row:"_row_5439g_158",modelSelector:"_modelSelector_5439g_164",footer:"_footer_5439g_168"}}]]))}}}));
//# sourceMappingURL=AgentEditorModal-legacy-DkLyjoPP.js.map