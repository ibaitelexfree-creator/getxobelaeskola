!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./_baseOrderBy-legacy-BnyL5wLN.js"],(function(e,t){var n,r,a,o,i,s,u,d,c,p,l,f,y,g,v,b,w,h,D,T;function _(e={}){const t=o(),a=n((()=>{if(e.nodeType)return r(e.nodeType);const n=r(e.node);return n?t.getNodeType(n.type,n.typeVersion):null}));return{nodeType:a,isSubNodeType:n((()=>f(a.value))),isMultipleOutputsNodeType:n((()=>{const e=a.value?.outputs;return"string"!=typeof e&&(e??[]).length>1}))}}return e({n:_,t:function(e,t={}){const f=T(),m=c(),N=l(),x=a(),S=i(),I=p(),{getInputDataWithPinned:O}=s(),E=n((()=>m.workflowObject)),{isSubNodeType:k,isMultipleOutputsNodeType:j}=_({node:e}),z=n((()=>{const t=r(e);return t?m.pinDataByNodeName(t.name):void 0})),L=n((()=>!!r(e)&&void 0!==z.value)),J=n((()=>{const t=r(e);return!(!t||k.value||j.value||v.includes(t.type))}));function M(e){try{return JSON.parse(e),!0}catch(t){const n=x.baseText("runData.editOutputInvalid"),r=new RegExp(/JSON\.parse:|of the JSON data/,"g"),a=t.message.replace(r,"").trim(),o=/at position (\d+)/,i=t.message.match(o);if(t.message=a.charAt(0).toUpperCase()+a.slice(1),t.message=t.message.replace("Unexpected token ' in JSON",x.baseText("runData.editOutputInvalid.singleQuote")),i){const n=parseInt(i[1],10),r=(e.slice(0,n).match(/\n/g)||[]).length;t.message=t.message.replace(o,x.baseText("runData.editOutputInvalid.atPosition",{interpolate:{position:`${n}`}})),t.message=`${x.baseText("runData.editOutputInvalid.onLine",{interpolate:{line:`${r+1}`}})} ${t.message}`}return N.showError(t,n),!1}}function R(){return window.maxPinnedDataSize??12582912}function C(t){const n=r(e);if(!n)return!1;"object"==typeof t&&(t=JSON.stringify(t));const{pinData:a,...o}=E.value,i=g(o,{replaceCircularRefs:!0}),s={...a,[n.name]:t},c=m.getPinDataSize(s);if(c>R())return N.showError(new Error(x.baseText("ndv.pinData.error.tooLarge.description",{interpolate:{size:d(c),limit:d(R())}})),x.baseText("ndv.pinData.error.tooLarge.title")),!1;const p=u(i)+c,l=w-h;return!(p>l&&(N.showError(new Error(x.baseText("ndv.pinData.error.tooLargeWorkflow.description",{interpolate:{size:d(p),limit:d(l)}})),x.baseText("ndv.pinData.error.tooLargeWorkflow.title")),1))}function P({source:n}){const a=r(e),o=r(t.displayMode),i=r(t.runIndex),s={pinning_source:n,node_type:a?.type,push_ref:f.pushRef,data_size:u(z.value),view:o,run_index:i,workflow_id:m.workflowId,node_id:a?.id};I.run("runData.onDataPinningSuccess",s),S.track("Ndv data pinning success",s)}function V({errorType:n,source:a}){const o=r(e),i=r(t.displayMode),s=r(t.runIndex);S.track("Ndv data pinning failure",{pinning_source:a,node_type:o?.type,push_ref:f.pushRef,data_size:u(z.value),view:i,run_index:s,error_type:n})}function U({source:n}){const a=r(e),o=r(t.runIndex);S.track("User unpinned ndv data",{node_type:a?.type,push_ref:f.pushRef,run_index:o,source:n,data_size:u(z.value)})}return{data:z,hasData:L,isValidNodeType:J,canPinNode:function(t=!1,n){const a=r(e);if(null===a||v.includes(a.type))return!1;const i=o().getNodeType(a.type,a.typeVersion),s=O(a);if(!i||t&&0===s.length)return!1;const u=b(E.value,a,i).map((e=>"string"==typeof e?{type:e}:e)),d=u.filter((e=>e.type===D.Main&&"error"!==e.category));let c=!0;if(void 0!==n){const e=u[n];if(void 0===u[n])return!1;c=e.type===D.Main&&"error"!==e.category}return 1===d.length&&c},setData:function(t,n){const a=r(e);if(a){if("string"==typeof t){if(!M(t))throw V({errorType:"invalid-json",source:n}),new Error("Invalid JSON");t=y(t)}if(!C(t))throw V({errorType:"data-too-large",source:n}),new Error("Data too large");m.pinData({node:a,data:t}),P({source:n})}},onSetDataSuccess:P,onSetDataError:V,unsetData:function(t){const n=r(e);n&&(U({source:t}),m.unpinData({node:n}))},onUnsetData:U,isValidJSON:M,isValidSize:C}}}),{setters:[function(e){n=e.C,r=e.Gt},function(e){a=e.yt},function(e){o=e.C,i=e.Lt,s=e.ct,u=e.da,d=e.fa,c=e.s,p=e.xr,l=e.yr},function(e){f=e.Ca,y=e.Ga,g=e.Ka,v=e.Xn,b=e.da,w=e.gc,e.hc,h=e.mc,D=e.so},function(e){T=e.r}],execute:function(){try{e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(t=(new e.Error).stack)&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bc921e58-f488-4d17-a698-dd4a28ab7d08",e._sentryDebugIdIdentifier="sentry-dbid-bc921e58-f488-4d17-a698-dd4a28ab7d08")}catch(e){}var e,t}}}));
//# sourceMappingURL=usePinnedData-legacy-B5CI71uf.js.map