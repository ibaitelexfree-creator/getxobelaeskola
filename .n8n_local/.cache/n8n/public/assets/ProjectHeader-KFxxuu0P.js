(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`2cdf066d-c38b-4739-9364-97e8abccbfae`,e._sentryDebugIdIdentifier=`sentry-dbid-2cdf066d-c38b-4739-9364-97e8abccbfae`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,It as a,M as o,P as s,T as c,W as l,_t as u,at as d,bt as f,et as p,j as m,mt as h,vn as g,w as _}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{D as v,P as y,yt as b}from"./_MapCache-DjbOQyB7.js";import{Ci as x,Hi as S,Mi as C,Oi as ee,Tt as w,Vi as T,j as E,wi as te,zi as ne}from"./src-CppJvwzX.js";import{t as D}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Ga as re,Gt as O,Kt as k,Lt as A,r as ie,t as ae,wr as j,ws as oe}from"./users.store-pCkD7Zo0.js";import{Yc as se,ei as ce,qo as M,rs as N}from"./constants-D1jZwsUK.js";import{t as P}from"./folders.store-CS_gIPIm.js";import{n as le,t as ue}from"./ProjectIcon-D-HRIqn6.js";import{r as F,t as I}from"./readyToRun.store-DM7AW4os.js";function L(e,t){if(!e.dynamicRoute)return e;let n={name:e.dynamicRoute.name};e.dynamicRoute.includeProjectId&&t&&(n.params={projectId:t});let{dynamicRoute:r,...i}=e;return{...i,to:n}}function R(e,t){return e.map(e=>L(e,t))}var de=s({__name:`ProjectTabs`,props:{showSettings:{type:Boolean,default:!1},showExecutions:{type:Boolean,default:!0},pageType:{default:`project`},additionalTabs:{default:()=>[]}},setup(t){let n=t,r=b(),o=x(),s=O(),l=A(),d=a(``),f=e(()=>d.value?String(d.value):``),m=e(()=>Array.isArray(o?.params?.projectId)?o.params.projectId[0]:o?.params?.projectId),h=e(()=>s.currentProject?.type===k.Team),g=()=>m.value?{workflows:{name:N.PROJECTS_WORKFLOWS,params:{projectId:m.value}},credentials:{name:N.PROJECTS_CREDENTIALS,params:{projectId:m.value}},executions:{name:N.PROJECTS_EXECUTIONS,params:{projectId:m.value}},variables:{name:N.PROJECTS_VARIABLES,params:{projectId:m.value}}}:n.pageType===`shared`?{workflows:{name:N.SHARED_WORKFLOWS},credentials:{name:N.SHARED_CREDENTIALS},executions:{name:N.NOT_FOUND},variables:{name:N.NOT_FOUND}}:{workflows:{name:N.WORKFLOWS},credentials:{name:N.CREDENTIALS},executions:{name:N.EXECUTIONS},variables:{name:N.HOME_VARIABLES}},_=(e,t,n)=>({label:r.baseText(e),value:n[t].name,to:n[t]}),v=e(()=>{let e=g(),t=[_(`mainSidebar.workflows`,`workflows`,e),_(`mainSidebar.credentials`,`credentials`,e)];if(n.showExecutions&&t.push(_(`mainSidebar.executions`,`executions`,e)),(n.pageType===`overview`||h.value)&&t.push(_(`mainSidebar.variables`,`variables`,e)),n.additionalTabs?.length){let e=R(n.additionalTabs,m.value);t.push(...e)}return n.showSettings&&t.push({label:r.baseText(`projects.settings`),value:N.PROJECT_SETTINGS,to:{name:N.PROJECT_SETTINGS,params:{projectId:m.value}}}),t});u(()=>o?.name,()=>{d.value=o.name===N.PROJECTS_FOLDERS?N.PROJECTS_WORKFLOWS:o.name},{immediate:!0});function y(e){d.value===`variables`&&l.track(`User clicked project variables tab`,{project_id:m.value}),d.value=e}return(e,t)=>(p(),c(i(E),{"model-value":f.value,options:v.value,"data-test-id":`project-tabs`,"onUpdate:modelValue":y},null,8,[`model-value`,`options`]))}}),fe=D(s({__name:`ProjectCreateResource`,props:{actions:{},disabled:{type:Boolean},variant:{}},emits:[`action`],setup(e,{expose:t,emit:r}){let a=r,s=h(`actionToggleRef`);return t({openActionToggle:e=>s.value?.openActionToggle(e)}),(t,r)=>(p(),n(`div`,{class:g([t.$style.buttonGroup])},[d(t.$slots,`default`),o(i(w),{ref_key:`actionToggleRef`,ref:s,"data-test-id":`add-resource`,actions:e.actions,placement:`bottom-end`,teleported:!1,onAction:r[0]||=e=>a(`action`,e)},{default:f(()=>[o(i(C),{disabled:e.disabled,class:g([t.$style.buttonGroupDropdown]),icon:`chevron-down`,variant:e.variant??`solid`},null,8,[`disabled`,`class`,`variant`])]),_:1},8,[`actions`])],2))}}),[[`__cssModules`,{$style:{buttonGroup:`_buttonGroup_k0u4k_125`,buttonGroupDropdown:`_buttonGroupDropdown_k0u4k_139`}}]]);const pe=(e,t,n)=>{if(!e||t<=0)return``;let r=.55*n,i=Math.floor(t/r);if(e.length<=i)return``;let a=e.slice(0,i),o=a.lastIndexOf(` `);return a.slice(0,o===-1?i:o)+`...`};var z=s({__name:`ReadyToRunButton`,props:{hasActiveCallouts:{type:Boolean}},setup(n){let a=n,o=x(),s=b(),l=F(),u=O(),d=j(),h=P(),g=I(),_=e(()=>M(u.currentProject?.scopes??u.personalProject?.scopes)),v=e(()=>g.getButtonVisibility(h.totalWorkflowCount>0,_.value.workflow.create,d.preferences.branchReadOnly)&&!a.hasActiveCallouts),y=async()=>{let e=l.isOverviewSubPage?u.personalProject?.id:o.params.projectId;try{await g.claimCreditsAndOpenWorkflow(`button`,o.params.folderId,e)}catch{}};return(e,n)=>v.value?(p(),c(i(S),{key:0,variant:`subtle`,"data-test-id":`ready-to-run-button`,icon:`zap`,loading:i(g).claimingCredits,disabled:i(d).preferences.branchReadOnly||i(g).claimingCredits,onClick:y},{default:f(()=>[m(t(i(s).baseText(`workflows.empty.readyToRun`)),1)]),_:1},8,[`loading`,`disabled`])):r(``,!0)}}),me={style:{display:`flex`,gap:`var(--spacing--xs)`,"align-items":`center`}},B=D(s({__name:`ProjectHeader`,props:{hasActiveCallouts:{type:Boolean},mainButton:{}},emits:[`createFolder`],setup(s,{emit:u}){let h=x(),C=te(),w=b(),E=O(),D=j(),P=oe(),I=ie(),L=A(),R=ae(),B=F(),V=s,he=u,ge=e(()=>E.currentProject?.type===k.Personal?{type:`icon`,value:`user`}:E.currentProject?.name?le(E.currentProject.icon)?E.currentProject.icon:{type:`icon`,value:`layers`}:{type:`icon`,value:`house`}),H=e(()=>E.currentProject??E.personalProject),U=e(()=>H.value?.type===k.Personal),W=e(()=>E.currentProject?E.currentProject.type===k.Personal?w.baseText(`projects.menu.personal`):E.currentProject.name:B.isSharedSubPage?w.baseText(`projects.header.shared.title`):B.isOverviewSubPage?w.baseText(`projects.menu.overview`):U.value?w.baseText(`projects.menu.personal`):null),_e=e(()=>M(E.currentProject?.scopes).project),ve=e(()=>M(E.currentProject?.scopes).projectVariable),ye=e(()=>M(R.currentUser?.globalScopes).variable),be=e(()=>!!h?.params?.projectId&&!!_e.value.update&&E.currentProject?.type===k.Team),xe=e(()=>P.isFoldersFeatureEnabled&&[N.PROJECTS_WORKFLOWS,N.PROJECTS_FOLDERS].includes(h.name)),Se=e(()=>{let e;return e=B.isSharedSubPage?`shared`:B.isOverviewSubPage?`overview`:`project`,Object.keys(I.moduleTabs[e]).filter(P.isModuleActive).flatMap(t=>I.moduleTabs[e][t])}),G={WORKFLOW:`workflow`,CREDENTIAL:`credential`,FOLDER:`folder`,DATA_TABLE:`dataTable`,VARIABLE:`variable`},Ce=e(()=>({value:G.WORKFLOW,label:w.baseText(`projects.header.create.workflow`),icon:D.preferences.branchReadOnly?`lock`:void 0,size:`mini`,disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).workflow.create})),we=e(()=>({value:G.CREDENTIAL,label:w.baseText(`projects.header.create.credential`),icon:D.preferences.branchReadOnly?`lock`:void 0,size:`mini`,disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).credential.create})),Te=e(()=>({value:G.DATA_TABLE,label:w.baseText(`dataTable.add.button.label`),icon:D.preferences.branchReadOnly?`lock`:void 0,size:`mini`,disabled:D.preferences.branchReadOnly||!M(H.value?.scopes)?.dataTable?.create})),Ee=e(()=>({value:G.VARIABLE,label:w.baseText(`variables.add.button.label`),icon:D.preferences.branchReadOnly?`lock`:void 0,size:`mini`,disabled:D.preferences.branchReadOnly||!ve.value.create&&!ye.value.create})),K=e(()=>V.mainButton??G.WORKFLOW),De=e(()=>{switch(K.value){case G.CREDENTIAL:return we.value;case G.DATA_TABLE:return Te.value;case G.VARIABLE:return Ee.value;case G.WORKFLOW:default:return Ce.value}}),Oe=e(()=>{let e=[];return K.value!==G.WORKFLOW&&e.push({value:G.WORKFLOW,label:w.baseText(`projects.header.create.workflow`),disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).workflow.create}),K.value!==G.CREDENTIAL&&e.push({value:G.CREDENTIAL,label:w.baseText(`projects.header.create.credential`),disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).credential.create}),K.value!==G.VARIABLE&&P.isEnterpriseFeatureEnabled[se.Variables]&&e.push({value:G.VARIABLE,label:w.baseText(`variables.add.button.label`),disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).projectVariable.create}),xe.value&&e.push({value:G.FOLDER,label:w.baseText(`projects.header.create.folder`),disabled:D.preferences.branchReadOnly||!M(H.value?.scopes).folder.create}),P.isDataTableFeatureEnabled&&K.value!==G.DATA_TABLE&&e.push({value:G.DATA_TABLE,label:w.baseText(`dataTable.add.button.label`),disabled:D.preferences.branchReadOnly||!M(H.value?.scopes)?.dataTable?.create}),e}),ke=e(()=>!B.isOverviewSubPage&&!B.isSharedSubPage&&!U.value);function Ae(e){return[N.PROJECTS_CREDENTIALS,N.CREDENTIALS,N.SHARED_CREDENTIALS].includes(e)}function je(e){return[N.PROJECTS_WORKFLOWS,N.WORKFLOWS,N.SHARED_WORKFLOWS,N.PROJECTS_FOLDERS].includes(e)}function q(e){if(Ae(e))return`credentials_list`;if(je(e))return`workflow_list`}let Me={[G.WORKFLOW]:e=>{C.push({name:N.NEW_WORKFLOW,query:{projectId:e,parentFolderId:h.params.folderId,uiContext:q(h.name?.toString()??``)}})},[G.CREDENTIAL]:e=>{C.push({name:N.PROJECTS_CREDENTIALS,params:{projectId:e,credentialId:`create`},query:{uiContext:q(h.name?.toString()??``)}})},[G.FOLDER]:()=>{he(`createFolder`)},[G.DATA_TABLE]:e=>{C.push({name:ce,params:{projectId:e,new:`new`}})},[G.VARIABLE]:()=>{I.openModalWithData({name:re,data:{mode:`new`}}),L.track(`User clicked header add variable button`)}},Ne=e(()=>B.isSharedSubPage?`shared`:B.isOverviewSubPage?`overview`:`project`),J=e(()=>B.isSharedSubPage?w.baseText(`projects.header.shared.subtitle`):B.isOverviewSubPage?w.baseText(P.isDataTableFeatureEnabled?`projects.header.overview.subtitleWithDataTables`:`projects.header.overview.subtitle`):U.value?w.baseText(P.isDataTableFeatureEnabled?`projects.header.personal.subtitleWithDataTables`:`projects.header.personal.subtitle`):null),Y=e(()=>B.isProjectsSubPage?E.currentProject?.description:null),X=a(null),{width:Pe}=v(X),Z=a(null),{width:Fe}=v(Z),Q=a(null);y(X,()=>{if(!X.value)return;let e=X.value.querySelector(`span[data-test-id="project-subtitle"]`);if(e){let t=window.getComputedStyle(e);Q.value=parseFloat(t.fontSize)}});let $=e(()=>{if(!Y.value)return``;let e=Pe.value-Fe.value,t=Q.value??14;return pe(Y.value,e,t)}),Ie=e=>{let t=Me[e];H.value&&t(H.value.id)};return(e,a)=>(p(),n(`div`,null,[_(`div`,{ref_key:`projectHeaderRef`,ref:X,class:g(e.$style.projectHeader)},[_(`div`,{class:g(e.$style.projectDetails)},[ke.value?(p(),c(ue,{key:0,icon:ge.value,"border-less":!0,size:`medium`},null,8,[`icon`])):r(``,!0),_(`div`,{class:g(e.$style.headerActions)},[W.value?(p(),c(i(ne),{key:0,bold:``,tag:`h2`,size:`xlarge`,"data-test-id":`project-name`},{default:f(()=>[m(t(W.value),1)]),_:1})):r(``,!0),J.value?(p(),c(i(T),{key:1,color:`text-light`,"data-test-id":`project-subtitle`},{default:f(()=>[m(t(J.value),1)]),_:1})):Y.value?(p(),n(`div`,{key:2,class:g(e.$style.projectDescriptionWrapper)},[o(i(T),{color:`text-light`,"data-test-id":`project-subtitle`},{default:f(()=>[m(t($.value||Y.value),1)]),_:1}),$.value?(p(),n(`div`,{key:0,class:g(e.$style.tooltip)},[o(i(T),{color:`text-light`},{default:f(()=>[m(t(Y.value),1)]),_:1})],2)):r(``,!0)],2)):r(``,!0)],2)],2),i(h).name===i(N).PROJECT_SETTINGS?r(``,!0):(p(),n(`div`,{key:0,ref_key:`headerActionsRef`,ref:Z,class:g([e.$style.headerActions])},[o(i(ee),{disabled:!i(D).preferences.branchReadOnly,content:i(w).baseText(`readOnlyEnv.cantAdd.any`)},{default:f(()=>[_(`div`,me,[o(z,{"has-active-callouts":V.hasActiveCallouts},null,8,[`has-active-callouts`]),o(fe,{"data-test-id":`add-resource-buttons`,actions:Oe.value,disabled:i(D).preferences.branchReadOnly,onAction:Ie},{default:f(()=>[o(i(S),l({"data-test-id":`add-resource-${K.value}`},De.value,{size:`medium`,onClick:a[0]||=e=>Ie(K.value)}),null,16,[`data-test-id`])]),_:1},8,[`actions`,`disabled`])])]),_:1},8,[`disabled`,`content`])],2))],2),d(e.$slots,`default`),_(`div`,{class:g(e.$style.actions)},[o(de,{"page-type":Ne.value,"show-executions":!i(B).isSharedSubPage,"show-settings":be.value,"additional-tabs":Se.value},null,8,[`page-type`,`show-executions`,`show-settings`,`additional-tabs`])],2)]))}}),[[`__cssModules`,{$style:{projectHeader:`_projectHeader_ukvp2_125`,projectDetails:`_projectDetails_ukvp2_132`,actions:`_actions_ukvp2_137`,projectDescriptionWrapper:`_projectDescriptionWrapper_ukvp2_141`,tooltip:`_tooltip_ukvp2_145`,headerActions:`_headerActions_ukvp2_168`}}]]);export{z as n,B as t};
//# sourceMappingURL=ProjectHeader-KFxxuu0P.js.map