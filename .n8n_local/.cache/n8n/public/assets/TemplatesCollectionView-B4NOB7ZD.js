(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`a1a29ae7-2f93-4cfa-b45a-b98abf744006`,e._sentryDebugIdIdentifier=`sentry-dbid-a1a29ae7-2f93-4cfa-b45a-b98abf744006`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,It as a,M as o,P as s,T as c,Z as l,_ as u,_t as d,at as f,bt as p,et as m,it as h,j as g,k as _,vn as v,w as y}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as b}from"./_MapCache-DjbOQyB7.js";import{A as x,Ci as S,Et as C,Vi as w,Y as T,wi as E,zi as D}from"./src-CppJvwzX.js";import{t as O}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{$i as k,Ai as A,C as j,Lt as M,X as N,Y as P,fn as F,xn as I,xr as L}from"./users.store-pCkD7Zo0.js";import{rs as R}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import"./nodeIcon--7uU1Imq.js";import{t as z}from"./NodeIcon-Dv1e4Lvu.js";import"./nodeTransforms-CG9uauaw.js";import{t as B}from"./TimeAgo-BLqTSlco.js";import"./templateTransforms-u0_D8fwP.js";import{n as V}from"./templateActions-mFhFI7hF.js";import{t as H}from"./TemplatesView-C8R65plk.js";import{t as U}from"./TemplateList-DWe5QI38.js";var W=O(s({__name:`TemplateDetailsBlock`,props:{title:{}},setup(e){return(r,a)=>(m(),n(`div`,{class:v(r.$style.block)},[y(`div`,{class:v(r.$style.header)},[o(i(D),{tag:`h3`,size:`small`,color:`text-base`},{default:p(()=>[g(t(e.title),1)]),_:1})],2),y(`div`,{class:v(r.$style.content)},[f(r.$slots,`default`)],2)],2))}}),[[`__cssModules`,{$style:{block:`_block_67niz_125`,header:`_header_67niz_129`,content:`_content_67niz_134`}}]]),G=O(s({__name:`TemplateDetails`,props:{template:{},blockTitle:{},loading:{type:Boolean}},setup(a){let s=a,l=E(),d=b(),f=I(),_=e(()=>s.template&&`categories`in s.template?s.template.categories.map(e=>({id:`${e.id}`,name:e.name})):[]),S=e=>{f.resetSessionId(),l.push(`/templates?categories=${e}`)},T=e=>{f.resetSessionId(),l.push(`/templates?search=${e.displayName}`)};return(e,s)=>(m(),n(`div`,null,[o(i(C),{loading:a.loading,rows:5,variant:`p`},null,8,[`loading`]),!a.loading&&a.template&&a.template.nodes.length>0?(m(),c(W,{key:0,title:a.blockTitle},{default:p(()=>[y(`div`,{class:v(e.$style.icons)},[(m(!0),n(u,null,h(i(A)(a.template.nodes),t=>(m(),n(`div`,{key:t.name,class:v(e.$style.icon)},[o(z,{"node-type":t,size:24,"show-tooltip":!0,onClick:e=>T(t)},null,8,[`node-type`,`onClick`])],2))),128))],2)]),_:1},8,[`title`])):r(``,!0),!a.loading&&i(P)(a.template)&&_.value.length>0?(m(),c(W,{key:1,title:i(d).baseText(`template.details.categories`)},{default:p(()=>[o(i(x),{tags:_.value,"onClick:tag":S},null,8,[`tags`])]),_:1},8,[`title`])):r(``,!0),!a.loading&&a.template?(m(),c(W,{key:2,title:i(d).baseText(`template.details.details`)},{default:p(()=>[y(`div`,{class:v(e.$style.text)},[i(N)(a.template)?(m(),c(i(w),{key:0,size:`small`,color:`text-base`},{default:p(()=>[g(t(i(d).baseText(`template.details.created`))+` `,1),o(B,{date:a.template.createdAt},null,8,[`date`]),g(` `+t(i(d).baseText(`template.details.by`))+` `+t(a.template.user?a.template.user.username:`n8n team`),1)]),_:1})):r(``,!0)],2),y(`div`,{class:v(e.$style.text)},[i(N)(a.template)&&a.template.totalViews!==0?(m(),c(i(w),{key:0,size:`small`,color:`text-base`},{default:p(()=>[g(t(i(d).baseText(`template.details.viewed`))+` `+t(i(k)(a.template.totalViews))+` `+t(i(d).baseText(`template.details.times`)),1)]),_:1})):r(``,!0)],2)]),_:1},8,[`title`])):r(``,!0)]))}}),[[`__cssModules`,{$style:{icons:`_icons_1p4ga_125`,icon:`_icon_1p4ga_125`,text:`_text_1p4ga_136`}}]]),K=O(s({__name:`TemplatesCollectionView`,setup(s){let u=L(),f=I(),h=j(),x=S(),O=E(),k=M(),A=b(),N=F(),z=a(!0),B=a(!1),W=e(()=>{let{id:e}=x.params;return Array.isArray(e)?e[0]:e}),K=e(()=>f.getCollectionById[W.value]),q=e(()=>!K.value||z.value?[]:K.value.workflows.map(({id:e})=>f.getTemplatesById(e.toString())).filter(e=>!!e)),J=()=>{setTimeout(()=>{let e=document.getElementById(`content`);e&&e.scrollTo({top:0,behavior:`smooth`})},50)},Y=({event:e,id:t})=>{Z(e,R.TEMPLATE,`${t}`)},X=async({event:e,id:t})=>{await V({router:O,templateId:`${t}`,inNewBrowserTab:e.metaKey||e.ctrlKey,templatesStore:f,externalHooks:u,nodeTypesStore:h,telemetry:k,source:`template_list`})},Z=(e,t,n)=>{if(e.metaKey||e.ctrlKey){let{href:e}=O.resolve({name:t,params:{id:n}});window.open(e,`_blank`);return}else O.push({name:t,params:{id:n}})};return d(()=>K.value,()=>{K.value&&`full`in K.value&&K.value.full?N.set(`Template collection: ${K.value.name}`):N.set(`Templates`)}),l(async()=>{if(J(),K.value&&`full`in K.value&&K.value.full){z.value=!1;return}try{await f.fetchCollectionById(W.value)}catch{B.value=!0}z.value=!1}),(e,a)=>(m(),c(H,{"go-back-enabled":!0},_({header:p(()=>[B.value?(m(),n(`div`,{key:1,class:v(e.$style.notFound)},[o(i(w),{color:`text-base`},{default:p(()=>[g(t(i(A).baseText(`templates.collectionsNotFound`)),1)]),_:1})],2)):(m(),n(`div`,{key:0,class:v(e.$style.wrapper)},[y(`div`,{class:v(e.$style.title)},[K.value&&K.value.name?(m(),c(i(D),{key:0,tag:`h1`,size:`2xlarge`},{default:p(()=>[g(t(K.value.name),1)]),_:1})):r(``,!0),K.value&&K.value.name?(m(),c(i(w),{key:1,color:`text-base`,size:`small`},{default:p(()=>[g(t(i(A).baseText(`templates.collection`)),1)]),_:1})):r(``,!0),o(i(C),{loading:!K.value||!K.value.name,rows:2,variant:`h1`},null,8,[`loading`])],2)],2))]),_:2},[B.value?void 0:{name:`content`,fn:p(()=>[y(`div`,{class:v(e.$style.wrapper)},[y(`div`,{class:v(e.$style.mainContent)},[z.value||i(P)(K.value)?(m(),n(`div`,{key:0,class:v(e.$style.markdown)},[o(i(T),{content:i(P)(K.value)&&K.value.description?K.value.description:``,images:i(P)(K.value)&&K.value.image?K.value.image:void 0,loading:z.value},null,8,[`content`,`images`,`loading`])],2)):r(``,!0),o(U,{"infinite-scroll-enabled":!1,loading:z.value,"use-workflow-button":!0,workflows:q.value,onUseWorkflow:X,onOpenTemplate:Y},null,8,[`loading`,`workflows`])],2),y(`div`,{class:v(e.$style.details)},[o(G,{"block-title":i(A).baseText(`template.details.appsInTheCollection`),loading:z.value,template:K.value},null,8,[`block-title`,`loading`,`template`])],2)],2)]),key:`0`}]),1024))}}),[[`__cssModules`,{$style:{wrapper:`_wrapper_ibv33_125`,notFound:`_notFound_ibv33_135`,title:`_title_ibv33_139`,button:`_button_ibv33_143`,mainContent:`_mainContent_ibv33_147`,markdown:`_markdown_ibv33_158`,details:`_details_ibv33_162`}}]]);export{K as default};
//# sourceMappingURL=TemplatesCollectionView-B4NOB7ZD.js.map