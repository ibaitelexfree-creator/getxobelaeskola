!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./Modal-legacy-BQYiVbf3.js","./TagsDropdown-legacy-BxHqGla1.js","./constants-legacy-CLWGezV2.js","./CredentialPicker-legacy-Cca8dwDU.js","./chat.store-legacy-BiASMOEd.js"],(function(e,a){var l,t,n,d,o,i,s,r,c,u,v,p,f,b,g,m,y,_,h,x,w,M,k,C,j,T,H,I,P,$,E,R,D,z,S,V;return{setters:[function(e){e.o},function(e){l=e.C,t=e.Cn,n=e.D,d=e.E,o=e.Gt,i=e.It,s=e.M,r=e.P,c=e.T,u=e.Z,v=e._t,p=e.bt,f=e.et,b=e.j,g=e.vn,m=e.w},function(e){y=e.yt},function(e){_=e.Hi,h=e.Mi,x=e.Oi,w=e.Vi,M=e._t,k=e.jt,C=e.zi},function(e){j=e.t},function(e){},function(e){T=e.rt,H=e.yr},function(e){I=e.oi},function(e){},function(e){P=e.r},function(e){},function(e){},function(e){$=e.t},function(e){E=e.t},function(e){R=e.y},function(e){D=e.t},function(e){z=e.C,S=e.t}],execute:function(){(V=document.createElement("style")).textContent="._header_3xawo_125{gap:var(--spacing--2xs);align-items:center;display:flex}._content_3xawo_131{gap:var(--spacing--lg);padding:var(--spacing--sm)0 var(--spacing--md);flex-direction:column;display:flex}._container_3xawo_138{justify-content:space-between;align-items:flex-start;gap:var(--spacing--2xs);flex-direction:column;display:flex}._credentialContainer_3xawo_146{align-items:center;gap:var(--spacing--2xs);width:100%;display:flex}._credentialPicker_3xawo_153,._modelPicker_3xawo_157{width:100%}._footer_3xawo_161{justify-content:flex-end;align-items:center;width:100%;display:flex}._footerRight_3xawo_168{gap:var(--spacing--2xs);display:flex}\n/*$vite$:1*/",document.head.appendChild(V);try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(A=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[A]="08bd83ea-825a-42b4-9cca-91be12a3b9a3",a._sentryDebugIdIdentifier="sentry-dbid-08bd83ea-825a-42b4-9cca-91be12a3b9a3")}catch(a){}var a,A;e("default",j(r({__name:"ProviderSettingsModal",props:{modalName:{},data:{}},setup(e){const a=e,r=i(null),j=i(M()),V=i(!1),A=i(!1),B=i(!1),N=i([]),U=i([]),L=l((()=>{const e=new Map(N.value.reduce(((e,a)=>("custom-agent"!==a.model.provider&&"n8n"!==a.model.provider&&e.push([a.model.model,{id:a.model.model,name:a.name}]),e)),[]));for(const a of U.value)e.set(a,{id:a,name:a,isManual:!0});return Array.from(e.values())})),O=l((()=>{const e={};return L.value.forEach((a=>{e[a.id]=a})),e})),Z=l({get:()=>r.value?.allowedModels?.map((e=>e.model))||[],set:e=>{r.value&&(r.value.allowedModels=L.value.filter((a=>e.includes(a.id))).map((e=>({model:e.id,displayName:e.name,isManual:e.isManual}))),U.value=r.value.allowedModels.filter((e=>e.isManual)).map((e=>e.model)))}});async function F(e){return U.value.push(e),{id:e,name:e}}const G=y(),J=T(),Y=S(),q=H(),K=l((()=>I[a.data.provider]));function Q(e){r.value&&(r.value.credentialId=e)}function W(){r.value&&(r.value.credentialId=null,r.value.allowedModels=[],B.value=!1)}async function X(){r.value?await a.data.onConfirm(r.value):a.data.onCancel(),j.value.emit("close")}function ee(){a.data.onCancel(),j.value.emit("close")}async function ae(){r.value=await Y.fetchProviderSettings(a.data.provider),B.value=r.value?.allowedModels.length>0,U.value=r.value.allowedModels.filter((e=>e.isManual)).map((e=>e.model))}const le=l((()=>!!a.data.disabled||!r.value||B.value&&0===r.value.allowedModels.length));function te(e){r.value&&(r.value.enabled="boolean"==typeof e?e:Boolean(e),r.value.enabled||(r.value.credentialId=null,r.value.allowedModels=[],B.value=!1))}function ne(e){r.value&&(B.value="boolean"==typeof e?e:Boolean(e),B.value||(r.value.allowedModels=[]))}return u((async()=>{V.value=!0,await Promise.all([ae(),J.fetchCredentialTypes(!1),J.fetchAllCredentials()]),V.value=!1})),v((()=>r.value?.credentialId),(async e=>{e&&await async function(e){A.value=!0;try{const l={[a.data.provider]:e};N.value=(await z(P().restApiContext,{credentials:l}))[a.data.provider].models||[]}catch(l){q.showError(l,G.baseText("settings.chatHub.providers.modal.edit.errorFetchingModels"))}finally{A.value=!1}}(e)}),{immediate:!0}),(l,i)=>(f(),c($,{name:e.modalName,"event-bus":j.value,width:"50%","max-width":"500px",center:!0},{header:p((()=>[m("div",{class:g(l.$style.header)},[s(o(C),{size:"large",color:"text-dark"},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.title",{interpolate:{provider:o(R)[a.data.provider]}})),1)])),_:1})],2)])),content:p((()=>[m("div",{class:g(l.$style.content)},[m("label",{class:g(l.$style.container)},[s(o(w),{color:"text-dark"},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.enabled.label",{interpolate:{provider:o(R)[a.data.provider]}})),1)])),_:1}),s(o(x),{content:o(G).baseText("settings.chatHub.providers.modal.edit.enabled.tooltip"),disabled:a.data.disabled,placement:"top"},{default:p((()=>[s(o(k),{size:"large","model-value":r.value?.enabled??!1,disabled:a.data.disabled,loading:V.value,"onUpdate:modelValue":te},null,8,["model-value","disabled","loading"])])),_:1},8,["content","disabled"])],2),r.value&&r.value.enabled?(f(),n("label",{key:0,class:g(l.$style.container)},[s(o(w),{color:"text-dark"},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.credential.label")),1)])),_:1}),m("div",{class:g(l.$style.credentialContainer)},[s(D,{class:g(l.$style.credentialPicker),"app-name":o(R)[a.data.provider],"credential-type":K.value,"selected-credential-id":r.value.credentialId,"hide-create-new":!0,onCredentialSelected:Q,onCredentialDeselected:W},null,8,["class","app-name","credential-type","selected-credential-id"]),r.value.credentialId?(f(),c(o(h),{key:0,type:"button",variant:"outline",title:o(G).baseText("settings.chatHub.providers.modal.edit.credential.clearButton"),icon:"x","icon-size":"large",onClick:W},null,8,["title"])):d("",!0)],2)],2)):d("",!0),r.value&&r.value.enabled&&r.value.credentialId?(f(),n("label",{key:1,class:g(l.$style.container)},[s(o(w),{color:"text-dark"},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.limitModels.label",{interpolate:{provider:o(R)[a.data.provider]}})),1)])),_:1}),s(o(x),{content:o(G).baseText("settings.chatHub.providers.modal.edit.limitModels.tooltip"),disabled:a.data.disabled,placement:"top"},{default:p((()=>[s(o(k),{size:"large","model-value":B.value,disabled:a.data.disabled,loading:V.value,"onUpdate:modelValue":ne},null,8,["model-value","disabled","loading"])])),_:1},8,["content","disabled"])],2)):d("",!0),r.value&&r.value.enabled&&r.value.credentialId&&B.value?(f(),n("label",{key:2,class:g(l.$style.container)},[s(o(w),{color:"text-dark"},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.allowedModels.label")),1)])),_:1}),s(E,{modelValue:Z.value,"onUpdate:modelValue":i[0]||(i[0]=e=>Z.value=e),class:g(l.$style.modelPicker),placeholder:o(G).baseText("settings.chatHub.providers.modal.edit.models.placeholder"),"event-bus":null,"create-enabled":!0,"manage-enabled":!1,"all-tags":L.value,"is-loading":A.value,"tags-by-id":O.value,"create-tag":F,"create-tag-i18n-key":"settings.chatHub.providers.modal.edit.models.create"},null,8,["modelValue","class","placeholder","all-tags","is-loading","tags-by-id"])],2)):d("",!0)],2)])),footer:p((()=>[m("div",{class:g(l.$style.footer)},[m("div",{class:g(l.$style.footerRight)},[s(o(_),{variant:"subtle",onClick:ee},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.cancel")),1)])),_:1}),s(o(_),{variant:"solid",onClick:X,disabled:le.value},{default:p((()=>[b(t(o(G).baseText("settings.chatHub.providers.modal.edit.confirm")),1)])),_:1},8,["disabled"])],2)],2)])),_:1},8,["name","event-bus"]))}}),[["__cssModules",{$style:{header:"_header_3xawo_125",content:"_content_3xawo_131",container:"_container_3xawo_138",credentialContainer:"_credentialContainer_3xawo_146",credentialPicker:"_credentialPicker_3xawo_153",modelPicker:"_modelPicker_3xawo_157",footer:"_footer_3xawo_161",footerRight:"_footerRight_3xawo_168"}}]]))}}}));
//# sourceMappingURL=ProviderSettingsModal-legacy-DGAl5lXv.js.map