(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`3c8c591d-30f5-4207-9a18-05f1c9bcdf38`,e._sentryDebugIdIdentifier=`sentry-dbid-3c8c591d-30f5-4207-9a18-05f1c9bcdf38`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{At as t,Bt as n,C as r,Cn as i,D as a,E as o,F as s,G as c,Gt as l,H as u,Ht as d,It as f,J as p,M as m,Mt as h,P as g,Q as _,T as v,U as y,Z as b,_ as x,_t as S,bn as C,bt as w,et as T,ft as E,h as ee,it as te,j as D,jt as ne,kt as O,m as re,mt as ie,o as ae,p as oe,vn as k,w as A,xt as se}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{g as ce,yt as le}from"./_MapCache-DjbOQyB7.js";import{C as ue,Dt as de,Et as fe,F as pe,Hi as me,Mi as he,Nt as ge,Oi as _e,Ui as ve,V as ye,Vi as be,d as xe,ft as Se,ji as Ce,ot as we,pt as Te,wi as Ee}from"./src-CppJvwzX.js";import{t as De}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{t as Oe}from"./date-picker-CHH0vNVG.js";import{Lt as ke,Tr as Ae,fn as je,sa as Me,wr as Ne,yr as Pe,zt as Fe}from"./users.store-pCkD7Zo0.js";import{$r as Ie,Hr as Le,Jr as Re,Kr as ze,L as Be,Lr as Ve,Nr as He,Pr as Ue,Qr as We,Rr as Ge,Ss as Ke,Vr as qe,Wr as Je,Xr as Ye,Yr as Xe,Zr as Ze,ei as Qe,el as $e,na as et,oo as tt,qr as nt,zr as rt}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import{c as it}from"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import{t as at}from"./useDebounce-D6lADr4O.js";import{n as ot,t as st}from"./dataTable.store-dy4dvFXe.js";import"./Modal-DQeDdfPI.js";import{t as ct}from"./useClipboard-Duc7LjuO.js";import"./ProjectIcon-D-HRIqn6.js";import{t as lt}from"./orderBy-KAUxkCYD.js";import{t as ut}from"./sourceControl.eventBus-C0Et3VBv.js";import{t as dt}from"./ProjectBreadcrumb-Crk3D_Vf.js";import{t as ft}from"./DataTableActions-DbP1VLfN.js";import{t as pt}from"./SelectedItemsInfo-BMlgQAdy.js";var mt=`/`,ht=De(g({__name:`DataTableBreadcrumbs`,props:{dataTable:{},readOnly:{type:Boolean}},setup(e){let t=e,n=ie(`renameInput`),s=st(),u=le(),d=Ee(),p=Pe(),h=f(t.dataTable.name),g=r(()=>!s.projectPermissions.dataTable.update||t.readOnly),_=r(()=>t.dataTable.project??null),y=r(()=>_.value?[{id:`datatables`,label:u.baseText(`dataTable.dataTables`),href:`/projects/${_.value.id}/datatables`}]:[]),b=async e=>{e.href&&await d.push(e.href)},x=async()=>{await d.push({name:Qe,params:{projectId:t.dataTable.projectId}})},C=async()=>{await c(),n.value&&typeof n.value.forceFocus==`function`&&n.value.forceFocus()},E=async e=>{try{if(!await s.updateDataTable(t.dataTable.id,e,t.dataTable.projectId))throw Error(u.baseText(`generic.unknownError`));h.value=e,Fe.track(`User renamed data table`,{data_table_id:t.dataTable.id,data_table_project_id:t.dataTable.projectId})}catch(e){h.value=t.dataTable.name,p.showError(e,u.baseText(`dataTable.rename.error`))}};return S(()=>t.dataTable.name,e=>{h.value=e}),(r,s)=>(T(),a(`div`,{class:k(r.$style[`data-table-breadcrumbs`]),"data-test-id":`data-table-breadcrumbs`},[m(l(ue),{items:y.value,separator:mt,"highlight-last-item":!1,onItemSelected:b},{prepend:w(()=>[_.value?(T(),v(dt,{key:0,"current-project":_.value},null,8,[`current-project`])):o(``,!0)]),append:w(()=>[A(`span`,{class:k(r.$style.separator)},i(mt),2),m(l(xe),{ref_key:`renameInput`,ref:n,modelValue:h.value,"onUpdate:modelValue":[s[0]||=e=>h.value=e,E],"data-test-id":`data-table-header-name-input`,placeholder:l(u).baseText(`dataTable.add.input.name.label`),class:k(r.$style[`breadcrumb-current`]),"read-only":e.readOnly,disabled:g.value},null,8,[`modelValue`,`placeholder`,`class`,`read-only`,`disabled`])]),_:1},8,[`items`]),A(`div`,{class:k(r.$style[`data-table-actions`])},[m(ft,{"data-table":t.dataTable,"is-read-only":e.readOnly,location:`breadcrumbs`,onRename:C,onOnDeleted:x},null,8,[`data-table`,`is-read-only`])],2)],2))}}),[[`__cssModules`,{$style:{"data-table-breadcrumbs":`_data-table-breadcrumbs_23od7_125`,"data-table-actions":`_data-table-actions_23od7_130`,separator:`_separator_23od7_135`,"breadcrumb-current":`_breadcrumb-current_23od7_141`}}]]),gt=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let r=t?this.allAsyncListeners:this.allSyncListeners,i=r.get(e);return!i&&n&&(i=new Set,r.set(e,i)),i}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let r=this.getListeners(e,n,!1);r&&(r.delete(t),r.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&`event`in e){let t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}let{frameworkOverrides:r}=this,i=e=>{let n=r?()=>r.wrapIncoming(e):e;t?this.dispatchAsync(n):n()},a=this.getListeners(n,t,!1);if((a?.size??0)>0){let t=new Set(a);for(let n of t)a?.has(n)&&i(()=>n(e))}let o=this.getGlobalListeners(t);if(o.size>0){let t=new Set(o);for(let r of t)i(()=>r(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(e=>e())}};function _t(e,t){return t}function vt(e){return e?.getLocaleTextFunc()??_t}function yt(e,t,n,r){let i=t[n];return e.getLocaleTextFunc()(n,typeof i==`function`?i(r):i,r)}function bt(e){return e==null||e===``?null:e}function j(e){return e!=null&&e!==``}function M(e){return!j(e)}function xt(e){return e!=null&&typeof e.toString==`function`?e.toString():null}function St(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function Ct(e,t,n=!1){let r=e==null,i=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),r&&i)return 0;if(r)return-1;if(i)return 1;function a(e,t){return e>t?1:e<t?-1:0}if(typeof e!=`string`||!n)return a(e,t);try{return e.localeCompare(t)}catch{return a(e,t)}}var wt=new Set([`__proto__`,`constructor`,`prototype`]);function Tt(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let n of Object.keys(e).filter(e=>!wt.has(e)))t(n,e[n])}}function N(e,t,n=!0,r=!1){j(t)&&Tt(t,(t,i)=>{let a=e[t];a!==i&&(r&&a==null&&typeof i==`object`&&i&&i.constructor===Object&&(a={},e[t]=a),Dt(i)&&Dt(a)&&!Array.isArray(a)?N(a,i,n,r):(n||i!==void 0)&&(e[t]=i))})}function Et(e,t,n){if(!t||!e)return;if(!n)return e[t];let r=t.split(`.`),i=e;for(let e=0;e<r.length;e++){if(i==null)return;i=i[r[e]]}return i}function Dt(e){return typeof e==`object`&&!!e}var Ot=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return{...t};let n={};return N(n,e.gridOptions,!0,!0),e.mergeStrategy===`deep`?N(n,t,!0,!0):n={...n,...t},e.gridOptions.context&&(n.context=e.gridOptions.context),t.context&&(e.mergeStrategy===`deep`&&n.context&&N(t.context,n.context,!0,!0),n.context=t.context),n}};Ot.gridOptions=void 0,Ot.mergeStrategy=`shallow`;var kt=Ot,At={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:`hover`,tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:`standard`,tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:`	`,suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:`never`,pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:`normal`,ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:`singleColumn`,groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:`never`,suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:`clientSide`,asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:`_`,viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:`xy`,suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:`new`,reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1};function jt(e,t,n){n==null||typeof n==`string`&&n==``?Nt(e,t):Mt(e,t,n)}function Mt(e,t,n){e.setAttribute(Pt(t),n.toString())}function Nt(e,t){e.removeAttribute(Pt(t))}function Pt(e){return`aria-${e}`}function Ft(e,t){t?e.setAttribute(`role`,t):e.removeAttribute(`role`)}function It(e){let t;return t=e===`asc`?`ascending`:e===`desc`?`descending`:e===`mixed`?`other`:`none`,t}function Lt(e){return e.getAttribute(`aria-label`)}function Rt(e,t){jt(e,`label`,t)}function zt(e,t){jt(e,`labelledby`,t)}function Bt(e,t){jt(e,`live`,t)}function Vt(e,t){jt(e,`atomic`,t)}function Ht(e,t){jt(e,`relevant`,t)}function Ut(e,t){jt(e,`invalid`,t)}function Wt(e,t){jt(e,`hidden`,t)}function Gt(e,t){Mt(e,`expanded`,t)}function Kt(e,t){Mt(e,`setsize`,t)}function qt(e,t){Mt(e,`posinset`,t)}function Jt(e,t){Mt(e,`multiselectable`,t)}function Yt(e,t){Mt(e,`rowcount`,t)}function Xt(e,t){Mt(e,`rowindex`,t)}function Zt(e,t){Mt(e,`colcount`,t)}function Qt(e,t){Mt(e,`colindex`,t)}function $t(e,t){Mt(e,`colspan`,t)}function en(e,t){Mt(e,`sort`,t)}function tn(e){Nt(e,`sort`)}function nn(e,t){jt(e,`selected`,t)}function rn(e,t){jt(e,`controls`,t)}function an(e,t){rn(e,t.id),zt(t,e.id)}function on(e,t){jt(e,`owns`,t)}function sn(e,t){return t===void 0?e(`ariaIndeterminate`,`indeterminate`):t===!0?e(`ariaChecked`,`checked`):e(`ariaUnchecked`,`unchecked`)}var cn,ln,un,dn,fn,pn,mn;function hn(){return cn===void 0&&(cn=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),cn}function gn(){return ln===void 0&&(ln=/(firefox)/i.test(navigator.userAgent)),ln}function _n(){return un===void 0&&(un=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),un}function vn(){return dn===void 0&&(dn=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform===`MacIntel`&&navigator.maxTouchPoints>1),dn}function yn(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute(`tabIndex`);return t===-1&&(n===null||n===``&&!gn())?null:t.toString()}function bn(){if(mn!==void 0)return mn;if(!document.body)return-1;let e=1e6,t=gn()?6e6:1e9,n=document.createElement(`div`);for(document.body.appendChild(n);;){let r=e*2;if(n.style.height=r+`px`,r>t||n.clientHeight!==r)break;e=r}return document.body.removeChild(n),mn=e,e}function xn(){return pn??Sn(),pn}function Sn(){let e=document.body,t=document.createElement(`div`);t.style.width=t.style.height=`100px`,t.style.opacity=`0`,t.style.overflow=`scroll`,t.style.msOverflowStyle=`scrollbar`,t.style.position=`absolute`,e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(pn=n,fn=n===0)}function Cn(){return fn??Sn(),fn}var wn=`[tabindex], input, select, button, textarea, [href]`,Tn=`[disabled], .ag-disabled:not(.ag-button), .ag-disabled *`;function En(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,`input, select, button, textarea`),r=t.call(e,Tn),i=Vn(e);return n&&!r&&i}function P(e,t,n={}){let{skipAriaHidden:r}=n;e.classList.toggle(`ag-hidden`,!t),r||Wt(e,!t)}function Dn(e,t,n={}){let{skipAriaHidden:r}=n;e.classList.toggle(`ag-invisible`,!t),r||Wt(e,!t)}function On(e,t){let n=`disabled`,r=t?e=>e.setAttribute(n,``):e=>e.removeAttribute(n);r(e);let i=e.querySelectorAll(`input`)??[];for(let e of i)r(e)}function kn(e,t,n){let r=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n==`number`){if(++r>n)break}else if(e===n)break}return!1}function An(e){let{height:t,width:n,borderTopWidth:r,borderRightWidth:i,borderBottomWidth:a,borderLeftWidth:o,paddingTop:s,paddingRight:c,paddingBottom:l,paddingLeft:u,marginTop:d,marginRight:f,marginBottom:p,marginLeft:m,boxSizing:h}=window.getComputedStyle(e);return{height:parseFloat(t||`0`),width:parseFloat(n||`0`),borderTopWidth:parseFloat(r||`0`),borderRightWidth:parseFloat(i||`0`),borderBottomWidth:parseFloat(a||`0`),borderLeftWidth:parseFloat(o||`0`),paddingTop:parseFloat(s||`0`),paddingRight:parseFloat(c||`0`),paddingBottom:parseFloat(l||`0`),paddingLeft:parseFloat(u||`0`),marginTop:parseFloat(d||`0`),marginRight:parseFloat(f||`0`),marginBottom:parseFloat(p||`0`),marginLeft:parseFloat(m||`0`),boxSizing:h}}function jn(e){let t=An(e);return t.boxSizing===`border-box`?t.height-t.paddingTop-t.paddingBottom:t.height}function Mn(e){let t=An(e);return t.boxSizing===`border-box`?t.width-t.paddingLeft-t.paddingRight:t.width}function Nn(e){let{height:t,marginBottom:n,marginTop:r}=An(e);return Math.floor(t+n+r)}function Pn(e){let{width:t,marginLeft:n,marginRight:r}=An(e);return Math.floor(t+n+r)}function Fn(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:r,borderRightWidth:i,borderBottomWidth:a}=An(e);return{top:t.top+(n||0),left:t.left+(r||0),right:t.right+(i||0),bottom:t.bottom+(a||0)}}function In(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function Ln(e,t,n){n&&(t*=-1),e.scrollLeft=t}function Rn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function zn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Bn(e){return!!e.offsetParent}function Vn(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!Bn(e)||window.getComputedStyle(e).visibility!==`visible`)}function Hn(e){let t=document.createElement(`div`);return t.innerHTML=(e||``).trim(),t.firstChild}function Un(e,t,n){n&&n.nextSibling===t||(e.firstChild?n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement(`afterbegin`,t):e.appendChild(t))}function Wn(e,t){for(let n=0;n<t.length;n++){let r=t[n],i=e.children[n];i!==r&&e.insertBefore(r,i)}}function Gn(e){return e.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}function Kn(e,t){if(t)for(let n of Object.keys(t)){let r=t[n];if(!n||!n.length||r==null)continue;let i=Gn(n),a=r.toString(),o=a.replace(/\s*!important/g,``),s=o.length==a.length?void 0:`important`;e.style.setProperty(i,o,s)}}function qn(e){return()=>{let t=e();return t?Jn(t)||Yn(t):!0}}function Jn(e){return e.clientWidth<e.scrollWidth}function Yn(e){return e.clientHeight<e.scrollHeight}function Xn(e,t){t===`flex`?(e.style.removeProperty(`width`),e.style.removeProperty(`minWidth`),e.style.removeProperty(`maxWidth`),e.style.flex=`1 1 auto`):Zn(e,t)}function Zn(e,t){t=$n(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Qn(e,t){t=$n(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function $n(e){return typeof e==`number`?`${e}px`:e}function er(e){return e instanceof Node||e instanceof HTMLElement}function tr(e,t,n){n==null||n===``?e.removeAttribute(t):e.setAttribute(t,n.toString())}function nr(e,t,n){let r=Yr(e).ResizeObserver,i=r?new r(n):null;return i?.observe(t),()=>i?.disconnect()}function rr(e,t){let n=Yr(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var ir=`data-ref`,ar;function or(){return ar??=document.createTextNode(` `),ar.cloneNode()}function F(e){let{attrs:t,children:n,cls:r,ref:i,role:a,tag:o}=e,s=document.createElement(o);if(r&&(s.className=r),i&&s.setAttribute(ir,i),a&&s.setAttribute(`role`,a),t)for(let e of Object.keys(t))s.setAttribute(e,t[e]);if(n)if(typeof n==`string`)s.textContent=n;else{let e=!0;for(let t of n)t&&(typeof t==`string`?(s.appendChild(document.createTextNode(t)),e=!1):typeof t==`function`?s.appendChild(t()):(e&&=(s.appendChild(or()),!1),s.append(F(t)),s.appendChild(or())))}return s}var sr={};function cr(e,t){sr[t]||(e(),sr[t]=!0)}function lr(e,t,...n){e.get(`debug`)&&console.log(`AG Grid: `+t,...n)}function ur(e,...t){cr(()=>console.warn(`AG Grid: `+e,...t),e+t?.join(``))}function dr(e,...t){cr(()=>console.error(`AG Grid: `+e,...t),e+t?.join(``))}var fr={pending:!1,funcs:[]},pr={pending:!1,funcs:[]};function mr(e,t=`setTimeout`,n){let r=t===`raf`?pr:fr;if(r.funcs.push(e),r.pending)return;r.pending=!0;let i=()=>{let e=r.funcs.slice();r.funcs.length=0,r.pending=!1,e.forEach(e=>e())};t===`raf`?rr(n,i):window.setTimeout(i,0)}function hr(e,t,n){let r;return function(...i){let a=this;window.clearTimeout(r),r=window.setTimeout(function(){e.isAlive()&&t.apply(a,i)},n)}}function gr(e,t){let n=0;return function(...r){let i=this,a=Date.now();a-n<t||(n=a,e.apply(i,r))}}function _r(e,t,n=100,r){let i=Date.now(),a=null,o=!1,s=()=>{let s=Date.now()-i>n;(e()||s)&&(t(),o=!0,a!=null&&(window.clearInterval(a),a=null),s&&r&&ur(r))};s(),o||(a=window.setInterval(s,10))}var vr=`https://www.ag-grid.com`,I=`34.1.1`,yr=2e3,br=100,xr=`_version_`,Sr=null,Cr=`${vr}/javascript-data-grid`;function wr(e){Sr=e}function Tr(e){Cr=e}function Er(e,t,n){return Sr?.getConsoleMessage(e,t)??[Pr(e,t,n)]}function Dr(e,t,n,r){e(`error #${t}`,...Er(t,n,r))}function Or(e){if(!e)return String(e);let t={};for(let n of Object.keys(e))typeof e[n]!=`object`&&typeof e[n]!=`function`&&(t[n]=e[n]);return JSON.stringify(t)}function kr(e){let t=e;return e instanceof Error?t=e.toString():typeof e==`object`&&(t=Or(e)),t}function Ar(e){return e===void 0?`undefined`:e===null?`null`:e}function jr(e,t){return`${e}?${t.toString()}`}function Mr(e,t,n){let r=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length),i=jr(e,t);for(let[a,o]of r){if(a===xr)continue;let r=i.length-n;if(r<=0)break;let s=r+3,c=o.length-s>br?o.slice(0,o.length-s)+`...`:o.slice(0,br)+`...`;t.set(a,c),i=jr(e,t)}return i}function Nr(e,t){let n=new URLSearchParams;if(n.append(xr,I),t)for(let e of Object.keys(t))n.append(e,kr(t[e]));let r=`${Cr}/errors/${e}`,i=jr(r,n);return i.length<=yr?i:Mr(r,n,yr)}var Pr=(e,t,n)=>{let r=Nr(e,t);return`${n?n+` 
`:``}Visit ${r}${n?``:` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function L(...e){Dr(ur,e[0],e[1])}function R(...e){Dr(dr,e[0],e[1])}function Fr(e,t,n){Dr(dr,e,t,n)}function Ir(e,t){let n=t[0];return`error #${n} `+Er(n,t[1],e).join(` `)}function Lr(...e){return Ir(void 0,e)}function Rr(e,t){return e.get(`rowModelType`)===t}function z(e,t){return Rr(e,`clientSide`)}function zr(e,t){return Rr(e,`serverSide`)}function B(e,t){return e.get(`domLayout`)===t}function Br(e){return bi(e)!==void 0}function Vr(e){return typeof e.get(`getRowHeight`)==`function`}function Hr(e,t){return t?!e.get(`enableStrictPivotColumnOrder`):e.get(`maintainColumnOrder`)}function Ur(e,t,n=!1,r){let{gos:i,environment:a}=e;if(r??=a.getDefaultRowHeight(),Vr(i)){if(n)return{height:r,estimated:!0};let e={node:t,data:t.data},a=i.getCallback(`getRowHeight`)(e);if(Kr(a))return a===0&&L(23),{height:Math.max(1,a),estimated:!1}}if(t.detail&&i.get(`masterDetail`))return Wr(i);let o=i.get(`rowHeight`);return{height:o&&Kr(o)?o:r,estimated:!1}}function Wr(e){if(e.get(`detailRowAutoHeight`))return{height:1,estimated:!1};let t=e.get(`detailRowHeight`);return Kr(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Gr(e){let{environment:t,gos:n}=e,r=n.get(`rowHeight`);if(!r||M(r))return t.getDefaultRowHeight();let i=t.refreshRowHeightVariable();return i===-1?(L(24),t.getDefaultRowHeight()):i}function Kr(e){return!isNaN(e)&&typeof e==`number`&&isFinite(e)}function qr(e,t,n){let r=t[e.getDomDataKey()];return r?r[n]:void 0}function Jr(e,t,n,r){let i=e.getDomDataKey(),a=t[i];M(a)&&(a={},t[i]=a),a[n]=r}function V(e){let{gos:t,eGridDiv:n}=e,r=null,i=t.get(`getDocument`);return i&&j(i)?r=i():n&&(r=n.ownerDocument),r&&j(r)?r:document}function Yr(e){return V(e).defaultView||window}function Xr(e){return e.eGridDiv.getRootNode()}function H(e){return Xr(e).activeElement}function Zr(e){let t=null,n=null;try{t=V(e).fullscreenElement}catch{}finally{t||=Xr(e),n=t.querySelector(`body`)||(t instanceof ShadowRoot?t:t instanceof Document?t?.documentElement:t)}return n}function Qr(e){return Zr(e)?.clientWidth??(window.innerWidth||-1)}function $r(e){return Zr(e)?.clientHeight??(window.innerHeight||-1)}function ei(e,t,n){let r=e.getBoundingClientRect().height,i=Qr(n)-2,a=$r(n)-2;if(!e.offsetParent)return;let o=Fn(e.offsetParent),{clientY:s,clientX:c}=t,l=s-o.top-r/2,u=c-o.left-10,d=V(n),f=d.defaultView||window,p=f.pageYOffset||d.documentElement.scrollTop,m=f.pageXOffset||d.documentElement.scrollLeft;i>0&&u+e.clientWidth>i+m&&(u=i+m-e.clientWidth),u<0&&(u=0),a>0&&l+e.clientHeight>a+p&&(l=a+p-e.clientHeight),l<0&&(l=0),e.style.left=`${u}px`,e.style.top=`${l}px`}function ti(e){let t=H(e);return t===null||t===V(e).body}function ni(e){return e.get(`ensureDomOrder`)?!1:e.get(`animateRows`)}function ri(e){return!(e.get(`paginateChildRows`)||e.get(`groupHideOpenParents`)||B(e,`print`))}function ii(e){return!e.get(`autoGroupColumnDef`)?.comparator&&!e.get(`treeData`)}function ai(e){let t=e.get(`groupAggFiltering`);if(typeof t==`function`)return e.getCallback(`groupAggFiltering`);if(t===!0)return()=>!0}function oi(e){return e.get(`grandTotalRow`)}function si(e,t){return t?!1:e.get(`groupDisplayType`)===`groupRows`}function ci(e,t,n){return!!t.group&&!t.footer&&si(e,n)}function li(e){let t=e.getCallback(`getRowId`);return t===void 0?t:e=>{let n=t(e);return typeof n!=`string`&&(cr(()=>L(25,{id:n}),`getRowIdString`),n=String(n)),n}}function ui(e){return e?.checkboxes??!0}function di(e){return e?.mode===`multiRow`&&(e.headerCheckbox??!0)}function fi(e){if(typeof e==`object`)return e.checkboxLocation??`selectionColumn`}function pi(e){return e?.hideDisabledCheckboxes??!1}function mi(e){return typeof e.get(`rowSelection`)!=`string`}function hi(e){let t=e.get(`cellSelection`);return t===void 0?e.get(`enableRangeSelection`):!!t}function gi(e){let t=e.get(`rowSelection`)??`single`;if(typeof t==`string`){let t=e.get(`suppressRowClickSelection`),n=e.get(`suppressRowDeselection`);return t&&n?!1:t?`enableDeselection`:n?`enableSelection`:!0}return t.mode===`singleRow`||t.mode===`multiRow`?t.enableClickSelection??!1:!1}function _i(e){let t=gi(e);return t===!0||t===`enableSelection`}function vi(e){let t=gi(e);return t===!0||t===`enableDeselection`}function yi(e){let t=e.get(`rowSelection`);return typeof t==`string`?e.get(`isRowSelectable`):t?.isRowSelectable}function bi(e){let t=`beanName`in e&&e.beanName===`gos`?e.get(`rowSelection`):e.rowSelection;if(typeof t==`string`)switch(t){case`multiple`:return`multiRow`;case`single`:return`singleRow`;default:return}switch(t?.mode){case`multiRow`:case`singleRow`:return t.mode;default:return}}function xi(e){return bi(e)===`multiRow`}function Si(e){let t=e.get(`rowSelection`);return typeof t==`string`?e.get(`rowMultiSelectWithClick`):t?.enableSelectionWithoutKeys??!1}function Ci(e){let t=e.get(`rowSelection`);if(typeof t==`string`){let t=e.get(`groupSelectsChildren`),n=e.get(`groupSelectsFiltered`);return t&&n?`filteredDescendants`:t?`descendants`:`self`}return t?.mode===`multiRow`?t.groupSelects:void 0}function wi(e,t=!0){let n=e.get(`rowSelection`);return typeof n==`object`?n.mode===`multiRow`?n.selectAll:`all`:t?`all`:void 0}function Ti(e){let t=Ci(e);return t===`descendants`||t===`filteredDescendants`}function Ei(e){let t=e.get(`rowSelection`);return typeof t==`object`&&t.masterSelects||`self`}function Di(e){return e.isModuleRegistered(`SetFilter`)&&!e.get(`suppressSetFilterByDefault`)}function Oi(e){return e.get(`columnMenu`)===`legacy`}function ki(e){return!Oi(e)}function Ai(e){return!e||e.length<2?e:`on`+e[0].toUpperCase()+e.substring(1)}function ji(e,t,n){typeof e!=`object`&&(e={});let r={...e};return n.forEach(e=>{let n=t[e];n!==void 0&&(r[e]=n)}),r}function Mi(e,t){if(!e)return;let n={},r=!1;if(Object.keys(e).forEach(t=>{n[t]=e[t],r=!0}),!r)return;let i={type:`gridOptionsChanged`,options:n};t.dispatchEvent(i);let a={type:`componentStateChanged`,...n};t.dispatchEvent(a)}function U(e,t){return e.addGridCommonParams(t)}function Ni(e){return e.get(`treeData`)?e.get(`treeDataParentIdField`)?`treeSelfRef`:e.get(`treeDataChildrenField`)?`treeNested`:`treePath`:`group`}var Pi=`__ag_Grid_Stop_Propagation`,Fi=[`touchstart`,`touchend`,`touchmove`,`touchcancel`,`scroll`],Ii=[`wheel`],Li={};function Ri(e){e[Pi]=!0}function zi(e){return e[Pi]===!0}var Bi=(()=>{let e={select:`input`,change:`input`,submit:`form`,reset:`form`,error:`img`,load:`img`,abort:`img`};return t=>{if(typeof Li[t]==`boolean`)return Li[t];let n=document.createElement(e[t]||`div`);return t=`on`+t,Li[t]=t in n}})();function Vi(e,t,n){let r=t;for(;r;){let t=qr(e,r,n);if(t)return t;r=r.parentElement}return null}function Hi(e,t){return!t||!e?!1:Wi(t).indexOf(e)>=0}function Ui(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function Wi(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():Ui(t)}function Gi(e,t,n,r){let i=Ki(n),a;i!=null&&(a={passive:i}),e&&e.addEventListener&&e.addEventListener(t,n,r,a)}var Ki=e=>{let t=Fi.includes(e),n=Ii.includes(e);if(t)return!0;if(n)return!1},W=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){let{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:`destroyed`})}addEventListener(e,t,n){this.localEventService||=new gt,this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let r of Object.keys(t)){let i=t[r];i&&n.push(this._setupListener(e,r,i))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let r;return qi(e)?(e.__addEventListener(t,n),r=()=>(e.__removeEventListener(t,n),null)):(e instanceof HTMLElement?Gi(this.beans.frameworkOverrides,e,t,n):e.addEventListener(t,n),r=()=>(e.removeEventListener(t,n),null)),this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}setupGridOptionListener(e,t){let{gos:n}=this;n.addPropertyEventListener(e,t);let r=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join(`-`)+ this.propertyListenerId++,r=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=e.changeSet.id}t({type:`gridPropertyChanged`,changeSet:e.changeSet,source:e.source})};e.forEach(e=>this.setupGridOptionListener(e,r))}getLocaleTextFunc(){return vt(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function qi(e){return e.__addEventListener!==void 0}var Ji=/[&<>"']/g,Yi={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`};function Xi(e){return e?.toString().toString()??null}function Zi(e){return Xi(e)?.replace(Ji,e=>Yi[e])??null}var Qi={resizable:!0,sortable:!0},$i=0;function ea(){return $i++}function ta(e){return e instanceof na}var na=class extends W{constructor(e,t,n,r){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=r,this.isColumn=!0,this.instanceId=ea(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new gt,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Zi(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){let{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:r}}=this;t?.initCol(this);let i=e.hide;i===void 0?this.visible=!e.initialHide:this.visible=!i,n?.initCol(this),r?.initCol(this)}setColDef(e,t,n){let r=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),r&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent(`colDefChanged`,n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth(`gridInitializing`),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){let{gos:e,colDef:{field:t,tooltipField:n}}=this,r=e.get(`suppressFieldDotNotation`);this.fieldContainsDots=j(t)&&t.indexOf(`.`)>=0&&!r,this.tooltipFieldContainsDots=j(n)&&n.indexOf(`.`)>=0&&!r}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??2**53-1}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){let e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:t=>{let n=e.recreateColDef(this.colDef);this.setColDef(n,n,t.source)}})}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=e.width,r=e.initialWidth;return t=n??r??200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return U(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue(`resizable`)}getColDefValue(e){return this.colDef[e]??Qi[e]}isColumnFunc(e,t){return typeof t==`boolean`?t:typeof t==`function`?t(this.createColumnFunctionCallbackParams(e)):!1}createColumnEvent(e,t){return U(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue(`sortable`)}isSortAscending(){return this.sort===`asc`}isSortDescending(){return this.sort===`desc`}isSortNone(){return M(this.sort)}isSorting(){return j(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent(`leftChanged`,t))}isFilterActive(){return this.filterActive}isHovered(){return L(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent(`firstRightPinnedChanged`,t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent(`lastLeftPinnedChanged`,t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned===`left`||this.pinned===`right`}isPinnedLeft(){return this.pinned===`left`}isPinnedRight(){return this.pinned===`right`}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent(`visibleChanged`,t)),this.dispatchStateUpdatedEvent(`hide`)}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return U(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(M(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(M(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!==`flex`&&t!==`gridInitializing`&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent(`width`)}fireColumnWidthChangedEvent(e){this.dispatchColEvent(`widthChanged`,e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){let r=this.createColumnEvent(e,t);n&&N(r,n),this.colEventSvc.dispatchEvent(r)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:`columnStateUpdated`,key:e})}};function G(e){return e instanceof ra}var ra=class extends W{constructor(e,t,n,r){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=r,this.isColumn=!1,this.expandable=!1,this.instanceId=ea(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:`expandedChanged`})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(let t of this.children)ta(t)?e(t):G(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach(t=>{ta(t)?e.push(t):G(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener(`visibleChanged`,e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener(`visibleChanged`,e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,r=this.findChildrenRemovingPadding();for(let i=0,a=r.length;i<a;i++){let a=r[i];if(!a.isVisible())continue;let o=a.getColumnGroupShow();o===`open`?(e=!0,n=!0):o===`closed`?(t=!0,n=!0):(e=!0,t=!0)}let i=e&&t&&n;this.expandable!==i&&(this.expandable=i,this.dispatchLocalEvent({type:`expandableChanged`}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(n=>{G(n)&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},ia={numericColumn:{headerClass:`ag-right-aligned-header`,cellClass:`ag-right-aligned-cell`},rightAligned:{headerClass:`ag-right-aligned-header`,cellClass:`ag-right-aligned-cell`}};function aa(e,t,n){let r={},i=e.gos;return Object.assign(r,i.get(`defaultColGroupDef`)),Object.assign(r,t),i.validateColDef(r,n),r}var oa=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=xt(e);let n=0;for(;;){let r=e??t;if(r?n!==0&&(r+=`_`+n):r=n,!this.existingKeys[r]){let t=String(r);return e&&n>0&&L(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}n++}}},sa=Object.freeze([]);function K(e){if(e?.length)return e[e.length-1]}function ca(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((e,r)=>n?n(e,t[r]):t[r]===e)}function la(e,t){if(e)for(let n of e)t(n)}function ua(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function da(e,t,n){for(let n=0;n<t.length;n++)ua(e,t[n]);for(let r=t.length-1;r>=0;r--)e.splice(n,0,t[r])}var fa=`ag-Grid-AutoColumn`,pa=`ag-Grid-SelectionColumn`;function ma(e){let t=[],n=e=>{for(let r=0;r<e.length;r++){let i=e[r];ta(i)?t.push(i):G(i)&&n(i.getChildren())}};return n(e),t}function ha(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)}function ga(e,t,n){let r={};if(!t)return;Ra(null,t,e=>{r[e.getInstanceId()]=e}),n&&Ra(null,n,e=>{r[e.getInstanceId()]=null});let i=Object.values(r).filter(e=>e!=null);e.context.destroyBeans(i)}function _a(e){return e.getId().startsWith(fa)}function va(e){return(typeof e==`string`?e:`getColId`in e?e.getColId():e.colId)?.startsWith(`ag-Grid-SelectionColumn`)??!1}function ya(e){return(typeof e==`string`?e:`getColId`in e?e.getColId():e.colId)?.startsWith(`ag-Grid-RowNumbersColumn`)??!1}function ba(e){return va(e)||ya(e)}function xa(e){let t=[];return e instanceof Array?t=e:typeof e==`string`&&(t=e.split(`,`)),t}function Sa(e,t){return ca(e,t,(e,t)=>e.getColId()===t.getColId())}function Ca(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function wa(e){return e===`gridOptionsUpdated`?`gridOptionsChanged`:e}function Ta(e,t){let n=e===t,r=e.getColDef()===t,i=e.getColId()==t;return n||r||i}var Ea=(e,t)=>(n,r)=>{let i={value1:void 0,value2:void 0},a=!1;return e&&(e[n]!==void 0&&(i.value1=e[n],a=!0),j(r)&&e[r]!==void 0&&(i.value2=e[r],a=!0)),!a&&t&&(t[n]!==void 0&&(i.value1=t[n]),j(r)&&t[r]!==void 0&&(i.value2=t[r])),i};function Da(e,t=null,n,r,i){let a=new oa,{existingCols:o,existingGroups:s,existingColKeys:c}=Oa(r);a.addExistingKeys(c);let l=ka(e,t,0,n,o,a,s,i),{colGroupSvc:u}=e,d=u?.findMaxDepth(l,0)??0,f=u?u.balanceColumnTree(l,0,d,a):l;return Ra(null,f,(e,t)=>{G(e)&&e.setupExpandable(),e.originalParent=t}),{columnTree:f,treeDepth:d}}function Oa(e){let t=[],n=[],r=[];return e&&Ra(null,e,e=>{if(G(e)){let t=e;n.push(t)}else{let n=e;r.push(n.getId()),t.push(n)}}),{existingCols:t,existingGroups:n,existingColKeys:r}}function ka(e,t,n,r,i,a,o,s){if(!t)return[];let{colGroupSvc:c}=e,l=Array(t.length);for(let u=0;u<l.length;u++){let d=t[u];c&&La(d)?l[u]=c.createProvidedColumnGroup(r,d,n,i,a,o,s):l[u]=Aa(e,r,d,i,a,s)}return l}function Aa(e,t,n,r,i,a){let o=Na(n,r);o&&r?.splice(o.idx,1);let s=o?.column;if(s){let t=Pa(e,n,s.getColId());s.setColDef(t,n,a),Ma(e,s,t,a)}else{let r=i.getUniqueKey(n.colId,n.field);s=new na(Pa(e,n,r),n,r,t),e.context.createBean(s)}return e.dataTypeSvc?.addColumnListeners(s),s}function ja(e,t,n,r,i,a,o,s){let{sortSvc:c,pinnedCols:l,colFlex:u}=e;n!==void 0&&t.setVisible(!n,s),c&&(c.updateColSort(t,r,s),i!==void 0&&c.setColSortIndex(t,i)),a!==void 0&&l?.setColPinned(t,a),o!==void 0&&u?.setColFlex(t,o)}function Ma(e,t,n,r){ja(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,r);let i=t.getFlex();if(!(i!=null&&i>0))if(n.width!=null)t.setActualWidth(n.width,r);else{let e=t.getActualWidth();t.setActualWidth(e,r)}}function Na(e,t){if(t)for(let n=0;n<t.length;n++){let r=t[n].getUserProvidedColDef();if(r){if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(r.field===e.field)return{idx:n,column:t[n]};continue}if(r===e)return{idx:n,column:t[n]}}}}function Pa(e,t,n,r){let{gos:i,dataTypeSvc:a}=e,o={};N(o,i.get(`defaultColDef`),!1,!0);let s=Fa(e,o,t,n);s&&Ia(e,s,o);let c=o.cellDataType;N(o,t,!1,!0),c!==void 0&&(o.cellDataType=c);let l=i.get(`autoGroupColumnDef`),u=ii(i);return t.rowGroup&&l&&u&&N(o,{sort:l.sort,initialSort:l.initialSort},!1,!0),a&&(a.postProcess(o),a.validateColDef(o)),i.validateColDef(o,n,r),o}function Fa(e,t,n,r){let i=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,r),a=n.type??i??t.type;return t.type=a,a?xa(a):void 0}function Ia(e,t,n){if(!t.length)return;let r=Object.assign({},ia),i=e.gos.get(`columnTypes`)||{};for(let e of Object.keys(i)){let t=i[e];e in r?L(34,{key:e}):(t.type&&L(35),r[e]=t)}t.forEach(e=>{let t=r[e.trim()];t?N(n,t,!1,!0):L(36,{t:e})})}function La(e){return e.children!==void 0}function Ra(e,t,n){if(t)for(let r=0;r<t.length;r++){let i=t[r];G(i)&&Ra(i,i.getChildren(),n),n(i,e)}}function za(e,t){let n=[],r=[],i=[];return e.forEach(e=>{let t=e.getColDef().lockPosition;t===`right`?i.push(e):t===`left`||t===!0?n.push(e):r.push(e)}),t.get(`enableRtl`)?[...i,...r,...n]:[...n,...r,...i]}function Ba(e,t){let n=!0;return Ra(null,t,t=>{if(!G(t))return;let r=t,i=r.getColGroupDef();if(!(i&&i.marryChildren))return;let a=[];r.getLeafColumns().forEach(t=>{let n=e.indexOf(t);a.push(n)}),Math.max.apply(Math,a)-Math.min.apply(Math,a)>r.getLeafColumns().length-1&&(n=!1)}),n}function Va(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let r=1;r<e.length;r++)if(n!==t(e[r]))return;return n}function Ha(e,t,n){if(!t.length)return;let r=t.length===1?t[0]:null,i=Va(t,e=>e.getPinned());e.dispatchEvent({type:`columnPinned`,pinned:i??null,columns:t,column:r,source:n})}function Ua(e,t,n){if(!t.length)return;let r=t.length===1?t[0]:null,i=Va(t,e=>e.isVisible());e.dispatchEvent({type:`columnVisible`,visible:i,columns:t,column:r,source:n})}function Wa(e,t,n,r){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:r})}function Ga(e,t,n,r,i=null){t?.length&&e.dispatchEvent({type:`columnResized`,columns:t,column:t.length===1?t[0]:null,flexColumns:i,finished:n,source:r})}function Ka(e,t,n){let{colModel:r,rowGroupColsSvc:i,pivotColsSvc:a,autoColSvc:o,selectionColSvc:s,colAnimation:c,visibleCols:l,pivotResultCols:u,environment:d,valueColsSvc:f,eventSvc:p,gos:m}=e,h=r.getColDefCols()??[],g=s?.getColumns();if(!h?.length&&!g?.length)return!1;if(t?.state&&!t.state.forEach)return L(32),!1;let _=(r,o,s,c,l)=>{if(!r)return;let u=Ea(o,t.defaultState),p=u(`flex`).value1;if(ja(e,r,u(`hide`).value1,u(`sort`).value1,u(`sortIndex`).value1,u(`pinned`).value1,p,n),p==null){let e=u(`width`).value1;if(e!=null){let t=r.getColDef().minWidth??d.getDefaultColumnMinWidth();t!=null&&e>=t&&r.setActualWidth(e,n)}}l||!r.isPrimary()||(f?.syncColumnWithState(r,n,u),i?.syncColumnWithState(r,n,u,s),a?.syncColumnWithState(r,n,u,c))},v=(c,u,d)=>{let f=Ja(e,n),h=u.slice(),g={},v={},y=[],b=[],x=[],S=0,C=i?.columns.slice()??[],w=a?.columns.slice()??[];c.forEach(e=>{let t=e.colId;if(t.startsWith(`ag-Grid-AutoColumn`)){y.push(e),x.push(e);return}if(va(t)){b.push(e),x.push(e);return}let n=d(t);n?(_(n,e,g,v,!1),ua(h,n)):(x.push(e),S+=1)});let T=e=>_(e,null,g,v,!1);h.forEach(T),i?.sortColumns(eo.bind(i,g,C)),a?.sortColumns(eo.bind(a,v,w)),r.refreshCols(!1);let E=(e,t,n=[])=>{t.forEach(t=>{let r=e(t.colId);ua(n,r),_(r,t,null,null,!0)}),n.forEach(T)};return E(e=>o?.getColumn(e)??null,y,o?.getColumns()?.slice()),E(e=>s?.getColumn(e)??null,b,s?.getColumns()?.slice()),Za(t,r,m),l.refresh(n),p.dispatchEvent({type:`columnEverythingChanged`,source:n}),f(),{unmatchedAndAutoStates:x,unmatchedCount:S}};c?.start();let{unmatchedAndAutoStates:y,unmatchedCount:b}=v(t.state||[],h,e=>r.getColDefCol(e));return(y.length>0||j(t.defaultState))&&(b=v(y,u?.getPivotResultCols()?.list??[],e=>u?.getPivotResultCol(e)??null).unmatchedCount),c?.finish(),b===0}function qa(e,t){let{colModel:n,autoColSvc:r,selectionColSvc:i,eventSvc:a,gos:o}=e,s=n.getColDefCols();if(!s?.length)return;let c=ma(n.getColDefColTree()),l=[],u=1e3,d=1e3,f=e=>{let t=Xa(e);M(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=u++),M(t.pivotIndex)&&t.pivot&&(t.pivotIndex=d++),l.push(t)};r?.getColumns()?.forEach(f),i?.getColumns()?.forEach(f),c?.forEach(f),Ka(e,{state:l},t);let p=r?.getColumns()??[];Ka(e,{state:[...i?.getColumns()??[],...p,...s].map(e=>({colId:e.colId})),applyOrder:!0},t),a.dispatchEvent(U(o,{type:`columnsReset`,source:t}))}function Ja(e,t){let{rowGroupColsSvc:n,pivotColsSvc:r,valueColsSvc:i,colModel:a,sortSvc:o,eventSvc:s}=e,c={rowGroupColumns:n?.columns.slice()??[],pivotColumns:r?.columns.slice()??[],valueColumns:i?.columns.slice()??[]},l=Ya(e),u={};return l.forEach(e=>{u[e.colId]=e}),()=>{let i=(e,n,r,i)=>{if(ca(n.map(i),r.map(i)))return;let a=new Set(n);r.forEach(e=>{a.delete(e)||a.add(e)});let o=[...a];s.dispatchEvent({type:e,columns:o,column:o.length===1?o[0]:null,source:t})},d=e=>{let t=[];return a.forAllCols(n=>{let r=u[n.getColId()];r&&e(r,n)&&t.push(n)}),t},f=e=>e.getColId();i(`columnRowGroupChanged`,c.rowGroupColumns,n?.columns??[],f),i(`columnPivotChanged`,c.pivotColumns,r?.columns??[],f);let p=d((e,t)=>{let n=e.aggFunc!=null,r=n!=t.isValueActive(),i=n&&e.aggFunc!=t.getAggFunc();return r||i});p.length>0&&Wa(s,`columnValueChanged`,p,t),Ga(s,d((e,t)=>e.width!=t.getActualWidth()),!0,t),Ha(s,d((e,t)=>e.pinned!=t.getPinned()),t),Ua(s,d((e,t)=>e.hide==t.isVisible()),t);let m=d((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex());m.length>0&&o?.dispatchSortChangedEvents(t,m),$a(l,Ya(e),t,a,s)}}function Ya(e){let{colModel:t,rowGroupColsSvc:n,pivotColsSvc:r}=e;if(M(t.getColDefCols())||!t.isAlive())return[];let i=n?.columns,a=r?.columns,o=[],s=e=>{let t=e.isRowGroupActive()&&i?i.indexOf(e):null,n=e.isPivotActive()&&a?a.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,s=e.getSort()==null?null:e.getSort(),c=e.getSortIndex()==null?null:e.getSortIndex();o.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:c,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:n,flex:e.getFlex()??null})};t.forAllCols(e=>s(e));let c=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return o.sort((e,t)=>(c.has(e.colId)?c.get(e.colId):-1)-(c.has(t.colId)?c.get(t.colId):-1)),o}function Xa(e){let t=(e,t)=>e??t??null,n=e.getColDef(),r=t(n.sort,n.initialSort),i=t(n.sortIndex,n.initialSortIndex),a=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),s=t(n.width,n.initialWidth),c=t(n.flex,n.initialFlex),l=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);l==null&&(u==null||u==0)&&(l=null,u=null);let d=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);d==null&&(f==null||f==0)&&(d=null,f=null);let p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:r,sortIndex:i,hide:a,pinned:o,width:s,flex:c,rowGroup:u,rowGroupIndex:l,pivot:f,pivotIndex:d,aggFunc:p}}function Za(e,t,n){if(!e.applyOrder||!e.state)return;let r=[];e.state.forEach(e=>{e.colId!=null&&r.push(e.colId)}),Qa(t.cols,r,t,n)}function Qa(e,t,n,r){if(e==null)return;let i=[],a={};t.forEach(t=>{if(a[t])return;let n=e.map[t];n&&(i.push(n),a[t]=!0)});let o=0;if(e.list.forEach(e=>{let t=e.getColId();a[t]??(t.startsWith(`ag-Grid-AutoColumn`)?i.splice(o++,0,e):i.push(e))}),i=za(i,r),!Ba(i,n.getColTree())){L(39);return}e.list=i}function $a(e,t,n,r,i){let a={};t.forEach(e=>a[e.colId]=e);let o={};e.forEach(e=>{a[e.colId]&&(o[e.colId]=!0)});let s=e.filter(e=>o[e.colId]),c=t.filter(e=>o[e.colId]),l=[];c.forEach((e,t)=>{let n=s&&s[t];if(n&&n.colId!==e.colId){let e=r.getCol(n.colId);e&&l.push(e)}}),l.length&&i.dispatchEvent({type:`columnMoved`,columns:l,column:l.length===1?l[0]:null,finished:!0,source:n})}var eo=(e,t,n,r)=>{let i=e[n.getId()],a=e[r.getId()],o=i!=null,s=a!=null;if(o&&s)return i-a;if(o)return-1;if(s)return 1;let c=t.indexOf(n),l=t.indexOf(r),u=c>=0;return u&&l>=0?c-l:u?-1:1},to=class extends W{constructor(){super(...arguments),this.beanName=`colModel`,this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get(`pivotMode`),this.addManagedPropertyListeners([`groupDisplayType`,`treeData`,`treeDataDisplayType`,`groupHideOpenParents`,`rowNumbers`,`hidePaddedHeaderRows`],e=>this.refreshAll(wa(e.source))),this.addManagedPropertyListeners([`defaultColDef`,`defaultColGroupDef`,`columnTypes`,`suppressFieldDotNotation`],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener(`pivotMode`,e=>this.setPivotMode(this.gos.get(`pivotMode`),wa(e.source)))}createColsFromColDefs(e){let{beans:t}=this,{valueCache:n,colAutosize:r,rowGroupColsSvc:i,pivotColsSvc:a,valueColsSvc:o,visibleCols:s,eventSvc:c}=t,l=this.colDefs?Ja(t,e):void 0;n?.expire();let u=this.colDefCols?.list,d=this.colDefCols?.tree,f=Da(t,this.colDefs,!0,d,e);ga(t,this.colDefCols?.tree,f.columnTree);let p=f.columnTree,m=f.treeDepth,h=ma(p),g={};h.forEach(e=>g[e.getId()]=e),this.colDefCols={tree:p,treeDepth:m,list:h,map:g},i?.extractCols(e,u),a?.extractCols(e,u),o?.extractCols(e,u),this.ready=!0,this.refreshCols(!0),s.refresh(e),c.dispatchEvent({type:`columnEverythingChanged`,source:e}),l&&(this.changeEventsDispatching=!0,l(),this.changeEventsDispatching=!1),c.dispatchEvent({type:`newColumnsLoaded`,source:e}),e===`gridInitializing`&&r?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder();let{autoColSvc:n,selectionColSvc:r,rowNumbersSvc:i,quickFilter:a,pivotResultCols:o,showRowGroupCols:s,rowAutoHeight:c,visibleCols:l,colViewport:u,eventSvc:d}=this.beans,f=this.selectCols(o,this.colDefCols);this.createColumnsForService([n,r,i],f);let p=Hr(this.gos,this.showingPivotResult);(!e||p)&&this.restoreColOrder(f),this.positionLockedCols(f),s?.refresh(),a?.refreshCols(),this.setColSpanActive(),c?.setAutoHeightActive(f),l.clear(),u.clear(),ca(t,this.cols.tree)||d.dispatchEvent({type:`gridColumnsChanged`})}createColumnsForService(e,t){for(let n of e)n&&(n.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)}),n.addColumns(t))}selectCols(e,t){let n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;let{map:r,list:i,tree:a,treeDepth:o}=n??t;return this.cols={list:i.slice(),map:{...r},tree:a.slice(),treeDepth:o},n&&(n.list.some(e=>this.cols?.map[e.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let{valueColsSvc:e,selectionColSvc:t,gos:n}=this.beans,r=this.isPivotMode()&&!this.showingPivotResult,i=t?.isSelectionColumnEnabled(),a=n.get(`rowNumbers`),o=e?.columns;return this.cols.list.filter(e=>{let t=_a(e);if(r){let n=o?.includes(e);return t||n||i&&va(e)||a&&ya(e)}else return t||e.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){Ka(this.beans,{state:e.map(e=>({colId:typeof e==`string`?e:e.getColId(),hide:!t}))},n)}restoreColOrder(e){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let n=t.filter(t=>e.map[t.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}let r=e=>{let t=e.getOriginalParent();return t?t.getChildren().length>1?!0:r(t):!1};if(!n.some(e=>r(e))){let t=new Set(n);for(let r of e.list)t.has(r)||n.push(r);e.list=n;return}let i=new Map;for(let e=0;e<n.length;e++){let t=n[e];i.set(t,e)}let a=e.list.filter(e=>!i.has(e));if(a.length===0){e.list=n;return}let o=(e,t)=>{let n=t?t.getOriginalParent():e.getOriginalParent();if(!n)return null;let r=null,a=null;for(let o of n.getChildren())if(!(o===t||o===e)){if(o instanceof na){let e=i.get(o);if(e==null)continue;(r==null||r<e)&&(r=e,a=o);continue}o.forEachLeafColumn(e=>{let t=i.get(e);t!=null&&(r==null||r<t)&&(r=t,a=e)})}return a??o(e,n)},s=[],c=new Map;for(let e of a){let t=o(e,null);if(t==null){s.push(e);continue}let n=c.get(t);n===void 0?c.set(t,e):Array.isArray(n)?n.push(e):c.set(t,[n,e])}let l=Array(e.list.length),u=l.length-1;for(let e=s.length-1;e>=0;e--)l[u--]=s[e];for(let e=n.length-1;e>=0;e--){let t=n[e],r=c.get(t);if(r)if(Array.isArray(r))for(let e=r.length-1;e>=0;e--){let t=r[e];l[u--]=t}else l[u--]=r;l[u--]=t}e.list=l}positionLockedCols(e){e.list=za(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);let{visibleCols:n,eventSvc:r}=this.beans;n.refresh(t),r.dispatchEvent({type:`columnPivotModeChanged`})}isPivotActive(){let e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);let t=wa(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){ga(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){let{pivotResultCols:t,autoColSvc:n,selectionColSvc:r}=this.beans;la(this.colDefCols?.list,e),la(n?.columns?.list,e),la(r?.columns?.list,e),la(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>e!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:r}=t;if(typeof e==`string`&&n[e])return n[e];for(let t=0;t<r.length;t++)if(Ta(r[t],e))return r[t];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}},no=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return n=typeof t==`number`?t+1:0,this.existingIds[e]=n,n}};function ro(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var io=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(e){if(e.indexOf(` `)>=0){let n=(e||``).split(` `);if(n.length>1){n.forEach(e=>this.toggleCss(e,t));return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}}},ao=0,q=class extends W{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=ao++,this.cssManager=new io(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());let e=`component-`+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(t=>this.beans.environment.addGlobalCSS(t,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(ir):null}applyElementsToComponent(e,t,n,r=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){let i=this[t];if(i===null)this[t]=r??e;else{let e=n&&n[t];if(!this.suppressDataRefValidation&&!e)throw Error(`data-ref: ${t} on ${this.constructor.name} with ${i}`)}}}createChildComponentsFromTags(e,t){let n=[];for(let t of e.childNodes??[])n.push(t);n.forEach(n=>{if(!(n instanceof HTMLElement))return;let r=this.createComponentFromElement(n,e=>{let t=e.getGui();if(t)for(let e of n.attributes??[])t.setAttribute(e.name,e.value)},t);if(r){if(r.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);let e=Array.prototype.slice.call(n.children);r.addItems(e)}this.swapComponentForNode(r,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)})}createComponentFromElement(e,t,n){let r=e.nodeName,i=this.getDataRefAttribute(e),a=r.indexOf(`AG-`)===0,o=a?this.componentSelectors.get(r):null,s=null;if(o){let e=n&&i?n[i]:void 0;s=new o.component(e),s.setParentComponent(this),this.createBean(s,null,t)}else if(a)throw Error(`selector: ${r}`);return this.applyElementsToComponent(e,i,n,s),s}swapComponentForNode(e,t,n){let r=e.getGui();t.replaceChild(r,n),t.insertBefore(document.createComment(n.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){let t=this.gos.get(`tabIndex`);e||=[],e.length||e.push(this.getGui()),e.forEach(e=>e.setAttribute(`tabindex`,t.toString()))}setTemplate(e,t,n){let r;r=typeof e==`string`||e==null?Hn(e):F(e),this.setTemplateFromElement(r,t,n)}setTemplateFromElement(e,t,n,r=!1){if(this.eGui=e,this.suppressDataRefValidation=r,t)for(let e=0;e<t.length;e++){let n=t[e];this.componentSelectors.set(n.selector,n)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||=this.eGui,er(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){let{element:n,parent:r}=this.getContainerAndElement(e,t)||{};!n||!r||r.insertAdjacentElement(`afterbegin`,n)}appendChild(e,t){let{element:n,parent:r}=this.getContainerAndElement(e,t)||{};!n||!r||r.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:n}=t;Dn(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:n}=t;P(this.eGui,e,{skipAriaHidden:n});let r={type:`displayChanged`,visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&=void 0,super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||=[],this.css.push(e)}};function oo(e){return typeof e==`object`&&!!e.component}var J=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return t.length?new e(e=>{let n=t.length,r=Array(n);t.forEach((t,i)=>{t.then(t=>{r[i]=t,n--,n===0&&e(r)})})}):e.resolve()}static resolve(t=null){return new e(e=>e(t))}then(t){return new e(e=>{this.status===1?e(t(this.resolution)):this.waiters.push(n=>e(t(n)))})}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){}};function so(e){return e?e.prototype&&`getGui`in e.prototype:!1}function co(e,t,n,r){let{name:i}=n,a,o,s,c,l,u;if(t){let n=t,d=n[i+`Selector`],f=d?d(r):null,p=t=>{typeof t==`string`?a=t:t!=null&&t!==!0&&(e.isFrameworkComponent(t)?s=t:o=t)};f?(p(f.component),c=f.params,l=f.popup,u=f.popupPosition):p(n[i])}return{compName:a,jsComp:o,fwComp:s,paramsFromSelector:c,popupFromSelector:l,popupPositionFromSelector:u}}var lo=class extends W{constructor(){super(...arguments),this.beanName=`userCompFactory`}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,r=!1){return this.getCompDetails(this.gridOptions,e,t,n,r)}getCompDetails(e,t,n,r,i=!1){let{name:a,cellRenderer:o}=t,{compName:s,jsComp:c,fwComp:l,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:f}=co(this.beans.frameworkOverrides,e,t,r),p,m,h=e=>{let t=this.registry.getUserComponent(a,e);t&&(c=t.componentFromFramework?void 0:t.component,l=t.componentFromFramework?t.component:void 0,p=t.params,m=t.processParams)};if(s!=null&&h(s),c==null&&l==null&&n!=null&&h(n),c&&o&&!so(c)&&(c=this.agCompUtils?.adaptFunction(t,c)),!c&&!l){let{validation:e}=this.beans;i&&(s!==n||!n)?s?e?.isProvidedUserComp(s)||R(50,{compName:s}):n?e||R(260,{...this.gos.getModuleErrorParams(),propName:a,compName:n}):R(216,{name:a}):n&&!e&&R(146,{comp:n});return}let g=this.mergeParams(e,t,r,u,p,m),_=c==null,v=c??l;return{componentFromFramework:_,componentClass:v,params:g,type:t,popupFromSelector:d,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(v,_,g,t)}}newAgStackInstance(e,t,n,r){let i=!t,a;a=i?new e:this.frameworkCompWrapper.wrap(e,r.mandatoryMethods,r.optionalMethods,r),this.createBean(a);let o=a.init?.(n);return o==null?J.resolve(a):o.then(()=>a)}mergeParams(e,t,n,r=null,i,a){let o={...n,...i},s=e,c=s&&s[t.name+`Params`];return typeof c==`function`?N(o,c(n)):typeof c==`object`&&N(o,c),N(o,r),a?a(o):o}},uo={name:`dateComponent`,mandatoryMethods:[`getDate`,`setDate`],optionalMethods:[`afterGuiAttached`,`setInputPlaceholder`,`setInputAriaLabel`,`setDisabled`,`refresh`]},fo={name:`dragAndDropImageComponent`,mandatoryMethods:[`setIcon`,`setLabel`]},po={name:`headerComponent`,optionalMethods:[`refresh`]},mo={name:`innerHeaderComponent`},ho={name:`innerHeaderGroupComponent`},go={name:`headerGroupComponent`},_o={name:`cellRenderer`,optionalMethods:[`refresh`,`afterGuiAttached`],cellRenderer:!0},vo={name:`loadingCellRenderer`,cellRenderer:!0},yo={name:`cellEditor`,mandatoryMethods:[`getValue`],optionalMethods:[`isPopup`,`isCancelBeforeStart`,`isCancelAfterEnd`,`getPopupPosition`,`focusIn`,`focusOut`,`afterGuiAttached`,`refresh`]},bo={name:`loadingOverlayComponent`,optionalMethods:[`refresh`]},xo={name:`noRowsOverlayComponent`,optionalMethods:[`refresh`]},So={name:`tooltipComponent`},Co={name:`filter`,mandatoryMethods:[`isFilterActive`,`doesFilterPass`,`getModel`,`setModel`],optionalMethods:[`afterGuiAttached`,`afterGuiDetached`,`onNewRowsLoaded`,`getModelAsString`,`onFloatingFilterChanged`,`onAnyFilterChanged`,`refresh`]},wo={name:`floatingFilterComponent`,mandatoryMethods:[`onParentModelChanged`],optionalMethods:[`afterGuiAttached`,`refresh`]},To={name:`fullWidthCellRenderer`,optionalMethods:[`refresh`,`afterGuiAttached`],cellRenderer:!0},Eo={name:`loadingCellRenderer`,cellRenderer:!0},Do={name:`groupRowRenderer`,optionalMethods:[`afterGuiAttached`],cellRenderer:!0},Oo={name:`detailCellRenderer`,optionalMethods:[`refresh`],cellRenderer:!0};function ko(e,t){return e.getCompDetailsFromGridOptions(fo,`agDragAndDropImage`,t,!0)}function Ao(e,t,n){return e.getCompDetails(t,po,`agColumnHeader`,n)}function jo(e,t,n){return e.getCompDetails(t,mo,void 0,n)}function Mo(e,t){let n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,go,`agColumnGroupHeader`,t)}function No(e,t,n){return e.getCompDetails(t,ho,void 0,n)}function Po(e,t){return e.getCompDetailsFromGridOptions(To,void 0,t,!0)}function Fo(e,t){return e.getCompDetailsFromGridOptions(Eo,`agLoadingCellRenderer`,t,!0)}function Io(e,t){return e.getCompDetailsFromGridOptions(Do,`agGroupRowRenderer`,t,!0)}function Lo(e,t){return e.getCompDetailsFromGridOptions(Oo,`agDetailCellRenderer`,t,!0)}function Ro(e,t,n){return e.getCompDetails(t,_o,void 0,n)}function zo(e,t,n){return e.getCompDetails(t,vo,`agSkeletonCellRenderer`,n,!0)}function Bo(e,t,n){return e.getCompDetails(t,yo,`agCellEditor`,n,!0)}function Vo(e,t,n,r){let i=t.filter;return oo(i)&&(t={filter:i.component,filterParams:t.filterParams}),e.getCompDetails(t,Co,r,n,!0)}function Ho(e,t,n){return e.getCompDetails(t,uo,`agDateInput`,n,!0)}function Uo(e,t){return e.getCompDetailsFromGridOptions(bo,`agLoadingOverlay`,t,!0)}function Wo(e,t){return e.getCompDetailsFromGridOptions(xo,`agNoRowsOverlay`,t,!0)}function Go(e,t){return e.getCompDetails(t.colDef,So,`agTooltipComponent`,t,!0)}function Ko(e,t,n,r){return e.getCompDetails(t,wo,r,n)}function qo(e,t){return co(e,t,Co)}function Jo(e,t,n){return e.mergeParams(t,Co,n)}function Yo(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Xo=new Set,Zo={},Qo={},$o,es=!1,ts=!1,ns=!1;function rs(e){let[t,n]=e.version.split(`.`)||[],[r,i]=$o.split(`.`)||[];return t===r&&n===i}function is(e){$o||=e.version;let t=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(e.version?rs(e)||dr(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${$o}.`)):dr(t(`'${e.moduleName}' is incompatible.`)),e.validate){let t=e.validate();t.isValid||dr(`${t.message}`)}}function as(e,t,n=!1){n||(es=!0),is(e);let r=e.rowModels??[`all`];Xo.add(e);let i;t===void 0?i=Zo:(ts=!0,Qo[t]===void 0&&(Qo[t]={}),i=Qo[t]),r.forEach(t=>{i[t]===void 0&&(i[t]={}),i[t][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(e=>as(e,t,n))}function os(e){delete Qo[e]}function ss(e,t,n){let r=n=>!!Zo[n]?.[e]||!!Qo[t]?.[n]?.[e];return r(n)||r(`all`)}function cs(){return ts}function ls(e,t){let n=Qo[e]??{};return[...Object.values(Zo.all??{}),...Object.values(n.all??{}),...Object.values(Zo[t]??{}),...Object.values(n[t]??{})]}function us(){return new Set(Xo)}function ds(){return es}function fs(){return ns}var ps=class{static register(e){as(e,void 0)}static registerModules(e){e.forEach(e=>as(e,void 0))}},ms=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(let t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach(e=>{let t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)}),e.derivedBeans?.forEach(e=>{let{beanName:t,bean:n}=e(this);this.beans[t]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){e.forEach(e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)}),e.forEach(e=>e.preConstruct?.()),t&&e.forEach(t),e.forEach(e=>e.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};function hs(e){return typeof e==`object`&&!!e.getComp}var gs=class extends ms{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),os(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}},_s=class extends W{constructor(){super(...arguments),this.beanName=`editModelSvc`,this.edits=new Map,this.cellValidations=new vs,this.rowValidations=new ys,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;let n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;let n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){let t=e.pinnedSibling;if(t)return this.getEditRow(t)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(this.edits.size===0)return e.data;let n=this.getEditRow(e),r=e.pinnedSibling,i=t&&r&&this.getEditRow(r);if(!n&&!i)return e.data;let a=Object.assign({},e.data),o=(e,t)=>e.forEach(({pendingValue:e},n)=>{e!==Is&&(t[n.getColId()]=e)});return n&&o(n,a),i&&o(i,a),a}getEdit(e,t){let n=this._getEdit(e);return t&&n?{...n}:n}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;let t=new Map;return this.edits.forEach((e,n)=>t.set(n,new Map(e))),t}setEditMap(e){this.edits.clear(),e.forEach((e,t)=>{let n=new Map;e.forEach((e,t)=>n.set(t,{...e})),this.edits.set(t,n)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);let n={...this._getEdit(e),...t};return this.getEditRow(e.rowNode).set(e.column,n),n}clearEditValue(e){let{rowNode:t,column:n}=e;if(t)if(n){let t=this._getEdit(e);t&&(t.editorValue=void 0,t.pendingValue=t.sourceValue,t.state=`changed`)}else this.getEditRow(t)?.forEach(e=>{e.editorValue=void 0,e.pendingValue=e.sourceValue,e.state=`changed`})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];let t=[];return(e??this.edits).forEach((e,n)=>{for(let r of e.keys())t.push({rowNode:n,column:r,...e.get(r)})}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;let{rowNode:n,column:r}=e,{withOpenEditor:i}=t;if(n){let a=this.getEditRow(n,t);return a?r?i?this.getEdit(e)?.state===`editing`:a.has(r)??!1:a.size===0?!1:i?Array.from(a.values()).some(({state:e})=>e===`editing`):!0:!1}return i?this.getEditPositions().some(({state:e})=>e===`editing`):this.edits.size>0}start(e){let t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:r}=e;r&&!t.has(r)&&t.set(r,{editorValue:void 0,pendingValue:Is,sourceValue:this.beans.valueSvc.getValue(r,n,!0,`api`),state:`editing`}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(let e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},vs=class{constructor(){this.cellValidations=new Map}getCellValidation(e){let{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e||!e.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){let{rowNode:n,column:r}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(r,t)}clearCellValidation(e){let{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},ys=class{constructor(){this.rowValidations=new Map}getRowValidation(e){let{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return!e||!e.rowNode?this.rowValidations.size>0:!!this.getRowValidation(e)}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function bs(e,t){let n=e.column===t.column,r=e.rowPinned===t.rowPinned,i=e.rowIndex===t.rowIndex;return n&&r&&i}function xs(e,t){switch(e.rowPinned){case`top`:if(t.rowPinned!==`top`)return!0;break;case`bottom`:if(t.rowPinned!==`bottom`)return!1;break;default:if(j(t.rowPinned))return t.rowPinned!==`top`;break}return e.rowIndex<t.rowIndex}function Ss(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Cs(e){let t=0,n,{pinnedRowModel:r,rowModel:i,pageBounds:a}=e;return r?.getPinnedTopRowCount()?n=`top`:i.getRowCount()?(n=null,t=a.getFirstRow()):r?.getPinnedBottomRowCount()&&(n=`bottom`),n===void 0?null:{rowIndex:t,rowPinned:n}}function ws(e){let t,n=null,{pinnedRowModel:r,pageBounds:i}=e,a=r?.getPinnedBottomRowCount(),o=r?.getPinnedTopRowCount();return a?(n=`bottom`,t=a-1):e.rowModel.getRowCount()?(n=null,t=i.getLastRow()):o&&(n=`top`,t=o-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Ts(e,t){switch(t.rowPinned){case`top`:return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case`bottom`:return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Es(e,t){let n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;let r=e.rowRenderer.getRowByPosition(t);return r?r.getCellCtrl(t.column):null}function Ds(e,t,n){let{rowModel:r,pinnedRowModel:i}=e,a;return a??=r?.getRowNode(t),n?a??=i?.getPinnedRowById(t,n):(a??=i?.getPinnedRowById(t,`top`),a??=i?.getPinnedRowById(t,`bottom`)),a}function Os(e,t){let{rowIndex:n,rowPinned:r}=t,{pageBounds:i,pinnedRowModel:a,rowModel:o}=e;return n===0?r===`top`?null:r===`bottom`&&o.isRowsToRender()?{rowIndex:i.getLastRow(),rowPinned:null}:a?.isRowsToRender(`top`)?{rowIndex:a.getPinnedTopRowCount()-1,rowPinned:`top`}:null:As(e,r?void 0:o.getRow(n),!0)??{rowIndex:n-1,rowPinned:r}}function ks(e,t){let{rowIndex:n,rowPinned:r}=t,{pageBounds:i,pinnedRowModel:a,rowModel:o}=e;return js(e,t)?r===`bottom`?null:r===`top`&&o.isRowsToRender()?{rowIndex:i.getFirstRow(),rowPinned:null}:a?.isRowsToRender(`bottom`)?{rowIndex:0,rowPinned:`bottom`}:null:As(e,r?void 0:o.getRow(n))??{rowIndex:n+1,rowPinned:r}}function As(e,t,n=!1){let{gos:r,rowRenderer:i}=e;if(!t?.sticky||!ri(r))return;let a=i.getStickyTopRowCtrls(),o=i.getStickyBottomRowCtrls(),s=!o.some(e=>e.rowNode.rowIndex===t.rowIndex),c=s?a:o,l=(n?-1:1)*(s?-1:1),u;for(let e=0;e<c.length;e++)if(c[e].rowNode.rowIndex===t.rowIndex){u=c[e+l];break}return u?{rowIndex:u.rowNode.rowIndex,rowPinned:null}:void 0}function js(e,t){let{rowPinned:n,rowIndex:r}=t,{pinnedRowModel:i,pageBounds:a}=e;return n===`top`?(i?.getPinnedTopRowCount()??0)-1<=r:n===`bottom`?(i?.getPinnedBottomRowCount()??0)-1<=r:a.getLastRow()<=r}function Ms(e,t={}){let{rowIndex:n,rowId:r,rowCtrl:i,rowPinned:a}=t;if(i)return i;let{rowModel:o,rowRenderer:s}=e,{rowNode:c}=t;return c||(r?c=Ds(e,r,a):n!=null&&(c=o.getRow(n))),s.getRowCtrls(c?[c]:[])?.[0]}function Y(e,t={}){let{cellCtrl:n,colId:r,columnId:i,column:a}=t;if(n)return n;let o=e.colModel.getCol(r??i??Fs(a)),s=t.rowCtrl??Ms(e,t),c=s?.getCellCtrl(o)??void 0;if(c)return c;let l=t.rowNode??s?.rowNode;if(l)return e.rowRenderer.getCellCtrls([l],[o])?.[0]}function Ns(e){let{editSvc:t}=e;t?.isBatchEditing()?Xs(e):t?.stopEditing(void 0,{source:`api`})}function Ps(e,t,n){let{gos:r,popupSvc:i}=t;if(!r.get(`stopEditingWhenCellsLoseFocus`))return;let a=e=>{let a=e.relatedTarget;if(yn(a)===null){Ns(t);return}let o=n.some(e=>e.contains(a))&&Gc(r,a);o||=!!i&&(i.getActivePopups().some(e=>e.contains(a))||i.isElementWithinCustomPopup(a)),o||Ns(t)};n.forEach(t=>e.addManagedElementListeners(t,{focusout:a}))}function Fs(e){if(e)return typeof e==`string`?e:e.getColId()}var Is=Symbol(`unedited`);function Ls(e,t={}){let n=[],r=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(let e of r){let t=e.comp?.getCellEditor();t&&n.push({ctrl:e,editor:Yo(t)})}return n}var Rs=(e,t={})=>Ls(e,t).map(e=>e.editor);function zs(e,t,n,r,i,a){t.length===0&&n?.rowNode&&n?.column&&Vs(e,n,{key:r,event:i,cellStartedEdit:a});let{valueSvc:o,editSvc:s,editModelSvc:c}=e,{rowNode:l,column:u}=n??{};for(let d of t){let{rowNode:t,column:f}=d,p=Y(e,d);if(!p){if(t&&f){let e=o.getValue(f,t,void 0,`api`),i=(n?.rowNode===t&&n?.column===f&&r||void 0)??s?.getCellDataValue(d,!1)??o.getValueForDisplay(f,t)?.value??e??Is;c?.setEdit(d,{pendingValue:i,sourceValue:e,state:`editing`})}continue}let m=a&&l===p.rowNode&&p.column===u;Vs(e,{rowNode:l,column:p.column},{key:m?r:null,event:m?i:null,cellStartedEdit:m})}}function Bs({pendingValue:e,sourceValue:t}){return e===Is&&(e=t),e!==t}function Vs(e,t,n){let{key:r,event:i,cellStartedEdit:a,silent:o}=n??{},s=Y(e,t),c=s?.comp?.getCellEditor(),l=Us(e,t,r,a),u=e.editModelSvc?.getEdit(t),d=r?.length===1?r:l.value;if(d===void 0&&(d=u?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:d,state:`editing`}),c){c.refresh?.(l);return}let f=t.column.getColDef(),p=Bo(e.userCompFactory,f,l),m=p?.popupFromSelector==null?!!f.cellEditorPopup:p.popupFromSelector,h=p?.popupPositionFromSelector==null?f.cellEditorPopupPosition:p.popupPositionFromSelector;Ks(p.params,i),s&&(s.editCompDetails=p,s.comp?.setEditDetails(p,m,h,e.gos.get(`reactiveCustomComponents`)),s?.rowCtrl?.refreshRow({suppressFlash:!0}),o||e.editSvc?.dispatchCellEvent(t,i,`cellEditingStarted`))}function Hs(e){return(e.getValidationErrors?.()?.length??0)>0?{editorValueExists:!1}:{editorValue:e.getValue(),editorValueExists:!0}}function Us(e,t,n,r){let{valueSvc:i,gos:a,editSvc:o}=e,s=Y(e,t),c=t.rowNode?.rowIndex??void 0,l=o?.isBatchEditing(),u=e.colModel.getCol(t.column.getId()),{rowNode:d,column:f}=t,p=s.comp?.getCellEditor(),m=o?.getCellDataValue(t,!1)??(p?Hs(p)?.editorValue:void 0);return U(a,{value:m===Is?i.getValueForDisplay(u,d)?.value:m,eventKey:n??null,column:f,colDef:f.getColDef(),rowIndex:c,node:d,data:d.data,cellStartedEdit:r??!1,onKeyDown:s?.onKeyDown.bind(s),stopEditing:n=>{o.stopEditing(t,{source:l?`ui`:`api`,suppressNavigateAfterEdit:n}),Zs(e,t)},eGridCell:s?.eGui,parseValue:e=>i.parseValue(u,d,e,s?.value),formatValue:s?.formatValue.bind(s),validate:()=>{o?.validateEdit()}})}function Ws(e,t){let{editModelSvc:n}=e;n?.getEditMap().forEach((e,r)=>{e.forEach((e,i)=>{!t&&(e.state===`editing`||e.pendingValue===Is)||!Bs(e)&&(e.state!==`editing`||t)&&n?.removeEdits({rowNode:r,column:i})})})}function Gs(e,t){let n=t.comp?.getCellEditor();if(!n?.refresh)return;let{eventKey:r,cellStartedEdit:i}=t.editCompDetails.params,{column:a}=t,o=Us(e,t,r,i),s=a.getColDef(),c=Bo(e.userCompFactory,s,o);n.refresh(Ks(c.params,r))}function Ks(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor===`agNumberCellEditor`?e.suppressPreventDefault=[`-`,`+`,`.`,`e`].includes(t?.key??``)||e.suppressPreventDefault:t?.preventDefault?.(),e}function qs(e,t){e.editModelSvc?.getEditPositions().forEach(n=>{let r=Y(e,n);if(!r)return;let i=r.comp.getCellEditor();if(!i)return;let{editorValue:a,editorValueExists:o}=Hs(i);Js(e,n,t,a,void 0,!o)})}function Js(e,t,n,r,i,a){let{editModelSvc:o,valueSvc:s}=e;if(!o)return;let{rowNode:c,column:l}=t;if(!(c&&l))return;let u=!!Y(e,t)?.comp?.getCellEditor(),d=o.getEdit(t,!0);d?.sourceValue||(d=o.setEdit(t,{sourceValue:s.getValue(l,c,void 0,`api`),pendingValue:Is,state:u?`editing`:`changed`})),o.setEdit(t,{editorValue:a?d.sourceValue:r,state:u?`editing`:`changed`}),n&&Ys(e,t)}function Ys(e,t){let{editModelSvc:n}=e,r=n?.getEdit(t,!0);n?.setEdit(t,{pendingValue:r?.editorValue})}function Xs(e,t,n){t||=e.editModelSvc?.getEditPositions(),t.forEach(t=>Zs(e,t,n))}function Zs(e,t,n){let{editSvc:r,editModelSvc:i}=e,{rowNode:a,column:o}=t,s=Y(e,t);if(!s){i?.hasEdits(t)&&a&&o&&i?.setEdit(t,{state:`changed`});return}let{comp:c}=s;if(c&&!c.getCellEditor())return;let l=c?.getCellEditor()?.getValidationErrors?.(),u=i?.getCellValidationModel();l?.length?u?.setCellValidation(t,{errorMessages:l}):u?.clearCellValidation(t),i?.getEdit(t)&&i?.setEdit(t,{state:`changed`}),c?.setEditDetails(),c?.refreshEditStyles(!1,!1),s?.refreshCell({force:!0,suppressFlash:!0});let d=i?.getEdit(t);d?.state===`changed`&&!n?.silent&&r?.dispatchCellEvent(t,n?.event,`cellEditingStopped`,{valueChanged:Bs(d),newValue:d?.pendingValue,oldValue:d?.sourceValue})}function Qs(e){let t=Ls(e),n=new vs,{ariaAnnounce:r,localeSvc:i,editModelSvc:a,gos:o}=e,s=o.get(`editType`)===`fullRow`,c=vt(i)(`ariaValidationErrorPrefix`,`Cell Editor Validation`);for(let e of t){let{ctrl:t,editor:i}=e,{rowNode:a,column:o}=t,s=i.getValidationErrors?.()??[],l=i.getValidationElement?.(!1)||!i.isPopup?.()&&t.eGui;if(l){let e=s!=null&&s.length>0,t=e?s.join(`. `):``;Ut(l,e),e&&r.announceValue(`${c} ${s}`,`editorValidation`),l instanceof HTMLInputElement?l.setCustomValidity(t):l.classList.toggle(`invalid`,e)}s?.length>0&&n.setCellValidation({rowNode:a,column:o},{errorMessages:s})}qs(e,!1),a?.setCellValidationModel(n);let l=new Set;for(let{ctrl:e}of t)l.add(e.rowCtrl);if(s){let t=$s(e);a?.setRowValidationModel(t)}for(let e of l.values()){e.rowEditStyleFeature?.applyRowStyles();for(let t of e.getAllCellCtrls())t.tooltipFeature?.refreshTooltip(!0),t.editorTooltipFeature?.refreshTooltip(!0),t.editStyleFeature?.applyCellStyles?.()}}var $s=e=>{let t=new ys,n=e.gos.get(`getFullRowEditValidationErrors`),r=e.editModelSvc?.getEditMap();if(!r)return t;for(let e of r.keys()){let i=r.get(e);if(!i)continue;let a=[],{rowIndex:o,rowPinned:s}=e;for(let e of i.keys()){let t=i.get(e);if(!t)continue;let{editorValue:n,pendingValue:r,sourceValue:c}=t,l=n??(r===Is?void 0:r)??c;a.push({column:e,colId:e.getColId(),rowIndex:o,rowPinned:s,oldValue:c,newValue:l})}let c=n?.({editorsState:a})??[];c.length>0&&t.setRowValidation({rowNode:e},{errorMessages:c})}return t};function ec(e){Qs(e);let t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;let n=[];return t.forEach((e,t)=>{e.forEach(({errorMessages:e},r)=>{n.push({column:r,rowIndex:t.rowIndex,rowPinned:t.rowPinned,messages:e??null})})}),n}var tc=`ag-column-first`,nc=`ag-column-last`;function rc(e,t,n,r){return M(e)?[]:oc(e.headerClass,e,t,n,r)}function ic(e,t,n){e.toggleCss(tc,n.isColAtEdge(t,`first`)),e.toggleCss(nc,n.isColAtEdge(t,`last`))}function ac(e,t,n,r){return U(t,{colDef:e,column:n,columnGroup:r})}function oc(e,t,n,r,i){if(M(e))return[];let a;return a=typeof e==`function`?e(ac(t,n,r,i)):e,typeof a==`string`?[a]:Array.isArray(a)?[...a]:[]}function sc(e){return!!(e.rowPinned&&e.pinnedSibling)}function cc(e,t,n,r){let i=t===`top`;if(!n)return cc(e,t,i?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),r);if(!r){let r=i?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return cc(e,t,n,i?e.getPinnedTopRow(r-1):e.getPinnedBottomRow(r-1))}let a=!1,o=!1,s=[];return e.forEachPinnedRow(t,e=>{if(e===n&&!a){a=!0,s.push(e);return}if(a&&e===r){o=!0,s.push(e);return}a&&!o&&s.push(e)}),s}var X={BACKSPACE:`Backspace`,TAB:`Tab`,ENTER:`Enter`,ESCAPE:`Escape`,SPACE:` `,LEFT:`ArrowLeft`,UP:`ArrowUp`,RIGHT:`ArrowRight`,DOWN:`ArrowDown`,DELETE:`Delete`,F2:`F2`,PAGE_UP:`PageUp`,PAGE_DOWN:`PageDown`,PAGE_HOME:`Home`,PAGE_END:`End`,A:`KeyA`,C:`KeyC`,D:`KeyD`,V:`KeyV`,X:`KeyX`,Y:`KeyY`,Z:`KeyZ`},lc=!1,uc=0;function dc(e){uc>0||(e.addEventListener(`keydown`,pc),e.addEventListener(`mousedown`,pc))}function fc(e){uc>0||(e.removeEventListener(`keydown`,pc),e.removeEventListener(`mousedown`,pc))}function pc(e){let t=lc,n=e.type===`keydown`;n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(lc=n)}function mc(e){let t=V(e);return dc(t),uc++,()=>{uc--,fc(t)}}function hc(){return lc}function gc(e,t,n=!1){let r=wn,i=Tn;t&&(i+=`, `+t),n&&(i+=`, [tabindex="-1"]`);let a=Array.prototype.slice.apply(e.querySelectorAll(r)).filter(e=>Vn(e)),o=Array.prototype.slice.apply(e.querySelectorAll(i));return o.length?((e,t)=>e.filter(e=>t.indexOf(e)===-1))(a,o):a}function _c(e,t=!1,n=!1,r=!1){let i=gc(e,r?`.ag-tab-guard`:null,n),a=t?K(i):i[0];return a?(a.focus({preventScroll:!0}),!0):!1}function vc(e,t,n,r){let i=gc(t,n?`:not([tabindex="-1"])`:null),a=H(e),o;o=n?i.findIndex(e=>e.contains(a)):i.indexOf(a);let s=o+(r?-1:1);return s<0||s>=i.length?null:i[s]}function yc(e,t=5){let n=0;for(;e&&yn(e)===null&&++n<=t;)e=e.parentElement;return yn(e)===null?null:e}function bc(e){return e.gos.get(`suppressHeaderFocus`)||!!e.overlays?.isExclusive()}function xc(e){return e.gos.get(`suppressCellFocus`)||!!e.overlays?.isExclusive()}function Sc(e,t,n=!1){let r=e.ctrlsSvc.get(`gridCtrl`);return!n&&r.focusNextInnerContainer(t)?!0:((n||!t&&!r.isDetailGrid())&&r.forceFocusOutOfContainer(t),!1)}function Cc(e,t,n,{rowNode:r,column:i},a){return U(e.gos,{type:n,node:r,data:r.data,value:a,column:i,colDef:i.getColDef(),rowPinned:r.rowPinned,event:t,rowIndex:r.rowIndex})}function wc(e,t=!1){return e===X.DELETE?!0:!t&&e===X.BACKSPACE?_n():!1}var Tc=class extends W{constructor(e,t,n,r){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=r,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){let t=e.key;switch(t){case X.ENTER:this.onEnterKeyDown(e);break;case X.F2:this.onF2KeyDown(e);break;case X.ESCAPE:this.onEscapeKeyDown(e);break;case X.TAB:this.onTabKeyDown(e);break;case X.BACKSPACE:case X.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case X.DOWN:case X.UP:case X.RIGHT:case X.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){let{cellCtrl:n,beans:r}=this;if(!r.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{let i=n.getFocusedCellPosition();r.navigation?.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){let{rangeSvc:t,navigation:n}=this.beans;if(!t)return;let r=t.extendLatestRangeInDirection(e);r&&(e.key===X.LEFT||e.key===X.RIGHT?n?.ensureColumnVisible(r.column):n?.ensureRowVisible(r.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:r,rowNode:i}=this,{gos:a,rangeSvc:o,eventSvc:s,editSvc:c}=r;if(s.dispatchEvent({type:`keyShortcutChangedCellStart`}),wc(e,a.get(`enableCellEditingOnBackspace`))&&!c?.isEditing(n,{withOpenEditor:!0})){if(o&&hi(a))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:`deleteKey`});else if(n.isCellEditable()){let{column:e}=n,t=this.beans.valueSvc.getDeleteValue(e,i);i.setDataValue(e,t,`cellClear`)}}else c?.isEditing(n,{withOpenEditor:!0})||r.editSvc?.startEditing(n,{startedEdit:!0,event:t});s.dispatchEvent({type:`keyShortcutChangedCellEnd`})}onEnterKeyDown(e){let{cellCtrl:t,beans:n}=this,{editSvc:r,navigation:i}=n,a=r?.isEditing(t),o=t.rowNode,s=r?.isRowEditing(o),c=t=>{r?.startEditing(t,{startedEdit:!0,event:e})&&e.preventDefault()};if(a||s){if(this.isCtrlEnter(e)){r?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(Qs(n),r?.checkNavWithValidation(void 0,e)===`block-stop`)return;r?.isEditing(t,{withOpenEditor:!0})?r?.stopEditing(t,{event:e}):s&&!t.isCellEditable()?r?.stopEditing({rowNode:o},{event:e}):c(t)}else if(n.gos.get(`enterNavigatesVertically`)){let n=e.shiftKey?X.UP:X.DOWN;i?.navigateToNextCell(null,n,t.cellPosition,!1)}else{if(r?.hasValidationErrors())return;r?.hasValidationErrors(t)&&r.revertSingleCellEdit(t,!0),c(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===X.ENTER}onF2KeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(Qs(this.beans),n?.checkNavWithValidation(void 0,e)===`block-stop`)||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)===`block-stop`&&n.revertSingleCellEdit(t),n?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){let t=e.target!==this.eGui,{beans:{editSvc:n},cellCtrl:r}=this;if(!t&&!n?.isEditing(r,{withOpenEditor:!0})){if(e.key===X.SPACE)this.onSpaceKeyDown(e);else if(n?.isCellEditable(r,`ui`)){if(n?.hasValidationErrors()&&!n?.hasValidationErrors(r))return;n?.startEditing(r,{startedEdit:!0,event:e,source:`api`}),r.editCompDetails?.params?.suppressPreventDefault||e.preventDefault()}}}onSpaceKeyDown(e){let{gos:t,editSvc:n}=this.beans,{rowNode:r}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&Br(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,r,`spaceKey`),e.preventDefault()}};function Ec(e,t,n){if(n===0)return!1;let r=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return Math.max(r,i)<=n}function Dc({gos:e},t){return t.button===2||t.ctrlKey&&e.get(`allowContextMenuWithControlKey`)}var Oc=class extends W{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!zi(t))switch(e){case`click`:this.onCellClicked(t);break;case`mousedown`:case`touchstart`:this.onMouseDown(t);break;case`dblclick`:this.onCellDoubleClicked(t);break;case`mouseout`:this.onMouseOut(t);break;case`mouseover`:this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;let{eventSvc:t,rangeSvc:n,editSvc:r,editModelSvc:i,frameworkOverrides:a}=this.beans,o=e.ctrlKey||e.metaKey,{cellCtrl:s}=this,{column:c,cellPosition:l}=s;n&&o&&n.getCellRangeCount(l)>1&&n.intersectLastRange(!0);let u=s.createEvent(e,`cellClicked`);t.dispatchEvent(u);let d=c.getColDef();if(d.onCellClicked&&window.setTimeout(()=>{a.wrapOutgoing(()=>{d.onCellClicked(u)})},0),i?.getState(s)!==`editing`){let t=r?.isEditing(),n=i?.getCellValidationModel().getCellValidationMap().size??0,a=i?.getRowValidationModel().getRowValidationMap().size??0;if(t&&(n>0||a>0))return;r?.shouldStartEditing(s,e)?r?.startEditing(s,{event:e}):r?.shouldStopEditing(s,e)&&r?.stopEditing(s)}}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:r}=this,{eventSvc:i,frameworkOverrides:a,editSvc:o,editModelSvc:s}=n,c=t.getColDef(),l=r.createEvent(e,`cellDoubleClicked`);if(i.dispatchEvent(l),typeof c.onCellDoubleClicked==`function`&&window.setTimeout(()=>{a.wrapOutgoing(()=>{c.onCellDoubleClicked(l)})},0),o?.shouldStartEditing(this.cellCtrl,e)&&this.beans.editModelSvc?.getState(this.cellCtrl)!==`editing`){let t=o?.isEditing(),n=s?.getCellValidationModel().getCellValidationMap().size??0,i=s?.getRowValidationModel().getRowValidationMap().size??0;if(t&&(n>0||i>0))return;o?.startEditing(r,{event:e})}}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:r}=e,i=e.target,{cellCtrl:a,beans:o}=this,{eventSvc:s,rangeSvc:c,rowNumbersSvc:l,focusSvc:u,gos:d,editSvc:f}=o;if(this.isRightClickInExistingRange(e))return;let p=c&&!c.isEmpty(),m=this.containsWidget(i),{cellPosition:h,column:g}=a,_=ya(g);if(l&&_&&!l.handleMouseDownOnCell(h,e)){c&&e.preventDefault(),e.stopImmediatePropagation();return}if(!r||!p){let t=f?.isEditing(a),n=d.get(`enableCellTextSelection`)&&e.defaultPrevented,r=(hn()||n)&&!t&&!En(i)&&!m;a.focusCell(r,e)}if(r&&p&&!u.isCellFocused(h)){e.preventDefault();let t=u.getFocusedCell();if(t){let{column:n,rowIndex:r,rowPinned:i}=t;f?.isEditing(t)&&f?.stopEditing(t),u.setFocusedCell({column:n,rowIndex:r,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!m){if(c){_&&e.preventDefault();let i=Dc(this.beans,e)&&_;if(r)c.extendLatestRangeToCell(h);else if(!i){let e=t||n;c.setRangeToCell(h,e)}}s.dispatchEvent(this.cellCtrl.createEvent(e,`cellMouseDown`))}}isRightClickInExistingRange(e){let{rangeSvc:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.cellPosition),r=Dc(this.beans,e);if(n&&r)return!0}return!1}containsWidget(e){return kn(e,`ag-selection-checkbox`,3)||kn(e,`ag-drag-handle`,3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,`cellMouseOut`)),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,`cellMouseOver`)),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.eGui,n=t.contains(e.target),r=t.contains(e.relatedTarget);return n&&r}},kc=class extends W{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){let t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){let t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();ca(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:e,rowNode:t}=this,n=e.getColSpan(t),r=[];if(n===1)r.push(e);else{let t=e,i=e.getPinned();for(let e=0;t&&e<n&&(r.push(t),t=this.beans.visibleCols.getColAfter(t),!(!t||M(t)||i!==t.getPinned()));e++);}return r}onLeftChanged(){if(!this.eSetLeft)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+`px`}getCellLeft(){let e;return e=this.beans.gos.get(`enableRtl`)&&this.colsSpanning?K(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()===`left`)return e;let{visibleCols:t}=this.beans,n=t.getColsLeftWidth();return this.column.getPinned()===`right`?n+t.bodyWidth+(e||0):n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;let t=Gr(this.beans)*this.rowSpan;this.eContent.style.height=`${t}px`,this.eContent.style.zIndex=`1`}destroy(){super.destroy()}},Ac=`ag-cell`,jc=`ag-cell-auto-height`,Mc=`ag-cell-normal-height`,Nc=`ag-cell-focus`,Pc=`ag-cell-first-right-pinned`,Fc=`ag-cell-last-left-pinned`,Ic=`ag-cell-not-inline-editing`,Lc=`ag-cell-wrap-text`,Rc=`cellCtrl`;function zc(e,t){return Vi(e,t,Rc)}var Bc=0,Vc=class extends W{constructor(e,t,n,r){super(),this.column=e,this.rowNode=t,this.rowCtrl=r,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;let{colId:i}=e;this.instanceId=i+`-`+ Bc++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){let{beans:e}=this;this.positionFeature=new kc(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new Oc(this,e,this.column),this.keyboardListener=new Tc(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();let{rangeSvc:t}=e;t&&hi(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),ya(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),Qs(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,r,i,a,o){this.comp=e,this.eGui=t,this.printLayout=i,o??=this,this.addDomData(o),this.addFeatures(),o.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get(`suppressCellFocus`)),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),a&&this.isCellEditable()?this.editSvc?.startEditing(this,{startedEdit:!0,source:`api`}):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(e=>e()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??`gridcell`}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){let{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:r,eventSvc:i}=e,a=t.getColDef(),o=this.createCellRendererParams();o.deferRender=!0;let s=zo(n,a,o);if(r.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let e,t=new J(t=>{e=t});return this.addManagedListeners(i,{bodyScrollEnd:()=>e()}),{loadingComp:s,onReady:t}}return{loadingComp:s,onReady:J.resolve()}}showValue(e,t){let{beans:n,column:r,rowNode:i,rangeFeature:a}=this,{userCompFactory:o}=n,s=this.getValueToDisplay(),c,l=i.stub&&i.groupData?.[r.getId()]==null,u=r.getColDef();if(l||this.isCellRenderer()){let e=this.createCellRendererParams();c=!l||ya(r)?Ro(o,u,e):zo(o,u,e)}if(!c&&!l&&n.findSvc?.isMatch(i,r)){let e=this.createCellRendererParams();c=Ro(o,{...r.getColDef(),cellRenderer:`agFindCellRenderer`},e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(i,{checkSiblings:!0})){let e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:c,valueToDisplay:s});e&&(e.compDetails?c=e.compDetails:e.valueToDisplay&&(s=e.valueToDisplay))}this.comp.setRenderDetails(c,s,e),!t&&a&&rr(n,()=>a?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get(`enableCellTextSelection`)||this.column.isAutoHeight()}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&sc(this.rowNode))&&!!e}isCheckboxSelection(e){let{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,r=fi(t),i=va(this.column);return n===`custom`&&r!==`selectionColumn`&&i?!1:e.checkboxSelection||i&&typeof t==`object`&&ui(t)}refreshShouldDestroy(){let e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),i=this.isAutoHeight!=this.column.isAutoHeight();return t||n||r||i}onPopupEditorClosed(){let{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?`ui`:`api`})}stopEditing(e=!1){let{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?`ui`:`api`})??!1}createCellRendererParams(){let{value:e,valueFormatted:t,column:n,rowNode:r,comp:i,eGui:a,beans:{valueSvc:o,gos:s,editSvc:c}}=this;return U(s,{value:e,valueFormatted:t,getValue:()=>o.getValueForDisplay(n,r).value,setValue:e=>c?.setDataValue({rowNode:r,column:n},e)||o.setValue(r,n,e),formatValue:this.formatValue.bind(this),data:r.data,node:r,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:a,eParentOfValue:i.getParentOfValue(),registerRowDragger:(e,t,n,r)=>this.registerRowDragger(e,t,r),setTooltip:(e,t)=>{s.assertModuleRegistered(`Tooltip`,3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell({force:e,suppressFlash:t,newData:n}={}){if(this.suppressRefreshCell)return;let r=this.column.getColDef(),i=r.field==null&&r.valueGetter==null&&r.showRowGroup==null,a=e||i||n,o=!!this.comp,s=this.updateAndFormatValue(o),c=a||s;if(o){if(c){this.showValue(!!n,!1);let e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!t&&!e&&r.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.editStyleFeature?.applyCellStyles?.(),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let t=this.value,n=this.valueFormatted,{value:r,valueFormatted:i}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=r,this.valueFormatted=i,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){let n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){let t=this.eGui;Jr(this.beans.gos,t,Rc,this),e.addDestroyFunc(()=>Jr(this.beans.gos,t,Rc,null))}createEvent(e,t){let{rowNode:n,column:r,value:i,beans:a}=this;return Cc(a,e,t,{rowNode:n,column:r},i)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:e,column:t,beans:n}=this;ic(e,t,n.visibleCols)}refreshAriaColIndex(){let e=this.beans.visibleCols.getAriaColIndex(this.column);Qt(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){let n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){let{beans:{editSvc:t,focusSvc:n},comp:r}=this;if(!r||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;let i=()=>{if(!this.isAlive())return;let e=r.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};if(e){setTimeout(i,0);return}i()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){let t=this.eGui;t&&(ya(this.column)&&(e=!0),tr(t,`tabindex`,e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let e=this.column.isFirstRightPinned();this.comp.toggleCss(Pc,e)}onLastLeftPinnedChanged(){if(!this.comp)return;let e=this.column.isLastLeftPinned();this.comp.toggleCss(Fc,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){let e=this.checkCellFocused();return this.hasBeenFocused||=e,e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){let{beans:t}=this;if(xc(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}let n=this.isCellFocused(),r=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(Nc,n),n&&e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(r){let e=gc(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:bt(t),column:this.column}}applyStaticCssClasses(){let{comp:e}=this;e.toggleCss(Ac,!0),e.toggleCss(Ic,!0);let t=this.column.isAutoHeight()==1;e.toggleCss(jc,t),e.toggleCss(Mc,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){let e=this.column.getColDef().wrapText==1;this.comp.toggleCss(Lc,e)}dispatchCellContextMenuEvent(e){let t=this.column.getColDef(),n=this.createEvent(e,`cellContextMenu`),{beans:r}=this;r.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{r.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(H(this.beans))??!1}createSelectionCheckbox(){let e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=this.beans.registry.createDynamicBean(`dndSourceComp`,!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}let r=this.createRowDragComp(e,t,n);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,t,n){let r=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(r)return this.beans.context.createBean(r),r}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},Hc=`__ag_grid_instance`;function Uc(e,t){t[Hc]=e.gridInstanceId}function Wc(e,t){return Gc(e,t.target)}function Gc(e,t){let n=t;for(;n;){let t=n[Hc];if(j(t))return t===e.gridInstanceId;n=n.parentElement}return!1}function Kc(e,t){return zc(e,t.target)?.getFocusedCellPosition()??null}var qc=class extends W{constructor(){super(...arguments),this.beanName=`dragAndDrop`,this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let{dragSourceAndParamsList:t,dragSvc:n}=this,r=t.find(t=>t.dragSource===e);r&&(n.removeDragSource(r.params),ua(t,r))}destroy(){let{dragSourceAndParamsList:e,dragSvc:t,dropTargets:n}=this;e.forEach(e=>t.removeDragSource(e.params)),e.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();let{lastDropTarget:t}=this;if(t?.onDragStop){let n=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let n=this.getHorizontalDirection(e),r=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let i=this.dropTargets.filter(t=>this.isMouseOnDropTarget(e,t)),a=this.findCurrentDropTarget(e,i),{lastDropTarget:o,dragSource:s,dragAndDropImageComp:c,dragItem:l}=this;if(a!==o){if(this.leaveLastTargetIfExists(e,n,r,t),o!==null&&a===null&&s?.onGridExit?.(l),o===null&&a!==null&&s?.onGridEnter?.(l),this.enterDragTargetIfExists(a,e,n,r,t),a&&c){let{comp:e,promise:t}=c;e?e.setIcon(a.getIconName?a.getIconName():null,!1):t.then(e=>{e&&e.setIcon(a.getIconName?a.getIconName():null,!1)})}this.lastDropTarget=a}else if(a&&a.onDragging){let i=this.createDropTargetEvent(a,e,n,r,t);a.onDragging(i)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),r=!1,i=(e,t)=>{for(let n of t){let{width:t,height:r,left:i,right:a,top:o,bottom:s}=n.getBoundingClientRect();if(t===0||r===0)return!1;let c=e.clientX>=i&&e.clientX<a,l=e.clientY>=o&&e.clientY<s;if(!c||!l)return!1}return!0};for(let t of n)if(i(e,t)){r=!0;break}let{eElement:a,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(a)?!1:r&&t.isInterestedIn(o,a)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let r=Xr(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let e of r)for(let n of t)if(this.getAllContainersFromDropTarget(n).flatMap(e=>e).indexOf(e)!==-1)return n;return null}enterDragTargetIfExists(e,t,n,r,i){if(e&&e.onDragEnter){let a=this.createDropTargetEvent(e,t,n,r,i);e.onDragEnter(a)}}leaveLastTargetIfExists(e,t,n,r){let{lastDropTarget:i}=this;if(!i)return;if(i.onDragLeave){let a=this.createDropTargetEvent(i,e,t,n,r);i.onDragLeave(a)}let a=this.getDragAndDropImageComponent();a&&a.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(e=>e.external).find(t=>t.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let t=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:n}=e;return t.contains(n)}getHorizontalDirection(e){let t=this.eventLastTime?.clientX,n=e.clientX;return t===n?null:t>n?`left`:`right`}getVerticalDirection(e){let t=this.eventLastTime?.clientY,n=e.clientY;return t===n?null:t>n?`up`:`down`}createDropTargetEvent(e,t,n,r,i){let a=e.getContainer(),o=a.getBoundingClientRect(),{dragItem:s,dragSource:c,gos:l}=this;return U(l,{event:t,x:t.clientX-o.left,y:t.clientY-o.top,vDirection:r,hDirection:n,dragSource:c,fromNudge:i,dragItem:s,dropZoneTarget:a})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();t&&ei(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;if(e){let{comp:t}=e;if(t){let e=t.getGui();this.dragAndDropImageParent?.removeChild(e),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e,gos:t,userCompFactory:n}=this;if(!e)return;let r=ko(n,U(t,{dragSource:e}));if(!r)return;let i=r.newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(e=>{!e||!this.isAlive()||(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)})}processDragAndDropImageComponent(e){let{dragSource:t,environment:n}=this;if(!t)return;let r=e.getGui();r.style.setProperty(`position`,`absolute`),r.style.setProperty(`z-index`,`9999`),Uc(this.gos,r),n.applyThemeClasses(r),e.setIcon(null,!1);let{dragItemName:i}=t;typeof i==`function`&&(i=i()),e.setLabel(i||``),r.style.top=`20px`,r.style.left=`20px`;let a=Zr(this.beans);this.dragAndDropImageParent=a,a?a.appendChild(r):L(54)}registerGridDropTarget(e,t){let n={getContainer:e,isInterestedIn:e=>e===1||e===0,getIconName:()=>`notAllowed`};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},Jc=class extends W{constructor(){super(...arguments),this.beanName=`dragSvc`,this.dragEndFunctions=[],this.dragSources=[]}destroy(){let{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener(`mousedown`,n),e.touchEnabled){let n=e.touchStartListener;t.removeEventListener(`touchstart`,n,{passive:!0})}}removeDragSource(e){let{dragSources:t}=this,n=t.find(t=>t.dragSource===e);n&&(this.removeListener(n),ua(t,n))}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:r,stopPropagationForTouch:i}=e;n.addEventListener(`mousedown`,t);let a=null,o=this.gos.get(`suppressTouch`);r&&!o&&(a=t=>{En(t.target)||(i&&t.stopPropagation(),this.onTouchStart(e,t))},n.addEventListener(`touchstart`,a,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:a,touchEnabled:!!r})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let r=t=>this.onTouchMove(t,e.eElement),i=t=>this.onTouchUp(t,e.eElement),a=e=>{e.cancelable&&e.preventDefault()},o=t.target,s=[{target:Xr(this.beans),type:`touchmove`,listener:a,options:{passive:!1}},{target:o,type:`touchmove`,listener:r,options:{passive:!0}},{target:o,type:`touchend`,listener:i,options:{passive:!0}},{target:o,type:`touchcancel`,listener:i,options:{passive:!0}}];this.addTemporaryEvents(s),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let r=t=>this.onMouseMove(t,e.eElement),i=t=>this.onMouseUp(t,e.eElement),a=e=>e.preventDefault(),o=t=>{t.key===X.ESCAPE&&this.cancelDrag(e.eElement)},s=Xr(this.beans),c=[{target:s,type:`mousemove`,listener:r},{target:s,type:`mouseup`,listener:i},{target:s,type:`contextmenu`,listener:a},{target:s,type:`keydown`,listener:o}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(e=>{let{target:t,type:n,listener:r,options:i}=e;t.addEventListener(n,r,i)}),this.dragEndFunctions.push(()=>{e.forEach(e=>{let{target:t,type:n,listener:r,options:i}=e;t.removeEventListener(n,r,i)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams;return Ec(e,t,j(n)?n:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:`dragStarted`,target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){hn()&&V(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let{gos:t}=this,n=t.get(`enableCellTextSelection`),r=e.type===`mousemove`;return n&&r&&e.cancelable&&Wc(t,e)&&!(e=>!!(e.target?.tagName.toLocaleLowerCase())?.match(`^a$|textarea|input|select|button`))(e)}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||=this.touchLastTime,this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:`dragStopped`,target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:`dragCancelled`,target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;let{dragEndFunctions:e}=this;e.forEach(e=>e()),e.length=0}};function Yc(e,t){return e+`_`+t}function Z(e){return e instanceof Xc}var Xc=class extends W{constructor(e,t,n,r){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=r,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return Yc(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(e=>e.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Z(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get(`enableRtl`)){let e=K(this.displayedChildren).getLeft();this.setLeft(e)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:`leftChanged`}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||=[],this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{ta(t)?e.push(t):Z(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{ta(t)?e.push(t):Z(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e&&e.getProvidedColumnGroup().isExpandable())){this.displayedChildren=this.children,this.dispatchLocalEvent({type:`displayedChildrenChanged`});return}this.children.forEach(t=>{if(!(Z(t)&&!t.displayedChildren?.length))switch(t.getColumnGroupShow()){case`open`:e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case`closed`:e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t);break}}),this.dispatchLocalEvent({type:`displayedChildrenChanged`})}},Zc=`row-group-`,Qc=0,$c=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Qc++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){let{valueCache:n,eventSvc:r}=this.beans,i=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();let a=this.createDataChangedEvent(e,i,t);if(this.__localEventService?.dispatchEvent(a),this.sibling){this.sibling.data=e;let n=this.sibling.createDataChangedEvent(e,i,t);this.sibling.__localEventService?.dispatchEvent(n)}r.dispatchEvent({type:`rowNodeDataChanged`,node:this});let o=this.pinnedSibling;o&&(o.data=e,o.__localEventService?.dispatchEvent(o.createDataChangedEvent(e,i,t)),r.dispatchEvent({type:`rowNodeDataChanged`,node:o}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,n){return{type:`dataChanged`,node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(R(13),null):this.rowPinned===`top`?`t-`+this.rowIndex:this.rowPinned===`bottom`?`b-`+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){let{selectionSvc:n}=this.beans,r=n?.createDaemonNode?.(this),i=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,r));let a=this.createDataChangedEvent(e,i,!1);this.__localEventService?.dispatchEvent(a)}setId(e){let t=li(this.beans.gos);if(t)if(this.data){let e=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(`row-group-`)&&R(14,{groupPrefix:Zc})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent(`topChanged`),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent(`heightChanged`)}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){let{colModel:r,valueSvc:i,gos:a,editSvc:o}=this.beans,s=typeof e==`string`?r.getCol(e)??r.getColDefCol(e):e;if(!s)return!1;let c=i.getValueForDisplay(s,this,void 0,void 0,`api`).value;if(a.get(`readOnlyEdit`)){let{beans:{eventSvc:e},data:r,rowIndex:i,rowPinned:a}=this;return e.dispatchEvent({type:`cellEditRequest`,event:null,rowIndex:i,rowPinned:a,column:s,colDef:s.colDef,data:r,node:this,oldValue:c,newValue:t,value:t,source:n}),!1}if(o){let e=o.setDataValue({rowNode:this,column:s},t,n);if(e!=null)return e}let l=i.setValue(this,s,t,n);this.dispatchCellChangedEvent(s,t,c);let u=this.pinnedSibling;return u&&l&&u.dispatchCellChangedEvent(s,t,c),l}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent(`hasChildrenChanged`))}hasChildren(){return this.__hasChildren??this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){let r={type:`cellChanged`,node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach(t=>t.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n=`api`){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||=new gt,this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||=new gt,this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);let n=this.frameworkEventListenerService?.wrap(e,t)??t;this.__localEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(L(61),this.detail)return!0;let e=this.beans.gos.getCallback(`isFullWidthRow`);return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let e=[],t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent(`firstChildChanged`))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent(`displayedChanged`))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent(`rowIndexChanged`))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent(`allChildrenCountChanged`))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent(`uiLevelChanged`))}getFirstChild(){return this.childStore?this.childStore.getFirstNode():this.childrenAfterSort?.[0]??null}};function el(e,t,n){return U(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var tl=new Set([`__localEventService`,`__objectId`,`sticky`,`__autoHeights`,`__checkAutoHeightsDebounced`,`childStore`]);function nl(e,t){let n=new $c(t);return Object.keys(e).forEach(t=>{tl.has(t)||(n[t]=e[t])}),n.oldRowTop=null,n}var rl={agSetColumnFilter:`agSetColumnFilterHandler`,agMultiColumnFilter:`agMultiColumnFilterHandler`,agGroupColumnFilter:`agGroupColumnFilterHandler`,agNumberColumnFilter:`agNumberColumnFilterHandler`,agDateColumnFilter:`agDateColumnFilterHandler`,agTextColumnFilter:`agTextColumnFilterHandler`},il=new Set(Object.values(rl));function al(e,t){let n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;let r=n.create(n.refreshed),i=n;return i.created=!0,i.promise=r,r}function ol(e,t,n,r,i,a){return t.refresh?.({...n,model:r,source:a}),e().then(e=>{if(e){let{filter:t,filterParams:n}=e;sl(t,n,r,i,a)}})}function sl(e,t,n,r,i){e?.refresh?.({...t,model:n,state:r,source:i})}function cl(e,t,n){let r=e();r?.created&&r.promise.then(e=>{let i=t();sl(e,r.filterParams,i,n()??{model:i},`ui`)})}function ll(e,t,n,r,i,a){let o,s=!1,c;switch(e){case`apply`:{let e=r();c=e?.model??null,o={state:e?.state,model:c},s=!0;break}case`clear`:o={model:null};break;case`reset`:o={model:null},s=!0,c=null;break;case`cancel`:o={model:n()};break}i(o),s?a(c):cl(t,n,r)}function Q(e,t){return e[t]??null}function ul(e){return{tag:`div`,cls:e}}var dl=class extends q{constructor(e){let{className:t=`ag-filter-apply-panel`}=e??{};super(ul(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){let n=this.buttons;if(this.buttons=e,n===e)return;let r=this.getGui();Rn(r);let i;this.destroyListeners();let a=document.createDocumentFragment(),o=this.className,s=({type:e,label:n})=>{let r=t=>{this.dispatchLocalEvent({type:e,event:t})};[`apply`,`clear`,`reset`,`cancel`].includes(e)||L(75);let s=e===`apply`,c=F({tag:`button`,attrs:{type:s&&t?`submit`:`button`},ref:`${e}FilterButton`,cls:`ag-button ag-standard-button ${o}-button${s?` `+o+`-apply-button`:``}`,children:n});this.activateTabIndex([c]),s&&(i=c);let l=e=>{e.key===X.ENTER&&(e.preventDefault(),r(e))},u=this.listeners;c.addEventListener(`click`,r),u.push(()=>c.removeEventListener(`click`,r)),c.addEventListener(`keydown`,l),u.push(()=>c.removeEventListener(`keydown`,l)),a.append(c)};e.forEach(e=>s(e)),this.eApply=i;let c=this.validationTooltipFeature;i&&!c?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean(`tooltipFeature`,!1,{getGui:()=>this.eApply,getLocation:()=>`advancedFilter`,getTooltipShowDelayOverride:()=>1e3})):!i&&c&&(this.validationTooltipFeature=this.destroyBean(c)),r.append(a)}getApplyButton(){return this.eApply}updateValidity(e,t=null){let n=this.eApply;n&&(On(n,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){this.listeners.forEach(e=>e()),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},fl={applyFilter:`Apply`,clearFilter:`Clear`,resetFilter:`Reset`,cancelFilter:`Cancel`,textFilter:`Text Filter`,numberFilter:`Number Filter`,dateFilter:`Date Filter`,setFilter:`Set Filter`,filterOoo:`Filter...`,empty:`Choose one`,equals:`Equals`,notEqual:`Does not equal`,lessThan:`Less than`,greaterThan:`Greater than`,inRange:`Between`,inRangeStart:`From`,inRangeEnd:`To`,lessThanOrEqual:`Less than or equal to`,greaterThanOrEqual:`Greater than or equal to`,contains:`Contains`,notContains:`Does not contain`,startsWith:`Begins with`,endsWith:`Ends with`,blank:`Blank`,notBlank:`Not blank`,before:`Before`,after:`After`,andCondition:`AND`,orCondition:`OR`,dateFormatOoo:`yyyy-mm-dd`,filterSummaryInactive:`is (All)`,filterSummaryContains:`contains`,filterSummaryNotContains:`does not contain`,filterSummaryTextEquals:`equals`,filterSummaryTextNotEqual:`does not equal`,filterSummaryStartsWith:`begins with`,filterSummaryEndsWith:`ends with`,filterSummaryBlank:`is blank`,filterSummaryNotBlank:`is not blank`,filterSummaryEquals:`=`,filterSummaryNotEqual:`!=`,filterSummaryGreaterThan:`>`,filterSummaryGreaterThanOrEqual:`>=`,filterSummaryLessThan:`<`,filterSummaryLessThanOrEqual:`<=`,filterSummaryInRange:`between`,filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function pl(e,t,n){return yt(e,fl,t,n)}function ml(e,t){let{debounceMs:n}=e;return hl(e)?(n!=null&&L(71),0):n??t}function hl(e){return(e.buttons?.indexOf(`apply`)??-1)>=0}var gl=class extends q{constructor(e,t,n,r,i,a){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=r,this.isGlobalButtons=i,this.enableGlobalButtonCheck=a,this.hidePopup=null,this.applyActive=!1}postConstruct(){let{comp:e,params:t}=this.wrapper,n=t,r=n.useForm,i=r?`form`:`div`;this.setTemplate({tag:i,cls:`ag-filter-wrapper`}),r&&this.addManagedElementListeners(this.getGui(),{submit:e=>{e?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:e,params:t})=>{e===this.column&&this.resetButtonsPanel(t,this.params)},filterStateChanged:({column:e,state:t})=>{e===this.column&&this.eButtons?.updateValidity(t.valid!==!1)},filterAction:({column:e,action:t,event:n})=>{e===this.column&&this.afterAction(t,n)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:e})=>{if(e!==this.isGlobalButtons){this.isGlobalButtons=e;let t=this.params;this.resetButtonsPanel(t,t,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){let{buttons:r,readOnly:i}=t??{},{buttons:a,readOnly:o,useForm:s}=e;if(!n&&i===o&&St(r,a))return;let c=a&&a.length>0&&!e.readOnly&&!this.isGlobalButtons,l=this.eButtons;if(c){let e=a.map(e=>{let t=`${e}Filter`;return{type:e,label:pl(this,t)}});if(this.applyActive=hl(this.params),!l){l=this.createBean(new dl),this.appendChild(l.getGui());let e=this.column,t=t=>({event:n})=>{this.updateModel(e,t),this.afterAction(t,n)};l?.addManagedListeners(l,{apply:t(`apply`),clear:t(`clear`),reset:t(`reset`),cancel:t(`cancel`)}),this.eButtons=l}l.updateButtons(e,s)}else this.applyActive=!1,l&&(zn(l.getGui()),this.eButtons=this.destroyBean(l))}close(e){let t=this.hidePopup;if(!t)return;let n=e,r=n&&n.key,i;(r===X.ENTER||r===X.SPACE)&&(i={keyboardEvent:n}),t(i),this.hidePopup=null}afterAction(e,t){let{params:n,applyActive:r}=this,i=n?.closeOnApply;switch(e){case`apply`:t?.preventDefault(),i&&r&&this.close(t);break;case`reset`:i&&r&&this.close();break;case`cancel`:i&&this.close(t);break}}handleKeyDown(e){!e.defaultPrevented&&e.key===X.ENTER&&this.applyActive&&(this.updateModel(this.column,`apply`),this.afterAction(`apply`,e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},_l={tag:`div`,cls:`ag-filter`},vl=class extends q{constructor(e,t,n){super(_l),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??J.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n,beans:{colFilter:r}}=this,i=r.getFilterUiForDisplay(t)??null;this.wrapper=i,i?.then(i=>{if(!i)return;let{isHandler:a,comp:o}=i,s;if(a){let e=!!this.enableGlobalButtonCheck,n=this.createBean(new gl(t,i,r,r.updateModel.bind(r),e&&r.isGlobalButtons,e));this.comp=n,s=n.getGui()}else s=o.getGui(),j(s)||L(69,{guiFromFilter:s});this.appendChild(s),e?this.eventSvc.dispatchEvent({type:`filterOpened`,column:t,source:n,eGui:this.getGui()}):o.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){let{source:t,column:n}=e;(t===`api`||t===`paramsUpdated`)&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Rn(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:`filterClosed`,column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},yl=`T`,bl=RegExp(`^\\d{4}-\\d{2}-\\d{2}(${yl}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function xl(e,t){return e.toString().padStart(t,`0`)}function Sl(e,t=!0,n=`-`){if(!e)return null;let r=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>xl(e,2)).join(n);return t&&(r+=yl+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>xl(e,2)).join(`:`)),r}function Cl(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),xl(e.getDate(),2),xl(e.getHours(),2),`:${xl(e.getMinutes(),2)}`,`:${xl(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,xl(e.getDate(),2)].map(String):null}var wl=e=>{if(e>3&&e<21)return`th`;switch(e%10){case 1:return`st`;case 2:return`nd`;case 3:return`rd`}return`th`};function Tl(e,t){if(t==null)return Sl(e,!1);let n=xl(e.getFullYear(),4),r=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],i=[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`],a={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>r[e.getMonth()],MMM:()=>r[e.getMonth()].slice(0,3),MM:()=>xl(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${wl(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${wl(e.getDate())}`,DD:()=>xl(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>i[e.getDay()],ddd:()=>i[e.getDay()].slice(0,3),dd:()=>i[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${wl(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(a).join(`|`),`g`);return t.replace(o,e=>e in a?a[e]():e)}function El(e,t=!1){return!!Ol(e,t)}function Dl(e){return El(e,!0)}function Ol(e,t=!1){if(!e||!bl.test(e))return null;let[n,r]=e.split(yl);if(!n)return null;let i=n.split(`-`).map(e=>parseInt(e,10));if(i.filter(e=>!isNaN(e)).length!==3)return null;let[a,o,s]=i,c=new Date(a,o-1,s);if(c.getFullYear()!==a||c.getMonth()!==o-1||c.getDate()!==s||!r&&t)return null;if(!r||r===`00:00:00`)return c;let[l,u,d]=r.split(`:`).map(e=>parseInt(e,10));if(l>=0&&l<24)c.setHours(l);else if(t)return null;if(u>=0&&u<60)c.setMinutes(u);else if(t)return null;if(d>=0&&d<60)c.setSeconds(d);else if(t)return null;return c}var kl={january:`January`,february:`February`,march:`March`,april:`April`,may:`May`,june:`June`,july:`July`,august:`August`,september:`September`,october:`October`,november:`November`,december:`December`},Al=[`january`,`february`,`march`,`april`,`may`,`june`,`july`,`august`,`september`,`october`,`november`,`december`];function jl(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}function Ml(e){return e instanceof Date&&!isNaN(e.getTime())}var Nl={number:()=>void 0,boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:[`empty`,{displayKey:`true`,displayName:`True`,predicate:(e,t)=>t,numberOfInputs:0},{displayKey:`false`,displayName:`False`,predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:Ml}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{let r=e.dateParser(n);return n==null||r<t?-1:r>t?1:0},isValidDate:t=>typeof t==`string`&&Ml(e.dateParser(t))}),dateTime:e=>Nl.date(e),dateTimeString:e=>Nl.dateString(e),object:()=>void 0,text:()=>void 0},Pl={number:()=>({comparator:jl}),boolean:({t:e})=>({valueFormatter:t=>j(t.value)?e(String(t.value),t.value?`True`:`False`):e(`blanks`,`(Blanks)`)}),date:({formatValue:e,t})=>({valueFormatter:n=>{let r=e(n);return j(r)?r:t(`blanks`,`(Blanks)`)},treeList:!0,treeListFormatter:(e,n)=>{if(e===`NaN`)return t(`invalidDate`,`Invalid Date`);if(n===1&&e!=null){let n=Al[Number(e)-1];return t(n,kl[n])}return e??t(`blanks`,`(Blanks)`)},treeListPathGetter:e=>Cl(e,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:t=>{let r=e(t);return j(r)?r:n(`blanks`,`(Blanks)`)},treeList:!0,treeListPathGetter:e=>Cl(t.dateParser(e??void 0),!1),treeListFormatter:(e,t)=>{if(t===1&&e!=null){let t=Al[Number(e)-1];return n(t,kl[t])}return e??n(`blanks`,`(Blanks)`)}}),dateTime:e=>{let t=Pl.date(e);return t.treeListPathGetter=Cl,t},dateTimeString(e){let t=e.dataTypeDefinition.dateParser,n=Pl.dateString(e);return n.treeListPathGetter=e=>Cl(t(e??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{let r=e(n);return j(r)?r:t(`blanks`,`(Blanks)`)}}),text:()=>void 0};function Fl(e,t,n,r,i,a,o){let s=t,c=n,l=e===`agSetColumnFilter`;!c&&r.baseDataType===`object`&&!l&&(c=({column:e,node:t})=>i({column:e,node:t,value:a.valueSvc.getValue(e,t)}));let u=(l?Pl:Nl)[r.baseDataType],d=u({dataTypeDefinition:r,formatValue:i,t:o});return s=typeof t==`object`?{...d,...t}:d,{filterParams:s,filterValueGetter:c}}var Il={boolean:`agTextColumnFilter`,date:`agDateColumnFilter`,dateString:`agDateColumnFilter`,dateTime:`agDateColumnFilter`,dateTimeString:`agDateColumnFilter`,number:`agNumberColumnFilter`,object:`agTextColumnFilter`,text:`agTextColumnFilter`},Ll={boolean:`agTextColumnFloatingFilter`,date:`agDateColumnFloatingFilter`,dateString:`agDateColumnFloatingFilter`,dateTime:`agDateColumnFloatingFilter`,dateTimeString:`agDateColumnFloatingFilter`,number:`agNumberColumnFloatingFilter`,object:`agTextColumnFloatingFilter`,text:`agTextColumnFloatingFilter`};function Rl(e,t=!1){return(t?Ll:Il)[e??`text`]}var zl=`ag-resizer-wrapper`,Bl=(e,t)=>({tag:`div`,ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),Vl={tag:`div`,cls:zl,children:[Bl(`eTopLeft`,`topLeft`),Bl(`eTop`,`top`),Bl(`eTopRight`,`topRight`),Bl(`eRight`,`right`),Bl(`eBottomRight`,`bottomRight`),Bl(`eBottom`,`bottom`),Bl(`eBottomLeft`,`bottomLeft`),Bl(`eLeft`,`left`)]},Hl=class extends W{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){let{clientHeight:t,clientWidth:n}=this.offsetParent,r=n/2-this.getWidth()/2,i=t/2-this.getHeight()/2;this.offsetElement(r,i,e)}initialisePosition(e){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:n,minWidth:r,width:i,minHeight:a,height:o,x:s,y:c}=this.config;this.offsetParent||this.setOffsetParent();let l=0,u=0,d=Vn(this.element);if(d){let e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(t.minWidth!=null){let n=e.offsetWidth-this.element.offsetWidth;u=parseInt(t.minWidth,10)-n}if(t.minHeight!=null){let n=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-n}}if(this.minHeight=a||l,this.minWidth=r||u,i&&this.setWidth(i),o&&this.setHeight(o),(!i||!o)&&this.refreshSize(),t)this.center(e);else if(s||c)this.offsetElement(s,c,e);else if(d&&n){let t=this.boundaryEl,n=!0;if(t||(t=this.findBoundaryElement(),n=!1),t){let r=parseFloat(t.style.top),i=parseFloat(t.style.left);n?this.offsetElement(isNaN(i)?0:i,isNaN(r)?0:r,e):this.setPosition(i,r)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e==`boolean`){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let n=!!e[t],r=this.getResizerElement(t),i={dragStartPixels:0,eElement:r,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragSvc?.addDragSource(i),this.resizeListeners.push(i),r.style.pointerEvents=`all`):r.style.pointerEvents=`none`,this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty(`height`),this.element.style.removeProperty(`width`),this.element.style.removeProperty(`flex`)}restoreLastSize(){this.element.style.flex=`0 0 auto`;let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,r=!1;if(typeof e==`string`&&e.indexOf(`%`)!==-1)Qn(n,e),e=Nn(n),r=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(r?(n.style.maxHeight=`unset`,n.style.minHeight=`unset`):t?Qn(n,e):(n.style.height=`${e}px`,n.style.flex=`0 0 auto`,this.lastSize.height=typeof e==`number`?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let r=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),a=e?this.position.y:r.top,o=e?0:i.top,s=0;if(t){let e=this.element.parentElement;if(e){let{bottom:t}=e.getBoundingClientRect();s=t-r.bottom}}return n+o-a-s}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,r=!1;if(typeof e==`string`&&e.indexOf(`%`)!==-1)Zn(t,e),e=Pn(t),r=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:t}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;t&&e+r>t&&(e=t-r)}this.getWidth()!==e&&(r?(t.style.maxWidth=`unset`,t.style.minWidth=`unset`):this.config.popup?Zn(t,e):(t.style.width=`${e}px`,t.style.flex=` unset`,this.lastSize.width=typeof e==`number`?e:parseFloat(e)))}offsetElement(e=0,t=0,n){let{forcePopupParentAsOffsetParent:r}=this.config,i=r?this.boundaryEl:this.element;i&&(this.popupSvc?.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){this.config.forcePopupParentAsOffsetParent&&(e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=nr(this.beans,this.popupSvc?.getPopupParent(),()=>{let e=this.getAvailableHeight();this.element.style.setProperty(`max-height`,`${e}px`)})):(this.element.style.removeProperty(`max-height`),this.resizeObserverSubscriber&&=(this.resizeObserverSubscriber(),void 0)))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:r,anywhereWithin:i,topBuffer:a}=e,o=t.clientX-this.dragStartPosition.x,s=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!n,!!i,o)?0:o,movementY:this.shouldSkipY(t,!!r,a,s)?0:s}}shouldSkipX(e,t,n,r){let i=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.x:i.left,c=s<=0&&a.left>=e.clientX||a.right<=e.clientX&&a.right<=o.right;return c?!0:(c=t?r<0&&e.clientX>s+a.left||r>0&&e.clientX<s+a.left:n?r<0&&e.clientX>o.right||r>0&&e.clientX<s+a.left:r<0&&e.clientX>o.right||r>0&&e.clientX<o.right,c)}shouldSkipY(e,t,n=0,r){let i=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.y:i.top,c=s<=0&&a.top>=e.clientY||a.bottom<=e.clientY&&a.bottom<=o.bottom;return c?!0:(c=t?r<0&&e.clientY>s+a.top+n||r>0&&e.clientY<s+a.top:r<0&&e.clientY>o.bottom||r>0&&e.clientY<o.bottom,c)}createResizeMap(){let e=e=>({element:this.element.querySelector(`[data-ref=${e}Resizer]`)});this.resizerMap={topLeft:e(`eTopLeft`),top:e(`eTop`),topRight:e(`eTopRight`),right:e(`eRight`),bottomRight:e(`eBottomRight`),bottom:e(`eBottom`),bottomLeft:e(`eBottomLeft`),left:e(`eLeft`)}}addResizers(){if(this.resizersAdded)return;let e=this.element;e&&(e.appendChild(F(Vl)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${zl}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add(`ag-resizing`),this.resizerMap[t].element.classList.add(`ag-active`);let{popup:n,forcePopupParentAsOffsetParent:r}=this.config;!n&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(e=>!e.classList.contains(`ag-hidden`)):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let r=0;r<e.length;r++){let i=e[r],a=!!i.style.flex&&i.style.flex!==`0 0 auto`;if(i===this.element)continue;let o=this.minHeight||0,s=this.minWidth||0;if(a){let e=window.getComputedStyle(i);e.minHeight&&(o=parseInt(e.minHeight,10)),e.minWidth&&(s=parseInt(e.minWidth,10))}else o=i.offsetHeight,s=i.offsetWidth;t+=o,n+=s}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let r=0;r<n.length;r++){let i=n[r];i!==t&&(e?i.style.height=`${i.offsetHeight}px`:i.style.width=`${i.offsetWidth}px`,i.style.flex=`0 0 auto`,i===this.element&&(t=n[r+1]))}t&&(t.style.removeProperty(`height`),t.style.removeProperty(`min-height`),t.style.removeProperty(`max-height`),t.style.flex=`1 1 auto`)}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:r,isRight:i,isBottom:a,isLeft:o}=this.currentResizer,s=i||o,c=a||r,{movementX:l,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:r}),d=this.position.x,f=this.position.y,p=0,m=0;if(s&&l){let e=o?-1:1,t=this.getWidth(),n=t+l*e,r=!1;o&&(p=t-n,(d+p<=0||n<=this.minWidth)&&(r=!0,p=0)),r||this.setWidth(n)}if(c&&u){let e=r?-1:1,t=this.getHeight(),n=t+u*e,i=!1;r?(m=t-n,(f+m<=0||n<=this.minHeight)&&(i=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<n&&this.getMinSizeOfSiblings().height+n>this.element.parentElement.offsetHeight&&(i=!0),i||this.setHeight(n)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||m)&&this.offsetElement(d+p,f+m)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove(`ag-resizing`),this.resizerMap[t].element.classList.remove(`ag-active`),this.dispatchLocalEvent({type:`resize`})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add(`ag-moving`),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());let{movementX:i,movementY:a}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(t+i,n+a),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove(`ag-moving`)}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!==`static`)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Ul=`ag-focus-managed`,Wl=class extends W{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;let t=vc(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}postConstruct(){let{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(Ul),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||zi(e))return;let{callbacks:t}=this;if(t.shouldStopEventPropagation(e)){Ri(e);return}e.key===X.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},Gl=class extends q{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){let e={tag:`div`,cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Wl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new Hl(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){let t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){let t=e,n=this.params;this.params=t,t.source===`colDef`&&this.updateParams(t,n);let r=t.state,i=this.state;return this.state=r,(r.model!==i.model||r.state!==i.state)&&this.setModelIntoUi(r.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=hl(e),this.setupApplyDebounced()}doesFilterPass(e){L(283);let{getHandler:t,model:n,column:r}=this.params;return t().doesFilterPass({...e,model:n,handlerParams:this.beans.colFilter.getHandlerParams(r)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return L(284),this.params.model!=null}setupApplyDebounced(){let e=ml(this.params,this.defaultDebounceMs),t=hr(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return L(285),this.params.model}setModel(e){L(286);let{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e=`api`){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){let{params:t,state:n}=this,r=!this.areModelsEqual(t.model,n.model);return r&&t.onAction(`apply`,e),r}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();let n=this.getModelFromUi(),r={model:n,state:this.getState(),valid:this.canApply(n)};this.state=r;let i=this.params;i.onStateChange(r),i.onUiChange(this.getUiChangeEventParams()),this.gos.get(`enableFilterHandlers`)||this.eventSvc.dispatchEvent({type:`filterModified`,column:i.column,filterInstance:this}),e??=this.applyActive?void 0:`debounce`,e===`immediately`?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e===`debounce`&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){let{positionableFeature:t,gos:n}=this;if(!t)return;let r=e===`floatingFilter`||e===`columnFilter`;r?(t.restoreLastSize(),t.setResizable(n.get(`enableRtl`)?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(r)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return pl(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function Kl(e){return!!e.operator}function ql(e,t,n){if(t==null)return null;let r=null,{compName:i,jsComp:a,fwComp:o}=qo(e,t);return i?r={agSetColumnFilter:`agSetColumnFloatingFilter`,agMultiColumnFilter:`agMultiColumnFloatingFilter`,agGroupColumnFilter:`agGroupColumnFloatingFilter`,agNumberColumnFilter:`agNumberColumnFloatingFilter`,agDateColumnFilter:`agDateColumnFloatingFilter`,agTextColumnFilter:`agTextColumnFloatingFilter`}[i]:a==null&&o==null&&t.filter===!0&&(r=n()),r}var Jl={AUTO_HEIGHT:`ag-layout-auto-height`,NORMAL:`ag-layout-normal`,PRINT:`ag-layout-print`},Yl=class extends W{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener(`domLayout`,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.gos.get(`domLayout`),t={autoHeight:e===`autoHeight`,normal:e===`normal`,print:e===`print`},n=t.autoHeight?Jl.AUTO_HEIGHT:t.print?Jl.PRINT:Jl.NORMAL;this.view.updateLayoutClasses(n,t)}},Xl=`Viewport`,Zl=`fakeVScrollComp`,Ql=[`fakeHScrollComp`,`centerHeader`,`topCenter`,`bottomCenter`,`stickyTopCenter`,`stickyBottomCenter`],$l=100,eu=150,tu=class extends W{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=hr(this,()=>this.lastScrollSource[1]=null,eu),this.resetLastVScrollDebounced=hr(this,()=>this.lastScrollSource[0]=null,eu)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get(`enableRtl`);let e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Xl)});for(let e of Ql){let t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsSvc.get(`fakeVScrollComp`),t=this.gos.get(`debounceVerticalScrollbar`),n=t?hr(this,this.onVScroll.bind(this,Xl),$l):this.onVScroll.bind(this,Xl),r=t?hr(this,this.onVScroll.bind(this,Zl),$l):this.onVScroll.bind(this,Zl);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,r)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Ql,Xl])this.lastScrollSource[1]!==t&&Ln(this.getViewportForSource(t),e,this.enableRtl)}getViewportForSource(e){return e===Xl?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let{scrollLeft:t}=this.centerRowsCtrl.eViewport;if(this.shouldBlockScrollUpdate(1,t,!0))return;let n=In(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===Xl?this.eBodyViewport.scrollTop:this.ctrlsSvc.get(`fakeVScrollComp`).getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;let{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===Xl?this.ctrlsSvc.get(`fakeVScrollComp`).setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){let t=this.ctrlsSvc.get(`fakeHScrollComp`).getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){let t={type:`bodyScroll`,direction:e===1?`horizontal`:`vertical`,left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:`bodyScrollEnd`})},eu)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!vn()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=jn(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){let e=this.scrollLeft,t=!1;for(let n of Ql)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(Xl)}scrollGridIfNeeded(e=!1){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){let n=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:n:Math.min(Math.max(e,0),n)),Ln(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){let{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;let{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&=(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){let t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let{rowModel:n}=this.beans,r=n.getRowCount(),i=-1;for(let t=0;t<r;t++){let r=n.getRow(t);if(typeof e==`function`){if(r&&e(r)){i=t;break}}else if(e===r||e===r.data){i=t;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t,n=0){if(B(this.gos,`print`))return;let{rowModel:r}=this.beans,i=r.getRowCount();if(typeof e!=`number`||e<0||e>=i){L(88,{index:e});return}this.clearRetryListeners();let{frameworkOverrides:a,pageBounds:o,rowContainerHeight:s,rowRenderer:c}=this.beans;a.wrapIncoming(()=>{let i=this.ctrlsSvc.getGridBodyCtrl(),a=r.getRow(e),l,u,d=0;this.invalidateVerticalScroll();do{let{stickyTopHeight:e,stickyBottomHeight:n}=i,r=a.rowTop,f=a.rowHeight,p=o.getPixelOffset(),m=a.rowTop-p,h=m+a.rowHeight,g=this.getVScrollPosition(),_=s.divStretchOffset,v=g.top+_,y=g.bottom+_,b=y-v,x=s.getScrollPositionForPixel(m),S=s.getScrollPositionForPixel(h-b),C=Math.min((x+S)/2,m),w=v+e>m,T=y-n<h,E=null;t===`top`?E=x-e:t===`bottom`?E=S+n:t===`middle`?E=C:w?E=x-e:T&&(E=S-x>b?x-e:S+n),E!==null&&(this.setVerticalScrollPosition(E),c.redraw({afterScroll:!0})),l=r!==a.rowTop||f!==a.rowHeight,u=e!==i.stickyTopHeight||n!==i.stickyBottomHeight,d++}while((l||u)&&d<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(a?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){let i=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{i!==this.getVScrollPosition().top&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=r.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(e=>e()),this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t=`auto`){let{colModel:n,frameworkOverrides:r}=this.beans,i=n.getCol(e);if(!i||i.isPinned()||!this.visibleCols.isColDisplayed(i))return;let a=this.getPositionedHorizontalScroll(i,t);r.wrapIncoming(()=>{a!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(a),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:r}=this.isColumnOutsideViewport(e),i=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),a=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,s=(o?n:r)||i,c=o?r:n;t!==`auto`&&(s=t===`start`,c=t===`end`);let l=t===`middle`;if(s||c||l){let{colLeft:t,colMiddle:n,colRight:r}=this.getColumnBounds(e);return l?n-a/2:s?o?r:t:o?t-a:r-a}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:r,colRight:i}=this.getColumnBounds(e),a=this.enableRtl;return{columnBeforeStart:a?t>i:n<i,columnAfterEnd:a?n<r:t>r}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleCols.bodyWidth,r=e.getActualWidth(),i=e.getLeft(),a=t?-1:1,o=t?n-i:i,s=o+r*a;return{colLeft:o,colMiddle:o+r/2*a,colRight:s}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},nu=class extends W{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener(`domLayout`,e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=B(this.gos,`print`),{visibleCols:t,scrollVisibleSvc:n}=this.beans,r=t.bodyWidth,i=t.getColsLeftWidth(),a=t.getDisplayedColumnsRightWidth(),o;e?o=r+i+a:(o=r,this.addSpacer&&(this.gos.get(`enableRtl`)?i:a)===0&&n.verticalScrollShowing&&(o+=n.getScrollbarWidth())),this.callback(o)}},ru=class extends W{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners([`alwaysShowHorizontalScroll`,`alwaysShowVerticalScroll`],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,r=()=>{rr(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(r),n.registerBodyViewportResizeListener(r)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.eBodyViewport,t=jn(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:`bodyHeightChanged`}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function iu(e,t,n,r,i,a){if(n==null&&t==null)return;let o={},s={},c=(e,t)=>{e.split(` `).forEach(e=>{e.trim()!=``&&t(e)})};if(n){let t=Object.keys(n);for(let i=0;i<t.length;i++){let a=t[i],l=n[a],u;typeof l==`string`?u=e?e.evaluate(l,r):!0:typeof l==`function`&&(u=l(r)),c(a,e=>{u?o[e]=!0:s[e]=!0})}}t&&a&&Object.keys(t).forEach(e=>c(e,e=>{o[e]||(s[e]=!0)})),a&&Object.keys(s).forEach(a),Object.keys(o).forEach(i)}function au(e){if(e.group)return e.level;let t=e.parent;return t?t.level+1:0}var ou=0,su=`renderedRow`,cu=class extends W{constructor(e,t,n,r,i){super(),this.rowNode=e,this.useAnimationFrameForCreate=r,this.printLayout=i,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get(`suppressRowTransform`),this.instanceId=e.id+`-`+ ou++,this.rowId=Zi(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=au(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get(`getBusinessKeyForNode`),this.updateRowBusinessKey()}updateRowBusinessKey(){typeof this.businessKeyForNodeFunc==`function`&&(this.businessKey=Zi(this.businessKeyForNodeFunc(this.rowNode)))}updateGui(e,t){e===`left`?this.leftGui=t:e===`right`?this.rightGui=t:e===`fullWidth`?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,r){let{context:i,focusSvc:a}=this.beans;r=ro(this,i,r);let o={rowComp:e,element:t,containerType:n,compBean:r};this.allRowGuis.push(o),this.updateGui(n,o),this.initialiseRowComp(o);let s=this.rowNode,c=this.rowType===`FullWidthLoading`||s.stub,l=!s.data&&this.beans.rowModel.getType()===`infinite`;!c&&!l&&!s.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();let u=this.fullWidthGui?.element;u&&!this.beans.editSvc?.isEditing(this)&&a.isRowFocused(s.rowIndex,s.rowPinned)&&a.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType===`FullWidthDetail`&&this.gos.get(`keepDetailRows`)}setCached(e){let t=e?`none`:``;this.allRowGuis.forEach(e=>e.element.style.display=t)}initialiseRowComp(e){let t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get(`suppressCellFocus`)),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),Br(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(e=>n.toggleCss(e,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Gt(e.element,this.rowNode.expanded==1),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Jr(t,e.element,su,this),e.compBean.addDestroyFunc(()=>Jr(t,e.element,su,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,`p2`,!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get(`rowDragEntireRow`)&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss(`ag-after-created`,!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){let t=Zi(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){let{containerType:t}=e;this.slideInAnimation[t]&&(mr(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(mr(()=>{e.rowComp.toggleCss(`ag-opacity-zero`,!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){let t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;let n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){let t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get(`embedFullWidthRows`)?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback(`processRowPostCreate`);!e||!this.areAllContainersReady()||e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){let{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:r}}=this,i=!!e||!r.isPinningLeft(),a=!!t,o=!!n||!r.isPinningRight();return i&&a&&o}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let e=this.beans.gos.getCallback(`isFullWidthRow`);return e?e({rowNode:this.rowNode}):!1}setRowType(){let e=this.rowNode.stub&&!this.gos.get(`suppressServerSideFullWidthLoadingRow`)&&!this.gos.get(`groupHideOpenParents`),t=this.isNodeFullWidthCell(),n=this.gos.get(`masterDetail`)&&this.rowNode.detail,r=this.beans.colModel.isPivotMode(),i=ci(this.gos,this.rowNode,r);e?this.rowType=`FullWidthLoading`:n?this.rowType=`FullWidthDetail`:t?this.rowType=`FullWidth`:i?this.rowType=`FullWidthGroup`:this.rowType=`Normal`}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;let{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||=(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,`p1`,!1),!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new Vc(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){let r={list:[],map:{}},i=(e,t,n)=>{n==null?r.list.push(t):r.list.splice(n,0,t),r.map[e]=t},a=[];for(let n of t){let t=n.getInstanceId(),r=e.map[t];r&&!this.isCorrectCtrlForSpan(r)&&(r.destroy(),r=void 0),r||=this.getNewCellCtrl(n),r&&i(t,r)}for(let t of e.list){let e=t.column.getInstanceId();r.map[e]??(this.isCellEligibleToBeRemoved(t,n)?t.destroy():a.push([e,t]))}if(a.length)for(let[e,t]of a){let n=r.list.findIndex(e=>e.column.getLeft()>t.column.getLeft());i(e,t,n===-1?void 0:Math.max(n-1,0))}let{focusSvc:o,visibleCols:s}=this.beans,c=o.getFocusedCell();if(c&&c.column.getPinned()==n){let e=c.column.getInstanceId();if(!r.map[e]&&s.allCols.includes(c.column)){let t=this.createFocusedCellCtrl();if(t){let n=r.list.findIndex(e=>e.column.getLeft()>t.column.getLeft());i(e,t,n===-1?void 0:Math.max(n-1,0))}}}return r}createFocusedCellCtrl(){let{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;let r=t?.getCellSpan(n.column,this.rowNode);if(r){if(r.firstNode!==this.rowNode||!r.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{let n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)})}getCellCtrlsForContainer(e){switch(e){case`left`:return this.leftCellCtrls.list;case`right`:return this.rightCellCtrls.list;case`fullWidth`:return[];case`center`:return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let r=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,`left`);let i=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,`right`)}}isCellEligibleToBeRemoved(e,t){let{column:n}=e;if(n.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;let{visibleCols:r,editSvc:i}=this.beans,a=i?.isEditing(e),o=e.isCellFocused();return a||o?!(r.allCols.indexOf(n)>=0):!0}getDomOrder(){return this.gos.get(`ensureDomOrder`)||B(this.gos,`print`)}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners([`domLayout`,`ensureDomOrder`],()=>{e.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;let t=j(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,r=n.isPinningLeft(),i=n.isPinningRight();if(t){let{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get(`embedFullWidthRows`)){e.fullWidth=!0;return}e.center=!0,e.left=r,e.right=i}else{let{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get(`embedFullWidthRows`)){e.fullWidth=!0;return}e.center=!0,e.left=r,e.right=i}}isFullWidth(){return this.rowType!==`Normal`}refreshFullWidth(){let e=(e,t)=>e?e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),r=e(this.leftGui,`left`),i=e(this.rightGui,`right`);return t&&n&&r&&i}addListeners(){let{beans:e,gos:t,rowNode:n}=this,{expansionSvc:r,eventSvc:i,context:a,rowSpanSvc:o}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...r?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(i,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),o&&this.addManagedListeners(o,{spannedCellsUpdated:({pinned:e})=>{e&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,a),this.tooltipFeature=this.destroyBean(this.tooltipFeature,a),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,a)}),this.addManagedPropertyListeners([`rowStyle`,`getRowStyle`,`rowClass`,`getRowClass`,`rowClassRules`],this.postProcessCss.bind(this)),this.addManagedPropertyListener(`rowDragEntireRow`,()=>{if(t.get(`rowDragEntireRow`)){this.allRowGuis.forEach(e=>{this.addRowDraggerToRow(e)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,a)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged()),cellChanged:e=>this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowPinned(){for(let e of this.allRowGuis)e.rowComp.toggleCss(`ag-row-pinned-source`,!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(t=>t.refreshCell(e)),this.allRowGuis.forEach(e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:`none`,n=t===`above`,r=t===`inside`,i=t===`below`,a=this.gos.get(`treeData`)&&(i||n),o=this.rowNode.uiLevel.toString();this.allRowGuis.forEach(e=>{let t=e.rowComp;t.toggleCss(`ag-row-highlight-above`,n),t.toggleCss(`ag-row-highlight-inside`,r),t.toggleCss(`ag-row-highlight-below`,i),t.toggleCss(`ag-row-highlight-indent`,a),a?e.element.style.setProperty(`--ag-row-highlight-level`,o):e.element.style.removeProperty(`--ag-row-highlight-level`)})}postProcessRowDragging(){let e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.toggleCss(`ag-row-dragging`,e))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:bt(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let t=this.findFullWidthInfoForEvent(e);if(!t)return;let{rowGui:n,column:r}=t;if(n.element!==e.target)return;let i=this.rowNode,{focusSvc:a,navigation:o}=this.beans,s=a.getFocusedCell(),c={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:s?.column??r};o?.navigateToNextCell(e,e.key,c,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||zi(e))return;let t=this.allRowGuis.find(t=>t.element.contains(e.target)),n=t?t.element:null,r=n===e.target,i=H(this.beans),a=!1;n&&i&&(a=n.contains(i)&&i.classList.contains(`ag-cell`));let o=null;!r&&!a&&(o=vc(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&r||!o)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(e=>Vn(e.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){let t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(e=>{tr(e.element,`tabindex`,t)})}onFullWidthRowFocused(e){let t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1,r;if(this.fullWidthGui)r=this.fullWidthGui.element;else{let t=this.beans.colModel.getCol(e?.column)?.pinned;r=t?t===`right`?this.rightGui?.element:this.leftGui?.element:this.centerGui?.element}r&&(r.classList.toggle(`ag-full-width-focus`,n),n&&e?.forceBrowserFocus&&r.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){let n={list:[],map:{}};return e.list.forEach(e=>{e!==t&&(n.list.push(e),n.map[e.column.getInstanceId()]=e)}),n}onMouseEvent(e,t){switch(e){case`dblclick`:this.onRowDblClick(t);break;case`click`:this.onRowClick(t);break;case`touchstart`:case`mousedown`:this.onRowMouseDown(t);break}}createRowEvent(e,t){let{rowNode:n}=this;return U(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){let n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){zi(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource(`rowDoubleClicked`,e))}findFullWidthInfoForEvent(e){if(!e)return;let t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){let{visibleCols:t}=this.beans;switch(e?.containerType){case`center`:return t.centerCols[0];case`left`:return t.leftCols[0];case`right`:return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=kn(e.target,`ag-row-drag`,3),!this.isFullWidth())return;let t=this.rowNode,{rangeSvc:n,focusSvc:r}=this.beans;n?.removeAllCellRanges();let i=this.findFullWidthInfoForEvent(e);if(!i)return;let{rowGui:a,column:o}=i,s=a.element,c=e.target,l=e.defaultPrevented||hn();s&&s.contains(c)&&En(c)&&(l=!1),r.setFocusedCell({rowIndex:t.rowIndex,column:o,rowPinned:t.rowPinned,forceBrowserFocus:l})}onRowClick(e){if(zi(e)||this.lastMouseDownOnDragger)return;let{eventSvc:t,selectionSvc:n}=this.beans;t.dispatchEvent(this.createRowEventWithSource(`rowClicked`,e)),n?.handleSelectionEvent(e,this.rowNode,`rowClicked`)}setupDetailRowAutoHeight(e){this.rowType===`FullWidthDetail`&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){let{gos:n,rowNode:r}=this,i=U(n,{fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,n,r)=>this.addFullWidthRowDragging(e,t,n,r),setTooltip:(e,t)=>{n.assertModuleRegistered(`Tooltip`,3),this.setupFullWidthRowTooltip(e,t)}}),a=this.beans.userCompFactory;switch(this.rowType){case`FullWidthDetail`:return Lo(a,i);case`FullWidthGroup`:{let{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return i.value=e,i.valueFormatted=t,Io(a,i)}case`FullWidthLoading`:return Fo(a,i);default:return Po(a,i)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n=``,r){let{rowDragSvc:i,context:a}=this.beans;if(!i||!this.isFullWidth())return;let o=i.createRowDragComp(()=>n,this.rowNode,void 0,e,t,r);this.createBean(o,a),this.addDestroyFunc(()=>{this.destroyBean(o,a)})}onUiLevelChanged(){let e=au(this.rowNode);if(this.rowLevel!=e){let t=`ag-row-level-`+e,n=`ag-row-level-`+this.rowLevel;this.allRowGuis.forEach(e=>{e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(n,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(t=>t.rowComp.toggleCss(`ag-row-first`,e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(e=>e.rowComp.toggleCss(`ag-row-last`,t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.toggleCss(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e===`left`||e===`right`?e:null}getInitialRowClasses(e){let t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:r,beans:i}=this,a=[];a.push(`ag-row`),a.push(this.rowFocused?`ag-row-focus`:`ag-row-no-focus`),this.fadeInAnimation[e]&&a.push(`ag-opacity-zero`),a.push(r.rowIndex%2==0?`ag-row-even`:`ag-row-odd`),r.isRowPinned()&&(a.push(`ag-row-pinned`),i.pinnedRowModel?.isManual()&&a.push(`ag-row-pinned-manual`)),!r.isRowPinned()&&r.pinnedSibling&&a.push(`ag-row-pinned-source`),r.isSelected()&&a.push(`ag-row-selected`),r.footer&&a.push(`ag-row-footer`),a.push(`ag-row-level-`+this.rowLevel),r.stub&&a.push(`ag-row-loading`),n&&a.push(`ag-full-width-row`),i.expansionSvc?.addExpandedCss(a,r),r.dragging&&a.push(`ag-row-dragging`);let{rowStyleSvc:o}=i;return o&&(o.processClassesFromGridOptions(a,r),o.preProcessRowClassRules(a,r)),a.push(this.printLayout?`ag-row-position-relative`:`ag-row-position-absolute`),this.isFirstRowOnPage()&&a.push(`ag-row-first`),this.isLastRowOnPage()&&a.push(`ag-row-last`),n&&(t===`left`&&a.push(`ag-cell-last-left-pinned`),t===`right`&&a.push(`ag-cell-first-right-pinned`)),a}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,e=>{(e===this.centerGui||e===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;let{element:t,compBean:n}=e,{rowNode:r,beans:i,gos:a}=this;n.addManagedListeners(t,{pointerenter:e=>{e.pointerType===`mouse`&&r.dispatchRowEvent(`mouseEnter`)},pointerleave:e=>{e.pointerType===`mouse`&&r.dispatchRowEvent(`mouseLeave`)}}),n.addManagedListeners(r,{mouseEnter:()=>{!i.dragSvc?.dragging&&!a.get(`suppressRowHoverHighlight`)&&(t.classList.add(`ag-row-hover`),r.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){let t=e?[e]:this.allRowGuis.map(e=>e.element);for(let e of t)e.classList.remove(`ag-row-hover`);this.rowNode.setHovered(!1)}roundRowTopToBounds(e){let t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,r=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),r)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=Vr(this.gos)?Ur(this.beans,this.rowNode).height:void 0,i=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(e,e=>{e.element.style.height=`${t}px`,i&&e.element.style.setProperty(`--ag-line-height`,i)})}destroyFirstPass(e=!1){this.active=!1;let{rowNode:t}=this;if(!e&&ni(this.gos)&&!t.sticky)if(t.rowTop!=null){let e=this.roundRowTopToBounds(t.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach(e=>e.rowComp.toggleCss(`ag-opacity-zero`,!0));this.fullWidthGui?.element.contains(H(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);let n=this.createRowEvent(`virtualRowRemoved`);this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;let e=e=>(e.list.forEach(e=>e.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.toggleCss(`ag-row-focus`,this.rowFocused),e.rowComp.toggleCss(`ag-row-no-focus`,!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){let e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?e:e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&j(e)){let t=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return``;let t=this.rowNode,n;if(t.sticky)n=t.stickyRowTop;else{let r=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,i=this.applyPaginationOffset(r);n=t.isRowPinned()?i:this.beans.rowContainerHeight.getRealPixelPosition(i)}return n+`px`}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let n=null;return this.getAllCellCtrls().forEach(t=>{t.column==e&&(n=t)}),n!=null||t||this.getAllCellCtrls().forEach(t=>{t?.getColSpanningList().indexOf(e)>=0&&(n=t)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){let t=this.rowNode.getRowIndexString();if(t===null)return;let n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),r=this.rowNode.rowIndex%2==0,i=n+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(t),e.rowComp.toggleCss(`ag-row-even`,r),e.rowComp.toggleCss(`ag-row-odd`,!r),Xt(e.element,i)})}};function lu(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function uu(e,t,n,r,i){let a=r?r.getColDef().suppressKeyboardEvent:void 0;if(!a)return!1;let o=U(e,{event:t,editing:i,column:r,node:n,data:n.data,colDef:r.getColDef()});return!!(a&&a(o))}function du(e){let{pinnedRowModel:t,rowModel:n}=e,[r,i]=[t?.isEmpty(`top`)??!0,t?.isEmpty(`bottom`)??!0],a=r?null:`top`,o,s;i?(o=null,s=n.getRowCount()-1):(o=`bottom`,s=t?.getPinnedBottomRowCount()??-1);let{visibleCols:c,rangeSvc:l}=e,u=c.allCols;!l||!u?.length||l.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:s,rowEndPinned:o})}var fu=65,pu=67,mu=86,hu=68,gu=90,_u=89;function vu(e){let{keyCode:t}=e,n;switch(t){case fu:n=X.A;break;case pu:n=X.C;break;case mu:n=X.V;break;case hu:n=X.D;break;case gu:n=X.Z;break;case _u:n=X.Y;break;default:n=e.code}return n}var yu=class extends W{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){let e=`keydown`,t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){[`dblclick`,`contextmenu`,`mouseover`,`mouseout`,`click`,Bi(`touchstart`)?`touchstart`:`mousedown`].forEach(e=>{let t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})})}processMouseEvent(e,t){if(!Wc(this.gos,t)||zi(t))return;let{cellCtrl:n,rowCtrl:r}=this.getControlsForEventTarget(t.target);e===`contextmenu`?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,r,n)):(n&&n.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}getControlsForEventTarget(e){let{gos:t}=this;return{cellCtrl:zc(t,e),rowCtrl:Vi(t,e,su)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:r}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):r?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,e,t))}processCellKeyboardEvent(e,t,n){let r=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;uu(this.gos,n,e.rowNode,e.column,r)||t===`keydown`&&(!r&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,r),lu(n)&&e.processCharacter(n)),t===`keydown`&&this.eventSvc.dispatchEvent(e.createEvent(n,`cellKeyDown`))}processFullWidthRowKeyboardEvent(e,t,n){let{rowNode:r}=e,{focusSvc:i,navigation:a}=this.beans,o=i.getFocusedCell()?.column;if(!uu(this.gos,n,r,o,!1)){let r=n.key;if(t===`keydown`)switch(r){case X.PAGE_HOME:case X.PAGE_END:case X.PAGE_UP:case X.PAGE_DOWN:a?.handlePageScrollingKey(n,!0);break;case X.LEFT:case X.RIGHT:if(!this.gos.get(`embedFullWidthRows`))break;case X.UP:case X.DOWN:e.onKeyboardNavigate(n);break;case X.TAB:e.onTabKeyDown(n);break;default:}}t===`keydown`&&this.eventSvc.dispatchEvent(e.createRowEvent(`cellKeyDown`,n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Wc(this.gos,e))return;let n=vu(e),{clipboardSvc:r,undoRedo:i}=this.beans;if(n===X.A)return this.onCtrlAndA(e);if(n===X.C)return this.onCtrlAndC(r,e);if(n===X.D)return this.onCtrlAndD(r,e);if(n===X.V)return this.onCtrlAndV(r,e);if(n===X.X)return this.onCtrlAndX(r,e);if(n===X.Y)return this.onCtrlAndY(i);if(n===X.Z)return this.onCtrlAndZ(i,e)}onCtrlAndA(e){let{beans:{rowModel:t,rangeSvc:n,selectionSvc:r},gos:i}=this;n&&hi(i)&&t.isRowsToRender()?du(this.beans):r&&r?.selectAllRowNodes({source:`keyboardSelectAll`,selectAll:wi(i)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get(`enableCellTextSelection`))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get(`enableCellTextSelection`)||this.gos.get(`suppressCutToClipboard`))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,`ui`))}onCtrlAndV(e,t){let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get(`suppressClipboardPaste`)&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get(`suppressClipboardPaste`)&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get(`undoRedoCellEditing`)||!e||(t.preventDefault(),t.shiftKey?e.redo(`ui`):e.undo(`ui`))}onCtrlAndY(e){e?.redo(`ui`)}},bu=class extends W{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){let t=e.uiContainerHeight,n=t==null?``:`${t}px`;this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},xu=e=>e.topRowCtrls,Su=e=>e.getStickyTopRowCtrls(),Cu=e=>e.getStickyBottomRowCtrls(),wu=e=>e.bottomRowCtrls,Tu=e=>e.allRowCtrls,Eu=e=>e.getCtrls(`top`),Du=e=>e.getCtrls(`center`),Ou=e=>e.getCtrls(`bottom`),ku={center:{type:`center`,name:`center-cols`,getRowCtrls:Tu,getSpannedRowCtrls:Du},left:{type:`left`,name:`pinned-left-cols`,pinnedType:`left`,getRowCtrls:Tu,getSpannedRowCtrls:Du},right:{type:`right`,name:`pinned-right-cols`,pinnedType:`right`,getRowCtrls:Tu,getSpannedRowCtrls:Du},fullWidth:{type:`fullWidth`,name:`full-width`,fullWidth:!0,getRowCtrls:Tu},topCenter:{type:`center`,name:`floating-top`,getRowCtrls:xu,getSpannedRowCtrls:Eu},topLeft:{type:`left`,name:`pinned-left-floating`,container:`ag-pinned-left-floating-top`,pinnedType:`left`,getRowCtrls:xu,getSpannedRowCtrls:Eu},topRight:{type:`right`,name:`pinned-right-floating`,container:`ag-pinned-right-floating-top`,pinnedType:`right`,getRowCtrls:xu,getSpannedRowCtrls:Eu},topFullWidth:{type:`fullWidth`,name:`floating-top-full-width`,fullWidth:!0,getRowCtrls:xu},stickyTopCenter:{type:`center`,name:`sticky-top`,getRowCtrls:Su},stickyTopLeft:{type:`left`,name:`pinned-left-sticky-top`,container:`ag-pinned-left-sticky-top`,pinnedType:`left`,getRowCtrls:Su},stickyTopRight:{type:`right`,name:`pinned-right-sticky-top`,container:`ag-pinned-right-sticky-top`,pinnedType:`right`,getRowCtrls:Su},stickyTopFullWidth:{type:`fullWidth`,name:`sticky-top-full-width`,fullWidth:!0,getRowCtrls:Su},stickyBottomCenter:{type:`center`,name:`sticky-bottom`,getRowCtrls:Cu},stickyBottomLeft:{type:`left`,name:`pinned-left-sticky-bottom`,container:`ag-pinned-left-sticky-bottom`,pinnedType:`left`,getRowCtrls:Cu},stickyBottomRight:{type:`right`,name:`pinned-right-sticky-bottom`,container:`ag-pinned-right-sticky-bottom`,pinnedType:`right`,getRowCtrls:Cu},stickyBottomFullWidth:{type:`fullWidth`,name:`sticky-bottom-full-width`,fullWidth:!0,getRowCtrls:Cu},bottomCenter:{type:`center`,name:`floating-bottom`,getRowCtrls:wu,getSpannedRowCtrls:Ou},bottomLeft:{type:`left`,name:`pinned-left-floating-bottom`,container:`ag-pinned-left-floating-bottom`,pinnedType:`left`,getRowCtrls:wu,getSpannedRowCtrls:Ou},bottomRight:{type:`right`,name:`pinned-right-floating-bottom`,container:`ag-pinned-right-floating-bottom`,pinnedType:`right`,getRowCtrls:wu,getSpannedRowCtrls:Ou},bottomFullWidth:{type:`fullWidth`,name:`floating-bottom-full-width`,fullWidth:!0,getRowCtrls:wu}};function Au(e){return`ag-${Nu(e).name}-viewport`}function ju(e){let t=Nu(e);return t.container??`ag-${t.name}-container`}function Mu(e){return`ag-${Nu(e).name}-spanned-cells-container`}function Nu(e){return ku[e]}var Pu=[`topCenter`,`topLeft`,`topRight`],Fu=[`bottomCenter`,`bottomLeft`,`bottomRight`],Iu=[`center`,`left`,`right`],Lu=[`center`,`left`,`right`,`fullWidth`],Ru=[`stickyTopCenter`,`stickyBottomCenter`,`center`,`topCenter`,`bottomCenter`],zu=[`left`,`bottomLeft`,`topLeft`,`stickyTopLeft`,`stickyBottomLeft`],Bu=[`right`,`bottomRight`,`topRight`,`stickyTopRight`,`stickyBottomRight`],Vu=[`stickyTopCenter`,`stickyTopLeft`,`stickyTopRight`],Hu=[`stickyBottomCenter`,`stickyBottomLeft`,`stickyBottomRight`],Uu=[...Vu,`stickyTopFullWidth`,...Hu,`stickyBottomFullWidth`],Wu=[...Pu,...Fu,...Iu,...Vu,...Hu],Gu=class extends W{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Nu(e)}postConstruct(){this.enableRtl=this.gos.get(`enableRtl`),this.forContainers([`center`],()=>{this.viewportSizeFeature=this.createManagedBean(new ru(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,r){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=r,this.createManagedBean(new yu(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:i,rangeSvc:a}=this.beans,o=()=>this.onPinnedWidthChanged();this.forContainers(zu,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:o})}),this.forContainers(Bu,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:o})}),this.forContainers(Lu,()=>this.createManagedBean(new bu(this.eContainer,this.name===`center`?r:void 0))),a&&this.forContainers(Wu,()=>this.createManagedBean(a.createDragListenerFeature(this.eContainer))),this.forContainers(Ru,()=>this.createManagedBean(new nu(e=>this.comp.setContainerWidth(`${e}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){let{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get(`enableCellSpan`)&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{let t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(Uu.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let e=()=>{let e=this.gos.get(`ensureDomOrder`),t=B(this.gos,`print`);this.comp.setDomOrder(e||t)};this.addManagedPropertyListener(`domLayout`,e),e()}onDisplayedColumnsChanged(){this.forContainers([`center`],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:e}=this.beans;if(!e)return;let t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener(`touchmove`,t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener(`touchmove`,t))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Mn(this.eViewport)}getCenterViewportScrollLeft(){return In(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=nr(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Bn(this.eViewport)}getViewportScrollLeft(){return In(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get(`alwaysShowHorizontalScroll`)||Jn(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Ln(this.eViewport,e,this.enableRtl)}isContainerVisible(){return this.options.pinnedType==null||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=B(this.gos,`print`),r=this.gos.get(`embedFullWidthRows`)||n,i=t.filter(e=>{let t=e.isFullWidth();return this.options.fullWidth?!r&&t:r||!t});this.comp.setRowCtrls({rowCtrls:i,useFlushSync:e})}},Ku=`ag-force-vertical-scroll`,qu=`ag-selectable`,Ju=`ag-column-moving`,Yu=class extends W{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,r,i,a,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=r,this.eBottom=i,this.eStickyTop=a,this.eStickyBottom=o,this.eCenterColsViewport=n.querySelector(`.${Au(`center`)}`),this.eFullWidthContainer=n.querySelector(`.${ju(`fullWidth`)}`),this.eStickyTopFullWidthContainer=a.querySelector(`.${ju(`stickyTopFullWidth`)}`),this.eStickyBottomFullWidthContainer=o.querySelector(`.${ju(`stickyBottomFullWidth`)}`),this.setCellTextSelection(this.gos.get(`enableCellTextSelection`)),this.addManagedPropertyListener(`enableCellTextSelection`,e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new Yl(this.comp)),this.scrollFeature=this.createManagedBean(new tu(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,n,i,a,o]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(r),this.ctrlsSvc.register(`gridBodyCtrl`,this)}addEventListeners(){let e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener(`treeData`,t)}toggleRowResizeStyles(e){let t=e.type===`rowResizeStarted`;this.eBodyViewport.classList.toggle(`ag-prevent-animation`,t)}onGridColumnsChanged(){let e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let n=`calc(100% + ${(t&&e.getScrollbarWidth()||0)+(Cn()?16:0)}px)`;rr(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:e,colModel:t}=this,n=this.gos.get(`treeData`);if(!n){let r=t.isPivotMode();n=(e?e.columns.length:0)>=(r?2:1)}this.comp.setGridRootRole(n?`treegrid`:`grid`)}addFocusListeners(e){e.forEach(e=>{this.addManagedElementListeners(e,{focusin:t=>{let{target:n}=t,r=kn(n,`ag-root`,e);e.classList.toggle(`ag-has-focus`,!r)},focusout:t=>{let{target:n,relatedTarget:r}=t,i=e.contains(r),a=kn(r,`ag-root`,e);kn(n,`ag-root`,e)||(!i||a)&&e.classList.remove(`ag-has-focus`)}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(Ju,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(qu,e)}updateScrollingClasses(){let{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle(`ag-body-vertical-content-no-gap`,!t.verticalScrollGap),e.toggle(`ag-body-horizontal-content-no-gap`,!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,r=n===-1?-1:e+n;this.comp.setRowCount(r)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?`scroll`:`hidden`;this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get(`alwaysShowVerticalScroll`),t=e?Ku:null,n=B(this.gos,`normal`);return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&Yn(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:e,environment:t}=this.beans,n=t.sizesMeasured,r=()=>{let t=n&&ni(this.gos)&&!e.stretching,r=t?`ag-row-animation`:`ag-row-no-animation`;this.comp.setRowAnimationCssOnBodyViewport(r,t)};r(),this.addManagedEventListeners({heightScaleChanged:r}),this.addManagedPropertyListener(`animateRows`,r),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,r())}})}addBodyViewportListener(){let{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:r,eBottom:i,beans:{popupSvc:a,touchSvc:o}}=this,s=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:s}),o?.mockBodyContextMenu(this,s),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,a)});let c=this.onStickyWheel.bind(this);for(let e of[t,n,r,i])this.addManagedElementListeners(e,{wheel:c});let l=this.onHorizontalWheel.bind(this);for(let e of[`left`,`right`,`topLeft`,`topRight`,`bottomLeft`,`bottomRight`])this.addManagedElementListeners(this.ctrlsSvc.get(e).eContainer,{wheel:l});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:n,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(n))&&Wc(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){let{deltaX:t,deltaY:n,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get(`preventDefaultOnContextMenu`)&&(e||n).preventDefault();let{target:r}=e||t;(r===this.eBodyViewport||r===this.ctrlsSvc.get(`center`).eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:`ui`})}onBodyViewportWheel(e,t){this.gos.get(`suppressScrollWhenPopupsAreOpen`)&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){let{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),r=e?.getPinnedBottomTotalHeight(),i=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),a=n?i+n:0,o=r?i+r:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(o),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(o<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth(`100%`),this.comp.setStickyBottomWidth(`100%`);else{let e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}setStickyTopOffsetTop(){let e=this.ctrlsSvc.get(`gridHeaderCtrl`).headerHeight+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,n=0;e>0&&(n+=e),t>0&&(n+=t),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,r=(e?.getPinnedBottomTotalHeight()??0)+(t.horizontalScrollShowing&&t.getScrollbarWidth()||0);n.setStickyBottomBottom(`${r}px`)}},Xu=class extends q{constructor(e,t){super(),this.direction=t,this.eViewport=null,this.eContainer=null,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss(`ag-apple-scrollbar`,_n()||vn())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Cn(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.toggleCss(`ag-scrollbar-active`,!0),n=()=>this.toggleCss(`ag-scrollbar-active`,!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),rr(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&=(window.clearTimeout(this.hideTimeout),0),this.toggleCss(`ag-scrollbar-scrolling`,!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss(`ag-scrollbar-scrolling`,!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){let t=this.eViewport;_r(()=>Vn(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Zu={tag:`div`,cls:`ag-body-horizontal-scroll`,attrs:{"aria-hidden":`true`},children:[{tag:`div`,ref:`eLeftSpacer`,cls:`ag-horizontal-left-spacer`},{tag:`div`,ref:`eViewport`,cls:`ag-body-horizontal-scroll-viewport`,children:[{tag:`div`,ref:`eContainer`,cls:`ag-body-horizontal-scroll-container`}]},{tag:`div`,ref:`eRightSpacer`,cls:`ag-horizontal-right-spacer`}]},Qu={selector:`AG-FAKE-HORIZONTAL-SCROLL`,component:class extends Xu{constructor(){super(Zu,`horizontal`),this.eLeftSpacer=null,this.eRightSpacer=null,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener(`domLayout`,e),this.beans.ctrlsSvc.register(`fakeHScrollComp`,this),this.createManagedBean(new nu(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners([`suppressHorizontalScroll`],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get(`enableRtl`),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleSvc.verticalScrollShowing,t=this.visibleCols.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,r=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=r),Zn(this.eRightSpacer,t),this.eRightSpacer.classList.toggle(`ag-scroller-corner`,t<=r);let i=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(i+=r),Zn(this.eLeftSpacer,i),this.eLeftSpacer.classList.toggle(`ag-scroller-corner`,i<=r)}setScrollVisible(){let e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get(`suppressHorizontalScroll`),r=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,i=n?0:r===0&&t?16:r,a=()=>{this.setScrollVisibleDebounce=0,this.toggleCss(`ag-scrollbar-invisible`,t),Qn(this.getGui(),i),Qn(this.eViewport,i),Qn(this.eContainer,i),i||this.eContainer.style.setProperty(`min-height`,`1px`),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(a,100):a()}getScrollPosition(){return In(this.eViewport,this.enableRtl)}setScrollPosition(e){Vn(this.eViewport)||this.attemptSettingScrollPosition(e),Ln(this.eViewport,e,this.enableRtl)}}},$u={tag:`div`,cls:`ag-body-vertical-scroll`,attrs:{"aria-hidden":`true`},children:[{tag:`div`,ref:`eViewport`,cls:`ag-body-vertical-scroll-viewport`,children:[{tag:`div`,ref:`eContainer`,cls:`ag-body-vertical-scroll-container`}]}]},ed={selector:`AG-FAKE-VERTICAL-SCROLL`,component:class extends Xu{constructor(){super($u,`vertical`)}postConstruct(){super.postConstruct(),this.createManagedBean(new bu(this.eContainer));let{ctrlsSvc:e}=this.beans;e.register(`fakeVScrollComp`,this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){let{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,r=t&&e.getScrollbarWidth()||0,i=r===0&&n?16:r;this.toggleCss(`ag-scrollbar-invisible`,n),Zn(this.getGui(),i),Zn(this.eViewport,i),Zn(this.eContainer,i),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){let t=e.getGridBodyCtrl().eBodyViewport,n=this.getScrollPosition(),r=t.scrollTop;n!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Vn(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}}};function td(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function nd(e){let t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(let r of n){if(!r)continue;let n=r.getGroupRowCount()||0;for(let i=0;i<n;i++){let n=r.getGroupRowCtrlAtIndex(i),a=t[i];if(n){let r=rd(e,n);(a==null||r>a)&&(t[i]=r)}}}return t}function rd(e,t){let n=e.colModel.isPivotMode()?ld(e):sd(e),r=t.getHeaderCellCtrls();for(let e of r){let{column:t}=e,r=t.getAutoHeaderHeight();r!=null&&r>n&&t.isAutoHeaderHeight()&&(n=r)}return n}function id(e){let t=e.colModel.isPivotMode()?cd(e):ad(e);return e.colModel.forAllCols(e=>{let n=e.getAutoHeaderHeight();n!=null&&n>t&&e.isAutoHeaderHeight()&&(t=n)}),t}function ad(e){return e.gos.get(`headerHeight`)??e.environment.getDefaultHeaderHeight()}function od(e){return e.gos.get(`floatingFiltersHeight`)??ad(e)}function sd(e){return e.gos.get(`groupHeaderHeight`)??ad(e)}function cd(e){return e.gos.get(`pivotHeaderHeight`)??ad(e)}function ld(e){return e.gos.get(`pivotGroupHeaderHeight`)??sd(e)}var ud=class extends W{setComp(e,t,n){this.comp=e,this.eGui=t;let{beans:r}=this,{headerNavigation:i,touchSvc:a,ctrlsSvc:o}=r;i&&this.createManagedBean(new Wl(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,r),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,r)}),this.onPivotModeChanged(r),this.setupHeaderHeight();let s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),a?.mockHeaderContextMenu(this,s),o.register(`gridHeaderCtrl`,this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners([`headerHeight`,`pivotHeaderHeight`,`groupHeaderHeight`,`pivotGroupHeaderHeight`,`floatingFiltersHeight`],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>rr(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){let{beans:e}=this,t=0,n=nd(e).reduce((e,t)=>e+t,0),r=id(e);if(e.filterManager?.hasFloatingFilters()&&(t+=od(e)),t+=n,t+=r,this.headerHeight===t)return;this.headerHeight=t;let i=`${t+1}px`;this.comp.setHeightAndMinHeight(i),this.eventSvc.dispatchEvent({type:`headerHeightChanged`})}onPivotModeChanged(e){let t=e.colModel.isPivotMode();this.comp.toggleCss(`ag-pivot-on`,t),this.comp.toggleCss(`ag-pivot-off`,!t)}onDisplayedColumnsChanged(e){let t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.toggleCss(`ag-header-allow-overflow`,t)}onTabKeyDown(e){let t=this.gos.get(`enableRtl`),n=e.shiftKey,r=n===t?`RIGHT`:`LEFT`,{beans:i}=this,{headerNavigation:a,focusSvc:o}=i;(a.navigateHorizontally(r,!0,e)||!n&&o.focusOverlay(!1)||Sc(i,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null,{headerNavigation:n}=this.beans;switch(e.key){case X.LEFT:t=`LEFT`;case X.RIGHT:j(t)||(t=`RIGHT`),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case X.UP:t=`UP`;case X.DOWN:j(t)||(t=`DOWN`),n.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){let{relatedTarget:t}=e,{eGui:n,beans:r}=this;!t&&n.contains(H(r))||n.contains(t)||(r.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){let{menuSvc:r,ctrlsSvc:i}=this.beans;if(!e&&!n||!r?.isHeaderContextMenuEnabled())return;let{target:a}=e??t;(a===this.eGui||a===i.getHeaderRowContainerCtrl()?.eViewport)&&r.showHeaderContextMenu(void 0,e,n)}},dd=class extends q{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},fd={tag:`div`,cls:`ag-header-cell`,role:`columnheader`,children:[{tag:`div`,ref:`eResize`,cls:`ag-header-cell-resize`,role:`presentation`},{tag:`div`,ref:`eHeaderCompWrapper`,cls:`ag-header-cell-comp-wrapper`,role:`presentation`}]},pd=class extends dd{constructor(e){super(fd,e),this.eResize=null,this.eHeaderCompWrapper=null,this.headerCompVersion=0}postConstruct(){let e=this.getGui(),t=(t,n)=>{n!=null&&n!=``?e.setAttribute(t,n):e.removeAttribute(t)},n=()=>{let e=this.ctrl.getSelectAllGui();e&&(this.eResize.insertAdjacentElement(`afterend`,e),this.addDestroyFunc(()=>e.remove()))};t(`col-id`,this.ctrl.column.getColId());let r={setWidth:t=>e.style.width=t,toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Kn(e,t),setAriaSort:t=>t?en(e,t):tn(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:n,removeSelectAllGui:()=>this.ctrl.getSelectAllGui()?.remove()};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),n()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(e=>this.afterCompCreated(t,e))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},md={tag:`div`,cls:`ag-header-group-cell`,role:`columnheader`,children:[{tag:`div`,ref:`eHeaderCompWrapper`,cls:`ag-header-cell-comp-wrapper`,role:`presentation`},{tag:`div`,ref:`eResize`,cls:`ag-header-cell-resize`,role:`presentation`}]},hd=class extends dd{constructor(e){super(md,e),this.eResize=null,this.eHeaderCompWrapper=null}postConstruct(){let e=this.getGui(),t=(t,n)=>n==null?e.removeAttribute(t):e.setAttribute(t,n);e.setAttribute(`col-id`,this.ctrl.column.getUniqueId()),this.ctrl.setComp({toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Kn(e,t),setHeaderWrapperHidden:e=>{e?this.eHeaderCompWrapper.style.setProperty(`display`,`none`):this.eHeaderCompWrapper.style.removeProperty(`display`)},setHeaderWrapperMaxHeight:e=>{e==null?this.eHeaderCompWrapper.style.removeProperty(`max-height`):this.eHeaderCompWrapper.style.setProperty(`max-height`,`${e}px`),this.eHeaderCompWrapper.classList.toggle(`ag-header-cell-comp-wrapper-limited-height`,e!=null)},setResizableDisplayed:e=>P(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:e=>t(`aria-expanded`,e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp},e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),r=e.getGui();this.eHeaderCompWrapper.appendChild(r),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}},gd={tag:`div`,cls:`ag-header-cell ag-floating-filter`,role:`gridcell`,children:[{tag:`div`,ref:`eFloatingFilterBody`,role:`presentation`},{tag:`div`,ref:`eButtonWrapper`,cls:`ag-floating-filter-button ag-hidden`,role:`presentation`,children:[{tag:`button`,ref:`eButtonShowMainFilter`,cls:`ag-button ag-floating-filter-button-button`,attrs:{type:`button`,tabindex:`-1`}}]}]},_d=class extends dd{constructor(e){super(gd,e),this.eFloatingFilterBody=null,this.eButtonWrapper=null,this.eButtonShowMainFilter=null}postConstruct(){let e=this.getGui();this.ctrl.setComp({toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Kn(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>P(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)},e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&=(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},vd=class extends q{constructor(e){super({tag:`div`,cls:e.headerRowClass,role:`row`}),this.ctrl=e,this.headerComps={}}postConstruct(){Xt(this.getGui(),this.ctrl.getAriaRowIndex()),this.ctrl.setComp({setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e,setRowIndex:e=>Xt(this.getGui(),e)},void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(e=>{let t=e.instanceId,r=n[t];delete n[t],r??(r=this.createHeaderComp(e),this.getGui().appendChild(r.getGui())),this.headerComps[t]=r}),Object.values(n).forEach(e=>{this.getGui().removeChild(e.getGui()),this.destroyBean(e)}),t){let e=Object.values(this.headerComps);e.sort((e,t)=>e.getCtrl().column.getLeft()-t.getCtrl().column.getLeft());let t=e.map(e=>e.getGui());Wn(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.type){case`group`:t=new hd(e);break;case`filter`:t=new _d(e);break;default:t=new pd(e);break}return this.createBean(t),t.setParentComponent(this),t}},yd=class extends W{constructor(e,t,n,r){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=r,this.columnOrGroup=e,this.ariaEl=t.querySelector(`[role=columnheader]`)||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){let{beans:e,colsSpanning:t}=this;return e.gos.get(`enableRtl`)&&t?K(t):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener(`domLayout`,e)}setLeftFirstTime(){let{gos:e,colAnimation:t}=this.beans,n=e.get(`suppressColumnMoveAnimation`),r=j(this.columnOrGroup.getOldLeft());t?.isActive()&&r&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){let{gos:n,visibleCols:r}=this.beans;if(!B(n,`print`)||e.getPinned()===`left`)return t;let i=r.getColsLeftWidth();return e.getPinned()===`right`?i+r.bodyWidth+t:i+t}setLeft(e){if(j(e)&&(this.eCell.style.left=`${e}px`),Z(this.columnOrGroup)){let e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&$t(this.ariaEl,e.length)}}},bd=0,xd=`headerCtrl`,Sd=class extends W{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+`-`+ bd++}postConstruct(){let e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners([`suppressHeaderFocus`],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){let{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,r=n.getDefinition(),i=r&&r.suppressHeaderKeyboardEvent;return j(i)?!!i(U(this.gos,{colDef:r,column:n,headerRowIndex:t,event:e})):!1}getWrapperHasFocus(){return H(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let e=this.column.getDefinition();if(!e)return;let{headerStyle:t}=e,n;n=typeof t==`function`?t(this.getHeaderClassParams()):t,n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:`headerFocused`,column:this.column})}setupAutoHeight(e){let{wrapperElement:t,checkMeasuringCallback:n,compBean:r}=e,{beans:i}=this,a=e=>{if(!this.isAlive()||!r.isAlive())return;let{paddingTop:n,paddingBottom:o,borderBottomWidth:s,borderTopWidth:c}=An(this.eGui),l=n+o+s+c,u=t.offsetHeight+l;if(e<5){let n=V(i);if(!n||!n.contains(t)||u==0){mr(()=>a(e+1),`raf`,i);return}}this.setColHeaderHeight(this.column,u)},o=!1,s,c=()=>{let e=this.column.isAutoHeaderHeight();e&&!o&&l(),!e&&o&&u()},l=()=>{o=!0,a(0),this.comp.toggleCss(`ag-header-cell-auto-height`,!0),s=nr(this.beans,t,()=>a(0))},u=()=>{o=!1,s&&s(),this.comp.toggleCss(`ag-header-cell-auto-height`,!1),s=void 0};c(),r.addDestroyFunc(()=>u()),r.addManagedListeners(this.column,{widthChanged:()=>o&&a(0)}),r.addManagedEventListeners({sortChanged:()=>{o&&window.setTimeout(()=>a(0))}}),n&&n(c)}onDisplayedColumnsChanged(){let{comp:e,column:t,beans:n,eGui:r}=this;!e||!t||!r||(ic(e,t,n.visibleCols),Qt(r,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let e=bc(this.beans);this.eGui&&tr(this.eGui,`tabindex`,e?null:`-1`)}onGuiKeyDown(e){let t=H(this.beans),n=e.key===X.LEFT||e.key===X.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;let r=e.key===X.LEFT===this.gos.get(`enableRtl`)?`right`:`left`;if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){let{gos:t,column:n}=this,r=e.key===X.LEFT!==t.get(`enableRtl`),i=n.getPinned(),a=t.get(`enableRtl`);return i&&a!==(i===`right`)&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&=(window.clearTimeout(this.resizeToggleTimeout),0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case X.PAGE_DOWN:case X.PAGE_UP:case X.PAGE_HOME:case X.PAGE_END:t&&e.preventDefault()}}addDomData(e){let t=xd,{eGui:n,gos:r}=this;Jr(r,n,t,this),e.addDestroyFunc(()=>Jr(r,n,t,null))}focus(e){let{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&=(this.beans.dragAndDrop?.removeDragSource(this.dragSource),null)}handleContextMenuMouseEvent(e,t,n){let r=e??t,{menuSvc:i,gos:a}=this.beans;a.get(`preventDefaultOnContextMenu`)&&r.preventDefault(),i?.isHeaderContextMenuEnabled(n)&&i.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent(`columnHeaderContextMenu`,n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;let{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:`columnHeaderHeightChanged`,column:e,columns:[e],source:`autosizeColumnHeaderHeight`}):n.dispatchEvent({type:`columnGroupHeaderHeightChanged`,columnGroup:e,source:`autosizeColumnGroupHeaderHeight`})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Cd=class extends Sd{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,n,r,i){this.comp=e;let{rowCtrl:a,column:o,beans:s}=this,{colResize:c,context:l,colHover:u,rangeSvc:d}=s,f=ro(this,l,i);this.setGui(t,f),this.updateState(),this.setupWidth(f),this.setupMovingCss(f),this.setupMenuClass(f),this.setupSortableClass(f),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:r,checkMeasuringCallback:e=>this.setRefreshFunction(`measuring`,e),compBean:f}),this.addColumnHoverListener(f),this.setupFilterClass(f),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(f),this.setupSelectAll(f),this.setupUserComp(),this.refreshAria(),c?this.resizeFeature=f.createManagedBean(c.createResizeFeature(a.pinned,o,n,e,this)):P(n,!1),u?.createHoverFeature(f,[o],t),d?.createRangeHighlightFeature(f,o,e),f.createManagedBean(new yd(o,t,s)),f.createManagedBean(new Wl(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(f),f.addManagedPropertyListeners([`suppressMovableColumns`,`suppressMenuHide`,`suppressAggFuncInHeader`,`enableAdvancedFilter`],()=>this.refresh()),f.addManagedListeners(o,{colDefChanged:()=>this.refresh()}),f.addManagedListeners(o,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let p=()=>this.checkDisplayName();f.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),f.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return U(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){let e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return Ao(this.beans.userCompFactory,t,e)}createParams(){let{menuSvc:e,sortSvc:t,colFilter:n,gos:r}=this.beans;return U(r,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||Oi(this.gos)),showColumnMenu:(t,n)=>{e?.showColumnMenu({column:this.column,buttonElement:t,positionBy:`button`,onClosedCallback:n})},showColumnMenuAfterMouseClick:(t,n)=>{e?.showColumnMenu({column:this.column,mouseEvent:t,positionBy:`mouse`,onClosedCallback:n})},showFilter:t=>{e?.showFilterMenu({column:this.column,buttonElement:t,containerType:`columnFilter`,positionBy:`button`})},progressSort:e=>{t?.progressSort(this.column,!!e,`uiColumnSorted`)},setSort:(e,n)=>{t?.setSortForColumn(this.column,e,!!n,`uiColumnSorted`)},eGridHeader:this.eGui,setTooltip:(e,t)=>{r.assertModuleRegistered(`Tooltip`,3),this.setupTooltip(e,t)}})}setupSelectAll(e){let{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener(`rowSelection`,()=>{let n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===X.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===X.ENTER&&this.onEnterKeyDown(e),e.key===X.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,`uiColumnSorted`)}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();wd(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),hc()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction(`headerStyles`,this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let e=()=>{let e=rc(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach(e=>{t.has(e)?t.delete(e):this.comp.toggleCss(e,!0)}),t.forEach(e=>this.comp.toggleCss(e,!1))};this.setRefreshFunction(`headerClasses`,e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){let{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();e&&(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e))}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,`header`,!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!this.gos.get(`suppressMovableColumns`)&&!e.suppressMovable&&!e.lockPosition||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.toggleCss(`ag-header-cell-moving`,this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp?.toggleCss(`ag-column-menu-visible`,this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.toggleCss(`ag-header-cell-sortable`,!!this.sortable)};t(),this.setRefreshFunction(`updateSortable`,t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let e=this.column.isFilterActive();this.comp.toggleCss(`ag-header-cell-filtered`,e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss(`ag-header-cell-wrap-text`,e)};e(),this.setRefreshFunction(`wrapText`,e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss(`ag-header-highlight-before`,t),this.comp.toggleCss(`ag-header-highlight-after`,n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:r}=this,i=nd(this.beans),a=i.reduce((e,t)=>e+=t,0)===0;if(n.toggleCss(`ag-header-parent-hidden`,a),!t.isSpanHeaderHeight()){e.style.removeProperty(`top`),e.style.removeProperty(`height`),n.toggleCss(`ag-header-span-height`,!1),n.toggleCss(`ag-header-span-total`,!1);return}let{numberOfParents:o,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();n.toggleCss(`ag-header-span-height`,o>0);let c=id(r);if(o===0){n.toggleCss(`ag-header-span-total`,!1),e.style.setProperty(`top`,`0px`),e.style.setProperty(`height`,`${c}px`);return}n.toggleCss(`ag-header-span-total`,s);let l=(this.column.getFirstRealParent()?.getLevel()??-1)+1,u=i.length-l,d=0;for(let e=0;e<u;e++)d+=i[i.length-1-e];e.style.setProperty(`top`,`${-d}px`),e.style.setProperty(`height`,`${c+d}px`)}refreshAriaSort(){if(this.sortable){let e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(It(t)),this.setAriaDescriptionProperty(`sort`,e(`ariaSortableColumn`,`Press ENTER to sort`))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty(`sort`,null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty(`menu`,e(`ariaMenuColumn`,`Press ALT DOWN to open column menu`))}else this.setAriaDescriptionProperty(`menu`,null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Oi(this.gos)){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty(`filterButton`,e(`ariaFilterColumn`,`Press CTRL ENTER to open filter`))}else this.setAriaDescriptionProperty(`filterButton`,null)}refreshAriaFiltered(){let e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty(`filter`,e(`ariaColumnFiltered`,`Column Filtered`)):this.setAriaDescriptionProperty(`filter`,null)}setAriaDescriptionProperty(e,t){t==null?this.ariaDescriptionProperties.delete(e):this.ariaDescriptionProperties.set(e,t)}announceAriaDescription(){if(!this.eGui.contains(H(this.beans)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((e,t)=>e===`filter`?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(`. `);this.beans.ariaAnnounce?.announceValue(e,`columnHeader`)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){let t=e=>this.handleMouseOverChange(e.type===`mouseenter`);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent(`columnHeaderClicked`,this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?`columnHeaderMouseOver`:`columnHeaderMouseLeave`,column:this.column})}setActiveHeader(e){this.comp.toggleCss(`ag-header-active`,e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return wd(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function wd(e){return typeof e?.getAnchorElementForMenu==`function`&&typeof e.onMenuKeyboardShortcut==`function`}var Td=0,Ed=class extends W{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=Td++,this.comp=null,this.allCtrls=[];let r=`ag-header-row-column`;n===`group`?r=`ag-header-row-group`:n===`filter`&&(r=`ag-header-row-filter`),this.headerRowClass=`ag-header-row ${r}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=B(this.gos,`print`),this.isEnsureDomOrder=this.gos.get(`ensureDomOrder`)}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=ro(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener(`domLayout`,n),e.addManagedPropertyListener(`ensureDomOrder`,e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners([`headerHeight`,`pivotHeaderHeight`,`groupHeaderHeight`,`pivotGroupHeaderHeight`,`floatingFiltersHeight`],t)}onDisplayedColumnsChanged(){this.isPrintLayout=B(this.gos,`print`),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned==null?e.getContainerWidth(`right`)+e.getContainerWidth(`left`)+e.getContainerWidth(null):0:e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+`px`),this.comp.setHeight(t+`px`)}getTopAndHeight(){let e=0,t=nd(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&this.type===`group`)return{topOffset:e,rowHeight:t[n]};e+=t[n]}let n=id(this.beans);if(this.type===`column`)return{topOffset:e,rowHeight:n};e+=n;let r=od(this.beans);return{topOffset:e,rowHeight:r}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;let t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){let e=this.ctrlsById;this.ctrlsById=new Map;let t=this.getColumnsInViewport();for(let n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);let n=e=>{let{focusSvc:t,visibleCols:n}=this.beans;return t.isHeaderWrapperFocused(e)?n.isVisible(e.column):!1};if(e)for(let[t,r]of e)n(r)?this.ctrlsById.set(t,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;let r=e.getUniqueId(),i;if(n&&(i=n.get(r),n.delete(r)),i&&i.column!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case`filter`:i=this.createBean(this.beans.registry.createDynamicBean(`headerFilterCellCtrl`,!0,e,this));break;case`group`:i=this.createBean(this.beans.registry.createDynamicBean(`headerGroupCellCtrl`,!0,e,this));break;default:i=this.createBean(new Cd(e,this));break}t.set(r,i)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];let e=[];return[`left`,null,`right`].forEach(t=>{e.push(...this.getComponentsToRender(t))}),e}getComponentsToRender(e=this.pinned){return this.type===`group`?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){let n=this.allCtrls.find(t=>t.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},Dd=class extends W{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;let{pinnedCols:n,ctrlsSvc:r,colModel:i,colMoves:a}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(a,this.eViewport);let o=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:o,advancedFilterEnabledChanged:o});let s=`${typeof this.pinned==`string`?this.pinned:`center`}Header`;r.register(s,this),i.ready&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let{focusSvc:t,filterManager:n,visibleCols:r}=this.beans,i=0,a=t.getFocusHeaderToUseAfterRefresh(),o=()=>{let e=r.headerGroupRowCount;i=e;let t=this.groupsRowCtrls.length;if(t!==e){if(t>e){for(let n=e;n<t;n++)this.destroyBean(this.groupsRowCtrls[n]);this.groupsRowCtrls.length=e;return}for(let n=t;n<e;n++){let e=this.createBean(new Ed(n,this.pinned,`group`));this.groupsRowCtrls.push(e)}}},s=()=>{let t=i++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new Ed(t,this.pinned,`column`))):this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t)},c=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;let t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){t();return}e||t();let r=i++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==r&&this.filtersRowCtrl.setRowIndex(r):this.filtersRowCtrl=this.createBean(new Ed(r,this.pinned,`filter`))},l=this.getAllCtrls();o(),s(),c();let u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(t,a),l.length!==u.length&&this.beans.eventSvc.dispatchEvent({type:`headerRowsChanged`})}getHeaderCtrlForColumn(e){let t=t=>t?.getHeaderCellCtrls().find(t=>t.column===e);if(ta(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){let n=t(this.groupsRowCtrls[e]);if(n)return n}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){let r=this.getAllCtrls()[e];return r?r.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){let n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;let{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}setupCenterWidth(){this.pinned??this.createManagedBean(new nu(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Od=class extends W{constructor(){super(...arguments),this.beanName=`menuSvc`}postConstruct(){let{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,`columnMenu`)}showFilterMenu(e){this.showColumnMenuCommon(Ad(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){Ad(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){let{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(Oi(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&ta(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get(`columnMenu`)===`new`}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(vn()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Oi(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!Oi(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos,t=e.get(`suppressMenuHide`);return Oi(e)?e.exists(`suppressMenuHide`)?t:!1:t}showColumnMenuCommon(e,t,n,r){let{positionBy:i,onClosedCallback:a}=t,o=t.column;if(i===`button`){let{buttonElement:i}=t;e?.showMenuAfterButtonClick(o,i,n,a,r)}else if(i===`mouse`){let{mouseEvent:i}=t;e?.showMenuAfterMouseEvent(o,i,n,a,r)}else if(o){let t=this.beans,i=t.ctrlsSvc;i.getScrollFeature().ensureColumnVisible(o,`auto`),rr(t,()=>{let t=i.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);t&&e?.showMenuAfterButtonClick(o,t.getAnchorElementForMenu(r),n,a,r)})}}};function kd(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent(`menuVisibleChanged`,n))}function Ad(e){let{enterpriseMenuFactory:t,filterMenuFactory:n,gos:r}=e;return t&&Oi(r)?t:n}var jd=class extends q{isPopup(){return!0}setParentComponent(e){e.addCss(`ag-has-popup`),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove(`ag-has-popup`),super.destroy()}},Md=class extends jd{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},Nd=class extends q{constructor(){super()}},Pd={tag:`span`,cls:`ag-overlay-loading-center`,attrs:{"aria-live":`polite`,"aria-atomic":`true`}},Fd=class extends Nd{init(){let e=bt(this.gos.get(`overlayLoadingTemplate`)?.trim());if(this.setTemplate(e??Pd),!e){let e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e(`loadingOoo`,`Loading...`)})}}},Id={tag:`span`,cls:`ag-overlay-no-rows-center`},Ld=class extends Nd{init(){let e=bt(this.gos.get(`overlayNoRowsTemplate`)?.trim());if(this.setTemplate(e??Id),!e){let e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e(`noRowsToShow`,`No Rows To Show`)})}}};function Rd(e,t,n){let r=zd(e,t,n);if(r){let{className:e}=r;if(typeof e==`string`&&e.indexOf(`ag-icon`)>-1||typeof e==`object`&&e[`ag-icon`])return r}let i=F({tag:`span`});return i.appendChild(r),i}function zd(e,t,n){let r=null;e===`smallDown`?L(262):e===`smallLeft`?L(263):e===`smallRight`&&L(264);let i=n&&n.getColDef().icons;if(i&&(r=i[e]),t.gos&&!r){let n=t.gos.get(`icons`);n&&(r=n[e])}if(r){let t;if(typeof r==`function`)t=r();else if(typeof r==`string`)t=r;else{L(38,{iconName:e});return}if(typeof t==`string`)return Hn(t);if(er(t))return t;L(133,{iconName:e});return}else{let n=t.registry.getIcon(e);return n||t.validation?.validateIcon(e),F({tag:`span`,cls:`ag-icon ag-icon-${n??e}`,role:`presentation`,attrs:{unselectable:`on`}})}}var Bd=`.ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}`,Vd={tag:`div`,children:[{tag:`div`,ref:`eGhost`,cls:`ag-dnd-ghost ag-unselectable`,children:[{tag:`span`,ref:`eIcon`,cls:`ag-dnd-ghost-icon ag-shake-left-to-right`},{tag:`div`,ref:`eLabel`,cls:`ag-dnd-ghost-label`}]}]},Hd=class extends q{constructor(){super(),this.dragSource=null,this.eIcon=null,this.eLabel=null,this.eGhost=null,this.registerCSS(Bd)}postConstruct(){let e=e=>Rd(e,this.beans,null);this.dropIconMap={pinned:e(`columnMovePin`),hide:e(`columnMoveHide`),move:e(`columnMoveMove`),left:e(`columnMoveLeft`),right:e(`columnMoveRight`),group:e(`columnMoveGroup`),aggregate:e(`columnMoveValue`),pivot:e(`columnMovePivot`),notAllowed:e(`dropNotAllowed`)}}init(e){this.dragSource=e.dragSource,this.setTemplate(Vd),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){let{eIcon:n,dragSource:r,dropIconMap:i,gos:a}=this;Rn(n);let o=null;e||=r?.getDefaultIconName?r.getDefaultIconName():`notAllowed`,o=i[e],n.classList.toggle(`ag-shake-left-to-right`,t),!(o===i.hide&&a.get(`suppressDragLeaveHidesColumns`))&&o&&n.appendChild(o)}setLabel(e){this.eLabel.textContent=e}},Ud=`.ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}`,Wd=class extends q{constructor(e,t,n){super(t,n),this.labelSeparator=``,this.labelAlignment=`left`,this.disabled=!1,this.label=``,this.config=e||{},this.registerCSS(Ud)}postConstruct(){this.addCss(`ag-labeled`),this.eLabel.classList.add(`ag-label`);let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:r,disabled:i}=this.config;i!=null&&this.setDisabled(i),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:e,eLabel:t}=this;Rn(t),typeof e==`string`?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===``?(P(t,!1),Ft(t,`presentation`)):(P(t,!0),Ft(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){let e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let t=this.getGui().classList;return t.toggle(`ag-label-align-left`,e===`left`),t.toggle(`ag-label-align-right`,e===`right`),t.toggle(`ag-label-align-top`,e===`top`),this}setLabelEllipsis(e){return this.eLabel.classList.toggle(`ag-label-ellipsis`,e),this}setLabelWidth(e){return this.label==null||Xn(this.eLabel,e),this}setDisabled(e){e=!!e;let t=this.getGui();return On(t,e),t.classList.toggle(`ag-disabled`,e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Gd=class extends Wd{constructor(e,t,n,r){super(e,t,n),this.className=r}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==``||Lt(e)!==null?zt(e,``):zt(e,t??``)}setAriaLabel(e){return Rt(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Zn(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:`fieldValueChanged`}),this)}};function Kd(e){return{tag:`div`,role:`presentation`,children:[{tag:`div`,ref:`eLabel`,cls:`ag-input-field-label`},{tag:`div`,ref:`eWrapper`,cls:`ag-wrapper ag-input-wrapper`,role:`presentation`,children:[{tag:e,ref:`eInput`,cls:`ag-input-field-input`}]}]}}var qd=class extends Gd{constructor(e,t,n=`text`,r=`input`){super(e,e?.template??Kd(r),[],t),this.inputType=n,this.displayFieldTag=r,this.eLabel=null,this.eWrapper=null,this.eInput=null}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);let{eLabel:e,eWrapper:t,eInput:n,className:r}=this;e.classList.add(`${r}-label`),t.classList.add(`${r}-input-wrapper`),n.classList.add(`${r}-input`),this.addCss(`ag-input-field`),n.id=n.id||`ag-${this.getCompId()}-input`;let{inputName:i,inputWidth:a}=this.config;i!=null&&this.setInputName(i),a!=null&&this.setInputWidth(a),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag===`input`&&(this.inputType=e,tr(this.eInput,`type`,e))}getInputElement(){return this.eInput}setInputWidth(e){return Xn(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute(`name`,e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return tr(this.eInput,`placeholder`,e),this}setInputAriaLabel(e){return Rt(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return On(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)tr(this.eInput,`autocomplete`,null);else{let t=typeof e==`string`?e:`off`;tr(this.eInput,`autocomplete`,t)}return this}},Jd=class extends qd{constructor(e,t=`ag-checkbox`,n=`checkbox`){super(e,t,n),this.labelAlignment=`right`,this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e==`boolean`&&this.setReadOnly(e),typeof t==`boolean`&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle(`ag-disabled`,e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle(`ag-disabled`,e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e==`boolean`?e:void 0;let n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:`fieldValueChanged`,selected:e,previousValue:t,event:n});let r=this.getInputElement();this.eventSvc.dispatchEvent({type:`checkboxChanged`,id:r.id,name:r.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){let t=this.eWrapper.classList;t.toggle(`ag-checked`,e===!0),t.toggle(`ag-indeterminate`,e==null)}},Yd={selector:`AG-CHECKBOX`,component:Jd},Xd=`.ag-checkbox-cell{height:100%}`,Zd={tag:`div`,cls:`ag-cell-wrapper ag-checkbox-cell`,role:`presentation`,children:[{tag:`ag-checkbox`,ref:`eCheckbox`,role:`presentation`}]},Qd=class extends q{constructor(){super(Zd,[Yd]),this.eCheckbox=null,this.registerCSS(Xd)}init(e){this.refresh(e);let{eCheckbox:t,beans:n}=this,r=t.getInputElement();r.setAttribute(`tabindex`,`-1`),Bt(r,`polite`),this.addManagedListeners(r,{click:e=>{if(Ri(e),t.isDisabled())return;let n=t.getValue();this.onCheckboxChanged(n)},dblclick:e=>{Ri(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:r=>{if(r.key===X.SPACE&&!t.isDisabled()){e.eGridCell===H(n)&&t.toggle();let i=t.getValue();this.onCheckboxChanged(i),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0,{value:r,column:i,node:a}=e;if(a.group&&i)if(typeof r==`boolean`)t=r;else{let e=i.getColId();e.startsWith(`ag-Grid-AutoColumn`)?t=r==null||r===``?void 0:r===`true`:a.aggData&&a.aggData[e]!==void 0?t=r??void 0:n=!1}else t=r??void 0;let{eCheckbox:o}=this;if(!n){o.setDisplayed(!1);return}o.setValue(t);let s=e.disabled??!i?.isCellEditable(a);o.setDisabled(s);let c=this.getLocaleTextFunc(),l=sn(c,t),u=s?l:`${c(`ariaToggleCellValue`,`Press SPACE to toggle cell value`)} (${l})`;o.setInputAriaLabel(u)}onCheckboxChanged(e){let{params:t}=this,{column:n,node:r,value:i}=t;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:r.rowIndex,rowPinned:r.rowPinned,state:`changed`,oldValue:i,newValue:i}],{update:!0});let a=r.setDataValue(n,e,`renderer`);this.beans.editSvc?.stopEditing({rowNode:r,column:n},{source:this.beans.editSvc?.isBatchEditing()?`ui`:`api`}),a||this.updateCheckbox(t)}},$d=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){let{all:t,visible:n,order:r}=this;t.has(e)||(t.add(e),n.add(e),r.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),ua(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(let t of this.visible)if(t.id==e)return t}clear(){let{all:e,visible:t,order:n,queued:r}=this;e.clear(),r.clear(),t.clear(),n.length=0}sort(){let{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,r=e?.getSortOptions()??[],i=af(this.order);if(this.order.sort((e,t)=>(e.pinnedSibling?.rowIndex??0)-(t.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,r)??this.order,!i)return;let a=oi(n);a===`bottom`||a===`pinnedBottom`?this.order.push(i):this.order.unshift(i)}hide(e){let{all:t,visible:n}=this;t.forEach(t=>e(t)?n.delete(t):n.add(t)),this.order=Array.from(n),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function ef(e){if(e.level===-1)return!0;let t=e.parent;return t?.childrenAfterSort?.some(t=>t==e)?ef(t):!1}function tf(e,t){let{gos:n,rowModel:r,filterManager:i}=e;return zr(n,r)?!r.getRowNode(t.id):i?.isAnyFilterPresent()?!ef(t):n.get(`pivotMode`)?!t.group:!1}function nf(e){return!!e.footer&&e.level===-1}function rf(e){return!!e.pinnedSibling&&nf(e.pinnedSibling)}function af(e){let t=e.findIndex(rf);if(t>-1)return e.splice(t,1)?.[0]}var of=class extends W{postConstruct(){let{gos:e,beans:t}=this;this.top=new $d(t,`top`),this.bottom=new $d(t,`bottom`);let n=e=>tf(t,e.pinnedSibling),r=()=>{let n=e.get(`isRowPinned`);n&&e.get(`enableRowPinning`)&&t.rowModel.forEachNode(e=>this.pinRow(e,n(e)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:e})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(e=>e.hide(n)),this.refreshRowPositions(),e||this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(uf),this.refreshRowPositions()},rowNodeDataChanged:({node:t})=>{(e.get(`isRowPinnable`)?.(t)??!0)||this.pinRow(t,null)},firstDataRendered:r}),this.addManagedPropertyListener(`pivotMode`,()=>{this.forContainers(e=>e.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener(`grandTotalRow`,({currentValue:e})=>{this._grandTotalPinned=e===`pinnedBottom`?`bottom`:e===`pinnedTop`?`top`:null}),this.addManagedPropertyListener(`isRowPinned`,r)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(e=>{let t=[];e.forEach(e=>t.push(e)),t.forEach(e=>this.pinRow(e,null)),e.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,pf(this.beans);return}let r=e.rowPinned??e.pinnedSibling?.rowPinned;if(r!=null&&t!=null&&t!=r){let r=e.rowPinned?e:e.pinnedSibling,i=e.rowPinned?e.pinnedSibling:e;this.pinRow(r,null,n),this.pinRow(i,t,n);return}let i=n&&df(this.beans,e,n);if(i){i.forEach(e=>this.pinRow(e,t));return}if(t==null){let n=e.rowPinned?e:e.pinnedSibling,r=this.findPinnedRowNode(n);if(!r)return;r.delete(n);let i=n.pinnedSibling;lf(n),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(i)}else{let n=cf(this.beans,e,t),r=this.getContainer(t);r.add(n),tf(this.beans,e)&&r.hide(e=>tf(this.beans,e.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0,n=n=>{if(n.rowHeightEstimated){let r=Ur(this.beans,n);n.setRowTop(t),n.setRowHeight(r.height),t+=r.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:`pinnedHeightChanged`}),e}getPinnedTopTotalHeight(){return ff(this.top)}getPinnedBottomTotalHeight(){return ff(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){let e=e=>{let t=[];return this.forEachPinnedRow(e,e=>t.push(e.pinnedSibling.id)),t};return{top:e(`top`),bottom:e(`bottom`)}}setPinnedState(e){this.forContainers((t,n)=>{for(let r of e[n]){let e=this.beans.rowModel.getRowNode(r);e?this.pinRow(e,n):t.queue(r)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{let n=new Set;e.forEachQueued(e=>{let t=this.beans.rowModel.getRowNode(e);t&&n.add(t)});for(let r of n)e.unqueue(r.id),this.pinRow(r,t)})}pinGrandTotalRow(){let{gos:e,beans:t,_grandTotalPinned:n}=this,r=t.rowModel;if(!z(e,r))return;let i=r.rootNode?.sibling;if(!i)return;let a=i.pinnedSibling,o=a&&this.findPinnedRowNode(a);if(n){if(o&&o.floating!==n&&(o.delete(a),lf(a)),!o||o.floating!==n){let e=cf(t,i,n);this.getContainer(n).add(e)}}else{if(!o)return;o.delete(a),lf(a)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(e=>e.forEach(e=>e.setRowHeight(e.rowHeight,!0)))}getContainer(e){return e===`top`?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){let t=e=>sf(this.beans,e);return e==null?this.forContainers(t):t(this.getContainer(e))}forContainers(e){e(this.top,`top`),e(this.bottom,`bottom`)}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:`pinnedRowsChanged`}),e?.dispatchRowEvent(`rowPinned`)}};function sf(e,t){let n=0;t.forEach((t,r)=>{t.setRowTop(n),(t.rowHeightEstimated||t.rowHeight==null)&&t.setRowHeight(Ur(e,t).height),t.setRowIndex(r),n+=t.rowHeight})}function cf(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;let r=nl(t,e);return r.setRowTop(null),r.setRowIndex(null),r.rowPinned=n,r.id=`${n===`top`?`t-`:`b-`}${n}-${t.id}`,r.pinnedSibling=t,t.pinnedSibling=r,r}function lf(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);let t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function uf(e){let t=new Set;e.forEach(e=>{e.group&&t.add(e)}),t.forEach(t=>e.delete(t))}function df(e,t,n){let{rowSpanSvc:r}=e,i=(n&&r?.isCellSpanning(n,t))??!1;if(n&&i)return r?.getCellSpan(n,t)?.spannedNodes}function ff(e){let t=e.size();if(t===0)return 0;let n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function pf({gos:e,rowModel:t}){z(e,t)&&t.refreshModel({step:`map`})}var mf=class extends W{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let e=this.gos;this.setPinnedRowData(e.get(`pinnedTopRowData`),`top`),this.setPinnedRowData(e.get(`pinnedBottomRowData`),`bottom`),this.addManagedPropertyListener(`pinnedTopRowData`,e=>this.setPinnedRowData(e.currentValue,`top`)),this.addManagedPropertyListener(`pinnedBottomRowData`,e=>this.setPinnedRowData(e.currentValue,`bottom`)),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){let e=e=>{e.setRowHeight(e.rowHeight,!0)};vf(this.pinnedBottomRows,e),vf(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0,n=n=>{if(n.rowHeightEstimated){let r=Ur(this.beans,n);n.setRowTop(t),n.setRowHeight(r.height),t+=r.height,e=!0}};return vf(this.pinnedBottomRows,n),t=0,vf(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:`pinnedHeightChanged`}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:`pinnedRowDataChanged`})}updateNodesFromRowData(e,t){let n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}let r=li(this.gos),i=t===`top`?`t-`:`b-`,a=new Set(n.order),o=[],s=new Set,c=0,l=-1;for(let u of e){let e=r?.({data:u,level:0,rowPinned:t})??i+ this.nextId++;if(s.has(e)){L(96,{id:e,data:u});continue}l++,s.add(e),o.push(e);let d=gf(n,e);if(d!==void 0)d.data!==u&&d.updateData(u),c+=this.setRowTopAndRowIndex(d,c,l),a.delete(e);else{let r=new $c(this.beans);r.id=e,r.data=u,r.rowPinned=t,c+=this.setRowTopAndRowIndex(r,c,l),n.cache[e]=r,n.order.push(e)}}a.forEach(e=>{gf(n,e)?.clearRowTopAndRowIndex(),delete n.cache[e]}),n.order=o}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(Ur(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return hf(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return hf(this.pinnedBottomRows)}getPinnedTopRowCount(){return yf(this.pinnedTopRows)}getPinnedBottomRowCount(){return yf(this.pinnedBottomRows)}getPinnedTopRow(e){return _f(this.pinnedTopRows,e)}getPinnedBottomRow(e){return _f(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return gf(this.getCache(t),e)}forEachPinnedRow(e,t){return vf(this.getCache(e),t)}getCache(e){return e===`top`?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function hf(e){let t=yf(e);if(t===0)return 0;let n=_f(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function gf(e,t){return e.cache[t]}function _f(e,t){return gf(e,e.order[t])}function vf(e,t){e.order.forEach((n,r)=>{let i=gf(e,n);i&&t(i,r)})}function yf(e){return e.order.length}var bf=class extends W{constructor(){super(...arguments),this.beanName=`pinnedRowModel`}postConstruct(){let{gos:e}=this,t=()=>{let t=e.get(`enableRowPinning`),n=oi(e),r=!!t||n===`pinnedBottom`||n===`pinnedTop`,i=r?this.inner instanceof mf:this.inner instanceof of;this.inner&&i&&this.destroyBean(this.inner),(i||!this.inner)&&(this.inner=this.createManagedBean(r?new of:new mf))};this.addManagedPropertyListeners([`enableRowPinning`,`grandTotalRow`],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},xf=`ROOT_NODE_ID`,Sf=class extends W{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map(e=>e.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=xf,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&=(this.allNodesMap={},null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){let t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){let t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map((e,t)=>this.createRowNode(e,t))??[]}setImmutableRowData(e,t){let n=li(this.gos),r=!this.gos.get(`suppressMaintainUnsortedOrder`),i=e.changedRowNodes,a=new Set,o=this.rootNode,s=o.allLeafChildren,c=s.length,l=!1,u=!1,d=!1,f=!1;for(let e=0,o=-1,s=t.length;e<s;e++){let s=t[e],c=this.getRowNode(n({data:s,level:0}));if(!c)l=!0,c=this.createRowNode(s,-1),i.add(c);else{if(r){let e=c.sourceRowIndex;f||=e<=o||l,o=e}c.data!==s&&(d=!0,c.updateData(s),i.update(c))}a.add(c)}let p=[];for(let e=0;e<c;e++){let t=s[e];a.has(t)||(u=!0,t.isSelected()&&p.push(t),t.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(t.pinnedSibling,null),this.rowNodeDeleted(t),i.remove(t))}if(l||u||f){let t=Array(a.size),n=0;if(!r)for(let e=0;e<c;++e){let r=s[e];a.delete(r)&&(r.sourceRowIndex=n,t[n++]=r)}for(let e of a)e.sourceRowIndex=n,t[n++]=e;o.allLeafChildren=t;let i=o.sibling;i&&(i.allLeafChildren=t),e.rowNodesOrderChanged||=f}(l||u||f||d)&&(this.deselectNodes(p),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();let t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);let n={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},r=[],i=li(this.gos);return this.executeRemove(i,e,n,r),this.executeUpdate(i,e,n,r),this.executeAdd(e,n),this.deselectNodes(r),n}executeAdd(e,t){let n=e.add;if(!n?.length)return;let r=this.rootNode.allLeafChildren,i=r.length;if(typeof e.addIndex==`number`&&(i=this.sanitizeAddIndex(e.addIndex),i>0&&this.gos.get(`treeData`)&&this.gos.get(`getDataPath`))){for(let e=0;e<r.length;e++)if(r[e]?.rowIndex==i-1){i=e+1;break}}let a=n.length,o=t.changedRowNodes,s=Array(a);for(let e=0;e<a;e++){let t=this.createRowNode(n[e],i+e);o.add(t),s[e]=t}let c=this.rootNode;if(i<r.length){let e=r.slice(0,i),n=r.slice(i,r.length),a=e.length+s.length;for(let e=0,t=n.length;e<t;++e)n[e].sourceRowIndex=a+e;r=[...e,...s,...n],t.rowsInserted=!0}else r=r.concat(s);c.allLeafChildren=r;let l=c.sibling;l&&(l.allLeafChildren=r),t.rowNodeTransaction.add=s}executeRemove(e,t,{changedRowNodes:n,rowNodeTransaction:r},i){let{remove:a}=t;if(!a?.length)return;let o={};a.forEach(t=>{let a=this.lookupRowNode(e,t);a&&(a.isSelected()&&i.push(a),a.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(a.pinnedSibling,null),a.clearRowTopAndRowIndex(),o[a.id]=!0,delete this.allNodesMap[a.id],r.remove.push(a),n.remove(a))});let s=this.rootNode;s.allLeafChildren=s.allLeafChildren?.filter(e=>!o[e.id])??null,s.allLeafChildren?.forEach((e,t)=>{e.sourceRowIndex=t});let c=s.sibling;c&&(c.allLeafChildren=s.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:n,rowNodeTransaction:r},i){let{update:a}=t;a?.length&&a.forEach(t=>{let a=this.lookupRowNode(e,t);a&&(a.updateData(t),!a.selectable&&a.isSelected()&&i.push(a),r.update.push(a),n.update(a))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:`rowDataUpdateStarted`,firstRowData:e?.length?e[0]:null})}deselectNodes(e){let t=`rowDataChanged`,n=this.beans.selectionSvc,r=e.length>0;r&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),r&&this.eventSvc.dispatchEvent({type:`selectionChanged`,source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){let n=new $c(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=t,n.setDataAndId(e,String(this.nextId)),this.allNodesMap[n.id]&&L(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(e,t){let n;if(e){let r=e({data:t,level:0});if(n=this.allNodesMap[r],!n)return R(4,{id:r}),null}else if(n=this.rootNode?.allLeafChildren?.find(e=>e.data===t),!n)return R(5,{data:t}),null;return n||null}},Cf={tag:`div`,cls:`ag-selection-checkbox`,role:`presentation`,children:[{tag:`ag-checkbox`,ref:`eCheckbox`,role:`presentation`}]},wf=class extends q{constructor(){super(Cf,[Yd]),this.eCheckbox=null}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,r=t.isSelected(),i=sn(e,r),[a,o]=t.selectable?[`ariaRowToggleSelection`,`Press Space to toggle row selection`]:[`ariaRowSelectionDisabled`,`Row Selection is disabled for this row`],s=e(a,o);n.setValue(r,!0),n.setInputAriaLabel(`${s} (${i})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Ri,click:e=>{Ri(e),this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,`checkboxSelected`)}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener(`rowSelection`,({currentValue:e,previousValue:t})=>{(typeof e==`object`?pi(e):void 0)!==(typeof t==`object`?pi(t):void 0)&&this.onSelectableChanged()}),yi(this.gos)||typeof this.getIsVisible()==`function`){let e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute(`tabindex`,`-1`)}showOrHideSelect(){let{column:e,rowNode:t,overrides:n,gos:r}=this,i=t.selectable,a=this.getIsVisible(),o;if(typeof a==`function`){let r=n?.callbackParams;if(!e)o=a({...r,node:t,data:t.data});else{let n=e.createColumnFunctionCallbackParams(t);o=a({...r,...n})}}else o=a??!1;let s=i&&!o||!i&&o,c=i||o,l=r.get(`rowSelection`),u=l&&typeof l!=`string`?!pi(l):!!e?.getColDef().showDisabledCheckboxes;if(this.setVisible(c&&(s?u:!0)),this.setDisplayed(c&&(s?u:!0)),c&&this.eCheckbox.setDisabled(s),n?.removeHidden){this.setDisplayed(c);return}}getIsVisible(){let e=this.overrides;if(e)return e.isVisible;let t=this.gos.get(`rowSelection`);return t&&typeof t!=`string`?ui(t):this.column?.getColDef()?.checkboxSelection}},Tf=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t,{rowModel:n,pinnedRowModel:r}=this;return t??=n.getRowNode(e),r?.isManual()&&(t??=r.getPinnedRowById(e,`top`),t??=r.getPinnedRowById(e,`bottom`)),t}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.rootId,r=t.findIndex(t=>t.id===e.id);if(r>-1){let i=t.slice(0,r),a=t.slice(r+1);return this.setEndRange(e),n?{keep:i,discard:a}:{keep:a,discard:i}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let n=this.getRange().slice();return t&&e.depthFirstSearch(e=>!e.group&&n.push(e)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}let r=this.getNodesInRange(n,e);if(!r)return this.setRoot(e),{keep:[e],discard:[]};if(r.find(e=>e.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}getNodesInRange(e,t){let{pinnedRowModel:n,rowModel:r}=this;if(!n?.isManual())return r.getNodesInRangeForSelection(e,t);if(e.rowPinned===`top`&&!t.rowPinned)return cc(n,`top`,e,void 0).concat(r.getNodesInRangeForSelection(r.getRow(0),t)??[]);if(e.rowPinned===`bottom`&&!t.rowPinned){let i=cc(n,`bottom`,void 0,e),a=r.getRowCount(),o=r.getRow(a-1);return(r.getNodesInRangeForSelection(t,o)??[]).concat(i)}if(!e.rowPinned&&!t.rowPinned)return r.getNodesInRangeForSelection(e,t);if(e.rowPinned===`top`&&t.rowPinned===`top`)return cc(n,`top`,e,t);if(e.rowPinned===`bottom`&&t.rowPinned===`top`){let i=cc(n,`top`,t,void 0),a=cc(n,`bottom`,void 0,e),o=r.getRow(0),s=r.getRow(r.getRowCount()-1);return i.concat(r.getNodesInRangeForSelection(o,s)??[]).concat(a)}if(!e.rowPinned&&t.rowPinned===`top`)return cc(n,`top`,t,void 0).concat(r.getNodesInRangeForSelection(r.getRow(0),e)??[]);if(e.rowPinned===`top`&&t.rowPinned===`bottom`){let i=cc(n,`top`,e,void 0),a=cc(n,`bottom`,void 0,t),o=r.getRow(0),s=r.getRow(r.getRowCount()-1);return i.concat(r.getNodesInRangeForSelection(o,s)??[]).concat(a)}if(e.rowPinned===`bottom`&&t.rowPinned===`bottom`)return cc(n,`bottom`,e,t);if(!e.rowPinned&&t.rowPinned===`bottom`){let i=cc(n,`bottom`,void 0,t),a=r.getRow(r.getRowCount());return(r.getNodesInRangeForSelection(e,a)??[]).concat(i)}return null}},Ef=class extends W{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(H(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;let t=this.createManagedBean(new Jd);this.cbSelectAll=t,t.addCss(`ag-header-select-all`),Ft(t.getGui(),`presentation`),this.showOrHideSelectAll();let n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener(`rowSelection`,({currentValue:e,previousValue:t})=>{let n=e=>typeof e==`string`||!e||e.mode===`singleRow`?void 0:e.selectAll;n(e)!==n(t)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute(`tabindex`,`-1`),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source===`uiColumnMoved`)}showOrHideSelectAll(e=!1){let t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType(`selectAllCheckbox`),this.checkSelectionType(`selectAllCheckbox`),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,r=t.getSelectAllState(e);n.setValue(r);let i=t.hasNodesToSelect(e);n.setDisabled(!i),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){let t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:r,cbSelectAllVisible:i}=this,a=sn(t,r.getValue()),o=t(`ariaRowSelectAll`,`Press Space to toggle all rows selection`);n.setAriaDescriptionProperty(`selectAll`,i?`${o} (${a})`:null),r.setInputAriaLabel(t(`ariaHeaderSelection`,`Column with Header Selection`)),e||n.announceAriaDescription()}checkSelectionType(e){return xi(this.gos)?!0:(L(128,{feature:e}),!1)}checkRightRowModelType(e){let{gos:t,rowModel:n}=this.beans;return z(t)||zr(t)?!0:(L(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.getSelectAllMode(),n=`uiSelectAll`;t===`currentPage`?n=`uiSelectAllCurrentPage`:t===`filtered`&&(n=`uiSelectAllFiltered`);let r={source:n,selectAll:t},i=this.beans.selectionSvc;e?i.selectAllRowNodes(r):i.deselectAllRowNodes(r)}isCheckboxSelection(){let{column:e,gos:t,beans:n}=this,r=typeof t.get(`rowSelection`)==`object`?`headerCheckbox`:`headerCheckboxSelection`;return Df(n,e)&&this.checkRightRowModelType(r)&&this.checkSelectionType(r)}getSelectAllMode(){let e=wi(this.gos,!1);if(e)return e;let{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?`currentPage`:n?`filtered`:`all`}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function Df({gos:e,selectionColSvc:t},n){let r=e.get(`rowSelection`),i=n.getColDef(),{headerCheckboxSelection:a}=i,o=!1;if(typeof r==`object`){let e=va(n),i=_a(n);(fi(r)===`autoGroupColumn`&&i||e&&t?.isSelectionColumnEnabled())&&(o=di(r))}else o=typeof a==`function`?a(U(e,{column:n,colDef:i})):!!a;return o}var Of=class extends W{postConstruct(){let{gos:e,beans:t}=this;this.selectionCtx=new Tf(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners([`isRowSelectable`,`rowSelection`],()=>{let t=yi(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())}),this.isRowSelectable=yi(e),this.addManagedEventListeners({cellValueChanged:e=>this.updateRowSelectable(e.node),rowNodeDataChanged:e=>this.updateRowSelectable(e.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new wf}createSelectAllFeature(e){if(Df(this.beans,e))return new Ef(e)}isMultiSelect(){return xi(this.gos)}onRowCtrlSelected(e,t,n){let r=!!e.rowNode.isSelected();e.forEachGui(n,e=>{e.rowComp.toggleCss(`ag-row-selected`,r);let n=e.element;nn(n,r),n.contains(H(this.beans))&&t(e)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;let t=e.isSelected();if(!e.selectable)return;let n=this.getLocaleTextFunc()(t?`ariaRowDeselect`:`ariaRowSelect`,`Press SPACE to ${t?`deselect`:`select`} this row`);this.beans.ariaAnnounce?.announceValue(n,`rowSelection`)}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!sc(e)||!Br(this.gos)}updateRowSelectable(e,t){let n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent(`selectableChanged`),n)return;if(Ti(this.gos)){let t=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:t??!1,source:`selectableChanged`});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:`selectableChanged`})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let r=0;r<e.childrenAfterGroup.length;r++){let i=e.childrenAfterGroup[r],a=i.isSelected();if(!i.selectable){let e=this.calculateSelectedFromChildren(i);if(e===null)continue;a=e}switch(a){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,r=`api`){let i=!e.selectable&&t,a=e.__selected===t;if(i||a)return!1;e.__selected=t,e.dispatchRowEvent(`rowSelected`);let o=e.sibling;o&&o.footer&&o.__localEventService&&o.dispatchRowEvent(`rowSelected`);let s=e.pinnedSibling;return s&&s.rowPinned&&s.__localEventService&&s.dispatchRowEvent(`rowSelected`),this.eventSvc.dispatchEvent({...el(e,this.gos,`rowSelected`),event:n||null,source:r}),!0}isCellCheckboxSelection(e,t){let n=this.gos.get(`rowSelection`);if(n&&typeof n!=`string`){let r=va(e)&&ui(n);return e.isColumnFunc(t,r)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,r){let{gos:i,selectionCtx:a}=this,o=e.isSelected(),s=Ti(i),c=_i(i),l=vi(i),u=this.isMultiSelect(),d=r===`rowClicked`;if(d&&!(c||l))return null;if(t&&n&&u){let t=a.getRoot();if(t)if(t.isSelected()){let t=a.isInRange(e)?a.truncate(e):a.extend(e,s);return{deselect:t.discard,select:t.keep,reset:!1}}else return{select:[],deselect:a.extend(e,s).keep,reset:!1};else return null}else if(t&&u){let t=a.selectAll?this.beans.rowModel.getRow(0):void 0,n=a.getRoot(t),r=a.isInRange(e)?a.truncate(e):a.extend(e,s);return{select:r.keep,deselect:r.discard,reset:a.selectAll||!!(n&&!n.isSelected())}}else if(n){if(d){let t=!o;return t&&!c||!t&&!l?null:(a.setRoot(e),{node:e,newValue:t,clearSelection:!1})}return a.setRoot(e),{node:e,newValue:!o,clearSelection:!u}}else{a.setRoot(e);let t=Si(i),n=Ci(i)===`filteredDescendants`,r=d&&(!t||!c);if(n&&o===void 0&&z(i))return{node:e,newValue:!1,clearSelection:!u||r};if(d){let n=o?!t:c;return n===o&&!r||n&&!c||!n&&!l?null:{node:e,newValue:n,clearSelection:!u||r,keepDescendants:e.group&&s}}return{node:e,newValue:!o,clearSelection:!u||r}}}},kf=class extends Jd{constructor(e){super(e,`ag-radio-button`,`radio`)}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){let t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},Af=class extends qd{constructor(e,t=`ag-text-field`,n=`text`){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){let n=this.eInput;return n.value!==e&&(n.value=j(e)?e:``),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{lu(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{let n=t.clipboardData?.getData(`text`);n&&n.split(``).some(t=>!e.test(t))&&t.preventDefault()}})}},jf={selector:`AG-INPUT-TEXT-FIELD`,component:Af},Mf={selector:`AG-INPUT-TEXT-AREA`,component:class extends qd{constructor(e){super(e,`ag-text-area`,null,`textarea`)}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Nf=class extends Af{constructor(e){super(e,`ag-number-field`,`number`)}postConstruct(){super.postConstruct();let e=this.eInput;this.addManagedListeners(e,{blur:()=>{let t=parseFloat(e.value),n=isNaN(t)?``:this.normalizeValue(t.toString());this.value!==n&&this.setValue(n)},wheel:this.onWheel.bind(this)}),e.step=`any`;let{precision:t,min:n,max:r,step:i}=this.config;typeof t==`number`&&this.setPrecision(t),typeof n==`number`&&this.setMin(n),typeof r==`number`&&this.setMax(r),typeof i==`number`&&this.setStep(i)}onWheel(e){H(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===``?``:(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){let n=this.precision;if(n==null)return e;if(t){let t=parseFloat(e).toFixed(n);return parseFloat(t).toString()}let r=String(e).split(`.`);if(r.length>1){if(r[1].length<=n)return e;if(n>0)return`${r[0]}.${r[1].slice(0,n)}`}return r[0]}setMin(e){return this.min===e?this:(this.min=e,tr(this.eInput,`min`,e),this)}setMax(e){return this.max===e?this:(this.max=e,tr(this.eInput,`max`,e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,tr(this.eInput,`step`,e),this)}setValue(e,t){return this.setValueOrInputValue(e=>super.setValue(e,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},e)}setValueOrInputValue(e,t,n){if(j(n)){let r=this.isScientificNotation(n);if(r&&this.eInput.validity.valid)return e(n);if(!r){n=this.adjustPrecision(n);let e=this.normalizeValue(n);r=n!=e}if(r)return t(n)}return e(n)}getValue(){let e=this.eInput;if(!e.validity.valid)return;let t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e==`string`&&e.includes(`e`)}},Pf={selector:`AG-INPUT-NUMBER-FIELD`,component:Nf},Ff={selector:`AG-INPUT-DATE-FIELD`,component:class extends Af{constructor(e){super(e,`ag-date-field`,`date`)}postConstruct(){super.postConstruct();let e=hn();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step=`any`}onWheel(e){H(this.beans)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Sl(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,tr(this.eInput,`min`,t),this)}setMax(e){let t=e instanceof Date?Sl(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,tr(this.eInput,`max`,t),this)}setStep(e){return this.step===e?this:(this.step=e,tr(this.eInput,`step`,e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?`datetime-local`:`date`),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Ol(this.getValue())??void 0}setDate(e,t){this.setValue(Sl(e??null,this.includeTime),t)}}},If=class extends q{constructor(e=`default`,t=!1){super({tag:`div`,cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.unFocusable=t,this.activeClass=`ag-active-item`,this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case X.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}break;case X.DOWN:case X.UP:e.preventDefault(),this.navigate(t);break;case X.PAGE_DOWN:case X.PAGE_UP:case X.PAGE_HOME:case X.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===X.DOWN,n,{itemEls:r,highlightedEl:i}=this;if(!i)n=r[t?0:r.length-1];else{let e=r.indexOf(i)+(t?1:-1);e=Math.min(Math.max(e,0),r.length-1),n=r[e]}this.highlightItem(n)}navigateToPage(e){let{itemEls:t,highlightedEl:n}=this;if(!n||t.length===0)return;let r=t.indexOf(n),i=this.options.length-1,a=t[0].clientHeight,o=Math.floor(this.getGui().clientHeight/a),s=-1;e===X.PAGE_HOME?s=0:e===X.PAGE_END?s=i:e===X.PAGE_DOWN?s=Math.min(r+o,i):e===X.PAGE_UP&&(s=Math.max(r-o,0)),s!==-1&&this.highlightItem(t[s])}addOptions(e){return e.forEach(e=>this.addOption(e)),this}addOption(e){let{value:t,text:n}=e,r=n??t;return this.options.push({value:t,text:r}),this.renderOption(t,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{zn(e)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){Ft(this.getGui(),this.options.length===0?`presentation`:`listbox`)}updateIndices(){let e=this.getGui().querySelectorAll(`.ag-list-item`);this.refreshAriaRole(),e.forEach((t,n)=>{qt(t,n+1),Kt(t,e.length)})}renderOption(e,t){let n=F({tag:`div`,cls:`ag-list-item ag-${this.cssIdentifier}-list-item`,attrs:{role:`option`}}),r=F({tag:`span`,children:t});n.appendChild(r),this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean(`tooltipFeature`,!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>`UNKNOWN`,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(t=>t.value===e);if(n!==-1){let e=this.options[n];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(e=>e.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Vn(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),nn(e,!0);let{scrollTop:t,clientHeight:n}=this.getGui(),{offsetTop:r,offsetHeight:i}=e;(r+i>t+n||r<t)&&e.scrollIntoView({block:`nearest`}),this.unFocusable||e.focus()}clearHighlighted(){let e=this.highlightedEl;!e||!Vn(e)||(e.classList.remove(this.activeClass),nn(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:`fieldValueChanged`}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:`selectedItem`})}},Lf=`.ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}`,Rf={tag:`div`,cls:`ag-picker-field`,role:`presentation`,children:[{tag:`div`,ref:`eLabel`},{tag:`div`,ref:`eWrapper`,cls:`ag-wrapper ag-picker-field-wrapper ag-picker-collapsed`,children:[{tag:`div`,ref:`eDisplayField`,cls:`ag-picker-field-display`},{tag:`div`,ref:`eIcon`,cls:`ag-picker-field-icon`,attrs:{"aria-hidden":`true`}}]}]},zf=class extends Gd{constructor(e){if(super(e,e?.template||Rf,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=null,this.eWrapper=null,this.eDisplayField=null,this.eIcon=null,this.registerCSS(Lf),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:r,minPickerWidth:i,maxPickerWidth:a}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!r,n!=null&&this.setPickerMaxHeight(n),i!=null&&this.setPickerMinWidth(i),a!=null&&this.setPickerMaxWidth(a)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute(`id`,e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:r}=this.config;if(n){let e=zd(n,this.beans);e&&this.eIcon.appendChild(e)}r!=null&&this.setInputWidth(r)}setupAria(){let e=this.getAriaElement();e.setAttribute(`tabindex`,this.gos.get(`tabIndex`).toString()),Gt(e,!1),this.ariaRole&&Ft(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case X.UP:case X.DOWN:case X.ENTER:case X.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case X.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||=this.createPickerComponent();let e=this.pickerComponent.getGui();e.addEventListener(`focusin`,this.onPickerFocusIn),e.addEventListener(`focusout`,this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get(`suppressScrollWhenPopupsAreOpen`)||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:r,modalPicker:i=!0},maxPickerHeight:a,minPickerWidth:o,maxPickerWidth:s,variableWidth:c,beans:l,eWrapper:u}=this,d={modal:i,eChild:e,closeOnEsc:!0,closedCallback:()=>{let e=ti(l);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,r),anchorToElement:u};e.style.position=`absolute`;let f=l.popupSvc,p=f.addPopup(d);c?(o&&(e.style.minWidth=o),e.style.width=$n(Pn(u)),s&&(e.style.maxWidth=s)):Xn(e,s??Pn(u));let m=a??`${jn(f.getPopupParent())}px`;return e.style.setProperty(`max-height`,m),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:r},eWrapper:i,pickerComponent:a}=this,o=r.get(`enableRtl`)?`right`:`left`;n.positionPopupByComponent({type:t,eventSource:i,ePopup:a.getGui(),position:`under`,alignSide:o,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&=(this.destroyMouseWheelFunc(),void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener(`focusin`,this.onPickerFocusIn),e.removeEventListener(`focusout`,this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;Gt(this.getAriaElement(),e);let t=this.eWrapper.classList;t.toggle(`ag-picker-expanded`,e),t.toggle(`ag-picker-collapsed`,!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle(`ag-picker-has-focus`,e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:`pickerHidden`}))}setInputWidth(e){return Xn(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e==`number`&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e==`number`&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e==`number`&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Bf=`.ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}`,Vf=class extends zf{constructor(e){super({pickerAriaLabelKey:`ariaLabelSelectField`,pickerAriaLabelValue:`Select Field`,pickerType:`ag-list`,className:`ag-select`,pickerIcon:`selectOpen`,ariaRole:`combobox`,...e}),this.registerCSS(Bf)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean(`tooltipFeature`,!1,{shouldDisplayTooltip:qn(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get(`tabIndex`);let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){let e=this.createBean(new If(`select`,!0));this.listComponent=e,e.setParentComponent(this);let t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute(`id`,n),an(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{e?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:`selectedItem`})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===X.TAB&&this.hidePicker(),t){case X.ENTER:case X.UP:case X.DOWN:case X.PAGE_UP:case X.PAGE_DOWN:case X.PAGE_HOME:case X.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case X.ESCAPE:super.onKeyDown(e);break;case X.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){let e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(e=>this.addOption(e)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,n){let{listComponent:r,config:{placeholder:i},eDisplayField:a,tooltipFeature:o}=this;if(this.value===e||!r||(n||r.setValue(e,!0),r.getValue()===this.getValue()))return this;let s=r.getDisplayValue();return s==null&&i&&(s=i),a.textContent=s,o?.setTooltipAndRefresh(s??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Hf={TAB_GUARD:`ag-tab-guard`,TAB_GUARD_TOP:`ag-tab-guard-top`,TAB_GUARD_BOTTOM:`ag-tab-guard-bottom`},Uf=class extends W{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:r,focusTrapActive:i,forceFocusOutWhenTabGuardsAreEmpty:a,isFocusableContainer:o,focusInnerElement:s,onFocusIn:c,onFocusOut:l,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:f,isEmpty:p,eFocusableElement:m}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=r,this.providedFocusInnerElement=s,this.eFocusableElement=m,this.focusTrapActive=!!i,this.forceFocusOutWhenTabGuardsAreEmpty=!!a,this.isFocusableContainer=!!o,this.providedFocusIn=c,this.providedFocusOut=l,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=f,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new Wl(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute(`tabIndex`)}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get(`tabIndex`);this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():gc(this.eFocusableElement,`.ag-tab-guard`).length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){let t=gc(V(this.beans).body,null,!0),n=t.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let r,i;e?(r=0,i=n):(r=n+1,i=t.length);let a=t.slice(r,i),o=this.gos.get(`tabIndex`);a.sort((e,t)=>{let n=parseInt(e.getAttribute(`tabindex`)||`0`),r=parseInt(t.getAttribute(`tabindex`)||`0`);return r===o?1:n===o?-1:n===0?1:r===0?-1:n-r}),a[e?a.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=gc(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return vc(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},Wf=class extends W{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard(`top`),this.eBottomGuard=this.createTabGuard(`bottom`),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:r}=this,i=[t,n],a={setTabIndex:e=>{i.forEach(t=>e==null?t.removeAttribute(`tabindex`):t.setAttribute(`tabindex`,e))}};this.addTabGuards(t,n);let{focusTrapActive:o=!1,onFocusIn:s,onFocusOut:c,focusInnerElement:l,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:f,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:h}=e;this.tabGuardCtrl=this.createManagedBean(new Uf({comp:a,focusTrapActive:o,eTopGuard:t,eBottomGuard:n,eFocusableElement:r,onFocusIn:s,onFocusOut:c,focusInnerElement:l,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:f,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:h}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=V(this.beans).createElement(`div`),n=e===`top`?Hf.TAB_GUARD_TOP:Hf.TAB_GUARD_BOTTOM;return t.classList.add(Hf.TAB_GUARD,n),Ft(t,`presentation`),t}addTabGuards(e,t){let n=this.eFocusableElement;n.insertAdjacentElement(`afterbegin`,e),n.insertAdjacentElement(`beforeend`,t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];Rn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){er(t)||(t=t.getGui());let{eBottomGuard:r}=this;r?r.insertAdjacentElement(`beforebegin`,t):e(t,n)}destroy(){let{eTopGuard:e,eBottomGuard:t}=this;zn(e),zn(t),super.destroy()}},Gf=class extends q{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new Wf(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Kf=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new gt,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this);e.addEventListener(`touchstart`,n,{passive:!0}),e.addEventListener(`touchmove`,r,{passive:!0}),e.addEventListener(`touchend`,i,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener(`touchstart`,n,{passive:!0}),e.removeEventListener(`touchmove`,r,{passive:!0}),e.removeEventListener(`touchend`,i,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let t={type:`longTap`,touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);t&&(Ec(t,this.touchStart,4)||(this.moved=!0))}onTouchEnd(e){if(this.touching){if(!this.moved){let e={type:`tap`,touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let e={type:`doubleTap`,touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},qf=class{constructor(e=`javascript`){this.frameworkName=e,this.renderingEngine=`vanilla`,this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${vr}/${this.frameworkName}-data-grid`,Tr(this.baseDocLink)}setInterval(e,t){return new J(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,r){let i={};if(typeof r==`object`?i=r:typeof r==`boolean`&&(i={capture:r}),i.passive==null){let e=Ki(t);e!=null&&(i.passive=e)}e.addEventListener(t,n,i)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:``}`}};function Jf(e){return{beanName:`gridApi`,bean:e.getBean(`apiFunctionSvc`).api}}var Yf=Object.fromEntries(`licenseManager.environment.eventSvc.gos.paginationAutoPageSizeSvc.apiFunctionSvc.gridApi.registry.agCompUtils.userCompFactory.rowContainerHeight.horizontalResizeSvc.localeSvc.pinnedRowModel.dragSvc.colGroupSvc.visibleCols.popupSvc.selectionSvc.colFilter.quickFilter.filterManager.colModel.headerNavigation.pageBounds.pagination.pageBoundsListener.rowSpanSvc.stickyRowSvc.rowRenderer.expressionSvc.alignedGridsSvc.navigation.valueCache.valueSvc.autoWidthCalc.filterMenuFactory.dragAndDrop.focusSvc.cellNavigation.cellStyles.scrollVisibleSvc.sortSvc.colHover.colAnimation.autoColSvc.selectionColSvc.changeDetectionSvc.animationFrameSvc.undoRedo.colDefFactory.rowStyleSvc.rowNodeBlockLoader.rowNodeSorter.ctrlsSvc.pinnedCols.dataTypeSvc.syncSvc.overlays.stateSvc.expansionSvc.apiEventSvc.ariaAnnounce.menuSvc.colMoves.colAutosize.colFlex.colResize.pivotColsSvc.valueColsSvc.rowGroupColsSvc.funcColsSvc.colNames.colViewport.pivotResultCols.showRowGroupCols.validation`.split(`.`).map((e,t)=>[e,t]));function Xf(e,t){return((e.beanName?Yf[e.beanName]:void 0)??2**53-1)-((t.beanName?Yf[t.beanName]:void 0)??2**53-1)}function Zf(e,t){return e?.beanName===`gridDestroySvc`?-1:t?.beanName===`gridDestroySvc`?1:0}var Qf={tag:`div`,cls:`ag-pinned-left-header`,role:`rowgroup`},$f={tag:`div`,cls:`ag-pinned-right-header`,role:`rowgroup`},ep={tag:`div`,cls:`ag-header-viewport`,role:`presentation`,attrs:{tabindex:`-1`},children:[{tag:`div`,ref:`eCenterContainer`,cls:`ag-header-container`,role:`rowgroup`}]},tp=class extends q{constructor(e){super(),this.eCenterContainer=null,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate(),this.createManagedBean(new Dd(this.pinned)).setComp({setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{let t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}},this.getGui())}selectAndSetTemplate(){let e=this.pinned==`left`,t=this.pinned==`right`,n=e?Qf:t?$f:ep;this.setTemplate(n),this.eRowContainer=this.eCenterContainer===null?this.getGui():this.eCenterContainer}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,r=e=>{let t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),n&&Un(this.eRowContainer,t,n),n=t};e.forEach(e=>{let n=e.instanceId,i=t[n];delete t[n];let a=i||this.createBean(new vd(e));this.headerRowComps[n]=a,this.rowCompsList.push(a),r(a)}),Object.values(t).forEach(e=>this.destroyRowComp(e))}},np={tag:`div`,cls:`ag-header`,role:`presentation`},rp={selector:`AG-HEADER-ROOT`,component:class extends q{constructor(){super(np)}postConstruct(){this.createManagedBean(new ud).setComp({toggleCss:(e,t)=>this.toggleCss(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}},this.getGui(),this.getFocusableElement());let e=e=>{this.createManagedBean(e),this.appendChild(e)};e(new tp(`left`)),e(new tp(null)),e(new tp(`right`))}}},ip=class extends q{constructor(e,t,n,r,i){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=r;let a=F({tag:`div`,role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=a;let o;t.isCellSpanning()?(o=F({tag:`div`,cls:`ag-spanned-cell-wrapper`,role:`presentation`}),o.appendChild(a),this.setTemplateFromElement(o)):this.setTemplateFromElement(a),this.cellCssManager=new io(()=>a),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),t.setComp({toggleCss:(e,t)=>this.cellCssManager.toggleCss(e,t),setUserStyles:e=>Kn(a,e),getFocusableElement:()=>a,setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,n)=>this.setRenderDetails(e,t,n),setEditDetails:(e,t,n)=>this.setEditDetails(e,t,n),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(e,t)=>this.refreshEditStyles(e,t)},a,o,this.eCellWrapper,n,i,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||r)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){let e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,r=n&&this.eCellWrapper==null;r&&(this.eCellWrapper=F({tag:`div`,cls:`ag-cell-wrapper`,role:`presentation`}),this.eCell.appendChild(this.eCellWrapper));let i=!n&&this.eCellWrapper!=null;i&&(zn(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss(`ag-cell-value`,!n);let a=!e&&n,o=a&&this.eCellValue==null;o&&(this.eCellValue=F({tag:`span`,cls:`ag-cell-value`,role:`presentation`}),this.eCellWrapper.appendChild(this.eCellValue));let s=!a&&this.eCellValue!=null;s&&(zn(this.eCellValue),this.eCellValue=void 0);let c=r||i||o||s;return c&&this.removeControls(),!e&&t&&this.addControls(),c}addControls(){let{cellCtrl:e,eCellWrapper:t,eCellValue:n,includeRowDrag:r,includeDndSource:i,includeSelection:a}=this,o=e=>{e&&t.insertBefore(e.getGui(),n)};r&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),o(this.rowDraggingComp)),i&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),o(this.dndSourceComp)),a&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),o(this.checkboxSelectionComp))}createCellEditorInstance(e,t,n){let r=this.editorVersion,i=e.newAgStackInstance(),{params:a}=e;i.then(e=>this.afterCellEditorCreated(r,e,a,t,n)),M(this.cellEditor)&&a.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();Rn(t);let n=Xi(e);n!=null&&(t.textContent=n)}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),zn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;(this.cellEditorPopupWrapper?.getGui().contains(H(this.beans))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),this.hideEditorPopup?.(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),zn(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer?.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let t=this.rendererVersion,n=e=>n=>{if(this.rendererVersion!==t||!this.isAlive())return;let r=e.newAgStackInstance(),i=this.afterCellRendererCreated.bind(this,t,e.componentClass);r?.then(i)},{animationFrameSvc:r}=this.beans,i;if(i=r?.active&&this.firstRender?(e,t=!1)=>{r.createTask(n(e),this.rowNode.rowIndex,`p2`,e.componentFromFramework,t)}:e=>n(e)(),e.params?.deferRender&&!this.cellCtrl.rowNode.group){let{loadingComp:t,onReady:n}=this.cellCtrl.getDeferLoadingCellRenderer();t&&(i(t),n.then(()=>i(e,!0)))}else i(e)}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}this.cellRenderer=n,this.cellRendererClass=t;let r=n.getGui();if(this.cellRendererGui=r,r!=null){let e=this.getParentOfValue();Rn(e),e.appendChild(r)}}afterCellEditorCreated(e,t,n,r,i){let a=e!==this.editorVersion,{context:o}=this.beans;if(a){o.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){o.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){L(97,{colId:this.column.getId()}),o.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let s=r||t.isPopup!==void 0&&t.isPopup();s?this.addPopupCellEditor(n,i):this.addInCellEditor(),this.refreshEditStyles(!0,s),t.afterGuiAttached?.(),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){let{cellCssManager:n}=this;n.toggleCss(`ag-cell-inline-editing`,e&&!t),n.toggleCss(`ag-cell-popup-editing`,e&&!!t),n.toggleCss(`ag-cell-not-inline-editing`,!e||!!t)}addInCellEditor(){let{eCell:e}=this;e.contains(H(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Rn(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){let{gos:n,context:r,popupSvc:i,editSvc:a}=this.beans;n.get(`editType`)===`fullRow`&&L(98);let o=this.cellEditorPopupWrapper=r.createBean(a.createPopupEditorWrapper(e)),{cellEditor:s,cellEditorGui:c,eCell:l,rowNode:u,column:d,cellCtrl:f}=this,p=o.getGui();c&&p.appendChild(c);let m=n.get(`stopEditingWhenCellsLoseFocus`),h={ePopup:p,column:d,rowNode:u,type:`popupCellEditor`,eventSource:l,position:t??s.getPopupPosition?.()??`over`,alignSide:n.get(`enableRtl`)?`right`:`left`,keepWithinBounds:!0},g=i.positionPopupByComponent.bind(i,h),_=i.addPopup({modal:m,eChild:p,closeOnEsc:!0,closedCallback:()=>{f.onPopupEditorClosed()},anchorToElement:l,positionCallback:g,ariaOwns:l});_&&(this.hideEditorPopup=_.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},ap=class extends q{constructor(e,t,n){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;let r=F({tag:`div`,role:`row`,attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(r,n),this.setTemplateFromElement(r);let i=r.style;this.domOrder=this.rowCtrl.getDomOrder(),e.setComp({setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:e=>Kn(r,e),setTop:e=>i.top=e,setTransform:e=>i.transform=e,setRowIndex:e=>r.setAttribute(`row-index`,e),setRowId:e=>r.setAttribute(`row-id`,e),setRowBusinessKey:e=>r.setAttribute(`row-business-key`,e),refreshFullWidth:e=>this.fullWidthCellRenderer?.refresh?.(e())??!1},this.getGui(),n,void 0),this.addDestroyFunc(()=>{e.unsetComp(n)})}setInitialStyle(e,t){let n=this.rowCtrl.getInitialTransform(t);if(n)e.style.setProperty(`transform`,n);else{let n=this.rowCtrl.getInitialRowTop(t);n&&e.style.setProperty(`top`,n)}}showFullWidth(e){e.newAgStackInstance().then(e=>{if(this.isAlive()){let t=e.getGui();this.getGui().appendChild(t),this.rowCtrl.setupDetailRowAutoHeight(t),this.setFullWidthRowComp(e)}else this.beans.context.destroyBean(e)})}setCellCtrls(e){let t=new Map(this.cellComps);for(let n of e){let e=n.instanceId;this.cellComps.has(e)?t.delete(e):this.newCellComp(n)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];for(let n of e){let e=this.cellComps.get(n.instanceId);e&&t.push(e.getGui())}Wn(this.getGui(),t)}newCellComp(e){let t=this.beans.editSvc?.isEditing(e,{withOpenEditor:!0})??!1,n=new ip(this.beans,e,this.rowCtrl.printLayout,this.getGui(),t);this.cellComps.set(e.instanceId,n),this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){for(let t of e.values()){if(!t)return;let e=t.cellCtrl.instanceId;if(this.cellComps.get(e)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(e)}}};function op(e,t,n){let r=!!n.gos.get(`enableCellSpan`)&&!!t.getSpannedRowCtrls,i={tag:`div`,ref:`eContainer`,cls:ju(e),role:`rowgroup`};if(t.type===`center`||r){let t={tag:`div`,ref:`eSpannedContainer`,cls:`ag-spanning-container ${Mu(e)}`,role:`rowgroup`};return{tag:`div`,ref:`eViewport`,cls:`ag-viewport ${Au(e)}`,role:`presentation`,children:[i,r?t:null]}}return i}var sp={selector:`AG-ROW-CONTAINER`,component:class extends q{constructor(e){super(),this.eViewport=null,this.eContainer=null,this.eSpannedContainer=null,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=Nu(this.name)}postConstruct(){this.setTemplate(op(this.name,this.options,this.beans)),this.createManagedBean(new Gu(this.name)).setComp({setHorizontalScroll:e=>this.eViewport.scrollLeft=e,setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:({rowCtrls:e})=>this.setRowCtrls(e),setSpannedRowCtrls:e=>this.setRowCtrls(e,!0),setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>{this.eContainer.style.width=e,this.eSpannedContainer&&(this.eSpannedContainer.style.width=e)},setOffsetTop:e=>{let t=`translateY(${e})`;this.eContainer.style.transform=t,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=t)}},this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){let{beans:n,options:r}=this,i=t?this.eSpannedContainer:this.eContainer,a=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},o={};t?this.rowCompsWithSpan=o:this.rowCompsNoSpan=o,this.lastPlacedElement=null;let s=[];for(let t of e){let e=t.instanceId,i=a[e],c;if(i)c=i,delete a[e];else{if(!t.rowNode.displayed)continue;c=new ap(t,n,r.type)}o[e]=c,s.push([c,!i])}this.removeOldRows(Object.values(a),i),this.addRowNodes(s,i)}addRowNodes(e,t){let{domOrder:n}=this;for(let[r,i]of e){let e=r.getGui();n?this.ensureDomOrder(e,t):i&&t.appendChild(e)}}removeOldRows(e,t){for(let n of e)t.removeChild(n.getGui()),n.destroy()}ensureDomOrder(e,t){Un(t,e,this.lastPlacedElement),this.lastPlacedElement=e}}};function cp(e,t){return t.map(t=>{let n=`e${t[0].toUpperCase()+t.substring(1)}RowContainer`;return e[n]={name:t},{tag:`ag-row-container`,ref:n,attrs:{name:t}}})}function lp(e){let t={};return{paramsMap:t,elementParams:{tag:`div`,ref:`eGridRoot`,cls:`ag-root ag-unselectable`,children:[{tag:`ag-header-root`},{tag:`div`,ref:`eTop`,cls:`ag-floating-top`,role:`presentation`,children:cp(t,[`topLeft`,`topCenter`,`topRight`,`topFullWidth`])},{tag:`div`,ref:`eBody`,cls:`ag-body`,role:`presentation`,children:[{tag:`div`,ref:`eBodyViewport`,cls:`ag-body-viewport`,role:`presentation`,children:cp(t,[`left`,`center`,`right`,`fullWidth`])},{tag:`ag-fake-vertical-scroll`}]},{tag:`div`,ref:`eStickyTop`,cls:`ag-sticky-top`,role:`presentation`,children:cp(t,[`stickyTopLeft`,`stickyTopCenter`,`stickyTopRight`,`stickyTopFullWidth`])},{tag:`div`,ref:`eStickyBottom`,cls:`ag-sticky-bottom`,role:`presentation`,children:cp(t,[`stickyBottomLeft`,`stickyBottomCenter`,`stickyBottomRight`,`stickyBottomFullWidth`])},{tag:`div`,ref:`eBottom`,cls:`ag-floating-bottom`,role:`presentation`,children:cp(t,[`bottomLeft`,`bottomCenter`,`bottomRight`,`bottomFullWidth`])},{tag:`ag-fake-horizontal-scroll`},e?{tag:`ag-overlay-wrapper`}:null]}}}var up={selector:`AG-GRID-BODY`,component:class extends q{constructor(){super(...arguments),this.eGridRoot=null,this.eBodyViewport=null,this.eStickyTop=null,this.eStickyBottom=null,this.eTop=null,this.eBottom=null,this.eBody=null}postConstruct(){let{overlays:e,rangeSvc:t}=this.beans,n=e?.getOverlayWrapperSelector(),{paramsMap:r,elementParams:i}=lp(!!n);this.setTemplate(i,[...n?[n]:[],Qu,ed,rp,sp],r);let a=(e,t)=>{let n=`${e}px`;t.style.minHeight=n,t.style.height=n};this.ctrl=this.createManagedBean(new Yu),this.ctrl.setComp({setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>Zt(this.getGui(),e),setRowCount:e=>Yt(this.getGui(),e),setTopHeight:e=>a(e,this.eTop),setBottomHeight:e=>a(e,this.eBottom),setTopInvisible:e=>this.eTop.classList.toggle(`ag-invisible`,e),setBottomInvisible:e=>this.eBottom.classList.toggle(`ag-invisible`,e),setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>{this.eStickyBottom.style.height=e,this.eStickyBottom.classList.toggle(`ag-invisible`,e===`0px`)},setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.toggleCss(e,t),updateLayoutClasses:(e,t)=>{let n=[this.eBodyViewport.classList,this.eBody.classList];for(let e of n)e.toggle(Jl.AUTO_HEIGHT,t.autoHeight),e.toggle(Jl.NORMAL,t.normal),e.toggle(Jl.PRINT,t.print);this.toggleCss(Jl.AUTO_HEIGHT,t.autoHeight),this.toggleCss(Jl.NORMAL,t.normal),this.toggleCss(Jl.PRINT,t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(Ku,t),registerBodyViewportResizeListener:e=>{let t=nr(this.beans,this.eBodyViewport,e);this.addDestroyFunc(()=>t())},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(n=>n.classList.toggle(e,t))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e,setGridRootRole:e=>Ft(this.eGridRoot,e)},this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&hi(this.gos)||xi(this.gos))&&Jt(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle(`ag-row-animation`,t),n.toggle(`ag-row-no-animation`,!t)}}},dp=class extends W{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute(`grid-id`,this.beans.context.getGridId());let{dragAndDrop:r,ctrlsSvc:i}=this.beans;r?.registerGridDropTarget(()=>this.eGui,this),Uc(this.gos,t),this.createManagedBean(new Yl(this.view)),this.view.setRtlClass(this.gos.get(`enableRtl`)?`ag-rtl`:`ag-ltr`);let a=nr(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),i.register(`gridCtrl`,this)}isDetailGrid(){return yc(this.getGui())?.getAttribute(`row-id`)?.startsWith(`detail`)||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector(`AG-GRID-HEADER-DROP-ZONES`),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector(`AG-STATUS-BAR`),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:`gridSizeChanged`,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){let{view:t}=this;if(e===!1)t.setCursor(null);else{let n=e===1?`ew-resize`:`ns-resize`;t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?`none`:null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:r}=this.getNextFocusableIndex(t,e);if(r<0||r>=t.length)return!1;if(r===0){if(n>0){let{visibleCols:e,focusSvc:t}=this.beans,n=e.allCols,r=K(n);if(t.focusGridView({column:r,backwards:!0}))return!0}return!1}return this.focusContainer(t[r],e)}focusInnerElement(e){let t=this.gos.getCallback(`focusGridInnerElement`);if(t&&t({fromBottom:!!e}))return!0;let n=this.getFocusableContainers(),{focusSvc:r,visibleCols:i}=this.beans,a=i.allCols;if(e){if(n.length>1)return this.focusContainer(K(n),e);let t=K(a);if(r.focusGridView({column:t,backwards:e}))return!0}if(this.gos.get(`headerHeight`)===0||bc(this.beans)){if(r.focusGridView({column:a[0],backwards:e}))return!0;for(let t=1;t<n.length;t++)if(_c(n[t].getGui(),e))return!0;return!1}return r.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:r}=this.getNextFocusableIndex(t,e);if(r===-1||n<0||n>=t.length)return;let i=t[n];i.setAllowFocus?.(!0),setTimeout(()=>{i.setAllowFocus?.(!1)})}isFocusable(){let e=this.beans;return!xc(e)||!bc(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){let n=H(this.beans),r=e.findIndex(e=>e.getGui().contains(n));return{indexWithFocus:r,nextIndex:r+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);let n=_c(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},fp=class extends Gf{constructor(e){super(),this.gridBody=null,this.sideBar=null,this.pagination=null,this.rootWrapperBody=null,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCss(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=e??``,this.getGui().style.webkitUserSelect=e??``},setCursor:e=>{this.getGui().style.cursor=e??``}},t=this.createManagedBean(new dp),n=t.getOptionalSelectors(),r=this.createTemplate(n),i=[up,...Object.values(n).filter(e=>!!e)];this.setTemplate(r,i),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>void 0,focusInnerElement:e=>t.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),lr(this.gos,`Grid removed from DOM`)})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList,{AUTO_HEIGHT:r,NORMAL:i,PRINT:a}=Jl,{autoHeight:o,normal:s,print:c}=t;n.toggle(r,o),n.toggle(i,s),n.toggle(a,c),this.toggleCss(r,o),this.toggleCss(i,s),this.toggleCss(a,c)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?{tag:`ag-grid-header-drop-zones`}:null,n=e.sideBarSelector?{tag:`ag-side-bar`,ref:`sideBar`}:null,r=e.statusBarSelector?{tag:`ag-status-bar`}:null,i=e.watermarkSelector?{tag:`ag-watermark`}:null,a=e.paginationSelector?{tag:`ag-pagination`,ref:`pagination`}:null;return{tag:`div`,cls:`ag-root-wrapper`,role:`presentation`,children:[t,{tag:`div`,ref:`rootWrapperBody`,cls:`ag-root-wrapper-body`,role:`presentation`,children:[{tag:`ag-grid-body`,ref:`gridBody`},n]},r,a,i]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(e=>Vn(e.getGui()))}},$=(e,t)=>{for(let n of Object.keys(t))t[n]=e;return t},pp={dispatchEvent:`CommunityCore`,...$(`CommunityCore`,{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...$(`GridState`,{getState:0,setState:0}),...$(`SharedRowSelection`,{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...$(`RowApi`,{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...$(`ScrollApi`,{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...$(`KeyboardNavigation`,{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...$(`EventApi`,{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...$(`ValueCache`,{expireValueCache:0}),...$(`CellApi`,{getCellValue:0}),...$(`SharedMenu`,{showColumnMenu:0,hidePopupMenu:0}),...$(`Sort`,{onSortChanged:0}),...$(`PinnedRow`,{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...$(`Overlay`,{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...$(`RenderApi`,{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...$(`HighlightChanges`,{flashCells:0}),...$(`RowDrag`,{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...$(`ColumnApi`,{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...$(`ColumnAutoSize`,{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...$(`ColumnGroup`,{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...$(`ColumnMove`,{moveColumnByIndex:0,moveColumns:0}),...$(`ColumnResize`,{setColumnWidths:0}),...$(`ColumnHover`,{isColumnHovered:0}),...$(`EditCore`,{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...$(`BatchEdit`,{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...$(`UndoRedoEdit`,{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...$(`FilterCore`,{isAnyFilterPresent:0,onFilterChanged:0}),...$(`ColumnFilter`,{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...$(`QuickFilter`,{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...$(`Find`,{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...$(`Pagination`,{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...$(`CsrmSsrmSharedApi`,{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...$(`SsrmInfiniteSharedApi`,{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...$(`ClientSideRowModelApi`,{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...$(`CsvExport`,{getDataAsCsv:0,exportDataAsCsv:0}),...$(`InfiniteRowModel`,{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...$(`AdvancedFilter`,{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...$(`IntegratedCharts`,{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...$(`Clipboard`,{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...$(`ExcelExport`,{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...$(`SharedMasterDetail`,{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...$(`ContextMenu`,{showContextMenu:0}),...$(`ColumnMenu`,{showColumnChooser:0,hideColumnChooser:0}),...$(`CellSelection`,{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...$(`SharedRowGrouping`,{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...$(`SharedAggregation`,{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...$(`SharedPivot`,{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...$(`ServerSideRowModelApi`,{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...$(`SideBar`,{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...$(`StatusBar`,{getStatusPanel:0})},mp={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},hp=(e,t)=>e.eventSvc.dispatchEvent(t),gp=class{};Reflect.defineProperty(gp,`name`,{value:`GridApi`});var _p=class extends W{constructor(){super(),this.beanName=`apiFunctionSvc`,this.api=new gp,this.fns={...mp,dispatchEvent:hp},this.preDestroyLink=``;let{api:e}=this;for(let t of Object.keys(pp))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink(`grid-lifecycle/#grid-pre-destroyed`)}addFunction(e,t){let{fns:n,beans:r}=this;n!==mp&&(n[e]=r?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:n,fns:{[e]:r}}=this;return r?r(n,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:n,preDestroyLink:r}=this;if(!t)L(26,{fnName:e,preDestroyLink:r});else{let t=pp[e];n.assertModuleRegistered(t,`api.${e}`)&&L(27,{fnName:e,module:t})}}destroy(){super.destroy(),this.fns=mp,this.beans=null}};function vp(e){return e.context.getGridId()}function yp(e){e.gridDestroySvc.destroy()}function bp(e){return e.gridDestroySvc.destroyCalled}function xp(e,t){return e.gos.get(t)}function Sp(e,t,n){Cp(e,{[t]:n})}function Cp(e,t){e.gos.updateGridOptions({options:t})}function wp(e,t){let n=t.replace(/Module$/,``);return e.gos.isModuleRegistered(n)}var Tp=class extends W{constructor(){super(...arguments),this.beanName=`horizontalResizeSvc`}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.beans.ctrlsSvc.get(`gridCtrl`);e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.beans.ctrlsSvc.get(`gridCtrl`);e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Ep=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){let{rowNode:n,children:r}=e;if(r)for(let e=0;e<r.length;++e)this.depthFirstSearchChangedPath(r[e],t);t(n)}depthFirstSearchEverything(e,t,n){let r=e.childrenAfterGroup;if(r)for(let e=0,i=r.length;e<i;++e){let i=r[e];i.childrenAfterGroup?this.depthFirstSearchEverything(i,t,n):n&&t(i)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let e={rowNode:t,children:null};this.mapToItems[t.id]=e,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(e=>this.nodeIdsToColumns[n.id][e.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let e=0;e<t;e++){let e=this.mapToItems[n.id],t=this.mapToItems[n.parent.id];t.children||=[],t.children.push(e),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(e=>n[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(e=>!n[e.getId()])}},Dp={moduleName:`Drag`,version:I,beans:[Jc]},Op={moduleName:`SharedDragAndDrop`,version:I,beans:[qc],dependsOn:[Dp],userComponents:{agDragAndDropImage:Hd},icons:{columnMovePin:`pin`,columnMoveHide:`eye-slash`,columnMoveMove:`arrows`,columnMoveLeft:`left`,columnMoveRight:`right`,columnMoveGroup:`group`,columnMoveValue:`aggregation`,columnMovePivot:`pivot`,dropNotAllowed:`not-allowed`,rowDrag:`grip`}},kp={moduleName:`HorizontalResize`,version:I,beans:[Tp],dependsOn:[Dp]},Ap=`:where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}`,jp=class extends W{constructor(){super(...arguments),this.beanName=`colAnimation`,this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;let{gos:e}=this;e.get(`suppressColumnMoveAnimation`)||e.get(`enableRtl`)||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){let{executeNextFuncs:n,executeLaterFuncs:r}=this;if(n.length===0&&r.length===0){e(),t();return}let i=e=>{for(;e.length;){let t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),i(n)},0),window.setTimeout(()=>{t(),i(r)},200)})}};function Mp(e,t,n){e.colMoves?.moveColumnByIndex(t,n,`api`)}function Np(e,t,n){e.colMoves?.moveColumns(t,n,`api`)}var Pp=class extends W{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get(`functionsReadOnly`))return;let t=e.dragItem.columns;t&&t.forEach(e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?`pinned`:`move`:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){let{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:r}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,`toolPanelDragAndDrop`),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,`toolPanelDragAndDrop`),this.columnsToPivot.length>0&&r?.addColumns(this.columnsToPivot,`toolPanelDragAndDrop`)}onDragCancel(){this.clearColumnsList()}};function Fp(e,t){!t||t.length<=1||t.filter(t=>e.indexOf(t)<0).length>0||t.sort((t,n)=>e.indexOf(t)-e.indexOf(n))}function Ip(e){let t=[...e];return e.forEach(e=>{let n=null,r=e.getParent();for(;r!=null&&r.getDisplayedLeafColumns().length===1;)n=r,r=r.getParent();n!=null&&(n.getColGroupDef()?.marryChildren?n.getProvidedColumnGroup().getLeafColumns():n.getLeafColumns()).forEach(e=>{t.includes(e)||t.push(e)})}),t}function Lp(e,t,n,r){let i=r.allCols,a=null,o=null;for(let r=0;r<e.length;r++){let s=e[r],c=n.getProposedColumnOrder(t,s);if(!n.doesOrderPassRules(c))continue;let l=c.filter(e=>i.includes(e));if(o===null)o=l;else if(!ca(l,o))break;let u=Vp(c);(a===null||u<a.fragCount)&&(a={move:s,fragCount:u})}return a}function Rp(e){let{isFromHeader:t,fromLeft:n,xPosition:r,fromEnter:i,fakeEvent:a,pinned:o,gos:s,colModel:c,colMoves:l,visibleCols:u}=e,{allMovingColumns:d}=e;t&&(d=Ip(d));let f=d.slice();Fp(c.getCols(),f);let p=Up({movingCols:f,draggingRight:n,xPosition:r,pinned:o,gos:s,colModel:c,visibleCols:u}),m=Bp(f,c);if(p.length===0)return;let h=p[0];if(m!==null&&(t||!i)&&!a&&(!n&&h>=m||n&&h<=m))return;let g=Lp(p,f,l,u);if(!g)return;let _=g.move;if(!(_>c.getCols().length-f.length))return{columns:f,toIndex:_}}function zp(e){let{columns:t,toIndex:n}=Rp(e)||{},{finished:r,colMoves:i}=e;return!t||n==null?null:(i.moveColumns(t,n,`uiColumnMoved`,r),r?null:{columns:t,toIndex:n})}function Bp(e,t){let n=t.getCols(),r=e.map(e=>n.indexOf(e)).sort((e,t)=>e-t),i=r[0];return K(r)-i===r.length-1?i:null}function Vp(e){function t(e){let t=[],n=e.getOriginalParent();for(;n!=null;)t.push(n),n=n.getOriginalParent();return t}let n=0;for(let r=0;r<e.length-1;r++){let i=t(e[r]),a=t(e[r+1]);[i,a]=i.length>a.length?[i,a]:[a,i],i.forEach(e=>{a.indexOf(e)===-1&&n++})}return n}function Hp(e,t){switch(t){case`left`:return e.leftCols;case`right`:return e.rightCols;default:return e.centerCols}}function Up(e){let{movingCols:t,draggingRight:n,xPosition:r,pinned:i,gos:a,colModel:o,visibleCols:s}=e;if(a.get(`suppressMovableColumns`)||t.some(e=>e.getColDef().suppressMovable))return[];let c=Hp(s,i),l=o.getCols(),u=c.filter(e=>t.includes(e)),d=c.filter(e=>!t.includes(e)),f=l.filter(e=>!t.includes(e)),p=0,m=r;if(n){let e=0;u.forEach(t=>e+=t.getActualWidth()),m-=e}if(m>0){for(let e=0;e<d.length;e++){let t=d[e];if(m-=t.getActualWidth(),m<0)break;p++}n&&p++}let h;if(p>0){let e=d[p-1];h=f.indexOf(e)+1}else h=f.indexOf(d[0]),h===-1&&(h=0);let g=[h],_=(e,t)=>e-t;if(n){let e=h+1,t=l.length-1;for(;e<=t;)g.push(e),e++;g.sort(_)}else{let e=h,t=l.length-1,n=l[e];for(;e<=t&&c.indexOf(n)<0;)e++,g.push(e),n=l[e];for(e=h-1;e>=0;)g.push(e),e--;g.sort(_).reverse()}return g}function Wp(e){let{pinned:t,fromKeyboard:n,gos:r,ctrlsSvc:i,useHeaderRow:a,skipScrollPadding:o}=e,s=i.getHeaderRowContainerCtrl(t)?.eViewport,{x:c}=e;return s?(n&&(c-=s.getBoundingClientRect().left),r.get(`enableRtl`)&&(a&&(s=s.querySelector(`.ag-header-row`)),c=s.clientWidth-c),t==null&&!o&&(c+=i.get(`center`).getCenterViewportScrollLeft()),c):0}function Gp(e,t){for(let n of e)n.moving=t,n.dispatchColEvent(`movingChanged`,`uiColumnMoved`)}var Kp=7,qp=100,Jp=qp/2,Yp=5,Xp=100,Zp=class extends W{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!j(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},r=n?.columns??[];for(let t of r){let r=t.getPinned();if(t.getColDef().lockPinned){if(r==e)return`move`;continue}let i=n?.containerType;if(i===e||!e)return`move`;if(e&&(!r||i!==e))return`pinned`}return`notAllowed`}onDragEnter(e){let t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,`uiColumnDragged`);else{let e=t.visibleState,r=(n||[]).filter(t=>e[t.getId()]&&!t.isVisible());this.setColumnsVisible(r,!0,`uiColumnDragged`)}this.gos.get(`suppressMoveWhenColumnDragging`)||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,r=!1){let{gos:i,ctrlsSvc:a}=this.beans,o=i.get(`suppressMoveWhenColumnDragging`);if(r&&!o){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!r&&M(e.hDirection))return;let s=Wp({x:e.x,pinned:this.pinned,gos:i,ctrlsSvc:a});t||this.checkCenterForScrolling(s),o?this.handleColumnDragWhileSuppressingMovement(e,t,n,s,r):this.handleColumnDragWhileAllowingMovement(e,t,n,s,r)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;let r=e.filter(e=>!e.getColDef().lockVisible);r.length&&this.beans.colModel.setColsVisible(r,t,n)}finishColumnMoving(){this.clearHighlighted();let e=this.lastMovedInfo;if(!e)return;let{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,`uiColumnMoved`,!0)}updateDragItemContainerType(){let{lastDraggingEvent:e}=this;if(this.gos.get(`suppressMoveWhenColumnDragging`)||!e)return;let t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,r,i){let a=this.getAllMovingColumns(e,!0);if(i){let e=this.isAttemptingToPin(a);e&&this.attemptToPinColumns(a,void 0,!0);let{fromLeft:r,xPosition:i}=this.getNormalisedXPositionInfo(a,e)||{};if(r==null||i==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:a,xPosition:i,fromEnter:t,fakeEvent:n,fromLeft:r})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(a,r)}}handleColumnDragWhileAllowingMovement(e,t,n,r,i){let a=this.getAllMovingColumns(e),o=this.normaliseDirection(e.hDirection)===`right`,s=e.dragSource.type===1,c=zp({...this.getMoveColumnParams({allMovingColumns:a,isFromHeader:s,xPosition:r,fromLeft:o,fromEnter:t,fakeEvent:n}),finished:i});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let n=e.dragSource.getDragItem(),r=null;return t?(r=n.columnsInSplit,r||=n.columns):r=n.columns,r?r.filter(e=>e.getColDef().lockPinned?e.getPinned()==this.pinned:!0):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:n,xPosition:r,fromLeft:i,fromEnter:a,fakeEvent:o}=e,{gos:s,colModel:c,colMoves:l,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:i,xPosition:r,pinned:this.pinned,fromEnter:a,fakeEvent:o,gos:s,colModel:c,colMoves:l,visibleCols:u}}highlightHoveredColumn(e,t){let{gos:n,colModel:r}=this.beans,i=n.get(`enableRtl`),a=r.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned),o=null,s=null,c=null;for(let e of a){if(s=e.getActualWidth(),o=this.getNormalisedColumnLeft(e,0,i),o!=null){let n=o+s;if(o<=t&&n>=t){c=e;break}}o=null,s=null}if(c)e.indexOf(c)!==-1&&(c=null);else{for(let e=a.length-1;e>=0;e--){let t=a[e],n=a[e].getParent();if(!n){c=t;break}let r=n?.getDisplayedLeafColumns();if(r.length){c=K(r);break}}if(!c)return;o=this.getNormalisedColumnLeft(c,0,i),s=c.getActualWidth()}if(this.lastHighlightedColumn?.column!==c&&this.clearHighlighted(),c==null||o==null||s==null)return;let l;l=t-o<s/2===i?1:0,Qp(c,l),this.lastHighlightedColumn={column:c,position:l}}getNormalisedXPositionInfo(e,t){let{gos:n,visibleCols:r}=this.beans,i=n.get(`enableRtl`),{firstMovingCol:a,column:o,position:s}=this.getColumnMoveAndTargetInfo(e,t,i);if(!a||!o||s==null)return;let c=r.allCols,l=c.indexOf(a),u=c.indexOf(o),d=s===0!==i,f=l<u||l===u&&!d,p=0;if(d?f&&--p:f||(p+=1),u+p===l)return;let m=c[u+p];if(m)return{fromLeft:f,xPosition:this.getNormalisedColumnLeft(m,20,i)}}getColumnMoveAndTargetInfo(e,t,n){let r=this.lastHighlightedColumn||{},{firstMovingCol:i,lastMovingCol:a}=$p(e);if(!i||!a||r.column||!t)return{firstMovingCol:i,...r};let o=this.getPinDirection()===`left`;return{firstMovingCol:i,position:o?1:0,column:o===n?a:i}}normaliseDirection(e){if(this.gos.get(`enableRtl`))switch(e){case`left`:return`right`;case`right`:return`left`}return e}getNormalisedColumnLeft(e,t,n){let{gos:r,ctrlsSvc:i}=this.beans,a=e.getLeft();if(a==null)return null;let o=e.getActualWidth();return Wp({x:n?a+o-t:a+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:r,ctrlsSvc:i})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>Kp;return t&&n||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:n,fromEnter:r,fakeEvent:i,fromLeft:a}=e,{columns:o,toIndex:s}=Rp(this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:a,fromEnter:r,fakeEvent:i}))||{};o&&s!=null&&(this.lastMovedInfo={columns:o,toIndex:s}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:e}=this;e&&(Qp(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.beans.ctrlsSvc.get(`center`),n=t.getCenterViewportScrollLeft(),r=n+t.getCenterWidth(),i,a;this.gos.get(`enableRtl`)?(i=e<n+Jp,a=e>r-Jp):(a=e<n+Jp,i=e>r-Jp),this.needToMoveRight=i,this.needToMoveLeft=a,a||i?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),Xp),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?`left`:`right`,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*Yp,e>qp&&(e=qp);let t=null,n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:e,dragAndDrop:t,gos:n}=this.beans;if(this.failedMoveAttempts<=Kp+1||!e)return;if(t.getDragAndDropImageComponent()?.setIcon(`pinned`,!1),!n.get(`suppressMoveWhenColumnDragging`)){let e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned===`left`)return`left`;if(this.needToMoveRight||this.pinned===`right`)return`right`}attemptToPinColumns(e,t,n=!1){let r=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!r.length)return 0;n&&(t=this.getPinDirection());let{pinnedCols:i,dragAndDrop:a}=this.beans;return i?.setColsPinned(r,t,`uiColumnDragged`),n&&a.nudge(),r.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Qp(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent(`headerHighlightChanged`,`uiColumnMoved`))}function $p(e){let t=e.length,n,r;for(let i=0;i<t;i++){if(!n){let t=e[i];t.getLeft()!=null&&(n=t)}if(!r){let n=e[t-1-i];n.getLeft()!=null&&(r=n)}if(n&&r)break}return{firstMovingCol:n,lastMovingCol:r}}var em=class extends W{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){let{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,e=>{let t,r=e.gridBodyCtrl.eBodyViewport;switch(n){case`left`:t=[[r,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case`right`:t=[[r,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[r,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]];break}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new Zp(n)),this.bodyDropPivotTarget=this.createManagedBean(new Pp(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get(`allowDragFromColumnsToolPanel`)}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},tm=class extends W{constructor(){super(...arguments),this.beanName=`colMoves`}moveColumnByIndex(e,t,n){let r=this.beans.colModel.getCols();if(!r)return;let i=r[e];this.moveColumns([i],t,n)}moveColumns(e,t,n,r=!0){let{colModel:i,colAnimation:a,visibleCols:o,eventSvc:s}=this.beans,c=i.getCols();if(!c)return;if(t>c.length-e.length){L(30,{toIndex:t});return}a?.start();let l=i.getColsForKeys(e);this.doesMovePassRules(l,t)&&(da(i.getCols(),l,t),o.refresh(n),s.dispatchEvent({type:`columnMoved`,columns:l,column:l.length===1?l[0]:null,toIndex:t,finished:r,source:n})),a?.finish()}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){let{colModel:t,gos:n}=this.beans;return!(!Ba(e,t.getColTree())||!(e=>{let t=e=>e?e===`left`||e===!0?-1:1:0,r=n.get(`enableRtl`),i=r?1:-1,a=!0;return e.forEach(e=>{let n=t(e.getColDef().lockPosition);r?n>i&&(a=!1):n<i&&(a=!1),i=n}),a})(e))}getProposedColumnOrder(e,t){let n=this.beans.colModel.getCols().slice();return da(n,e,t),n}createBodyDropTarget(e,t){return new em(e,t)}moveHeader(e,t,n,r,i){let{ctrlsSvc:a,gos:o,colModel:s,visibleCols:c,focusSvc:l}=this.beans,u=t.getBoundingClientRect(),d=u.left,f=Z(n),p=f?u.width:n.getActualWidth(),m=e===`left`!==o.get(`enableRtl`),h=Wp({x:m?d-20:d+p+20,pinned:r,fromKeyboard:!0,gos:o,ctrlsSvc:a}),g=l.focusedHeader;zp({allMovingColumns:f?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e===`right`,xPosition:h,pinned:r,fromEnter:!1,fakeEvent:!1,gos:o,colModel:s,colMoves:this,visibleCols:c,finished:!0});let _;if(f){let e=n.getDisplayedLeafColumns();_=m?e[0]:K(e)}else _=n;if(a.getScrollFeature().ensureColumnVisible(_,`auto`),(!i.isAlive()||o.get(`ensureDomOrder`))&&g){let e;if(f){let t=n.getGroupId(),r=n.getLeafColumns();if(!r.length)return;let i=r[0].getParent();if(!i)return;e=nm(i,t)}else e=n;e&&l.focusHeaderPosition({headerPosition:{...g,column:e}})}}setDragSourceForHeader(e,t,n){let{gos:r,colModel:i,dragAndDrop:a,visibleCols:o}=this.beans,s=!r.get(`suppressDragLeaveHidesColumns`),c=Z(t),l=c?t.getProvidedColumnGroup().getLeafColumns():[t],u={type:1,eElement:e,getDefaultIconName:()=>s?`hide`:`notAllowed`,getDragItem:c?()=>im(t,o.allCols):()=>rm(t),dragItemName:n,onDragStarted:()=>{s=!r.get(`suppressDragLeaveHidesColumns`),Gp(l,!0)},onDragStopped:()=>Gp(l,!1),onDragCancelled:()=>Gp(l,!1),onGridEnter:e=>{if(s){let{columns:t=[],visibleState:n}=e??{},r=c?e=>!n||n[e.getColId()]:()=>!0,a=t.filter(e=>!e.getColDef().lockVisible&&r(e));i.setColsVisible(a,!0,`uiColumnMoved`)}},onGridExit:e=>{if(s){let t=e?.columns?.filter(e=>!e.getColDef().lockVisible)||[];i.setColsVisible(t,!1,`uiColumnMoved`)}}};return a.addDragSource(u,!0),u}};function nm(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function rm(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function im(e,t){let n=e.getProvidedColumnGroup().getLeafColumns(),r={};n.forEach(e=>r[e.getId()]=e.isVisible());let i=[];t.forEach(e=>{n.indexOf(e)>=0&&(i.push(e),ua(n,e))}),n.forEach(e=>i.push(e));let a=[],o=e.getLeafColumns();for(let e of i)o.indexOf(e)!==-1&&a.push(e);return{columns:i,columnsInSplit:a,visibleState:r,containerType:a[0]?.pinned}}var am={moduleName:`ColumnMove`,version:I,beans:[tm,jp],apiFunctions:{moveColumnByIndex:Mp,moveColumns:Np},dependsOn:[Op],css:[Ap]},om={moduleName:`AutoWidth`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`autoWidthCalc`}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let r=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||r.push(n),this.getPreferredWidthForElements(r)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){let n=document.createElement(`form`);n.style.position=`fixed`;let r=this.centerRowContainerCtrl.eContainer;e.forEach(e=>this.cloneItemIntoDummy(e,n)),r.appendChild(n);let i=n.offsetWidth;return r.removeChild(n),t??=this.gos.get(`autoSizePadding`),i+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{let r=n.getHtmlElementForColumnHeader(e);r!=null&&(t=r)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width=``,n.style.position=`static`,n.style.left=``;let r=document.createElement(`div`),i=r.classList;[`ag-header-cell`,`ag-header-group-cell`].some(e=>n.classList.contains(e))?(i.add(`ag-header`,`ag-header-row`),r.style.position=`static`):i.add(`ag-row`);let a=e.parentElement;for(;a;){if([`ag-header-row`,`ag-row`].some(e=>a.classList.contains(e))){for(let e=0;e<a.classList.length;e++){let t=a.classList[e];t!=`ag-row-position-absolute`&&i.add(t)}break}a=a.parentElement}r.appendChild(n),t.appendChild(r)}}]};function sm(e,t,n=!0,r=`api`){e.colResize?.setColumnWidths(t,!1,n,r)}var cm=class extends W{constructor(e,t,n,r){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,r=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(r),!t.get(`suppressAutoSize`)&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit(`uiColumnResized`)))}onResizeStart(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:r,groupAfterColumns:i,groupAfterStartWidth:a,groupAfterRatios:o}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=r,this.resizeTakeFromCols=i,this.resizeTakeFromStartWidth=a,this.resizeTakeFromRatios=o,this.toggleColumnResizing(!0)}onResizing(e,t,n=`uiColumnResized`){let r=this.normaliseDragChange(t),i=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(i,n,e)}getInitialValues(e){let t=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),n=(e,t)=>e.map(e=>e.getActualWidth()/t),r=this.getColumnsToResize(),i=t(r),a={columnsToResize:r,resizeStartWidth:i,resizeRatios:n(r,i)},o=null;if(e&&(o=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,`After`)??null),o){let e=a.groupAfterColumns=o.getDisplayedLeafColumns().filter(e=>e.isResizable());a.groupAfterRatios=n(e,a.groupAfterStartWidth=t(e))}else a.groupAfterColumns=void 0,a.groupAfterStartWidth=void 0,a.groupAfterRatios=void 0;return a}resizeLeafColumnsToFit(e){let t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let r={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(r,e,t,n)}resizeColumns(e,t,n,r=!0){let{columnsToResize:i,resizeStartWidth:a,resizeRatios:o,groupAfterColumns:s,groupAfterStartWidth:c,groupAfterRatios:l}=e,u=[];if(u.push({columns:i,ratios:o,width:t}),s){let e=t-a;u.push({columns:s,ratios:l,width:c-e})}this.beans.colResize?.resizeColumnSets({resizeSets:u,finished:r,source:n}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss(`ag-column-resizing`,e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get(`enableRtl`)?this.pinned!==`left`&&(t*=-1):this.pinned===`right`&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},lm=class extends W{constructor(e,t,n,r,i){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=r,this.ctrl=i}postConstruct(){let e=[],t,n,r=()=>{if(P(this.eResize,t),!t)return;let{horizontalResizeSvc:r,colAutosize:i}=this.beans,a=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(a),n&&i&&e.push(i.addColumnAutosize(this.eResize,this.column))},i=()=>{e.forEach(e=>e()),e.length=0},a=()=>{let e=this.column.isResizable(),a=!this.gos.get(`suppressAutoSize`)&&!this.column.getColDef().suppressAutoSize;(e!==t||a!==n)&&(t=e,n=a,i(),r())};a(),this.addDestroyFunc(i),this.ctrl.setRefreshFunction(`resize`,a)}onResizing(e,t){let{column:n,lastResizeAmount:r,resizeStartWidth:i,beans:a}=this,o=this.normaliseResizeAmount(t),s=[{key:n,newWidth:i+o}],{pinnedCols:c,ctrlsSvc:l,colResize:u}=a;if(this.column.getPinned()){let e=c?.leftWidth??0,t=c?.rightWidth??0,n=Mn(l.getGridBodyCtrl().eBodyViewport)-50;if(e+t+(o-r)>n)return}this.lastResizeAmount=o,u?.setColumnWidths(s,this.resizeWithShiftKey,e,`uiColumnResized`),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss(`ag-column-resizing`,e)}normaliseResizeAmount(e){let t=e,n=this.pinned!==`left`,r=this.pinned===`right`;return this.gos.get(`enableRtl`)?n&&(t*=-1):r&&(t*=-1),t}},um=class extends W{constructor(){super(...arguments),this.beanName=`colResize`}setColumnWidths(e,t,n,r){let i=[],{colModel:a,gos:o,visibleCols:s}=this.beans;e.forEach(e=>{let n=a.getColDefCol(e.key)||a.getCol(e.key);if(n&&(i.push({width:e.newWidth,ratios:[1],columns:[n]}),o.get(`colResizeDefault`)===`shift`&&(t=!t),t)){let t=s.getColAfter(n);if(!t)return;let r=n.getActualWidth()-e.newWidth,a=t.getActualWidth()+r;i.push({width:a,ratios:[1],columns:[t]})}}),i.length!==0&&this.resizeColumnSets({resizeSets:i,finished:n,source:r})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:r}=e;if(!(!t||t.every(e=>dm(e)))){if(n){let e=t&&t.length>0?t[0].columns:null;Ga(this.eventSvc,e,n,r)}return}let i=[],a=[];t.forEach(e=>{let{width:t,columns:n,ratios:o}=e,s={},c={};n.forEach(e=>a.push(e));let l=!0,u=0;for(;l;){if(u++,u>1e3){R(31);break}l=!1;let e=[],r=0,i=t;n.forEach((t,n)=>{if(c[t.getId()])i-=s[t.getId()];else{e.push(t);let i=o[n];r+=i}});let a=1/r;e.forEach((n,r)=>{let u=r===e.length-1,d;u?d=i:(d=Math.round(o[r]*t*a),i-=d);let f=n.getMinWidth(),p=n.getMaxWidth();d<f?(d=f,c[n.getId()]=!0,l=!0):p>0&&d>p&&(d=p,c[n.getId()]=!0,l=!0),s[n.getId()]=d})}n.forEach(e=>{let t=s[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,r),i.push(e))})});let o=i.length>0,s=[];if(o){let{colFlex:e,visibleCols:t,colViewport:n}=this.beans;s=e?.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0})??[],t.setLeftValues(r),t.updateBodyWidths(),n.checkViewportColumns()}let c=a.concat(s);(o||n)&&Ga(this.eventSvc,c,n,r,s)}resizeHeader(e,t,n){if(!e.isResizable())return;let r=e.getActualWidth(),i=e.getMinWidth(),a=e.getMaxWidth(),o=Math.min(Math.max(r+t,i),a);this.setColumnWidths([{key:e,newWidth:o}],n,!0,`uiColumnResized`)}createResizeFeature(e,t,n,r,i){return new lm(e,t,n,r,i)}createGroupResizeFeature(e,t,n,r){return new cm(e,t,n,r)}};function dm(e){let{columns:t,width:n}=e,r=0,i=0,a=!0;return t.forEach(e=>{let t=e.getMinWidth();r+=t||0;let n=e.getMaxWidth();n>0?i+=n:a=!1}),n>=r&&(!a||n<=i)}var fm={moduleName:`ColumnResize`,version:I,beans:[um],apiFunctions:{setColumnWidths:sm},dependsOn:[kp,om]},pm=class extends W{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener(`widthChanged`,e),t.__addEventListener(`visibleChanged`,e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener(`widthChanged`,e),t.__removeEventListener(`visibleChanged`,e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss(`ag-hidden`,e===0)}},mm=class extends Sd{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,n,r,i){let{column:a,beans:o}=this,{context:s,colNames:c,colHover:l,rangeSvc:u,colResize:d}=o;this.comp=e,i=ro(this,s,i),this.setGui(t,i),this.displayName=c.getDisplayNameForColumnGroup(a,`header`),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(i),this.setupExpandable(i),this.setupTooltip(),this.setupAutoHeight({wrapperElement:r,compBean:i}),this.setupUserComp(),this.addHeaderMouseListeners(i),this.addManagedPropertyListener(`groupHeaderHeight`,this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let f=this.rowCtrl.pinned,p=a.getProvidedColumnGroup().getLeafColumns();l?.createHoverFeature(i,p,t),u?.createRangeHighlightFeature(i,a,e),i.createManagedBean(new yd(a,t,o)),i.createManagedBean(new pm(e,a)),d?this.resizeFeature=i.createManagedBean(d.createGroupResizeFeature(e,n,f,a)):e.setResizableDisplayed(!1),i.createManagedBean(new Wl(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>void 0,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(i,p),i.addManagedPropertyListener(`suppressMovableColumns`,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(i),i.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.getDefinition();return U(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,n=e.get(`groupHeaderHeight`);n==null?(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null)):n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n)}addHighlightListeners(e,t){if(this.beans.gos.get(`suppressMoveWhenColumnDragging`))for(let n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),n=t[0]===e,r=K(t)===e;if(!n&&!r)return;let i=e.getHighlighted(),a=!!this.rowCtrl.getHeaderCellCtrls().find(e=>e.column.isMoving()),o=!1,s=!1;if(a){let e=this.beans.gos.get(`enableRtl`),t=i===1,a=i===0;n&&(e?s=t:o=a),r&&(e?o=a:s=t)}this.comp.toggleCss(`ag-header-highlight-before`,o),this.comp.toggleCss(`ag-header-highlight-after`,s)}resizeHeader(e,t){let{resizeFeature:n}=this;if(!n)return;let r=n.getInitialValues(t);n.resizeColumns(r,r.resizeStartWidth+e,`uiColumnResized`,!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){let{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:r}=this.beans,i=this.column,a=i.getProvidedColumnGroup(),o=Mo(t,U(n,{displayName:this.displayName,columnGroup:i,setExpanded:t=>{e.setColumnGroupOpened(a,t,`gridInitializing`)},setTooltip:(e,t)=>{n.assertModuleRegistered(`Tooltip`,3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>r?.showMenuAfterButtonClick(a,e,`columnMenu`,t),showColumnMenuAfterMouseClick:(e,t)=>r?.showMenuAfterMouseEvent(a,e,`columnMenu`,t),eGridHeader:this.eGui}));o&&this.comp.setUserCompDetails(o)}addHeaderMouseListeners(e){let t=e=>this.handleMouseOverChange(e.type===`mouseenter`);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent(`columnHeaderClicked`,this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?`columnHeaderMouseOver`:`columnHeaderMouseLeave`,column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?`true`:`false`):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:e}=this,t=e.getColGroupDef(),n=rc(t,this.gos,null,e);e.isPadding()?(n.push(`ag-header-group-cell-no-group`),e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&n.push(`ag-header-span-height`)):(n.push(`ag-header-group-cell-with-group`),t?.wrapHeaderText&&n.push(`ag-header-cell-wrap-text`)),n.forEach(e=>this.comp.toggleCss(e,!0))}setupMovingCss(e){let{column:t}=this,n=t.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss(`ag-header-cell-moving`,t.isMoving());n.forEach(t=>{e.addManagedListeners(t,{movingChanged:r})}),r()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===X.ENTER){let e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,`uiColumnExpanded`)}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get(`suppressMovableColumns`)||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function hm(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,`api`)}function gm(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function _m(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function vm(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||``}function ym(e){return e.colGroupSvc?.getColumnGroupState()??[]}function bm(e,t){e.colGroupSvc?.setColumnGroupState(t,`api`)}function xm(e){e.colGroupSvc?.resetColumnGroupState(`api`)}function Sm(e){return e.visibleCols.treeLeft}function Cm(e){return e.visibleCols.treeCenter}function wm(e){return e.visibleCols.treeRight}function Tm(e){return e.visibleCols.getAllTrees()}function Em(e,t){for(let n=0;n<t.length;n++){let r=e.indexOf(t[n]);r>=0&&(e[r]=e[e.length-1],e.pop())}}var Dm=class extends W{constructor(){super(...arguments),this.beanName=`visibleCols`,this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){let{colFlex:n,colModel:r,colGroupSvc:i,colViewport:a,selectionColSvc:o}=this.beans;t||this.buildTrees(r,i),i?.updateOpenClosedVisibility(),this.leftCols=km(this.treeLeft),this.centerCols=km(this.treeCenter),this.rightCols=km(this.treeRight),o?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(r),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(r,this.leftCols,this.rightCols,e),a.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:`displayedColumnsChanged`,source:e})}getHeaderRowCount(){if(!this.gos.get(`hidePaddedHeaderRows`))return this.beans.colModel.cols.treeDepth;let e=0;for(let t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){let t=n.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}n=n.getParent()}}return e}updateBodyWidths(){let e=ha(this.centerCols),t=ha(this.leftCols),n=ha(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:`columnContainerWidthChanged`}),this.eventSvc.dispatchEvent({type:`displayedColumnsWidthChanged`}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,r){let i,a;this.gos.get(`enableRtl`)?(i=t?t[0]:null,a=n?K(n):null):(i=t?K(t):null,a=n?n[0]:null),e.getCols().forEach(e=>{e.setLastLeftPinned(e===i,r),e.setFirstRightPinned(e===a,r)})}buildTrees(e,t){let n=e.getColsToShow(),r=n.filter(e=>e.getPinned()==`left`),i=n.filter(e=>e.getPinned()==`right`),a=n.filter(e=>e.getPinned()!=`left`&&e.getPinned()!=`right`),o=new no,s=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=s({columns:r,idCreator:o,pinned:`left`,oldDisplayedGroups:this.treeLeft}),this.treeRight=s({columns:i,idCreator:o,pinned:`right`,oldDisplayedGroups:this.treeRight}),this.treeCenter=s({columns:a,idCreator:o,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){let t=e.getCols(),n=[],r=[],i=[];for(let e of t){let t=e.getPinned();t?t===!0||t===`left`?n.push(e):i.push(e):r.push(e)}this.ariaOrderColumns=n.concat(r).concat(i)}getAriaColIndex(e){let t;return t=Z(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(e=>{Z(e)&&e.checkLeft()})})}setLeftValuesOfCols(e){let{colModel:t}=this.beans;if(!t.getColDefCols())return;let n=t.getCols().slice(0),r=this.gos.get(`enableRtl`);[this.leftCols,this.rightCols,this.centerCols].forEach(t=>{if(r){let n=ha(t);t.forEach(t=>{n-=t.getActualWidth(),t.setLeft(n,e)})}else{let n=0;t.forEach(t=>{t.setLeft(n,e),n+=t.getActualWidth()})}Em(n,t)}),n.forEach(t=>{t.setLeft(null,e)})}joinCols(){this.gos.get(`enableRtl`)?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){let{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){let{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,r){let i=[],a=null;for(let o=0;o<t.length;o++){let s=t[o],c=t.length-o,l=Math.min(s.getColSpan(e),c),u=[s];if(l>1){let e=l-1;for(let n=1;n<=e;n++)u.push(t[o+n]);o+=e}let d;n?(d=!1,u.forEach(e=>{n(e)&&(d=!0)})):d=!0,d&&(i.length===0&&a&&r&&r(s)&&i.push(a),i.push(s)),a=s}return i}getContainerWidth(e){switch(e){case`left`:return this.leftWidth;case`right`:return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){let t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Om(this.treeCenter,!1,e),Om(this.treeLeft,!1,e),Om(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){let e=this.gos.get(`enableRtl`),t=[`leftCols`,`centerCols`,`rightCols`];e&&t.reverse();for(let n=0;n<t.length;n++){let r=this[t[n]];if(r.length)return e?K(r):r[0]}return null}getColAfter(e){let t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return ha(this.leftCols)}getDisplayedColumnsRightWidth(){return ha(this.rightCols)}isColAtEdge(e,t){let n=this.allCols;if(!n.length)return!1;let r=t===`first`,i;if(Z(e)){let t=e.getDisplayedLeafColumns();if(!t.length)return!1;i=r?t[0]:K(t)}else i=e;return(r?n[0]:K(n))===i}};function Om(e,t,n){if(e)for(let r=0;r<e.length;r++){let i=e[r];Z(i)&&Om(t?i.getDisplayedChildren():i.getChildren(),t,n),n(i)}}function km(e){let t=[];return Om(e,!0,e=>{ta(e)&&t.push(e)}),t}var Am={moduleName:`ColumnGroup`,version:I,dynamicBeans:{headerGroupCellCtrl:mm},beans:[class extends W{constructor(){super(...arguments),this.beanName=`colGroupSvc`}getColumnGroupState(){let e=[];return Ra(null,this.beans.colModel.getColTree(),t=>{G(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){let t=this.beans.colModel.getColDefColTree();if(!t)return;let n=[];Ra(null,t,e=>{if(G(e)){let t=e.getColGroupDef(),r={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){let{colModel:n,colAnimation:r,visibleCols:i,eventSvc:a}=this.beans;if(!n.getColTree().length)return;r?.start();let o=[];e.forEach(e=>{let t=e.groupId,n=e.open,r=this.getProvidedColGroup(t);r&&r.isExpanded()!==n&&(r.setExpanded(n),o.push(r))}),i.refresh(t,!0),o.length&&a.dispatchEvent({type:`columnGroupOpened`,columnGroup:o.length===1?o[0]:void 0,columnGroups:o}),r?.finish()}setColumnGroupOpened(e,t,n){let r;r=G(e)?e.getId():e||``,this.setColumnGroupState([{groupId:r,open:t}],n)}getProvidedColGroup(e){let t=null;return Ra(null,this.beans.colModel.getColTree(),n=>{G(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),i=t===`After`?K(r):r[0],a=`getCol${t}`;for(;;){let t=this.beans.visibleCols[a](i);if(!t)return null;let r=this.getColGroupAtLevel(t,n);if(r!==e)return r}}getColGroupAtLevel(e,t){let n=e.getParent(),r,i;for(;r=n.getProvidedColumnGroup().getLevel(),i=n.getPaddingLevel(),!(r+i<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){Om(this.beans.visibleCols.getAllTrees(),!1,e=>{Z(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Z(e))return e;let n=this.beans.visibleCols.getAllTrees(),r=typeof t==`number`,i=null;return Om(n,!1,n=>{if(Z(n)){let a=n,o;o=r?e===a.getGroupId()&&t===a.getPartId():e===a.getGroupId(),o&&(i=a)}}),i}createColumnGroups(e){let{columns:t,idCreator:n,pinned:r,oldDisplayedGroups:i,isStandaloneStructure:a}=e,o=this.mapOldGroupsById(i),s=[],c=t;for(;c.length;){let e=c;c=[];let t=0,i=i=>{let l=t;t=i;let u=e[l],d=(Z(u)?u.getProvidedColumnGroup():u).getOriginalParent();if(d==null){for(let t=l;t<i;t++)s.push(e[t]);return}let f=this.createColumnGroup(d,n,o,r,a);for(let t=l;t<i;t++)f.addChild(e[t]);c.push(f)};for(let n=1;n<e.length;n++){let r=e[n],a=(Z(r)?r.getProvidedColumnGroup():r).getOriginalParent(),o=e[t];a!==(Z(o)?o.getProvidedColumnGroup():o).getOriginalParent()&&i(n)}t<e.length&&i(e.length)}return a||this.setupParentsIntoCols(s,null),s}createProvidedColumnGroup(e,t,n,r,i,a,o){let s=i.getUniqueKey(t.groupId||null,null),c=aa(this.beans,t,s),l=new ra(c,s,!1,n);this.createBean(l);let u=this.findExistingGroup(t,a);u&&a.splice(u.idx,1);let d=u?.group;d&&l.setExpanded(d.isExpanded());let f=ka(this.beans,c.children,n+1,e,r,i,a,o);return l.setChildren(f),l}balanceColumnTree(e,t,n,r){let i=[];for(let a=0;a<e.length;a++){let o=e[a];if(G(o)){let e=o,a=this.balanceColumnTree(e.getChildren(),t+1,n,r);e.setChildren(a),i.push(e)}else{let a,s;for(let e=t;e<n;e++){let t=r.getUniqueKey(null,null),n=new ra(aa(this.beans,null,t),t,!0,e);this.createBean(n),s&&s.setChildren([n]),s=n,a||=s}if(a&&s)if(i.push(a),e.some(e=>G(e))){s.setChildren([o]);continue}else{s.setChildren(e);break}i.push(o)}}return i}findDepth(e){let t=0,n=e;for(;n&&n[0]&&G(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let r=0;r<e.length;r++){let i=e[r];if(G(i)){let e=i,r=this.findMaxDepth(e.getChildren(),t+1);n<r&&(n=r)}}return n}balanceTreeForAutoCols(e,t){let n=[];return e.forEach(e=>{let r=e;for(let n=t-1;n>=0;n--){let t=new ra(null,`FAKE_PATH_${e.getId()}}_${n}`,!0,n);this.createBean(t),t.setChildren([r]),r.originalParent=t,r=t}t===0&&(e.originalParent=null),n.push(r)}),n}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){let r=t[n];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:n,group:r}}}createColumnGroup(e,t,n,r,i){let a=e.getGroupId(),o=t.getInstanceIdForKey(a),s=n[Yc(a,o)];return s&&s.getProvidedColumnGroup()!==e&&(s=null),j(s)?s.reset():(s=new Xc(e,a,o,r),i||this.createBean(s)),s}mapOldGroupsById(e){let t={},n=e=>{e.forEach(e=>{if(Z(e)){let r=e;t[e.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(e=>{if(e.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=``),e.parent=t,Z(e)){let t=e;this.setupParentsIntoCols(t.getChildren(),t)}})}}],apiFunctions:{getAllDisplayedColumnGroups:Tm,getCenterDisplayedColumnGroups:Cm,getColumnGroup:gm,getColumnGroupState:ym,getDisplayNameForColumnGroup:vm,getLeftDisplayedColumnGroups:Sm,getProvidedColumnGroup:_m,getRightDisplayedColumnGroups:wm,resetColumnGroupState:xm,setColumnGroupOpened:hm,setColumnGroupState:bm}},jm={tag:`div`,cls:`ag-skeleton-container`},Mm=class extends q{constructor(){super(jm)}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute(`id`,t),this.addDestroyFunc(()=>zt(e.eParentOfValue)),zt(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.getLocaleTextFunc();this.getGui().textContent=e(`loadingError`,`ERR`);let t=e(`ariaSkeletonCellLoadingFailed`,`Row failed to load`);Rt(this.getGui(),t)}setupLoading(e){let t=F({tag:`div`,cls:`ag-skeleton-effect`}),n=e.node.rowIndex;if(n!=null){let e=75+25*(n%2==0?Math.sin(n):Math.cos(n));t.style.width=`${e}%`}this.getGui().appendChild(t);let r=this.getLocaleTextFunc(),i=e.deferRender?r(`ariaDeferSkeletonCellLoading`,`Cell is loading`):r(`ariaSkeletonCellLoading`,`Row data is loading`);Rt(this.getGui(),i)}refresh(e){return!1}},Nm={moduleName:`CheckboxCellRenderer`,version:I,userComponents:{agCheckboxCellRenderer:Qd}},Pm={moduleName:`SkeletonCellRenderer`,version:I,userComponents:{agSkeletonCellRenderer:Mm}};function Fm(e,t){let n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function Im(e){return e.colModel.getColumnDefs()}function Lm(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||``}function Rm(e,t){return e.colModel.getColDefCol(t)}function zm(e){return e.colModel.getColDefCols()}function Bm(e,t){return Ka(e,t,`api`)}function Vm(e){return Ya(e)}function Hm(e){qa(e,`api`)}function Um(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function Wm(e){return e.visibleCols.isPinningLeft()}function Gm(e){return e.visibleCols.isPinningRight()}function Km(e,t){return e.visibleCols.getColAfter(t)}function qm(e,t){return e.visibleCols.getColBefore(t)}function Jm(e,t,n){e.colModel.setColsVisible(t,n,`api`)}function Ym(e,t,n){e.pinnedCols?.setColsPinned(t,n,`api`)}function Xm(e){return e.colModel.getCols()}function Zm(e){return e.visibleCols.leftCols}function Qm(e){return e.visibleCols.centerCols}function $m(e){return e.visibleCols.rightCols}function eh(e){return e.visibleCols.allCols}function th(e){return e.colViewport.getViewportColumns()}function nh(e,t){if(!e)return;let n=e,r={};return Object.keys(n).forEach(e=>{if(t&&t.indexOf(e)>=0||wt.has(e))return;let i=n[e];typeof i==`object`&&i&&i.constructor===Object?r[e]=nh(i):r[e]=i}),r}var rh=class extends W{constructor(){super(...arguments),this.beanName=`colDefFactory`}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,r){let i=e.slice();t?i.sort((e,t)=>n.indexOf(e)-n.indexOf(t)):n&&i.sort((e,t)=>r.indexOf(e)-r.indexOf(t));let a=this.rowGroupColsSvc?.columns,o=this.pivotColsSvc?.columns;return this.buildColumnDefs(i,a,o)}buildColumnDefs(e,t=[],n=[]){let r=[],i={};return e.forEach(e=>{let a=this.createDefFromColumn(e,t,n),o=!0,s=a,c=e.getOriginalParent(),l=null;for(;c;){let e=null;if(c.isPadding()){c=c.getOriginalParent();continue}let t=i[c.getGroupId()];if(t){t.children.push(s),o=!1;break}if(e=this.createDefFromGroup(c),e&&(e.children=[s],i[e.groupId]=e,s=e,c=c.getOriginalParent()),c!=null&&l===c){o=!1;break}l=c}o&&r.push(s)}),r}createDefFromGroup(e){let t=nh(e.getColGroupDef(),[`children`]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let r=nh(e.getColDef());return r.colId=e.getColId(),r.width=e.getActualWidth(),r.rowGroup=e.isRowGroupActive(),r.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,r.pivot=e.isPivotActive(),r.pivotIndex=e.isPivotActive()?n.indexOf(e):null,r.aggFunc=e.isValueActive()?e.getAggFunc():null,r.hide=e.isVisible()?void 0:!0,r.pinned=e.isPinned()?e.getPinned():null,r.sort=e.getSort()?e.getSort():null,r.sortIndex=e.getSortIndex()==null?null:e.getSortIndex(),r}},ih=class extends W{constructor(){super(...arguments),this.beanName=`colFlex`}refreshFlexedColumns(e={}){let t=e.source??`flex`;e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);let n=this.flexViewportWidth;if(!n)return[];let{visibleCols:r}=this.beans,i=r.centerCols,a=-1;if(e.resizingCols){let t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){a=e;break}}let o=!1,s=i.map((e,t)=>{let n=e.getFlex(),r=n!=null&&n>0&&t>a;return o||=r,{col:e,isFlex:r,flex:Math.max(0,n??0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(!o)return[];let c=s.length,l=s.reduce((e,t)=>e+t.flex,0),u=n,d=(e,n)=>{e.frozenSize=n,e.col.setActualWidth(n,t),u-=n,l-=e.flex,--c},f=e=>e.frozenSize!=null;for(let e of s)e.isFlex||d(e,e.initialSize);for(;c>0;){let e=Math.round(l<1?u*l:u),t,n=0,r=0;for(let i of s){if(f(i))continue;t=i,r+=e*(i.flex/l);let a=r-n,o=Math.round(a);i.targetSize=o,n+=o}t&&(t.targetSize+=e-n);let i=0;for(let e of s){if(f(e))continue;let t=e.targetSize,n=Math.min(Math.max(t,e.min),e.max);i+=n-t,e.violationType=n===t?void 0:n<t?`max`:`min`,e.targetSize=n}let a=i===0?`all`:i>0?`min`:`max`;for(let e of s)f(e)||(a===`all`||e.violationType===a)&&d(e,e.targetSize)}e.skipSetLeft||r.setLeftValues(t),e.updateBodyWidths&&r.updateBodyWidths();let p=s.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(e.fireResizedEvent){let e=s.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),n=s.filter(e=>e.flex).map(e=>e.col);Ga(this.eventSvc,e,!0,t,n)}return p}initCol(e){let{flex:t,initialFlex:n}=e.colDef;t===void 0?n!==void 0&&(e.flex=n):e.flex=t}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent(`flex`)}},ah=[`dateTimeString`,`dateString`,`text`,`number`,`boolean`,`date`],oh=class extends W{constructor(){super(...arguments),this.beanName=`dataTypeSvc`,this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:`agNumberCellEditor`}},boolean(){return{cellEditor:`agCheckboxCellEditor`,cellRenderer:`agCheckboxCellRenderer`,getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===X.SPACE}},date({formatValue:e}){return{cellEditor:`agDateCellEditor`,keyCreator:e}},dateString({formatValue:e}){return{cellEditor:`agDateStringCellEditor`,keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(r,i)=>{let a=t.getColDefCol(n),o=a?.getColDef();if(!a||!o)return 0;let s=r==null?``:e({column:a,node:null,value:r}),c=i==null?``:e({column:a,node:null,value:i});return s===c?0:s>c?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener(`dataTypeDefinitions`,e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes(),t={},n={},r=e=>t=>{let{column:n,node:r,value:i}=t,a=n.getColDef().valueFormatter;return a===e.groupSafeValueFormatter&&(a=e.valueFormatter),this.beans.valueSvc.formatValue(n,r,i,a)};for(let i of Object.keys(e)){let a=e[i],o={...a,groupSafeValueFormatter:lh(a,this.gos)};t[i]=o,n[i]=r(o)}let i=this.gos.get(`dataTypeDefinitions`)??{},a={};for(let o of Object.keys(i)){let s=i[o],c=this.processDataTypeDefinition(s,i,[o],e);c&&(t[o]=c,s.dataTypeMatcher&&(a[o]=s.dataTypeMatcher),n[o]=r(c))}let{valueParser:o,valueFormatter:s}=e.object,{valueParser:c,valueFormatter:l}=t.object;this.hasObjectValueParser=c!==o,this.hasObjectValueFormatter=l!==s,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(a,e)}sortKeysInMatchers(e,t){let n={...e};for(let r of ah)delete n[r],n[r]=e[r]??t[r].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,r){let i,a=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let n=r[a],o=t[a];if(n&&o&&(n=o),!ch(e,n,a))return;i=sh(n,e)}else{if(n.includes(a)){L(44);return}let o=t[a];if(!ch(e,o,a))return;let s=this.processDataTypeDefinition(o,t,[...n,a],r);if(!s)return;i=sh(s,e)}return{...i,groupSafeValueFormatter:lh(i,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:r}=t,{field:i}=t;if(r===void 0&&(r=e.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(e,t)?this.inferCellDataType(i,n):!1),!r){e.cellDataType=!1;return}let a=this.dataTypeDefinitions[r];if(!a){L(47,{cellDataType:r});return}return e.cellDataType=r,a.groupSafeValueFormatter&&(e.valueFormatter=a.groupSafeValueFormatter),a.valueParser&&(e.valueParser=a.valueParser),a.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,r,a,n),a.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=e=>{t.add(e.key)};e.__addEventListener(`columnStateUpdated`,n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener(`columnStateUpdated`,n))}canInferCellDataType(e,t){let{gos:n}=this;if(!z(n))return!1;let r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(dh(t,r))return!1;let i=t.type===null?e.type:t.type;if(i){let e=n.get(`columnTypes`)??{};if(xa(i).some(t=>{let n=e[t.trim()];return n&&dh(n,r)}))return!1}return!dh(e,r)}inferCellDataType(e,t){if(!e)return;let n,r=this.getInitialData();if(r?n=Et(r,e,e.indexOf(`.`)>=0&&!this.gos.get(`suppressFieldDotNotation`)):this.initWaitForRowData(t),n!=null)return Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](n))??`object`}getInitialData(){let e=this.gos.get(`rowData`);if(e?.length)return e[0];if(this.initialData)return this.initialData;{let e=this.beans.rowModel.rootNode?.allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:r}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);let[i]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{let{firstRowData:a}=e;a&&(i?.(),this.isPendingInference=!1,this.processColumnsPendingInference(a,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),r.dispatchEvent({type:`dataTypesInferred`}))}})}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let r={},i={};for(let e of Object.keys(this.columnStateUpdatesPendingInference)){let a=this.columnStateUpdatesPendingInference[e],o=this.colModel.getCol(e);if(!o)return;let s=o.getColDef();if(!this.resetColDefIntoCol(o,`cellDataTypeInferred`))return;let c=o.getColDef();if(t&&c.type&&c.type!==s.type){let t=fh(o,a);t.rowGroup&&t.rowGroupIndex==null&&(r[e]=t),t.pivot&&t.pivotIndex==null&&(i[e]=t),n.push(t)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(r,i)),n.length&&Ka(this.beans,{state:n},`cellDataTypeInferred`),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},{rowGroupColsSvc:r,pivotColsSvc:i}=this.beans;return r?.restoreColumnOrder(n,e),i?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let r=Pa(this.beans,n,e.getColId());return e.setColDef(r,n,t),!0}getDateStringTypeDefinition(e){let{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e===`dateTime`||e===`dateTimeString`}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){let t=e=>L(48,{property:e});if(e.cellDataType===`object`){let{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t(`Formatter`),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t(`Parser`)}}postProcess(e){let t=e.cellDataType;if(!t||typeof t!=`string`)return;let{dataTypeDefinitions:n,beans:r,formatValueFuncs:i}=this,a=n[t];r.colFilter?.setColDefPropsForDataType(e,a,i[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,r){let i=this.formatValueFuncs[t],a=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:r,formatValue:i});Object.assign(e,a)}getDateObjectTypeDef(e){let t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>Ol(e.newValue&&String(e.newValue)),valueFormatter:e=>e.value==null?``:!(e.value instanceof Date)||isNaN(e.value.getTime())?t(`invalidDate`,`Invalid Date`):Sl(e.value,n)??``,dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){let t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>Ol(e)??void 0,dateFormatter:e=>Sl(e??null,t)??void 0,valueParser:e=>El(String(e.newValue))?e.newValue:null,valueFormatter:e=>El(String(e.value))?String(e.value):``,dataTypeMatcher:e=>typeof e==`string`&&El(e)}}getDefaultDataTypes(){let e=this.getLocaleTextFunc();return{number:{baseDataType:`number`,valueParser:e=>e.newValue?.trim?.()===``?null:Number(e.newValue),valueFormatter:t=>t.value==null?``:typeof t.value!=`number`||isNaN(t.value)?e(`invalidNumber`,`Invalid Number`):String(t.value),dataTypeMatcher:e=>typeof e==`number`},text:{baseDataType:`text`,valueParser:e=>e.newValue===``?null:xt(e.newValue),dataTypeMatcher:e=>typeof e==`string`},boolean:{baseDataType:`boolean`,valueParser:e=>e.newValue==null?e.newValue:e.newValue?.trim?.()===``?null:String(e.newValue).toLowerCase()===`true`,valueFormatter:e=>e.value==null?``:String(e.value),dataTypeMatcher:e=>typeof e==`boolean`},date:this.getDateObjectTypeDef(`date`),dateString:this.getDateStringTypeDef(`dateString`),dateTime:this.getDateObjectTypeDef(`dateTime`),dateTimeString:{...this.getDateStringTypeDef(`dateTimeString`),dataTypeMatcher:e=>typeof e==`string`&&Dl(e)},object:{baseDataType:`object`,valueParser:()=>null,valueFormatter:e=>xt(e.value)??``}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function sh(e,t){let n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...xa(e.columnTypes),...xa(t.columnTypes)]),n}function ch(e,t,n){return t?t.baseDataType===e.baseDataType?!0:(L(46),!1):(L(45,{parentCellDataType:n}),!1)}function lh(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){let t=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(t){if(t===`first`||t===`last`)return e.valueFormatter(n);if(e.baseDataType===`number`&&t!==`count`){if(typeof n.value==`number`)return e.valueFormatter(n);if(typeof n.value==`object`){if(!n.value)return;if(`toNumber`in n.value)return e.valueFormatter({...n,value:n.value.toNumber()});if(`value`in n.value)return e.valueFormatter({...n,value:n.value.value})}}return}}else if(t.get(`groupHideOpenParents`)&&n.column.isRowGroupActive()&&typeof n.value==`string`&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function uh(e,t,n,r){if(!t[n])return!1;let i=e[n];return i===null?(t[n]=!1,!1):r===void 0?!!i:i===r}function dh(e,t){return[[`cellRenderer`,`agSparklineCellRenderer`],[`valueGetter`,void 0],[`valueParser`,void 0],[`refData`,void 0]].some(([n,r])=>uh(e,t,n,r))}function fh(e,t){let n=Xa(e);return t.forEach(e=>{delete n[e],e===`rowGroup`?delete n.rowGroupIndex:e===`pivot`&&delete n.pivotIndex}),n}var ph={moduleName:`DataType`,version:I,beans:[oh],dependsOn:[Nm]},mh={moduleName:`ColumnFlex`,version:I,beans:[ih]},hh={moduleName:`ColumnApi`,version:I,beans:[rh],apiFunctions:{getColumnDef:Fm,getDisplayNameForColumn:Lm,getColumn:Rm,getColumns:zm,applyColumnState:Bm,getColumnState:Vm,resetColumnState:Hm,isPinning:Um,isPinningLeft:Wm,isPinningRight:Gm,getDisplayedColAfter:Km,getDisplayedColBefore:qm,setColumnsVisible:Jm,setColumnsPinned:Ym,getAllGridColumns:Xm,getDisplayedLeftColumns:Zm,getDisplayedCenterColumns:Qm,getDisplayedRightColumns:$m,getAllDisplayedColumns:eh,getAllDisplayedVirtualColumns:th,getColumnDefs:Im}};function gh(e){return!e||e==null?null:e.replace(/([a-z])([A-Z])/g,`$1 $2`).replace(/([A-Z]+)([A-Z])([a-z])/g,`$1 $2$3`).replace(/\./g,` `).split(` `).map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):``)).join(` `)}var _h=class extends W{constructor(){super(...arguments),this.beanName=`colNames`}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let r=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:i}=this.beans;return n&&i?i.getHeaderName(e,r):r}getDisplayNameForProvidedColumnGroup(e,t,n){let r=t?.getColGroupDef();return r?this.getHeaderName(r,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,r,i){let a=e.headerValueGetter;if(a){let o=U(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:r,location:i});return typeof a==`function`?a(o):typeof a==`string`?this.beans.expressionSvc?.evaluate(a,o)??null:``}else if(e.headerName!=null)return e.headerName;else if(e.field)return gh(e.field);return``}},vh=class extends W{constructor(){super(...arguments),this.beanName=`colViewport`,this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash=``,this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get(`suppressColumnVirtualisation`)}setScrollPosition(e,t,n=!1){let{visibleCols:r}=this,i=r.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,r.isBodyWidthDirty=!0,this.gos.get(`enableRtl`)){let n=r.bodyWidth;this.viewportLeft=n-t-e,this.viewportRight=n-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case`left`:return this.columnsToRenderLeft;case`right`:return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case`left`:n=this.rowsOfHeadersToRenderLeft[t];break;case`right`:n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){let e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=``}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||yh(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),r=this.viewportLeft-200,i=this.viewportRight+200;return!(t<r&&n<r)&&!(t>i&&n>i)}getViewportColumns(){let{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let t=e=>{let t=e.getLeft();return j(t)&&t>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:r}=this,i=r.centerCols;return r.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:`virtualColumnsChanged`,afterScroll:e})}calculateHeaderRows(){let{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;let n=e=>{let t=new Set,n={};for(let r of e){let e=r.getParent(),i=r.isSpanHeaderHeight();for(;e&&!t.has(e);){if(i&&e.isPadding()){e=e.getParent();continue}let r=e.getProvidedColumnGroup().getLevel();n[r]??(n[r]=[]),n[r].push(e),t.add(e),e=e.getParent()}}return n};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){let e=e=>`${e.getId()}-${e.getPinned()||`normal`}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join(`#`),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function yh(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var bh={moduleName:`CellRendererFunction`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`agCompUtils`}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(e){let n=t(e),r=typeof n;if(r===`string`||r===`number`||r===`boolean`){this.eGui=Hn(`<span>`+n+`</span>`);return}if(n==null){this.eGui=F({tag:`span`});return}this.eGui=n}}return n}}]},xh=class extends W{constructor(){super(...arguments),this.beanName=`registry`,this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){let e=this.gos.get(`components`);if(e!=null)for(let t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){let{icons:t,userComponents:n,dynamicBeans:r,selectors:i}=e;if(n){let e=(e,t,n,r)=>{this.agGridDefaults[e]=t,(n||r)&&(this.agGridDefaultOverrides[e]={params:n,processParams:r})};for(let t of Object.keys(n)){let r=n[t];if(hs(r)&&(r=r.getComp(this.beans)),typeof r==`object`){let{classImp:n,params:i,processParams:a}=r;e(t,n,i,a)}else e(t,r)}}if(r){this.dynamicBeans??={};for(let e of Object.keys(r))this.dynamicBeans[e]=r[e]}if(i?.forEach(e=>{this.selectors[e.selector]=e}),t)for(let e of Object.keys(t))this.icons[e]=t[e]}getUserComponent(e,t){let n=(e,t,n,r)=>({componentFromFramework:t,component:e,params:n,processParams:r}),{frameworkOverrides:r}=this.beans,i=r.frameworkComponent(t,this.gos.get(`components`));if(i!=null)return n(i,!0);let a=this.jsComps[t];if(a)return n(a,r.isFrameworkComponent(a));let o=this.agGridDefaults[t];if(o){let e=this.agGridDefaultOverrides[t];return n(o,!1,e?.params,e?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw Error(Lr(279,{name:e}));let r=this.dynamicBeans[e];if(r==null){if(t)throw Error(this.beans.validation?.missingDynamicBean(e)??Lr(256));return}return new r(...n)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},Sh=23,Ch=class extends W{constructor(){super(...arguments),this.beanName=`ctrlsSvc`,this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener(`ready`,()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let e=Object.values(this.params);this.ready=e.length===Sh&&e.every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:`ready`}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case`left`:return t.leftHeader;case`right`:return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},wh=`:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}`,Th=typeof window!=`object`||!window?.document?.fonts?.forEach,Eh=(e,t,n,r,i,a)=>{if(Th||xg)return;r&&(e=`@layer ${CSS.escape(r)} { ${e} }`);let o=jh.map.get(t);if(o||(o=[],jh.map.set(t,o)),o.find(t=>t.css===e))return;let s=document.createElement(`style`);a&&s.setAttribute(`nonce`,a),s.dataset.agGlobalCss=n,s.textContent=e;let c={css:e,el:s,priority:i},l;for(let e of o){if(e.priority>i)break;l=e}if(l){l.el.insertAdjacentElement(`afterend`,s);let e=o.indexOf(l);o.splice(e+1,0,c)}else t.insertBefore(s,t.querySelector(`:not(title, meta)`)),o.push(c)},Dh=(e,t,n)=>{Eh(wh,e,`core`,t,0,n),Array.from(us()).sort((e,t)=>e.moduleName.localeCompare(t.moduleName)).forEach(r=>r.css?.forEach(i=>Eh(i,e,`module-${r.moduleName}`,t,0,n)))},Oh=e=>{jh.grids.add(e)},kh=e=>{if(jh.grids.delete(e),jh.grids.size===0){jh.map=new WeakMap;for(let e of document.head.querySelectorAll(`style[data-ag-global-css]`))e.remove()}},Ah,jh=(Ah=typeof window==`object`?window:{}).agStyleInjectionState??(Ah.agStyleInjectionState={map:new WeakMap,grids:new Set}),Mh=e=>new Fh(e),Nh=`$default`,Ph=0,Fh=class{constructor({feature:e,params:t,modeParams:n={},css:r,cssImports:i}){this.feature=e,this.css=r,this.cssImports=i,this.modeParams={[Nh]:{...n[Nh]??{},...t??{}},...n}}use(e,t,n){let r=this._inject;if(r==null){let{css:e}=this;if(e){let t=`ag-theme-${this.feature??`part`}-${++Ph}`;typeof e==`function`&&(e=e()),e=`:where(.${t}) {
${e}
}
`;for(let t of this.cssImports??[])e=`@import url(${JSON.stringify(t)});
${e}`;r={css:e,class:t}}else r=!1;this._inject=r}return r&&e&&Eh(r.css,e,r.class,t,1,n),r?r.class:!1}},Ih=e=>e.replace(/[A-Z]/g,e=>`-${e}`).toLowerCase(),Lh=e=>`--ag-${Ih(e)}`,Rh=e=>`var(${Lh(e)})`,zh=(e,t,n)=>Math.max(t,Math.min(n,e)),Bh=e=>{let t=new Map;return n=>{let r=n;return t.has(r)||t.set(r,e(n)),t.get(r)}},Vh=e=>({ref:`accentColor`,mix:e}),Hh=e=>({ref:`foregroundColor`,mix:e}),Uh=e=>({ref:`foregroundColor`,mix:e,onto:`backgroundColor`}),Wh=e=>({ref:`foregroundColor`,mix:e,onto:`headerBackgroundColor`}),Gh={ref:`backgroundColor`},Kh={ref:`foregroundColor`},qh={ref:`accentColor`},Jh={backgroundColor:`#fff`,foregroundColor:`#181d1f`,borderColor:Hh(.15),chromeBackgroundColor:Uh(.02),browserColorScheme:`light`},Yh={...Jh,textColor:Kh,accentColor:`#2196f3`,invalidColor:`#e02525`,wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:`rowBorder`},columnBorder:{style:`solid`,width:1,color:`transparent`},headerColumnBorder:!1,headerColumnBorderHeight:`100%`,pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:`chromeBackgroundColor`},sideButtonBarBackgroundColor:{ref:`sideBarBackgroundColor`},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:`transparent`,sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:`transparent`,sideButtonTextColor:{ref:`textColor`},sideButtonHoverBackgroundColor:{ref:`sideButtonBackgroundColor`},sideButtonHoverTextColor:{ref:`sideButtonTextColor`},sideButtonSelectedBackgroundColor:Gh,sideButtonSelectedTextColor:{ref:`sideButtonTextColor`},sideButtonBorder:`solid 1px transparent`,sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:`spacing`},sideButtonRightPadding:{ref:`spacing`},sideButtonVerticalPadding:{calc:`spacing * 3`},fontFamily:[`-apple-system`,`BlinkMacSystemFont`,`Segoe UI`,`Roboto`,`Oxygen-Sans`,`Ubuntu`,`Cantarell`,`Helvetica Neue`,`sans-serif`],headerBackgroundColor:{ref:`chromeBackgroundColor`},headerFontFamily:{ref:`fontFamily`},cellFontFamily:{ref:`fontFamily`},headerFontWeight:500,headerFontSize:{ref:`fontSize`},dataFontSize:{ref:`fontSize`},headerTextColor:{ref:`textColor`},headerCellHoverBackgroundColor:`transparent`,headerCellMovingBackgroundColor:{ref:`headerCellHoverBackgroundColor`},headerCellBackgroundTransitionDuration:`0.2s`,cellTextColor:{ref:`textColor`},subtleTextColor:{ref:`textColor`,mix:.5},rangeSelectionBorderStyle:`solid`,rangeSelectionBorderColor:qh,rangeSelectionBackgroundColor:Vh(.2),rangeSelectionChartBackgroundColor:`#0058FF1A`,rangeSelectionChartCategoryBackgroundColor:`#00FF841A`,rangeSelectionHighlightColor:Vh(.5),rangeHeaderHighlightColor:Wh(.08),rowNumbersSelectedColor:Vh(.5),rowHoverColor:Vh(.08),columnHoverColor:Vh(.05),selectedRowBackgroundColor:Vh(.12),modalOverlayBackgroundColor:{ref:`backgroundColor`,mix:.66},oddRowBackgroundColor:Gh,borderWidth:1,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:`spacing * 2 * cellHorizontalPaddingScale`},cellWidgetSpacing:{calc:`spacing * 1.5`},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:`cellWidgetSpacing + iconSize`},valueChangeDeltaUpColor:`#43a047`,valueChangeDeltaDownColor:`#e53935`,valueChangeValueHighlightBackgroundColor:`#16a08580`,spacing:8,fontSize:14,rowHeight:{calc:`max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale`},rowVerticalPaddingScale:1,headerHeight:{calc:`max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale`},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:`rowHeight`,calc:`max(rowHeight, 22px)`},popupShadow:`0 0 16px #00000026`,cardShadow:`0 1px 4px 1px #00000018`,dropdownShadow:{ref:`cardShadow`},dragAndDropImageBackgroundColor:Gh,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:`popupShadow`},dragHandleColor:Hh(.7),focusShadow:{spread:3,color:Vh(.5)},focusErrorShadow:{spread:3,color:{ref:`invalidColor`,onto:`backgroundColor`,mix:.5}},headerColumnResizeHandleHeight:`30%`,headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:`borderColor`},widgetContainerHorizontalPadding:{calc:`spacing * 1.5`},widgetContainerVerticalPadding:{calc:`spacing * 1.5`},widgetHorizontalSpacing:{calc:`spacing * 1.5`},widgetVerticalSpacing:{ref:`spacing`},listItemHeight:{calc:`max(iconSize, dataFontSize) + widgetVerticalSpacing`},iconSize:16,iconColor:`inherit`,iconButtonColor:{ref:`iconColor`},iconButtonBackgroundColor:`transparent`,iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:`iconButtonColor`},iconButtonHoverBackgroundColor:Hh(.1),iconButtonActiveColor:qh,iconButtonActiveBackgroundColor:Vh(.28),iconButtonActiveIndicatorColor:qh,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:qh,toggleButtonOffBackgroundColor:Uh(.3),toggleButtonSwitchBackgroundColor:Gh,toggleButtonSwitchInset:2,menuBorder:{color:Hh(.2)},menuBackgroundColor:Uh(.03),menuTextColor:Uh(.95),menuShadow:{ref:`popupShadow`},menuSeparatorColor:{ref:`borderColor`},setFilterIndentSize:{ref:`iconSize`},chartMenuPanelWidth:260,chartMenuLabelColor:Hh(.8),dialogShadow:{ref:`popupShadow`},cellEditingBorder:{color:qh},cellEditingShadow:{ref:`cardShadow`},fullRowEditInvalidBackgroundColor:{ref:`invalidColor`,onto:`backgroundColor`,mix:.25},dialogBorder:{color:Hh(.2)},panelBackgroundColor:Gh,panelTitleBarBackgroundColor:{ref:`headerBackgroundColor`},panelTitleBarIconColor:{ref:`headerTextColor`},panelTitleBarTextColor:{ref:`headerTextColor`},panelTitleBarFontWeight:{ref:`headerFontWeight`},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:`iconSize`},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:`chromeBackgroundColor`},tooltipErrorBackgroundColor:{ref:`invalidColor`,onto:`backgroundColor`,mix:.1},tooltipTextColor:{ref:`textColor`},tooltipErrorTextColor:{ref:`invalidColor`},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:`invalidColor`,onto:`backgroundColor`,mix:.25}},columnDropCellBackgroundColor:Hh(.07),columnDropCellTextColor:{ref:`textColor`},columnDropCellDragHandleColor:{ref:`textColor`},columnDropCellBorder:{color:Hh(.13)},selectCellBackgroundColor:Hh(.07),selectCellBorder:{color:Hh(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:`spacing * 2 + iconSize`},advancedFilterBuilderJoinPillColor:`#f08e8d`,advancedFilterBuilderColumnPillColor:`#a6e194`,advancedFilterBuilderOptionPillColor:`#f3c08b`,advancedFilterBuilderValuePillColor:`#85c0e4`,filterPanelApplyButtonColor:Gh,filterPanelApplyButtonBackgroundColor:qh,filterPanelCardSubtleColor:{ref:`textColor`,mix:.7},filterPanelCardSubtleHoverColor:{ref:`textColor`},findMatchColor:Kh,findMatchBackgroundColor:`#ffff00`,findActiveMatchColor:Kh,findActiveMatchBackgroundColor:`#ffa500`,filterToolPanelGroupIndent:{ref:`spacing`},rowLoadingSkeletonEffectColor:Hh(.15),statusBarLabelColor:Kh,statusBarLabelFontWeight:500,statusBarValueColor:Kh,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:`textColor`},pinnedSourceRowBackgroundColor:{ref:`backgroundColor`},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:`backgroundColor`},pinnedRowTextColor:{ref:`textColor`}},Xh=`.ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}`,Zh={cellBatchEditBackgroundColor:`rgba(220 181 139 / 16%)`,cellBatchEditTextColor:`#422f00`,rowBatchEditBackgroundColor:{ref:`cellBatchEditBackgroundColor`},rowBatchEditTextColor:{ref:`cellBatchEditTextColor`}},Qh={...Zh,cellBatchEditTextColor:`#f3d0b3`},$h=(()=>Mh({feature:`batchEditStyle`,params:Zh,css:Xh}))(),eg=`:where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}`,tg={buttonTextColor:`inherit`,buttonFontWeight:`normal`,buttonBackgroundColor:`transparent`,buttonBorder:!1,buttonBorderRadius:{ref:`borderRadius`},buttonHorizontalPadding:{calc:`spacing * 2`},buttonVerticalPadding:{ref:`spacing`},buttonHoverTextColor:{ref:`buttonTextColor`},buttonHoverBackgroundColor:{ref:`buttonBackgroundColor`},buttonHoverBorder:{ref:`buttonBorder`},buttonActiveTextColor:{ref:`buttonHoverTextColor`},buttonActiveBackgroundColor:{ref:`buttonHoverBackgroundColor`},buttonActiveBorder:{ref:`buttonHoverBorder`},buttonDisabledTextColor:{ref:`inputDisabledTextColor`},buttonDisabledBackgroundColor:{ref:`inputDisabledBackgroundColor`},buttonDisabledBorder:{ref:`inputDisabledBorder`}},ng=(()=>Mh({feature:`buttonStyle`,params:{...tg,buttonBackgroundColor:Gh,buttonBorder:!0,buttonHoverBackgroundColor:{ref:`rowHoverColor`},buttonActiveBorder:{color:qh}},css:eg}))(),rg=`.ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}`,ig=(()=>Mh({feature:`columnDropStyle`,css:rg}))(),ag=[`colorScheme`,`color`,`length`,`scale`,`borderStyle`,`border`,`shadow`,`image`,`fontFamily`,`fontWeight`,`duration`],og=Bh(e=>(e=e.toLowerCase(),ag.find(t=>e.endsWith(t.toLowerCase()))??`length`)),sg=e=>typeof e==`object`&&e?.ref?Rh(e.ref):typeof e==`string`?e:typeof e==`number`?String(e):!1,cg=e=>{if(typeof e==`string`)return e;if(e&&`ref`in e){let t=Rh(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Rh(e.onto):`transparent`}, ${t} ${zh(e.mix*100,0,100)}%)`}return!1},lg=sg,ug=e=>typeof e==`string`?e:typeof e==`number`?`${e}px`:e&&`calc`in e?`calc(${e.calc.replace(/ ?[*/+] ?/g,` $& `).replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>e[0]===`-`?e:` ${Rh(e)} `)})`:e&&`ref`in e?Rh(e.ref):!1,dg=sg,fg=(e,t)=>typeof e==`string`?e:e===!0?fg({},t):e===!1?t===`columnBorder`?fg({color:`transparent`},t):`none`:e&&`ref`in e?Rh(e.ref):mg(e.style??`solid`)+` `+ug(e.width??{ref:`borderWidth`})+` `+cg(e.color??{ref:`borderColor`}),pg=e=>typeof e==`string`?e:e===!1?`none`:e&&`ref`in e?Rh(e.ref):[ug(e.offsetX??0),ug(e.offsetY??0),ug(e.radius??0),ug(e.spread??0),cg(e.color??{ref:`foregroundColor`})].join(` `),mg=sg,hg=e=>typeof e==`string`?e.includes(`,`)?e:gg(e):e&&`googleFont`in e?hg(e.googleFont):e&&`ref`in e?Rh(e.ref):Array.isArray(e)?e.map(e=>(typeof e==`object`&&`googleFont`in e&&(e=e.googleFont),gg(e))).join(`, `):!1,gg=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),_g=sg,vg=e=>typeof e==`string`?e:e&&`url`in e?`url(${JSON.stringify(e.url)})`:e&&`svg`in e?vg({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&`ref`in e?Rh(e.ref):!1,yg={color:cg,colorScheme:lg,length:ug,scale:dg,border:fg,borderStyle:mg,shadow:pg,image:vg,fontFamily:hg,fontWeight:_g,duration:(e,t)=>typeof e==`string`?e:typeof e==`number`?(e>=10&&R(104,{value:e,param:t}),`${e}s`):e&&`ref`in e?Rh(e.ref):!1},bg=(e,t)=>yg[og(e)](t,e),xg=!1,Sg=()=>new Cg().withPart(ng).withPart(ig).withPart($h),Cg=class e{constructor(e=[]){this.parts=e}withPart(t){return typeof t==`function`&&(t=t()),t instanceof Fh?new e([...this.parts,t]):(Fr(259,{part:t},`Invalid part`),this)}withoutPart(e){return this.withPart(Mh({feature:e}))}withParams(e,t=Nh){return this.withPart(Mh({modeParams:{[t]:e}}))}_startUse({styleContainer:e,cssLayer:t,nonce:n,loadThemeGoogleFonts:r}){if(Th||xg)return;Dg(),Dh(e,t,n);let i=Tg(this);if(i.length>0)for(let e of i)r&&kg(e,n);for(let r of this.parts)r.use(e,t,n)}_getCssClass(){return xg?`ag-theme-quartz`:this._cssClassCache??=wg(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(` `)}_getModeParams(){let e=this._paramsCache;if(!e){let t={[Nh]:{...Yh}};for(let e of wg(this.parts))for(let n of Object.keys(e.modeParams)){let r=e.modeParams[n];if(r){let e=t[n]??(t[n]={}),i=new Set;for(let t of Object.keys(r)){let n=r[t];n!==void 0&&(e[t]=n,i.add(t))}if(n===Nh)for(let e of Object.keys(t)){let n=t[e];if(e!==Nh)for(let e of i)delete n[e]}}}this._paramsCache=e=t}return e}_getPerGridCss(e){let t=`##SELECTOR##`,n=this._paramsCssCache;if(!n){let e=``,r=``,i=this._getModeParams();for(let t of Object.keys(i)){let n=i[t];if(t!==Nh){let n=`:where([data-ag-theme-mode="${typeof CSS==`object`?CSS.escape(t):t}"]) & {
`;e+=n,r+=n}for(let t of Object.keys(n).sort()){let i=n[t],a=bg(t,i);if(a===!1)R(107,{key:t,value:i});else{let n=Lh(t),i=n.replace(`--ag-`,`--ag-inherited-`);e+=`	${n}: var(${i}, ${a});
`,r+=`	${i}: var(${n});
`}}t!==Nh&&(e+=`}
`,r+=`}
`)}let a=`${t} {
${e}}
`;a+=`:has(> ${t}):not(${t}) {
${r}}
`,this._paramsCssCache=n=a}return n.replaceAll(t,`:where(.${e})`)}},wg=e=>{let t=new Map;for(let n of e)t.set(n.feature,n);let n=[];for(let r of e)(!r.feature||t.get(r.feature)===r)&&n.push(r);return n},Tg=e=>{let t=new Set,n=e=>{if(Array.isArray(e))e.forEach(n);else{let n=e?.googleFont;typeof n==`string`&&t.add(n)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(n),Array.from(t).sort()},Eg=!1,Dg=()=>{if(!Eg){Eg=!0;for(let e of Array.from(document.head.querySelectorAll(`style[data-ag-scope="legacy"]`)))e.remove()}},Og=new Set,kg=async(e,t)=>{Og.add(e),Eh(`@import url('https://${Ag}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`,document.head,`googleFont:${e}`,void 0,0,t)},Ag=`fonts.googleapis.com`,jg=`.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}`,Mg=(()=>Mh({feature:`checkboxStyle`,params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:`borderRadius`},checkboxUncheckedBackgroundColor:Gh,checkboxUncheckedBorderColor:Uh(.3),checkboxCheckedBackgroundColor:qh,checkboxCheckedBorderColor:{ref:`checkboxCheckedBackgroundColor`},checkboxCheckedShapeImage:{svg:`<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>`},checkboxCheckedShapeColor:Gh,checkboxIndeterminateBackgroundColor:Uh(.3),checkboxIndeterminateBorderColor:{ref:`checkboxIndeterminateBackgroundColor`},checkboxIndeterminateShapeImage:{svg:`<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>`},checkboxIndeterminateShapeColor:Gh,radioCheckedShapeImage:{svg:`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>`}},css:jg}))(),Ng=()=>({...Jh,...Qh,backgroundColor:`hsl(217, 0%, 17%)`,foregroundColor:`#FFF`,chromeBackgroundColor:Uh(.05),rowHoverColor:Vh(.15),selectedRowBackgroundColor:Vh(.2),menuBackgroundColor:Uh(.1),browserColorScheme:`dark`,popupShadow:`0 0px 20px #000A`,cardShadow:`0 1px 4px 1px #000A`,advancedFilterBuilderJoinPillColor:`#7a3a37`,advancedFilterBuilderColumnPillColor:`#355f2d`,advancedFilterBuilderOptionPillColor:`#5a3168`,advancedFilterBuilderValuePillColor:`#374c86`,filterPanelApplyButtonColor:Kh,findMatchColor:Gh,findActiveMatchColor:Gh,checkboxUncheckedBorderColor:Uh(.4),toggleButtonOffBackgroundColor:Uh(.4),rowBatchEditBackgroundColor:Uh(.1)}),Pg=()=>({...Ng(),backgroundColor:`#1f2836`}),Fg=(()=>Mh({feature:`colorScheme`,params:Jh,modeParams:{light:Jh,dark:Ng(),"dark-blue":Pg()}}))(),Ig=Mh({feature:`iconSet`,css:`.ag-icon-aggregation:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-arrows:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-asc:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-cancel:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-chart:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E")}.ag-icon-color-picker:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-columns:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E")}.ag-icon-contracted:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E")}.ag-icon-copy:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-cross:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E")}.ag-icon-csv:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E")}.ag-icon-cut:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-excel:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E")}.ag-icon-expanded:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E")}.ag-icon-eye-slash:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E")}.ag-icon-eye:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-filter:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-first:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-group:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E")}.ag-icon-last:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-linked:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-loading:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E")}.ag-icon-maximize:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E")}.ag-icon-menu:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E")}.ag-icon-menu-alt:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E")}.ag-icon-minimize:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E")}.ag-icon-minus:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-next:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E")}.ag-icon-none:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E")}.ag-icon-not-allowed:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-paste:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-pin:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-pivot:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-plus:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-previous:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-save:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E")}.ag-icon-small-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-tick:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E")}.ag-icon-tree-closed:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-tree-indeterminate:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E")}.ag-icon-tree-open:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E")}.ag-icon-unlinked:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-grip:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-settings:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E")}.ag-icon-column-arrow:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M11 4a1 1 0 0 1 1 1v22a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 13a1 1 0 0 1 1-1h23.5a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 4h18v24H2zm2 2v20h14V6zM26.793 13 23 9.207l1.414-1.414L29.621 13l-5.207 5.207L23 16.793z' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-un-pin:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='m6.112 15.111 3.272 3.271 1.436-1.402-2.476-2.479c.81-1.25 3.168-1.12 5.156-.614l4.986-4.988-.49-.722c-.392-.622.336-1.504 1.024-2.072l.008-.007.01-.006.032-.025 1.447 1.447 1.432-1.397-2.601-2.602s-4.052 2.704-3.352 5.046l-3.158 3.108c-2.004-.388-4.69-.288-6.056 1.572-.638.87-.67 1.87-.67 1.87m.581 11.582.014.014 5.502-5.501 4.783 4.783.746-.364c1.992-1.016 2.776-3.21 2.632-5.34-.055-.805-.068-.87-.088-.97-.008-.04-.017-.085-.03-.182l3.32-3.218c1.734.292 3.198-.912 4.272-2.338q.337-.447.67-.894l-.001-.001-.007-.007-.007-.007-.007-.007-3.87-3.87 1.585-1.584-1.414-1.414-14.381 14.38-1.237 1.209-5.69 5.687 1.417 1.416zM23.21 10.206l2.65 2.651c-1.465 1.714-2.935.776-2.935.776l-4.79 4.79q.041.291.087.583c.257 1.676.513 3.35-.585 4.317a4 4 0 0 1-.272.21l-3.739-3.744z' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-pinned-top:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='m16.708 10.878 8.708 8.706L24 21l-6.292-6.294V27h-2V14.706L9.416 21 8 19.584q4.348-4.344 8.691-8.69zM25 6H8v2h17z'/%3E%3C/svg%3E")}.ag-icon-pinned-bottom:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M16.708 22.122 8 13.416 9.416 12l6.292 6.294V6h2v12.294L24 12l1.416 1.416-8.691 8.69zM7.416 28h17v-2h-17z'/%3E%3C/svg%3E")}.ag-icon-chevron-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M3.479 10.521a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06l-3.47-3.47-3.47 3.47a.75.75 0 0 1-1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M12.521 5.461a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l3.47 3.47 3.47-3.47a.75.75 0 0 1 1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M10.53 12.512a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-3.47 3.47 3.47 3.47a.75.75 0 0 1 0 1.06' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M5.47 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L8.94 8 5.47 4.53a.75.75 0 0 1 0-1.06' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-filter-add:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M19.834 8H8c0 .304.06.612.258.842 2.716 2.854 6.682 5.548 6.742 7.974V21l2-1.5v-2.684c.056-2.267 2.968-4.417 5.49-6.75v3.087c-1.081.974-2.245 1.968-3.232 3.005a1.05 1.05 0 0 0-.258.682v3.66L13 25c0-2.74.066-5.482-.002-8.222a1.05 1.05 0 0 0-.256-.62C10.026 13.304 6.06 10.61 6 8.184V6h13.834z'/%3E%3Cpath fill='currentColor' d='M26 6h2.946v2.002H26v3.313h-2.002V8.002h-2.946V6h2.946V3.04H26z'/%3E%3C/svg%3E")}.ag-icon-edit:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M6.222 25.778h1.611l14.834-14.811-1.611-1.611-14.834 14.81zM4 28v-4.733L22.644 4.656a2.26 2.26 0 0 1 1.567-.634q.423 0 .833.167.412.166.734.478l1.589 1.6q.333.322.483.733t.15.822q0 .423-.161.839-.162.416-.472.728L8.733 28zm17.856-17.833-.8-.811 1.61 1.61z'/%3E%3C/svg%3E")}`}),Lg={aggregation:`<path d="M18 7V4H6l6 8-6 8h12v-3"/>`,arrows:`<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>`,asc:`<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>`,cancel:`<path d="m18 6-12 12"/><path d="m6 6 12 12"/>`,chart:`<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>`,"color-picker":`<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>`,columns:`<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>`,contracted:`<path d="m9 18 6-6-6-6"/>`,copy:`<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>`,cross:`<path d="M18 6 6 18"/><path d="m6 6 12 12"/>`,csv:`<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>`,cut:`<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>`,desc:`<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>`,down:`<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>`,excel:`<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>`,expanded:`<path d="m15 18-6-6 6-6"/>`,"eye-slash":`<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>`,eye:`<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>`,filter:`<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>`,first:`<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>`,group:`<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>`,last:`<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>`,left:`<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>`,linked:`<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>`,loading:`<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>`,maximize:`<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>`,menu:`<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>`,"menu-alt":`<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>`,minimize:`<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>`,minus:`<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>`,next:`<path d="m9 18 6-6-6-6"/>`,none:`<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>`,"not-allowed":`<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>`,paste:`<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>`,pin:`<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>`,pivot:`<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>`,plus:`<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>`,previous:`<path d="m15 18-6-6 6-6"/>`,right:`<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>`,save:`<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>`,"small-left":`<path d="m15 18-6-6 6-6"/>`,"small-right":`<path d="m9 18 6-6-6-6"/>`,tick:`<path d="M20 6 9 17l-5-5"/>`,"tree-closed":`<path d="m9 18 6-6-6-6"/>`,"tree-indeterminate":`<path d="M5 12h14"/>`,"tree-open":`<path d="m6 9 6 6 6-6"/>`,unlinked:`<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>`,up:`<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>`,grip:`<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>`,settings:`<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>`},Rg={"column-arrow":`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>`,"small-down":`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>`,"small-up":`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>`,"pinned-top":`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>`,"pinned-bottom":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>`,"un-pin":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>`,"chevron-down":`<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,"chevron-up":`<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,"chevron-left":`<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,"chevron-right":`<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,"filter-add":`<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>`,edit:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>`},zg=(e={})=>{let t=``;for(let n of[...Object.keys(Lg),...Object.keys(Rg)]){let r=Bg(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(r)}'); }
`}return t},Bg=(e,t=1.5)=>{let n=Rg[e];if(n)return n;let r=Lg[e];if(!r)throw Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+r+`</svg>`},Vg=((e={})=>Mh({feature:`iconSet`,css:()=>zg(e)}))(),Hg=`:where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}`,Ug=`.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}`,Wg={inputBackgroundColor:`transparent`,inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:`textColor`},inputPlaceholderTextColor:{ref:`inputTextColor`,mix:.5},inputPaddingStart:0,inputHeight:{calc:`max(iconSize, fontSize) + spacing * 2`},inputFocusBackgroundColor:{ref:`inputBackgroundColor`},inputFocusBorder:{ref:`inputBorder`},inputFocusShadow:`none`,inputFocusTextColor:{ref:`inputTextColor`},inputDisabledBackgroundColor:{ref:`inputBackgroundColor`},inputDisabledBorder:{ref:`inputBorder`},inputDisabledTextColor:{ref:`inputTextColor`},inputInvalidBackgroundColor:{ref:`inputBackgroundColor`},inputInvalidBorder:{ref:`inputBorder`},inputInvalidTextColor:{ref:`inputTextColor`},inputIconColor:{ref:`inputTextColor`},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:`inputFocusBorder`},pickerButtonBackgroundColor:{ref:`backgroundColor`},pickerButtonFocusBackgroundColor:{ref:`backgroundColor`},pickerListBorder:!1,pickerListBackgroundColor:{ref:`backgroundColor`},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},Gg=(()=>Mh({feature:`inputStyle`,params:{...Wg,inputBackgroundColor:Gh,inputBorder:!0,inputBorderRadius:{ref:`borderRadius`},inputPaddingStart:{ref:`spacing`},inputFocusBorder:{color:qh},inputFocusShadow:{ref:`focusShadow`},inputDisabledBackgroundColor:Uh(.06),inputDisabledTextColor:{ref:`textColor`,mix:.5},inputInvalidBorder:{color:{ref:`invalidColor`}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>Hg+Ug}))(),Kg=`.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}`,qg={tabBarBackgroundColor:`transparent`,tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:`transparent`,tabTextColor:{ref:`textColor`},tabHorizontalPadding:{ref:`spacing`},tabTopPadding:{ref:`spacing`},tabBottomPadding:{ref:`spacing`},tabSpacing:`0`,tabHoverBackgroundColor:{ref:`tabBackgroundColor`},tabHoverTextColor:{ref:`tabTextColor`},tabSelectedBackgroundColor:{ref:`tabBackgroundColor`},tabSelectedTextColor:{ref:`tabTextColor`},tabSelectedBorderWidth:{ref:`borderWidth`},tabSelectedBorderColor:`transparent`,tabSelectedUnderlineColor:`transparent`,tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},Jg=(()=>Mh({feature:`tabStyle`,params:{...qg,tabBarBorder:!0,tabBarBackgroundColor:Hh(.05),tabTextColor:{ref:`textColor`,mix:.7},tabSelectedTextColor:{ref:`textColor`},tabHoverTextColor:{ref:`textColor`},tabSelectedBorderColor:{ref:`borderColor`},tabSelectedBackgroundColor:Gh},css:Kg}))(),Yg=(()=>Sg().withPart(Mg).withPart(Fg).withPart(Vg).withPart(Jg).withPart(Gg).withPart(ig).withParams({fontFamily:[{googleFont:`IBM Plex Sans`},`-apple-system`,`BlinkMacSystemFont`,`Segoe UI`,`Roboto`,`Oxygen-Sans`,`Ubuntu`]}))(),Xg={cssName:`--ag-cell-horizontal-padding`,changeKey:`cellHorizontalPaddingChanged`,defaultValue:16},Zg={cssName:`--ag-indentation-level`,changeKey:`indentationLevelChanged`,defaultValue:0,noWarn:!0,cacheDefault:!0},Qg={cssName:`--ag-row-group-indent-size`,changeKey:`rowGroupIndentSizeChanged`,defaultValue:0},$g={cssName:`--ag-row-height`,changeKey:`rowHeightChanged`,defaultValue:42},e_={cssName:`--ag-header-height`,changeKey:`headerHeightChanged`,defaultValue:48},t_={cssName:`--ag-list-item-height`,changeKey:`listItemHeightChanged`,defaultValue:24},n_={cssName:`--ag-row-border`,changeKey:`rowBorderWidthChanged`,defaultValue:1,border:!0},r_={cssName:`--ag-pinned-row-border`,changeKey:`pinnedRowBorderWidthChanged`,defaultValue:1,border:!0},i_=0,a_=class extends W{constructor(){super(...arguments),this.beanName=`environment`,this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++i_}`,this.globalCSS=[]}wireBeans(e){let{eGridDiv:t,gridOptions:n}=e;this.eGridDiv=t,this.eStyleContainer=n.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=n.themeCssLayer,this.styleNonce=n.styleNonce}postConstruct(){this.addManagedPropertyListener(`theme`,()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener(`rowHeight`,()=>this.refreshRowHeightVariable()),this.getSizeEl($g),this.getSizeEl(e_),this.getSizeEl(t_),this.getSizeEl(n_),this.getSizeEl(r_),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>kh(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent(`themeChanged`)}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(r_)}getRowBorderWidth(){return this.getCSSVariablePixelValue(n_)}getDefaultRowHeight(){return this.getCSSVariablePixelValue($g)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(e_)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Xg)}getCellPaddingLeft(){let e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(Zg),n=this.getCSSVariablePixelValue(Qg);return e-1+n*t}getCellPadding(){let e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(t_)}applyThemeClasses(e){let{gridTheme:t}=this,n=``;if(t)n=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let e=this.eGridDiv;for(;e;){let t=!1;for(let r of Array.from(e.classList))r.startsWith(`ag-theme-`)&&(t=!0,n=n?`${n} ${r}`:r);t&&this.mutationObserver.observe(e,{attributes:!0,attributeFilter:[`class`]}),e=e.parentElement}}for(let t of Array.from(e.classList))t.startsWith(`ag-theme-`)&&e.classList.remove(t);if(n){let t=e.className;e.className=t+(t?` `:``)+n}}refreshRowHeightVariable(){let{eGridDiv:e}=this,t=e.style.getPropertyValue(`--ag-line-height`).trim(),n=this.gos.get(`rowHeight`);if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty(`--ag-line-height`,null),-1;let r=`${n}px`;return t==r?t==``?-1:parseFloat(t):(e.style.setProperty(`--ag-line-height`,r),n)}addGlobalCSS(e,t){this.gridTheme?Eh(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n===`detached`||n===`no-styles`?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return`detached`;let n=t.offsetWidth;return n===o_?`no-styles`:(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=F({tag:`div`,cls:`ag-measurement-container`}),this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.getMeasurementContainer();t=F({tag:`div`});let{border:r,noWarn:i}=e;r?(t.className=`ag-measurement-element-border`,t.style.setProperty(`--ag-internal-measurement-border`,`var(${e.cssName}, solid ${o_}px)`)):t.style.width=`var(${e.cssName}, ${o_}px)`,n.appendChild(t),this.sizeEls.set(e,t);let a=this.measureSizeEl(e);a===`no-styles`&&!i&&L(9,{variable:e});let o=nr(this.beans,t,()=>{let t=this.measureSizeEl(e);t===`detached`||t===`no-styles`||(this.lastKnownValues.set(e,t),t!==a&&(a=t,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>o()),t}fireGridStylesChangedEvent(e){e===`rowBorderWidthChanged`&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:`gridStylesChanged`,[e]:!0})}refreshRowBorderWidthVariable(){let e=this.getCSSVariablePixelValue(n_);this.eGridDiv.style.setProperty(`--ag-internal-row-border-width`,`${e}px`)}handleThemeGridOptionChange(){let{gos:e,eGridDiv:t,globalCSS:n,gridTheme:r}=this,i=e.get(`theme`),a;if(i===`legacy`)a=void 0;else{let e=i??Yg;e instanceof Cg?a=e:R(240,{theme:e})}if(a!==r){if(a){Oh(this),Dh(this.eStyleContainer,this.cssLayer,this.styleNonce);for(let[e,t]of n)Eh(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);n.length=0}this.gridTheme=a,a?._startUse({loadThemeGoogleFonts:e.get(`loadThemeGoogleFonts`),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=F({tag:`style`});let e=this.gos.get(`styleNonce`);e&&r.setAttribute(`nonce`,e),t.appendChild(r)}Th||(r.textContent=a?._getPerGridCss(this.paramsClass)||``),this.applyThemeClasses(t),this.fireGridStylesChangedEvent(`themeChanged`)}a&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue(`--ag-legacy-styles-loaded`)&&R(i?106:239)}},o_=15538,s_=class extends W{constructor(){super(...arguments),this.beanName=`eventSvc`,this.globalSvc=new gt}postConstruct(){let{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalSvc.dispatchEvent(U(this.gos,e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(U(this.gos,e))}};function c_(e,t,n){let r=e.visibleCols.headerGroupRowCount;if(n>=r)return{column:t,headerRowIndex:n};let i=t.getParent();for(;i&&i.getProvidedColumnGroup().getLevel()>n;)i=i.getParent();let a=t.isSpanHeaderHeight();return!i||a&&i.isPadding()?{column:t,headerRowIndex:r}:{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel()}}var l_=class extends W{constructor(){super(...arguments),this.beanName=`headerNavigation`,this.currentHeaderRowWithoutSpan=-1}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});let t=V(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n,{colModel:r,colGroupSvc:i,ctrlsSvc:a}=this.beans;if(typeof e==`string`?(n=r.getCol(e),n||=i?.getColumnGroup(e)??null):n=e,!n)return null;let o=a.getHeaderRowContainerCtrl()?.getAllCtrls(),s=K(o||[]).type===`filter`,c=td(this.beans)-1,l=-1,u=n;for(;u;)l++,u=u.getParent();let d=l;return t&&s&&d===c-1&&d++,d===-1?null:{headerRowIndex:d,column:n}}navigateVertically(e,t){let{focusSvc:n,visibleCols:r}=this.beans,{focusedHeader:i}=n;if(!i)return!1;let{headerRowIndex:a}=i,o=i.column,s=td(this.beans),c=this.getHeaderRowType(a),l=r.headerGroupRowCount,{headerRowIndex:u,column:d,headerRowIndexWithoutSpan:f}=e===`UP`?u_(c,o,a):d_(o,a,l),p=!1;return u<0&&(u=0,d=o,p=!0),u>=s?(u=-1,this.currentHeaderRowWithoutSpan=-1):f!==void 0&&(this.currentHeaderRowWithoutSpan=f),!p&&!d?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:d},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){let{focusSvc:r,gos:i}=this.beans,a={...r.focusedHeader},o,s;this.currentHeaderRowWithoutSpan===-1?this.currentHeaderRowWithoutSpan=a.headerRowIndex:a.headerRowIndex=this.currentHeaderRowWithoutSpan,e===`LEFT`===i.get(`enableRtl`)?(s=`After`,o=this.findHeader(a,s)):(s=`Before`,o=this.findHeader(a,s));let c=i.getCallback(`tabToNextHeader`);if(t&&c){let e=r.focusHeaderPositionFromUserFunc({userFunc:c,headerPosition:o,direction:s});if(e){let{headerRowIndex:e}=r.focusedHeader||{};e!=null&&e!=a.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return o||!t?r.focusHeaderPosition({headerPosition:o,direction:s,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(a,s,n)}focusNextHeaderRow(e,t,n){let r=this.beans,i=e.headerRowIndex,a=null,o,s=td(r),c=this.beans.visibleCols.allCols;if(t===`Before`){if(i<=0)return!1;a=K(c),o=i-1,--this.currentHeaderRowWithoutSpan}else a=c[0],o=i+1,this.currentHeaderRowWithoutSpan<s?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:l,headerRowIndex:u}=c_(this.beans,a,o);return u>=s&&(u=-1),r.focusSvc.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:u},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t=`After`){if(e.getPinned())return;let n;if(Z(e)){let r=e.getDisplayedLeafColumns();n=t===`Before`?K(r):r[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){let{colGroupSvc:n,visibleCols:r}=this.beans,i=e.column;if(i instanceof Xc){let e=i.getDisplayedLeafColumns();i=t===`Before`?e[0]:e[e.length-1]}let a=t===`Before`?r.getColBefore(i):r.getColAfter(i);if(!a)return;let o=r.headerGroupRowCount;if(e.headerRowIndex>=o)return{headerRowIndex:e.headerRowIndex,column:a};let s=n?.getColGroupAtLevel(a,e.headerRowIndex);return s?s.isPadding()&&a.isSpanHeaderHeight()?{headerRowIndex:r.headerGroupRowCount,column:a}:{headerRowIndex:e.headerRowIndex,column:s??a}:{headerRowIndex:a instanceof na&&a.isSpanHeaderHeight()?r.headerGroupRowCount:e.headerRowIndex,column:a}}getHeaderRowType(e){let t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function u_(e,t,n){let r=n-1;if(e!==`filter`){let e=t instanceof na&&t.isSpanHeaderHeight(),n=t.getParent();for(;n&&(n.getProvidedColumnGroup().getLevel()>r||e&&n.isPadding());)n=n.getParent();if(n)return e?{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:r}:{column:n,headerRowIndex:r,headerRowIndexWithoutSpan:r}}return{column:t,headerRowIndex:r,headerRowIndexWithoutSpan:r}}function d_(e,t,n){let r=t+1,i={column:e,headerRowIndex:r,headerRowIndexWithoutSpan:r};if(e instanceof Xc){if(r>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:r};let t=e.getDisplayedChildren()[0];if(t instanceof Xc&&t.isPadding()){let e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}i.column=t,t instanceof na&&t.isSpanHeaderHeight()&&(i.headerRowIndex=n,i.headerRowIndexWithoutSpan=r)}return i}var f_=class extends W{constructor(){super(...arguments),this.beanName=`focusSvc`,this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){let e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(mc(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get(`suppressFocusAfterRefresh`)?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;let e=this.focusedCell.column;e!==this.colModel.getCol(e.getId())&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){let{gos:e,focusedCell:t}=this;return e.get(`suppressFocusAfterRefresh`)||e.get(`suppressCellFocus`)||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get(`suppressFocusAfterRefresh`)||!this.focusedHeader||!this.isDomDataPresentInHierarchy(H(this.beans),xd)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){let e=H(this.beans);return this.isDomDataPresentInHierarchy(e,Rc)?!0:this.isDomDataPresentInHierarchy(e,su)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(qr(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){let{rowIndex:t,rowPinned:n,column:r}=e,i={rowIndex:t,rowPinned:n,column:r,isFullWidthCell:!1},a=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return a&&(i.isFullWidthCell=a.isFullWidth()),i}clearFocusedCell(){if(this.focusedCell==null)return;let e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:`cellFocusCleared`,...e})}setFocusedCell(e){this.setFocusRecovered();let{column:t,rowIndex:n,rowPinned:r,forceBrowserFocus:i=!1,preventScrollOnBrowserFocus:a=!1,sourceEvent:o}=e,s=this.colModel.getCol(t);if(!s){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:bt(r),column:s};let c=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:`cellFocused`,...c,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:i,preventScrollOnBrowserFocus:a,sourceEvent:o}),this.previousCellFocusParams=c}isCellFocused(e){return this.focusedCell==null?!1:bs(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;let{column:t,rowCtrl:{rowIndex:n,pinned:r}}=e,{column:i,headerRowIndex:a}=this.focusedHeader;return t===i&&n===a&&r==i.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),bc(this.beans))return!1;let{direction:t,fromTab:n,allowUserOverride:r,event:i,fromCell:a,rowWithoutSpanValue:o}=e,{headerPosition:s}=e;if(a&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(s);if(r){let e=this.focusedHeader,r=td(this.beans);if(n){let n=this.gos.getCallback(`tabToNextHeader`);n&&(s=this.getHeaderPositionFromUserFunc({userFunc:n,direction:t,currentPosition:e,headerPosition:s,headerRowCount:r}))}else{let t=this.gos.getCallback(`navigateToNextHeader`);t&&i&&(s=t({key:i.key,previousHeaderPosition:e,nextHeaderPosition:s,headerRowCount:r,event:i}))}}return s?this.focusProvidedHeaderPosition({headerPosition:s,direction:t,event:i,fromCell:a,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(e){if(bc(this.beans))return!1;let{userFunc:t,headerPosition:n,direction:r,event:i}=e,a=this.focusedHeader,o=td(this.beans),s=this.getHeaderPositionFromUserFunc({userFunc:t,direction:r,currentPosition:a,headerPosition:n,headerRowCount:o});return!!s&&this.focusProvidedHeaderPosition({headerPosition:s,direction:r,event:i})}getHeaderPositionFromUserFunc(e){let{userFunc:t,direction:n,currentPosition:r,headerPosition:i,headerRowCount:a}=e,o=t({backwards:n===`Before`,previousHeaderPosition:r,nextHeaderPosition:i,headerRowCount:a});return o===!0?r:o===!1?null:o}focusProvidedHeaderPosition(e){let{headerPosition:t,direction:n,fromCell:r,rowWithoutSpanValue:i,event:a}=e,{column:o,headerRowIndex:s}=t,{filterManager:c,ctrlsSvc:l,headerNavigation:u}=this.beans;if(s===-1)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:o,event:a});u?.scrollToColumn(o,n);let d=l.getHeaderRowContainerCtrl(o.getPinned())?.focusHeader(t.headerRowIndex,o,a)||!1;return u&&d&&(i!=null||r)&&(u.currentHeaderRowWithoutSpan=i??-1),d}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;let t=c_(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;let t=td(this.beans)-1,n=K(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===bt(t)}focusOverlay(e){let t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&_c(t,e)}focusGridView(e){let{backwards:t=!1,canFocusOverlay:n=!0,event:r}=e;if(this.overlays?.isExclusive())return n&&this.focusOverlay(t);if(xc(this.beans))return t&&!bc(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:Sc(this.beans,t);let i=t?ws(this.beans):Cs(this.beans);if(i){let n=e.column??this.focusedHeader?.column,{rowIndex:a,rowPinned:o}=i,s=Ts(this.beans,i);if(!n||!s||a==null)return!1;if(n.isSuppressNavigable(s)){let e=this.gos.get(`enableRtl`),t;return t=!r||r.key===X.TAB?e?X.LEFT:X.RIGHT:r.key,this.beans.navigation?.navigateToNextCell(null,t,{rowIndex:a,column:n,rowPinned:o||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:a,column:n,rowPinned:o}),t&&this.rowRenderer.getRowByPosition(i)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(i,t)?!0:(this.setFocusedCell({rowIndex:a,column:n,rowPinned:bt(o),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:a,rowPinned:o,column:n}),!0)}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){let n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:td(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},p_=class extends W{constructor(){super(...arguments),this.beanName=`scrollVisibleSvc`}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsSvc.get(`center`);if(!e||this.colAnimation?.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsSvc.get(`center`),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:`scrollGapChanged`}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:`scrollVisibilityChanged`}))}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get(`scrollbarWidth`),t=typeof e==`number`&&e>=0?e:xn();t!=null&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:`scrollbarWidthChanged`}))}return this.scrollbarWidth}},m_=class extends W{constructor(){super(...arguments),this.beanName=`gridDestroySvc`,this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:`gridPreDestroyed`,state:e?.getState()??{}}),this.destroyCalled=!0,t.get(`gridCtrl`)?.destroyGridUi(),n.destroy(),super.destroy()}},h_=new Set([`gridPreDestroyed`,`fillStart`,`pasteStart`]),g_=`columnEverythingChanged.newColumnsLoaded.columnPivotModeChanged.pivotMaxColumnsExceeded.columnRowGroupChanged.expandOrCollapseAll.columnPivotChanged.gridColumnsChanged.columnValueChanged.columnMoved.columnVisible.columnPinned.columnGroupOpened.columnResized.displayedColumnsChanged.virtualColumnsChanged.columnHeaderMouseOver.columnHeaderMouseLeave.columnHeaderClicked.columnHeaderContextMenu.asyncTransactionsFlushed.rowGroupOpened.rowDataUpdated.pinnedRowDataChanged.pinnedRowsChanged.rangeSelectionChanged.cellSelectionChanged.chartCreated.chartRangeSelectionChanged.chartOptionsChanged.chartDestroyed.toolPanelVisibleChanged.toolPanelSizeChanged.modelUpdated.cutStart.cutEnd.pasteStart.pasteEnd.fillStart.fillEnd.cellSelectionDeleteStart.cellSelectionDeleteEnd.rangeDeleteStart.rangeDeleteEnd.undoStarted.undoEnded.redoStarted.redoEnded.cellClicked.cellDoubleClicked.cellMouseDown.cellContextMenu.cellValueChanged.cellEditRequest.rowValueChanged.headerFocused.cellFocused.rowSelected.selectionChanged.tooltipShow.tooltipHide.cellKeyDown.cellMouseOver.cellMouseOut.filterChanged.filterModified.filterUiChanged.filterOpened.floatingFilterUiChanged.advancedFilterBuilderVisibleChanged.sortChanged.virtualRowRemoved.rowClicked.rowDoubleClicked.gridReady.gridPreDestroyed.gridSizeChanged.viewportChanged.firstDataRendered.dragStarted.dragStopped.dragCancelled.rowEditingStarted.rowEditingStopped.cellEditingStarted.cellEditingStopped.bodyScroll.bodyScrollEnd.paginationChanged.componentStateChanged.storeRefreshed.stateUpdated.columnMenuVisibleChanged.contextMenuVisibleChanged.rowDragEnter.rowDragMove.rowDragLeave.rowDragEnd.rowDragCancel.findChanged.rowResizeStarted.rowResizeEnded.columnsReset.bulkEditingStarted.bulkEditingStopped.batchEditingStarted.batchEditingStopped`.split(`.`).reduce((e,t)=>(e[t]=Ai(t),e),{}),__=(e,t)=>({tag:`span`,ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":`true`}}),v_={tag:`span`,cls:`ag-sort-indicator-container`,children:[__(`Order`,`order`),__(`Asc`,`ascending-icon`),__(`Desc`,`descending-icon`),__(`Mixed`,`mixed-icon`),__(`None`,`none-icon`)]},y_=class extends q{constructor(e){super(),this.eSortOrder=null,this.eSortAsc=null,this.eSortDesc=null,this.eSortMixed=null,this.eSortNone=null,e||this.setTemplate(v_)}attachCustomElements(e,t,n,r,i){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=r,this.eSortNone=i}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon(`sortAscending`,this.eSortAsc,e),this.addInIcon(`sortDescending`,this.eSortDesc,e),this.addInIcon(`sortUnSort`,this.eSortNone,e);let n=this.updateIcons.bind(this),r=this.onSortChanged.bind(this);this.addManagedPropertyListener(`unSortIcon`,n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:r,columnRowGroupChanged:r}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;let r=zd(e,this.beans,n);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:e,eSortDesc:t,eSortNone:n,column:r,gos:i,beans:a}=this,o=a.sortSvc.getDisplaySortForColumn(r);e&&P(e,o===`asc`,{skipAriaHidden:!0}),t&&P(t,o===`desc`,{skipAriaHidden:!0}),n&&P(n,!(!r.getColDef().unSortIcon&&!i.get(`unSortIcon`))&&o==null,{skipAriaHidden:!0})}setupMultiSortIndicator(){let{eSortMixed:e,column:t,gos:n}=this;this.addInIcon(`sortUnSort`,e,t);let r=t.getColDef().showRowGroup;ii(n)&&r&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:e,beans:t,column:n}=this;e&&P(e,t.sortSvc.getDisplaySortForColumn(n)===`mixed`,{skipAriaHidden:!0})}updateSortOrder(){let{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;let r=n.getColumnsWithSortingOrdered(),i=n.getDisplaySortIndexForColumn(t)??-1,a=r.some(e=>n.getDisplaySortIndexForColumn(e)??!1);P(e,i>=0&&a,{skipAriaHidden:!0}),i>=0?e.textContent=(i+1).toString():Rn(e)}},b_={selector:`AG-SORT-INDICATOR`,component:y_},x_=[`asc`,`desc`,null],S_=class extends W{constructor(){super(...arguments),this.beanName=`sortSvc`}progressSort(e,t,n){let r=this.getNextSortDirection(e);this.setSortForColumn(e,r,t,n)}progressSortFromEvent(e,t){let n=this.gos.get(`multiSortKey`)===`ctrl`?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,n,`uiColumnSorted`)}setSortForColumn(e,t,n,r){t!==`asc`&&t!==`desc`&&(t=null);let{gos:i,showRowGroupCols:a}=this.beans,o=ii(i),s=[e];if(o&&e.getColDef().showRowGroup){let t=(a?.getSourceColumnsForGroupColumn?.(e))?.filter(e=>e.isSortable());t&&(s=[e,...t])}s.forEach(e=>this.setColSort(e,t,r));let c=(n||i.get(`alwaysMultiSort`))&&!i.get(`suppressMultiSort`),l=[];if(!c){let e=this.clearSortBarTheseColumns(s,r);l.push(...e)}this.updateSortIndex(e),l.push(...s),this.dispatchSortChangedEvents(r,l)}updateSortIndex(e){let{gos:t,colModel:n,showRowGroupCols:r}=this.beans,i=ii(t),a=r?.getShowRowGroupCol(e.getId()),o=i&&a||e,s=this.getColumnsWithSortingOrdered();n.forAllCols(e=>this.setColSortIndex(e,null));let c=s.filter(e=>i&&e.getColDef().showRowGroup?!1:e!==o);(o.getSort()?[...c,o]:c).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){let n={type:`sortChanged`,source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.beans.colModel.forAllCols(r=>{e.includes(r)||(r.getSort()&&n.push(r),this.setColSort(r,void 0,t))}),n}getNextSortDirection(e){let t=e.getColDef().sortingOrder??this.gos.get(`sortingOrder`)??x_,n=t.indexOf(e.getSort()),r=n<0,i=n==t.length-1;return r||i?t[0]:t[n+1]}getIndexedSortMap(){let{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:r}=this.beans,i=[];if(t.forAllCols(e=>{e.getSort()&&i.push(e)}),t.isPivotMode()){let t=ii(e);i=i.filter(e=>{let r=!!e.getAggFunc(),i=!e.isPrimary(),a=t?n?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return r||i||a})}let a=r?.columns.filter(e=>!!e.getSort())??[],o={};i.forEach((e,t)=>o[e.getId()]=t),i.sort((e,t)=>{let n=e.getSortIndex(),r=t.getSortIndex();return n!=null&&r!=null?n-r:n==null&&r==null?o[e.getId()]>o[t.getId()]?1:-1:r==null?-1:1});let s=ii(e)&&!!a.length;s&&(i=[...new Set(i.map(e=>n?.getShowRowGroupCol(e.getId())??e))]);let c=new Map;return i.forEach((e,t)=>c.set(e,t)),s&&a.forEach(e=>{let t=n.getShowRowGroupCol(e.getId());c.set(e,c.get(t))}),c}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=ii(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let n=e.getColDef().field!=null||e.getColDef().valueGetter?[e,...t]:t,r=n[0].getSort();return n.every(e=>e.getSort()==r)?r:`mixed`}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let r=0;e.addManagedListeners(t,{movingChanged:()=>{r=Date.now()}}),n&&e.addManagedElementListeners(n,{click:e=>{let n=t.isMoving(),i=Date.now()-r<50;n||i||this.progressSortFromEvent(t,e)}});let i=()=>{let n=t.getSort();if(e.toggleCss(`ag-header-cell-sorted-asc`,n===`asc`),e.toggleCss(`ag-header-cell-sorted-desc`,n===`desc`),e.toggleCss(`ag-header-cell-sorted-none`,!n),t.getColDef().showRowGroup){let n=!(this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t))?.every(e=>t.getSort()==e.getSort());e.toggleCss(`ag-header-cell-sorted-mixed`,n)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){let{sort:t,initialSort:n,sortIndex:r,initialSortIndex:i}=e.colDef;t===void 0?(n===`asc`||n===`desc`)&&(e.sort=n):(t===`asc`||t===`desc`)&&(e.sort=t),r===void 0?i!==null&&(e.sortIndex=i):r!==null&&(e.sortIndex=r)}updateColSort(e,t,n){t!==void 0&&(t===`desc`||t===`asc`?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent(`sortChanged`,n)),e.dispatchStateUpdatedEvent(`sort`)}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent(`sortIndex`)}createSortIndicator(e){return new y_(e)}getSortIndicatorSelector(){return b_}},C_={agSetColumnFilter:`SetFilter`,agSetColumnFloatingFilter:`SetFilter`,agMultiColumnFilter:`MultiFilter`,agMultiColumnFloatingFilter:`MultiFilter`,agGroupColumnFilter:`GroupFilter`,agGroupColumnFloatingFilter:`GroupFilter`,agGroupCellRenderer:`GroupCellRenderer`,agGroupRowRenderer:`GroupCellRenderer`,agRichSelect:`RichSelect`,agRichSelectCellEditor:`RichSelect`,agDetailCellRenderer:`SharedMasterDetail`,agSparklineCellRenderer:`Sparklines`,agDragAndDropImage:`SharedDragAndDrop`,agColumnHeader:`ColumnHeaderComp`,agColumnGroupHeader:`ColumnGroupHeaderComp`,agSortIndicator:`Sort`,agAnimateShowChangeCellRenderer:`HighlightChanges`,agAnimateSlideCellRenderer:`HighlightChanges`,agLoadingCellRenderer:`LoadingCellRenderer`,agSkeletonCellRenderer:`SkeletonCellRenderer`,agCheckboxCellRenderer:`CheckboxCellRenderer`,agLoadingOverlay:`Overlay`,agNoRowsOverlay:`Overlay`,agTooltipComponent:`Tooltip`,agReadOnlyFloatingFilter:`CustomFilter`,agTextColumnFilter:`TextFilter`,agNumberColumnFilter:`NumberFilter`,agDateColumnFilter:`DateFilter`,agDateInput:`DateFilter`,agTextColumnFloatingFilter:`TextFilter`,agNumberColumnFloatingFilter:`NumberFilter`,agDateColumnFloatingFilter:`DateFilter`,agCellEditor:`TextEditor`,agSelectCellEditor:`SelectEditor`,agTextCellEditor:`TextEditor`,agNumberCellEditor:`NumberEditor`,agDateCellEditor:`DateEditor`,agDateStringCellEditor:`DateEditor`,agCheckboxCellEditor:`CheckboxEditor`,agLargeTextCellEditor:`LargeTextEditor`,agMenuItem:`MenuItem`,agColumnsToolPanel:`ColumnsToolPanel`,agFiltersToolPanel:`FiltersToolPanel`,agNewFiltersToolPanel:`NewFiltersToolPanel`,agAggregationComponent:`StatusBar`,agSelectedRowCountComponent:`StatusBar`,agTotalRowCountComponent:`StatusBar`,agFilteredRowCountComponent:`StatusBar`,agTotalAndFilteredRowCountComponent:`StatusBar`,agFindCellRenderer:`Find`},w_=()=>({checkboxSelection:{version:`32.2`,message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:`32.2`,message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:`32.2`,message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:`32.2`,message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:`32.2`,message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),T_={aggFunc:`SharedAggregation`,autoHeight:`RowAutoHeight`,cellClass:`CellStyle`,cellClassRules:`CellStyle`,cellEditor:({cellEditor:e,editable:t})=>t?typeof e==`string`?C_[e]??`CustomEditor`:`CustomEditor`:null,cellRenderer:({cellRenderer:e})=>typeof e==`string`?C_[e]:null,cellStyle:`CellStyle`,columnChooserParams:`ColumnMenu`,contextMenuItems:`ContextMenu`,dndSource:`DragAndDrop`,dndSourceOnRowDrag:`DragAndDrop`,editable:({editable:e,cellEditor:t})=>e&&!t?`TextEditor`:null,enableCellChangeFlash:`HighlightChanges`,enablePivot:`SharedPivot`,enableRowGroup:`SharedRowGrouping`,enableValue:`SharedAggregation`,filter:({filter:e})=>e&&typeof e!=`string`&&typeof e!=`boolean`?`CustomFilter`:typeof e==`string`?C_[e]??`ColumnFilter`:`ColumnFilter`,floatingFilter:`ColumnFilter`,getQuickFilterText:`QuickFilter`,headerTooltip:`Tooltip`,mainMenuItems:`ColumnMenu`,menuTabs:e=>{let t=[`columnsMenuTab`,`generalMenuTab`];return e.menuTabs?.some(e=>t.includes(e))?`ColumnMenu`:null},pivot:`SharedPivot`,pivotIndex:`SharedPivot`,rowDrag:`RowDrag`,rowGroup:`SharedRowGrouping`,rowGroupIndex:`SharedRowGrouping`,tooltipField:`Tooltip`,tooltipValueGetter:`Tooltip`,spanRows:`CellSpan`},E_=()=>({autoHeight:{supportedRowModels:[`clientSide`,`serverSide`],validate:(e,{paginationAutoPageSize:t})=>t?`colDef.autoHeight is not supported with paginationAutoPageSize.`:null},cellRendererParams:{validate:e=>(e.rowGroup!=null||e.rowGroupIndex!=null||e.cellRenderer===`agGroupCellRenderer`)&&`checkbox`in e.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(e,t)=>t.autoSizeStrategy?`colDef.flex is not supported with gridOptions.autoSizeStrategy`:null},headerCheckboxSelection:{supportedRowModels:[`clientSide`,`serverSide`],validate:(e,{rowSelection:t})=>t===`multiple`?null:`headerCheckboxSelection is only supported with rowSelection=multiple`},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:[`clientSide`],validate:(e,{rowSelection:t})=>t===`multiple`?null:`headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple`},headerCheckboxSelectionFilteredOnly:{supportedRowModels:[`clientSide`],validate:(e,{rowSelection:t})=>t===`multiple`?null:`headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple`},headerValueGetter:{validate:e=>{let t=e.headerValueGetter;return typeof t==`function`||typeof t==`string`?null:`headerValueGetter must be a function or a valid string expression`}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return Lr(262);if(e.smallLeft)return Lr(263);if(e.smallRight)return Lr(264)}return null}},sortingOrder:{validate:e=>{let t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){let e=t.filter(e=>!x_.includes(e));if(e.length>0)return`sortingOrder must be an array with elements from [${x_.map(Ar).join()}], currently it includes [${e.map(Ar).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},type:{validate:e=>{let t=e.type;return t instanceof Array?t.some(e=>typeof e!=`string`)?`if colDef.type is supplied an array it should be of type 'string[]'`:null:typeof t==`string`?null:`colDef.type should be of type 'string' | 'string[]'`}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:`colDef.rowSpan requires suppressRowTransform to be enabled.`},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(e,{rowSelection:t,cellSelection:n,suppressRowTransform:r,enableCellSpan:i,rowDragEntireRow:a,enableCellTextSelection:o})=>typeof t==`object`&&t?.mode===`singleRow`&&t?.enableClickSelection?`colDef.spanRows is not supported with rowSelection.clickSelection`:n?`colDef.spanRows is not supported with cellSelection.`:r?`colDef.spanRows is not supported with suppressRowTransform.`:i?a?`colDef.spanRows is not supported with rowDragEntireRow.`:o?`colDef.spanRows is not supported with enableCellTextSelection.`:null:`colDef.spanRows requires enableCellSpan to be enabled.`}}),D_={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},O_=()=>Object.keys(D_),k_=()=>({objectName:`colDef`,allProperties:O_(),docsUrl:`column-properties/`,deprecations:w_(),validations:E_()}),A_=`overlayLoadingTemplate.overlayNoRowsTemplate.gridId.quickFilterText.rowModelType.editType.domLayout.clipboardDelimiter.rowGroupPanelShow.multiSortKey.pivotColumnGroupTotals.pivotRowTotals.pivotPanelShow.fillHandleDirection.groupDisplayType.treeDataDisplayType.treeDataChildrenField.treeDataParentIdField.colResizeDefault.tooltipTrigger.serverSidePivotResultFieldSeparator.columnMenu.tooltipShowMode.invalidEditValueMode.grandTotalRow.themeCssLayer.findSearchValue.styleNonce.renderingMode`.split(`.`),j_=`components.rowStyle.context.autoGroupColumnDef.localeText.icons.datasource.dragAndDropImageComponentParams.serverSideDatasource.viewportDatasource.groupRowRendererParams.aggFuncs.fullWidthCellRendererParams.defaultColGroupDef.defaultColDef.defaultCsvExportParams.defaultExcelExportParams.columnTypes.rowClassRules.detailCellRendererParams.loadingCellRendererParams.loadingOverlayComponentParams.noRowsOverlayComponentParams.popupParent.themeStyleContainer.statusBar.chartThemeOverrides.customChartThemes.chartToolPanelsDef.dataTypeDefinitions.advancedFilterParent.advancedFilterBuilderParams.advancedFilterParams.initialState.autoSizeStrategy.selectionColumnDef.findOptions.filterHandlers`.split(`.`),M_=[`sortingOrder`,`alignedGrids`,`rowData`,`columnDefs`,`excelStyles`,`pinnedTopRowData`,`pinnedBottomRowData`,`chartThemes`,`rowClass`,`paginationPageSizeSelector`],N_=`rowHeight.detailRowHeight.rowBuffer.headerHeight.groupHeaderHeight.groupLockGroupColumns.floatingFiltersHeight.pivotHeaderHeight.pivotGroupHeaderHeight.groupDefaultExpanded.pivotDefaultExpanded.viewportRowModelPageSize.viewportRowModelBufferSize.autoSizePadding.maxBlocksInCache.maxConcurrentDatasourceRequests.tooltipShowDelay.tooltipHideDelay.cacheOverflowSize.paginationPageSize.cacheBlockSize.infiniteInitialRowCount.serverSideInitialRowCount.scrollbarWidth.asyncTransactionWaitMillis.blockLoadDebounceMillis.keepDetailRowsCount.undoRedoCellEditingLimit.cellFlashDuration.cellFadeDuration.tabIndex.pivotMaxGeneratedColumns.rowDragInsertDelay`.split(`.`),P_=[`theme`,`rowSelection`],F_=[`cellSelection`,`sideBar`,`rowNumbers`,`suppressGroupChangesColumnVisibility`,`groupAggFiltering`,`suppressStickyTotalRow`,`groupHideParentOfSingleChild`,`enableRowPinning`],I_=`loadThemeGoogleFonts.suppressMakeColumnVisibleAfterUnGroup.suppressRowClickSelection.suppressCellFocus.suppressHeaderFocus.suppressHorizontalScroll.groupSelectsChildren.alwaysShowHorizontalScroll.alwaysShowVerticalScroll.debug.enableBrowserTooltips.enableCellExpressions.groupSuppressBlankHeader.suppressMenuHide.suppressRowDeselection.unSortIcon.suppressMultiSort.alwaysMultiSort.singleClickEdit.suppressLoadingOverlay.suppressNoRowsOverlay.suppressAutoSize.skipHeaderOnAutoSize.suppressColumnMoveAnimation.suppressMoveWhenColumnDragging.suppressMovableColumns.suppressFieldDotNotation.enableRangeSelection.enableRangeHandle.enableFillHandle.suppressClearOnFillReduction.deltaSort.suppressTouch.allowContextMenuWithControlKey.suppressContextMenu.suppressDragLeaveHidesColumns.suppressRowGroupHidesColumns.suppressMiddleClickScrolls.suppressPreventDefaultOnMouseWheel.suppressCopyRowsToClipboard.copyHeadersToClipboard.copyGroupHeadersToClipboard.pivotMode.suppressAggFuncInHeader.suppressColumnVirtualisation.alwaysAggregateAtRootLevel.suppressFocusAfterRefresh.functionsReadOnly.animateRows.groupSelectsFiltered.groupRemoveSingleChildren.groupRemoveLowestSingleChildren.enableRtl.enableCellSpan.suppressClickEdit.rowDragEntireRow.rowDragManaged.suppressRowDrag.suppressMoveWhenRowDragging.rowDragMultiRow.enableGroupEdit.embedFullWidthRows.suppressPaginationPanel.groupHideOpenParents.groupAllowUnbalanced.pagination.paginationAutoPageSize.suppressScrollOnNewData.suppressScrollWhenPopupsAreOpen.purgeClosedRowNodes.cacheQuickFilter.includeHiddenColumnsInQuickFilter.ensureDomOrder.accentedSort.suppressChangeDetection.valueCache.valueCacheNeverExpires.aggregateOnlyChangedColumns.suppressAnimationFrame.suppressExcelExport.suppressCsvExport.includeHiddenColumnsInAdvancedFilter.suppressMultiRangeSelection.enterNavigatesVerticallyAfterEdit.enterNavigatesVertically.suppressPropertyNamesCheck.rowMultiSelectWithClick.suppressRowHoverHighlight.suppressRowTransform.suppressClipboardPaste.suppressLastEmptyLineOnPaste.enableCharts.suppressMaintainUnsortedOrder.enableCellTextSelection.suppressBrowserResizeObserver.suppressMaxRenderedRowRestriction.excludeChildrenWhenTreeDataFiltering.tooltipMouseTrack.tooltipInteraction.keepDetailRows.paginateChildRows.preventDefaultOnContextMenu.undoRedoCellEditing.allowDragFromColumnsToolPanel.pivotSuppressAutoColumn.suppressExpandablePivotGroups.debounceVerticalScrollbar.detailRowAutoHeight.serverSideSortAllLevels.serverSideEnableClientSideSort.serverSideOnlyRefreshFilteredGroups.suppressAggFilteredOnly.showOpenedGroup.suppressClipboardApi.suppressModelUpdateAfterUpdateTransaction.stopEditingWhenCellsLoseFocus.groupMaintainOrder.columnHoverHighlight.readOnlyEdit.suppressRowVirtualisation.enableCellEditingOnBackspace.resetRowDataOnUpdate.removePivotHeaderRowWhenSingleValueColumn.suppressCopySingleCellRanges.suppressGroupRowsSticky.suppressCutToClipboard.rowGroupPanelSuppressSort.allowShowChangeAfterFilter.enableAdvancedFilter.masterDetail.treeData.reactiveCustomComponents.applyQuickFilterBeforePivotOrAgg.suppressServerSideFullWidthLoadingRow.suppressAdvancedFilterEval.loading.maintainColumnOrder.enableStrictPivotColumnOrder.suppressSetFilterByDefault.enableFilterHandlers.suppressStartEditOnTab.hidePaddedHeaderRows`.split(`.`),L_=`doesExternalFilterPass.processPivotResultColDef.processPivotResultColGroupDef.getBusinessKeyForNode.isRowSelectable.rowDragText.groupRowRenderer.dragAndDropImageComponent.fullWidthCellRenderer.loadingCellRenderer.loadingOverlayComponent.noRowsOverlayComponent.detailCellRenderer.quickFilterParser.quickFilterMatcher.getLocaleText.isExternalFilterPresent.getRowHeight.getRowClass.getRowStyle.getFullRowEditValidationErrors.getContextMenuItems.getMainMenuItems.processRowPostCreate.processCellForClipboard.getGroupRowAgg.isFullWidthRow.sendToClipboard.focusGridInnerElement.navigateToNextHeader.tabToNextHeader.navigateToNextCell.tabToNextCell.processCellFromClipboard.getDocument.postProcessPopup.getChildCount.getDataPath.isRowMaster.postSortRows.processHeaderForClipboard.processUnpinnedColumns.processGroupHeaderForClipboard.paginationNumberFormatter.processDataFromClipboard.getServerSideGroupKey.isServerSideGroup.createChartContainer.getChartToolbarItems.fillOperation.isApplyServerSideTransaction.getServerSideGroupLevelParams.isServerSideGroupOpenByDefault.isGroupOpenByDefault.initialGroupOrderComparator.loadingCellRendererSelector.getRowId.chartMenuItems.groupTotalRow.alwaysPassFilter.isRowPinnable.isRowPinned.isRowValidDropPosition`.split(`.`),R_=()=>[...M_,...j_,...A_,...N_,...L_,...I_,...F_,...P_],z_=()=>({suppressLoadingOverlay:{version:`32`,message:"Use `loading`=false instead."},enableFillHandle:{version:`32.2`,message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:`32.2`,message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:`32.2`,message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:`32.2`,message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:`32.2`,message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:`32.2`,message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:`32.2`,message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:`32.2`,message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:`32.2`,message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:`32.2`,message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:`32.2`,message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:`32.2`,message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:`32.2`,message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:`32.2`,message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:`32.2`,message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:`32.2`,message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:`32.2`,message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:`32.2`,message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:`32.2`,message:`The grid always uses the browser's ResizeObserver, this grid option has no effect.`},onColumnEverythingChanged:{version:`32.2`,message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:`33`,message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:`33`,message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:`33`,message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:`33`,message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:`33`,message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:`33`,message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:`33`,message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:`34`,message:`Advanced filter no longer uses function evaluation, so this option has no effect.`}});function B_(e,t,n){return typeof t==`number`||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var V_={alignedGrids:`AlignedGrids`,allowContextMenuWithControlKey:`ContextMenu`,autoSizeStrategy:`ColumnAutoSize`,cellSelection:`CellSelection`,columnHoverHighlight:`ColumnHover`,datasource:`InfiniteRowModel`,doesExternalFilterPass:`ExternalFilter`,editType:`EditCore`,invalidEditValueMode:`EditCore`,enableAdvancedFilter:`AdvancedFilter`,enableCellSpan:`CellSpan`,enableCharts:`IntegratedCharts`,enableRangeSelection:`CellSelection`,enableRowPinning:`PinnedRow`,findSearchValue:`Find`,getFullRowEditValidationErrors:`EditCore`,getContextMenuItems:`ContextMenu`,getLocaleText:`Locale`,getMainMenuItems:`ColumnMenu`,getRowClass:`RowStyle`,getRowStyle:`RowStyle`,groupTotalRow:`SharedRowGrouping`,grandTotalRow:`SharedRowGrouping`,initialState:`GridState`,isExternalFilterPresent:`ExternalFilter`,isRowPinnable:`PinnedRow`,isRowPinned:`PinnedRow`,localeText:`Locale`,masterDetail:`SharedMasterDetail`,pagination:`Pagination`,pinnedBottomRowData:`PinnedRow`,pinnedTopRowData:`PinnedRow`,pivotMode:`SharedPivot`,pivotPanelShow:`RowGroupingPanel`,quickFilterText:`QuickFilter`,rowClass:`RowStyle`,rowClassRules:`RowStyle`,rowData:`ClientSideRowModel`,rowDragManaged:`RowDrag`,rowGroupPanelShow:`RowGroupingPanel`,rowNumbers:`RowNumbers`,rowSelection:`SharedRowSelection`,rowStyle:`RowStyle`,serverSideDatasource:`ServerSideRowModel`,sideBar:`SideBar`,statusBar:`StatusBar`,treeData:`SharedTreeData`,undoRedoCellEditing:`UndoRedoEdit`,valueCache:`ValueCache`,viewportDatasource:`ViewportRowModel`},H_=()=>{let e={autoSizePadding:{validate({autoSizePadding:e}){return B_(`autoSizePadding`,e,0)}},cacheBlockSize:{supportedRowModels:[`serverSide`,`infinite`],validate({cacheBlockSize:e}){return B_(`cacheBlockSize`,e,1)}},cacheOverflowSize:{validate({cacheOverflowSize:e}){return B_(`cacheOverflowSize`,e,1)}},datasource:{supportedRowModels:[`infinite`]},domLayout:{validate:e=>{let t=e.domLayout,n=[`autoHeight`,`normal`,`print`];return t&&!n.includes(t)?`domLayout must be one of [${n.join()}], currently it's ${t}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:[`clientSide`],validate({enableRowPinning:e,pinnedTopRowData:t,pinnedBottomRowData:n}){return e&&(t||n)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:[`clientSide`],validate({enableRowPinning:e,isRowPinnable:t,pinnedTopRowData:n,pinnedBottomRowData:r}){return t&&(n||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!e&&t?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:[`clientSide`],validate({enableRowPinning:e,isRowPinned:t,pinnedTopRowData:n,pinnedBottomRowData:r}){return t&&(n||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!e&&t?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:[`clientSide`]},groupHideOpenParents:{supportedRowModels:[`clientSide`,`serverSide`],dependencies:{groupTotalRow:{required:[void 0,`bottom`]},treeData:{required:[void 0,!1],reason:`Tree Data has values at the group level so it doesn't make sense to hide them.`}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:[`multiple`]}}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return Lr(262);if(e.smallLeft)return Lr(263);if(e.smallRight)return Lr(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:e}){return B_(`infiniteInitialRowCount`,e,1)}},initialGroupOrderComparator:{supportedRowModels:[`clientSide`]},keepDetailRowsCount:{validate({keepDetailRowsCount:e}){return B_(`keepDetailRowsCount`,e,1)}},paginationPageSize:{validate({paginationPageSize:e}){return B_(`paginationPageSize`,e,1)}},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return typeof t==`boolean`||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:`Pivot Mode is not supported with Tree Data.`}}},quickFilterText:{supportedRowModels:[`clientSide`]},rowBuffer:{validate({rowBuffer:e}){return B_(`rowBuffer`,e,0)}},rowClass:{validate:e=>typeof e.rowClass==`function`?`rowClass should not be a function, please use getRowClass instead`:null},rowData:{supportedRowModels:[`clientSide`]},rowDragManaged:{supportedRowModels:[`clientSide`],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:e}){return e&&typeof e==`string`?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!=`object`?"Expected `RowSelectionOptions` object for the `rowSelection` property.":e&&e.mode!==`multiRow`&&e.mode!==`singleRow`?`Selection mode "${e.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:e=>{let t=e.rowStyle;return t&&typeof t==`function`?`rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead`:null}},serverSideDatasource:{supportedRowModels:[`serverSide`]},serverSideInitialRowCount:{supportedRowModels:[`serverSide`],validate({serverSideInitialRowCount:e}){return B_(`serverSideInitialRowCount`,e,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:[`serverSide`]},serverSideSortAllLevels:{supportedRowModels:[`serverSide`]},sortingOrder:{validate:e=>{let t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){let e=t.filter(e=>!x_.includes(e));if(e.length>0)return`sortingOrder must be an array with elements from [${x_.map(Ar).join()}], currently it includes [${e.map(Ar).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?`tooltipHideDelay should not be lower than 0`:null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?`tooltipShowDelay should not be lower than 0`:null},treeData:{supportedRowModels:[`clientSide`,`serverSide`],validate:e=>{let t=e.rowModelType??`clientSide`;switch(t){case`clientSide`:{let{treeDataChildrenField:t,treeDataParentIdField:n,getDataPath:r,getRowId:i}=e;if(!t&&!n&&!r)return`treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.`;if(t){if(r)return`Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.`;if(n)return`Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time.`}if(n){if(!i)return`getRowId callback not provided, tree data with parent id cannot be built.`;if(r)return`Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time.`}return null}case`serverSide`:{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}}return null}},viewportDatasource:{supportedRowModels:[`viewport`]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:e}){return B_(`viewportRowModelBufferSize`,e,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:e}){return B_(`viewportRowModelPageSize`,e,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:e,showOpenedGroup:t}){return e?.field&&t?`autoGroupColumnDef.field and showOpenedGroup are not supported when used together.`:e?.valueGetter&&t?`autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.`:null}},renderingMode:{validate:e=>{let t=e.renderingMode,n=[`default`,`legacy`];return t&&!n.includes(t)?`renderingMode must be one of [${n.join()}], currently it's ${t}`:null}}},t={};return I_.forEach(e=>{t[e]={expectedType:`boolean`}}),N_.forEach(e=>{t[e]={expectedType:`number`}}),N(t,e),t},U_=()=>({objectName:`gridOptions`,allProperties:[...R_(),...Object.values(g_)],propertyExceptions:[`api`],docsUrl:`grid-options/`,deprecations:z_(),validations:H_()}),W_=0,G_=0,K_=class extends W{constructor(){super(...arguments),this.beanName=`gos`,this.domDataKey=`__AG_`+Math.random().toString(),this.gridInstanceId=G_++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new gt,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;let r=h_.has(t);if(r&&!e||!r&&e||!q_(t))return;let i=(e,t)=>{let n=g_[e],r=this.gridOptions[n];typeof r==`function`&&this.beans.frameworkOverrides.wrapOutgoing(()=>r(t))};if(this.gridReadyFired)i(t,n);else if(t===`gridReady`){i(t,n),this.gridReadyFired=!0;for(let e of this.queueEvents)i(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:`gridOptionsUpdated`})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??At[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return j(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(t=>e(this.addGridCommonParams(t)))}updateGridOptions({options:e,force:t,source:n=`api`}){let r={id:W_++,properties:[]},i=[],{gridOptions:a,validation:o}=this;for(let s of Object.keys(e)){let c=e[s];o?.warnOnInitialPropertyUpdate(n,s);let l=t||typeof c==`object`&&n===`api`,u=a[s];if(l||u!==c){a[s]=c;let e={type:s,currentValue:c,previousValue:u,changeSet:r,source:n};i.push(e)}}this.validateGridOptions(this.gridOptions),r.properties=i.map(e=>e.type),i.forEach(e=>{lr(this,`Updated property ${e.type} from`,e.previousValue,` to `,e.currentValue),this.propEventSvc.dispatchEvent(e)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(let n of Object.keys(e)){let r=e[n];if(r==null||r===!1)continue;let i=t[n];typeof i==`function`&&(i=i(e,this.gridOptions,this.beans)),i&&this.assertModuleRegistered(i,n)}}validateGridOptions(e){this.validateOptions(e,V_),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,T_),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){let n=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return n||R(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:cs(),rowModelType:this.get(`rowModelType`),isUmd:fs()}}isModuleRegistered(e){return ss(e,this.gridId,this.get(`rowModelType`))}};function q_(e){return!!g_[e]}function J_(e){let t={"aria-hidden":`true`};return{tag:`div`,cls:`ag-cell-label-container`,role:`presentation`,children:[{tag:`span`,ref:`eMenu`,cls:`ag-header-icon ag-header-cell-menu-button`,attrs:t},{tag:`span`,ref:`eFilterButton`,cls:`ag-header-icon ag-header-cell-filter-button`,attrs:t},{tag:`div`,ref:`eLabel`,cls:`ag-header-cell-label`,role:`presentation`,children:[{tag:`span`,ref:`eText`,cls:`ag-header-cell-text`},{tag:`span`,ref:`eFilter`,cls:`ag-header-icon ag-header-label-icon ag-filter-icon`,attrs:t},e?{tag:`ag-sort-indicator`,ref:`eSortIndicator`}:null]}]}}var Y_=J_(!0),X_=J_(!1),Z_=class extends q{constructor(){super(...arguments),this.eFilter=null,this.eFilterButton=null,this.eSortIndicator=null,this.eMenu=null,this.eLabel=null,this.eText=null,this.eSortOrder=null,this.eSortAsc=null,this.eSortDesc=null,this.eSortMixed=null,this.eSortNone=null,this.isLoadingInnerComponent=!1}refresh(e){let t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){let t={...e};N(t,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){let n=e.template;return n?n?.trim?n.trim():n:t?Y_:X_}init(e){this.params=e;let{sortSvc:t,touchSvc:n,rowNumbersSvc:r,userCompFactory:i}=this.beans,a=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!a),this.setTemplate(this.currentTemplate,a?[a]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),r?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(i,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){let n=jo(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){let{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Xi(t))}addInIcon(e,t,n){let r=zd(e,this.beans,n);r&&t.appendChild(r)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){zn(this.eMenu),this.eMenu=void 0;return}let{gos:e,eMenu:t,params:n}=this,r=Oi(e);this.addInIcon(r?`menu`:`menuAlt`,t,n.column),t.classList.toggle(`ag-header-menu-icon`,!r);let i=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=i,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(i)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle(`ag-header-menu-always-show`,e)}showColumnMenu(e){let{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){let{params:t,gos:n,beans:r,eMenu:i,eFilterButton:a}=this,o=t.column,s=Oi(n);if(e&&!s){if(r.menuSvc?.isFilterMenuInHeaderEnabled(o))return t.showFilter(a??i??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(i??a??this.getGui()),!0;return!1}setupSort(){let{sortSvc:e}=this.beans;if(!e)return;let{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));let{eSortIndicator:t,eSortOrder:n,eSortAsc:r,eSortDesc:i,eSortMixed:a,eSortNone:o}=this;t.attachCustomElements(n,r,i,a,o)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){let{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,()=>{P(e,t.column.isFilterActive(),{skipAriaHidden:!0})},`filterActive`)}setupFilterButton(){let{eFilterButton:e,params:t}=this;e&&(this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),`filter`)?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0)}configureFilter(e,t,n,r){if(!e)return zn(t),!1;let i=this.params.column;return this.addInIcon(r,t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle(`ag-filter-active`,e)}getAnchorElementForMenu(e){let{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&=(this.destroyBean(this.innerHeaderComponent),void 0)}},Q_={tag:`div`,cls:`ag-header-group-cell-label`,role:`presentation`,children:[{tag:`span`,ref:`agLabel`,cls:`ag-header-group-text`,role:`presentation`},{tag:`span`,ref:`agOpened`,cls:`ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded`},{tag:`span`,ref:`agClosed`,cls:`ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed`}]},$_=class extends q{constructor(){super(Q_),this.agOpened=null,this.agClosed=null,this.agLabel=null,this.isLoadingInnerComponent=!1}init(e){let{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&L(89)}workOutInnerHeaderGroupComponent(e,t){let n=No(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){let{agOpened:e,agClosed:t,params:{columnGroup:n},beans:r}=this;this.addInIcon(`columnGroupOpened`,e),this.addInIcon(`columnGroupClosed`,t);let i=e=>{if(zi(e))return;let t=!n.isExpanded();r.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),t,`uiColumnExpanded`)};this.addTouchAndClickListeners(r,t,i),this.addTouchAndClickListeners(r,e,i);let a=e=>{Ri(e)};this.addManagedElementListeners(t,{dblclick:a}),this.addManagedElementListeners(e,{dblclick:a}),this.addManagedElementListeners(this.getGui(),{dblclick:i}),this.updateIconVisibility();let o=n.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(o,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t,n){e.touchSvc?.setupForHeaderGroupElement(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){let{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){let r=n.isExpanded();P(e,r),P(t,!r)}else P(e,!1),P(t,!1)}addInIcon(e,t){let n=zd(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){let{agOpened:e,agClosed:t}=this;P(e,!1),P(t,!1);return}}setupLabel(e){let{displayName:t,columnGroup:n}=e,r=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;j(t)&&!r&&(this.agLabel.textContent=Xi(t)),this.toggleCss(`ag-sticky-label`,!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&=(this.destroyBean(this.innerHeaderGroupComponent),void 0)}},ev={moduleName:`ColumnHeaderComp`,version:I,userComponents:{agColumnHeader:Z_},icons:{menu:`menu`,menuAlt:`menu-alt`}},tv={moduleName:`ColumnGroupHeaderComp`,version:I,userComponents:{agColumnGroupHeader:$_},icons:{columnGroupOpened:`expanded`,columnGroupClosed:`contracted`}},nv={moduleName:`AnimationFrame`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`animationFrameSvc`,this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get(`suppressAnimationFrame`),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&L(92)}createTask(e,t,n,r,i=!1){this.verify();let a=n;r&&this.batchFrameworkComps&&(a=`f1`);let o={task:e,index:t,createOrder:++this.taskCount,deferred:i};this.addTaskToList(this[a],o),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((e,n)=>e.deferred===n.deferred?e.index===n.index?n.createOrder-e.createOrder:t*(n.index-e.index):e.deferred?-1:1),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){let{p1:t,p2:n,f1:r,destroyTasks:i,beans:a}=this,{ctrlsSvc:o,frameworkOverrides:s}=a,c=t.list,l=n.list,u=r.list,d=Date.now(),f=0,p=e<=0,m=o.getScrollFeature();for(;p||f<e;){if(!m.scrollGridIfNeeded()){let a;if(c.length)this.sortTaskList(t),a=c.pop().task;else if(l.length)this.sortTaskList(n),a=l.pop().task;else if(u.length)s.wrapOutgoing(()=>{for(;(p||f<e)&&!m.scrollGridIfNeeded()&&u.length;)this.sortTaskList(r),a=u.pop().task,a(),f=Date.now()-d}),a=()=>{};else if(i.length)a=i.pop();else break;a()}f=Date.now()-d}c.length||l.length||u.length||i.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);rr(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},rv={moduleName:`Touch`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`touchSvc`}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){vn()&&this.mockContextMenu(e,e.element,(t,n,r)=>{let{rowCtrl:i,cellCtrl:a}=e.getControlsForEventTarget(r?.target??null);a?.column&&a.dispatchCellContextMenuEvent(r??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,r,i,a)})}handleCellDoubleClick(e,t){return(()=>{if(!vn()||Bi(`dblclick`))return!1;let t=Date.now(),n=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,n})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){let{gos:t,sortSvc:n,menuSvc:r}=this.beans;if(t.get(`suppressTouch`))return;let{params:i,eMenu:a,eFilterButton:o}=e,s=new Kf(e.getGui(),!0),c=e.shouldSuppressMenuHide(),l=c&&j(a)&&i.enableMenu,u=l?new Kf(a,!0):s;if(i.enableMenu||r?.isHeaderContextMenuEnabled(i.column)){let t=l?`tap`:`longTap`,n=e=>i.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(u,{[t]:n})}if(i.enableSorting&&e.addManagedListeners(s,{tap:e=>{let t=e.touchStart.target;c&&(a?.contains(t)||o?.contains(t))||n?.progressSort(i.column,!1,`uiColumnSorted`)}}),i.enableFilterButton&&o){let t=new Kf(o,!0);e.addManagedListeners(t,{tap:()=>i.showFilter(o)}),e.addDestroyFunc(()=>t.destroy())}e.addDestroyFunc(()=>s.destroy()),l&&e.addDestroyFunc(()=>u.destroy())}setupForHeaderGroup(e){let t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){let n=new Kf(t.eGridHeader,!0);e.addManagedListeners(n,{longTap:e=>t.showColumnMenuAfterMouseClick(e.touchStart)}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){let r=new Kf(t,!0);e.addManagedListeners(r,{tap:n}),e.addDestroyFunc(()=>r.destroy())}mockContextMenu(e,t,n){if(!vn())return;let r=new Kf(t);e.addManagedListeners(r,{longTap:e=>{Wc(this.gos,e.touchEvent)&&n(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc(()=>r.destroy())}}]},iv=class extends W{constructor(){super(...arguments),this.beanName=`cellNavigation`}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===X.UP,r=e===X.DOWN,i=e===X.LEFT,a,o,{pageBounds:s,gos:c,visibleCols:l,pinnedRowModel:u}=this.beans,{rowPinned:d}=t;if(n||r)o=d&&u?n?0:d===`top`?u.getPinnedTopRowCount()-1:u.getPinnedBottomRowCount()-1:n?s.getFirstRow():s.getLastRow(),a=t.column;else{let e=c.get(`enableRtl`);o=t.rowIndex,a=(i===e?[...l.allCols].reverse():l.allCols).find(e=>this.isCellGoodToFocusOn({rowIndex:o,rowPinned:null,column:e}))}return a?{rowIndex:o,rowPinned:d,column:a}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,r=!1;for(;!r;){switch(e){case X.UP:n=this.getCellAbove(n);break;case X.DOWN:n=this.getCellBelow(n);break;case X.RIGHT:n=this.gos.get(`enableRtl`)?this.getCellToLeft(n):this.getCellToRight(n);break;case X.LEFT:n=this.gos.get(`enableRtl`)?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,L(8,{key:e});break}r=n?this.isCellGoodToFocusOn(n):!0}return n}isCellGoodToFocusOn(e){let t=e.column,n,{pinnedRowModel:r,rowModel:i}=this.beans;switch(e.rowPinned){case`top`:n=r?.getPinnedTopRow(e.rowIndex);break;case`bottom`:n=r?.getPinnedBottomRow(e.rowIndex);break;default:n=i.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;let t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;let t=this.rowSpanSvc?.getCellEnd(e)??e,n=ks(this.beans,t);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;let t=this.rowSpanSvc?.getCellStart(e)??e,n=Os(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let{visibleCols:t,pagination:n}=this.beans,r=t.allCols,i=e.rowIndex,a=e.rowPinned,o=t.getColAfter(e.column);if(!o){o=r[0];let t=ks(this.beans,e);if(M(t)||!t.rowPinned&&!(n?.isRowInPage(t.rowIndex)??!0))return null;i=t?t.rowIndex:null,a=t?t.rowPinned:null}return{rowIndex:i,column:o,rowPinned:a}}getNextTabbedCellBackwards(e){let{beans:t}=this,{visibleCols:n,pagination:r}=t,i=n.allCols,a=e.rowIndex,o=e.rowPinned,s=n.getColBefore(e.column);if(!s){s=K(i);let n=Os(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(M(n)||!n.rowPinned&&!(r?.isRowInPage(n.rowIndex)??!0))return null;a=n?n.rowIndex:null,o=n?n.rowPinned:null}return{rowIndex:a,column:s,rowPinned:o}}isSuppressNavigable(e,t){let{suppressNavigable:n}=e.colDef;return typeof n==`boolean`?n:typeof n==`function`?n(e.createColumnFunctionCallbackParams(t)):!1}};function av(e){return e.focusSvc.getFocusedCell()}function ov(e){return e.focusSvc.clearFocusedCell()}function sv(e,t,n,r){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:r,forceBrowserFocus:!0})}function cv(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function lv(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function uv(e,t,n=!1){let r=e.headerNavigation?.getHeaderPositionForColumn(t,n);r&&e.focusSvc.focusHeaderPosition({headerPosition:r})}var dv=class extends W{constructor(){super(),this.beanName=`navigation`,this.onPageDown=gr(this.onPageDown,100),this.onPageUp=gr(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,r=e.altKey,i=e.ctrlKey||e.metaKey,a=!!this.beans.rangeSvc&&e.shiftKey,o=Kc(this.gos,e),s=!1;switch(n){case X.PAGE_HOME:case X.PAGE_END:!i&&!r&&(this.onHomeOrEndKey(n),s=!0);break;case X.LEFT:case X.RIGHT:case X.UP:case X.DOWN:if(!o)return!1;i&&!r&&!a&&(this.onCtrlUpDownLeftRight(n,o),s=!0);break;case X.PAGE_DOWN:case X.PAGE_UP:!i&&!r&&(s=this.handlePageUpDown(n,o,t));break}return s&&e.preventDefault(),s}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===X.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:r,focusColumn:i,isAsync:a,rowPinned:o}){let{scrollFeature:s}=this.gridBodyCon;j(n)&&!n.isPinned()&&s.ensureColumnVisible(n),j(e)&&s.ensureIndexVisible(e,t),a||s.ensureIndexVisible(r);let{focusSvc:c,rangeSvc:l}=this.beans;c.setFocusedCell({rowIndex:r,column:i,rowPinned:o,forceBrowserFocus:!0}),l?.setRangeToCell({rowIndex:r,rowPinned:o,column:i})}onPageDown(e){let t=this.beans,n=fv(t),r=this.getViewportHeight(),{pageBounds:i,rowModel:a,rowAutoHeight:o}=t,s=i.getPixelOffset(),c=n.top+r,l=a.getRowIndexAtPixel(c+s);o?.active?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)}onPageUp(e){let t=this.beans,n=fv(t),{pageBounds:r,rowModel:i,rowAutoHeight:a}=t,o=r.getPixelOffset(),s=n.top,c=i.getRowIndexAtPixel(s+o);a?.active?this.navigateToNextPageWithAutoHeight(e,c,!0):this.navigateToNextPage(e,c,!0)}navigateToNextPage(e,t,n=!1){let{pageBounds:r,rowModel:i}=this.beans,a=this.getViewportHeight(),o=r.getFirstRow(),s=r.getLastRow(),c=r.getPixelOffset(),l=i.getRow(e.rowIndex),u=n?l?.rowHeight-a-c:a-c,d=l?.rowTop+u,f=i.getRowIndexAtPixel(d+c);if(f===e.rowIndex){let r=n?-1:1;t=f=e.rowIndex+r}let p;n?(p=`bottom`,f<o&&(f=o),t<o&&(t=o)):(p=`top`,f>s&&(f=s),t>s&&(t=s)),this.isRowTallerThanView(i.getRow(f))&&(t=f,p=`top`),this.navigateTo({scrollIndex:t,scrollType:p,scrollColumn:null,focusIndex:f,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?`bottom`:`top`,scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let r=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?`bottom`:`top`,scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,r=this.getViewportHeight(),{pageBounds:i,rowModel:a}=this.beans,o=i.getLastRow(),s=0,c=e.rowIndex;for(;c>=0&&c<=o;){let e=a.getRow(c);if(e){let t=e.rowHeight??0;if(s+t>r)break;s+=t}c+=n}return Math.max(0,Math.min(c,o))}getViewportHeight(){let e=this.beans,t=fv(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth(),r=t.bottom-t.top;return e.ctrlsSvc.get(`center`).isHorizontalScrollShowing()&&(r-=n),r}isRowTallerThanView(e){if(!e)return!1;let t=e.rowHeight;return typeof t==`number`?t>this.getViewportHeight():!1}onCtrlUpDownLeftRight(e,t){let n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:r,rowPinned:i}=n,a=n.column;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:a,focusIndex:r,focusColumn:a,rowPinned:i})}onHomeOrEndKey(e){let t=e===X.PAGE_HOME,{visibleCols:n,pageBounds:r,rowModel:i}=this.beans,a=n.allCols,o=t?r.getFirstRow():r.getLastRow(),s=i.getRow(o);if(!s)return;let c=(t?a:[...a].reverse()).find(e=>!e.isSuppressNavigable(s));c&&this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:c,focusIndex:o,focusColumn:c})}onTabKeyDown(e,t){let n=t.shiftKey,r=this.tabToNextCellCommon(e,n,t),i=this.beans,{ctrlsSvc:a,pageBounds:o,focusSvc:s,gos:c}=i;if(r!==!1){r?t.preventDefault():r===null&&a.get(`gridCtrl`).allowFocusForNextCoreContainer(n);return}if(n){let{rowIndex:n,rowPinned:r}=e.getRowPosition();(r?n===0:n===o.getFirstRow())&&(c.get(`headerHeight`)===0||bc(i)?Sc(i,!0,!0):(t.preventDefault(),s.focusPreviousFromFirstCell(t)))}else e instanceof Vc&&e.focusCell(!0),(!n&&s.focusOverlay(!1)||Sc(i,n))&&t.preventDefault()}tabToNextCell(e,t){let n=this.beans,{focusSvc:r,rowRenderer:i}=n,a=r.getFocusedCell();if(!a)return!1;let o=Es(n,a);return!o&&(o=i.getRowByPosition(a),!o||!o.isFullWidth())?!1:!!this.tabToNextCellCommon(o,e,t,`api`)}tabToNextCellCommon(e,t,n,r=`ui`){let{editSvc:i,focusSvc:a}=this.beans,o,s=e instanceof Vc?e:e.getAllCellCtrls()?.[0];return o=i?.isEditing()?i?.moveToNextCell(s,t,n,r):this.moveToNextCellNotEditing(e,t,n),o===null?o:o||!!a.focusedHeader}moveToNextCellNotEditing(e,t,n){let r=this.beans.visibleCols.allCols,i;if(e instanceof cu){if(i={...e.getRowPosition(),column:t?r[0]:K(r)},this.gos.get(`embedFullWidthRows`)&&n){let t=e.findFullWidthInfoForEvent(n);t&&(i.column=t.column)}}else i=e.getFocusedCellPosition();let a=this.findNextCellToFocusOn(i,{backwards:t,startEditing:!1});if(a===!1)return null;if(a instanceof Vc)a.focusCell(!0);else if(a)return this.tryToFocusFullWidthRow(a,t);return j(a)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:r}){let i=e,a=this.beans,{cellNavigation:o,gos:s,focusSvc:c,rowRenderer:l,rangeSvc:u}=a;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=o.getNextTabbedCell(i,t);let d=s.getCallback(`tabToNextCell`);if(j(d)){let r=d({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(r===!0)i=e;else if(r===!1)return!1;else i={rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned}}if(!i)return null;if(i.rowIndex<0){let e=td(a);return c.focusHeaderPosition({headerPosition:{headerRowIndex:e+i.rowIndex,column:i.column},fromCell:!0}),null}let f=s.get(`editType`)===`fullRow`;if(n&&(!f||r)&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let p=Es(a,i);if(!p){let e=l.getRowByPosition(i);if(!e||!e.isFullWidth()||n)continue;return{...e.getRowPosition(),column:i?.column}}if(!o.isSuppressNavigable(p.column,p.rowNode))return p.setFocusedCellPosition(i),u?.setRangeToCell(i),p}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){let{pinnedRowModel:n,rowModel:r}=this.beans;return t===`top`?n?.getPinnedTopRow(e):t===`bottom`?n?.getPinnedBottomRow(e):r.getRow(e)}navigateToNextCell(e,t,n,r){let i=n,a=!1,o=this.beans,{cellNavigation:s,focusSvc:c,gos:l}=o;for(;i&&(i===n||!this.isValidNavigateCell(i));)l.get(`enableRtl`)?t===X.LEFT&&(i=this.getLastCellOfColSpan(i)):t===X.RIGHT&&(i=this.getLastCellOfColSpan(i)),i=s.getNextCellToFocus(t,i),a=M(i);if(a&&e&&e.key===X.UP&&(i={rowIndex:-1,rowPinned:null,column:n.column}),r){let r=l.getCallback(`navigateToNextCell`);if(j(r)){let a=r({key:t,previousCellPosition:n,nextCellPosition:i||null,event:e});i=j(a)?{rowPinned:a.rowPinned,rowIndex:a.rowIndex,column:a.column}:null}}if(!i)return;if(i.rowIndex<0){let t=td(o);c.focusHeaderPosition({headerPosition:{headerRowIndex:t+i.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let u=this.getNormalisedPosition(i);u?this.focusPosition(u):this.tryToFocusFullWidthRow(i)}getNormalisedPosition(e){if(this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);let t=Es(this.beans,e);return t?(e=t.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let{visibleCols:n,rowRenderer:r,focusSvc:i,eventSvc:a}=this.beans,o=n.allCols,s=r.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;let c=i.getFocusedCell(),l={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?K(o):o[0])};this.focusPosition(l);let u=t??(c!=null&&xs(l,c));return a.dispatchEvent({type:`fullWidthRowFocused`,rowIndex:l.rowIndex,rowPinned:l.rowPinned,column:l.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){let{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!Ts(this.beans,e)}getLastCellOfColSpan(e){let t=Es(this.beans,e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:K(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=ri(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),r=t&&n?.sticky,{scrollFeature:i}=this.gridBodyCon;!r&&M(e.rowPinned)&&i.ensureIndexVisible(e.rowIndex),e.column.isPinned()||i.ensureColumnVisible(e.column)}ensureColumnVisible(e){let t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function fv(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var pv={moduleName:`KeyboardNavigation`,version:I,beans:[dv,iv,l_],apiFunctions:{getFocusedCell:av,clearFocusedCell:ov,setFocusedCell:sv,setFocusedHeader:uv,tabToNextCell:cv,tabToPreviousCell:lv}},mv=class extends W{constructor(){super(...arguments),this.beanName=`pageBoundsListener`}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:`paginationChanged`,animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},hv=class extends W{constructor(){super(...arguments),this.beanName=`pageBounds`,this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){let{topRowBounds:e,bottomRowBounds:t}=this;return{pageFirstPixel:e?.rowTop??0,pageLastPixel:t?t.rowTop+t.rowHeight:0}}calculateBounds(e,t){let{rowModel:n}=this.beans,r=n.getRowBounds(e);r&&(r.rowIndex=e),this.topRowBounds=r;let i=n.getRowBounds(t);i&&(i.rowIndex=t),this.bottomRowBounds=i,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:`paginationPixelOffsetChanged`}))}},gv=`.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}`,_v=class extends W{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?`left`:`right`}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let e=this.getWidth(),t=e>0;for(let n of this.elements)n&&(P(n,t),Zn(n,e))}},vv={moduleName:`PinnedColumn`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`pinnedCols`}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener(`domLayout`,e)}checkContainerWidths(){let{gos:e,visibleCols:t,eventSvc:n}=this.beans,r=B(e,`print`),i=r?0:t.getColsLeftWidth(),a=r?0:t.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,n.dispatchEvent({type:`leftPinnedWidthChanged`})),a!=this.rightWidth&&(this.rightWidth=a,n.dispatchEvent({type:`rightPinnedWidthChanged`}))}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.eBodyViewport,t=Mn(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),r=this.gos.getCallback(`processUnpinnedColumns`),{columns:i,hasLockedPinned:a}=n,o=i;!o.length&&!a||(r&&(o=r({columns:o,viewportWidth:t})),!(!o||!o.length)&&(o=o.filter(e=>!ya(e)),this.setColsPinned(o,null,`viewportSizeFeature`)))}createPinnedWidthFeature(e,...t){return new _v(e,t)}setColsPinned(e,t,n){let{colModel:r,colAnimation:i,visibleCols:a,gos:o}=this.beans;if(!r.cols||!e?.length)return;if(B(o,`print`)){L(37);return}i?.start();let s;s=t===!0||t===`left`?`left`:t===`right`?`right`:null;let c=[];e.forEach(e=>{if(!e)return;let t=r.getCol(e);t&&t.getPinned()!==s&&(this.setColPinned(t,s),c.push(t))}),c.length&&(a.refresh(n),Ha(this.eventSvc,c,n)),i?.finish()}initCol(e){let{pinned:t,initialPinned:n}=e.colDef;t===void 0?this.setColPinned(e,n):this.setColPinned(e,t)}setColPinned(e,t){t===!0||t===`left`?e.pinned=`left`:t===`right`?e.pinned=`right`:e.pinned=null,e.dispatchStateUpdatedEvent(`pinned`)}setupHeaderPinnedWidth(e){let{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;let n=e.pinned===`left`,r=e.pinned===`right`;e.hidden=!0;let i=()=>{let i=n?this.leftWidth:this.rightWidth;if(i==null)return;let a=i==0,o=e.hidden!==a,s=this.gos.get(`enableRtl`),c=t.getScrollbarWidth(),l=t.verticalScrollShowing&&(s&&n||!s&&r)?i+c:i;e.comp.setPinnedContainerWidth(`${l}px`),e.comp.setDisplayed(!a),o&&(e.hidden=a,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}getHeaderResizeDiff(e,t){if(t.getPinned()){let{leftWidth:t,rightWidth:n}=this,r=Mn(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+n+e>r)if(r>t+n)e=r-t-n;else return 0}return e}getPinnedColumnsOverflowingViewport(e){let t=(this.rightWidth??0)+(this.leftWidth??0),n=!1;if(t<e)return{columns:[],hasLockedPinned:n};let{visibleCols:r}=this.beans,i=[...r.leftCols],a=[...r.rightCols],o=0,s=0,c=[],l=t-0-e;for(;(s<i.length||o<a.length)&&l>0;){if(o<a.length){let e=a[o++];if(e.colDef.lockPinned){n=!0;continue}l-=e.getActualWidth(),c.push(e)}if(s<i.length&&l>0){let e=i[s++];if(e.colDef.lockPinned){n=!0;continue}l-=e.getActualWidth(),c.push(e)}}return{columns:c,hasLockedPinned:n}}}],css:[gv]},yv={moduleName:`Aria`,version:I,beans:[class extends W{constructor(){super(),this.beanName=`ariaAnnounce`,this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement=``,this.updateAnnouncement=hr(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let e=this.beans,t=this.descriptionContainer=V(e).createElement(`div`);t.classList.add(`ag-aria-description-container`),Bt(t,`polite`),Ht(t,`additions text`),Vt(t,!0),e.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(`. `);this.pendingAnnouncements.clear(),this.descriptionContainer.textContent=``,setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,``)==``){this.lastAnnouncement=``;return}this.lastAnnouncement===t&&(t=`${t}\u200B`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(Rn(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}}]};function bv(e){e.overlays?.showLoadingOverlay()}function xv(e){e.overlays?.showNoRowsOverlay()}function Sv(e){e.overlays?.hideOverlay()}var Cv=`.ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}`,wv={tag:`div`,cls:`ag-overlay`,role:`presentation`,children:[{tag:`div`,cls:`ag-overlay-panel`,role:`presentation`,children:[{tag:`div`,ref:`eOverlayWrapper`,cls:`ag-overlay-wrapper`,role:`presentation`}]}]},Tv=class extends q{constructor(){super(wv),this.eOverlayWrapper=null,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(Cv)}handleKeyDown(e){if(e.key!==X.TAB||e.defaultPrevented||zi(e))return;let t=this.beans;if(vc(t,this.eOverlayWrapper,!1,e.shiftKey))return;let n=!1;n=e.shiftKey?t.focusSvc.focusGridView({column:K(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):Sc(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:r,NORMAL:i,PRINT:a}=Jl;n.toggle(r,t.autoHeight),n.toggle(i,t.normal),n.toggle(a,t.print)}postConstruct(){this.createManagedBean(new Yl(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,r){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){let e=H(this.beans);e&&!ti(this.beans)&&(this.elToFocusAfter=e)}e.then(t=>{if(this.activePromise!==e){this.activeOverlay!==t&&(this.destroyBean(t),t=null);return}if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,r)){let e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(r,({currentValue:t})=>{e.refresh?.(U(this.gos,{...t??{}}))})}n&&this.isGridFocused()&&_c(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty(`padding-top`,`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);let n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Rn(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let e=H(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},Ev={selector:`AG-OVERLAY-WRAPPER`,component:Tv},Dv={moduleName:`Overlay`,version:I,userComponents:{agLoadingOverlay:Fd,agNoRowsOverlay:Ld},apiFunctions:{showLoadingOverlay:bv,showNoRowsOverlay:xv,hideOverlay:Sv},beans:[class extends W{constructor(){super(...arguments),this.beanName=`overlays`,this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=z(this.gos),this.isServerSide=!this.isClientSide&&zr(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener(`loading`,e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos,t=e.get(`loading`);!t&&(t!==void 0||e.get(`suppressLoadingOverlay`))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;let e=this.gos;e.get(`loading`)||e.get(`suppressNoRowsOverlay`)||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get(`loading`)){L(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return Ev}getOverlayWrapperCompClass(){return Tv}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}let{state:e,isClientSide:t,isServerSide:n,beans:{gos:r,colModel:i,rowModel:a}}=this,o=this.gos.get(`loading`);o!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&o===void 0&&!r.get(`suppressLoadingOverlay`)&&(o=!r.get(`columnDefs`)||!i.ready||!r.get(`rowData`)&&t),o?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&a.isEmpty()&&!r.get(`suppressNoRowsOverlay`)?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(Uo(this.beans.userCompFactory,U(this.gos,{})),`ag-overlay-loading-wrapper`,`loadingOverlayComponentParams`),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(Wo(this.beans.userCompFactory,U(this.gos,{})),`ag-overlay-no-rows-wrapper`,`noRowsOverlayComponentParams`),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){let r=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(r,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:`overlayExclusiveChanged`})}refreshWrapperPadding(){let e=this.eWrapper;if(!e)return;let t=0;this.state===2?t=this.beans.ctrlsSvc.get(`gridHeaderCtrl`)?.headerHeight||0:this.wrapperPadding!==0&&(t=0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}]},Ov=class extends W{constructor(){super(...arguments),this.beanName=`rowContainerHeight`,this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=bn(),lr(this.gos,`RowContainerHeightService - maxDivHeight = `+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;lr(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:`rowContainerHeightChanged`}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e==`number`?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:`heightScaleChanged`}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},kv=400,Av=class extends W{constructor(){super(...arguments),this.beanName=`rowRenderer`,this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(e=>e.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(e=>e.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener(`cellSelectionChanged`,e),this.eventSvc.addEventListener(`columnMoved`,t),this.eventSvc.addEventListener(`columnPinned`,t),this.eventSvc.addEventListener(`columnVisible`,t)},r=()=>{this.eventSvc.removeEventListener(`cellSelectionChanged`,e),this.eventSvc.removeEventListener(`columnMoved`,t),this.eventSvc.removeEventListener(`columnPinned`,t),this.eventSvc.removeEventListener(`columnVisible`,t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListeners([`enableRangeSelection`,`cellSelection`],()=>{hi(this.gos)?n():r()}),hi(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners([`domLayout`,`embedFullWidthRows`],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners([`suppressMaxRenderedRowRestriction`,`rowBuffer`],()=>this.redraw()),this.addManagedPropertyListener(`suppressCellFocus`,e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners([`groupSuppressBlankHeader`,`getBusinessKeyForNode`,`fullWidthCellRenderer`,`fullWidthCellRendererParams`,`suppressStickyTotalRow`,`groupRowRenderer`,`groupRowRendererParams`,`loadingCellRenderer`,`loadingCellRendererParams`,`detailCellRenderer`,`detailCellRendererParams`,`enableRangeSelection`,`enableCellTextSelection`],()=>this.redrawRows()),this.addManagedPropertyListener(`cellSelection`,({currentValue:e,previousValue:t})=>{(!t&&e||t&&!e)&&this.redrawRows()});let{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener(`showOpenedGroup`,()=>{let e=n.getShowRowGroupCols();e.length&&this.refreshCells({columns:e,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=B(t,`print`),this.embedFullWidthRows=this.printLayout||t.get(`embedFullWidthRows`),this.redrawAfterModelUpdate()}initialiseCache(){this.gos.get(`keepDetailRows`)&&(this.cachedRowCtrls=new jv(this.getKeepDetailRowsCount()??3))}getKeepDetailRowsCount(){return this.gos.get(`keepDetailRowsCount`)}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){let n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onCellFocusChanged(e){if(e&&e.rowIndex!=null&&!e.rowPinned){let t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{let{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(n=>t.onFlashCells(n,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(e=>{let t=t=>{this.getAllCellCtrls().forEach(n=>{n.column===e&&t(n)})},n=()=>{t(e=>e.onLeftChanged())},r=()=>{t(e=>e.onWidthChanged())},i=()=>{t(e=>e.onFirstRightPinnedChanged())},a=()=>{t(e=>e.onLastLeftPinnedChanged())},o=()=>{t(e=>e.onColDefChanged())};e.__addEventListener(`leftChanged`,n),e.__addEventListener(`widthChanged`,r),e.__addEventListener(`firstRightPinnedChanged`,i),e.__addEventListener(`lastLeftPinnedChanged`,a),e.__addEventListener(`colDefChanged`,o),this.destroyFuncsForColumnListeners.push(()=>{e.__removeEventListener(`leftChanged`,n),e.__removeEventListener(`widthChanged`,r),e.__removeEventListener(`firstRightPinnedChanged`,i),e.__removeEventListener(`lastLeftPinnedChanged`,a),e.__removeEventListener(`colDefChanged`,o)})})}onDomLayoutChanged(){let e=B(this.gos,`print`),t=e||this.gos.get(`embedFullWidthRows`),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let r=n.getCellCtrl(e,!0)?.eGui;r&&t.push(r)}),t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,`top`,e),this.refreshFloatingRows(this.bottomRowCtrls,`bottom`,e)}refreshFloatingRows(e,t,n){let{pinnedRowModel:r,beans:i,printLayout:a}=this,o=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));r?.forEachPinnedRow(t,(s,c)=>{let l=e[c];l&&r.getPinnedRowById(l.rowNode.id,t)===void 0&&(l.destroyFirstPass(),l.destroySecondPass()),s.id in o&&n?(e[c]=o[s.id],delete o[s.id]):e[c]=new cu(s,i,!1,!1,a)}),e.length=(t===`top`?r?.getPinnedTopRowCount():r?.getPinnedBottomRowCount())??0}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let t=t=>{let n=t[e.rowIndex];n&&n.rowNode===e&&(n.destroyFirstPass(),n.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case`top`:t(this.topRowCtrls);break;case`bottom`:t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){let{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:`api`})),e!=null){e?.forEach(e=>this.redrawRow(e,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,r=e.animate&&ni(this.gos),i=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:a,gos:o}=this;if(a){a.checkStickyRows();let e=a.extraTopHeight+a.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(i,r),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(o.get(`enableRowPinning`)?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get(`suppressScrollOnNewData`);t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){let{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw Error(Lr(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;let t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:td(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(U(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:`cellFocused`}))}findPositionToFocus(e){let{pagination:t,pageBounds:n}=this.beans,r=e;for(r.rowPinned==null&&t&&n&&!t.isRowInPage(r.rowIndex)&&(r={rowPinned:null,rowIndex:n.getFirstRow()});r;){if(r.rowPinned==null&&n)if(r.rowIndex<n.getFirstRow()){if(r=Os(this.beans,{rowPinned:null,rowIndex:0}),!r)return null}else r.rowIndex>n.getLastRow()&&(r={rowPinned:null,rowIndex:n.getLastRow()});let t=this.getRowByPosition(r);if(t?.isAlive())return{...t.getRowPosition(),column:e.column};r=Os(this.beans,r)}return null}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let r=0;r<n;r++){let n=t[r].getAllCellCtrls(),i=n.length;for(let t=0;t<i;t++)e.push(n[t])}return e}getAllRowCtrls(){let{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls(`top`)??[],...e?.getCtrls(`bottom`)??[],...e?.getCtrls(`center`)??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){let r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:r}={}){let i={force:n,newData:!1,suppressFlash:r};for(let n of this.getCellCtrls(e,t))n.refreshOrDestroyCell(i);this.refreshFullWidth(e)}refreshRows(e={}){this.getRowCtrls(e.rowNodes).forEach(t=>t.refreshRow(e)),this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(let n of this.getRowCtrls(e))n.isFullWidth()&&(n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0)));t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){let t=Mv(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(e=>{let n=e.rowNode;return Nv(n,t)})}getCellCtrls(e,t){let n;j(t)&&(n={},t.forEach(e=>{let t=this.colModel.getCol(e);j(t)&&(n[t.getId()]=!0)}));let r=[];return this.getRowCtrls(e).forEach(e=>{e.getAllCellCtrls().forEach(e=>{let t=e.column.getId();n&&!n[t]||r.push(e)})}),r}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let e=[];for(let t of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[t].rowNode.id??e.push(t);this.removeRowCtrls(e);let t={};for(let e of Object.values(this.rowCtrlsByRowIndex)){let n=e.rowNode;t[n.id]=e}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(e=>{let n=this.rowCtrlsByRowIndex[e];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]})}onBodyScroll(e){e.direction===`vertical`&&this.redraw({afterScroll:!0})}redraw(e={}){let{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:r}=e,i,a=this.stickyRowFeature;a&&(i=t?.getFocusCellToUseAfterRefresh()||void 0);let o=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let c=!1;if(a){c=a.checkStickyRows();let e=a.extraTopHeight+a.extraBottomHeight;e&&this.updateContainerHeights(e)}let l=this.firstRenderedRow!==o||this.lastRenderedRow!==s;if(!(r&&!c&&!l)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,r),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(r&&!c),i!=null)){let e=t?.getFocusCellToUseAfterRefresh();i!=null&&e==null&&(n?.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(e=>n[e]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!n[e]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){let t=[];for(let e=this.firstRenderedRow;e<=this.lastRenderedRow;e++)t.push(e);let n=this.beans.pagination,r=this.beans.focusSvc?.getFocusedCell()?.rowIndex;r!=null&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&(!n||n.isRowInPage(r))&&r<this.rowModel.getRowCount()&&t.push(r);let i=e=>{let n=e.rowNode.rowIndex;n==null||n===r||(n<this.firstRenderedRow||n>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&t.push(n)};for(let e of Object.values(this.rowCtrlsByRowIndex))i(e);if(e)for(let t of Object.values(e))i(t);t.sort((e,t)=>e-t);let a=[];for(let e=0;e<t.length;e++){let n=t[e],r=this.rowModel.getRow(n);r&&!r.sticky&&a.push(n)}return a}recycleRows(e,t=!1,n=!1){let r=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(r,!t);let i=[];if(r.forEach(r=>{let a=this.createOrUpdateRowCtrl(r,e,t,n);j(a)&&i.push(a)}),e){let{animationFrameSvc:r}=this.beans;r?.active&&n&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:`displayedRowsChanged`,afterScroll:e})}onDisplayedColumnsChanged(){let{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.rowNode.rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=Mv(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;let n=e.rowNode;return!(t!=null&&!Nv(n,t))})}createOrUpdateRowCtrl(e,t,n,r){let i,a=this.rowCtrlsByRowIndex[e];if(a||(i=this.rowModel.getRow(e),j(i)&&j(t)&&t[i.id]&&i.alreadyRendered&&(a=t[i.id],t[i.id]=null)),!a)if(i||=this.rowModel.getRow(e),j(i))a=this.createRowCon(i,n,r);else return;return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=a,a}destroyRowCtrls(e,t){let n=[];if(e){for(let r of Object.values(e))if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);continue}if(r.destroyFirstPass(!t),t){let e=r.instanceId;this.zombieRowCtrls[e]=r,n.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[e]})}else r.destroySecondPass()}}t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(e=>e()),kv))}getRowBuffer(){return this.gos.get(`rowBuffer`)}getRowBufferInPixels(){return this.getRowBuffer()*Gr(this.beans)}workOutFirstAndLastRowsToRender(){let{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let r,i;if(!n.isRowsToRender())r=0,i=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),r=t.getFirstRow(),i=t.getLastRow();else{let a=this.getRowBufferInPixels(),o=this.ctrlsSvc.getScrollFeature(),s=this.gos.get(`suppressRowVirtualisation`),c=!1,l,u;do{let n=t.getPixelOffset(),{pageFirstPixel:r,pageLastPixel:i}=t.getCurrentPagePixelRange(),d=e.divStretchOffset,f=o.getVScrollPosition(),p=f.top,m=f.bottom;s?(l=r+d,u=i+d):(l=Math.max(p+n-a,r)+d,u=Math.min(m+n+a,i)+d),this.firstVisibleVPixel=Math.max(p+n,r)+d,this.lastVisibleVPixel=Math.min(m+n,i)+d,c=this.ensureAllRowsInRangeHaveHeightsCalculated(l,u)}while(c);let d=n.getRowIndexAtPixel(l),f=n.getRowIndexAtPixel(u),p=t.getFirstRow(),m=t.getLastRow();d<p&&(d=p),f>m&&(f=m),r=d,i=f}let a=B(this.gos,`normal`),o=this.gos.get(`suppressMaxRenderedRowRestriction`),s=Math.max(this.getRowBuffer(),500);a&&!o&&i-r>s&&(i=r+s);let c=r!==this.firstRenderedRow,l=i!==this.lastRenderedRow;(c||l)&&(this.firstRenderedRow=r,this.lastRenderedRow=i,this.eventSvc.dispatchEvent({type:`viewportChanged`,firstRow:r,lastRow:i}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,rr(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:`firstDataRendered`,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),r=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:i,rowModel:a}=this,o=a.ensureRowHeightsValid(e,t,i.getFirstRow(),i.getLastRow());return(o||r)&&this.eventSvc.dispatchEvent({type:`recalculateRowBounds`}),r||o||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){let t=e.rowNode,n=this.focusSvc.isRowFocused(t.rowIndex,t.rowPinned),r=this.editSvc?.isEditing(e),i=t.detail;return n||r||i?!!this.isRowPresent(t):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){let r=this.cachedRowCtrls?.getRow(e)??null;if(r)return r;let i=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new cu(e,this.beans,t,i,this.printLayout)}getRenderedNodes(){let e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode),t=this.getStickyTopRowCtrls().map(e=>e.rowNode),n=this.getStickyBottomRowCtrls().map(e=>e.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case`top`:t=this.topRowCtrls[n];break;case`bottom`:t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===n)||null,t||=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===n)||null);break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},jv=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode==e?t:null):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],ua(this.entriesList,n)}removeFromCache(e){let t=e.rowNode.id;delete this.entriesMap[t],ua(this.entriesList,e)}getEntries(){return this.entriesList}};function Mv(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(e=>{let n=e.id;switch(e.rowPinned){case`top`:t.top[n]=e;break;case`bottom`:t.bottom[n]=e;break;default:t.normal[n]=e;break}}),t}function Nv(e,t){let n=e.id;switch(e.rowPinned){case`top`:return t.top[n]!=null;case`bottom`:return t.bottom[n]!=null;default:return t.normal[n]!=null}}var Pv=class extends W{constructor(){super(...arguments),this.beanName=`rowNodeSorter`}postConstruct(){let{gos:e}=this;this.isAccentedSort=e.get(`accentedSort`),this.primaryColumnsSortGroups=ii(e),this.addManagedPropertyListener(`accentedSort`,e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener(`autoGroupColumnDef`,()=>this.primaryColumnsSortGroups=ii(e))}doFullSort(e,t){let n=e.map((e,t)=>({currentPos:t,rowNode:e}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(e=>e.rowNode)}compareRowNodes(e,t,n){let r=t.rowNode,i=n.rowNode;for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.sort===`desc`,o=this.getValue(r,n.column),s=this.getValue(i,n.column),c,l=this.getComparator(n,r);if(c=l?l(o,s,r,i,a):Ct(o,s,this.isAccentedSort),!isNaN(c)&&c!==0)return n.sort===`asc`?c:c*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,r=n.getColDef().comparator;if(r!=null)return r;if(!n.getColDef().showRowGroup)return;let i=!t.group&&n.getColDef().field;if(!i)return;let a=this.beans.colModel.getColDefCol(i);if(a)return a.getColDef().comparator}getValue(e,t){let{valueSvc:n,colModel:r,showRowGroupCols:i,gos:a}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(si(a,r.isPivotActive())){let r=e.allLeafChildren?.[0];return r?n.getValue(t,r,!1):void 0}let o=i?.getShowRowGroupCol(t.getId());return o?e.groupData?.[o.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function Fv(e){e.sortSvc?.onSortChanged(`api`)}var Iv={moduleName:`Sort`,version:I,beans:[S_,Pv],apiFunctions:{onSortChanged:Fv},userComponents:{agSortIndicator:y_},icons:{sortAscending:`asc`,sortDescending:`desc`,sortUnSort:`none`}},Lv=class extends W{constructor(){super(...arguments),this.beanName=`syncSvc`,this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener(`columnDefs`,e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let e=this.gos.get(`columnDefs`);e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){let{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],`gridInitializing`),n.start()}gridReady(){let{eventSvc:e,gos:t}=this;e.dispatchEvent({type:`gridReady`}),lr(t,`initialised successfully, enterprise = ${t.isModuleRegistered(`EnterpriseCore`)}`)}setColumnDefs(e){let t=this.gos.get(`columnDefs`);if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,wa(e.source))}}},Rv=`paste`,zv=class extends W{constructor(){super(...arguments),this.beanName=`changeDetectionSvc`,this.clientSideRowModel=null}postConstruct(){let{gos:e,rowModel:t}=this.beans;z(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){let{gos:t,rowRenderer:n}=this.beans;if(e.source===Rv||t.get(`suppressChangeDetection`))return;let r=e.node,i=[r],a=this.clientSideRowModel,o=a?.rootNode;if(o&&!r.isRowPinned()){let n=new Ep(t.get(`aggregateOnlyChangedColumns`),o);n.addParentNode(r.parent,[e.column]),a.doAggregate(n),n.forEachChangedNodeDepthFirst(e=>{i.push(e),e.sibling&&i.push(e.sibling)})}n.refreshCells({rowNodes:i})}},Bv={moduleName:`Expression`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`expressionSvc`,this.cache={}}evaluate(e,t){if(typeof e==`string`)return this.evaluateExpression(e,t);R(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return R(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){let t=this.cache;if(t[e])return t[e];let n=this.createFunctionBody(e),r=Function(`x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup`,n);return t[e]=r,r}createFunctionBody(e){return e.indexOf(`return`)>=0?e:`return `+e+`;`}}]},Vv={moduleName:`ChangeDetection`,version:I,beans:[zv]},Hv={checkSiblings:!0},Uv={moduleName:`CommunityCore`,version:I,beans:[m_,_p,xh,lo,Ov,Dm,s_,K_,to,hv,mv,Av,class extends W{constructor(){super(...arguments),this.beanName=`valueSvc`,this.hasEdit=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEdit=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=zr(this.gos),this.cellExpressions=this.gos.get(`enableCellExpressions`),this.isTreeData=this.gos.get(`treeData`),this.initialised=!0;let e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener(`cellValueChanged`,e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener(`cellValueChanged`,e,!0)),this.addManagedPropertyListener(`treeData`,e=>this.isTreeData=e.currentValue)}getValueForDisplay(e,t,n=!1,r=!1,i=`ui`){let{showRowGroupColValueSvc:a}=this.beans,o=!e&&t.group,s=e?.colDef.showRowGroup,c=!this.isTreeData||t.footer;if(a&&c&&(o||s)){let i=a.getGroupValue(t,e);if(i==null)return{value:null,valueFormatted:null};if(!n)return{value:i.value,valueFormatted:null};let o=a.formatAndPrefixGroupColValue(i,e,r);return{value:i.value,valueFormatted:o}}if(!e)return{value:t.key,valueFormatted:null};let l=t.leafGroup&&this.colModel.isPivotMode(),u=t.group&&t.expanded&&!t.footer&&!l,d=this.gos.get(`groupSuppressBlankHeader`)||!t.sibling,f=u&&!d,p=this.getValue(e,t,f,i);return{value:p,valueFormatted:n&&!(r&&e.colDef.useValueFormatterForExport===!1)?this.formatValue(e,t,p):null}}getValue(e,t,n=!1,r=`ui`){if(this.initialised||this.init(),!t)return;let i=e.getColDef(),a=i.field,o=e.getColId(),s=t.data;if(this.hasEdit&&r===`ui`){let n=this.editSvc;if(n.isRowEditing(t,Hv)&&(s=n.getRowDataValue(t,Hv)),n.isEditing()){let r=n.getCellDataValue({rowNode:t,column:e},!0);if(r!==void 0)return r}}let c,l=i.showRowGroup;if(typeof l==`string`&&(this.beans.rowGroupColsSvc?.getColumnIndex(l)??-1)>t.level)return null;let u=typeof l!=`string`||!t.group,d=t.groupData&&o in t.groupData,f=!n&&t.aggData&&t.aggData[o]!==void 0,p=this.isSsrm&&n&&!!i.aggFunc,m=this.isSsrm&&t.footer&&t.field&&(i.showRowGroup===!0||i.showRowGroup===t.field);if(this.isTreeData&&f)c=t.aggData[o];else if(this.isTreeData&&i.valueGetter)c=this.executeValueGetter(i.valueGetter,s,e,t);else if(this.isTreeData&&a&&s)c=Et(s,a,e.isFieldContainsDots());else if(d)c=t.groupData[o];else if(f)c=t.aggData[o];else if(i.valueGetter&&!p){if(!u)return c;c=this.executeValueGetter(i.valueGetter,s,e,t)}else if(m)c=Et(s,t.field,e.isFieldContainsDots());else if(a&&s&&!p){if(!u)return c;c=Et(s,a,e.isFieldContainsDots())}if(this.cellExpressions&&typeof c==`string`&&c.indexOf(`=`)===0){let n=c.substring(1);c=this.executeValueGetter(n,s,e,t)}return c}parseValue(e,t,n,r){let i=e.getColDef(),a=i.valueParser;if(j(a)){let o=U(this.gos,{node:t,data:t?.data,oldValue:r,newValue:n,colDef:i,column:e});return typeof a==`function`?a(o):this.expressionSvc?.evaluate(a,o)}return n}getDeleteValue(e,t){return j(e.getColDef().valueParser)?this.parseValue(e,t,``,this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,n,r,i=!0){let{expressionSvc:a}=this.beans,o=null,s,c=e.getColDef();if(r?s=r:i&&(s=c.valueFormatter),s){let r=t?t.data:null;if(t){let e={rowNode:t};if(this.hasEdit){let n=this.editSvc;n.isEditing(e,Hv)&&(r=n.getRowDataValue(t,Hv))}}let i=U(this.gos,{value:n,node:t,data:r,colDef:c,column:e});o=typeof s==`function`?s(i):a?a.evaluate(s,i):null}else if(c.refData)return c.refData[n]||``;return o==null&&Array.isArray(n)&&(o=n.join(`, `)),o}setValue(e,t,n,r){let i=this.colModel.getColDefCol(t);if(!e||!i)return!1;M(e.data)&&(e.data={});let{field:a,valueSetter:o}=i.getColDef();if(M(a)&&M(o))return L(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(i,n))return L(135),!1;let s=U(this.gos,{node:e,data:e.data,oldValue:this.getValue(i,e,void 0,r),newValue:n,colDef:i.getColDef(),column:i});s.newValue=n;let c;if(c=j(o)?typeof o==`function`?o(s):this.expressionSvc?.evaluate(o,s):this.setValueUsingField(e.data,a,n,i.isFieldContainsDots()),c===void 0&&(c=!0),!c)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let l=this.getValue(i,e);return this.dispatchCellValueChangedEvent(e,s,l,r),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,s,l,r),!0}dispatchCellValueChangedEvent(e,t,n,r){this.eventSvc.dispatchEvent({type:`cellValueChanged`,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:r})}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t==`function`&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,r){if(!t)return!1;let i=!1;if(!r)i=e[t]===n,i||(e[t]=n);else{let r=t.split(`.`),a=e;for(;r.length>0&&a;){let e=r.shift();r.length===0?(i=a[e]===n,i||(a[e]=n)):a=a[e]}}return!i}executeValueGetterWithValueCache(e,t,n,r){let i=n.getColId(),a=this.valueCache.getValue(r,i);if(a!==void 0)return a;let o=this.executeValueGetterWithoutValueCache(e,t,n,r);return this.valueCache.setValue(r,i,o),o}executeValueGetterWithoutValueCache(e,t,n,r){let i=U(this.gos,{data:t,node:r,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,r)}),a;return a=typeof e==`function`?e(i):this.expressionSvc?.evaluate(e,i),a}getValueCallback(e,t){let n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),r=e.getColDef().keyCreator,i=n;return r&&(i=r(U(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data}))),typeof i==`string`||i==null?i:(i=String(i),i===`[object Object]`&&L(121),i)}},f_,a_,p_,Ch,Lv,_h,vh],icons:{selectOpen:`small-down`,smallDown:`small-down`,colorPicker:`color-picker`,smallUp:`small-up`,checkboxChecked:`small-up`,checkboxIndeterminate:`checkbox-indeterminate`,checkboxUnchecked:`checkbox-unchecked`,radioButtonOn:`radio-button-on`,radioButtonOff:`radio-button-off`,smallLeft:`small-left`,smallRight:`small-right`},apiFunctions:{getGridId:vp,destroy:yp,isDestroyed:bp,getGridOption:xp,setGridOption:Sp,updateGridOptions:Cp,isModuleRegistered:wp},dependsOn:[ph,am,fm,Iv,ev,Am,tv,Dv,Vv,nv,pv,vv,yv,rv,bh,mh,Bv,Pm]};function Wv(e){let{inputValue:t,allSuggestions:n,hideIrrelevant:r,filterByPercentageOfBestMatch:i}=e,a=(n??[]).map((e,n)=>({value:e,relevance:Gv(t,e),idx:n}));if(a.sort((e,t)=>e.relevance-t.relevance),r&&(a=a.filter(e=>e.relevance<Math.max(e.value.length,t.length))),a.length>0&&i&&i>0){let e=a[0].relevance*i;a=a.filter(t=>e-t.relevance<0)}let o=[],s=[];for(let e of a)o.push(e.value),s.push(e.idx);return{values:o,indices:s}}function Gv(e,t){e.length<t.length&&([e,t]=[t,e]);let n=[],r=[],i=e.length,a=t.length;for(let e=0;e<=a;e++)n[e]=e;let o=0;for(let s=1;s<=i;s++){r[0]=s;for(let c=1;c<=a;c++){let a=e[s-1],l=t[c-1];if(a.toLocaleLowerCase()===l.toLocaleLowerCase())++o,a===l&&++o,s>1&&c>1&&e[s-2].toLocaleLowerCase()===t[c-2].toLocaleLowerCase()&&(++o,e[s-2]===t[c-2]&&++o),s<i/2-10&&++o,r[c]=n[c-1];else{let e=r[c-1],t=n[c],i=n[c-1];r[c]=1+Math.min(e,t,i)}}[n,r]=[r,n]}return n[a]/(o+1)}var Kv={AdvancedFilter:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},qv=[`TextFilter`,`NumberFilter`,`DateFilter`,`SetFilter`,`MultiFilter`,`GroupFilter`,`CustomFilter`],Jv={EditCore:[`TextEditor`,`NumberEditor`,`DateEditor`,`CheckboxEditor`,`LargeTextEditor`,`SelectEditor`,`RichSelect`,`CustomEditor`],CheckboxCellRenderer:[`AllCommunity`],ClientSideRowModelHierarchy:[`RowGrouping`,`Pivot`,`TreeData`],ColumnFilter:qv,ColumnGroupHeaderComp:[`AllCommunity`],ColumnGroup:[`AllCommunity`],ColumnHeaderComp:[`AllCommunity`],ColumnMove:[`AllCommunity`],ColumnResize:[`AllCommunity`],CommunityCore:[`AllCommunity`],CsrmSsrmSharedApi:[`ClientSideRowModelApi`,`ServerSideRowModelApi`],EnterpriseCore:[`AllEnterprise`],FilterCore:[...qv,`QuickFilter`,`ExternalFilter`,`AdvancedFilter`],GroupCellRenderer:[`RowGrouping`,`Pivot`,`TreeData`,`MasterDetail`,`ServerSideRowModel`],KeyboardNavigation:[`AllCommunity`],LoadingCellRenderer:[`ServerSideRowModel`],MenuCore:[`ColumnMenu`,`ContextMenu`],MenuItem:[`ColumnMenu`,`ContextMenu`,`MultiFilter`,`IntegratedCharts`,`ColumnsToolPanel`],Overlay:[`AllCommunity`],PinnedColumn:[`AllCommunity`],SharedAggregation:[`RowGrouping`,`Pivot`,`TreeData`,`ServerSideRowModel`],SharedDragAndDrop:[`AllCommunity`],SharedMasterDetail:[`MasterDetail`,`ServerSideRowModel`],SharedMenu:[...qv,`ColumnMenu`,`ContextMenu`],SharedPivot:[`Pivot`,`ServerSideRowModel`],SharedRowGrouping:[`RowGrouping`,`ServerSideRowModel`],SharedRowSelection:[`RowSelection`,`ServerSideRowModel`],SkeletonCellRenderer:[`ServerSideRowModel`],Sort:[`AllCommunity`],SsrmInfiniteSharedApi:[`InfiniteRowModel`,`ServerSideRowModelApi`],SharedTreeData:[`TreeData`,`ServerSideRowModel`]},Yv={InfiniteRowModel:`infinite`,ClientSideRowModelApi:`clientSide`,ClientSideRowModel:`clientSide`,ServerSideRowModelApi:`serverSide`,ServerSideRowModel:`serverSide`,ViewportRowModel:`viewport`};function Xv(e,t){let n=[];return(Array.isArray(e)?e:[e]).forEach(e=>{let r=Jv[e];r?r.forEach(e=>{let r=Yv[e];(!r||r===t)&&n.push(e)}):n.push(e)}),n}var Zv=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,Qv=e=>{let t=e.map(e=>`import { ${$v(e)} } from '${Kv[e]?`ag-grid-enterprise`:`ag-grid-community`}';`);return e.some(e=>e===`IntegratedCharts`||e===`Sparklines`)&&t.push(`import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';`),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(e=>$v(e,!0)).join(`, `)} ]); 

For more info see: ${Cr}/modules/`};function $v(e,t=!1){return t&&(e===`IntegratedCharts`||e===`Sparklines`)?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function ey(e,t){let n=t.filter(e=>e===`IntegratedCharts`||e===`Sparklines`),r=``;return!globalThis?.agCharts&&n.length>0?r=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(e=>Kv[e])&&(r+=`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),r}function ty({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var ny=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:r,rowModelType:i,additionalText:a,isUmd:o})=>{let s=Xv(t,i),c=typeof e==`string`?e:sy[e];if(o)return ey(c,s);let l=s.filter(e=>e===`IntegratedCharts`||e===`Sparklines`),u=l.length>0?`${l.map(e=>$v(e)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:``;return`${`Unable to use ${c} as ${s.length>1?`one of `+s.map(e=>$v(e)).join(`, `):$v(s[0])} is not registered${n?` for gridId: `+r:``}. ${u} Check if you have registered the module:
`}
${Qv(s)}`+(a?` 

${a}`:``)},ry=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,iy=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,ay={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>`Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.`,4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>[`Could not find data item as object was not found.`,e,` Consider using getRowId to help the Grid find matching row data`],6:()=>`'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'`,7:()=>`Pivoting is not supported with aligned grids as it may produce different columns in each grid.`,8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>`No gridOptions provided to createGrid`,12:({colKey:e})=>[`column `,e,` not found`],13:()=>`Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.`,14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>[`value should be either a string or a function`,e],16:({expression:e,params:t,e:n})=>[`Processing of the expression failed`,`Expression = `,e,`Params = `,t,`Exception = `,n],17:()=>`you need either field or valueSetter set on colDef for editing to work`,18:()=>`alignedGrids contains an undefined option.`,19:()=>`alignedGrids - No api found on the linked grid.`,20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>`pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.`,22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>`row height must be a number if not using standard row model`,25:({id:e})=>[`The getRowId callback must return a string. The ID `,e,` is being cast to a string.`],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>`setRowCount cannot be used while using row grouping.`,29:()=>`tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?`,30:({toIndex:e})=>[`tried to insert columns in invalid location, toIndex = `,e,`remember that you should not count the moving columns when calculating the new index`],31:()=>`infinite loop in resizeColumnSets`,32:()=>`applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.`,33:()=>`stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.`,34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>`Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.`,36:({t:e})=>`colDef.type '`+e+`' does not correspond to defined gridOptions.columnTypes`,37:()=>`Changing the column pinning status is not allowed with domLayout='print'`,38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>`Applying column order broke a group where columns should be married together. Applying new order has been discarded.`,40:({e,method:t})=>`${e}
${iy(t)}`,41:()=>`Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.`,42:()=>`Browser does not support document.execCommand('copy') for clipboard operations`,43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>`Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.`,45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>`The "baseDataType" property of a data type definition must match that of its parent.`,47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>`Export cancelled. Export is not allowed as per your configuration.`,52:()=>"There is no `window` associated with the current `document`",53:()=>`unknown value type during csv conversion`,54:()=>`Could not find document body, it is needed for drag and drop and context menu.`,55:()=>`addRowDropZone - A container target needs to be provided`,56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>`unable to show popup filter, filter instantiation failed`,58:()=>`no values found for select cellEditor`,59:()=>`cannot select pinned rows`,60:()=>`cannot select node until it has finished loading`,61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>`filter missing setModel method, which is needed for setFilterModel`,66:()=>`filter API missing getModel method, which is needed for getFilterModel`,67:()=>`Filter is missing isFilterActive() method`,68:()=>`Column Filter API methods have been disabled as Advanced Filters are enabled.`,69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>`debounceMs is ignored when apply button is present`,72:({keys:e})=>[`ignoring FilterOptionDef as it doesn't contain one of `,e],73:()=>`invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'`,74:()=>`no filter options for filter`,75:()=>`Unknown button type specified`,76:({filterModelType:e})=>[`Unexpected type of filter "`,e,`", it looks like the filter was configured with incorrect Filter Options`],77:()=>`Filter model is missing 'conditions'`,78:()=>`Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.`,79:()=>`"filterParams.maxNumConditions" must be greater than or equal to zero.`,80:()=>`"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.`,81:()=>`"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".`,82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>`DateFilter minValidYear should be <= maxValidYear`,84:()=>`DateFilter minValidDate should be <= maxValidDate`,85:()=>`DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.`,86:()=>`DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.`,87:()=>`DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.`,88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>`A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)`,90:()=>`datasource is missing getRows method`,91:()=>`Filter is missing method doesFilterPass`,92:()=>`AnimationFrameService called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:r})=>`'paginationPageSize=${e}'${t?``:` (default value)`}, but ${e} is not included in${n?``:` the default`} paginationPageSizeSelector=[${r?.join(`, `)}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>[`Duplicate ID`,e,`found for pinned row with data`,t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>`popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.`,99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:r})=>{let i=[],a=Wv({inputValue:t,allSuggestions:[...Object.keys(n??[]).filter(e=>![`agCellEditor`,`agGroupRowRenderer`,`agSortIndicator`].includes(e)),...Object.keys(r??[]).filter(e=>!!r[e])],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return i.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),a.length>0&&i.push(`         Did you mean: [${a.slice(0,3)}]?
`),i.push(`If using a custom component check it has been registered correctly.`),i},102:()=>`selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'`,103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>[`chart rendering failed`,e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Cr}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>[`chart update failed`,e],109:({inputValue:e,allSuggestions:t})=>{let n=Wv({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:``,`If using a custom aggregation function check it has been registered correctly.`].join(`
`)},110:()=>`groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup`,111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>`Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values`,114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>`selectAll must be of boolean type.`,118:()=>`Infinite scrolling must be enabled in order to set the row count.`,119:()=>`Unable to instantiate filter`,120:()=>`MultiFloatingFilterComp expects MultiFilter as its parent`,121:()=>`a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key`,122:()=>`could not find the document, document is empty`,123:()=>`Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.`,124:()=>`No active charts to update.`,125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>`unable to restore chart as no chart model is provided`,127:({allRange:e})=>`unable to create chart as ${e?`there are no columns in the grid`:`no range is selected`}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>`cannot multi select unless selection mode is "multiRow"`,132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>`Data type of the new value does not match the cell data type of the column`,136:()=>`Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`,137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>`cross filtering with row grouping is not supported.`,142:()=>`cross filtering is only supported in the client side row model.`,143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>`'seriesChartTypes' are required when the 'customCombo' chart type is specified.`,151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>[`unable to find group(s) for supplied groupIds:`,e],158:()=>`can not expand a column item that does not represent a column group header`,159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>`Export cancelled. Export is not allowed as per your configuration.`,161:()=>`The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'`,162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>`Unable to add data table to Excel sheet: A table already exists.`,165:()=>`Unable to add data table to Excel sheet: Missing required parameters.`,166:({unrecognisedGroupIds:e})=>[`unable to find groups for these supplied groupIds:`,e],167:({unrecognisedColIds:e})=>[`unable to find columns for these supplied colIds:`,e],168:()=>`detailCellRendererParams.template should be function or string`,169:()=>`Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.`,170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>`could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions`,172:()=>`could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData`,173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>`valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.`,178:({colId:e})=>`column ${e} is not visible`,179:()=>`totalValueGetter should be either a function or a string (expression)`,180:()=>`agRichSelectCellEditor requires cellEditorParams.values to be set`,181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>`you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data`,183:()=>`Group Column Filter only works on group columns. Please use a different filter.`,184:({parentGroupData:e,childNodeData:t})=>[`duplicate group keys for row data, keys should be unique`,[e,t]],185:({data:e})=>[`getDataPath() should not return an empty path`,[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>[`duplicate group keys for row data, keys should be unique`,e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,`first instance`,t,`second instance`,n],188:()=>`getRowId callback must be provided for Server Side Row Model selection to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>[`null and undefined values are not allowed for server side row model keys`,e?`column = ${e}`:``,`data is `,t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?`current page`:`filtered`} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:ny,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>`Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.`,204:()=>`Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.`,205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>`getRowId callback must be implemented for transactions to work. Transaction was ignored.`,207:()=>`The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.`,208:()=>`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.`,209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Cr}/filter-set-filter-list/#filter-value-types`,210:()=>`Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?`,211:()=>`property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.`,212:()=>`please review all your toolPanel components, it seems like at least one of them doesn't have an id`,213:()=>`Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.`,214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(`,`)}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>[`unable to find grid columns for the supplied colDef(s):`,e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>`agAggregationComponent should only be used with the client and server side row model.`,222:()=>`agFilteredRowCountComponent should only be used with the client side row model.`,223:()=>`agSelectedRowCountComponent should only be used with the client and server side row model.`,224:()=>`agTotalAndFilteredRowCountComponent should only be used with the client side row model.`,225:()=>`agTotalRowCountComponent should only be used with the client side row model.`,226:()=>`viewport is missing init method.`,227:()=>`menu item icon must be DOM node or string`,228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>[`invalid row index for ensureIndexVisible: `,e],230:()=>`detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/`,231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>`Using both rowData and v-model. rowData will be ignored.`,233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>`Group Column Filter does not work with the colDef property "field". This property will be ignored.`,235:()=>`Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.`,236:()=>`Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.`,237:()=>`Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.`,238:()=>`setRowCount can only accept a positive row count.`,239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>`Failed to deserialize state - each provided state object must be an object.`,244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>`SetFloatingFilter expects SetFilter as its parent`,249:()=>`Must supply a Value Formatter in Set Filter params when using a Key Creator`,250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>[`Illegal version string: `,e],254:()=>`Cannot create chart: no chart themes available.`,255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>`Unable to initialise. See validation error, or load ValidationModule if missing.`,257:()=>ry(`IntegratedChartsModule`),258:()=>ry(`SparklinesModule`),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:r,rowModelType:i})=>ny({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:C_[t],gridId:r,gridScoped:n,rowModelType:i}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>`As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.`,263:()=>`As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.`,264:()=>`As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.`,265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Cr}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>`As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.`,267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>`Transactions aren't supported with tree data when using treeDataChildrenField`,269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>Zv(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case`maxComponentCreationTimeMs`:t+=` This property is no longer required and so will be removed in a future version.`;break;case`setGridApi`:t+=` This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api `;break;case`children`:t+=` For multiple versions AgGridReact does not support children.`;break}return t},275:ty,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`};function oy(e,t){let n=ay[e];if(!n)return[`Missing error text for error id ${e}!`];let r=n(t),i=`
See ${Nr(e,t)}`;return Array.isArray(r)?r.concat(i):[r,i]}var sy={1:`Charting Aggregation`,2:`pivotResultFields`,3:`setTooltip`},cy=new WeakMap,ly=new WeakMap;function uy(e,t,n){if(!t)return R(11),{};let r=n,i;if(!r?.setThemeOnGridDiv){let t=F({tag:`div`});t.style.height=`100%`,e.appendChild(t),e=t,i=()=>e.remove()}return new fy().create(e,t,t=>{let n=new fp(e);t.createBean(n)},void 0,n,i)}var dy=1,fy=class{create(e,t,n,r,i,a){let o=kt.applyGlobalGridOptions(t),s=o.gridId??String(dy++),c=this.getRegisteredModules(i,s,o.rowModelType),l=this.createBeansList(o.rowModelType,c,s),u=this.createProvidedBeans(e,o,i);if(!l)return;let d=new gs({providedBeanInstances:u,beanClasses:l,gridId:s,beanInitComparator:Xf,beanDestroyComparator:Zf,derivedBeans:[Jf],destroyCallback:()=>{ly.delete(f),cy.delete(e),a?.()}});this.registerModuleFeatures(d,c),n(d),d.getBean(`syncSvc`).start(),r?.(d);let f=d.getBean(`gridApi`);return cy.set(e,f),ly.set(f,e),f}getRegisteredModules(e,t,n){return as(Uv,void 0,!0),e?.modules?.forEach(e=>as(e,t)),ls(t,py(n))}registerModuleFeatures(e,t){let n=e.getBean(`registry`),r=e.getBean(`apiFunctionSvc`);t.forEach(e=>{n.registerModule(e);let t=e.apiFunctions;t&&Object.keys(t).forEach(e=>{r?.addFunction(e,t[e])})})}createProvidedBeans(e,t,n){let r=n?n.frameworkOverrides:null;M(r)&&(r=new qf);let i={gridOptions:t,eGridDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:r};return n&&n.providedBeanInstances&&Object.assign(i,n.providedBeanInstances),i}createBeansList(e,t,n){let r={clientSide:`ClientSideRowModel`,infinite:`InfiniteRowModel`,serverSide:`ServerSideRowModel`,viewport:`ViewportRowModel`},i=py(e),a=r[i];if(!a){Fr(201,{rowModelType:i},`Unknown rowModelType ${i}.`);return}if(!ds()){Fr(272,void 0,Zv());return}if(!e){let e=Object.entries(r).filter(([e,t])=>ss(t,n,e));if(e.length==1){let[t,n]=e[0];if(t!==i){let e={moduleName:n,rowModelType:t};Fr(275,e,ty(e));return}}}if(!ss(a,n,i)){Fr(200,{reasonOrId:`rowModelType = '${i}'`,moduleName:a,gridScoped:cs(),gridId:n,rowModelType:i},`Missing module ${a}Module for rowModelType ${i}.`);return}let o=new Set;return t.forEach(e=>e.beans?.forEach(e=>o.add(e))),Array.from(o)}};function py(e){return e??`clientSide`}function my(e){let t=e.rowModel;return t.getType()===`clientSide`?t:void 0}function hy(e){let t=e.rowModel;return t.getType()===`serverSide`?t:void 0}var gy=class{wrap(e,t,n,r){let i=this.createWrapper(e,r);return t?.forEach(e=>{this.createMethod(i,e,!0)}),n?.forEach(e=>{this.createMethod(i,e,!1)}),i}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&L(49,{methodName:t}),null)}}},_y={tag:`div`,cls:`ag-tooltip`},vy=class extends jd{constructor(){super(_y)}init(e){let{value:t}=e,n=this.getGui();n.textContent=Xi(t);let r=e.location.replace(/([a-z])([A-Z0-9])/g,`$1-$2`).toLowerCase();n.classList.add(`ag-${r}-tooltip`)}},yy=1e3,by=1e3,xy=100,Sy,Cy=!1,wy=class extends W{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get(`tooltipInteraction`)&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get(`tooltipMouseTrack`);let e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){let t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e===`show`?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay(`tooltipShowDelay`):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay(`tooltipHideDelay`)}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get(`tooltipTrigger`);return!e||e===`hover`?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!vn()&&(Cy?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},xy):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&=e,this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let t=e.relatedTarget,n=this.tooltipCtrl.getGui(),r=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&r?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&=!1,this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Cy)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay(`show`)),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-Sy<yy}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&=(this.onBodyScrollEventCallback(),void 0),this.onColumnMovedEventCallback&&=(this.onColumnMovedEventCallback(),void 0),this.onDocumentKeyDownCallback&&=(this.onDocumentKeyDownCallback(),void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=this.getTooltipValue(),t=this.tooltipCtrl;if(!j(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}let n=t.getRowNode?.(),r=U(this.gos,{location:t.getLocation?.()??`UNKNOWN`,colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:n,data:n?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()??{}});this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);Go(this.userCompFactory,r)?.newAgStackInstance().then(i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Sy=Date.now()),this.eventSvc.dispatchEvent({type:`tooltipHide`,parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}let n=t.getGui();this.tooltipComp=t,n.classList.contains(`ag-tooltip`)||n.classList.add(`ag-tooltip-custom`),this.tooltipTrigger===0&&n.classList.add(`ag-tooltip-animate`),this.interactionEnabled&&n.classList.add(`ag-tooltip-interactive`);let r=this.getLocaleTextFunc(),i=this.popupSvc?.addPopup({eChild:n,ariaLabel:r(`ariaLabelTooltip`,`Tooltip`)});if(i&&(this.tooltipPopupDestroyFunc=i.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(V(this.beans),{keydown:e=>{n.contains(e?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:`tooltipShow`,tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let e=this.tooltipComp?.getGui(),t=H(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){let t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:`tooltip`,ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:`under`,keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add(`ag-tooltip-hiding`);let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?by:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Cy=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},xy)}unlockService(){Cy=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay(`hide`))}clearShowTimeout(){this.showTooltipTimeoutId&&=(window.clearTimeout(this.showTooltipTimeoutId),void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&=(window.clearTimeout(this.hideTooltipTimeoutId),void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&=(window.clearTimeout(this.interactiveTooltipTimeoutId),void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function Ty(e){return e.get(`tooltipShowMode`)===`whenTruncated`}var Ey=class extends W{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){let n=`title`,r=this.ctrl.getGui();r&&(e!=null&&(e!=``||t)?r.setAttribute(n,e):r.removeAttribute(n))}updateTooltipText(){let{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){this.tooltipManager??=this.createBean(new wy(this.ctrl,()=>this.tooltip),this.beans.context)}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get(`enableBrowserTooltips`),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?``:null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},Dy={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},Oy=`clientSide`,ky=`serverSide`,Ay=`infinite`,jy={onGroupExpandedOrCollapsed:[Oy],refreshClientSideRowModel:[Oy],isRowDataEmpty:[Oy],forEachLeafNode:[Oy],forEachNodeAfterFilter:[Oy],forEachNodeAfterFilterAndSort:[Oy],resetRowHeights:[Oy],applyTransaction:[Oy],applyTransactionAsync:[Oy],flushAsyncTransactions:[Oy],getBestCostNodeSelection:[Oy],getServerSideSelectionState:[ky],setServerSideSelectionState:[ky],applyServerSideTransaction:[ky],applyServerSideTransactionAsync:[ky],applyServerSideRowData:[ky],retryServerSideLoads:[ky],flushServerSideAsyncTransactions:[ky],refreshServerSide:[ky],getServerSideGroupLevelState:[ky],refreshInfiniteCache:[Ay],purgeInfiniteCache:[Ay],getInfiniteRowCount:[Ay],isLastRowIndexKnown:[Ay,ky],expandAll:[Oy,ky],collapseAll:[Oy,ky],onRowHeightChanged:[Oy,ky],setRowCount:[Ay,ky],getCacheBlockState:[Ay,ky]},My={showLoadingOverlay:{version:`v32`,message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:`v32.2`,message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:`v32.2`,old:`getInfiniteRowCount()`,new:`getDisplayedRowCount()`},selectAllFiltered:{version:`v33`,old:`selectAllFiltered()`,new:`selectAll("filtered")`},deselectAllFiltered:{version:`v33`,old:`deselectAllFiltered()`,new:`deselectAll("filtered")`},selectAllOnCurrentPage:{version:`v33`,old:`selectAllOnCurrentPage()`,new:`selectAll("currentPage")`},deselectAllOnCurrentPage:{version:`v33`,old:`deselectAllOnCurrentPage()`,new:`deselectAll("currentPage")`}};function Ny(e,t,n){let r=My[e];if(r){let{version:n,new:i,old:a,message:o}=r,s=a??e;return(...e)=>(ur(`Since ${n} api.${s} is deprecated. ${i?`Please use ${i} instead. `:``}${o??``}`),t.apply(t,e))}let i=jy[e];return i?(...r)=>{let a=n.rowModel.getType();if(!i.includes(a)){dr(`api.${e} can only be called when gridOptions.rowModelType is ${i.join(` or `)}`);return}return t.apply(t,r)}:t}var Py={detailCellRendererCtrl:`SharedMasterDetail`,dndSourceComp:`DragAndDrop`,fillHandle:`CellSelection`,groupCellRendererCtrl:`GroupCellRenderer`,headerFilterCellCtrl:`ColumnFilter`,headerGroupCellCtrl:`ColumnGroup`,rangeHandle:`CellSelection`,tooltipFeature:`Tooltip`,groupStrategy:`RowGrouping`,treeGroupStrategy:`TreeData`,rowNumberRowResizer:`RowNumbers`,singleCell:`EditCore`,fullRow:`EditCore`,agSetColumnFilterHandler:`SetFilter`,agMultiColumnFilterHandler:`MultiFilter`,agGroupColumnFilterHandler:`GroupFilter`,agNumberColumnFilterHandler:`NumberFilter`,agDateColumnFilterHandler:`DateFilter`,agTextColumnFilterHandler:`TextFilter`},Fy={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},Iy={chart:`MenuCore`,cancel:`EnterpriseCore`,first:`Pagination`,previous:`Pagination`,next:`Pagination`,last:`Pagination`,linked:`IntegratedCharts`,loadingMenuItems:`MenuCore`,unlinked:`IntegratedCharts`,menu:`ColumnHeaderComp`,legacyMenu:`ColumnMenu`,filter:`ColumnFilter`,filterActive:`ColumnFilter`,filterAdd:`NewFiltersToolPanel`,filterCardCollapse:`NewFiltersToolPanel`,filterCardExpand:`NewFiltersToolPanel`,filterCardEditing:`NewFiltersToolPanel`,filterTab:`ColumnMenu`,filtersToolPanel:`FiltersToolPanel`,columns:[`MenuCore`],columnsToolPanel:[`ColumnsToolPanel`],maximize:`EnterpriseCore`,minimize:`EnterpriseCore`,save:`MenuCore`,columnGroupOpened:`ColumnGroupHeaderComp`,columnGroupClosed:`ColumnGroupHeaderComp`,accordionOpen:`EnterpriseCore`,accordionClosed:`EnterpriseCore`,accordionIndeterminate:`EnterpriseCore`,columnSelectClosed:[`ColumnsToolPanel`,`ColumnMenu`],columnSelectOpen:[`ColumnsToolPanel`,`ColumnMenu`],columnSelectIndeterminate:[`ColumnsToolPanel`,`ColumnMenu`],columnMovePin:`SharedDragAndDrop`,columnMoveHide:`SharedDragAndDrop`,columnMoveMove:`SharedDragAndDrop`,columnMoveLeft:`SharedDragAndDrop`,columnMoveRight:`SharedDragAndDrop`,columnMoveGroup:`SharedDragAndDrop`,columnMoveValue:`SharedDragAndDrop`,columnMovePivot:`SharedDragAndDrop`,dropNotAllowed:`SharedDragAndDrop`,ensureColumnVisible:[`ColumnsToolPanel`,`ColumnMenu`],groupContracted:`GroupCellRenderer`,groupExpanded:`GroupCellRenderer`,setFilterGroupClosed:`SetFilter`,setFilterGroupOpen:`SetFilter`,setFilterGroupIndeterminate:`SetFilter`,setFilterLoading:`SetFilter`,close:`EnterpriseCore`,check:`MenuItem`,colorPicker:`CommunityCore`,groupLoading:`LoadingCellRenderer`,menuAlt:`ColumnHeaderComp`,menuPin:`MenuCore`,menuValue:`MenuCore`,menuAddRowGroup:[`MenuCore`,`ColumnsToolPanel`],menuRemoveRowGroup:[`MenuCore`,`ColumnsToolPanel`],clipboardCopy:`MenuCore`,clipboardCut:`MenuCore`,clipboardPaste:`MenuCore`,pivotPanel:[`ColumnsToolPanel`,`RowGroupingPanel`],rowGroupPanel:[`ColumnsToolPanel`,`RowGroupingPanel`],valuePanel:`ColumnsToolPanel`,columnDrag:`EnterpriseCore`,rowDrag:[`RowDrag`,`DragAndDrop`],csvExport:`MenuCore`,excelExport:`MenuCore`,smallDown:`CommunityCore`,selectOpen:`CommunityCore`,richSelectOpen:`RichSelect`,richSelectRemove:`RichSelect`,smallLeft:`CommunityCore`,smallRight:`CommunityCore`,subMenuOpen:`MenuItem`,subMenuOpenRtl:`MenuItem`,panelDelimiter:`RowGroupingPanel`,panelDelimiterRtl:`RowGroupingPanel`,smallUp:`CommunityCore`,sortAscending:[`MenuCore`,`Sort`],sortDescending:[`MenuCore`,`Sort`],sortUnSort:[`MenuCore`,`Sort`],advancedFilterBuilder:`AdvancedFilter`,advancedFilterBuilderDrag:`AdvancedFilter`,advancedFilterBuilderInvalid:`AdvancedFilter`,advancedFilterBuilderMoveUp:`AdvancedFilter`,advancedFilterBuilderMoveDown:`AdvancedFilter`,advancedFilterBuilderAdd:`AdvancedFilter`,advancedFilterBuilderRemove:`AdvancedFilter`,advancedFilterBuilderSelectOpen:`AdvancedFilter`,chartsMenu:`IntegratedCharts`,chartsMenuEdit:`IntegratedCharts`,chartsMenuAdvancedSettings:`IntegratedCharts`,chartsMenuAdd:`IntegratedCharts`,chartsColorPicker:`IntegratedCharts`,chartsThemePrevious:`IntegratedCharts`,chartsThemeNext:`IntegratedCharts`,chartsDownload:`IntegratedCharts`,checkboxChecked:`CommunityCore`,checkboxIndeterminate:`CommunityCore`,checkboxUnchecked:`CommunityCore`,radioButtonOn:`CommunityCore`,radioButtonOff:`CommunityCore`,rowPin:`PinnedRow`,rowUnpin:`PinnedRow`,rowPinBottom:`PinnedRow`,rowPinTop:`PinnedRow`},Ly=new Set([`colorPicker`,`smallUp`,`checkboxChecked`,`checkboxIndeterminate`,`checkboxUnchecked`,`radioButtonOn`,`radioButtonOff`,`smallDown`,`smallLeft`,`smallRight`]),Ry=class extends W{constructor(){super(...arguments),this.beanName=`validation`}wireBeans(e){this.gridOptions=e.gridOptions,wr(this)}warnOnInitialPropertyUpdate(e,t){e===`api`&&Dy[t]&&L(22,{key:t})}processGridOptions(e){this.processOptions(e,U_())}validateApiFunction(e,t){return Ny(e,t,this.beans)}missingUserComponent(e,t,n,r){let i=C_[t];i?this.gos.assertModuleRegistered(i,`AG Grid '${e}' component: ${t}`):L(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:r})}missingDynamicBean(e){let t=Py[e];return t?Lr(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){By.has(e)&&L(10,{eventType:e})}validateIcon(e){if(Ly.has(e)&&L(43,{iconName:e}),Fy[e])return;let t=Iy[e];if(t){R(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:cs(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get(`rowModelType`),additionalText:`Alternatively, use the CSS icon name directly.`});return}L(134,{iconName:e})}isProvidedUserComp(e){return!!C_[e]}validateColDef(e){this.processOptions(e,k_())}processOptions(e,t){let{validations:n,deprecations:r,allProperties:i,propertyExceptions:a,objectName:o,docsUrl:s}=t;i&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...a??[],...Object.keys(r)],i,o,s);let c=new Set;Object.keys(e).forEach(t=>{let i=r[t];if(i){let{message:e,version:n}=i;c.add(`As of v${n}, ${String(t)} is deprecated. ${e??``}`)}let a=e[t];if(a==null||a===!1)return;let o=n[t];if(!o)return;let{dependencies:s,validate:l,supportedRowModels:u,expectedType:d}=o;if(d){let e=typeof a;if(e!==d){c.add(`${String(t)} should be of type '${d}' but received '${e}' (${a}).`);return}}if(u){let e=this.gridOptions.rowModelType??`clientSide`;if(!u.includes(e)){c.add(`${String(t)} is not supported with the '${e}' row model. It is only valid with: ${u.join(`, `)}.`);return}}if(s){let n=this.checkForRequiredDependencies(t,s,e);if(n){c.add(n);return}}if(l){let t=l(e,this.gridOptions,this.beans);if(t){c.add(t);return}}}),c.size>0&&c.forEach(e=>{ur(e)})}checkForRequiredDependencies(e,t,n){let r=Object.entries(t).filter(([e,t])=>{let r=n[e];return!t.required.includes(r)});return r.length===0?null:r.map(([t,n])=>`'${String(e)}' requires '${t}' to be one of [${n.required.map(e=>e===null?`null`:e===void 0?`undefined`:e).join(`, `)}]. ${n.reason??``}`).join(`
           `)}checkProperties(e,t,n,r,i){let a=zy(Object.getOwnPropertyNames(e),[...[`__ob__`,`__v_skip`,`__metadata__`],...t,...n],n),o=Object.keys(a);for(let e of o){let t=`invalid ${r} property '${e}' did you mean any of these: ${a[e].slice(0,8).join(`, `)}.`;n.includes(`context`)&&(t+=`
If you are trying to annotate ${r} with application data, use the '${r}.context' property instead.`),ur(t)}o.length>0&&i&&ur(`to see all the valid ${r} properties please check: ${this.beans.frameworkOverrides.getDocLink(i)}`)}getConsoleMessage(e,t){return oy(e,t)}};function zy(e,t,n){let r={},i=e.filter(e=>!t.some(t=>t===e));return i.length>0&&i.forEach(e=>r[e]=Wv({inputValue:e,allSuggestions:n}).values),r}var By=new Set([`firstChildChanged`,`lastChildChanged`,`childIndexChanged`]),Vy={moduleName:`Validation`,version:I,beans:[Ry]};function Hy(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var Uy=class extends W{constructor(){super(...arguments),this.beanName=`filterStage`,this.refreshProps=new Set([`excludeChildrenWhenTreeDataFiltering`]),this.step=`filter`}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(t,n)=>{t.hasChildren()&&e&&!n?t.childrenAfterFilter=t.childrenAfterGroup.filter(e=>{let t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,n=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||n}):t.childrenAfterFilter=t.childrenAfterGroup,Hy(t)};if(this.doingTreeDataFiltering()){let e=(t,r)=>{if(t.childrenAfterGroup)for(let i=0;i<t.childrenAfterGroup.length;i++){let a=t.childrenAfterGroup[i],o=r||this.filterManager.doesRowPassFilter({rowNode:a});a.childrenAfterGroup?e(t.childrenAfterGroup[i],o):n(a,o)}n(t,r)};t.executeFromRootNode(t=>e(t,!1))}else t.forEachChangedNodeDepthFirst(e=>n(e,!1),!0)}doingTreeDataFiltering(){return this.gos.get(`treeData`)&&!this.gos.get(`excludeChildrenWhenTreeDataFiltering`)}},Wy=class extends Sd{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,n,r,i){this.comp=e;let a=ro(this,this.beans.context,i);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=r,this.setGui(t,a),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(a),this.setupLeft(a),this.setupHover(a),this.setupFocus(a),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(a),this.setupUi(),a.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(a);let o=()=>this.onColDefChanged(a);a.addManagedListeners(this.column,{colDefChanged:o}),a.addManagedEventListeners({filterSwitched:({column:e})=>{e===this.column&&o()}}),a.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return U(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass(`ag-floating-filter-full-body`,this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass(`ag-floating-filter-body`,!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=zd(`filter`,this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Wl(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.getLocaleTextFunc();Rt(this.eButtonShowMainFilter,e(`ariaFilterMenuOpen`,`Open Filter Menu`))}onTabKeyDown(e){let{beans:t}=this;if(H(t)===this.eGui)return;let n=vc(t,this.eGui,null,e.shiftKey);if(n){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),n.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleCols,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case X.UP:case X.DOWN:case X.LEFT:case X.RIGHT:if(t)return;Ri(e);case X.ENTER:t&&_c(this.eGui)&&e.preventDefault();break;case X.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let t=!!e.relatedTarget&&!e.relatedTarget.classList.contains(`ag-floating-filter`),n=!!e.relatedTarget&&kn(e.relatedTarget,`ag-floating-filter`);if(t&&n&&e.target===this.eGui){let e=this.lastFocusEvent,t=!!(e&&e.key===X.TAB);if(e&&t){let t=e.shiftKey;_c(this.eGui,t)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){let t=new yd(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Oi(this.gos)}setupUserComp(){if(!this.active)return;let e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:`floatingFilter`,positionBy:`button`})}setupSyncWithFilter(e){if(!this.active)return;let{beans:{colFilter:t},column:n,gos:r}=this,i=e=>{if(e?.source===`filterDestroyed`&&(!this.isAlive()||!t?.isAlive()))return;let i=this.comp.getFloatingFilterComp();i&&i.then(i=>{if(i){if(r.get(`enableFilterHandlers`)){let t=e,n=`filter`;t?.afterFloatingFilter?n=`ui`:t?.afterDataChange?n=`dataChanged`:e?.source===`api`&&(n=`api`),this.updateFloatingFilterParams(this.userCompDetails,n);return}let a=t?.getCurrentFloatingFilterParentModel(n),o=e?{...e,columns:e.columns??[],source:e.source===`api`?`api`:`columnFilter`}:null;i.onParentModelChanged(a,o)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:i}),t?.isFilterActive(n)&&i(null)}setupWidth(e){let t=()=>{let e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle(`ag-filter-active`,this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let r=this.beans.colFilter,i=this.active?r?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,a=this.comp.getFloatingFilterComp();!a||!i?this.updateCompDetails(e,i,n):a.then(t=>{!t||r?.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(e,i,n):this.updateFloatingFilterParams(i,`colDef`)})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(e=>{typeof e?.refresh==`function`&&(this.gos.get(`enableFilterHandlers`)&&(n={...n,model:Q(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),e.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function Gy(e,t){let n=e.colModel.getCol(t);if(!n){R(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:`auto`})}function Ky(e){e.menuSvc?.hidePopupMenu()}var qy={moduleName:`SharedMenu`,version:I,beans:[Od],apiFunctions:{showColumnMenu:Gy,hidePopupMenu:Ky}},Jy=0,Yy=200,Xy={moduleName:`Popup`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`popupSvc`,this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){return this.gos.get(`popupParent`)||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n,column:r,node:i,event:a}=e,o=t.getBoundingClientRect(),s=this.getParentRect();this.setAlignedTo(t,n);let c=!1;this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:()=>{let e=this.keepXYWithinBounds(n,o.top-s.top,0),t=n.clientWidth>0?n.clientWidth:200;c||=(n.style.minWidth=`${t}px`,!0);let r=s.right-s.left-t,i;return this.gos.get(`enableRtl`)?(i=l(),i<0&&(i=a(),this.setAlignedStyles(n,`left`)),i>r&&(i=0,this.setAlignedStyles(n,`right`))):(i=a(),i>r&&(i=l(),this.setAlignedStyles(n,`right`)),i<0&&(i=0,this.setAlignedStyles(n,`left`))),{x:i,y:e};function a(){return o.right-s.left-2}function l(){return o.left-s.left-t}},postProcessCallback:()=>this.callPostProcessPopup(`subMenu`,n,t,a instanceof MouseEvent?a:void 0,r,i)})}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:r,skipObserver:i}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:r,keepWithinBounds:!0,skipObserver:i,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:r,keepWithinBounds:i,eventSource:a,alignSide:o=`left`,position:s=`over`,column:c,rowNode:l,type:u}=e,d=a.getBoundingClientRect(),f=this.getParentRect();this.setAlignedTo(a,t),this.positionPopup({ePopup:t,nudgeX:n,nudgeY:r,keepWithinBounds:i,updatePosition:()=>{let n=d.left-f.left;o===`right`&&(n-=t.offsetWidth-d.width);let i;return s===`over`?(i=d.top-f.top,this.setAlignedStyles(t,`over`)):(this.setAlignedStyles(t,`under`),i=this.shouldRenderUnderOrAbove(t,d,f,e.nudgeY||0)===`under`?d.top-f.top+d.height:d.top-t.offsetHeight-(r||0)*2-f.top),{x:n,y:i}},postProcessCallback:()=>this.callPostProcessPopup(u,t,a,null,c,l)})}shouldRenderUnderOrAbove(e,t,n,r){let i=n.bottom-t.bottom,a=t.top-n.top,o=e.offsetHeight+r;return i>o?`under`:a>o||a>i?`above`:`under`}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let{alignedToElement:r}=this.popupList[n];r&&([`right`,`left`,`over`,`above`,`under`].forEach(t=>{r.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)}),t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`)))}setAlignedTo(e,t){let n=this.getPopupIndex(t);if(n!==-1){let t=this.popupList[n];t.alignedToElement=e}}callPostProcessPopup(e,t,n,r,i,a){let o=this.gos.getCallback(`postProcessPopup`);o&&o({column:i,rowNode:a,ePopup:t,type:e,eventSource:n,mouseEvent:r})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:r,nudgeY:i,skipObserver:a,updatePosition:o}=e,s={width:0,height:0},c=(a=!1)=>{let{x:c,y:l}=o();a&&t.clientWidth===s.width&&t.clientHeight===s.height||(s.width=t.clientWidth,s.height=t.clientHeight,r&&(c+=r),i&&(l+=i),n&&(c=this.keepXYWithinBounds(t,c,1),l=this.keepXYWithinBounds(t,l,0)),t.style.left=`${c}px`,t.style.top=`${l}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!a){let e=nr(this.beans,t,()=>c(!0));setTimeout(()=>e(),Yy)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){let e=V(this.beans),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position===`static`&&(t=t.offsetParent),Fn(t)}keepXYWithinBounds(e,t,n){let r=n===0,i=r?`clientHeight`:`clientWidth`,a=r?`top`:`left`,o=r?`height`:`width`,s=r?`scrollTop`:`scrollLeft`,c=V(this.beans),l=c.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),f=u.getBoundingClientRect(),p=c.documentElement.getBoundingClientRect(),m=u===c.body,h=Math.ceil(d[o]),g=m?(r?Nn:Pn)(l)+l[s]:u[i];m&&(g-=Math.abs(p[a]-f[a]));let _=g-h;return Math.min(Math.max(t,0),Math.abs(_))}addPopup(e){let t=V(this.beans),{eChild:n,ariaLabel:r,ariaOwns:i,alwaysOnTop:a,positionCallback:o,anchorToElement:s}=e;if(!t)return L(122),{hideFunc:()=>{}};let c=this.getPopupIndex(n);if(c!==-1)return{hideFunc:this.popupList[c].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,!!a,r,i),u=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(n,l,u,s),{hideFunc:u}}initialisePopupPosition(e){let t=this.getPopupParent().getBoundingClientRect();j(e.style.top)||(e.style.top=`${t.top*-1}px`),j(e.style.left)||(e.style.left=`${t.left*-1}px`)}createPopupWrapper(e,t,n,r){let i=this.getPopupParent(),{environment:a,gos:o}=this.beans,s=F({tag:`div`});return a.applyThemeClasses(s),s.classList.add(`ag-popup`),e.classList.add(o.get(`enableRtl`)?`ag-rtl`:`ag-ltr`,`ag-popup-child`),e.hasAttribute(`role`)||Ft(e,`dialog`),n?Rt(e,n):r&&(e.id||=`popup-component-${Jy}`,on(r,e.id)),s.appendChild(e),i.appendChild(s),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged){let e=this.beans.environment;for(let t of this.popupList)e.applyThemeClasses(t.wrapper)}}addEventListenersToPopup(e){let t=this.beans,n=V(t),r=this.getPopupParent(),{wrapperEl:i,eChild:a,closedCallback:o,afterGuiAttached:s,closeOnEsc:c,modal:l,ariaOwns:u}=e,d=!1,f=e=>{i.contains(H(t))&&e.key===X.ESCAPE&&!zi(e)&&h({keyboardEvent:e})},p=e=>h({mouseEvent:e}),m=e=>h({touchEvent:e}),h=(e={})=>{let{mouseEvent:t,touchEvent:s,keyboardEvent:c,forceHide:l}=e;!l&&(this.isEventFromCurrentPopup({mouseEvent:t,touchEvent:s},a)||d)||(d=!0,r.removeChild(i),n.removeEventListener(`keydown`,f),n.removeEventListener(`mousedown`,p),n.removeEventListener(`touchstart`,m),n.removeEventListener(`contextmenu`,p),this.eventSvc.removeEventListener(`dragStarted`,p),o&&o(t||s||c),this.removePopupFromPopupList(a,u))};return s&&s({hidePopup:h}),window.setTimeout(()=>{c&&n.addEventListener(`keydown`,f),l&&(n.addEventListener(`mousedown`,p),this.eventSvc.addEventListener(`dragStarted`,p),n.addEventListener(`touchstart`,m),n.addEventListener(`contextmenu`,p))},0),h}addPopupToPopupList(e,t,n,r){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:Jy,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(e,r),Jy+=1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let r=this.popupList[n];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(e=>e&&e()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!t)return;let i=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:r.hideFunc});return r.stopAnchoringPromise=i,r.isAnchored=!0,i}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&on(t,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:r,ePopup:i}=e,a=r.getBoundingClientRect(),o=e=>parseInt(e.substring(0,e.length-1),10),s=(e,t)=>{let r=n[e]-a[e],s=o(i.style[e]);return{initialDiff:r,lastDiff:r,initial:s,last:s,direction:t}},c=s(`top`,0),l=s(`left`,1),u=this.beans.frameworkOverrides;return new J(n=>{u.wrapIncoming(()=>{u.setInterval(()=>{let n=t.getBoundingClientRect(),a=r.getBoundingClientRect();if(a.top==0&&a.left==0&&a.height==0&&a.width==0){e.hidePopup();return}let s=(e,t)=>{let r=o(i.style[t]);e.last!==r&&(e.initial=r,e.last=r);let s=n[t]-a[t];if(s!=e.lastDiff){let n=this.keepXYWithinBounds(i,e.initial+e.initialDiff-s,e.direction);i.style[t]=`${n}px`,e.last=n}e.lastDiff=s};s(c,`top`),s(l,`left`)},200).then(e=>{n(()=>{e!=null&&window.clearInterval(e)})})},`popupPositioning`)})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:r}=e,i=n||r;if(!i)return!1;let a=this.getPopupIndex(t);if(a===-1)return!1;for(let e=a;e<this.popupList.length;e++){let t=this.popupList[e];if(Hi(t.element,i))return!0}return this.isElementWithinCustomPopup(i.target)}isElementWithinCustomPopup(e){let t=V(this.beans);for(;e&&e!==t.body;){if(e.classList.contains(`ag-custom-component-popup`)||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains(`ag-popup`)&&e.parentElement;)e=e.parentElement;return e.classList.contains(`ag-popup`)?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle(`ag-always-on-top`,!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(`.ag-popup`)),r=n.length,i=this.getWrapper(e);if(!i||r<=1||!t.contains(e))return;let a=[],o=[];for(let e of n)e!==i&&(e.classList.contains(`ag-always-on-top`)?o.push(e):a.push(e));let s=[],c=o.length,l=i.classList.contains(`ag-always-on-top`)||!c?[...a,...o,i]:[...a,i,...o];for(let e=0;e<=r;e++){let r=l[e];n[e]===l[e]||r===i||(r.querySelectorAll(`div`).forEach(e=>{e.scrollTop!==0&&s.push([e,e.scrollTop])}),e===0?t.insertAdjacentElement(`afterbegin`,r):l[e-1].insertAdjacentElement(`afterend`,r))}for(;s.length;){let e=s.pop();e[0].scrollTop=e[1]}}}]},Zy=`.ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}`;function Qy(e){let t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function $y(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function eb(e,t){let n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,`api`)}function tb(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function nb(e){return e.filterManager?.getFilterModel()??{}}function rb(e,t,n){let{gos:r,colModel:i,colFilter:a}=e;n&&!r.get(`enableFilterHandlers`)&&(L(288),n=!1);let o=i.getColDefCol(t);return o?a?.getModelForColumn(o,n)??null:null}function ib(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function ab(e,t){let n=e.colModel.getCol(t);if(!n){R(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:`columnFilter`,positionBy:`auto`})}function ob(e){e.menuSvc?.hideFilterMenu()}function sb(e,t){let n=e.colModel.getCol(t);if(!n){R(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function cb(e,t){let{colModel:n,colFilter:r,gos:i}=e;if(!i.get(`enableFilterHandlers`)){L(287);return}let{colId:a,action:o}=t;if(a){let e=n.getColById(a);e&&r?.updateModel(e,o)}else r?.updateAllModels(o)}var lb={filterHandler:()=>({doesFilterPass:()=>!0})},ub=class extends W{constructor(){super(...arguments),this.beanName=`colFilter`,this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...rl},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});let e=this.gos,t={...e.get(`initialState`)?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get(`enableFilterHandlers`)||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded(`rowDataUpdated`)}setModel(e,t=`api`){let{colModel:n,dataTypeSvc:r,filterManager:i}=this.beans;if(r?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}let a=[],o=this.getModel(!0);if(e){let t=new Set(Object.keys(e));this.allColumnFilters.forEach((n,r)=>{let i=e[r];a.push(this.setModelOnFilterWrapper(n,i)),t.delete(r)}),t.forEach(t=>{let r=n.getColDefCol(t)||n.getCol(t);if(!r){L(62,{colId:t});return}if(!r.isFilterAllowed()){L(63,{colId:t});return}let i=this.getOrCreateFilterWrapper(r,!0);if(!i){L(64,{colId:t});return}a.push(this.setModelOnFilterWrapper(i,e[t],!0))})}else this.model={},this.allColumnFilters.forEach(e=>{a.push(this.setModelOnFilterWrapper(e,null))});J.all(a).then(()=>{let e=this.getModel(!0),n=[];this.allColumnFilters.forEach((t,r)=>{St(o?o[r]:null,e?e[r]:null)||n.push(t.column)}),n.length>0&&i?.onFilterChanged({columns:n,source:t})})}getModel(e){let t={},{allColumnFilters:n,initialModel:r,beans:{colModel:i}}=this;if(n.forEach((e,n)=>{let r=this.getModelFromFilterWrapper(e);j(r)&&(t[n]=r)}),!e)for(let e of Object.keys(r)){let a=r[e];j(a)&&!n.has(e)&&i.getCol(e)?.isFilterAllowed()&&(t[e]=a)}return t}setState(e,t,n=`api`){if(this.state.clear(),t)for(let e of Object.keys(t)){let n=t[e];this.state.set(e,{model:Q(this.model,e),state:n})}this.setModel(e,n)}getState(){let e=this.state;if(!e.size)return;let t={},n=!1;return e.forEach((e,r)=>{let i=e.state;i!=null&&(n=!0,t[r]=i)}),n?t:void 0}getModelFromFilterWrapper(e){let t=e.column.getColId();if(e.isHandler)return Q(this.model,t);let n=e.filter;return n?typeof n.getModel==`function`?n.getModel():(L(66),null):Q(this.initialModel,t)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};let{allColumnFilters:e}=this;return e.size?(e.forEach(e=>this.disposeFilterWrapper(e,`advancedFilterEnabled`)),!0):!1}updateActiveFilters(){let e=e=>e?e.isFilterActive?e.isFilterActive():(L(67),!1):!1,{colModel:t,gos:n}=this.beans,r=!!ai(n),i=e=>{if(!e.isPrimary())return!0;let n=!t.isPivotActive();return!e.isValueActive()||!n?!1:t.isPivotMode()?!0:r},a=[],o=[],s=(e,t,n)=>{t&&(i(e)?a.push(n):o.push(n))},c=[];return this.allColumnFilters.forEach(t=>{let n=t.column,r=n.getColId();if(t.isHandler)c.push(J.resolve().then(()=>{s(n,this.isHandlerActive(n),{colId:r,isHandler:!0,handler:t.handler,handlerParams:t.handlerParams})}));else{let i=al(t);i&&c.push(i.then(t=>{s(n,e(t),{colId:r,isHandler:!1,comp:t})}))}}),J.all(c).then(()=>{this.activeAggregateFilters=a,this.activeColumnFilters=o})}updateFilterFlagInColumns(e,t){let n=[];return this.allColumnFilters.forEach(r=>{let i=r.column;if(r.isHandler)n.push(J.resolve().then(()=>{this.setColFilterActive(i,this.isHandlerActive(i),e,t)}));else{let a=al(r);a&&n.push(a.then(n=>{this.setColFilterActive(i,n.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),J.all(n)}doFiltersPass(e,t,n){let{data:r,aggData:i}=e,a=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?i:r,s=this.model;for(let n=0;n<a.length;n++){let r=a[n],{colId:i,isHandler:c}=r;if(i!==t)if(c){let{handler:t,handlerParams:n}=r;if(!t.doesFilterPass({node:e,data:o,model:Q(s,i),handlerParams:n}))return!1}else{let t=r.comp;if(typeof t.doesFilterPass!=`function`){R(91);continue}if(!t.doesFilterPass({node:e,data:o}))return!1}}return!0}getHandlerParams(e){let t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){let{rowRenderer:t,filterManager:n}=this.beans,r=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(r,0):r()}updateBeforeFilterChanged(e={}){let{column:t,additionalEventAttributes:n}=e,r=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns(`filterChanged`,n).then(()=>{this.allColumnFilters.forEach(e=>{let{column:t,isHandler:n}=e;r!==t.getColId()&&(n&&e.handler.onAnyFilterChanged?.(),al(e,n)?.then(e=>{typeof e?.onAnyFilterChanged==`function`&&e.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get(`allowShowChangeAfterFilter`)??!1)&&this.processingFilterChange}onNewRowsLoaded(e){let t=[];this.allColumnFilters.forEach(e=>{let n=e.isHandler;n&&e.handler.onNewRowsLoaded?.();let r=al(e,n);r&&t.push(r.then(e=>{e.onNewRowsLoaded?.()}))}),J.all(t).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e,t){let{filterValueSvc:n,colModel:r}=this.beans;return(i,a)=>{let o=a?r.getCol(a):e;return o?n.getValue(o,i,t):void 0}}isFilterActive(e){let t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);let n=t?.filter;return n?n.isFilterActive():Q(this.initialModel,e.getColId())!=null}isHandlerActive(e){let t=j(Q(this.model,e.getColId()));if(t)return t;let n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){let t=this.getOrCreateFilterWrapper(e,!0);return t?al(t):null}getFilterUiForDisplay(e){let t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;let n=al(t);return n?n.then(e=>({comp:e,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){let n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return Di(this.gos)?t?`agSetColumnFloatingFilter`:`agSetColumnFilter`:Rl(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,r,i,a){let o=()=>{let o=r(this.createFilterCompParams(e,i,a),i);return Vo(this.beans.userCompFactory,t,o,n)},s=o();return s?{compDetails:s,createFilterUi:e=>(e?o():s).newAgStackInstance()}:null}createFilterInstance(e,t,n,r){let i=this.beans.selectableFilter;i?.isSelectable(t)&&(t=i.getFilterDef(e,t));let{handler:a,handlerParams:o,handlerGenerator:s}=this.createHandler(e,t,n)??{},c=this.createFilterComp(e,t,n,r,!!a,`init`);if(!c)return{compDetails:null,createFilterUi:null,handler:a,handlerGenerator:s,handlerParams:o};let{compDetails:l,createFilterUi:u}=c;return this.isGlobalButtons&&(l.params?.buttons?.length||L(281,{colId:e.getColId()})),{compDetails:l,handler:a,handlerGenerator:s,handlerParams:o,createFilterUi:u}}createBaseFilterParams(e,t){let{filterManager:n,rowModel:r}=this.beans;return U(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:t=>n?.doesRowPassOtherFilters(e.getColId(),t)??!0,rowModel:r})}createFilterCompParams(e,t,n,r){let i=this.filterChangedCallbackFactory(e),a=this.createBaseFilterParams(e,r);if(a.filterChangedCallback=i,a.filterModifiedCallback=r?()=>{}:t=>this.filterModified(e,t),t){let t=a,r=e.getColId(),o=Q(this.model,r);t.model=o,t.state=this.state.get(r)??{model:o},t.onModelChange=(t,n)=>{this.updateStoredModel(r,t),this.refreshHandlerAndUi(e,t,`ui`).then(()=>{i({...n,source:`columnFilter`})})},t.onStateChange=t=>{this.updateState(e,t),this.updateOrRefreshFilterUi(e)},t.onAction=(t,n,r)=>{this.updateModel(e,t,n),this.dispatchLocalEvent({type:`filterAction`,column:e,action:t,event:r})},t.getHandler=()=>this.getHandler(e,!0),t.onUiChange=t=>this.filterUiChanged(e,t),t.source=n}return a}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){let r=t(),i={created:!0,create:t,filterParams:e.params,compDetails:e,promise:r};return r.then(n),i}createFilterWrapper(e){let{compDetails:t,handler:n,handlerGenerator:r,handlerParams:i,createFilterUi:a}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),e=>e),o=e.getColId();if(n)return delete this.initialModel[o],n.init?.({...i,source:`init`,model:Q(this.model,o)}),{column:e,isHandler:!0,handler:n,handlerGenerator:r,handlerParams:i,filterUi:this.createFilterUiForHandler(t,a)};if(a){let n={column:e,filterUi:null,isHandler:!1};return n.filterUi=this.createFilterUiLegacy(t,a,e=>{n.filter=e??void 0}),n}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t){let{gos:n,frameworkOverrides:r,registry:i}=this.beans,a,o=n.get(`enableFilterHandlers`)?(e=>{let t=e.filter;return oo(t)?t.handler||(a=t.doesFilterPass,a?()=>({doesFilterPass:a}):void 0):typeof t==`string`?t:void 0})(e):void 0,s=e=>()=>this.createBean(i.createDynamicBean(e,!0)),c,l;if(typeof o==`string`){let e=n.get(`filterHandlers`)?.[o];e==null?il.has(o)&&(c=s(o),l=o):c=e}else c=o;if(!c){let n,{compName:i,jsComp:a,fwComp:o}=qo(r,e);i?n=i:a==null&&o==null&&e.filter===!0&&(n=t),l=this.handlerMap[n],l&&(c=s(l))}if(c)return{filterHandler:c,handlerNameOrCallback:a??l}}createHandler(e,t,n){let r=this.createHandlerFunc(t,n);if(!r){let t=this.gos;if(!t.get(`enableFilterHandlers`))return;z(t)&&L(277,{colId:e.getColId()}),r=lb}let i=Jo(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,`init`)),{handlerNameOrCallback:a,filterHandler:o}=r,{handler:s,handlerParams:c}=this.createHandlerFromFunc(e,o,i);return{handler:s,handlerParams:c,handlerGenerator:a??o}}createHandlerFromFunc(e,t,n){let r=e.getColDef();return{handler:t(U(this.gos,{column:e,colDef:r})),handlerParams:this.createHandlerParams(e,n)}}createHandlerParams(e,t){let n=e.getColDef(),r=e.getColId(),i=this.filterChangedCallbackFactory(e);return U(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:e=>this.beans.filterManager?.doesRowPassOtherFilters(r,e)??!0,onModelChange:(t,n)=>{this.updateStoredModel(r,t),this.refreshHandlerAndUi(e,t,`handler`).then(()=>{i({...n,source:`columnFilter`})})},filterParams:t})}onColumnsChanged(){let e=[],{colModel:t,filterManager:n,groupFilter:r}=this.beans;this.allColumnFilters.forEach((n,r)=>{let i;i=n.column.isPrimary()?t.getColDefCol(r):t.getCol(r),!(i&&i===n.column)&&(e.push(n.column),this.disposeFilterWrapper(n,`columnChanged`),this.disposeColumnListener(r))});let i=r&&e.every(e=>r.isGroupFilter(e));e.length>0&&!i&&n?.onFilterChanged({columns:e,source:`api`})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let t=this.beans.groupFilter;return t?.isGroupFilter(e)?t.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){let{userCompFactory:n,frameworkOverrides:r,selectableFilter:i}=this.beans,a=t=>{this.getOrCreateFilterUi(e)?.then(e=>{t(Yo(e))})},o=e.getColDef(),s=i?.isSelectable(o)?i.getFilterDef(e,o):o,c=ql(r,s,()=>this.getDefaultFloatingFilter(e))??`agReadOnlyFloatingFilter`,l=this.gos.get(`enableFilterHandlers`),u=Jo(n,s,this.createFilterCompParams(e,l,`init`,!0)),d=U(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:a,showParentFilter:t});if(l){let t=d,n=e.getColId(),r=this.filterChangedCallbackFactory(e);t.onUiChange=t=>this.floatingFilterUiChanged(e,t),t.model=Q(this.model,n),t.onModelChange=(t,i)=>{this.updateStoredModel(n,t),this.refreshHandlerAndUi(e,t,`floating`,!0).then(()=>{r({...i,source:`columnFilter`})})},t.getHandler=()=>this.getHandler(e,!0),t.source=`init`}return Ko(n,o,d,c)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,r){if(e.isHandler){let i=t.getColId();delete this.initialModel[i],this.state.delete(i);let a=e.filterUi;e.filterUi=this.createFilterUiForHandler(n,r),a?.created&&a.promise.then(t=>{this.destroyBean(t),this.eventSvc.dispatchEvent({type:`filterDestroyed`,source:`paramsUpdated`,column:e.column})})}else this.destroyFilter(t,`paramsUpdated`)}destroyFilter(e,t=`api`){let n=e.getColId(),r=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],r&&this.disposeFilterWrapper(r,t).then(t=>{t&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:`api`})})}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1,{column:r,isHandler:i,filterUi:a}=e,o=r.getColId();i&&(n=this.isHandlerActive(r),this.destroyBean(e.handler),delete this.model[o],this.state.delete(o));let s=()=>{this.setColFilterActive(r,!1,`filterDestroyed`),this.allColumnFilters.delete(o),this.eventSvc.dispatchEvent({type:`filterDestroyed`,source:t,column:r})};if(a){if(a.created)return a.promise.then(e=>(n=i?n:!!e?.isFilterActive(),this.destroyBean(e),s(),n));s()}return J.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??`columnFilter`})}}filterParamsChanged(e,t=`api`){let n=this.allColumnFilters.get(e);if(!n)return;let r=this.beans,i=n.column,a=i.getColDef(),o=i.isFilterAllowed(),s=this.getDefaultFilter(i),c=r.selectableFilter,l=c?.isSelectable(a)?c.getFilterDef(i,a):a,u=o?this.createHandlerFunc(l,this.getDefaultFilter(i)):void 0,d=!!u,f=n.isHandler;if(f!=d){this.destroyFilter(i,`paramsUpdated`);return}let{compDetails:p,createFilterUi:m}=(o?this.createFilterComp(i,l,s,e=>e,d,`colDef`):null)??{compDetails:null,createFilterUi:null},h=p?.params??Jo(r.userCompFactory,l,this.createFilterCompParams(i,d,`colDef`));if(f){let r=u?.handlerNameOrCallback??u?.filterHandler,a=Q(this.model,e);if(n.handlerGenerator!=r){let o=n.handler,{handler:s,handlerParams:c}=this.createHandlerFromFunc(i,u.filterHandler,h);n.handler=s,n.handlerParams=c,n.handlerGenerator=r,delete this.model[e],s.init?.({...c,source:`init`,model:null}),this.destroyBean(o),a!=null&&this.beans.filterManager?.onFilterChanged({columns:[i],source:t})}else{let e=this.createHandlerParams(i,p?.params);n.handlerParams=e,n.handler.refresh?.({...e,source:`colDef`,model:a})}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,p)||!n.filterUi||!p){this.destroyFilterUi(n,i,p,m);return}n.filterUi.filterParams=h,al(n,f)?.then(e=>{(e?.refresh?e.refresh(h):!0)===!1?this.destroyFilterUi(n,i,p,m):this.dispatchLocalEvent({type:`filterParamsChanged`,column:i,params:h})})}refreshHandlerAndUi(e,t,n,r){let i=this.cachedFilter(e);if(!i)return r&&this.getOrCreateFilterWrapper(e,!0),J.resolve();if(!i.isHandler)return J.resolve();let{filterUi:a,handler:o,handlerParams:s}=i;return ol(()=>{if(a){let{created:e,filterParams:t}=a;if(e)return a.promise.then(e=>e?{filter:e,filterParams:t}:void 0);a.refreshed=!0}return J.resolve(void 0)},o,s,t,this.state.get(e.getColId())??{model:t},n)}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:r}=t;return!(n===r||n?.render&&r?.render&&n.render===r.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(e=>e.getColDef().floatingFilter)}getFilterInstance(e){let t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);let n=this.getOrCreateFilterUi(t);return n?new Promise(e=>{n.then(t=>{e(Yo(t))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){let{state:t,model:n}=this,r=e.getColId(),i=t.get(r);return i?i.model??null:Q(n,r)}let n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{},r=new Promise(e=>{n=e});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),r}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(e=>n(e))})}getStateForColumn(e){return this.state.get(e)??{model:Q(this.model,e)}}setModelForColumnLegacy(e,t){let n=this.beans.colModel.getColDefCol(e),r=n?this.getOrCreateFilterWrapper(n,!0):null;return r?this.setModelOnFilterWrapper(r,t):J.resolve()}setColDefPropsForDataType(e,t,n){let r=e.filter,i=r===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):r;if(typeof i!=`string`)return;let a,o,s=this.beans,{filterParams:c,filterValueGetter:l}=e;i===`agMultiColumnFilter`?{filterParams:a,filterValueGetter:o}=s.multiFilter?.getParamsForDataType(c,l,t,n)??{}:{filterParams:a,filterValueGetter:o}=Fl(i,c,l,t,n,s,this.getLocaleTextFunc()),e.filterParams=a,o&&(e.filterValueGetter=o)}setColFilterActive(e,t,n,r){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent(`filterActiveChanged`,n)),e.dispatchColEvent(`filterChanged`,n,r)}setModelOnFilterWrapper(e,t,n){return new J(r=>{if(e.isHandler){let i=e.column,a=i.getColId(),o=this.model[a];if(this.updateStoredModel(a,t),n&&t===o){r();return}this.refreshHandlerAndUi(i,t,`api`).then(()=>r());return}let i=al(e);if(i){i.then(e=>{if(typeof e?.setModel!=`function`){L(65),r();return}(e.setModel(t)||J.resolve()).then(()=>r())});return}r()})}updateStoredModel(e,t){j(t)?this.model[e]=t:delete this.model[e];let n={model:t,state:this.state.get(e)?.state};this.state.set(e,n)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent({type:`filterModified`,column:e,filterInstance:n,...t})})}filterUiChanged(e,t){this.gos.get(`enableFilterHandlers`)&&this.eventSvc.dispatchEvent({type:`filterUiChanged`,column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get(`enableFilterHandlers`)&&this.eventSvc.dispatchEvent({type:`floatingFilterUiChanged`,column:e,...t})}updateModel(e,t,n){let r=e.getColId(),i=()=>this.cachedFilter(e)?.filterUi;ll(t,i,()=>Q(this.model,r),()=>this.state.get(r),t=>this.updateState(e,t),e=>i()?.filterParams?.onModelChange(e,n))}updateAllModels(e,t){let n=[];this.allColumnFilters.forEach((t,r)=>{let i=this.beans.colModel.getColDefCol(r);i&&ll(e,()=>t.filterUi,()=>Q(this.model,r),()=>this.state.get(r),e=>this.updateState(i,e),t=>{this.updateStoredModel(r,t),this.dispatchLocalEvent({type:`filterAction`,column:i,action:e}),n.push(this.refreshHandlerAndUi(i,t,`ui`))})}),n.length&&J.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:`columnFilter`,additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){let t=e.getColId();cl(()=>this.cachedFilter(e)?.filterUi,()=>Q(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:`filterStateChanged`,column:e,state:t})}canApplyAll(){let{state:e,model:t,activeFilterComps:n}=this;for(let e of n)if(e.source===`COLUMN_MENU`)return!1;let r=!1;for(let n of e.keys()){let i=e.get(n);if(i.valid===!1)return!1;(i.model??null)!==Q(t,n)&&(r=!0)}return r}hasUnappliedModel(e){let{model:t,state:n}=this;return(n.get(e)?.model??null)!==Q(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:`filterGlobalButtons`,isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t===`newFiltersToolPanel`)return!0;let n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,`gridDestroyed`)),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function db(e){return!!e.filterManager?.isAnyFilterPresent()}function fb(e,t=`api`){e.filterManager?.onFilterChanged({source:t})}var pb=class extends W{constructor(){super(...arguments),this.beanName=`filterManager`,this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:e})=>this.onAdvFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners([`isExternalFilterPresent`,`doesExternalFilterPass`],()=>{this.onFilterChanged({source:`api`})}),this.updateAggFiltering(),this.addManagedPropertyListener(`groupAggFiltering`,()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:`quickFilter`})});let{gos:n}=this;this.alwaysPassFilter=n.get(`alwaysPassFilter`),this.addManagedPropertyListener(`alwaysPassFilter`,()=>{this.alwaysPassFilter=n.get(`alwaysPassFilter`),this.onFilterChanged({source:`api`})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback(`isExternalFilterPresent`);return typeof e==`function`&&e({})}doesExternalFilterPass(e){let t=this.gos.get(`doesExternalFilterPass`);return typeof t==`function`&&t(e)}setFilterState(e,t,n=`api`){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t=`api`,n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:`advancedFilter`}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:`advancedFilter`}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){ai(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:r=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):J.resolve()).then(()=>{let e={source:t,type:`filterChanged`,columns:r};n&&N(e,n),this.eventSvc.dispatchEvent(e),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!ai(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get(`applyQuickFilterBeforePivotOrAgg`)}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t=`api`){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:`advancedFilter`})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){L(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},mb=class extends W{constructor(){super(...arguments),this.beanName=`filterMenuFactory`}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,r){e&&!e.isColumn||this.showPopup(e,r=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:r})},n,t.target,Oi(this.gos),r)}showMenuAfterButtonClick(e,t,n,r){if(e&&!e.isColumn)return;let i=-1,a=`left`,o=Oi(this.gos);!o&&this.gos.get(`enableRtl`)&&(i=1,a=`right`);let s=o?void 0:4*i,c=o?void 0:4;this.showPopup(e,r=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:r,nudgeX:s,nudgeY:c,alignSide:a,keepWithinBounds:!0,position:`under`,column:e})},n,t,o,r)}showPopup(e,t,n,r,i,a){let o=e?this.createBean(new vl(e,`COLUMN_MENU`)):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e){R(57);return}let s=F({tag:`div`,cls:`ag-menu${i?``:` ag-filter-menu`}`,role:`presentation`});[this.tabListener]=this.addManagedElementListeners(s,{keydown:e=>this.trapFocusWithin(e,s)}),s.appendChild(o?.getGui());let c,l=()=>o?.afterGuiDetached(),u=ki(this.gos)?r??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,d=t=>{kd(e,!1,`contextMenu`);let i=t instanceof KeyboardEvent;this.tabListener&&=this.tabListener(),i&&r&&Vn(r)&&yc(r)?.focus({preventScroll:!0}),l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),a?.()},f=this.getLocaleTextFunc(),p=i&&n!==`columnFilter`?f(`ariaLabelColumnMenu`,`Column Menu`):f(`ariaLabelColumnFilter`,`Column Filter`),m=this.popupSvc?.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(s),anchorToElement:u,ariaLabel:p});m&&(this.hidePopup=c=m.hideFunc),o.afterInit().then(()=>{t(s),o.afterGuiAttached({container:n,hidePopup:c})}),kd(e,!0,`contextMenu`),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==X.TAB||e.defaultPrevented||vc(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),_c(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:`columnMenuVisibleChanged`,visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??[`filterMenuTab`]).includes(`filterMenuTab`)}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},hb=class extends W{constructor(){super(...arguments),this.beanName=`filterValueSvc`}getValue(e,t,n){if(!t)return;let r=e.getColDef(),{selectableFilter:i,valueSvc:a}=this.beans,o=n??i?.getFilterValueGetter(e.getColId())??r.filterValueGetter;return o?this.executeFilterValueGetter(o,t.data,e,t,r):a.getValue(e,t)}executeFilterValueGetter(e,t,n,r,i){let{expressionSvc:a,valueSvc:o}=this.beans,s=U(this.gos,{data:t,node:r,column:n,colDef:i,getValue:o.getValueCallback.bind(o,r)});return typeof e==`function`?e(s):a?.evaluate(e,s)}},gb=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){let n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){let{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t!=`string`){if(![[`displayKey`],[`displayName`],[`predicate`,`test`]].every(e=>e.some(e=>t[e]!=null)?!0:(L(72,{keys:e}),!1))){this.filterOptions=e.filter(e=>e===t)||[];return}this.customFilterOptions[t.displayKey]=t}})}getDefaultItem(e){let{filterOptions:t}=this;if(e)return e;if(t.length>=1){let e=t[0];if(typeof e==`string`)return e;if(e.displayKey)return e.displayKey;L(73)}else L(74)}getCustomOption(e){return this.customFilterOptions[e]}};function _b(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function vb(e){return e==null||typeof e==`string`&&e.trim().length===0}function yb(e){return e===`AND`||e===`OR`?e:`AND`}function bb(e,t,n){if(e==null)return;let{predicate:r}=e;if(r!=null&&!t.some(e=>e==null))return r(t,n)}function xb(e,t){let n=e.length;return n>t&&(e.splice(t),L(78),n=t),n}function Sb(e,t){let n=t.getCustomOption(e);if(n){let{numberOfInputs:e}=n;return e??1}return e&&[`empty`,`notBlank`,`blank`].indexOf(e)>=0?0:e===`inRange`?2:1}var Cb=class extends Gl{constructor(e,t,n){super(e,`simple-filter`),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);let t=new gb;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=yb(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();let t=this.getGui();this.isReadOnly()?t.setAttribute(`tabindex`,`-1`):t.removeAttribute(`tabindex`)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(`immediately`,!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{let r=n===0?e:this.optionsFactory.defaultOption;t.setValue(r,!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){let{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?`OR`:`AND`}areNonNullModelsEqual(e,t){let n=!e.operator,r=!t.operator;if(!n&&r||n&&!r)return!1;let i;if(n){let n=e,r=t;i=this.areSimpleModelsEqual(n,r)}else{let n=e,r=t;i=n.operator===r.operator&&ca(n.conditions,r.conditions,(e,t)=>this.areSimpleModelsEqual(e,t))}return i}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),J.resolve();if(e.operator){let t=e,n=t.conditions;n??(n=[],L(77));let r=xb(n,this.maxNumConditions),i=this.getNumConditions();if(r<i)this.removeConditionsAndOperators(r);else if(r>i)for(let e=i;e<r;e++)this.createJoinOperatorPanel(),this.createOption();let a=t.operator===`OR`;this.eJoinAnds.forEach(e=>e.setValue(!a,!0)),this.eJoinOrs.forEach(e=>e.setValue(a,!0)),n.forEach((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)})}else{let t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),J.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(L(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(L(80),n=1),n>t&&(L(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){let e=this.getGui(),t=this.createManagedBean(new Vf);this.eTypes.push(t),t.addCss(`ag-filter-select`),e.appendChild(t.getGui());let n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);let r=this.getNumConditions()-1;this.forEachPositionInput(r,e=>this.resetInput(e)),this.addChangedListeners(t,r)}createJoinOperatorPanel(){let e=F({tag:`div`,cls:`ag-filter-condition`});this.eJoinPanels.push(e);let t=this.createJoinOperator(this.eJoinAnds,e,`and`),n=this.createJoinOperator(this.eJoinOrs,e,`or`);this.getGui().appendChild(e);let r=this.eJoinPanels.length-1,i=this.joinOperatorId++;this.resetJoinOperatorAnd(t,r,i),this.resetJoinOperatorOr(n,r,i),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let r=this.createManagedBean(new kf);e.push(r);let i=`ag-filter-condition-operator`;return r.addCss(i),r.addCss(`${i}-${n}`),t.appendChild(r.getGui()),r}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e==`string`?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){let{filterListOptions:t}=this;t.forEach(t=>{e.addOption(t)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);let n=e+1,r=t-n;r>0&&this.removeConditionsAndOperators(n,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((t,n)=>{let r=this.isConditionDisabled(n,e);t.setDisabled(r||this.filterListOptions.length<=1),n===1&&(On(this.eJoinPanels[0],r),this.eJoinAnds[0].setDisabled(r),this.eJoinOrs[0].setDisabled(r))}),this.eConditionBodies.forEach((e,t)=>{P(e,this.isConditionBodyVisible(t))});let n=(t??this.getJoinOperator())===`OR`;this.eJoinAnds.forEach(e=>{e.setValue(!n,!0)}),this.eJoinOrs.forEach(e=>{e.setValue(n,!0)}),this.forEachInput((t,n,r,i)=>{this.setElementDisplayed(t,n<i),this.setElementDisabled(t,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;let{eTypes:n,eConditionBodies:r,eJoinPanels:i,eJoinAnds:a,eJoinOrs:o}=this;this.removeComponents(n,e,t),this.removeElements(r,e,t),this.removeEValues(e,t);let s=Math.max(e-1,0);this.removeElements(i,s,t),this.removeComponents(a,s,t),this.removeComponents(o,s,t)}removeElements(e,t,n){_b(e,t,n).forEach(e=>zn(e))}removeComponents(e,t,n){_b(e,t,n).forEach(e=>{zn(e.getGui()),this.destroyBean(e)})}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let e;if(!this.isReadOnly()){let t=this.getInputs(0)[0];e=t instanceof qd&&this.isConditionBodyVisible(0)?t.getInputElement():this.eTypes[0]?.getFocusableElement()}(e??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();let e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,n=-1,r=!1,i=this.getJoinOperator();for(let e=this.getNumConditions()-1;e>=0;e--)if(this.isConditionUiComplete(e))t===-1&&(t=e,n=e);else{let i=e>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(e-1),a=e<t;(i||a)&&(this.removeConditionsAndOperators(e,1),r=!0,a&&n--)}let a=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),a=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),a=!0),a&&this.updateConditionStatusesAndValues(n,i),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??``}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder==`function`){let e=this.eTypes[t].getValue(),r=this.translate(e);n=this.filterPlaceholder({filterOptionKey:e,filterOption:r,placeholder:n})}else typeof this.filterPlaceholder==`string`&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.getLocaleTextFunc();this.forEachInput((t,n,r,i)=>{if(!(t instanceof qd))return;let a=n===0&&i>1?`inRangeStart`:n===0?`filterOoo`:`inRangeEnd`,o=n===0&&i>1?e(`ariaFilterFromValue`,`Filter from value`):n===0?e(`ariaFilterValue`,`Filter Value`):e(`ariaFilterToValue`,`Filter to Value`);t.setInputPlaceholder(this.getPlaceholderText(a,r)),t.setInputAriaLabel(o)})}setElementValue(e,t,n){e instanceof qd&&e.setValue(t==null?null:String(t),!0)}setElementDisplayed(e,t){e instanceof q&&P(e.getGui(),t)}setElementDisabled(e,t){e instanceof q&&On(e.getGui(),t)}attachElementOnChange(e,t){e instanceof qd&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let r=Sb(t,this.optionsFactory),i=this.getInputs(e);for(let t=0;t<i.length;t++){let a=i[t];a!=null&&n(a,t,e,r)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){return Sb(this.getConditionType(e),this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===`empty`||this.getValues(e).some(e=>e==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinAnds.forEach((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t)),this.eJoinOrs.forEach((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){let t=this.getLocaleTextFunc()(`ariaFilteringOperator`,`Filtering operator`);e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator===`AND`,this.translate(`andCondition`),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator===`OR`,this.translate(`orCondition`),n)}resetJoinOperator(e,t,n,r,i){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${i}`).setLabel(r),t)}updateJoinOperatorsDisabled(){let e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((e,r,i)=>{i===t&&this.setElementValue(e,n[r]==null?null:n[r])})}setValueFromFloatingFilter(e){this.forEachInput((t,n,r)=>{this.setElementValue(t,n===0&&r===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,e=>{this.attachElementOnChange(e,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},wb=class{constructor(e,t,n,r,i,a){this.alive=!0,this.context=e,this.eParent=i;let o=Ho(t,n,r);o&&o.newAgStackInstance().then(t=>{if(!this.alive){e.destroyBean(t);return}if(this.dateComp=t,!t)return;i.appendChild(t.getGui()),t?.afterGuiAttached?.();let{tempValue:n,disabled:r}=this;n&&t.setDate(n),r!=null&&t.setDisabled?.(r),a?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){let t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){let t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){P(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},Tb=[`equals`,`notEqual`,`lessThan`,`greaterThan`,`inRange`,`blank`,`notBlank`];function Eb(e,t){let{dateFrom:n,dateTo:r,type:i}=e||{};return[n&&Ol(n)||null,r&&Ol(r)||null].slice(0,Sb(i,t))}var Db=1e3,Ob=1/0,kb=class extends Cb{constructor(){super(`dateFilter`,Eb,Tb),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=Db,this.maxValidYear=Ob,this.minValidDate=null,this.maxValidDate=null,this.filterType=`date`}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);let t=(t,n)=>{let r=e[t];if(r!=null)if(isNaN(r))L(82,{param:t});else return r==null?n:Number(r);return n},n=t(`minValidYear`,Db),r=t(`maxValidYear`,Ob);this.minValidYear=n,this.maxValidYear=r,n>r&&L(83);let{minValidDate:i,maxValidDate:a}=e,o=i instanceof Date?i:Ol(i);this.minValidDate=o;let s=a instanceof Date?a:Ol(a);this.maxValidDate=s,o&&s&&o>s&&L(84)}createDateCompWrapper(e){let{beans:{userCompFactory:t,context:n,gos:r},params:i}=this,a=new wb(n,t,i.colDef,U(r,{onDateChanged:()=>this.onUiChanged(),filterParams:i,location:`filter`}),e);return this.addDestroyFunc(()=>a.destroy()),a}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){let e=F({tag:`div`,cls:`ag-filter-body`});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,`from`),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,`to`),e}createFromToElement(e,t,n,r){let i=F({tag:`div`,cls:`ag-filter-${r} ag-filter-date-${r}`});t.push(i),e.appendChild(i),n.push(this.createDateCompWrapper(i))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),_b(this.eConditionPanelsFrom,e,t),_b(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){_b(e,t,n).forEach(e=>e.destroy())}isValidDateValue(e){if(e===null)return!1;let{minValidDate:t,maxValidDate:n,minValidYear:r,maxValidYear:i}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<r)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>i)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,r,i,a)=>{i!==e||!t||r>=a||(t&&=this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),n={},r=this.getValues(e);return r.length>0&&(n.dateFrom=Sl(r[0])),r.length>1&&(n.dateTo=Sl(r[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...n}}resetPlaceholder(){let e=this.getLocaleTextFunc(),t=this.translate(`dateFormatOoo`),n=e(`ariaFilterValue`,`Filter Value`);this.forEachInput(e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(n)})}getInputs(e){let{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(e,n,r,i)=>{n<i&&t.push(e.getDate())}),t}translate(e){return e===`lessThan`?super.translate(`before`):e===`greaterThan`?super.translate(`after`):super.translate(e)}},Ab=class extends W{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){let t=e.filterParams,n=new gb;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source===`colDef`){let t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){let t=e.model;if(t==null)return!0;let{operator:n}=t,r=[];if(n){let e=t;r.push(...e.conditions??[])}else r.push(t);let i=n&&n===`OR`?`some`:`every`,a=this.params.getValue(e.node);return r[i](t=>this.individualConditionPasses(e,t,a))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??``}validateModel(e){let{model:t,filterParams:{filterOptions:n,maxNumConditions:r}}=e;if(t==null)return;let i=Kl(t)?t.conditions:[t],a=n?.map(e=>typeof e==`string`?e:e.displayKey)??this.defaultOptions;if(!(!i||i.every(e=>a.find(t=>t===e.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let o=!1,s=this.filterType;if((i&&!i.every(e=>e.filterType===s)||t.filterType!==s)&&(i=i.map(e=>({...e,filterType:s})),o=!0),typeof r==`number`&&i&&i.length>r&&(i=i.slice(0,r),o=!0),o){let n=i.length>1?{...t,filterType:s,conditions:i}:{...i[0],filterType:s};this.params={...e,model:n},e.onModelChange(n);return}}individualConditionPasses(e,t,n){let r=this.optionsFactory,i=this.mapValuesFromModel(t,r);return bb(r.getCustomOption(t.type),i,n)??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}},jb=class extends Ab{evaluateNullValue(e){let{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:r,includeBlanksInLessThan:i,includeBlanksInRange:a}=this.params.filterParams;switch(e){case`equals`:if(t)return!0;break;case`notEqual`:if(n)return!0;break;case`greaterThan`:case`greaterThanOrEqual`:if(r)return!0;break;case`lessThan`:case`lessThanOrEqual`:if(i)return!0;break;case`inRange`:if(a)return!0;break;case`blank`:return!0;case`notBlank`:return!1}return!1}evaluateNonNullValue(e,t,n){let r=n.type;if(!this.isValid(t))return r===`notEqual`||r===`notBlank`;let i=this.comparator(),a=e[0]==null?0:i(e[0],t);switch(r){case`equals`:return a===0;case`notEqual`:return a!==0;case`greaterThan`:return a>0;case`greaterThanOrEqual`:return a>=0;case`lessThan`:return a<0;case`lessThanOrEqual`:return a<=0;case`inRange`:{let n=i(e[1],t);return this.params.filterParams.inRangeInclusive?a>=0&&n<=0:a>0&&n<0}case`blank`:return vb(t);case`notBlank`:return!vb(t);default:return L(76,{filterModelType:r}),!0}}},Mb={equals:`Equals`,notEqual:`NotEqual`,greaterThan:`GreaterThan`,greaterThanOrEqual:`GreaterThanOrEqual`,lessThan:`LessThan`,lessThanOrEqual:`LessThanOrEqual`,inRange:`InRange`},Nb={contains:`Contains`,notContains:`NotContains`,equals:`TextEquals`,notEqual:`TextNotEqual`,startsWith:`StartsWith`,endsWith:`EndsWith`,inRange:`InRange`},Pb=class extends W{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){let n=this.getLocaleTextFunc(),r=t===`filterToolPanel`;if(!e)return r?pl(this,`filterSummaryInactive`):null;if(e.operator!=null){let n=e,r=(n.conditions??[]).map(e=>this.getModelAsString(e,t)),i=n.operator===`AND`?`andCondition`:`orCondition`;return r.join(` ${pl(this,i)} `)}else if(e.type===`blank`||e.type===`notBlank`)return r?pl(this,e.type===`blank`?`filterSummaryBlank`:`filterSummaryNotBlank`):n(e.type,e.type);else{let t=e,{displayKey:i,displayName:a,numberOfInputs:o}=this.optionsFactory.getCustomOption(t.type)||{};return i&&a&&o===0?n(i,a):this.conditionToString(t,r,t.type===`inRange`||o===2,i,a)}}updateParams(e){let{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,r,i,a){let o,s=this.getTypeKey(e);return s&&(o=pl(this,s)),i&&a&&(o=this.getLocaleTextFunc()(i,a)),o==null?null:t?`${o} ${pl(this,`filterSummaryInRangeValues`,[n(),r()])}`:`${o} ${n()}`}getTypeKey(e){let t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){let t=this.valueFormatter;return t?t(e??null)??``:String(e)}},Fb=class extends Pb{constructor(e,t){super(e,t,e=>{let{dataTypeSvc:n,valueSvc:r}=this.beans,i=t.column,a=n?.getDateFormatterFunction(i),o=a?.(e??void 0);return r.formatValue(i,null,o)}),this.filterTypeKeys=Mb}conditionToString(e,t,n,r,i){let{type:a}=e,o=Ol(e.dateFrom),s=Ol(e.dateTo),c=this.filterParams.inRangeFloatingFilterDateFormat,l=t?this.formatValue.bind(this):e=>Tl(e,c),u=()=>o===null?`null`:l(o),d=()=>s===null?`null`:l(s);if(t){let e=this.conditionForToolPanel(a,n,u,d,r,i);if(e!=null)return e}return n?`${u()}-${d()}`:o==null?`${a}`:l(o)}};function Ib(e,t){let n=t;return n<e?-1:n>e?1:0}var Lb=class extends jb{constructor(){super(Eb,Tb),this.filterType=`date`,this.FilterModelFormatterClass=Fb}comparator(){return this.params.filterParams.comparator??Ib}isValid(e){let t=this.params.filterParams.isValidDate;return!t||t(e)}},Rb=class extends q{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}let t=e.operator,n;n=t?e.conditions[0]:e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let t=e;return this.isTypeEditable(t.type)}init(e){this.params=e;let t=this.gos.get(`enableFilterHandlers`);if(this.reactive=t,this.setParams(e),t){let t=e;this.onModelUpdated(t.model)}}setParams(e){let t=new gb;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){let n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;let r=this.isTypeEditable(n);this.setEditable(r)}refresh(e){this.params=e;let t=e,n=this.reactive;if((!n||t.source===`colDef`)&&this.updateParams(e),n){let{source:e,model:n}=t;if(e===`dataChanged`||e===`ui`)return;this.onModelUpdated(n)}}updateParams(e){let t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){let t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&[`inRange`,`empty`,`blank`,`notBlank`].indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,`header`,!0)} ${this.getLocaleTextFunc()(`ariaFilterInput`,`Filter Input`)}`}},zb={tag:`div`,cls:`ag-floating-filter-input`,role:`presentation`,children:[{tag:`ag-input-text-field`,ref:`eReadOnlyText`},{tag:`div`,ref:`eDateWrapper`,cls:`ag-date-floating-filter-wrapper`}]},Bb=class extends Rb{constructor(){super(zb,[jf]),this.eReadOnlyText=null,this.eDateWrapper=null,this.FilterModelFormatterClass=Fb,this.filterType=`date`,this.defaultOptions=Tb}setParams(e){super.setParams(e),this.createDateComponent();let t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t(`ariaDateFilterInput`,`Date Filter Input`))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){let t=e?Ol(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue(``)}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){P(this.eDateWrapper,e),P(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){let e=this.dateComp.getDate();if(this.reactive){let t=this.params;t.onUiChange();let n=t.model,r=Sl(e),i=r==null?null:{...n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:r};t.onModelChange(i,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){let{filterParams:e}=this.params,t=ml(e,this.defaultDebounceMs);return U(this.gos,{onDateChanged:hr(this,this.onDateChanged.bind(this),t),filterParams:e,location:`floatingFilter`})}createDateComponent(){let{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:r}=this;this.dateComp=new wb(e,t,r.column.getColDef(),this.getDateComponentParams(),n,e=>{e.setInputAriaLabel(this.getAriaLabel(r))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},Vb={tag:`div`,cls:`ag-filter-filter`,children:[{tag:`ag-input-text-field`,ref:`eDateInput`,cls:`ag-date-filter`}]},Hb=class extends q{constructor(){super(Vb,[jf]),this.eDateInput=null,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&hn();let{minValidYear:r,maxValidYear:i,minValidDate:a,maxValidDate:o,buttons:s,includeTime:c,colDef:l}=e.filterParams||{},u=this.beans.dataTypeSvc,d=c??u?.getDateIncludesTimeFlag?.(l.cellDataType)??!1;if(n?d?(t.type=`datetime-local`,t.step=`1`):t.type=`date`:t.type=`text`,a&&r&&L(85),o&&i&&L(86),a&&o){let[e,t]=[a,o].map(e=>e instanceof Date?e:Ol(e));e&&t&&e.getTime()>t.getTime()&&L(87)}a?a instanceof Date?t.min=Tl(a):t.min=a:r&&(t.min=`${r}-01-01`),o?o instanceof Date?t.max=Tl(o):t.max=o:i&&(t.max=`${i}-12-31`),this.isApply=e.location===`floatingFilter`&&!!s?.includes(`apply`)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Ol(this.eDateInput.getValue())}setDate(e){let t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(Sl(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},Ub=[`equals`,`notEqual`,`greaterThan`,`greaterThanOrEqual`,`lessThan`,`lessThanOrEqual`,`inRange`,`blank`,`notBlank`];function Wb(e){let{allowedCharPattern:t}=e??{};return t??null}function Gb(e){return e==null||isNaN(e)?null:e}function Kb(e,t){let{filter:n,filterTo:r,type:i}=e||{};return[Gb(n),Gb(r)].slice(0,Sb(i,t))}var qb=class extends Cb{constructor(){super(`numberFilter`,Kb,Ub),this.eValuesFrom=[],this.eValuesTo=[],this.filterType=`number`,this.defaultDebounceMs=500}setElementValue(e,t,n){let{numberFormatter:r}=this.params,i=!n&&r?r(t??null):t;super.setElementValue(e,i)}createEValue(){let e=Wb(this.params),t=F({tag:`div`,cls:`ag-filter-body`,role:`presentation`});return this.createFromToElement(t,this.eValuesFrom,`from`,e),this.createFromToElement(t,this.eValuesTo,`to`,e),t}createFromToElement(e,t,n,r){let i=this.createManagedBean(r?new Af({allowedCharPattern:r}):new Nf);i.addCss(`ag-filter-${n}`),i.addCss(`ag-filter-filter`),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){let n=n=>this.removeComponents(n,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){let t=[];return this.forEachPositionInput(e,(e,n,r,i)=>{n<i&&t.push(Gb(this.stringToFloat(e.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e==`number`)return e;let t=bt(e);t!=null&&t.trim()===``&&(t=null);let n=this.params.numberParser;return n?n(t):t==null||t.trim()===`-`?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},r=this.getValues(e);return r.length>0&&(n.filter=r[0]),r.length>1&&(n.filterTo=r[1]),n}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},Jb=class extends Pb{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=Mb}conditionToString(e,t,n,r,i){let{filter:a,filterTo:o,type:s}=e,c=this.formatValue.bind(this);if(t){let e=this.conditionForToolPanel(s,n,()=>c(a),()=>c(o),r,i);if(e!=null)return e}return n?`${c(a)}-${c(o)}`:a==null?`${s}`:c(a)}},Yb=class extends jb{constructor(){super(Kb,Ub),this.filterType=`number`,this.FilterModelFormatterClass=Jb}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},Xb=class extends W{constructor(e){super(),this.params=e,this.eInput=null,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new Af(this.params?.config));let t=this.eInput.getGui();e.appendChild(t);let n=e=>this.onValueChanged(e);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){let{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function Zb(e){let t=e?.trim();return t===``?e:t}function Qb(e,t){let{filter:n,filterTo:r,type:i}=e||{};return[n||null,r||null].slice(0,Sb(i,t))}var $b={tag:`div`,ref:`eFloatingFilterInputContainer`,cls:`ag-floating-filter-input`,role:`presentation`},ex=class extends Rb{constructor(){super(...arguments),this.eFloatingFilterInputContainer=null,this.defaultDebounceMs=500}postConstruct(){this.setTemplate($b)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){let t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:r,readOnly:i}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=hl(e.filterParams),!i){let t=ml(e.filterParams,r),i=hr(this,this.syncUpWithParentFilter.bind(this),t);n.setValueChangedListener(i)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let{inputSvc:t}=this,n=t.getValue();Rn(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){let t=e.key===X.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;let{inputSvc:r,params:i,lastType:a}=this,o=r.getValue();if(i.filterParams.trimInput&&(o=Zb(o),r.setValue(o,!0)),n){let e=i,t=e.model,n=this.convertValue(o),r=n==null?null:{...t??{filterType:this.filterType,type:a??this.optionsFactory.defaultOption},filter:n};e.onModelChange(r,{afterFloatingFilter:!0})}else i.parentFilterInstance(e=>{e?.onFloatingFilterChanged(a||null,o||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},tx=class extends W{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new Nf),this.eTextInput=this.createManagedBean(new Af),this.eTextInput.setDisabled(!0);let t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,e=>this.onValueChanged(e)),this.setupListeners(n,e=>this.onValueChanged(e))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},nx=class extends ex{constructor(){super(...arguments),this.FilterModelFormatterClass=Jb,this.filterType=`number`,this.defaultOptions=Ub}updateParams(e){Wb(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=Wb(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Xb({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new tx)}convertValue(e){return e?Number(e):null}},rx=[`contains`,`notContains`,`equals`,`notEqual`,`startsWith`,`endsWith`,`blank`,`notBlank`],ix=class extends Cb{constructor(){super(`textFilter`,Qb,rx),this.filterType=`text`,this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(n.filter=r[0]),r.length>1&&(n.filterTo=r[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(e,r,i,a)=>{if(r<a){let r=bt(e.getValue());t&&this.params.trimInput&&(r=Zb(r)??null,e.setValue(r,!0)),n.push(r)}}),n}createEValue(){let e=F({tag:`div`,cls:`ag-filter-body`,role:`presentation`}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,`from`),this.createFromToElement(e,n,`to`),e}createFromToElement(e,t,n){let r=this.createManagedBean(new Af);r.addCss(`ag-filter-${n}`),r.addCss(`ag-filter-filter`),t.push(r),e.appendChild(r.getGui())}removeEValues(e,t){let n=n=>this.removeComponents(n,e,t),{eValuesFrom:r,eValuesTo:i}=this;n(r),n(i)}},ax=class extends Pb{constructor(){super(...arguments),this.filterTypeKeys=Nb}conditionToString(e,t,n,r,i){let{filter:a,filterTo:o,type:s}=e;if(t){let e=e=>()=>pl(this,`filterSummaryTextQuote`,[e]),t=this.conditionForToolPanel(s,n,e(a),e(o),r,i);if(t!=null)return t}return n?`${a}-${o}`:a==null?`${s}`:`${a}`}},ox=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case`contains`:return t.indexOf(n)>=0;case`notContains`:return t.indexOf(n)<0;case`equals`:return t===n;case`notEqual`:return t!=n;case`startsWith`:return t.indexOf(n)===0;case`endsWith`:{let e=t.lastIndexOf(n);return e>=0&&e===t.length-n.length}default:return!1}},sx=e=>e,cx=e=>e==null?null:e.toString().toLowerCase(),lx=class extends Ab{constructor(){super(Qb,rx),this.filterType=`text`,this.FilterModelFormatterClass=ax}updateParams(e){super.updateParams(e);let t=e.filterParams;this.matcher=t.textMatcher??ox,this.formatter=t.textFormatter??(t.caseSensitive?sx:cx)}evaluateNullValue(e){return e?[`notEqual`,`notContains`,`blank`].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,r){let i=e.map(e=>this.formatter(e))||[],a=this.formatter(t),{api:o,colDef:s,column:c,context:l,filterParams:{textFormatter:u}}=this.params;if(n.type===`blank`)return vb(t);if(n.type===`notBlank`)return!vb(t);let d={api:o,colDef:s,column:c,context:l,node:r.node,data:r.data,filterOption:n.type,value:a,textFormatter:u};return i.some(e=>this.matcher({...d,filterText:e}))}},ux=class extends ex{constructor(){super(...arguments),this.FilterModelFormatterClass=ax,this.filterType=`text`,this.defaultOptions=rx}createFloatingFilterInputService(){return this.createManagedBean(new Xb)}},dx={moduleName:`ColumnFilter`,version:I,beans:[ub,mb],dynamicBeans:{headerFilterCellCtrl:Wy},icons:{filter:`filter`,filterActive:`filter`},apiFunctions:{isColumnFilterPresent:Qy,getColumnFilterInstance:$y,destroyFilter:eb,setFilterModel:tb,getFilterModel:nb,getColumnFilterModel:rb,setColumnFilterModel:ib,showColumnFilter:ab,hideColumnFilter:ob,getColumnFilterHandler:sb,doFilterAction:cb},dependsOn:[{moduleName:`FilterCore`,version:I,beans:[pb],apiFunctions:{isAnyFilterPresent:db,onFilterChanged:fb},css:[Zy],dependsOn:[{moduleName:`ClientSideRowModelFilter`,version:I,rowModels:[`clientSide`],beans:[Uy]}]},Xy,{moduleName:`FilterValue`,version:I,beans:[hb]},qy]},fx={moduleName:`TextFilter`,version:I,dependsOn:[dx],userComponents:{agTextColumnFilter:{classImp:ix,params:{useForm:!0}},agTextColumnFloatingFilter:ux},dynamicBeans:{agTextColumnFilterHandler:lx}},px={moduleName:`NumberFilter`,version:I,dependsOn:[dx],userComponents:{agNumberColumnFilter:{classImp:qb,params:{useForm:!0}},agNumberColumnFloatingFilter:nx},dynamicBeans:{agNumberColumnFilterHandler:Yb}},mx={moduleName:`DateFilter`,version:I,dependsOn:[dx],userComponents:{agDateColumnFilter:{classImp:kb,params:{useForm:!0}},agDateInput:Hb,agDateColumnFloatingFilter:Bb},dynamicBeans:{agDateColumnFilterHandler:Lb}},hx=`.ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}`,gx=(e,t,n)=>{let{editModelSvc:r}=e,i=r?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,a=r?.getRowValidationModel().getRowValidation(t)?.errorMessages,o=i||a;return o&&o.length?o.join(n(`tooltipValidationErrorSeparator`,`. `)):void 0},_x={moduleName:`Tooltip`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`tooltipSvc`}setupHeaderTooltip(e,t,n,r){e&&t.destroyBean(e);let i=Ty(this.gos),{column:a,eGui:o}=t,s=a.getColDef();!r&&i&&!s.headerComponent&&(r=qn(()=>o.querySelector(`.ag-header-cell-text`)));let c={getColumn:()=>a,getColDef:()=>a.getColDef(),getGui:()=>o,getLocation:()=>`header`,getTooltipValue:()=>n??a.getColDef().headerTooltip,shouldDisplayTooltip:r},l=this.createTooltipFeature(c);return l&&(l=t.createBean(l),t.setRefreshFunction(`tooltip`,()=>l.refreshTooltip())),l}setupHeaderGroupTooltip(e,t,n,r){e&&t.destroyBean(e);let i=Ty(this.gos),{column:a,eGui:o}=t,s=a.getColGroupDef();!r&&i&&!s?.headerGroupComponent&&(r=qn(()=>o.querySelector(`.ag-header-group-text`)));let c={getColumn:()=>a,getGui:()=>o,getLocation:()=>`headerGroup`,getTooltipValue:()=>n??(s&&s.headerTooltip),shouldDisplayTooltip:r};s&&(c.getColDef=()=>s);let l=this.createTooltipFeature(c);return l&&t.createBean(l)}enableCellTooltipFeature(e,t,n){let{beans:r}=this,{gos:i,editSvc:a}=r,{column:o,rowNode:s}=e,c=`cell`,l=()=>{let t=!a?.isEditing(e)&&gx(r,e,this.getLocaleTextFunc());if(t)return c=`cellEditor`,t;c=`cell`;let n=o.getColDef(),l=s.data;if(n.tooltipField&&j(l))return Et(l,n.tooltipField,o.isTooltipFieldContainsDots());let u=n.tooltipValueGetter;return u?u(U(i,{location:`cell`,colDef:o.getColDef(),column:o,rowIndex:e.cellPosition.rowIndex,node:s,data:s.data,value:e.value,valueFormatted:e.valueFormatted})):null},u=Ty(i);n||=u&&!e.isCellRenderer()?()=>{let t=!!a?.isEditing(e);if(!t&&gx(r,e,this.getLocaleTextFunc()))return!0;if(!o.isTooltipEnabled())return!1;let n=qn(()=>{let t=e.eGui;return t.children.length===0?t:t.querySelector(`.ag-cell-value`)});return!t&&n()}:()=>!a?.isEditing(e);let d={getColumn:()=>o,getColDef:()=>o.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>s,getGui:()=>e.eGui,getLocation:()=>c,getTooltipValue:t==null?l:()=>t,getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:n};return this.createTooltipFeature(d,r)}setupFullWidthRowTooltip(e,t,n,r){let i={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>`fullWidthRow`,shouldDisplayTooltip:r},a=this.beans,o=a.context;e&&t.destroyBean(e,o);let s=this.createTooltipFeature(i,a);if(s)return t.createBean(s,o)}setupCellEditorTooltip(e,t){let{beans:n}=this,{context:r}=n,i=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!i)return;let a=this.createTooltipFeature({getGui:()=>i,getTooltipValue:()=>gx(n,e,this.getLocaleTextFunc()),getLocation:()=>`cellEditor`,shouldDisplayTooltip:()=>{let{editModelSvc:e}=n,t=e?.getRowValidationModel()?.getRowValidationMap(),r=e?.getCellValidationModel()?.getCellValidationMap(),i=!!t&&t.size>0,a=!!r&&r.size>0;return i||a}},n);if(a)return e.createBean(a,r)}initCol(e){let{colDef:t}=e;e.tooltipEnabled=j(t.tooltipField)||j(t.tooltipValueGetter)||j(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean(`tooltipFeature`,!1,e,t)}}],dynamicBeans:{tooltipFeature:Ey},userComponents:{agTooltipComponent:vy},dependsOn:[Xy],css:[hx]},vx=class{constructor(e){this.cellValueChanges=e}},yx=class extends vx{constructor(e,t,n,r){super(e),this.initialRange=t,this.finalRange=n,this.ranges=r}},bx=10,xx=class{constructor(e){this.actionStack=[],this.maxStackSize=e||bx,this.actionStack=Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Sx=class extends W{constructor(){super(...arguments),this.beanName=`undoRedo`,this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&bs(this.activeCellEdit,t),r=this.activeRowEdit!==null&&Ss(this.activeRowEdit,t);if(!(n||r||this.isPasting||this.isRangeInAction))return;let{rowPinned:i,rowIndex:a,column:o,oldValue:s,value:c}=e,l={rowPinned:i,rowIndex:a,columnId:o.getColId(),newValue:c,oldValue:s};this.cellValueChanges.push(l)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){let{gos:e,ctrlsSvc:t}=this.beans;if(!e.get(`undoRedoCellEditing`))return;let n=e.get(`undoRedoCellEditingLimit`);if(n<=0)return;this.undoStack=new xx(n),this.redoStack=new xx(n),this.addListeners();let r=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:r,newColumnsLoaded:r,columnGroupOpened:r,columnRowGroupChanged:r,columnMoved:r,columnPinned:r,columnVisible:r,rowDragEnd:r}),t.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){let{eventSvc:t,undoStack:n,redoStack:r}=this;t.dispatchEvent({type:`undoStarted`,source:e});let i=this.undoRedo(n,r,`initialRange`,`oldValue`,`undo`);t.dispatchEvent({type:`undoEnded`,source:e,operationPerformed:i})}redo(e){let{eventSvc:t,undoStack:n,redoStack:r}=this;t.dispatchEvent({type:`redoStarted`,source:e});let i=this.undoRedo(r,n,`finalRange`,`newValue`,`redo`);t.dispatchEvent({type:`redoEnded`,source:e,operationPerformed:i})}undoRedo(e,t,n,r,i){if(!e)return!1;let a=e.pop();return!a||!a.cellValueChanges?!1:(this.processAction(a,e=>e[r],i),a instanceof yx?this.processRange(a.ranges||[a[n]]):this.processCell(a.cellValueChanges),t.push(a),!0)}processAction(e,t,n){e.cellValueChanges.forEach(e=>{let{rowIndex:r,rowPinned:i,columnId:a}=e,o={rowIndex:r,rowPinned:i},s=Ts(this.beans,o);s.displayed&&s.setDataValue(a,t(e),n)})}processRange(e){let t,n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((r,i)=>{if(!r)return;let a=r.startRow,o=r.endRow;i===e.length-1&&(t={rowPinned:a.rowPinned,rowIndex:a.rowIndex,columnId:r.startColumn.getColId()},this.setLastFocusedCell(t));let s={rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:r.startColumn,columns:r.columns};n.addCellRange(s)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:r}=t,i={rowIndex:n,rowPinned:r},a=Ts(this.beans,i),o={rowPinned:t.rowPinned,rowIndex:a.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o)}setLastFocusedCell(e){let{rowIndex:t,columnId:n,rowPinned:r}=e,{colModel:i,focusSvc:a,rangeSvc:o}=this.beans,s=i.getCol(n);if(!s)return;let{scrollFeature:c}=this.gridBodyCtrl;c.ensureIndexVisible(t),c.ensureColumnVisible(s);let l={rowIndex:t,column:s,rowPinned:r};a.setFocusedCell({...l,forceBrowserFocus:!0}),o?.setRangeToCell(l)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new vx(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let e=new vx(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new vx(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new yx(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e,{rangeSvc:t,gos:n}=this.beans;e=t&&hi(n)?new yx(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new vx(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange(`batchEditing`),batchEditingStopped:({changes:e})=>this.stopBigChange(`batchEditing`,e),bulkEditingStarted:()=>this.startBigChange(`bulkEditing`),bulkEditingStopped:({changes:e})=>this.stopBigChange(`bulkEditing`,e)})}startBigChange(e){this[e]=!0}stopBigChange(e,t){if(!this[e]||(this[e]=!1,t?.length===0))return;let n=new vx(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},Cx=`.ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}`,wx={tag:`div`,cls:`ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit`,children:[{tag:`ag-checkbox`,ref:`eEditor`,role:`presentation`}]},Tx=class extends Md{constructor(){super(wx,[Yd]),this.eEditor=null}initialiseEditor(e){let t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute(`tabindex`,`-1`),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.getLocaleTextFunc(),n=sn(t,e),r=t(`ariaToggleCellValue`,`Press SPACE to toggle cell value`);this.eEditor.setInputAriaLabel(`${r} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},Ex=class extends Md{constructor(e){super(),this.cellEditorInput=e,this.eEditor=null}initialiseEditor(e){let{cellEditorInput:t}=this;this.setTemplate({tag:`div`,cls:`ag-cell-edit-wrapper`,children:[t.getTemplate()]},t.getAgComponents());let{eEditor:n}=this,{cellStartedEdit:r,eventKey:i,suppressPreventDefault:a}=e;n.getInputElement().setAttribute(`title`,``),t.init(n,e);let o,s=!0;r?(this.focusAfterAttached=!0,i===X.BACKSPACE||i===X.DELETE?o=``:i&&i.length===1?a?s=!1:o=i:(o=t.getStartValue(),i!==X.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=t.getStartValue()),s&&o!=null&&n.setStartValue(o),this.addGuiEventListener(`keydown`,e=>{let{key:t}=e;(t===X.PAGE_UP||t===X.PAGE_DOWN)&&e.preventDefault()})}afterGuiAttached(){let e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e(`ariaInputEditor`,`Input Editor`)),!this.focusAfterAttached)return;hn()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},Dx={tag:`ag-input-date-field`,ref:`eEditor`,cls:`ag-cell-editor`},Ox=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Dx}getAgComponents(){return[Ff]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:r,step:i,colDef:a}=t;n!=null&&e.setMin(n),r!=null&&e.setMax(r),i!=null&&e.setStep(i),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(a.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let e=this.eEditor.getInputElement().valueAsDate,{params:t}=this,{min:n,max:r,getValidationErrors:i}=t,a=[],o=this.getLocaleTextFunc();if(e instanceof Date&&!isNaN(e.getTime())){if(n){let t=n instanceof Date?n:new Date(n);if(e<t){let e=t.toLocaleDateString();a.push(o(`minDateValidation`,`Date must be after ${e}`,[e]))}}if(r){let t=r instanceof Date?r:new Date(r);if(e>t){let e=t.toLocaleDateString();a.push(o(`maxDateValidation`,`Date must be before ${e}`,[e]))}}}return a.length||(a=null),i?i({value:e,cellEditorParams:t,internalErrors:a}):a}getValue(){let{eEditor:e,params:t}=this,n=e.getDate();return!j(n)&&!j(t.value)?t.value:n??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Sl(e,this.includeTime??!1)}},kx=class extends Ex{constructor(){super(new Ox(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Ax={tag:`ag-input-date-field`,ref:`eEditor`,cls:`ag-cell-editor`},jx=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Ax}getAgComponents(){return[Ff]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:r,step:i,colDef:a}=t;n!=null&&e.setMin(n),r!=null&&e.setMax(r),i!=null&&e.setStep(i),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(a.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let{eEditor:e,params:t}=this,n=e.getInputElement().value,r=this.formatDate(this.parseDate(n??void 0)),{min:i,max:a,getValidationErrors:o}=t,s=[];if(r){let e=new Date(r),t=this.getLocaleTextFunc();if(i){let n=new Date(i);if(e<n){let e=n.toLocaleDateString();s.push(t(`minDateValidation`,`Date must be after ${e}`,[e]))}}if(a){let n=new Date(a);if(e>n){let e=n.toLocaleDateString();s.push(t(`maxDateValidation`,`Date must be before ${e}`,[e]))}}}return s.length||(s=null),o?o({value:this.getValue(),cellEditorParams:t,internalErrors:s}):s}getValue(){let{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!j(n)&&!j(e.value)?e.value:e.parseValue(n??``)}getStartValue(){return Sl(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Ol(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Sl(e??null,this.includeTime??!1)??void 0}},Mx=class extends Ex{constructor(){super(new jx(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Nx={tag:`div`,cls:`ag-large-text`,children:[{tag:`ag-input-text-area`,ref:`eEditor`,cls:`ag-large-text-input`}]},Px=class extends Md{constructor(){super(Nx,[Mf]),this.eEditor=null}initialiseEditor(e){let{eEditor:t}=this,{cellStartedEdit:n,eventKey:r,value:i,maxLength:a,cols:o,rows:s}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute(`title`,``),t.setMaxLength(a||200).setCols(o||60).setRows(s||10);let c;n?(this.focusAfterAttached=!0,r===X.BACKSPACE||r===X.DELETE?c=``:r&&r.length===1?c=r:(c=i.toString(),r!==X.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,c=i.toString()),c!=null&&t.setValue(c,!0),this.addGuiEventListener(`keydown`,this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===X.LEFT||t===X.UP||t===X.RIGHT||t===X.DOWN||e.shiftKey&&t===X.ENTER)&&e.stopPropagation()}afterGuiAttached(){let{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,r=this.getLocaleTextFunc();e.setInputAriaLabel(r(`ariaInputEditor`,`Input Editor`)),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){let{eEditor:e,params:t}=this,{value:n}=t,r=e.getValue();return!j(r)&&!j(n)?n:t.parseValue(r)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,r=this.getLocaleTextFunc(),i=this.getValue(),a=[];return typeof i==`string`&&t!=null&&i.length>t&&a.push(r(`maxLengthValidation`,`Must be ${t} characters or fewer.`,[String(t)])),a.length||(a=null),n?n({value:i,internalErrors:a,cellEditorParams:e}):a}},Fx={tag:`ag-input-number-field`,ref:`eEditor`,cls:`ag-cell-editor`},Ix=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Fx}getAgComponents(){return[Pf]}init(e,t){this.eEditor=e,this.params=t;let{max:n,min:r,precision:i,step:a}=t;n!=null&&e.setMax(n),r!=null&&e.setMin(r),i!=null&&e.setPrecision(i),a!=null&&e.setStep(a);let o=e.getInputElement();t.preventStepping?e.addManagedElementListeners(o,{keydown:this.preventStepping}):t.showStepperButtons&&o.classList.add(`ag-number-field-input-stepper`)}getValidationErrors(){let{params:e}=this,{min:t,max:n,getValidationErrors:r}=e,i=this.eEditor.getInputElement().valueAsNumber,a=this.getLocaleTextFunc(),o=[];return typeof i==`number`&&(t!=null&&i<t&&o.push(a(`minValueValidation`,`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&i>n&&o.push(a(`maxValueValidation`,`Must be less than or equal to ${n}.`,[String(n)]))),o.length||(o=null),r?r({value:i,cellEditorParams:e,internalErrors:o}):o}preventStepping(e){(e.key===X.UP||e.key===X.DOWN)&&e.preventDefault()}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();if(!j(n)&&!j(t.value))return t.value;let r=t.parseValue(n);if(r==null)return r;if(typeof r==`string`){if(r===``)return null;r=Number(r)}return isNaN(r)?null:r}getStartValue(){return this.params.value}setCaret(){hn()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},Lx=class extends Ex{constructor(){super(new Ix(()=>this.getLocaleTextFunc()))}},Rx={tag:`ag-input-text-field`,ref:`eEditor`,cls:`ag-cell-editor`},zx=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Rx}getAgComponents(){return[jf]}init(e,t){this.eEditor=e,this.params=t;let n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,r=this.getValue(),i=this.getLocaleTextFunc(),a=[];return t!=null&&typeof r==`string`&&r.length>t&&a.push(i(`maxLengthValidation`,`Must be ${t} characters or fewer.`,[String(t)])),a.length||(a=null),n?n({value:r,cellEditorParams:e,internalErrors:a}):a}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();return!j(n)&&!j(t.value)?t.value:t.parseValue(n)}getStartValue(){let e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){let e=this.eEditor,t=e.getValue(),n=j(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},Bx=class extends Ex{constructor(){super(new zx(()=>this.getLocaleTextFunc()))}};function Vx(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function Hx(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function Ux(e,t,n=`auto`){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),`ensureVisible`)}function Wx(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),`ensureVisible`)}function Gx(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),`ensureVisible`)}function Kx(e){e.undoRedo?.undo(`api`)}function qx(e){e.undoRedo?.redo(`api`)}function Jx(e){let t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((e,t)=>{let{rowIndex:r,rowPinned:i}=t;e.forEach((e,t)=>{let{editorValue:a,pendingValue:o,sourceValue:s,state:c}=e,l=Bs(e),u=a??o;u===Is&&(u=void 0);let d={newValue:u,oldValue:s,state:c,column:t,colId:t.getColId(),colKey:t.getColId(),rowIndex:r,rowPinned:i};(c===`editing`||c===`changed`&&l)&&n.push(d)})}),n}function Yx(e,t=!1){let{editSvc:n}=e;n?.isBatchEditing()?(t?e.editModelSvc?.getEditPositions().forEach(e=>{e.state===`editing`&&n.revertSingleCellEdit(e)}):qs(e,!0),Xs(e)):n?.stopEditing(void 0,{cancel:t,source:`api`})}function Xx(e,t){let n=Y(e,t);return e.editSvc?.isEditing(n)??!1}function Zx(e,t){let{key:n,colKey:r,rowIndex:i,rowPinned:a}=t,{editSvc:o,colModel:s}=e,c=s.getCol(r);if(!c){L(12,{colKey:r});return}let l=Ts(e,{rowIndex:i,rowPinned:a||null,column:c});if(!l){L(290,{rowIndex:i,rowPinned:a});return}c.isCellEditable(l)&&(a??Wx(e,i),Ux(e,r),o?.startEditing({rowNode:l,column:c},{event:n?new KeyboardEvent(`keydown`,{key:n}):void 0,source:`api`}))}function Qx(e){return e.editSvc?.validateEdit()||null}function $x(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function eS(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var tS={tag:`div`,cls:`ag-popup-editor`,attrs:{tabindex:`-1`}},nS=class extends jd{constructor(e){super(tS),this.params=e}postConstruct(){Jr(this.gos,this.getGui(),`popupEditorWrapper`,!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{uu(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},rS=(e,t=!1)=>{if(e!==void 0)return Bs(e)||t&&e.state===`editing`};function iS(e,t,n=!1){return rS(e.editModelSvc?.getEdit(t),n)}function aS(e,t){let{editModelSvc:n}=e,{column:r,rowNode:i}=t;if(e.gos.get(`groupTotalRow`)&&!i?.footer)return!1;for(let e of i?.allLeafChildren??[])if(rS(n?.getEdit({rowNode:e,column:r}))||rS(n?.getEdit({rowNode:e.pinnedSibling,column:r})))return!0}function oS(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,t)return rS(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var sS=class extends W{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){let{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){let t=iS(n,e)||aS(n,e)||oS(n,e);this.applyBatchingStyle(t)}else this.applyBatchingStyle(!1);let r=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss(`ag-cell-editing-error`,r)}applyBatchingStyle(e){this.cellComp.toggleCss(`ag-cell-editing`,e??!1),this.cellComp.toggleCss(`ag-cell-batch-edit`,(e&&this.editSvc?.isBatchEditing())??!1)}},cS=class extends W{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){let{rowCtrl:e,editModelSvc:t,beans:n}=this,r=e.rowNode,i=t?.getEditRow(r),a=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:r});if(!i&&r.pinnedSibling&&(r=r.pinnedSibling,i=t?.getEditRow(r)),i){let e=Array.from(i.keys()).some(e=>{let t={rowNode:r,column:e};return iS(n,t,!0)||aS(n,t)||oS(n,t)});this.applyStyle(a,e);return}this.applyStyle(a)}applyStyle(e=!1,t=!1){let n=this.editSvc?.isBatchEditing()??!1,r=this.gos.get(`editType`)===`fullRow`;this.rowCtrl?.forEachGui(void 0,({rowComp:i})=>{i.toggleCss(`ag-row-editing`,r&&t),i.toggleCss(`ag-row-batch-edit`,r&&t&&n),i.toggleCss(`ag-row-inline-editing`,t),i.toggleCss(`ag-row-not-inline-editing`,!t),i.toggleCss(`ag-row-editing-invalid`,r&&t&&e)})}},lS=({rowModel:e,pinnedRowModel:t,editModelSvc:n},r)=>{let i=new Set;return e.forEachNode(e=>r.has(e)&&i.add(e)),t?.forEachPinnedRow(`top`,e=>r.has(e)&&i.add(e)),t?.forEachPinnedRow(`bottom`,e=>r.has(e)&&i.add(e)),r.forEach(e=>{i.has(e)||n.removeEdits({rowNode:e})}),i},uS=({editModelSvc:e},t,n)=>{t.forEach(t=>e?.getEditRow(t)?.forEach((r,i)=>!n.has(i)&&e.removeEdits({rowNode:t,column:i})))},dS=e=>()=>{let t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0);uS(e,lS(e,new Set(n.keys())),t)},fS=new Set([`undo`,`redo`]),pS={paste:`ui`,rangeSvc:`ui`,fillHandle:`api`,cellClear:`api`},mS=new Set(Object.keys(pS)),hS=new Set([`paste`,`rangeSvc`,`renderer`,`cellClear`,`redo`,`undo`]),gS={cancel:!0,source:`api`},_S={cancel:!1,source:`api`},vS={checkSiblings:!0},yS={force:!0,suppressFlash:!0},bS=class extends W{constructor(){super(...arguments),this.beanName=`editSvc`,this.batch=!1}postConstruct(){let{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener(`editType`,({currentValue:e})=>{this.stopEditing(void 0,gS),this.createStrategy(e)});let t=dS(e),n=()=>{let t=this.model.getCellValidationModel().getCellValidationMap().size>0,n=this.model.getRowValidationModel().getRowValidationMap().size>0;return t||n?this.stopEditing(void 0,gS):this.isEditing()&&(this.isBatchEditing()?Xs(e,this.model.getEditPositions()):this.stopEditing(void 0,_S)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowGroupOpened:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,gS)):(this.stopEditing(void 0,gS),this.batch=!1)}createStrategy(e){let{beans:t,gos:n,strategy:r}=this,i=e??n.get(`editType`)??`singleCell`;if(r){if(r.beanName===i)return r;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(i,!0))}destroyStrategy(){this.strategy&&=(this.strategy.destroy(),this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,r=`ui`){return this.strategy??=this.createStrategy(),this.strategy?.shouldStart(e,t,n,r)??null}shouldStopEditing(e,t,n=`ui`){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n=`ui`){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return ec(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??vS)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){let{startedEdit:n=!0,event:r=null,source:i=`ui`,ignoreEventKey:a=!1}=t;if(this.strategy??=this.createStrategy(),!this.isCellEditable(e,`api`))return;let o=Y(this.beans,e);if(o&&!o.comp){o.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}let s=this.shouldStartEditing?.(e,r,n,i);if(s===!1&&i!==`api`){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,i)&&this.stopEditing(void 0,{source:i}),s&&this.isBatchEditing()&&this.dispatchBatchEvent(`batchEditingStarted`,new Map),this.strategy.start(e,r,i,a)}stopEditing(e,t){let{event:n,cancel:r,source:i=`ui`,suppressNavigateAfterEdit:a}=t||{},{beans:o,model:s}=this;if(mS.has(i))return this.isBatchEditing()?(this.bulkRefresh(e),!1):this.stopEditing(e,{...t,source:pS[i]});if(!(this.isEditing(e)||this.isBatchEditing()&&s.hasEdits(e,vS))||!this.strategy)return!1;let c=Y(o,e);c&&(c.onEditorAttachedFuncs=[]);let l=s.getEditMap(!0),u=!1,d=!r&&!!this.shouldStopEditing(e,n,i),f=r&&!!this.shouldCancelEditing(e,n,i);if(d||f){qs(o,!0);let e=s.getEditMap();this.processEdits(e,r),this.strategy?.stop(r,n),this.bulkRefresh(void 0,l),l=e,u||=d}else if(n instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){let t=n.key,r=t===X.ENTER,i=t===X.ESCAPE,a=t===X.TAB;(r||a||i)&&(r||a?qs(o,!0):i&&this.revertSingleCellEdit(c),this.isBatchEditing()?this.strategy?.cleanupEditors():Xs(o,s.getEditPositions(),{event:n}),n.preventDefault(),this.bulkRefresh(e,l,{suppressFlash:!0}),l=s.getEditMap())}else qs(o,!0),l=s.getEditMap();return u&&e&&this.model.removeEdits(e),!a&&c&&this.navigateAfterEdit(n instanceof KeyboardEvent&&n.shiftKey,c.cellPosition),Ws(o),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),f&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(l.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),u&&d&&this.dispatchBatchEvent(`batchEditingStopped`,l)),u}navigateAfterEdit(e,t){if(this.gos.get(`enterNavigatesVerticallyAfterEdit`)){let n=e?X.UP:X.DOWN;this.beans.navigation?.navigateToNextCell(null,n,t,!1)}}processEdits(e,t=!1){let n=Array.from(e.keys()),{beans:r}=this,i=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,a=[];for(let o of n){let n=e.get(o);for(let e of n.keys()){let s=n.get(e),c={rowNode:o,column:e},l=Y(r,c),u=Bs(s),d=l?.comp?.getCellEditor()?.isCancelAfterEnd?.();!t&&!d&&u&&!i&&(this.setNodeDataValue(o,e,s.pendingValue)||a.push(c)),l?.refreshCell(yS)}}a.forEach(e=>{this.model.clearEditValue(e)})}setNodeDataValue(e,t,n,r){let{beans:i}=this,a=Y(i,{rowNode:e,column:t});a&&(a.suppressRefreshCell=!0);let o=e.setDataValue(t,n,`commit`);return a&&(a.suppressRefreshCell=!1),r&&a?.refreshCell(yS),o}setEditMap(e,t){this.strategy??=this.createStrategy(),this.strategy?.setEditMap(e,t),this.bulkRefresh(),this.beans.rowRenderer.refreshCells(yS)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;let{pendingValue:r,sourceValue:i}=n,{rowIndex:a,rowPinned:o,data:s}=e;this.beans.eventSvc.dispatchEvent({type:`cellEditValuesChanged`,node:e,rowIndex:a,rowPinned:o,column:t,source:`api`,data:s,newValue:r,oldValue:i,value:r,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){let{beans:r,gos:i}=this,{editModelSvc:a,rowModel:o}=r;z(i,o)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&a?.getEditMap(!1)?.forEach((e,t)=>{for(let r of e.keys())this.refCell({rowNode:t,column:r},e.get(r),n)}))}refCell({rowNode:e,column:t},n,r={}){let{beans:i,gos:a}=this,o=new Set([e]),s=new Set,c=e.pinnedSibling;c&&o.add(c);let l=e.sibling;l&&s.add(l);let u=e.parent;for(;u;)u.sibling?.footer&&a.get(`groupTotalRow`)||!u.parent&&u.sibling&&a.get(`grandTotalRow`)?s.add(u.sibling):s.add(u),u=u.parent;o.forEach(e=>this.dispatchEditValuesChanged({rowNode:e,column:t},n)),o.forEach(e=>Y(i,{rowNode:e,column:t})?.refreshCell(r)),s.forEach(e=>Y(i,{rowNode:e,column:t})?.refreshCell(r))}stopAllEditing(e=!1,t=`ui`){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t=`ui`){let{rowNode:n}=e;if(n.group){if(this.gos.get(`treeData`)){if(!n.data&&!this.gos.get(`enableGroupEdit`))return!1}else if(!this.gos.get(`enableGroupEdit`))return!1}return this.strategy??=this.createStrategy(),this.strategy?.isCellEditable(e,t)??!1}cellEditingInvalidCommitBlocks(){return this.gos.get(`invalidEditValueMode`)===`block`}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){let r=Y(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(!r?.hasBrowserFocus()&&r?.focusCell(),r?.comp?.getCellEditor()?.focusIn?.()),`block-stop`):(r&&this.revertSingleCellEdit(r),`revert-continue`)}return`continue`}revertSingleCellEdit(e,t=!1){let n=Y(this.beans,e);n?.comp?.getCellEditor()&&(Xs(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),Vs(this.beans,e,{silent:!0}),Qs(this.beans),n?.refreshCell(yS),n.rowCtrl.rowEditStyleFeature?.applyRowStyles(),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){Qs(this.beans);let t=Y(this.beans,e);t&&(t.refreshCell(yS),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode}),e.column&&(n||=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column}))):(n||=this.model.getCellValidationModel().getCellValidationMap().size>0,n||=this.model.getRowValidationModel().getRowValidationMap().size>0),n}moveToNextCell(e,t,n,r=`ui`){let i,a=this.isEditing(),o=a&&this.checkNavWithValidation(void 0,n)===`block-stop`;return e instanceof Vc&&a&&(i=this.strategy?.moveToNextEditingCell(e,t,n,r,o)),i===null?i:(i||=!!this.beans.focusSvc.focusedHeader,i===!1&&!o&&this.stopEditing(),i)}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let r=this.model.getEdit({rowNode:e,column:t}),i=e.pinnedSibling;if(i){let e=this.model.getEdit({rowNode:i,column:t});e&&(r=e)}let a=n?r?.editorValue??r?.pendingValue:r?.pendingValue;return a===Is||!r?this.valueSvc.getValue(t,e,!0,`api`):a}getRowDataValue(e,t){return this.model.getEditRowDataValue(e,t)}addStopEditingWhenGridLosesFocus(e){Ps(this,this.beans,e)}createPopupEditorWrapper(e){return new nS(e)}setDataValue(e,t,n){if((!this.isEditing()||n===`commit`)&&!hS.has(n))return;let{beans:r}=this;this.strategy??=this.createStrategy();let i=this.isBatchEditing()?`ui`:`api`;if(!n||fS.has(n))return Js(r,e,!0,t,n),this.setNodeDataValue(e.rowNode,e.column,t,!0);let a=this.model.getEdit(e);if(a){if(a.pendingValue===t)return!1;if(a.sourceValue!==t)return Js(r,e,!0,t,n),this.stopEditing(e,{source:i,suppressNavigateAfterEdit:!0}),!0;if(a.sourceValue===t)return r.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...a,pendingValue:t}),!0}return Js(r,e,!0,t,n),this.stopEditing(e,{source:i,suppressNavigateAfterEdit:!0}),!0}handleColDefChanged(e){Gs(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,vS))return;let{rowNode:n,column:r}=e,{compDetails:i,valueToDisplay:a}=t;if(i){let{params:e}=i;return e.data=this.model.getEditRowDataValue(n,vS),{compDetails:i}}let o=this.model.getEditRow(e.rowNode,vS);if(a!==void 0&&o?.has(r))return{valueToDisplay:this.valueSvc.getValue(r,n)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,r){this.strategy?.dispatchCellEvent(e,t,n,r)}dispatchRowEvent(e,t){this.strategy?.dispatchRowEvent(e,t)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return U(this.gos,{type:e,...e===`batchEditingStopped`?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(e=>({rowIndex:e.rowNode.rowIndex,rowPinned:e.rowNode.rowPinned,columnId:e.column.getColId(),newValue:e.pendingValue,oldValue:e.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;let{beans:r,rangeSvc:i,valueSvc:a}=this;qs(r,!0);let o=this.model.getEditMap(!0),s=o.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:`bulkEditingStarted`}),n.forEach(e=>{if(i?.forEachRowInRange(e,t=>{let n=Ts(r,t);if(n===void 0)return;let i=o.get(n)??new Map;for(let t of e.columns)if(t&&this.isCellEditable({rowNode:n,column:t},`api`)){let e=a.getValue(t,n,!0,`api`),r=a.parseValue(t,n??null,s,e);Number.isNaN(r)&&(r=null),i.set(t,{editorValue:void 0,pendingValue:r,sourceValue:e,state:`changed`})}i.size>0&&o.set(n,i)}),this.setEditMap(o),this.batch){this.cleanupEditors(),Ws(r),this.bulkRefresh();return}this.stopEditing(void 0,{source:`api`}),this.eventSvc.dispatchEvent({type:`bulkEditingStopped`,changes:this.toEventChangeList(o)})}),this.bulkRefresh();let c=Y(r,{rowNode:e,column:t});c&&c.focusCell(!0)}createCellStyleFeature(e,t){return new sS(e,t)}createRowStyleFeature(e,t){return new cS(e,t)}setEditingCells(e,t){let{beans:n}=this,{colModel:r,valueSvc:i}=n,a=new Map;e.forEach(({colId:e,column:t,colKey:o,rowIndex:s,rowPinned:c,newValue:l,state:u})=>{let d=e?r.getCol(e):o?r.getCol(o):t;if(!d)return;let f=Ts(n,{rowIndex:s,rowPinned:c});if(!f)return;let p=i.getValue(d,f,!0,`api`);if(!Bs({pendingValue:l,sourceValue:p})&&u!==`editing`)return;let m=a.get(f);m||(m=new Map,a.set(f,m)),l===void 0&&(l=Is),m.set(d,{editorValue:void 0,pendingValue:l,sourceValue:p,state:u??`changed`})}),this.setEditMap(a,t)}onCellFocused(e){let t=Y(this.beans,e);if(!t||!this.isEditing(t,vS))return;let n=this.model.getEdit(t);if(!n||!Bs(n))return;let r=this.getLocaleTextFunc()(`ariaPendingChange`,`Pending Change`);this.beans.ariaAnnounce?.announceValue(r,`pendingChange`)}allowedFocusTargetOnValidation(e){return Y(this.beans,e)}},xS=class extends W{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t,n=e.previousParams,{editSvc:r,beans:i}=this,a=e.type===`cellFocused`?e.sourceEvent:null;n&&(t=Y(i,n));let{gos:o,editModelSvc:s}=i,c=e.type===`cellFocusCleared`;if(r.isEditing(void 0,{withOpenEditor:!0})){let{column:t,rowIndex:l,rowPinned:u}=e,d={column:t,rowNode:Ts(i,{rowIndex:l,rowPinned:u})},f=o.get(`invalidEditValueMode`)===`block`;if(f)return;let p=!f,m=!!s?.getCellValidationModel().hasCellValidation(d),h=p&&m;!(n||c)||r.stopEditing(void 0,{cancel:h,source:c&&p?`api`:void 0,event:a})||(r.isBatchEditing()?r.cleanupEditors():r.stopEditing(void 0,{source:`api`}))}t?.refreshCell({suppressFlash:!0,force:!0})}isCellEditable({rowNode:e,column:t},n=`ui`){return t.isColumnFunc(e,t.getColDef().editable)}stop(e,t){let n=this.model.getEditPositions(),r={all:[],pass:[],fail:[]};if(n.forEach(e=>{if(r.all.push(e),(this.model.getCellValidationModel().getCellValidation(e)?.errorMessages?.length??0)>0){r.fail.push(e);return}r.pass.push(e)}),e)return n.forEach(e=>{Zs(this.beans,e),this.model.stop(e)}),!0;let i=this.processValidationResults(r);return i.destroy.length>0&&i.destroy.forEach(e=>{Zs(this.beans,e,{event:t}),this.model.stop(e)}),i.keep.length>0&&i.keep.forEach(e=>{let t=Y(this.beans,e);this.editSvc?.cellEditingInvalidCommitBlocks()||t&&this.editSvc.revertSingleCellEdit(t)}),!0}cleanupEditors({rowNode:e}={},t){qs(this.beans,!1);let n=this.model.getEditPositions(),r=[];e?n.forEach(t=>{!e||t.rowNode===e||r.push(t)}):n.forEach(e=>{r.push(e)}),Xs(this.beans,r),Ws(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){let t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{let n=this.beans.gos.get(`editType`)===`fullRow`;e.focusCell(n),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e=this.model.getEditPositions(),t,n,r,i=!1){let a=r instanceof KeyboardEvent&&!i&&r.key||void 0;zs(this.beans,e,t,a,r,n)}dispatchCellEvent(e,t,n,r){let i=Y(this.beans,e);i&&this.eventSvc.dispatchEvent({...i.createEvent(t??null,n),...r})}dispatchRowEvent(e,t){let n=Ms(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStart({column:e},t,n,r=`ui`){if(t instanceof KeyboardEvent&&(t.key===X.TAB||t.key===X.ENTER||t.key===X.F2||t.key===X.BACKSPACE&&n))return!0;if(t?.shiftKey&&this.beans.rangeSvc?.getCellRanges().length!=0)return!1;let i=e?.getColDef(),a=this.deriveClickCount(i),o=t?.type;return o===`click`&&t?.detail===1&&a===1||o===`dblclick`&&t?.detail===2&&a===2?!0:r===`api`?n??!1:!1}shouldStop(e,t,n=`ui`){let r=this.editSvc.isBatchEditing();return r&&n===`api`?!0:r&&n===`ui`?!1:n===`api`?!0:t instanceof KeyboardEvent&&!r?t.key===X.ENTER:null}shouldCancel(e,t,n=`ui`){let r=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!r&&t.key===X.ESCAPE||r&&n===`api`||n===`api`)}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:`api`});let n=[];if(e.forEach((e,t)=>{e.forEach((e,r)=>{e.state===`editing`&&n.push({...e,rowNode:t,column:r})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){let e=n.at(-1),t=e.pendingValue===Is?void 0:e.pendingValue;this.start(e,new KeyboardEvent(`keydown`,{key:t}),`api`);let r=Y(this.beans,e);r&&this.setFocusInOnEditor(r)}}deriveClickCount(e){let{gos:t}=this.beans;return t.get(`suppressClickEdit`)===!0?0:t.get(`singleClickEdit`)===!0||e?.singleClickEdit?1:2}destroy(){this.cleanupEditors(),super.destroy()}},SS={moduleName:`EditCore`,version:I,beans:[_s,bS],apiFunctions:{getEditingCells:Jx,getCellEditorInstances:Rs,startEditingCell:Zx,stopEditing:Yx,isEditing:Xx,validateEdit:Qx},dynamicBeans:{singleCell:class extends xS{constructor(){super(...arguments),this.beanName=`singleCell`}shouldStop(e,t,n=`ui`){let r=super.shouldStop(e,t,n);if(r!==null)return r;let{rowNode:i,column:a}=e||{};return(!this.rowNode||!this.column)&&i&&a?null:this.rowNode!==i||this.column!==a}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e,t,n=`ui`,r){(this.rowNode!==e.rowNode||this.column!==e.column)&&super.cleanupEditors(),this.rowNode=e.rowNode,this.column=e.column,this.model.start(e),this.setupEditors([e],e,!0,t,r)}dispatchRowEvent(e,t){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){let{colModel:t,editSvc:n}=this.beans,{rowIndex:r,column:i,rowPinned:a}=e,o=Ts(this.beans,{rowIndex:r,rowPinned:a}),s=Fs(i),c=t.getCol(s),l=e.previousParams;if(l){let e=Fs(l.column);if(l?.rowIndex===r&&e===s&&l?.rowPinned===a)return}n?.isEditing({rowNode:o,column:c},{withOpenEditor:!0})&&e.type===`cellFocused`||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,r=`ui`,i=!1){let a=e.cellPosition,o,s=this.beans.gos.get(`editType`)===`fullRow`;s&&this.model.suspend(!0),i||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?`ui`:`api`,event:n}));try{o=this.beans.navigation?.findNextCellToFocusOn(a,{backwards:t,startEditing:!0})}finally{s&&this.model.suspend(!1)}if(o===!1)return null;if(o==null)return!1;let c=o.cellPosition,l=e.isCellEditable(),u=o.isCellEditable(),d=c&&a.rowIndex===c.rowIndex&&a.rowPinned===c.rowPinned;l&&!i&&this.setFocusOutOnEditor(e);let f=this.gos.get(`suppressStartEditOnTab`);return!d&&!i&&(super.cleanupEditors(o,!0),f?o.focusCell(!0,n):this.editSvc.startEditing(o,{startedEdit:!0,event:n,source:r,ignoreEventKey:!0})),u&&!i?(o.focusCell(!1,n),f?o.focusCell(!0,n):o.comp?.getCellEditor()||(Vs(this.beans,o,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(o))):(u&&i&&this.setFocusInOnEditor(o),o.focusCell(!0,n)),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},fullRow:class extends xS{constructor(){super(...arguments),this.beanName=`fullRow`,this.startedRows=[]}isCellEditable(e,t=`ui`){let n=super.isCellEditable(e,t);return n===!0||t===`ui`?n:this.beans.colModel.getCols().some(n=>super.isCellEditable({rowNode:e.rowNode,column:n},t))}shouldStop(e,t,n=`ui`){let{rowNode:r}=e||{};if(!Ms(this.beans,{rowNode:this.rowNode}))return!0;let i=super.shouldStop({rowNode:this.rowNode},t,n);return i===null?this.rowNode?r!==this.rowNode:!1:i}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e,t,n=`ui`,r){let{rowNode:i}=e;this.rowNode!==i&&super.cleanupEditors(e),this.dispatchRowEvent({rowNode:i},`rowEditingStarted`),this.startedRows.push(i);let a=this.beans.visibleCols.allCols,o=[];a.forEach(e=>{if(!e.isCellEditable(i))return;let t={rowNode:i,column:e};o.push(t),this.model.hasEdits(t)||this.model.start(t)}),this.rowNode=i,this.setupEditors(o,e,!0,t,r)}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){let{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;let r=[];return e||this.model.getEditMap().forEach((e,t)=>{if(!(!e||e.size===0)){for(let n of e.values())if(Bs(n)){r.push(t);break}}}),Qs(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:n})===`block-stop`?!1:(super.stop(e,t),r.forEach(e=>this.dispatchRowEvent({rowNode:e},`rowValueChanged`)),this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0)}onCellFocusChanged(e){let{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;let r=Y(this.beans,n);this.gos.get(`invalidEditValueMode`)===`block`&&r&&(this.model.getCellValidationModel().getCellValidation(r)||this.model.getRowValidationModel().getRowValidation(r))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t),this.startedRows.forEach(e=>this.dispatchRowEvent({rowNode:e},`rowEditingStopped`)),this.startedRows.length=0}moveToNextEditingCell(e,t,n,r=`ui`,i=!1){let a=e.cellPosition,o;this.model.suspend(!0);try{o=this.beans.navigation?.findNextCellToFocusOn(a,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(o===!1)return null;if(o==null)return!1;let s=o.cellPosition,c=e.isCellEditable(),l=o.isCellEditable(),u=s&&a.rowIndex===s.rowIndex&&a.rowPinned===s.rowPinned;c&&this.setFocusOutOnEditor(e),this.restoreEditors();let d=this.gos.get(`suppressStartEditOnTab`);return l&&!i?d?o.focusCell(!0,n):(o.comp?.getCellEditor()||Vs(this.beans,o,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(o),o.focusCell(!1,n)):(l&&i&&this.setFocusInOnEditor(o),o.focusCell(!0,n)),!u&&!i&&(this.cleanupEditors(o,!0),d?o.focusCell(!0,n):this.editSvc.startEditing(o,{startedEdit:!0,event:n,source:r,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:e},n)=>{if(e!==`editing`)return;let r=Y(this.beans,{rowNode:t,column:n});r&&!r.comp?.getCellEditor()&&Vs(this.beans,r,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}}},dependsOn:[Xy,_x],css:[Cx]},CS={moduleName:`UndoRedoEdit`,version:I,beans:[Sx],apiFunctions:{undoCellEditing:Kx,redoCellEditing:qx,getCurrentUndoSize:$x,getCurrentRedoSize:eS},dependsOn:[SS]},wS={moduleName:`TextEditor`,version:I,userComponents:{agCellEditor:Bx,agTextCellEditor:Bx},dependsOn:[SS]},TS={moduleName:`NumberEditor`,version:I,userComponents:{agNumberCellEditor:{classImp:Lx}},dependsOn:[SS]},ES={moduleName:`DateEditor`,version:I,userComponents:{agDateCellEditor:kx,agDateStringCellEditor:Mx},dependsOn:[SS]},DS={moduleName:`CheckboxEditor`,version:I,userComponents:{agCheckboxCellEditor:Tx},dependsOn:[SS]},OS={moduleName:`LargeTextEditor`,version:I,userComponents:{agLargeTextCellEditor:Px},dependsOn:[SS]},kS=class extends W{constructor(){super(...arguments),this.beanName=`selectionColSvc`}postConstruct(){this.addManagedPropertyListener(`rowSelection`,e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,wa(e.source))}),this.addManagedPropertyListener(`selectionColumnDef`,this.updateColumns.bind(this))}addColumns(e){let t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),Ca(e))}createColumns(e,t){let n=()=>{ga(this.beans,this.columns?.tree),this.columns=null},r=e.treeDepth,i=(this.columns?.treeDepth??-1)==r,a=this.generateSelectionCols();if(Sa(a,this.columns?.list??[])&&i)return;n();let{colGroupSvc:o}=this.beans,s=o?.findDepth(e.tree)??0;this.columns={list:a,tree:o?.balanceTreeForAutoCols(a,s)??[],treeDepth:s,map:{}},t(e=>{if(!e)return null;let t=e.filter(e=>!va(e));return[...a,...t]})}updateColumns(e){let t=wa(e.source);this.columns?.list.forEach(n=>{let r=this.createSelectionColDef(e.currentValue);n.setColDef(r,null,t),Ka(this.beans,{state:[{...r,colId:n.getColId()}]},t)})}getColumn(e){return this.columns?.list.find(t=>Ta(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:e,beans:t}=this,n=e.get(`rowSelection`);if(typeof n!=`object`||!Br(e))return!1;let r=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation===`autoGroupColumn`&&r)return!1;let i=!!ui(n),a=di(n);return i||a}createSelectionColDef(e){let{gos:t}=this.beans,n=e??t.get(`selectionColumnDef`),r=t.get(`enableRtl`),{rowSpan:i,spanRows:a,...o}=n??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:r?`right`:`left`,comparator(e,t,n,r){let i=n.isSelected();return i===r.isSelected()?0:i?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...o,colId:pa,chartDataType:`excluded`}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);let n=new na(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){let r=(t&&typeof t!=`string`?ui(t):void 0)!==(e&&typeof e!=`string`?ui(e):void 0),i=(t&&typeof t!=`string`?di(t):void 0)!==(e&&typeof e!=`string`?di(e):void 0),a=fi(e)!==fi(t);(r||i||a)&&this.beans.colModel.refreshAll(n)}destroy(){ga(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;let r=e.length+t.length+n.length;if(r===0)return;let i=this.columns.list[0];i.isVisible()&&(this.beans.rowNumbersSvc?.getColumn(`ag-Grid-RowNumbersColumn`)?2:1)===r&&(()=>{let r;switch(i.pinned){case`left`:case!0:r=e;break;case`right`:r=n;break;default:r=t}r&&ua(r,i)})()}};function AS(e,t){if(!t.nodes.every(e=>e.rowPinned&&!sc(e)?(L(59),!1):e.id===void 0?(L(60),!1):!0))return;let{nodes:n,source:r,newValue:i}=t;e.selectionSvc?.setNodesSelected({nodes:n,source:r??`api`,newValue:i})}function jS(e,t,n=`apiSelectAll`){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function MS(e,t,n=`apiSelectAll`){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function NS(e,t=`apiSelectAllFiltered`){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:`filtered`})}function PS(e,t=`apiSelectAllFiltered`){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:`filtered`})}function FS(e,t=`apiSelectAllCurrentPage`){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:`currentPage`})}function IS(e,t=`apiSelectAllCurrentPage`){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:`currentPage`})}function LS(e){return e.selectionSvc?.getSelectedNodes()??[]}function RS(e){return e.selectionSvc?.getSelectedRows()??[]}var zS=class extends Of{constructor(){super(...arguments),this.beanName=`selectionSvc`,this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:e}=this;this.mode=bi(e),this.groupSelectsDescendants=Ti(e),this.groupSelectsFiltered=Ci(e)===`filteredDescendants`,this.masterSelectsDetail=Ei(e)===`detail`,this.addManagedPropertyListeners([`groupSelectsChildren`,`groupSelectsFiltered`,`rowSelection`],()=>{let t=Ti(e),n=bi(e),r=Ci(e)===`filteredDescendants`;this.masterSelectsDetail=Ei(e)===`detail`,(t!==this.groupSelectsDescendants||r!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:`api`}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=r,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;let r=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);return r==null?0:(this.selectionCtx.selectAll=!1,`select`in r?(r.reset?this.resetNodes():this.selectRange(r.deselect,!1,n),this.selectRange(r.select,!0,n)):this.setNodesSelected({nodes:[r.node],newValue:r.newValue,clearSelection:r.clearSelection,keepDescendants:r.keepDescendants,event:e,source:n}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:r,event:i,source:a,keepDescendants:o=!1}){if(!Br(this.gos)&&e)return L(132),0;if(r.length===0)return 0;if(r.length>1&&!this.isMultiSelect())return L(130),0;let s=0;for(let t=0;t<r.length;t++){let n=r[t],o=BS(n),c=this.groupSelectsFiltered&&o.group;if(o.rowPinned&&!sc(o)){L(59);continue}if(o.id===void 0){L(60);continue}c||this.selectRowNode(o,e,i,a)&&(this.detailSelection.delete(o.id),s++),this.groupSelectsDescendants&&o.childrenAfterGroup?.length&&(s+=this.selectChildren(o,e,a))}return n||(r.length===1&&a===`api`&&this.selectionCtx.setRoot(BS(r[0])),e&&(t||!this.isMultiSelect())&&(s+=this.clearOtherNodes(BS(r[0]),o,a)),s>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),s}selectRange(e,t,n){let r=0;return e.forEach(e=>{let i=BS(e);i.group&&this.groupSelectsDescendants||this.selectRowNode(i,t,void 0,n)&&r++}),r>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),r}selectChildren(e,t,n){let r=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return r?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:r}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,r)=>{e(n)&&t.set(r,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;let{gos:n,rowModel:r}=this.beans;if(!z(n,r))return!1;let i=r.rootNode;if(!i)return!1;t||(t=new Ep(!0,i),t.active=!1);let a=!1;return t.forEachChangedNodeDepthFirst(t=>{if(t!==i){let n=this.calculateSelectedFromChildren(t);a=this.selectRowNode(t,n===null?!1:n,void 0,e)||a}}),a}clearOtherNodes(e,t,n){let r=new Map,i=0;return this.selectedNodes.forEach(a=>{let o=a.id==e.id;if((!t||!US(e,a))&&!o){let e=this.selectedNodes.get(a.id);i+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&a.parent&&r.set(a.parent.id,a.parent)}}),r.forEach(e=>{let t=this.calculateSelectedFromChildren(e);this.selectRowNode(e,t===null?!1:t,void 0,n)}),i}onRowSelected(e){let t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;let t=new $c(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:e,rowModel:t}=this.beans;if(!z(e,t))return;let n=t.getTopLevelNodes();if(n===null)return;let r=[];function i(e){for(let t=0,n=e.length;t<n;t++){let n=e[t];n.isSelected()?r.push(n):n.group&&n.childrenAfterGroup&&i(n.childrenAfterGroup)}}return i(n),r}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){let n=z(this.gos),r=!1,i=t=>{let n=this.selectRowNode(BS(t),!1,void 0,e);r||=n};if(t===`currentPage`||t===`filtered`){if(!n){R(102);return}this.getNodesToSelect(t).forEach(i)}else this.selectedNodes.forEach(i),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){let t=this.updateGroupsFromChildrenSelections(e);r||=t}r&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){let{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return HS(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(e=>e.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];let t=[],n=e=>t.push(e);if(e===`currentPage`)return this.forEachNodeOnPage(e=>{if(!e.group){n(e);return}if(!e.expanded&&!e.footer){let t=e=>{n(e),e.childrenAfterFilter?.forEach(t)};t(e);return}this.groupSelectsDescendants||n(e)}),t;let r=this.beans.rowModel;return e===`filtered`?(r.forEachNodeAfterFilter(n),t):(r.forEachNode(n),t)}forEachNodeOnPage(e){let{pageBounds:t,rowModel:n}=this.beans,r=t.getFirstRow(),i=t.getLastRow();for(let t=r;t<=i;t++){let r=n.getRow(t);r&&e(r)}}selectAllRowNodes(e){let{gos:t,selectionCtx:n}=this;if(!Br(t)){L(132);return}if(mi(t)&&!xi(t)){L(130);return}if(!this.canSelectAll())return;let{source:r,selectAll:i}=e,a=!1;if(this.getNodesToSelect(i).forEach(e=>{let t=this.selectRowNode(BS(e),!0,void 0,r);a||=t}),n.selectAll=!0,z(t)&&this.groupSelectsDescendants){let e=this.updateGroupsFromChildrenSelections(r);a||=e}a&&this.dispatchSelectionChanged(r)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||=[],!Array.isArray(e)){R(103);return}let r=new Set(e),i=[];this.beans.rowModel.forEachNode(e=>{r.has(e.id)&&i.push(e)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:i,source:t})}canSelectAll(){let{gos:e}=this.beans;return!!z(e)}updateSelectable(e){let{gos:t,rowModel:n}=this.beans;if(!Br(t))return;let r=`selectableChanged`,i=e!==void 0,a=z(t)&&this.groupSelectsDescendants,o=[],s=e=>{if(!(i&&!e.group)){if(a&&e.group){let t=e.childrenAfterGroup?.some(e=>e.selectable)??!1;this.setRowSelectable(e,t,!0);return}!this.updateRowSelectable(e,!0)&&e.isSelected()&&o.push(e)}};if(a){if(e===void 0){let t=n.rootNode;e=t?new Ep(!1,t):void 0}e?.forEachChangedNodeDepthFirst(s,!i,!i)}else n.forEachNode(s);o.length&&this.setNodesSelected({nodes:o,newValue:!1,source:r}),!i&&a&&this.updateGroupsFromChildrenSelections?.(r)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.(`rowGroupChanged`,e)&&this.dispatchSelectionChanged(`rowGroupChanged`)}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;let n=e.detailNode?.detailGridInfo?.api;if(!n)return;let r=VS(n);if(e.isSelected()!==r&&this.selectRowNode(e,r,t,`masterDetail`)&&this.dispatchSelectionChanged(`masterDetail`),!r){let t=this.detailSelection.get(e.id)??new Set;for(let e of n.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!xi(t)){L(269);return}switch(e.isSelected()){case!0:n.selectAll();break;case!1:n.deselectAll();break;case void 0:{let t=this.detailSelection.get(e.id);if(t){let e=[];for(let r of t){let t=n.getRowNode(r);t&&e.push(t)}n.setNodesSelected({nodes:e,newValue:!0,source:`masterDetail`})}break}default:break}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:`selectionChanged`,source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function BS(e){return sc(e)?e.pinnedSibling:e.footer?e.sibling:e}function VS(e){let t=0,n=0;return e.forEachNode(e=>{e.isSelected()?t++:e.selectable&&n++}),HS(t,n)}function HS(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function US(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}var WS={moduleName:`RowSelection`,version:I,rowModels:[`clientSide`,`infinite`,`viewport`],beans:[zS],dependsOn:[{moduleName:`SharedRowSelection`,version:I,beans:[kS],apiFunctions:{setNodesSelected:AS,selectAll:jS,deselectAll:MS,selectAllFiltered:NS,deselectAllFiltered:PS,selectAllOnCurrentPage:FS,deselectAllOnCurrentPage:IS,getSelectedNodes:LS,getSelectedRows:RS}}]};function GS(e){e.expansionSvc?.expandAll(!0)}function KS(e){e.expansionSvc?.expandAll(!1)}function qS(e){let t=my(e),n=hy(e);t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}var JS={moduleName:`CsrmSsrmSharedApi`,version:I,apiFunctions:{expandAll:GS,collapseAll:KS,onRowHeightChanged:qS}},YS=class extends Sf{constructor(){super(...arguments),this.beanName=`csrmNodeSvc`}},XS=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function ZS(e){if(M(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let r=t[n],i=n===0,a=n===e.childrenAfterSort.length-1;r.setFirstChild(i),r.lastChild!==a&&(r.lastChild=a,r.dispatchRowEvent(`lastChildChanged`)),r.childIndex!==n&&(r.childIndex=n,r.dispatchRowEvent(`childIndexChanged`))}}function QS(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),ZS(e)}var $S=class extends W{constructor(){super(...arguments),this.beanName=`sortStage`,this.refreshProps=new Set([`postSortRows`,`groupDisplayType`,`accentedSort`]),this.step=`sort`}execute(e){let t=this.beans,n=t.sortSvc.getSortOptions(),r=j(n)&&n.length>0,i=r&&!!e.changedRowNodes&&this.gos.get(`deltaSort`),a=n.some(({column:e})=>ii(t.gos)?e.isPrimary()&&e.isRowGroupActive():!!e.getColDef().showRowGroup);this.sort(t,n,r,i,e.changedRowNodes,e.changedPath,a)}sort(e,t,n,r,i,a,o){let{gos:s,colModel:c,rowGroupColsSvc:l,rowNodeSorter:u,rowRenderer:d,showRowGroupCols:f}=e,p=s.get(`groupMaintainOrder`),m=c.getCols().some(e=>e.isRowGroupActive()),h=c.isPivotMode(),g=s.getCallback(`postSortRows`),_=!1;if(a?.forEachChangedNodeDepthFirst(e=>{let s=h&&e.leafGroup,c=p&&m&&!e.leafGroup&&!o,d;if(c){let t=(l?.columns?.[e.level+1])?.getSort()===null,n=e.childrenAfterAggFilter.slice(0);if(e.childrenAfterSort&&!t){let t={};e.childrenAfterSort.forEach((e,n)=>{t[e.id]=n}),n.sort((e,n)=>(t[e.id]??0)-(t[n.id]??0))}d=n}else d=!n||s?e.childrenAfterAggFilter.slice(0):r&&i?eC(u,e,i,a,t):u.doFullSort(e.childrenAfterAggFilter,t);_||=e.childrenAfterSort?.[0]!==d[0],e.childrenAfterSort=d,QS(e),g&&g({nodes:e.childrenAfterSort})}),_&&this.gos.get(`groupHideOpenParents`)){let e=f?.getShowRowGroupCols();e?.length&&d.refreshCells({columns:e,force:!0})}}};function eC(e,t,n,r,i){let a=t.childrenAfterAggFilter,o=t.childrenAfterSort;if(!o)return e.doFullSort(a,i);let s=new Set,c=[],{updates:l,adds:u}=n;for(let e=0,t=a.length;e<t;++e){let t=a[e];l.has(t)||u.has(t)||r&&!r.canSkip(t)?c.push({currentPos:c.length,rowNode:t}):s.add(t.id)}let d=o.filter(e=>s.has(e.id)).map((e,t)=>({currentPos:t,rowNode:e}));return c.sort((t,n)=>e.compareRowNodes(i,t,n)),tC(e,i,c,d)}function tC(e,t,n,r){let i=[],a=0,o=0,s=n.length,c=r.length;for(;a<s&&o<c;){let s=n[a],c=r[o],l=e.compareRowNodes(t,s,c),u;l<0?(u=s,++a):(u=c,++o),i.push(u.rowNode)}for(;a<s;)i.push(n[a++].rowNode);for(;o<c;)i.push(r[o++].rowNode);return i}var nC=class extends W{constructor(){super(...arguments),this.beanName=`rowModel`,this.rootNode=null,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=hr(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(e=>!!e);let e=this.refreshModel.bind(this,{step:`group`}),t=this.refreshModel.bind(this,{step:`group`,afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get(`suppressAnimationFrame`)});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:`pivot`}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new $c(this.beans);let n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){let{gos:e,beans:t}=this;return Ni(e)===`treeNested`&&t.csrmChildrenTreeNodeSvc||t.csrmNodeSvc}addPropertyListeners(){let e=[`treeData`,`treeDataChildrenField`,...this.orderedStages.flatMap(({refreshProps:e})=>[...e])];this.addManagedPropertyListeners(e,e=>{let t=e.changeSet?.properties;t&&this.onPropChange(t)}),this.addManagedPropertyListener(`rowData`,()=>this.onPropChange([`rowData`])),this.addManagedPropertyListener(`rowHeight`,()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:`group`,rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get(`rowData`)&&this.onPropChange([`rowData`])}ensureRowHeightsValid(e,t,n,r){let i,a=!1;do{i=!1;let o=this.getRowIndexAtPixel(e),s=this.getRowIndexAtPixel(t),c=Math.max(o,n),l=Math.min(s,r);for(let e=c;e<=l;e++){let t=this.getRow(e);if(t.rowHeightEstimated){let e=Ur(this.beans,t);t.setRowHeight(e.height),i=!0,a=!0}}i&&this.setRowTopAndRowIndex()}while(i);return a}onPropChange(e){if(!this.rootNode)return;let t=this.gos,n=new Set(e),r={step:`nothing`,changedProps:n},i=n.has(`rowData`),a=this.nodeManager,o=this.getNewNodeManager(),s=a!==o||i&&n.has(`treeData`)&&t.get(`treeData`)||n.has(`treeDataChildrenField`)&&t.get(`treeData`),c;if((s||i)&&(c=t.get(`rowData`),c!=null&&!Array.isArray(c)&&(c=null,L(1))),s&&(i||(c=a?.extractRowData()??c),a!==o&&(a?.deactivate(),this.nodeManager=o),o.activate(this.rootNode)),c)if(!s&&!this.isEmpty()&&c.length>0&&t.exists(`getRowId`)&&!t.get(`resetRowDataOnUpdate`))r.keepRenderedRows=!0,r.animate=!this.gos.get(`suppressAnimationFrame`),r.changedRowNodes=new XS,o.setImmutableRowData(r,c);else{r.rowDataUpdated=!0,r.newData=!0;let{selectionSvc:e,pinnedRowModel:t}=this.beans;e?.reset(`rowDataChanged`),t?.isManual()&&t.reset(),this.rowNodesCountReady=!0,o.setNewRowData(c)}if(r.rowDataUpdated)r.step=`group`;else if(r.step===`nothing`){for(let{refreshProps:t,step:n}of this.orderedStages)if(e.some(e=>t.has(e))){r.step=n;break}}r.step!==`nothing`&&this.refreshModel(r)}setRowTopAndRowIndex(){let{beans:e,rowsToDisplay:t}=this,n=e.environment.getDefaultRowHeight(),r=0,i=new Set,a=B(this.gos,`normal`);for(let o=0,s=t.length;o<s;++o){let s=t[o];if(s.id!=null&&i.add(s.id),s.rowHeight==null){let t=Ur(e,s,a,n);s.setRowHeight(t.height,t.estimated)}s.setRowTop(r),s.setRowIndex(o),r+=s.rowHeight}return i}clearRowTopAndRowIndex(e,t){let n=e.active,r=e=>{e&&e.id!=null&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},i=e=>{if(e!==null&&(r(e),r(e.detailNode),r(e.sibling),e.hasChildren()&&e.childrenAfterGroup)){let t=e.level==-1;n&&!t&&!e.expanded||e.childrenAfterGroup.forEach(i)}};i(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){let e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;let t=e.childrenAfterSort,n=e.sibling&&e.sibling.displayed?1:0;return(t?t.length:0)+n}getTopLevelRowDisplayedIndex(e){let{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let{childrenAfterSort:r}=t,i=e=>{let t=r[e];if(this.gos.get(`groupHideOpenParents`))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},{footerSvc:a}=this.beans;return a?a.getTopDisplayIndex(n,e,r,i):i(e)}getTopLevelIndexFromDisplayedIndex(e){let{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let r=this.getRow(e);for(r.footer&&(r=r.sibling);r.parent&&r.parent!==t;)r=r.parent;let i=t.childrenAfterSort?.findIndex(e=>e===r);return i===-1?e:i??e}getRowBounds(e){let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=ni(this.gos);this.refreshModel({step:`map`,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=ni(this.gos),n=e.columns.length===0||e.columns.some(e=>e.isPrimary())?`filter`:`filter_aggregates`;this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=ni(this.gos);this.refreshModel({step:`sort`,keepRenderedRows:!0,animate:e})}getType(){return`clientSide`}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?`pivot`:`aggregate`})}createChangePath(e){let t=new Ep(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get(`suppressModelUpdateAfterUpdateTransaction`))return!1;let{changedRowNodes:t,newData:n,rowDataUpdated:r}=e;return!(!t||n||!r||t.removals.size||t.adds.size)}refreshModel(e){if(!this.rootNode)return;let t=this.beans,n=!!e.rowDataUpdated,r=e.changedPath??=this.createChangePath(!e.newData&&n);if(this.started&&n&&this.eventSvc.dispatchEvent({type:`rowDataUpdated`}),this.rowDataUpdatedPending||=n,!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.rowDataUpdated=n=!0),this.isRefreshingModel=!0,t.masterDetailSvc?.refreshModel(e),n&&e.step!==`group`&&t.colFilter?.refreshModel(),e.step){case`group`:(this.doRowGrouping(e)||n)&&t.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:`rowCountReady`}));case`filter`:this.doFilter(r);case`pivot`:this.doPivot(r);case`aggregate`:this.doAggregate(r);case`filter_aggregates`:this.doFilterAggregates(r);case`sort`:this.doSort(e.changedRowNodes,r);case`map`:this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,i),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:`modelUpdated`,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,r=!1,i=[],a=Ti(this.gos);return this.forEachNodeAfterFilterAndSort(o=>{if(!r){if(n&&(o===t||o===e)&&(r=!0,o.group&&a)){i.push(...o.allLeafChildren);return}if(!n){if(o!==t&&o!==e)return;n=!0}if(!o.group||!a){i.push(o);return}}}),i}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){let t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let n=0,r=t.length-1;if(e<=0)return 0;if(K(t).rowTop<=e)return t.length-1;let i=-1,a=-1;for(;;){let o=Math.floor((n+r)/2),s=t[o];if(this.isRowInPixel(s,e)||(s.rowTop<e?n=o+1:s.rowTop>e&&(r=o-1),i===n&&a===r))return o;i=n,a=r}}isRowInPixel(e,t){let n=e.rowTop,r=e.rowTop+e.rowHeight;return n<=t&&r>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterSort)}forEachPivotNode(e,t=!1,n=!1){let{colModel:r,rowGroupColsSvc:i}=this.beans;if(!r.isPivotMode())return;if(!i?.columns.length){e(this.rootNode,0);return}let a=n?`childrenAfterSort`:`childrenAfterGroup`;this.depthFirstSearchRowNodes(e,t,e=>e.leafGroup?null:e[a])}depthFirstSearchRowNodes(e,t=!1,n=e=>e.childrenAfterGroup,r=this.rootNode,i=0){let a=i;if(!r)return a;let o=r===this.rootNode;o||e(r,a++);let{footerSvc:s}=this.beans;if(r.hasChildren()&&!r.footer){let i=n(r);if(i){a=s?.addTotalRows(a,r,e,t,o,`top`)??a;for(let r of i)a=this.depthFirstSearchRowNodes(e,t,n,r,a);return s?.addTotalRows(a,r,e,t,o,`bottom`)??a}}return a}doAggregate(e){let t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){let t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(e=>{e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),QS(e)})}doRowGrouping(e){let t=this.rootNode,n=this.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,rowNodesOrderChanged:!!e.rowNodesOrderChanged,afterColumnsChanged:!!e.afterColumnsChanged});if(n!==void 0)return n;let r=t.sibling;return t.childrenAfterGroup=t.allLeafChildren,r&&(r.childrenAfterGroup=t.childrenAfterGroup),t.updateHasChildren(),!1}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,Hy(e)},!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){let t=this.nodeManager.getRowNode(e);return typeof t==`object`?t:typeof e==`string`&&e.indexOf(`row-group-`)===0?this.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let e=this.gos.get(`asyncTransactionWaitMillis`);this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();let e=[],t=[],n=new XS,r=!1;this.rowDataTransactionBatch?.forEach(i=>{this.rowNodesCountReady=!0;let{rowNodeTransaction:a,rowsInserted:o}=this.nodeManager.updateRowData(i.rowDataTransaction,n);o&&(r=!0),t.push(a),i.callback&&e.push(i.callback.bind(null,a))}),this.commitTransactions(r,n),e.length>0&&window.setTimeout(()=>{e.forEach(e=>e())},0),t.length>0&&this.eventSvc.dispatchEvent({type:`asyncTransactionsFlushed`,results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let t=new XS,{rowNodeTransaction:n,rowsInserted:r}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(r,t),n}commitTransactions(e,t){this.refreshModel({step:`group`,rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get(`suppressAnimationFrame`),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{flattenStage:e,rootNode:t}=this,n;if(e)n=e.execute({rowNode:t});else{n=t?.childrenAfterSort??[];for(let e of n)e.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:`map`,keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let e=this.rootNode;if(!e)return;let t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=sa,this.rowsToDisplay=sa}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function rC(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function iC(e,t){let n=my(e);n&&((!t||t===`everything`)&&(t=`group`),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get(`suppressAnimationFrame`)}))}function aC(e){return my(e)?.isEmpty()??!0}function oC(e,t){my(e)?.forEachLeafNode(t)}function sC(e,t){my(e)?.forEachNodeAfterFilter(t)}function cC(e,t){my(e)?.forEachNodeAfterFilterAndSort(t)}function lC(e){if(e.rowAutoHeight?.active){L(3);return}my(e)?.resetRowHeights()}function uC(e,t){return e.frameworkOverrides.wrapIncoming(()=>my(e)?.updateRowData(t))}function dC(e,t,n){e.frameworkOverrides.wrapIncoming(()=>my(e)?.batchUpdateRowData(t,n))}function fC(e){e.frameworkOverrides.wrapIncoming(()=>my(e)?.flushAsyncTransactions())}function pC(e){return e.selectionSvc?.getBestCostNodeSelection()}var mC={moduleName:`ClientSideRowModel`,version:I,rowModels:[`clientSide`],beans:[YS,nC,$S],dependsOn:[Iv]},hC={moduleName:`ClientSideRowModelApi`,version:I,apiFunctions:{onGroupExpandedOrCollapsed:rC,refreshClientSideRowModel:iC,isRowDataEmpty:aC,forEachLeafNode:oC,forEachNodeAfterFilter:sC,forEachNodeAfterFilterAndSort:cC,resetRowHeights:lC,applyTransaction:uC,applyTransactionAsync:dC,flushAsyncTransactions:fC,getBestCostNodeSelection:pC},dependsOn:[JS]};function gC(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function _C(e,t,n,r,i){t&&(r&&t.parent&&t.parent.level!==-1&&_C(e,t.parent,n,r,i),t.setExpanded(n,void 0,i))}function vC(e,t){return e.rowModel.getRowNode(t)}function yC(e,t,n,r){e.rowRenderer.addRenderedRowListener(t,n,r)}function bC(e){return e.rowRenderer.getRenderedNodes()}function xC(e,t,n){e.rowModel.forEachNode(t,n)}function SC(e){return e.rowRenderer.firstRenderedRow}function CC(e){return e.rowRenderer.lastRenderedRow}function wC(e,t){return e.rowModel.getRow(t)}function TC(e){return e.rowModel.getRowCount()}var EC={moduleName:`RowApi`,version:I,apiFunctions:{redrawRows:gC,setRowNodeExpanded:_C,getRowNode:vC,addRenderedRowListener:yC,getRenderedNodes:bC,forEachNode:xC,getFirstDisplayedRowIndex:SC,getLastDisplayedRowIndex:CC,getDisplayedRowAtIndex:wC,getDisplayedRowCount:TC}},DC={moduleName:`ScrollApi`,version:I,apiFunctions:{getVerticalPixelRange:Vx,getHorizontalPixelRange:Hx,ensureColumnVisible:Ux,ensureIndexVisible:Wx,ensureNodeVisible:Gx}};function OC(e,t,n){if(!t)return;let r=e.ctrlsSvc.getGridBodyCtrl().eGridBody,i=`aria-${t}`;n===null?r.removeAttribute(i):r.setAttribute(i,n)}function kC(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function AC(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}function jC(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function MC(e){e.animationFrameSvc?.flushAllFrames()}function NC(e){return{rowHeight:Gr(e),headerHeight:ad(e)}}function PC(e,t={}){let n=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(e=>{let t=e.getCellRenderer();t!=null&&n.push(Yo(t))}),t.columns?.length)return n;let r=[],i=Mv(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(e=>{if(i&&!Nv(e.rowNode,i)||!e.isFullWidth())return;let t=e.getFullWidthCellRenderers();for(let e=0;e<t.length;e++){let n=t[e];n!=null&&r.push(Yo(n))}}),[...r,...n]}var FC={moduleName:`RenderApi`,version:I,apiFunctions:{setGridAriaProperty:OC,refreshCells:kC,refreshHeader:AC,isAnimationFrameQueueEmpty:jC,flushAllAnimationFrames:MC,getSizesForCurrentTheme:NC,getCellRendererInstances:PC}};function IC(e,t){typeof t==`number`?e.colAutosize?.sizeColumnsToFit(t,`api`):e.colAutosize?.sizeColumnsToFitGridBody(t)}function LC({colAutosize:e,visibleCols:t},n,r){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:r,source:`api`}):e?.autoSizeCols({colKeys:n.colIds??t.allCols,skipHeader:n.skipHeader,defaultMaxWidth:n.defaultMaxWidth,defaultMinWidth:n.defaultMinWidth,columnLimits:n.columnLimits,source:`api`})}function RC(e,t){t&&typeof t==`object`?LC(e,t):e.colAutosize?.autoSizeAllColumns({source:`api`,skipHeader:t})}var zC=class extends W{constructor(){super(...arguments),this.beanName=`colAutosize`,this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:r,stopAtGroup:i,defaultMaxWidth:a,defaultMinWidth:o,columnLimits:s=[],source:c=`api`}=e,{animationFrameSvc:l,renderStatus:u,colModel:d,autoWidthCalc:f,visibleCols:p}=this.beans;if(l?.flushAllFrames(),this.timesDelayed<5&&u&&!u.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;let m=[],h=-1,g=Object.fromEntries(s.map(({colId:e,maxWidth:t,minWidth:n})=>[e,{maxWidth:t,minWidth:n}])),_=n??this.gos.get(`skipHeaderOnAutoSize`),v=r??_;for(;h!==0;){h=0;let e=[];t.forEach(t=>{if(!t||ba(t))return;let n=d.getCol(t);if(!n||m.indexOf(n)>=0)return;let r=f.getPreferredWidthForColumn(n,_);if(r>0){let e=g[n.colId]??{};e.minWidth??=o,e.maxWidth??=a;let t=BC(n,r,e);n.setActualWidth(t,c),m.push(n),h++}e.push(n)}),e.length&&p.refresh(c)}v||this.autoSizeColumnGroupsByColumns(t,c,i),Ga(this.eventSvc,m,!0,`autosizeColumns`)}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let{colModel:r,ctrlsSvc:i}=this.beans,a=new Set;r.getColsForKeys(e).forEach(e=>{let t=e.getParent();for(;t&&t!=n;)t.isPadding()||a.add(t),t=t.getParent()});let o,s=[];for(let e of a){for(let t of i.getHeaderRowContainerCtrls())if(o=t.getHeaderCtrlForColumn(e),o)break;o&&o.resizeLeafColumnsToFit(t)}return s}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}let t=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:t,...e})}addColumnAutosize(e,t){let n=this.gos.get(`skipHeaderOnAutoSize`),r=()=>{this.autoSizeColumn(t,`uiColumnResized`,n)};e.addEventListener(`dblclick`,r);let i=new Kf(e);return i.addEventListener(`doubleTap`,r),()=>{e.removeEventListener(`dblclick`,r),i.removeEventListener(`doubleTap`,r),i.destroy()}}addColumnGroupResize(e,t,n){let r=this.gos.get(`skipHeaderOnAutoSize`),i=()=>{let e=[];t.getDisplayedLeafColumns().forEach(t=>{t.getColDef().suppressAutoSize||e.push(t.getColId())}),e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:r,stopAtGroup:t,source:`uiColumnResized`}),n()};return e.addEventListener(`dblclick`,i),()=>e.removeEventListener(`dblclick`,i)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;let{ctrlsSvc:n,scrollVisibleSvc:r}=this.beans,i=n.getGridBodyCtrl(),a=i.isVerticalScrollShowing()?r.getScrollbarWidth():0,o=Mn(i.eGridBody)-a;if(o>0){this.sizeColumnsToFit(o,`sizeColumnsToFit`,!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):L(29)}sizeColumnsToFit(e,t=`sizeColumnsToFit`,n,r){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,r));return}let i={};r&&r?.columnLimits?.forEach(({key:e,...t})=>{i[typeof e==`string`?e:e.getColId()]=t});let a=this.beans.visibleCols.allCols;if(e<=0||!a.length||e===ha(a)&&a.every(e=>{if(e.colDef.suppressSizeToFit)return!0;let t=i?.[e.getId()],n=t?.minWidth??r?.defaultMinWidth,a=t?.maxWidth??r?.defaultMaxWidth,o=e.getActualWidth();return(n==null||o>=n)&&(a==null||o<=a)}))return;let o=[],s=[];a.forEach(e=>{e.getColDef().suppressSizeToFit===!0?s.push(e):o.push(e)});let c=o.slice(0),l=!1,u=e=>{ua(o,e),s.push(e)};for(o.forEach(e=>{e.resetActualWidth(t);let n=i?.[e.getId()],a=n?.minWidth??r?.defaultMinWidth,o=n?.maxWidth??r?.defaultMaxWidth,s=e.getActualWidth();typeof a==`number`&&s<a?e.setActualWidth(a,t,!0):typeof o==`number`&&s>o&&e.setActualWidth(o,t,!0)});!l;){l=!0;let n=e-ha(s);if(n<=0)o.forEach(e=>{let n=i?.[e.getId()]?.minWidth??r?.defaultMinWidth;if(typeof n==`number`){e.setActualWidth(n,t,!0);return}e.setActualWidth(e.minWidth,t)});else{let e=n/ha(o),a=n;for(let n=o.length-1;n>=0;n--){let s=o[n],c=i?.[s.getId()],d=c?.minWidth??r?.defaultMinWidth,f=c?.maxWidth??r?.defaultMaxWidth,p=s.getMinWidth(),m=s.getMaxWidth(),h=typeof d==`number`&&d>p?d:p,g=typeof f==`number`&&f<m?f:m,_=Math.round(s.getActualWidth()*e);_<h?(_=h,u(s),l=!1):_>g?(_=g,u(s),l=!1):n===0&&(_=a),s.setActualWidth(_,t,!0),a-=_}}}c.forEach(e=>{e.fireColumnWidthChangedEvent(t)});let d=this.beans.visibleCols;d.setLeftValues(t),d.updateBodyWidths(),!n&&Ga(this.eventSvc,c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get(`autoSizeStrategy`);if(!e)return;let{type:t}=e;setTimeout(()=>{if(t===`fitGridWidth`){let{columnLimits:t,defaultMinWidth:n,defaultMaxWidth:r}=e,i=t?.map(({colId:e,minWidth:t,maxWidth:n})=>({key:e,minWidth:t,maxWidth:n}));this.sizeColumnsToFitGridBody({defaultMinWidth:n,defaultMaxWidth:r,columnLimits:i})}else t===`fitProvidedWidth`&&this.sizeColumnsToFit(e.width,`sizeColumnsToFit`)})}onFirstDataRendered(){let e=this.gos.get(`autoSizeStrategy`);if(e?.type!==`fitCellContents`)return;let{colIds:t,skipHeader:n,defaultMaxWidth:r,defaultMinWidth:i,columnLimits:a}=e;setTimeout(()=>{let e={skipHeader:n,source:`autosizeColumns`,defaultMaxWidth:r,defaultMinWidth:i,columnLimits:a};t?this.autoSizeCols({colKeys:t,...e}):this.autoSizeAllColumns(e)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function BC(e,t,n={}){let r=n.minWidth??e.getMinWidth();t<r&&(t=r);let i=n.maxWidth??e.getMaxWidth();return t>i&&(t=i),t}var VC={moduleName:`ColumnAutoSize`,version:I,beans:[zC],apiFunctions:{sizeColumnsToFit:IC,autoSizeColumns:LC,autoSizeAllColumns:RC},dependsOn:[om]},HC=`.ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}`;function UC(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function WC(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function GC(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function KC(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function qC(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var JC={moduleName:`PinnedRow`,version:I,beans:[bf],css:[HC],apiFunctions:{getPinnedTopRowCount:UC,getPinnedBottomRowCount:WC,getPinnedTopRow:GC,getPinnedBottomRow:KC,forEachPinnedRow:qC},icons:{rowPin:`pin`,rowPinTop:`pinned-top`,rowPinBottom:`pinned-bottom`,rowUnpin:`un-pin`}},YC=class extends W{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:e,cellComp:t}=this,n=e.colDef,r=n.cellClassRules,i=this.getCellClassParams(e,n);iu(this.beans.expressionSvc,r===this.cellClassRules?void 0:this.cellClassRules,r,i,e=>t.toggleCss(e,!0),e=>t.toggleCss(e,!1)),this.cellClassRules=r}applyUserStyles(){let e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let r;r=typeof n==`function`?n(this.getCellClassParams(e,t)):n,r&&this.cellComp.setUserStyles(r)}applyClassesFromColDef(){let{column:e,cellComp:t}=this,n=e.colDef,r=this.getCellClassParams(e,n);this.staticClasses.forEach(e=>t.toggleCss(e,!1));let i=this.beans.cellStyles.getStaticCellClasses(n,r);this.staticClasses=i,i.forEach(e=>t.toggleCss(e,!0))}getCellClassParams(e,t){let{value:n,rowNode:r}=this.cellCtrl;return U(this.beans.gos,{value:n,data:r.data,node:r,colDef:t,column:e,rowIndex:r.rowIndex})}},XC={moduleName:`CellStyle`,version:I,beans:[class extends W{constructor(){super(...arguments),this.beanName=`cellStyles`}processAllCellClasses(e,t,n,r){iu(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,r),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let r;return r=typeof n==`function`?n(t):n,typeof r==`string`&&(r=[r]),r||[]}createCellCustomStyleFeature(e,t){return new YC(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(e=>{n(e)})}}]},ZC=class extends W{constructor(){super(...arguments),this.beanName=`apiEventSvc`,this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){let n=this.wrapSvc?.wrap(e,t)??t,r=!h_.has(e),i=r?this.asyncListeners:this.syncListeners;i.has(e)||i.set(e,new Set),i.get(e).add(n),this.eventSvc.addEventListener(e,n,r)}removeEventListener(e,t){let n=this.wrapSvc?.unwrap(e,t)??t,r=!!this.asyncListeners.get(e)?.delete(n);r||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeEventListener(e,n,r)}addGlobalListener(e){let t=this.wrapSvc?.wrapGlobal(e)??e,n=(e,n)=>{h_.has(e)&&t(e,n)},r=(e,n)=>{h_.has(e)||t(e,n)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:r});let i=this.eventSvc;i.addGlobalListener(n,!1),i.addGlobalListener(r,!0)}removeGlobalListener(e){let{eventSvc:t,wrapSvc:n,globalListenerPairs:r}=this,i=n?.unwrapGlobal(e)??e;if(r.has(i)){let{syncListener:n,asyncListener:a}=r.get(i);t.removeGlobalListener(n,!1),t.removeGlobalListener(a,!0),r.delete(e)}else this.syncGlobalListeners.delete(i),t.removeGlobalListener(i,!1)}destroyEventListeners(e,t){e.forEach((e,n)=>{e.forEach(e=>this.eventSvc.removeEventListener(n,e,t)),e.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(e=>this.eventSvc.removeGlobalListener(e,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);let{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:e,asyncListener:n})=>{t.removeGlobalListener(e,!1),t.removeGlobalListener(n,!0)}),e.clear()}};function QC(e,t,n){e.apiEventSvc?.addEventListener(t,n)}function $C(e,t,n){e.apiEventSvc?.removeEventListener(t,n)}function ew(e,t){e.apiEventSvc?.addGlobalListener(t)}function tw(e,t){e.apiEventSvc?.removeGlobalListener(t)}var nw={moduleName:`EventApi`,version:I,apiFunctions:{addEventListener:QC,addGlobalListener:ew,removeEventListener:$C,removeGlobalListener:tw},beans:[ZC]},rw=Object.defineProperty,iw=(e,t,n)=>t in e?rw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aw=(e,t,n)=>iw(e,typeof t==`symbol`?t:t+``,n),ow=class e{static getComponentDefinition(e,t){let n;return n=typeof e==`string`?this.searchForComponentInstance(t,e):{extends:g({...e})},n||R(114,{component:e}),n.extends?(n.extends.setup&&(n.setup=n.extends.setup),n.extends.props=this.addParamsToProps(n.extends.props)):n.props=this.addParamsToProps(n.props),n}static addParamsToProps(e){return!e||Array.isArray(e)&&e.indexOf(`params`)===-1?e=[`params`,...e||[]]:typeof e==`object`&&!e.params&&(e.params={type:Object}),e}static createAndMountComponent(t,n,r,i){let a=e.getComponentDefinition(t,r);if(!a)return;let{vNode:o,destroy:s,el:c}=this.mount(a,{params:Object.freeze(n)},r,i||{});return{componentInstance:o.component.proxy,element:c,destroy:s}}static mount(e,t,n,r){let i=m(e,t);i.appContext={...n.appContext,provides:r};let a=document.createDocumentFragment();return ae(i,a),{vNode:i,destroy:()=>{a&&ae(null,a),a=null,i=null},el:a}}static searchForComponentInstance(e,t,n=10,r=!1){let i=null,a=0,o=e.parent;for(;!i&&o&&o.components&&++a<n;)o.components&&o.components[t]&&(i=o.components[t]),o=o.parent;for(a=0,o=e.parent;!i&&o&&o.$options&&++a<n;){let e=o;e.$options&&e.$options.components&&e.$options.components[t]?i=e.$options.components[t]:e[t]&&(i=e[t]),o=o.parent}for(a=0,o=e.parent;!i&&o&&++a<n;){if(o.exposed){let e=o;e.exposed&&e.exposed[t]?i=e.exposed[t]:e[t]&&(i=e[t])}o=o.parent}if(!i){let n=e.appContext.components;n&&n[t]&&(i=n[t])}return!i&&!r?(R(114,{component:t}),null):i}},sw=class extends gy{constructor(e,t){super(),aw(this,`parent`),aw(this,`provides`),this.parent=e,this.provides=t}createWrapper(e){let t=this;class n extends cw{init(e){super.init(e)}hasMethod(e){let t=r.getFrameworkComponentInstance();return t[e]?!0:t.$.exposed?.[e]!=null||t.exposed?.[e]!=null||t.$.setupState[e]!=null}callMethod(e,t){let n=this.getFrameworkComponentInstance(),i=r.getFrameworkComponentInstance();return i[e]?i[e].apply(n,t):(n.$.exposed?.[e]||n.exposed?.[e]||n.$.setupState[e])?.apply(n,t)}addMethod(e,t){r[e]=t}processMethod(e,t){return e===`refresh`&&(this.getFrameworkComponentInstance().params=t[0]),this.hasMethod(e)?this.callMethod(e,t):e===`refresh`}createComponent(n){return t.createComponent(e,n)}}let r=new n;return r}createComponent(e,t){return ow.createAndMountComponent(e,t,this.parent,this.provides)}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&L(233,{methodName:t}),null)}}destroy(){this.parent=null}},cw=class{constructor(){aw(this,`componentInstance`),aw(this,`element`),aw(this,`unmount`)}getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy==`function`&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(e){let{componentInstance:t,element:n,destroy:r}=this.createComponent(e);this.componentInstance=t,this.unmount=r,this.element=n.firstElementChild??n}},lw=class extends qf{constructor(e){super(`vue`),aw(this,`parent`),this.parent=e}frameworkComponent(e,t){let n=ow.searchForComponentInstance(this.parent,e,10,!0)?e:null;if(!n&&t&&t[e]){let r=t[e];n=ow.searchForComponentInstance(this.parent,r,10,!0)?r:null}return n}isFrameworkComponent(e){return typeof e==`object`}};function uw(){return{gridOptions:{},modules:[],statusBar:void 0,sideBar:void 0,suppressContextMenu:void 0,preventDefaultOnContextMenu:void 0,allowContextMenuWithControlKey:void 0,columnMenu:void 0,suppressMenuHide:void 0,enableBrowserTooltips:void 0,tooltipTrigger:void 0,tooltipShowDelay:void 0,tooltipHideDelay:void 0,tooltipMouseTrack:void 0,tooltipShowMode:void 0,tooltipInteraction:void 0,popupParent:void 0,copyHeadersToClipboard:void 0,copyGroupHeadersToClipboard:void 0,clipboardDelimiter:void 0,suppressCopyRowsToClipboard:void 0,suppressCopySingleCellRanges:void 0,suppressLastEmptyLineOnPaste:void 0,suppressClipboardPaste:void 0,suppressClipboardApi:void 0,suppressCutToClipboard:void 0,columnDefs:void 0,defaultColDef:void 0,defaultColGroupDef:void 0,columnTypes:void 0,dataTypeDefinitions:void 0,maintainColumnOrder:void 0,enableStrictPivotColumnOrder:void 0,suppressFieldDotNotation:void 0,headerHeight:void 0,groupHeaderHeight:void 0,floatingFiltersHeight:void 0,pivotHeaderHeight:void 0,pivotGroupHeaderHeight:void 0,hidePaddedHeaderRows:void 0,allowDragFromColumnsToolPanel:void 0,suppressMovableColumns:void 0,suppressColumnMoveAnimation:void 0,suppressMoveWhenColumnDragging:void 0,suppressDragLeaveHidesColumns:void 0,suppressGroupChangesColumnVisibility:void 0,suppressMakeColumnVisibleAfterUnGroup:void 0,suppressRowGroupHidesColumns:void 0,colResizeDefault:void 0,suppressAutoSize:void 0,autoSizePadding:void 0,skipHeaderOnAutoSize:void 0,autoSizeStrategy:void 0,components:void 0,editType:void 0,suppressStartEditOnTab:void 0,getFullRowEditValidationErrors:void 0,invalidEditValueMode:void 0,singleClickEdit:void 0,suppressClickEdit:void 0,readOnlyEdit:void 0,stopEditingWhenCellsLoseFocus:void 0,enterNavigatesVertically:void 0,enterNavigatesVerticallyAfterEdit:void 0,enableCellEditingOnBackspace:void 0,undoRedoCellEditing:void 0,undoRedoCellEditingLimit:void 0,defaultCsvExportParams:void 0,suppressCsvExport:void 0,defaultExcelExportParams:void 0,suppressExcelExport:void 0,excelStyles:void 0,findSearchValue:void 0,findOptions:void 0,quickFilterText:void 0,cacheQuickFilter:void 0,includeHiddenColumnsInQuickFilter:void 0,quickFilterParser:void 0,quickFilterMatcher:void 0,applyQuickFilterBeforePivotOrAgg:void 0,excludeChildrenWhenTreeDataFiltering:void 0,enableAdvancedFilter:void 0,alwaysPassFilter:void 0,includeHiddenColumnsInAdvancedFilter:void 0,advancedFilterParent:void 0,advancedFilterBuilderParams:void 0,advancedFilterParams:void 0,suppressAdvancedFilterEval:void 0,suppressSetFilterByDefault:void 0,enableFilterHandlers:void 0,filterHandlers:void 0,enableCharts:void 0,chartThemes:void 0,customChartThemes:void 0,chartThemeOverrides:void 0,chartToolPanelsDef:void 0,chartMenuItems:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,localeText:void 0,masterDetail:void 0,keepDetailRows:void 0,keepDetailRowsCount:void 0,detailCellRenderer:void 0,detailCellRendererParams:void 0,detailRowHeight:void 0,detailRowAutoHeight:void 0,context:void 0,alignedGrids:void 0,tabIndex:void 0,rowBuffer:void 0,valueCache:void 0,valueCacheNeverExpires:void 0,enableCellExpressions:void 0,suppressTouch:void 0,suppressFocusAfterRefresh:void 0,suppressBrowserResizeObserver:void 0,suppressPropertyNamesCheck:void 0,suppressChangeDetection:void 0,debug:void 0,loading:void 0,overlayLoadingTemplate:void 0,loadingOverlayComponent:void 0,loadingOverlayComponentParams:void 0,suppressLoadingOverlay:void 0,overlayNoRowsTemplate:void 0,noRowsOverlayComponent:void 0,noRowsOverlayComponentParams:void 0,suppressNoRowsOverlay:void 0,pagination:void 0,paginationPageSize:void 0,paginationPageSizeSelector:void 0,paginationAutoPageSize:void 0,paginateChildRows:void 0,suppressPaginationPanel:void 0,pivotMode:void 0,pivotPanelShow:void 0,pivotMaxGeneratedColumns:void 0,pivotDefaultExpanded:void 0,pivotColumnGroupTotals:void 0,pivotRowTotals:void 0,pivotSuppressAutoColumn:void 0,suppressExpandablePivotGroups:void 0,functionsReadOnly:void 0,aggFuncs:void 0,suppressAggFuncInHeader:void 0,alwaysAggregateAtRootLevel:void 0,aggregateOnlyChangedColumns:void 0,suppressAggFilteredOnly:void 0,removePivotHeaderRowWhenSingleValueColumn:void 0,animateRows:void 0,cellFlashDuration:void 0,cellFadeDuration:void 0,allowShowChangeAfterFilter:void 0,domLayout:void 0,ensureDomOrder:void 0,enableCellSpan:void 0,enableRtl:void 0,suppressColumnVirtualisation:void 0,suppressMaxRenderedRowRestriction:void 0,suppressRowVirtualisation:void 0,rowDragManaged:void 0,rowDragInsertDelay:void 0,suppressRowDrag:void 0,suppressMoveWhenRowDragging:void 0,rowDragEntireRow:void 0,rowDragMultiRow:void 0,rowDragText:void 0,dragAndDropImageComponent:void 0,dragAndDropImageComponentParams:void 0,fullWidthCellRenderer:void 0,fullWidthCellRendererParams:void 0,embedFullWidthRows:void 0,groupDisplayType:void 0,groupDefaultExpanded:void 0,autoGroupColumnDef:void 0,groupMaintainOrder:void 0,groupSelectsChildren:void 0,groupLockGroupColumns:void 0,groupAggFiltering:void 0,groupTotalRow:void 0,grandTotalRow:void 0,suppressStickyTotalRow:void 0,groupSuppressBlankHeader:void 0,groupSelectsFiltered:void 0,showOpenedGroup:void 0,groupHideParentOfSingleChild:void 0,groupRemoveSingleChildren:void 0,groupRemoveLowestSingleChildren:void 0,groupHideOpenParents:void 0,groupAllowUnbalanced:void 0,rowGroupPanelShow:void 0,groupRowRenderer:void 0,groupRowRendererParams:void 0,treeData:void 0,treeDataChildrenField:void 0,treeDataParentIdField:void 0,rowGroupPanelSuppressSort:void 0,suppressGroupRowsSticky:void 0,pinnedTopRowData:void 0,pinnedBottomRowData:void 0,enableRowPinning:void 0,isRowPinnable:void 0,isRowPinned:void 0,rowModelType:void 0,rowData:void 0,asyncTransactionWaitMillis:void 0,suppressModelUpdateAfterUpdateTransaction:void 0,datasource:void 0,cacheOverflowSize:void 0,infiniteInitialRowCount:void 0,serverSideInitialRowCount:void 0,suppressServerSideFullWidthLoadingRow:void 0,cacheBlockSize:void 0,maxBlocksInCache:void 0,maxConcurrentDatasourceRequests:void 0,blockLoadDebounceMillis:void 0,purgeClosedRowNodes:void 0,serverSideDatasource:void 0,serverSideSortAllLevels:void 0,serverSideEnableClientSideSort:void 0,serverSideOnlyRefreshFilteredGroups:void 0,serverSidePivotResultFieldSeparator:void 0,viewportDatasource:void 0,viewportRowModelPageSize:void 0,viewportRowModelBufferSize:void 0,alwaysShowHorizontalScroll:void 0,alwaysShowVerticalScroll:void 0,debounceVerticalScrollbar:void 0,suppressHorizontalScroll:void 0,suppressScrollOnNewData:void 0,suppressScrollWhenPopupsAreOpen:void 0,suppressAnimationFrame:void 0,suppressMiddleClickScrolls:void 0,suppressPreventDefaultOnMouseWheel:void 0,scrollbarWidth:void 0,rowSelection:void 0,cellSelection:void 0,rowMultiSelectWithClick:void 0,suppressRowDeselection:void 0,suppressRowClickSelection:void 0,suppressCellFocus:void 0,suppressHeaderFocus:void 0,selectionColumnDef:void 0,rowNumbers:void 0,suppressMultiRangeSelection:void 0,enableCellTextSelection:void 0,enableRangeSelection:void 0,enableRangeHandle:void 0,enableFillHandle:void 0,fillHandleDirection:void 0,suppressClearOnFillReduction:void 0,sortingOrder:void 0,accentedSort:void 0,unSortIcon:void 0,suppressMultiSort:void 0,alwaysMultiSort:void 0,multiSortKey:void 0,suppressMaintainUnsortedOrder:void 0,icons:void 0,rowHeight:void 0,rowStyle:void 0,rowClass:void 0,rowClassRules:void 0,suppressRowHoverHighlight:void 0,suppressRowTransform:void 0,columnHoverHighlight:void 0,gridId:void 0,deltaSort:void 0,treeDataDisplayType:void 0,enableGroupEdit:void 0,initialState:void 0,theme:void 0,loadThemeGoogleFonts:void 0,themeCssLayer:void 0,styleNonce:void 0,themeStyleContainer:void 0,getContextMenuItems:void 0,getMainMenuItems:void 0,postProcessPopup:void 0,processUnpinnedColumns:void 0,processCellForClipboard:void 0,processHeaderForClipboard:void 0,processGroupHeaderForClipboard:void 0,processCellFromClipboard:void 0,sendToClipboard:void 0,processDataFromClipboard:void 0,isExternalFilterPresent:void 0,doesExternalFilterPass:void 0,getChartToolbarItems:void 0,createChartContainer:void 0,focusGridInnerElement:void 0,navigateToNextHeader:void 0,tabToNextHeader:void 0,navigateToNextCell:void 0,tabToNextCell:void 0,getLocaleText:void 0,getDocument:void 0,paginationNumberFormatter:void 0,getGroupRowAgg:void 0,isGroupOpenByDefault:void 0,initialGroupOrderComparator:void 0,processPivotResultColDef:void 0,processPivotResultColGroupDef:void 0,getDataPath:void 0,getChildCount:void 0,getServerSideGroupLevelParams:void 0,isServerSideGroupOpenByDefault:void 0,isApplyServerSideTransaction:void 0,isServerSideGroup:void 0,getServerSideGroupKey:void 0,getBusinessKeyForNode:void 0,getRowId:void 0,resetRowDataOnUpdate:void 0,processRowPostCreate:void 0,isRowSelectable:void 0,isRowMaster:void 0,fillOperation:void 0,postSortRows:void 0,getRowStyle:void 0,getRowClass:void 0,getRowHeight:void 0,isFullWidthRow:void 0,isRowValidDropPosition:void 0,"onColumn-everything-changed":void 0,"onNew-columns-loaded":void 0,"onColumn-pivot-mode-changed":void 0,"onPivot-max-columns-exceeded":void 0,"onColumn-row-group-changed":void 0,"onExpand-or-collapse-all":void 0,"onColumn-pivot-changed":void 0,"onGrid-columns-changed":void 0,"onColumn-value-changed":void 0,"onColumn-moved":void 0,"onColumn-visible":void 0,"onColumn-pinned":void 0,"onColumn-group-opened":void 0,"onColumn-resized":void 0,"onDisplayed-columns-changed":void 0,"onVirtual-columns-changed":void 0,"onColumn-header-mouse-over":void 0,"onColumn-header-mouse-leave":void 0,"onColumn-header-clicked":void 0,"onColumn-header-context-menu":void 0,"onAsync-transactions-flushed":void 0,"onRow-group-opened":void 0,"onRow-data-updated":void 0,"onPinned-row-data-changed":void 0,"onPinned-rows-changed":void 0,"onRange-selection-changed":void 0,"onCell-selection-changed":void 0,"onChart-created":void 0,"onChart-range-selection-changed":void 0,"onChart-options-changed":void 0,"onChart-destroyed":void 0,"onTool-panel-visible-changed":void 0,"onTool-panel-size-changed":void 0,"onModel-updated":void 0,"onCut-start":void 0,"onCut-end":void 0,"onPaste-start":void 0,"onPaste-end":void 0,"onFill-start":void 0,"onFill-end":void 0,"onCell-selection-delete-start":void 0,"onCell-selection-delete-end":void 0,"onRange-delete-start":void 0,"onRange-delete-end":void 0,"onUndo-started":void 0,"onUndo-ended":void 0,"onRedo-started":void 0,"onRedo-ended":void 0,"onCell-clicked":void 0,"onCell-double-clicked":void 0,"onCell-mouse-down":void 0,"onCell-context-menu":void 0,"onCell-value-changed":void 0,"onCell-edit-request":void 0,"onRow-value-changed":void 0,"onHeader-focused":void 0,"onCell-focused":void 0,"onRow-selected":void 0,"onSelection-changed":void 0,"onTooltip-show":void 0,"onTooltip-hide":void 0,"onCell-key-down":void 0,"onCell-mouse-over":void 0,"onCell-mouse-out":void 0,"onFilter-changed":void 0,"onFilter-modified":void 0,"onFilter-ui-changed":void 0,"onFilter-opened":void 0,"onFloating-filter-ui-changed":void 0,"onAdvanced-filter-builder-visible-changed":void 0,"onSort-changed":void 0,"onVirtual-row-removed":void 0,"onRow-clicked":void 0,"onRow-double-clicked":void 0,"onGrid-ready":void 0,"onGrid-pre-destroyed":void 0,"onGrid-size-changed":void 0,"onViewport-changed":void 0,"onFirst-data-rendered":void 0,"onDrag-started":void 0,"onDrag-stopped":void 0,"onDrag-cancelled":void 0,"onRow-editing-started":void 0,"onRow-editing-stopped":void 0,"onCell-editing-started":void 0,"onCell-editing-stopped":void 0,"onBody-scroll":void 0,"onBody-scroll-end":void 0,"onPagination-changed":void 0,"onComponent-state-changed":void 0,"onStore-refreshed":void 0,"onState-updated":void 0,"onColumn-menu-visible-changed":void 0,"onContext-menu-visible-changed":void 0,"onRow-drag-enter":void 0,"onRow-drag-move":void 0,"onRow-drag-leave":void 0,"onRow-drag-end":void 0,"onRow-drag-cancel":void 0,"onFind-changed":void 0,"onRow-resize-started":void 0,"onRow-resize-ended":void 0,"onColumns-reset":void 0,"onBulk-editing-started":void 0,"onBulk-editing-stopped":void 0,"onBatch-editing-started":void 0,"onBatch-editing-stopped":void 0}}var dw=(e,t)=>{let n;return()=>{window.clearTimeout(n),n=window.setTimeout(function(){e()},t)}};function fw(e){return e&&e.constructor&&e.constructor.toString().substring(0,5)===`class`}function pw(e){let r=e=>fw(e)?n(e):Array.isArray(e)?e.map(e=>r(e)):ne(e)||t(e)||O(e)?r(n(e)):e;return r(e)}var mw={ref:`root`},hw=g({__name:`AgGridVue`,props:y(u({gridOptions:{},modules:{},statusBar:{},sideBar:{type:[Object,String,Array,Boolean,null]},suppressContextMenu:{type:Boolean},preventDefaultOnContextMenu:{type:Boolean},allowContextMenuWithControlKey:{type:Boolean},columnMenu:{},suppressMenuHide:{type:Boolean},enableBrowserTooltips:{type:Boolean},tooltipTrigger:{},tooltipShowDelay:{},tooltipHideDelay:{},tooltipMouseTrack:{type:Boolean},tooltipShowMode:{},tooltipInteraction:{type:Boolean},popupParent:{},copyHeadersToClipboard:{type:Boolean},copyGroupHeadersToClipboard:{type:Boolean},clipboardDelimiter:{},suppressCopyRowsToClipboard:{type:Boolean},suppressCopySingleCellRanges:{type:Boolean},suppressLastEmptyLineOnPaste:{type:Boolean},suppressClipboardPaste:{type:Boolean},suppressClipboardApi:{type:Boolean},suppressCutToClipboard:{type:Boolean},columnDefs:{},defaultColDef:{},defaultColGroupDef:{},columnTypes:{},dataTypeDefinitions:{},maintainColumnOrder:{type:Boolean},enableStrictPivotColumnOrder:{type:Boolean},suppressFieldDotNotation:{type:Boolean},headerHeight:{},groupHeaderHeight:{},floatingFiltersHeight:{},pivotHeaderHeight:{},pivotGroupHeaderHeight:{},hidePaddedHeaderRows:{type:Boolean},allowDragFromColumnsToolPanel:{type:Boolean},suppressMovableColumns:{type:Boolean},suppressColumnMoveAnimation:{type:Boolean},suppressMoveWhenColumnDragging:{type:Boolean},suppressDragLeaveHidesColumns:{type:Boolean},suppressGroupChangesColumnVisibility:{type:[Boolean,String]},suppressMakeColumnVisibleAfterUnGroup:{type:Boolean},suppressRowGroupHidesColumns:{type:Boolean},colResizeDefault:{},suppressAutoSize:{type:Boolean},autoSizePadding:{},skipHeaderOnAutoSize:{type:Boolean},autoSizeStrategy:{},components:{},editType:{},suppressStartEditOnTab:{type:Boolean},getFullRowEditValidationErrors:{type:Function},invalidEditValueMode:{},singleClickEdit:{type:Boolean},suppressClickEdit:{type:Boolean},readOnlyEdit:{type:Boolean},stopEditingWhenCellsLoseFocus:{type:Boolean},enterNavigatesVertically:{type:Boolean},enterNavigatesVerticallyAfterEdit:{type:Boolean},enableCellEditingOnBackspace:{type:Boolean},undoRedoCellEditing:{type:Boolean},undoRedoCellEditingLimit:{},defaultCsvExportParams:{},suppressCsvExport:{type:Boolean},defaultExcelExportParams:{},suppressExcelExport:{type:Boolean},excelStyles:{},findSearchValue:{},findOptions:{},quickFilterText:{},cacheQuickFilter:{type:Boolean},includeHiddenColumnsInQuickFilter:{type:Boolean},quickFilterParser:{type:Function},quickFilterMatcher:{type:Function},applyQuickFilterBeforePivotOrAgg:{type:Boolean},excludeChildrenWhenTreeDataFiltering:{type:Boolean},enableAdvancedFilter:{type:Boolean},alwaysPassFilter:{type:Function},includeHiddenColumnsInAdvancedFilter:{type:Boolean},advancedFilterParent:{},advancedFilterBuilderParams:{},advancedFilterParams:{},suppressAdvancedFilterEval:{type:Boolean},suppressSetFilterByDefault:{type:Boolean},enableFilterHandlers:{type:Boolean},filterHandlers:{},enableCharts:{type:Boolean},chartThemes:{},customChartThemes:{},chartThemeOverrides:{},chartToolPanelsDef:{},chartMenuItems:{type:[Array,Function]},loadingCellRenderer:{},loadingCellRendererParams:{},loadingCellRendererSelector:{type:Function},localeText:{},masterDetail:{type:Boolean},keepDetailRows:{type:Boolean},keepDetailRowsCount:{},detailCellRenderer:{},detailCellRendererParams:{},detailRowHeight:{},detailRowAutoHeight:{type:Boolean},context:{},alignedGrids:{type:[Array,Function]},tabIndex:{},rowBuffer:{},valueCache:{type:Boolean},valueCacheNeverExpires:{type:Boolean},enableCellExpressions:{type:Boolean},suppressTouch:{type:Boolean},suppressFocusAfterRefresh:{type:Boolean},suppressBrowserResizeObserver:{type:Boolean},suppressPropertyNamesCheck:{type:Boolean},suppressChangeDetection:{type:Boolean},debug:{type:Boolean},loading:{type:Boolean},overlayLoadingTemplate:{},loadingOverlayComponent:{},loadingOverlayComponentParams:{},suppressLoadingOverlay:{type:Boolean},overlayNoRowsTemplate:{},noRowsOverlayComponent:{},noRowsOverlayComponentParams:{},suppressNoRowsOverlay:{type:Boolean},pagination:{type:Boolean},paginationPageSize:{},paginationPageSizeSelector:{type:[Array,Boolean]},paginationAutoPageSize:{type:Boolean},paginateChildRows:{type:Boolean},suppressPaginationPanel:{type:Boolean},pivotMode:{type:Boolean},pivotPanelShow:{},pivotMaxGeneratedColumns:{},pivotDefaultExpanded:{},pivotColumnGroupTotals:{},pivotRowTotals:{},pivotSuppressAutoColumn:{type:Boolean},suppressExpandablePivotGroups:{type:Boolean},functionsReadOnly:{type:Boolean},aggFuncs:{},suppressAggFuncInHeader:{type:Boolean},alwaysAggregateAtRootLevel:{type:Boolean},aggregateOnlyChangedColumns:{type:Boolean},suppressAggFilteredOnly:{type:Boolean},removePivotHeaderRowWhenSingleValueColumn:{type:Boolean},animateRows:{type:Boolean},cellFlashDuration:{},cellFadeDuration:{},allowShowChangeAfterFilter:{type:Boolean},domLayout:{},ensureDomOrder:{type:Boolean},enableCellSpan:{type:Boolean},enableRtl:{type:Boolean},suppressColumnVirtualisation:{type:Boolean},suppressMaxRenderedRowRestriction:{type:Boolean},suppressRowVirtualisation:{type:Boolean},rowDragManaged:{type:Boolean},rowDragInsertDelay:{},suppressRowDrag:{type:Boolean},suppressMoveWhenRowDragging:{type:Boolean},rowDragEntireRow:{type:Boolean},rowDragMultiRow:{type:Boolean},rowDragText:{type:Function},dragAndDropImageComponent:{},dragAndDropImageComponentParams:{},fullWidthCellRenderer:{},fullWidthCellRendererParams:{},embedFullWidthRows:{type:Boolean},groupDisplayType:{},groupDefaultExpanded:{},autoGroupColumnDef:{},groupMaintainOrder:{type:Boolean},groupSelectsChildren:{type:Boolean},groupLockGroupColumns:{},groupAggFiltering:{type:[Boolean,Function]},groupTotalRow:{type:[String,Function]},grandTotalRow:{},suppressStickyTotalRow:{type:[Boolean,String]},groupSuppressBlankHeader:{type:Boolean},groupSelectsFiltered:{type:Boolean},showOpenedGroup:{type:Boolean},groupHideParentOfSingleChild:{type:[Boolean,String]},groupRemoveSingleChildren:{type:Boolean},groupRemoveLowestSingleChildren:{type:Boolean},groupHideOpenParents:{type:Boolean},groupAllowUnbalanced:{type:Boolean},rowGroupPanelShow:{},groupRowRenderer:{},groupRowRendererParams:{},treeData:{type:Boolean},treeDataChildrenField:{},treeDataParentIdField:{},rowGroupPanelSuppressSort:{type:Boolean},suppressGroupRowsSticky:{type:Boolean},pinnedTopRowData:{},pinnedBottomRowData:{},enableRowPinning:{type:[Boolean,String]},isRowPinnable:{type:Function},isRowPinned:{type:Function},rowModelType:{},rowData:{},asyncTransactionWaitMillis:{},suppressModelUpdateAfterUpdateTransaction:{type:Boolean},datasource:{},cacheOverflowSize:{},infiniteInitialRowCount:{},serverSideInitialRowCount:{},suppressServerSideFullWidthLoadingRow:{type:Boolean},cacheBlockSize:{},maxBlocksInCache:{},maxConcurrentDatasourceRequests:{},blockLoadDebounceMillis:{},purgeClosedRowNodes:{type:Boolean},serverSideDatasource:{},serverSideSortAllLevels:{type:Boolean},serverSideEnableClientSideSort:{type:Boolean},serverSideOnlyRefreshFilteredGroups:{type:Boolean},serverSidePivotResultFieldSeparator:{},viewportDatasource:{},viewportRowModelPageSize:{},viewportRowModelBufferSize:{},alwaysShowHorizontalScroll:{type:Boolean},alwaysShowVerticalScroll:{type:Boolean},debounceVerticalScrollbar:{type:Boolean},suppressHorizontalScroll:{type:Boolean},suppressScrollOnNewData:{type:Boolean},suppressScrollWhenPopupsAreOpen:{type:Boolean},suppressAnimationFrame:{type:Boolean},suppressMiddleClickScrolls:{type:Boolean},suppressPreventDefaultOnMouseWheel:{type:Boolean},scrollbarWidth:{},rowSelection:{},cellSelection:{type:[Boolean,Object]},rowMultiSelectWithClick:{type:Boolean},suppressRowDeselection:{type:Boolean},suppressRowClickSelection:{type:Boolean},suppressCellFocus:{type:Boolean},suppressHeaderFocus:{type:Boolean},selectionColumnDef:{},rowNumbers:{type:[Boolean,Object]},suppressMultiRangeSelection:{type:Boolean},enableCellTextSelection:{type:Boolean},enableRangeSelection:{type:Boolean},enableRangeHandle:{type:Boolean},enableFillHandle:{type:Boolean},fillHandleDirection:{},suppressClearOnFillReduction:{type:Boolean},sortingOrder:{},accentedSort:{type:Boolean},unSortIcon:{type:Boolean},suppressMultiSort:{type:Boolean},alwaysMultiSort:{type:Boolean},multiSortKey:{},suppressMaintainUnsortedOrder:{type:Boolean},icons:{},rowHeight:{},rowStyle:{},rowClass:{},rowClassRules:{},suppressRowHoverHighlight:{type:Boolean},suppressRowTransform:{type:Boolean},columnHoverHighlight:{type:Boolean},gridId:{},deltaSort:{type:Boolean},treeDataDisplayType:{},enableGroupEdit:{type:Boolean},initialState:{},theme:{},loadThemeGoogleFonts:{type:Boolean},themeCssLayer:{},styleNonce:{},themeStyleContainer:{},getContextMenuItems:{type:Function},getMainMenuItems:{type:Function},postProcessPopup:{type:Function},processUnpinnedColumns:{type:Function},processCellForClipboard:{type:Function},processHeaderForClipboard:{type:Function},processGroupHeaderForClipboard:{type:Function},processCellFromClipboard:{type:Function},sendToClipboard:{type:Function},processDataFromClipboard:{type:Function},isExternalFilterPresent:{type:Function},doesExternalFilterPass:{type:Function},getChartToolbarItems:{type:Function},createChartContainer:{type:Function},focusGridInnerElement:{type:Function},navigateToNextHeader:{type:Function},tabToNextHeader:{type:Function},navigateToNextCell:{type:Function},tabToNextCell:{type:Function},getLocaleText:{type:Function},getDocument:{type:Function},paginationNumberFormatter:{type:Function},getGroupRowAgg:{type:Function},isGroupOpenByDefault:{type:Function},initialGroupOrderComparator:{type:Function},processPivotResultColDef:{type:Function},processPivotResultColGroupDef:{type:Function},getDataPath:{type:Function},getChildCount:{type:Function},getServerSideGroupLevelParams:{type:Function},isServerSideGroupOpenByDefault:{type:Function},isApplyServerSideTransaction:{type:Function},isServerSideGroup:{type:Function},getServerSideGroupKey:{type:Function},getBusinessKeyForNode:{type:Function},getRowId:{type:Function},resetRowDataOnUpdate:{type:Boolean},processRowPostCreate:{type:Function},isRowSelectable:{type:Function},isRowMaster:{type:Function},fillOperation:{type:Function},postSortRows:{type:Function},getRowStyle:{type:Function},getRowClass:{type:Function},getRowHeight:{type:Function},isFullWidthRow:{type:Function},isRowValidDropPosition:{},"onTool-panel-visible-changed":{},"onTool-panel-size-changed":{},"onColumn-menu-visible-changed":{},"onContext-menu-visible-changed":{},"onCut-start":{},"onCut-end":{},"onPaste-start":{},"onPaste-end":{},"onColumn-visible":{},"onColumn-pinned":{},"onColumn-resized":{},"onColumn-moved":{},"onColumn-value-changed":{},"onColumn-pivot-mode-changed":{},"onColumn-pivot-changed":{},"onColumn-group-opened":{},"onNew-columns-loaded":{},"onGrid-columns-changed":{},"onDisplayed-columns-changed":{},"onVirtual-columns-changed":{},"onColumn-everything-changed":{},"onColumns-reset":{},"onColumn-header-mouse-over":{},"onColumn-header-mouse-leave":{},"onColumn-header-clicked":{},"onColumn-header-context-menu":{},"onComponent-state-changed":{},"onCell-value-changed":{},"onCell-edit-request":{},"onRow-value-changed":{},"onCell-editing-started":{},"onCell-editing-stopped":{},"onRow-editing-started":{},"onRow-editing-stopped":{},"onBulk-editing-started":{},"onBulk-editing-stopped":{},"onBatch-editing-started":{},"onBatch-editing-stopped":{},"onUndo-started":{},"onUndo-ended":{},"onRedo-started":{},"onRedo-ended":{},"onCell-selection-delete-start":{},"onCell-selection-delete-end":{},"onRange-delete-start":{},"onRange-delete-end":{},"onFill-start":{},"onFill-end":{},"onFilter-opened":{},"onFilter-changed":{},"onFilter-modified":{},"onFilter-ui-changed":{},"onFloating-filter-ui-changed":{},"onAdvanced-filter-builder-visible-changed":{},"onFind-changed":{},"onChart-created":{},"onChart-range-selection-changed":{},"onChart-options-changed":{},"onChart-destroyed":{},"onCell-key-down":{},"onGrid-ready":{},"onGrid-pre-destroyed":{},"onFirst-data-rendered":{},"onGrid-size-changed":{},"onModel-updated":{},"onVirtual-row-removed":{},"onViewport-changed":{},"onBody-scroll":{},"onBody-scroll-end":{},"onDrag-started":{},"onDrag-stopped":{},"onDrag-cancelled":{},"onState-updated":{},"onPagination-changed":{},"onRow-drag-enter":{},"onRow-drag-move":{},"onRow-drag-leave":{},"onRow-drag-end":{},"onRow-drag-cancel":{},"onRow-resize-started":{},"onRow-resize-ended":{},"onColumn-row-group-changed":{},"onRow-group-opened":{},"onExpand-or-collapse-all":{},"onPivot-max-columns-exceeded":{},"onPinned-row-data-changed":{},"onPinned-rows-changed":{},"onRow-data-updated":{},"onAsync-transactions-flushed":{},"onStore-refreshed":{},"onHeader-focused":{},"onCell-clicked":{},"onCell-double-clicked":{},"onCell-focused":{},"onCell-mouse-over":{},"onCell-mouse-out":{},"onCell-mouse-down":{},"onRow-clicked":{},"onRow-double-clicked":{},"onRow-selected":{},"onSelection-changed":{},"onCell-context-menu":{},"onRange-selection-changed":{},"onCell-selection-changed":{},"onTooltip-show":{},"onTooltip-hide":{},"onSort-changed":{}},uw()),{modelValue:{},modelModifiers:{}}),emits:y([`update:modelValue`],[`update:modelValue`]),setup(e,{expose:t,emit:n}){let r=e,i=ie(`root`),o=f(void 0),c=f(!1),l=f(!1),u=f(!1),p=f({}),m=f(null),g=d(r);R_().filter(e=>e!=`gridOptions`).forEach(e=>{S(()=>g[e],(t,n)=>{(e===`rowData`&&!C.value||e!==`rowData`)&&ae(e,t),C.value=!1},{deep:!0})});let v=new Set([`rowDataUpdated`,`cellValueChanged`,`rowValueChanged`]),y=E(e,`modelValue`),x=f(!1),C=f(!1),w=n;S(y,(e,t)=>{c.value&&(C.value||(x.value=!0,ae(`rowData`,pw(e),pw(t))),C.value=!1)},{deep:!0});let ee=dw(()=>{C.value=!0,w(`update:modelValue`,O())},10),te=s(),D=e=>{var t;u.value&&v.has(e)&&(t=te?.vnode?.props)!=null&&t[`onUpdate:modelValue`]&&ee()},ne=()=>y.value||r.rowData||r.gridOptions.rowData,O=()=>{let e=[];return o?.value.forEachLeafNode(t=>{e.push(t.data)}),e},re=e=>t=>{if(l.value)return;t===`gridReady`&&(u.value=!0);let n=h_.has(t);n&&!e||!n&&e||v.has(t)&&(x.value||D(t),x.value=!1)},ae=(e,t,n)=>{if(c.value){let n=t.value||t;e===`rowData`&&n!=null&&(n=pw(n)),p.value[e]=n,m.value??=window.setTimeout(()=>{m.value=null,Mi(p.value,o.value),p.value={}},0)}},oe=()=>Object.create(s().provides);return b(()=>{as(EC,void 0,!0);let e=new sw(s(),oe()),t={globalListener:re(),globalSyncListener:re(!0),frameworkOverrides:new lw(s()),providedBeanInstances:{frameworkCompWrapper:e},modules:r.modules},n=h(ji(pw(r.gridOptions),r,[...R_(),...Object.values(g_)])),a=ne();a!==void 0&&(n.rowData=pw(a)),o.value=uy(i.value,n,t),c.value=!0}),_(()=>{var e;c.value&&((e=o?.value)==null||e.destroy(),l.value=!0)}),t({api:o}),(e,t)=>(T(),a(`div`,mw,null,512))}});const gw=Yg.withPart(Ig).withParams({columnBorder:!0,rowBorder:!0,rowVerticalPaddingScale:.8,sidePanelBorder:!0,wrapperBorder:!0,headerColumnBorder:{color:`var(--color--foreground)`},headerColumnBorderHeight:`100%`,checkboxUncheckedBackgroundColor:`var(--color--background--light-1)`,checkboxCheckedBackgroundColor:`var(--color--primary)`});var _w=!1;const vw=()=>{_w||=(ps.registerModules([Vy,mC,wS,OS,VC,DS,TS,WS,FC,ES,hC,CS,XC,JC,DC,hh,fx,px,mx,nw]),!0)},yw=(e={})=>{let t=f(e.initialPage??1),n=f(e.initialPageSize??20),r=f(0);return{currentPage:t,pageSize:n,pageSizeOptions:e.pageSizeOptions??[10,20,50],totalItems:r,setTotalItems:e=>{r.value=e},setCurrentPage:async r=>{t.value=r,e.onChange&&await e.onChange(t.value,n.value)},setPageSize:async r=>{n.value=r,t.value=1,e.onChange&&await e.onChange(t.value,n.value)},ensureItemOnPage:async r=>{let i=Math.max(1,Math.ceil(r/n.value));t.value!==i&&(t.value=i,e.onChange&&await e.onChange(t.value,n.value))}}},bw=({gridContainerRef:e,defaultSortColumn:t,pinnedBottomRowId:n,defaultColDef:i})=>{let a=f(null),o=f(!1),s=f(t),c=f(`asc`),l=r(()=>{if(!a.value)throw Error(`Grid API is not initialized`);return a.value}),{copy:u}=ct({onPaste:e=>{if(!a.value)return;let t=l.value.getFocusedCell(),n=l.value.getEditingCells().length>0;if(!t||n)return;let r=l.value.getDisplayedRowAtIndex(t.rowIndex);if(!r)return;let i=t.column.getColDef();i.cellDataType===`text`?r.setDataValue(t.column.getColId(),e):i.cellDataType===`number`?Number.isNaN(Number(e))||r.setDataValue(t.column.getColId(),Number(e)):i.cellDataType===`date`?Number.isNaN(Date.parse(e))||r.setDataValue(t.column.getColId(),new Date(e)):i.cellDataType===`boolean`&&(e.toLowerCase()===`true`?r.setDataValue(t.column.getColId(),!0):e.toLowerCase()===`false`&&r.setDataValue(t.column.getColId(),!1))}}),d=f(null),p=t=>{a.value=t.api,e.value&&t.api.setGridOption(`popupParent`,e.value),i&&t.api.setGridOption(`defaultColDef`,i)},m=({colDefs:e,rowData:t})=>{e&&l.value.setGridOption(`columnDefs`,e),t&&l.value.setGridOption(`rowData`,t),n!==void 0&&l.value.setGridOption(`pinnedBottomRowData`,[{id:n}])},h=(e,t)=>{let n=l.value.getRowNode(String(e));if(n?.rowIndex===null||n?.rowIndex===void 0)return;let r=n.rowIndex,i=l.value.getAllDisplayedColumns().find(e=>{let n=e.getColDef();return!n||t&&n.colId===t?!1:!!n.editable});if(!i)return;let a=i.getColId();requestAnimationFrame(()=>{l.value.ensureIndexVisible(r),requestAnimationFrame(()=>{l.value.setFocusedCell(r,a),l.value.startEditingCell({rowIndex:r,colKey:a})})})},g=e=>{e.column.getColDef().cellDataType===`text`?o.value=!0:o.value=!1},_=e=>{e.column.getColDef().cellDataType===`text`&&(o.value=!1)},v=async e=>{let t=e.api.getFocusedCell();if(!t)return;let n=e.api.getDisplayedRowAtIndex(t.rowIndex),r=t.column.getColDef();if(n?.data&&r.field){let e=n.data[r.field];await u(e==null?``:String(e))}},y=e=>{let t=e.column.getColId(),n=e.rowIndex;n===null||e.api.isEditing({rowIndex:n,column:e.column,rowPinned:null})||(d.value&&d.value.rowIndex===n&&d.value.colId===t&&e.column.getColDef()?.editable&&e.api.startEditingCell({rowIndex:n,colKey:t}),d.value={rowIndex:n,colId:t})},b=()=>{d.value=null};return ce(e,()=>{b(),l.value.clearFocusedCell()}),{gridApi:l,onGridReady:p,setGridData:m,focusFirstEditableCell:h,onCellEditingStarted:g,onCellEditingStopped:_,handleCopyFocusedCell:v,onCellClicked:y,resetLastFocusedCell:b,currentSortBy:s,currentSortOrder:c,onSortChanged:(e,n)=>{let r=e.columns?.filter(e=>e.getSort()!==null).pop()??null;if(r){let e=r.getColId();s.value=n.find(t=>t.colId===e)?.field??e,c.value=r.getSort()??`asc`}else s.value=t,c.value=`asc`},isTextEditorOpen:o}},xw=[`string`,`number`,`boolean`,`date`],Sw=[`text`,`number`,`boolean`,`date`,`dateString`,`object`],Cw=e=>e===null||typeof e==`string`||typeof e==`number`||typeof e==`boolean`||e instanceof Date,ww=e=>typeof e==`string`&&Sw.includes(e),Tw=()=>({getIconForType:e=>Be[e],mapToAGCellType:e=>e===`string`?`text`:e,mapToDataTableColumnType:e=>!ww(e)||e===`text`?`string`:e});var Ew={class:`data-table-column-header-icon-wrapper`},Dw={key:2,class:`ag-header-cell-text`,"data-test-id":`data-table-column-header-text`},Ow={key:3,class:`sort-indicator`},kw=function(e){return e.Rename=`rename`,e.Delete=`delete`,e}(kw||{}),Aw=7,jw=16,Mw=50,Nw=250,Pw=g({__name:`ColumnHeader`,props:{params:{}},setup(e){let t=e,{getIconForType:n,mapToDataTableColumnType:s}=Tw(),c=le(),u=ie(`renameInput`),d=f(!1),p=f(!1),h=f(!1),g=f(!1),y=f(null),x=r(()=>t.params.showTypeIcon!==!1),S=r(()=>t.params.column.getColDef().filter!==!1),C=e=>{let n=e.trim();if(!n||n===t.params.displayName){u.value?.forceCancel();return}t.params.onRename?.(t.params.column.getColId(),n)},w=e=>{e?.stopPropagation(),u.value?.forceFocus&&!fe.value&&u.value.forceFocus()},E=e=>{let n=e;n===kw.Delete?t.params.onDelete?.(t.params.column.getColId()):n===kw.Rename&&w()},te=()=>{d.value=!0},D=()=>{d.value=!1},ne=e=>{p.value=e},O=()=>{if(!S.value){g.value=!1;return}let e=t.params.column.getColId(),n=t.params.api.getFilterModel();g.value=n&&!!n[e]},re=()=>{y.value=t.params.column.getSort()??null},ae=r(()=>t.params.allowMenuActions&&(d.value||p.value||h.value||g.value)),ce=r(()=>S.value?d.value||p.value||h.value||g.value:!1),ue=r(()=>{if(!x.value)return null;let e=t.params.column.getColDef().cellDataType;return ww(e)?n(s(e)):null}),fe=r(()=>{let e=t.params.column.getColId();return et.includes(e)}),pe=r(()=>{let e=(t.params.displayName||``).length*Aw+jw;return Math.min(Math.max(e,Mw),Nw)}),me=r(()=>{let e=[];return e.push({id:kw.Rename,label:c.baseText(`dataTable.renameColumn.label`),icon:`pen`,customClass:`data-table-column-header-action-item`}),e.push({id:kw.Delete,label:c.baseText(`dataTable.deleteColumn.confirm.title`),icon:`trash-2`,customClass:`data-table-column-header-action-item`}),e}),ge=r(()=>t.params.column.getColDef().sortable),_e=r(()=>ge.value&&!!y.value),ye=()=>{if(ge.value){let e=y.value,n=null;e?e===`asc`&&(n=`desc`):n=`asc`,t.params.setSort(n,!1)}},be=e=>{e.stopPropagation(),h.value=!0,t.params.showFilter(e.currentTarget)},Se=()=>{h.value=!1};return b(()=>{O(),re(),t.params.api.addEventListener(`filterChanged`,O),t.params.api.addEventListener(`sortChanged`,re),t.params.api.addEventListener(`filterClosed`,Se)}),_(()=>{t.params.api.removeEventListener(`filterChanged`,O),t.params.api.removeEventListener(`sortChanged`,re),t.params.api.removeEventListener(`filterClosed`,Se)}),(e,n)=>(T(),a(`div`,{class:k([`ag-header-cell-label`,`data-table-column-header-wrapper`,{sortable:ge.value}]),"data-test-id":`data-table-column-header`,onMouseenter:te,onMouseleave:D,onClick:ye},[A(`div`,Ew,[ue.value?(T(),v(l(ve),{key:0,icon:ue.value},null,8,[`icon`])):o(``,!0),fe.value?(T(),a(`span`,Dw,i(t.params.displayName),1)):(T(),v(l(xe),{key:1,ref_key:`renameInput`,ref:u,"model-value":t.params.displayName,"max-width":pe.value,"read-only":t.params.readOnly,disabled:t.params.readOnly,class:`ag-header-cell-text`,"data-test-id":`data-table-column-header-text`,"onUpdate:modelValue":C,onClick:w,onKeydown:n[0]||=ee(()=>{},[`stop`])},null,8,[`model-value`,`max-width`,`read-only`,`disabled`])),_e.value?(T(),a(`div`,Ow,[y.value===`asc`?(T(),v(l(ve),{key:0,icon:`arrow-up`,class:`sort-icon-active`})):y.value===`desc`?(T(),v(l(ve),{key:1,icon:`arrow-down`,class:`sort-icon-active`})):o(``,!0)])):o(``,!0)]),se(m(l(he),{variant:`ghost`,"data-test-id":`data-table-column-header-filter-button`,icon:`funnel`,class:k({"filter-highlighted":g.value}),onClick:be},null,8,[`class`]),[[oe,ce.value]]),se(m(l(de),{"data-test-id":`data-table-column-header-actions`,items:me.value,placement:`bottom-start`,"activator-icon":`ellipsis`,onSelect:E,onVisibleChange:ne,onClick:n[1]||=ee(()=>{},[`stop`])},null,8,[`items`]),[[oe,ae.value]])],34))}});const Fw=e=>{let t=e.trim(),n=nt.exec(t);if(!n)return null;let r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=n[4]===void 0?0:Number(n[4]),s=n[5]===void 0?0:Number(n[5]),c=n[6]===void 0?0:Number(n[6]),l=new Date(r,i-1,a,o,s,c,0);return l.getFullYear()!==r||l.getMonth()!==i-1||l.getDate()!==a||l.getHours()!==o||l.getMinutes()!==s||l.getSeconds()!==c?null:l},Iw=(e,t,n)=>n&&n===`date`&&e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t,Lw=(e={})=>{let t=ie(`pickerRef`),n=ie(`wrapperRef`),r=f(null),i=f(null),a=()=>n.value instanceof HTMLElement?n.value.querySelector(`input`)??null:null,o=t=>{let n=Fw((t instanceof HTMLInputElement?t:null)?.value??``);return n?(r.value=n,e.onCommit?.(),!0):!1};return{pickerRef:t,wrapperRef:n,dateValue:r,initialValue:i,getInnerInput:a,commitIfParsedFromInput:o,onKeydown:t=>{if(t.key===`Escape`){t.stopPropagation(),r.value=i.value,e.onCancel?.();return}t.key===`Enter`&&o(t.target)&&(t.preventDefault(),t.stopPropagation())},onClear:()=>{r.value=null,e.onCommit?.()},onDateChange:()=>{e.onChange?.()},focusPicker:async()=>{await c(),Me(t.value)&&t.value.focus()},getDate:()=>Fw(a()?.value??``)||r.value,setDate:e=>{r.value=e,i.value=e},initializeValue:e=>{e==null?r.value=null:e instanceof Date&&(r.value=e),i.value=r.value}}};var Rw=g({__name:`ElDatePickerCellEditor`,props:{params:{}},setup(e,{expose:t}){let n=e,i=f(n.params.column.getActualWidth()-4),{pickerRef:o,wrapperRef:s,dateValue:c,onKeydown:u,onClear:d,onDateChange:p,focusPicker:h,getDate:g,initializeValue:_}=Lw({onCommit:()=>n.params.stopEditing(),onCancel:()=>n.params.stopEditing(),onChange:()=>n.params.stopEditing()}),v=r({get:()=>c.value??void 0,set:e=>{c.value=e??null}});return b(async()=>{_(n.params.value),await h()}),t({getValue:g,isPopup:()=>!0}),(e,t)=>(T(),a(`div`,{ref_key:`wrapperRef`,ref:s,class:`data-table-datepicker-wrapper`},[m(l(Oe),{id:`data-table-datepicker`,ref_key:`pickerRef`,ref:o,modelValue:v.value,"onUpdate:modelValue":t[0]||=e=>v.value=e,type:`datetime`,style:C({width:`${i.value}px`}),clearable:!0,editable:!0,teleported:!1,"popper-class":`ag-custom-component-popup data-table-datepicker-popper`,placeholder:`YYYY-MM-DD (HH:mm:ss)`,size:`small`,onChange:l(p),onClear:l(d),onKeydown:l(u)},null,8,[`modelValue`,`style`,`onChange`,`onClear`,`onKeydown`])],512))}}),zw=g({__name:`ElDatePickerFilter`,props:{params:{}},setup(e,{expose:t}){let n=e,{pickerRef:i,wrapperRef:o,dateValue:s,onKeydown:c,onClear:u,onDateChange:d,focusPicker:f,getDate:p,setDate:h}=Lw({onCommit:()=>n.params.onDateChanged(),onCancel:()=>{s.value=null,n.params.onDateChanged()},onChange:()=>n.params.onDateChanged()}),g=r({get:()=>s.value??void 0,set:e=>{s.value=e??null}});return b(async()=>{await f()}),t({getDate:p,setDate:h}),(e,t)=>(T(),a(`div`,{ref_key:`wrapperRef`,ref:o,class:`data-table-date-filter-wrapper`},[m(l(Oe),{ref_key:`pickerRef`,ref:i,modelValue:g.value,"onUpdate:modelValue":t[0]||=e=>g.value=e,type:`datetime`,clearable:!0,editable:!0,teleported:!0,placement:`bottom`,"popper-class":`ag-custom-component-popup data-table-date-filter-popper`,placeholder:`YYYY-MM-DD (HH:mm:ss)`,size:`small`,onChange:l(d),onClear:l(u),onKeydown:l(c)},null,8,[`modelValue`,`onChange`,`onClear`,`onKeydown`])],512))}}),Bw=e(lt(),1),Vw={class:`add-column-header-component-wrapper`},Hw={class:`add-ds-column-header-popover-content`,"data-test-id":`add-column-popover-content`},Uw={class:`popover-body`},Ww={key:0,class:`error-message`},Gw={class:`add-column-option-content`},Kw=g({__name:`AddColumnButton`,props:{params:{},popoverId:{},useTextTrigger:{type:Boolean},disabled:{type:Boolean,default:!1}},setup(e){let t=e,n=r(()=>t.params?.disabled??t.disabled),s=le(),{getIconForType:u}=Tw(),{debounce:d}=at(),p=f(null),h=f(``),g=f(`string`),_=[...xw],y=f(null),b=f(!1),S=f(!1),C=r(()=>t.popoverId??`add-column-popover`),E=r(()=>_.map(e=>({label:e===`date`?`datetime`:e,value:e}))),ee=async()=>{if(O(),!h.value||!g.value||y.value)return;let e=await t.params.onAddColumn({name:h.value,type:g.value});if(!e.success){let t=s.baseText(`dataTable.addColumn.error`),n=e.errorMessage;e.httpStatus===409&&(t=s.baseText(`dataTable.column.alreadyExistsError`,{interpolate:{name:h.value}}),n=e.errorMessage?.includes(`system`)?s.baseText(`dataTable.addColumn.systemColumnDescription`):e.errorMessage?.includes(`testing`)?s.baseText(`dataTable.addColumn.testingColumnDescription`):s.baseText(`dataTable.addColumn.alreadyExistsDescription`)),y.value={message:t,description:n};return}h.value=``,g.value=`string`,b.value=!1},ne=async e=>{!e&&S.value||(b.value=e,e&&(y.value=null,await c(()=>{p.value?.focus()})))},O=()=>{y.value&&=null,h.value&&!Ue.test(h.value)&&(y.value={message:s.baseText(`dataTable.addColumn.invalidName.error`),description:s.baseText(`dataTable.addColumn.invalidName.description`)})},ie=d(O,{debounceTime:100});return(e,r)=>(T(),v(l(_e),{disabled:b.value,content:l(s).baseText(`dataTable.addColumn.label`)},{default:w(()=>[A(`div`,Vw,[m(l(ye),{id:C.value,open:b.value,"popper-options":{strategy:`fixed`},"show-arrow":!1,"onUpdate:open":ne},{trigger:w(()=>[t.useTextTrigger?(T(),v(l(me),{key:0,variant:`subtle`,"data-test-id":`data-table-add-column-trigger-button`,disabled:n.value},{default:w(()=>[D(i(l(s).baseText(`dataTable.addColumn.label`)),1)]),_:1},8,[`disabled`])):(T(),v(l(he),{key:1,variant:`ghost`,"data-test-id":`data-table-add-column-trigger-button`,icon:`plus`,disabled:n.value},null,8,[`disabled`]))]),content:w(()=>[A(`div`,Hw,[A(`div`,Uw,[m(l(we),{label:l(s).baseText(`dataTable.addColumn.nameInput.label`),required:!0,class:k(y.value?``:`mb-s`)},{default:w(()=>[m(l(Ce),{ref_key:`nameInputRef`,ref:p,modelValue:h.value,"onUpdate:modelValue":r[0]||=e=>h.value=e,placeholder:l(s).baseText(`dataTable.addColumn.nameInput.placeholder`),maxlength:l(128),"data-test-id":`add-column-name-input`,onKeyup:re(ee,[`enter`]),onInput:l(ie)},null,8,[`modelValue`,`placeholder`,`maxlength`,`onInput`]),y.value?(T(),a(`div`,Ww,[y.value.message?(T(),v(l(be),{key:0,size:`small`,color:`danger`,tag:`span`},{default:w(()=>[D(i(y.value.message),1)]),_:1})):o(``,!0),m(l(_e),{content:y.value.description,placement:`top`,disabled:!y.value.description},{default:w(()=>[m(l(ve),{icon:`circle-help`,size:`small`,class:`error-tooltip`,color:`text-base`,"data-test-id":`add-column-error-help-icon`})]),_:1},8,[`content`,`disabled`])])):o(``,!0)]),_:1},8,[`label`,`class`]),m(l(we),{label:l(s).baseText(`dataTable.addColumn.typeInput.label`),required:!0,class:`type-label`},{default:w(()=>[m(l(Se),{modelValue:g.value,"onUpdate:modelValue":r[1]||=e=>g.value=e,"append-to":`#${C.value}`,onVisibleChange:r[2]||=e=>S.value=e},{default:w(()=>[(T(!0),a(x,null,te(E.value,e=>(T(),v(l(Te),{key:e.value,label:e.label,value:e.value},{default:w(()=>[A(`div`,Gw,[m(l(ve),{icon:l(u)(e.value)},null,8,[`icon`]),m(l(be),null,{default:w(()=>[D(i(e.label),1)]),_:2},1024)])]),_:2},1032,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`append-to`])]),_:1},8,[`label`]),m(l(me),{variant:`solid`,"data-test-id":`data-table-add-column-submit-button`,class:`mt-m`,size:`large`,disabled:!h.value||!g.value||!!y.value,onClick:ee},{default:w(()=>[D(i(l(s).baseText(`dataTable.addColumn.label`)),1)]),_:1},8,[`disabled`])])])]),_:1},8,[`id`,`open`])])]),_:1},8,[`disabled`,`content`]))}}),qw=g({__name:`AddRowButton`,props:{params:{}},setup(e){let t=le(),n=e;return(e,r)=>(T(),v(l(_e),{content:l(t).baseText(`dataTable.addRow.label`)},{default:w(()=>[m(l(he),{variant:`ghost`,icon:`plus`,disabled:n.params.disabled,onClick:n.params.onClick},null,8,[`disabled`,`onClick`])]),_:1},8,[`content`]))}}),Jw={class:`n8n-empty-value`},Yw=g({__name:`NullEmptyCellRenderer`,props:{params:{}},setup(e){let t=e;return(e,n)=>(T(),a(`span`,Jw,i(t.params.value),1))}}),Xw={class:`n8n-oversized-value`},Zw=g({__name:`OversizedCellRenderer`,setup(e){let t=le();return(e,n)=>(T(),v(l(_e),{placement:`top`},{content:w(()=>[D(i(l(t).baseText(`dataTable.cell.oversized.tooltip`)),1)]),default:w(()=>[A(`span`,Xw,i(l(t).baseText(`dataTable.cell.oversized`)),1)]),_:1}))}});const Qw=e=>typeof e==`string`&&e.length>1e4,$w=e=>t=>{if(t.data?.id===`__n8n_add_row__`)return`add-row-cell`;if(t.column.getUserProvidedColDef()?.cellDataType===`boolean`)return`boolean-cell`;let n=t.data?.[e.name];return Qw(n)?`oversized-cell`:``},eT=e=>t=>{if(t.data?.[e.name]===null||t.data?.[e.name]===void 0)return null;if(e.type===`date`){let n=t.data?.[e.name];if(typeof n==`string`)return new Date(n)}return t.data?.[e.name]},tT=e=>t=>{if(t.data?.id===`__n8n_add_row__`||e.id===`add-column`)return{};let n=t.data?.[e.name];if(n===void 0&&(n=null),n===null)return{component:Yw,params:{value:Ye}};if(n===``)return{component:Yw,params:{value:ze}};if(Qw(n))return{component:Zw}},nT=(e,t)=>n=>{let r=n.data[e.name];r===void 0&&(r=null);let i=n.newValue;return!Cw(i)||r===null&&i===``?!1:(t.value&&i===null&&(i=``),n.data[e.name]=i,!0)},rT=e=>({value:e.value??``,maxLength:999999999}),iT=e=>{let t=e.value;return t==null?``:tt.fromJSDate(t).toISO()??``};var aT=e=>{let t=e.toString().split(`.`);return t[0]=t[0].replace(Ie,` `),t.join(`.`)};const oT=e=>{let t=e.value;return t==null?``:aT(t)};var sT=e=>({displayKey:`null`,displayName:e.baseText(`dataTable.filters.isNull`),predicate:()=>!0,numberOfInputs:0}),cT=e=>({displayKey:`notNull`,displayName:e.baseText(`dataTable.filters.isNotNull`),predicate:()=>!0,numberOfInputs:0}),lT=e=>({displayKey:`isEmpty`,displayName:e.baseText(`dataTable.filters.isEmpty`),predicate:()=>!0,numberOfInputs:0}),uT=e=>({displayKey:`notEmpty`,displayName:e.baseText(`dataTable.filters.isNotEmpty`),predicate:()=>!0,numberOfInputs:0}),dT=e=>({displayKey:`between`,displayName:e.baseText(`dataTable.filters.between`),predicate:()=>!0,numberOfInputs:2}),fT=e=>({displayKey:`greaterThan`,displayName:e.baseText(`dataTable.filters.greaterThan`),predicate:()=>!0,numberOfInputs:1}),pT=e=>({displayKey:`greaterThanOrEqual`,displayName:e.baseText(`dataTable.filters.greaterThanOrEqual`),predicate:()=>!0,numberOfInputs:1}),mT=e=>({displayKey:`lessThan`,displayName:e.baseText(`dataTable.filters.lessThan`),predicate:()=>!0,numberOfInputs:1}),hT=e=>({displayKey:`lessThanOrEqual`,displayName:e.baseText(`dataTable.filters.lessThanOrEqual`),predicate:()=>!0,numberOfInputs:1}),gT=e=>({displayKey:`inRange`,displayName:e.baseText(`dataTable.filters.between`),predicate:()=>!0,numberOfInputs:2});const _T=e=>[`contains`,`equals`,`notEqual`,lT(e),uT(e),sT(e),cT(e)],vT=e=>[`equals`,`notEqual`,mT(e),hT(e),fT(e),pT(e),gT(e),sT(e),cT(e)],yT=e=>[`equals`,`notEqual`,mT(e),hT(e),fT(e),pT(e),dT(e),sT(e),cT(e)],bT=e=>[`empty`,{displayKey:`true`,displayName:e.baseText(`dataTable.filters.true`),numberOfInputs:0,predicate:()=>!0},{displayKey:`false`,displayName:e.baseText(`dataTable.filters.false`),numberOfInputs:0,predicate:()=>!0},sT(e),cT(e)],xT={defaultColDef:{filter:!0,filterParams:{maxNumConditions:1,buttons:[`reset`]}},excludedColumns:[`id`,`add-column`,`ag-Grid-SelectionColumn`]};var ST={contains:`ilike`,equals:`eq`,notEqual:`neq`,startsWith:`ilike`,endsWith:`ilike`,isEmpty:`eq`,notEmpty:`neq`,null:`eq`,notNull:`neq`,true:`eq`,false:`eq`},CT={equals:`eq`,notEqual:`neq`,lessThan:`lt`,lessThanOrEqual:`lte`,greaterThan:`gt`,greaterThanOrEqual:`gte`,null:`eq`,notNull:`neq`};function wT(e){let t=ST[e];if(!t)throw Error(`Unknown text type: ${e}`);return t}function TT(e){let t=CT[e];if(!t)throw Error(`Unknown number/date type: ${e}`);return t}const ET=({onDeleteColumn:e,onRenameColumn:t,onAddRowClick:n,onAddColumn:i,isTextEditorOpen:a,readOnly:o=r(()=>!1)})=>{let s=f([]),{mapToAGCellType:c}=Tw(),l=le(),u=(n,r={})=>{let i={colId:n.id,field:n.name,filter:!xT.excludedColumns.includes(n.id),headerName:n.name,sortable:!0,editable:e=>!o.value&&e.data?.id!==`__n8n_add_row__`&&!Qw(e.data?.[n.name]),resizable:!0,lockPinned:!0,headerComponent:Pw,headerComponentParams:{onDelete:e,onRename:t,allowMenuActions:!o.value,readOnly:o.value},cellEditorPopup:!1,cellDataType:c(n.type),cellClass:$w(n),valueGetter:eT(n),cellRendererSelector:tT(n),width:250};return n.type===`string`?(i.cellEditor=`agLargeTextCellEditor`,i.cellEditorPopup=!0,i.cellEditorPopupPosition=`over`,i.cellEditorParams=rT,i.valueSetter=nT(n,a),i.filterParams={filterOptions:_T(l)}):n.type===`date`?(i.cellEditorSelector=()=>({component:Rw}),i.valueFormatter=iT,i.cellEditorPopup=!0,i.dateComponent=zw,i.filterParams={filterOptions:vT(l)}):n.type===`number`?(i.valueFormatter=oT,i.filterParams={filterOptions:yT(l)}):n.type===`boolean`&&(i.filterParams={filterOptions:bT(l)}),{...i,...r}},d=e=>{let t={editable:!1,suppressMovable:!0,lockPinned:!0,lockPosition:`right`,headerComponentParams:{allowMenuActions:!1},cellClass:e=>e.data?.id===`__n8n_add_row__`?`add-row-cell`:`system-cell`,headerClass:`system-column`,width:250};return[u({index:0,id:`id`,name:`id`,type:`string`},{editable:!1,sortable:!0,suppressMovable:!0,lockPosition:!0,minWidth:60,maxWidth:60,resizable:!1,headerClass:`system-column`,headerComponentParams:{allowMenuActions:!1,showTypeIcon:!1},cellClass:e=>e.data?.id===`__n8n_add_row__`?`add-row-cell`:`id-column`,cellRendererSelector:e=>{if(e.value===`__n8n_add_row__`)return{component:qw,params:{onClick:n,disabled:o.value}}}}),...(0,Bw.default)(e,`index`).map(e=>u(e)),u({index:e.length+1,id:`createdAt`,name:`createdAt`,type:`date`},t),u({index:e.length+2,id:`updatedAt`,name:`updatedAt`,type:`date`},t),u({index:e.length+3,id:`add-column`,name:`Add Column`,type:`string`},{editable:!1,suppressMovable:!0,lockPinned:!0,lockPosition:`right`,resizable:!1,flex:1,headerComponent:Kw,headerComponentParams:{onAddColumn:i,disabled:o.value}})]};return{colDefs:s,createColumnDef:u,loadColumns:e=>{s.value=d(e)},deleteColumn:e=>{s.value=s.value.filter(t=>t.colId!==e)},insertColumnAtIndex:(e,t)=>{s.value.splice(t,0,e)},addColumn:e=>{s.value=[...s.value.slice(0,-1),u(e),...s.value.slice(-1)]},moveColumn:(e,t)=>{let n=e-1;if(!s.value[n])return;let r=ot(s.value.slice(1,-1).map((e,t)=>({column:e,index:t})),n,t).sort((e,t)=>e.index-t.index).map(({column:e})=>e);s.value=[s.value[0],...r,s.value[s.value.length-1]]}}},DT=({gridApi:e,readOnly:t=r(()=>!1)})=>{let n=f(new Set);return{selectedRowIds:n,selectedCount:r(()=>n.value.size),rowSelection:{mode:`multiRow`,enableClickSelection:!1,checkboxes:e=>e.data?.id!==He,isRowSelectable:e=>!t.value&&e.data?.id!==`__n8n_add_row__`,hideDisabledCheckboxes:!1},onSelectionChanged:()=>{let t=e.value.getSelectedNodes(),r=new Set;t.forEach(e=>{typeof e.data?.id==`number`&&r.add(e.data.id)}),n.value=r},handleClearSelection:()=>{n.value=new Set,e.value.deselectAll()}}},OT=({colDefs:e,rowData:t,deleteGridColumn:n,addGridColumn:r,setGridData:i,insertGridColumnAtIndex:a,moveGridColumn:o,dataTableId:s,projectId:c,gridApi:l,totalItems:u,setTotalItems:d,ensureItemOnPage:p,focusFirstEditableCell:m,toggleSave:h,currentPage:g,pageSize:_,currentSortBy:v,currentSortOrder:y,currentFilterJSON:b,searchQuery:x,handleClearSelection:S,selectedRowIds:C,handleCopyFocusedCell:w})=>{let T=le(),E=Pe(),ee=Ae(),te=st(),D=f(!1),ne=ke(),O=Tw(),re=e=>{let t=T.baseText(`generic.unknownError`);return e instanceof it?{httpStatus:e.httpStatusCode??500,message:e.message}:e instanceof Error?{httpStatus:500,message:e.message}:{httpStatus:500,message:t}};async function ie(r){let o=e.value.find(e=>e.colId===r);if(!o||await ee.confirm(T.baseText(`dataTable.deleteColumn.confirm.message`,{interpolate:{name:o.headerName??``}}),T.baseText(`dataTable.deleteColumn.confirm.title`),{confirmButtonText:T.baseText(`generic.delete`),cancelButtonText:T.baseText(`generic.cancel`)})!==`confirm`)return;let l=e.value.findIndex(e=>e.colId===r);n(r);let u=[...t.value];t.value=t.value.map(e=>{let{[o.field]:t,...n}=e;return n}),i({colDefs:e.value,rowData:t.value});try{await te.deleteDataTableColumn(s,c,r),ne.track(`User deleted data table column`,{column_id:r,column_type:o.cellDataType,data_table_id:s})}catch(n){E.showError(n,T.baseText(`dataTable.deleteColumn.error`)),a(o,l),t.value=u,i({colDefs:e.value,rowData:t.value})}}async function ae(n,r){let a=e.value.find(e=>e.colId===n);if(!a)return;let o=a.headerName,l=a.field;if(l){a.headerName=r,i({colDefs:e.value});try{h(!0),await te.renameDataTableColumn(s,c,n,r),a.field=r,l!==r&&(t.value=t.value.map(e=>{let t={...e};return t[r]=t[l],delete t[l],t})),i({colDefs:e.value,rowData:t.value}),ne.track(`User renamed data table column`,{column_id:n,column_type:a.cellDataType,data_table_id:s})}catch(t){a.headerName=o,i({colDefs:e.value});let n=re(t);n.httpStatus===409?E.showError(Error(n.message),T.baseText(`dataTable.column.alreadyExistsError`)):E.showError(t,T.baseText(`dataTable.renameColumn.error`))}finally{h(!1)}}}async function oe(n){try{let a=await te.addDataTableColumn(s,c,n);return r(a),t.value=t.value.map(e=>({...e,[a.name]:null})),i({colDefs:e.value,rowData:t.value}),ne.track(`User added data table column`,{column_id:a.id,column_type:a.type,data_table_id:s}),{success:!0,httpStatus:200}}catch(e){let t=re(e);return{success:!1,httpStatus:t.httpStatus,errorMessage:t.message}}}let k=async t=>{if(!t.finished||t.source!==`uiColumnMoved`||t.toIndex===void 0||!t.column)return;let n=e.value.findIndex(e=>e.colId===t.column.getColId()),r=t.toIndex-2;try{await te.moveDataTableColumn(s,c,t.column.getColId(),r),o(n,r)}catch(e){E.showError(e,T.baseText(`dataTable.moveColumn.error`)),l.value.moveColumnByIndex(t.toIndex,n+1)}};async function A(){try{await p(u.value+1),D.value=!0,h(!0);let e=await te.insertEmptyRow(s,c);t.value.push(e),d(u.value+1),i({rowData:t.value}),m(e.id),ne.track(`User added row to data table`,{data_table_id:s})}catch(e){E.showError(e,T.baseText(`dataTable.addRow.error`))}finally{h(!1),D.value=!1}}let se=async e=>{let{data:t,api:n,oldValue:r,colDef:i}=e,a=String(i.field??``);if(!a)return;let o=e.data[a],l=ww(i.cellDataType)?O.mapToDataTableColumnType(i.cellDataType):void 0;if(o===void 0||Iw(r,o,l))return;if(typeof t.id!=`number`)throw Error(`Expected row id to be a number`);let u=t.id;try{h(!0),await te.updateRow(s,c,u,{[a]:o}),ne.track(`User edited data table content`,{data_table_id:s,column_id:i.colId,column_type:i.cellDataType})}catch(e){let i=Cw(r)?r:null,o={...t,[a]:i};n.applyTransaction({update:[o]}),E.showError(e,T.baseText(`dataTable.updateRow.error`))}finally{h(!1)}};async function ce(){try{D.value=!0;let e=await te.fetchDataTableContent(s,c,g.value,_.value,`${v.value}:${y.value}`,b?.value,x?.value);t.value=e.data,d(e.count),i({rowData:t.value}),S()}catch(e){E.showError(e,T.baseText(`dataTable.fetchContent.error`))}finally{D.value=!1}}let ue=async()=>{if(C.value.size!==0&&await ee.confirm(T.baseText(`dataTable.deleteRows.confirmation`,{adjustToNumber:C.value.size,interpolate:{count:C.value.size}}),T.baseText(`dataTable.deleteRows.title`),{confirmButtonText:T.baseText(`generic.delete`),cancelButtonText:T.baseText(`generic.cancel`)})===`confirm`)try{h(!0);let e=Array.from(C.value);await te.deleteRows(s,c,e),await ce(),ne.track(`User deleted rows in data table`,{data_table_id:s,deleted_row_count:e.length})}catch(e){E.showError(e,T.baseText(`dataTable.deleteRows.error`))}finally{h(!1)}};return{onDeleteColumn:ie,onRenameColumn:ae,onAddColumn:oe,onColumnMoved:k,onAddRowClick:A,contentLoading:D,onCellValueChanged:se,fetchDataTableRows:ce,handleDeleteSelected:ue,onCellKeyDown:async e=>{let t=e.event,n=t.target,r=e.column.getColId()===`ag-Grid-SelectionColumn`;if(!(e.api.getEditingCells().length>0||n instanceof HTMLInputElement&&!r)){if((t.metaKey||t.ctrlKey)&&t.key.toLowerCase()===`c`){t.preventDefault(),await w(e);return}if(t.key===`Escape`){S();return}t.key!==`Delete`&&t.key!==`Backspace`||C.value.size===0||(t.preventDefault(),await ue())}}}};function kT(e,t){let n=e.filter??null;return typeof e.filter==`string`?e.type===`startsWith`?n=`${e.filter}%`:e.type===`endsWith`?n=`%${e.filter}`:e.type===`contains`&&(n=e.filter):e.type===`isEmpty`||e.type===`notEmpty`?n=``:e.type===`null`||e.type===`notNull`?n=null:e.type===`true`?n=!0:e.type===`false`&&(n=!1),{columnName:t,condition:wT(e.type),value:n}}function AT(e,t){let n=e.filter??null;return e.type===`between`?[{columnName:t,condition:`gte`,value:e.filter??null},{columnName:t,condition:`lte`,value:e.filterTo??null}]:((e.type===`null`||e.type===`notNull`)&&(n=null),[{columnName:t,condition:TT(e.type),value:n}])}function jT(e,t){let n=[],r=e.filter??null;if(e.type===`null`||e.type===`notNull`)r=null,n.push({columnName:t,condition:TT(e.type),value:r});else if(e.dateFrom&&(r=new Date(String(e.dateFrom)).toISOString()),e.type===`inRange`){if(e.dateFrom&&e.dateTo){let r=new Date(String(e.dateFrom)).toISOString(),i=new Date(String(e.dateTo)).toISOString();n.push({columnName:t,condition:`gte`,value:r}),n.push({columnName:t,condition:`lte`,value:i})}}else n.push({columnName:t,condition:TT(e.type),value:r});return n}const MT=({gridApi:e,colDefs:t})=>{let n=f(void 0);function i(e,t){let n=[],r=new Map;t.forEach(e=>{e.colId&&e.field?r.set(e.colId,e.field):e.field&&r.set(e.field,e.field)});for(let[t,i]of Object.entries(e)){let e=r.get(t)??t;if(i.filterType||i.type)switch(i.filterType){case`text`:n.push(kT(i,e));break;case`number`:n.push(...AT(i,e));break;case`date`:n.push(...jT(i,e));break;default:break}}if(n.length!==0)return{type:`and`,filters:n}}return{onFilterChanged:()=>{let r=i(e.value.getFilterModel(),t.value);n.value=r?JSON.stringify(r):void 0},currentFilterJSON:n,hasActiveFilters:r(()=>!!n.value)}};var NT=De(g({__name:`DataTableTable`,props:{dataTable:{},search:{},readOnly:{type:Boolean}},emits:[`toggleSave`],setup(e,{expose:t,emit:n}){vw();let i=e,o=n,s=ie(`gridContainerRef`),c=le(),{debounce:u}=at(),d=f([]),p=r(()=>d.value.length>0),h=bw({gridContainerRef:s,defaultSortColumn:`id`,pinnedBottomRowId:He,defaultColDef:r(()=>({...xT.defaultColDef,editable:!i.readOnly})).value}),g=ET({onDeleteColumn:re,onRenameColumn:ae,onAddRowClick:se,onAddColumn:oe,isTextEditorOpen:h.isTextEditorOpen,readOnly:r(()=>i.readOnly??!1)}),{onFilterChanged:_,currentFilterJSON:v}=MT({gridApi:h.gridApi,colDefs:g.colDefs}),{currentPage:y,pageSize:b,totalItems:x,pageSizeOptions:C,ensureItemOnPage:w,setTotalItems:E,setCurrentPage:ee,setPageSize:te}=yw({onChange:ce}),D=DT({gridApi:h.gridApi,readOnly:r(()=>i.readOnly??!1)}),O=OT({colDefs:g.colDefs,rowData:d,deleteGridColumn:g.deleteColumn,setGridData:h.setGridData,insertGridColumnAtIndex:g.insertColumnAtIndex,dataTableId:i.dataTable.id,projectId:i.dataTable.projectId,addGridColumn:g.addColumn,moveGridColumn:g.moveColumn,gridApi:h.gridApi,totalItems:x,setTotalItems:E,ensureItemOnPage:w,focusFirstEditableCell:h.focusFirstEditableCell,toggleSave:o.bind(null,`toggleSave`),currentPage:y,pageSize:b,currentSortBy:h.currentSortBy,currentSortOrder:h.currentSortOrder,handleClearSelection:D.handleClearSelection,selectedRowIds:D.selectedRowIds,handleCopyFocusedCell:h.handleCopyFocusedCell,currentFilterJSON:v,searchQuery:r(()=>i.search)});async function re(e){await O.onDeleteColumn(e)}async function ae(e,t){await O.onRenameColumn(e,t)}async function oe(e){return await O.onAddColumn(e)}async function se(){await O.onAddRowClick()}async function ce(){await O.fetchDataTableRows()}let ue=async e=>{h.onGridReady(e),g.loadColumns(i.dataTable.columns),h.setGridData({colDefs:g.colDefs.value}),await O.fetchDataTableRows()},de=`<div class="no-rows-overlay ag-overlay-no-rows-center" data-test-id="data-table-no-rows-overlay">${c.baseText(`dataTable.noRows`)}</div>`;S([h.currentSortBy,h.currentSortOrder],async()=>{await ee(1)}),S(v,async()=>{await ee(1)});let fe=u(async()=>{await ee(1)},{debounceTime:250,trailing:!0});return S(()=>i.search,()=>{fe()}),t({addRow:O.onAddRowClick,addColumn:O.onAddColumn}),(e,t)=>(T(),a(`div`,{class:k(e.$style.wrapper)},[A(`div`,{ref_key:`gridContainerRef`,ref:s,class:k([e.$style[`grid-container`],{[e.$style[`has-records`]]:p.value}]),"data-test-id":`data-table-grid`},[m(l(hw),{style:{width:`100%`},"dom-layout":`autoHeight`,"row-height":l(33),"header-height":l(36),"animate-rows":!1,theme:l(gw),"suppress-drag-leave-hides-columns":!0,loading:l(O).contentLoading.value,"row-selection":l(D).rowSelection,"get-row-id":e=>String(e.data.id),"stop-editing-when-cells-lose-focus":!0,"undo-redo-cell-editing":!0,"suppress-multi-sort":!0,"overlay-no-rows-template":de,onGridReady:ue,onCellValueChanged:l(O).onCellValueChanged,onColumnMoved:l(O).onColumnMoved,onCellClicked:l(h).onCellClicked,onCellEditingStarted:l(h).onCellEditingStarted,onCellEditingStopped:l(h).onCellEditingStopped,onColumnHeaderClicked:l(h).resetLastFocusedCell,onSelectionChanged:l(D).onSelectionChanged,onSortChanged:t[0]||=e=>l(h).onSortChanged(e,l(g).colDefs.value),onCellKeyDown:l(O).onCellKeyDown,onFilterChanged:l(_)},null,8,[`row-height`,`header-height`,`theme`,`loading`,`row-selection`,`get-row-id`,`onCellValueChanged`,`onColumnMoved`,`onCellClicked`,`onCellEditingStarted`,`onCellEditingStopped`,`onColumnHeaderClicked`,`onSelectionChanged`,`onCellKeyDown`,`onFilterChanged`]),A(`div`,{class:k(e.$style.footer)},[m(l(ge),{"current-page":l(y),"onUpdate:currentPage":[t[1]||=e=>ne(y)?y.value=e:null,l(ee)],"page-size":l(b),"onUpdate:pageSize":t[2]||=e=>ne(b)?b.value=e:null,"data-test-id":`data-table-content-pagination`,background:``,total:l(x),"page-sizes":l(C),layout:`total, prev, pager, next, sizes`,onSizeChange:t[3]||=e=>l(te)(e)},null,8,[`current-page`,`page-size`,`total`,`page-sizes`,`onUpdate:currentPage`])],2)],2),m(pt,{"selected-count":l(D).selectedCount.value,onDeleteSelected:l(O).handleDeleteSelected,onClearSelection:l(D).handleClearSelection},null,8,[`selected-count`,`onDeleteSelected`,`onClearSelection`])],2))}}),[[`__cssModules`,{$style:{wrapper:`_wrapper_1rg4f_125`,"has-records":`_has-records_1rg4f_246`,"grid-container":`_grid-container_1rg4f_271`,footer:`_footer_1rg4f_281`}}]]),PT={key:0,"data-test-id":`data-table-details-loading`},FT={key:1},IT=De(g({__name:`DataTableDetailsView`,props:{id:{},projectId:{}},setup(e){let t=e,n=Pe(),s=le(),c=Ee(),u=je(),d=st(),h=Ne(),g=r(()=>h.preferences.branchReadOnly),_=f(!1),v=f(!1),y=f(null),x=f(),S=f(``),{debounce:C}=at(),E=async e=>{e instanceof Error||(e=Error(String(s.baseText(`dataTable.getDetails.error`)))),n.showError(e,s.baseText(`dataTable.getDetails.error`)),await c.push({name:qe,params:{projectId:t.projectId}})},ee=async()=>{_.value=!0;try{let e=await d.fetchOrFindDataTable(t.id,t.projectId);e?(y.value=e,u.set(`${s.baseText(`dataTable.dataTables`)} > ${e.name}`)):await E(Error(s.baseText(`dataTable.notFound`)))}catch(e){await E(e)}finally{_.value=!1}},te=C(e=>{v.value=e},{debounceTime:50,trailing:!0}),ne=C(()=>{v.value=!1},{debounceTime:$e,trailing:!0}),O=e=>{e?te(!0):ne()},re=async e=>x.value?await x.value.addColumn(e):{success:!1,errorMessage:s.baseText(`dataTable.error.tableNotInitialized`)},ie=async()=>{_.value=!0;try{let e=await d.fetchDataTableDetails(t.id,t.projectId);e?(y.value=e,u.set(`${s.baseText(`dataTable.dataTables`)} > ${e.name}`)):await E(Error(s.baseText(`dataTable.notFound`)))}catch(e){n.showError(e,s.baseText(`dataTable.getDetails.error`))}finally{_.value=!1}};return b(async()=>{u.set(s.baseText(`dataTable.dataTables`)),await ee(),ut.on(`pull`,ie)}),p(()=>{ut.off(`pull`,ie)}),(e,t)=>(T(),a(`div`,{class:k(e.$style[`data-table-details-view`]),"data-test-id":`data-table-details-view`},[_.value?(T(),a(`div`,PT,[m(l(fe),{variant:`h1`,loading:!0,rows:1,"shrink-last":!1,class:k(e.$style[`header-loading`])},null,8,[`class`]),m(l(fe),{loading:!0,variant:`h1`,rows:10,"shrink-last":!1})])):y.value?(T(),a(`div`,FT,[A(`div`,{class:k(e.$style.header)},[m(ht,{"data-table":y.value,"read-only":g.value},null,8,[`data-table`,`read-only`]),v.value?(T(),a(`div`,{key:0,class:k(e.$style.saving)},[m(l(pe)),m(l(be),null,{default:w(()=>[D(i(l(s).baseText(`generic.saving`))+`...`,1)]),_:1})],2)):o(``,!0),A(`div`,{class:k(e.$style.actions)},[m(l(Ce),{modelValue:S.value,"onUpdate:modelValue":t[0]||=e=>S.value=e,"data-test-id":`data-table-search-input`,size:`small`,class:k(e.$style.search),placeholder:l(s).baseText(`generic.search`)},{prefix:w(()=>[m(l(ve),{icon:`search`})]),suffix:w(()=>[m(l(_e),{placement:`bottom`},{content:w(()=>[D(i(l(s).baseText(`dataTable.search.dateSearchInfo`)),1)]),default:w(()=>[A(`span`,{class:k(e.$style.infoIcon)},[m(l(ve),{icon:`info`,size:`small`})],2)]),_:1})]),_:1},8,[`modelValue`,`class`,`placeholder`]),m(l(me),{"data-test-id":`data-table-header-add-row-button`,disabled:g.value,onClick:x.value?.addRow},{default:w(()=>[D(i(l(s).baseText(`dataTable.addRow.label`)),1)]),_:1},8,[`disabled`,`onClick`]),m(Kw,{"use-text-trigger":!0,"popover-id":`ds-details-add-column-popover`,params:{onAddColumn:re},disabled:g.value},null,8,[`params`,`disabled`])],2)],2),A(`div`,{class:k(e.$style.content)},[m(NT,{ref_key:`dataTableTableRef`,ref:x,"data-table":y.value,search:S.value,"read-only":g.value,onToggleSave:O},null,8,[`data-table`,`search`,`read-only`])],2)])):o(``,!0)],2))}}),[[`__cssModules`,{$style:{"data-table-details-view":`_data-table-details-view_z1555_125`,"header-loading":`_header-loading_z1555_134`,header:`_header_z1555_134`,saving:`_saving_z1555_149`,actions:`_actions_z1555_156`,search:`_search_z1555_162`,infoIcon:`_infoIcon_z1555_166`}}]]);export{IT as default};
//# sourceMappingURL=DataTableDetailsView-C2XPvoxa.js.map