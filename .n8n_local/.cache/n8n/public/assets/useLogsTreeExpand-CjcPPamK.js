(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`884ca9c5-36ac-462f-9367-2366d6da23c8`,e._sentryDebugIdIdentifier=`sentry-dbid-884ca9c5-36ac-462f-9367-2366d6da23c8`)})()}catch{}import{o as e,t}from"./chunk-Din3qlHY.js";import{C as n,Cn as r,D as i,E as a,G as o,Gt as s,It as c,M as l,P as u,T as d,Vt as f,W as p,_ as m,_t as h,bn as g,bt as _,et as v,h as y,it as b,j as x,mt as ee,vn as S,w as C,zt as w}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{B as te,V as T,bt as ne,m as E,st as D,yt as O}from"./_MapCache-DjbOQyB7.js";import{Hi as re,Mi as k,Oi as A,Ui as j,Vi as M,m as N,wi as P}from"./src-CppJvwzX.js";import{t as F}from"./_plugin-vue_export-helper-B_J4Khre.js";import{$ as ie,C as ae,It as oe,Qi as I,Vt as L,c as R,d as z,l as B,s as se,u as V,yr as ce,zr as H}from"./users.store-pCkD7Zo0.js";import{$i as le,An as ue,Fo as de,Gt as fe,Lo as pe,Oi as U,do as me,ea as he,ki as ge,so as _e,tl as ve}from"./constants-D1jZwsUK.js";import{C as ye,O as be,k as xe,x as Se,y as Ce}from"./merge-CKxbv8m_.js";import{w as we}from"./_baseOrderBy-El3qbNHQ.js";import{t as Te}from"./NodeIcon-Dv1e4Lvu.js";import{t as Ee}from"./useRunWorkflow-DzzlHC01.js";import{a as De,i as Oe}from"./dateFormatter-C82w-7IH.js";import{t as W}from"./AnimatedSpinner-BEM3aFx0.js";var ke=t(((e,t)=>{var n=pe(),r=de(),i=xe(),a=E(),o=Ce(),s=be(),c=Se(),l=ye(),u=`[object Map]`,d=`[object Set]`,f=Object.prototype.hasOwnProperty;function p(e){if(e==null)return!0;if(o(e)&&(a(e)||typeof e==`string`||typeof e.splice==`function`||s(e)||l(e)||i(e)))return!e.length;var t=r(e);if(t==u||t==d)return!e.size;if(c(e))return!n(e).length;for(var p in e)if(f.call(e,p))return!1;return!0}t.exports=p})),G=e(N(),1),Ae=e(ke(),1);function K(e){return e.reduce((e,t)=>{let n=t?.json?.tokenUsage??t?.json?.tokenUsageEstimate;return n?R(e,{...n,isEstimate:!!t?.json.tokenUsageEstimate}):e},B)}function je(e){return K(Object.values(e.data??{}).flat().flat())}function Me(e,t,n,r,i=[]){return{parent:t.parent,node:e,id:`${t.workflow.id}:${e.id}:${[...t.ancestorRunIndexes,n].join(`:`)}`,runIndex:n,runData:r,children:i,consumedTokens:r?je(r):B,workflow:t.workflow,executionId:t.executionId,execution:t.data,isSubExecution:t.isSubExecution}}function Ne(e,t,n,r){let i=Q(e);if(i!==void 0){let t=r.workflows[i.workflowId],a=r.subWorkflowData[i.executionId];return!t||!a?[]:Fe(void 0,{...r,parent:e,ancestorRunIndexes:[...r.ancestorRunIndexes,n??0],workflow:t,executionId:i.executionId,data:a,isSubExecution:!0})}let a=r.workflow.getParentNodes(t.name,`ALL_NON_MAIN`,1);function o(r){return(r?.previousNode===t.name||$(e)&&r?.previousNode===`PartialExecutionToolExecutor`)&&(n===void 0||(r.previousNodeRun??0)===n)}return a.flatMap(t=>(r.data.resultData.runData[t]??[]).flatMap((i,a)=>{if(!(i.source.some(e=>e!==null)?i.source.some(o):n===void 0||a===n))return[];let s=r.workflow.getNode(t);return s?q(s,i,a,{...r,ancestorRunIndexes:[...r.ancestorRunIndexes,n??0],parent:e}):[]}))}function q(e,t,n,r){let i=Me(e,r,n??0,t),a=Ne(i,e,n,r).sort(Z);return(t===void 0||e.disabled)&&a.length===0?[]:(i.children=a,[i])}function J(...e){return e.reduce(R,B)}function Y(e,t){let n=e.executionId;function r(e){return!t&&e.executionId!==n?B:J(e.consumedTokens,...e.children.map(r))}return r(e)}function Pe(e){return X(e=>!!e.runData?.error,e)||X(e=>e.node.type===`@n8n/n8n-nodes-langchain.agent`||e.parent?.node.type===`@n8n/n8n-nodes-langchain.agent`&&$(e.parent),e)||e[e.length-1]}function Fe(e,t){let n=t.data.resultData.runData,r=Object.entries(n).flatMap(([r,i])=>{let a=t.workflow.getNode(r);if(a===null||e&&e.rootNodeId!==a.id)return[];let o=t.workflow.getChildNodes(r,`ALL_NON_MAIN`);if(o.length===0){let t=i.map((e,t)=>({node:a,task:e,runIndex:t,nodeHasMultipleRuns:i.length>1}));return e?t.filter(t=>t.runIndex===e.rootNodeRunIndex):t}if(o.some(e=>(n[e]??[]).length>0))return[];let s=t.workflow.getNode(o[0]);return s===null?[]:[{node:s,nodeHasMultipleRuns:!1}]}),i=new Set;return r.filter(e=>e.task===void 0?i.has(e.node.id)?!1:(i.add(e.node.id),!0):!0).flatMap(({node:e,runIndex:n,task:r,nodeHasMultipleRuns:i})=>q(e,r,i?n:void 0,t)).sort(Z)}function Ie(e,t,n={},r={},i){return Fe(i,{parent:void 0,ancestorRunIndexes:[],executionId:t.id,workflow:e,workflows:n,data:t.data??le(),subWorkflowData:r,isSubExecution:!1})}function Le(e,t){return X(t=>t.id===e,t)}function X(e,t){for(let n of t){if(e(n))return n;let t=X(e,n.children);if(t)return t}}function Re(e,t,n){switch(e.type){case`initial`:return n?void 0:Pe(t);case`none`:return;case`selected`:{let r=X(t=>t.id===e.entry.id,t);if(r===void 0&&!n)for(let n=e.entry.runIndex-1;n>=0;n--){let r=X(t=>t.workflow.id===e.entry.workflow.id&&t.node.id===e.entry.node.id&&t.runIndex===n,t);if(r!==void 0)return r}return r}}}function ze(e,t,n=[]){for(let r of e)n.push(r),t[r.id]||ze(r.children,t,n);return n}function Be(e,t,n){let r=e.findIndex(e=>e.id===t);return r===-1?void 0:e[r+n]}function Z(e,t){return e.runData===void 0?e.children.length>0?Z(e.children[0],t):0:t.runData===void 0?t.children.length>0?Z(e,t.children[0]):0:e.runData.startTime===t.runData.startTime?e.runData.executionIndex-t.runData.executionIndex:e.runData.startTime-t.runData.startTime}function Ve(e,t){if(!t.data)return t;let n=[...new Set(Object.keys(e).concat(Object.keys(t.data.resultData.runData))).values()],r=Object.fromEntries(n.map(n=>{let r=t.data?.resultData.runData[n]??[];return[n,r.concat((e[n]??[]).filter(e=>r.some(t=>t.executionIndex===e.executionIndex&&t.startTime===e.startTime)?!1:r.every(t=>t.startTime<e.startTime)).map(e=>({...e,executionTime:0,executionStatus:`running`})))]}));return{...t,data:{...t.data,resultData:{...t.data.resultData,runData:r}}}}function He(e){return Q(e)!==void 0}function Q(e){let t=e.runData?.metadata?.subExecution;return t?{workflowId:t.workflowId,executionId:t.executionId}:ge(e.runData?.error)?.subExecution}function Ue(e){let t=0,n=e;for(;n.parent!==void 0;)n=n.parent,t++;return t}function We(e){return e.type===`@n8n/n8n-nodes-langchain.manualChatTrigger`&&e.typeVersion<1.1?`input`:(e.type,`chatInput`)}function Ge(e,t){let n=e.nodes.find(z);if(n===void 0)return;let r=We(n),i=(t.runData[n.name]??[])[0],a=i?.data?.[_e.Main]?.[0]?.[0]?.json?.[r];if(!(i===void 0||typeof a!=`string`))return{text:a,sender:`user`,id:H()}}function Ke(e,t,n){let r=e.lastNodeExecuted;if(!r)return;let i=(0,G.default)(e.runData,r)??[],a=i[i.length-1],o;if((0,G.default)(a,`error`))o=`[ERROR: `+(0,G.default)(a,`error.message`)+`]`;else{let e=(0,G.default)(a,`data.main`),t;if(e&&Array.isArray(e)){for(let n of e)if(n?.[0]?.json){let e=n[0].json;if(t=qe(e),t)break}}if(t??=n,!t)return;o=t}return{text:o,sender:`bot`,id:t??H()}}function qe(e){if(!e||(0,Ae.default)(e))return;let t=[`output`,`text`,`response.text`,`message`].find(t=>(0,G.default)(e,t));if(!t)return JSON.stringify(e,null,2);let n=(0,G.default)(e,t);return typeof n==`object`?"```json\n"+JSON.stringify(n,null,2)+"\n```":n?.toString()??``}function Je(e,t){if(!e?.data)return[];let n=Ge(e.workflowData,e.data.resultData),r=Ke(e.data.resultData,e.id,t);return[...n?[n]:[],...r?[r]:[]]}async function Ye(e){if(!e||e.length===0)return[];let t=e.map(async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t({name:e.name,type:e.type,data:r.result}),r.onerror=()=>n(Error(`Error reading file: ${r.error?.message??`Unknown error`}`)),r.readAsDataURL(e)}));return await Promise.all(t)}function Xe(e){return e.parent!==void 0&&e.parent.executionId===e.executionId}function $(e){return e.runData===void 0}function Ze(e){return{...e,data:he({...e.data,resultData:{...e.data?.resultData,runData:Object.fromEntries(Object.entries(e.data?.resultData.runData??{}).map(([e,t])=>[e,[...t]]))}})}}var Qe=u({__name:`ConsumedTokensDetails`,props:{consumedTokens:{}},setup(e){let t=O();return(n,a)=>(v(),i(`div`,null,[l(s(M),{bold:!0,size:`small`},{default:_(()=>[x(r(s(t).baseText(`runData.aiContentBlock.tokens.prompt`))+` `+r(s(t).baseText(`runData.aiContentBlock.tokens`,{interpolate:{count:s(V)(e.consumedTokens,`prompt`)}})),1)]),_:1}),a[0]||=C(`br`,null,null,-1),l(s(M),{bold:!0,size:`small`},{default:_(()=>[x(r(s(t).baseText(`runData.aiContentBlock.tokens.completion`))+` `+r(s(t).baseText(`runData.aiContentBlock.tokens`,{interpolate:{count:s(V)(e.consumedTokens,`completion`)}})),1)]),_:1})]))}}),$e=u({__name:`LogsViewConsumedTokenCountText`,props:{consumedTokens:{}},setup(e){let t=O();return(n,i)=>e.consumedTokens===void 0?a(``,!0):(v(),d(s(A),{key:0,enterable:!1},{content:_(()=>[l(Qe,{"consumed-tokens":e.consumedTokens},null,8,[`consumed-tokens`])]),default:_(()=>[C(`span`,null,r(s(t).baseText(`runData.aiContentBlock.tokens`,{interpolate:{count:s(V)(e.consumedTokens,`total`)}})),1)]),_:1}))}}),et={key:0},tt=F(u({__name:`LogsViewNodeName`,props:{name:{},isError:{type:Boolean},isDeleted:{type:Boolean}},setup(e){return(t,n)=>(v(),d(s(M),{tag:`div`,bold:!0,size:`small`,class:S(t.$style.name),color:e.isError?`danger`:void 0},{default:_(()=>[e.isDeleted?(v(),i(`del`,et,r(e.name),1)):(v(),i(m,{key:1},[x(r(e.name),1)],64))]),_:1},8,[`class`,`color`]))}}),[[`__cssModules`,{$style:{name:`_name_iqwm2_125`}}]]),nt=e(ie(),1),rt=[`aria-expanded`,`aria-selected`],it=F(u({__name:`LogsOverviewRow`,props:{data:{},isSelected:{type:Boolean},isReadOnly:{type:Boolean},shouldShowTokenCountColumn:{type:Boolean},isCompact:{type:Boolean},latestInfo:{},expanded:{type:Boolean},canOpenNdv:{type:Boolean}},emits:[`toggleExpanded`,`toggleSelected`,`triggerPartialExecution`,`openNdv`],setup(e,{emit:t}){let c=e,u=t,f=ee(`containerRef`),p=O(),w=te({interval:1e3}),T=ae(),E=n(()=>T.getNodeType(c.data.node.type)),D=n(()=>c.data.runData?.executionStatus===`running`),A=n(()=>c.data.runData?.executionStatus===`waiting`),N=n(()=>!D.value&&!A.value),P=n(()=>!!c.data.runData?.error),F=n(()=>N.value?`logs.overview.body.summaryText.in`:`logs.overview.body.summaryText.for`),ie=n(()=>{if(c.data.runData===void 0)return`—`;let e=new Date(c.data.runData.startTime);return p.baseText(`logs.overview.body.started`,{interpolate:{time:`${De(e,!0)}, ${Oe(e)}`}})}),oe=n(()=>(0,nt.default)(c.data.runData?.executionStatus??``)),I=n(()=>c.data.runData?p.displayTimer(N.value?c.data.runData.executionTime:Math.floor((w.value-c.data.runData.startTime)/1e3)*1e3,!0):void 0),L=n(()=>c.shouldShowTokenCountColumn?Y(c.data,!1):void 0),R=n(()=>c.data.children.length>0||He(c.data)),z=n(()=>{let e=[],t=c.data;for(;t.parent!==void 0;){let n=t.parent?.children??[],r=n[n.length-1];e.unshift({straight:r?.id!==t.id,curved:t===c.data}),t=t.parent}return e});return h(()=>c.isSelected,e=>{o(()=>{if(e){let e=document.activeElement;e?.getAttribute(`data-test-id`)===`chat-input`||e?.closest(`[data-test-id="canvas-chat"]`)!==null||f.value?.focus()}})},{immediate:!0}),(t,n)=>(v(),i(`div`,{ref:`containerRef`,role:`treeitem`,tabindex:`-1`,"aria-expanded":c.data.children.length>0&&c.expanded,"aria-selected":c.isSelected,class:S({[t.$style.container]:!0,[t.$style.compact]:c.isCompact,[t.$style.error]:P.value,[t.$style.selected]:c.isSelected}),onClick:n[3]||=y(e=>u(`toggleSelected`),[`stop`])},[(v(!0),i(m,null,b(z.value,(e,n)=>(v(),i(`div`,{key:n,class:S({[t.$style.indent]:!0,[t.$style.connectorCurved]:e.curved,[t.$style.connectorStraight]:e.straight})},null,2))),128)),C(`div`,{class:S(t.$style.background),style:g({"--indent-depth":z.value.length})},null,6),l(Te,{"node-type":E.value,size:16,class:S(t.$style.icon)},null,8,[`node-type`,`class`]),l(tt,{class:S(t.$style.name),name:e.latestInfo?.name??c.data.node.name,"is-error":P.value,"is-deleted":e.latestInfo?.deleted??!1},null,8,[`class`,`name`,`is-error`,`is-deleted`]),e.isCompact?a(``,!0):(v(),d(s(M),{key:0,tag:`div`,color:`text-light`,size:`small`,class:S(t.$style.timeTook)},{default:_(()=>[I.value===void 0?(v(),i(m,{key:1},[x(`—`)],64)):(v(),d(s(ne),{key:0,keypath:F.value,scope:`global`},{status:_(()=>[l(s(M),{color:P.value?`danger`:void 0,bold:P.value,size:`small`},{default:_(()=>[D.value?(v(),d(W,{key:0,class:S(t.$style.statusTextIcon)},null,8,[`class`])):A.value?(v(),d(s(j),{key:1,icon:`status-waiting`,class:S(t.$style.statusTextIcon)},null,8,[`class`])):P.value?(v(),d(s(j),{key:2,icon:`triangle-alert`,class:S(t.$style.statusTextIcon)},null,8,[`class`])):a(``,!0),x(` `+r(oe.value),1)]),_:1},8,[`color`,`bold`])]),time:_(()=>[x(r(I.value),1)]),_:1},8,[`keypath`]))]),_:1},8,[`class`])),e.isCompact?a(``,!0):(v(),d(s(M),{key:1,tag:`div`,color:`text-light`,size:`small`,class:S(t.$style.startedAt)},{default:_(()=>[x(r(ie.value),1)]),_:1},8,[`class`])),!e.isCompact&&L.value!==void 0?(v(),d(s(M),{key:2,tag:`div`,color:`text-light`,size:`small`,class:S(t.$style.consumedTokens)},{default:_(()=>[L.value.totalTokens>0&&(c.data.children.length===0||!c.expanded)?(v(),d($e,{key:0,"consumed-tokens":L.value},null,8,[`consumed-tokens`])):a(``,!0)]),_:1},8,[`class`])):a(``,!0),P.value&&e.isCompact?(v(),d(s(j),{key:3,size:`medium`,color:`danger`,icon:`triangle-alert`,class:S(t.$style.compactErrorIcon)},null,8,[`class`])):a(``,!0),e.canOpenNdv&&(!e.isCompact||!c.latestInfo?.deleted)?(v(),d(s(k),{key:4,variant:`subtle`,size:`small`,icon:`square-pen`,"icon-size":`medium`,style:g({visibility:c.data.isSubExecution?`hidden`:void 0}),disabled:c.latestInfo?.deleted,class:S(t.$style.openNdvButton),"aria-label":s(p).baseText(`logs.overview.body.open`),onClick:n[0]||=y(e=>u(`openNdv`),[`stop`])},null,8,[`style`,`disabled`,`class`,`aria-label`])):a(``,!0),!e.isCompact||!c.isReadOnly&&!c.latestInfo?.deleted&&!c.latestInfo?.disabled?(v(),d(s(k),{key:5,variant:`subtle`,size:`small`,icon:`play`,"aria-label":s(p).baseText(`logs.overview.body.run`),class:S([t.$style.partialExecutionButton,z.value.length>0?t.$style.unavailable:``]),disabled:c.latestInfo?.deleted||c.latestInfo?.disabled,onClick:n[1]||=y(e=>u(`triggerPartialExecution`),[`stop`])},null,8,[`aria-label`,`class`,`disabled`])):a(``,!0),e.isCompact&&!R.value?(v(),i(m,{key:6},[D.value?(v(),d(W,{key:0,class:S(t.$style.statusIcon)},null,8,[`class`])):A.value?(v(),d(s(j),{key:1,icon:`status-waiting`,class:S(t.$style.statusIcon)},null,8,[`class`])):a(``,!0)],64)):a(``,!0),!e.isCompact||R.value?(v(),d(s(re),{key:7,variant:`subtle`,iconOnly:``,size:`small`,icon:c.expanded?`chevron-down`:`chevron-up`,"icon-size":`medium`,style:g({visibility:R.value?void 0:`hidden`}),class:S(t.$style.toggleButton),"aria-label":s(p).baseText(`logs.overview.body.toggleRow`),onClick:n[2]||=y(e=>u(`toggleExpanded`),[`stop`])},null,8,[`icon`,`style`,`class`,`aria-label`])):a(``,!0)],10,rt))}}),[[`__cssModules`,{$style:{container:`_container_zvanm_125`,background:`_background_zvanm_142`,selected:`_selected_zvanm_153`,error:`_error_zvanm_159`,indent:`_indent_zvanm_163`,connectorCurved:`_connectorCurved_zvanm_172`,connectorStraight:`_connectorStraight_zvanm_182`,icon:`_icon_zvanm_191`,name:`_name_zvanm_198`,timeTook:`_timeTook_zvanm_204`,statusTextIcon:`_statusTextIcon_zvanm_209`,startedAt:`_startedAt_zvanm_214`,consumedTokens:`_consumedTokens_zvanm_220`,compactErrorIcon:`_compactErrorIcon_zvanm_227`,partialExecutionButton:`_partialExecutionButton_zvanm_239`,openNdvButton:`_openNdvButton_zvanm_240`,compact:`_compact_zvanm_227`,unavailable:`_unavailable_zvanm_250`,toggleButton:`_toggleButton_zvanm_258`,statusIcon:`_statusIcon_zvanm_282`,placeholder:`_placeholder_zvanm_290`}}]]),at=F(u({__name:`LogsOverviewRows`,props:{selected:{},isReadOnly:{type:Boolean},isCompact:{type:Boolean},shouldShowTokenCountColumn:{type:Boolean},canOpenNdv:{type:Boolean},flatLogEntries:{},latestNodeInfo:{},execution:{}},emits:[`select`,`openNdv`,`toggleExpanded`],setup(e,{emit:t}){let r=t,a=Ee({router:P()}),c=n(()=>e.flatLogEntries.reduce((e,t,n,r)=>(e[t.id]=r[n+1]?.parent?.id===t.id,e),{})),l=T(f(()=>e.flatLogEntries),{itemHeight:32});async function u(t){let n=e.latestNodeInfo[t.node.id]?.name??t.node.name;n&&await a.runWorkflow({destinationNode:{nodeName:n,mode:`inclusive`}})}return h([()=>e.execution?.status===`running`,()=>e.flatLogEntries.length],async([t,n],[r])=>{await o(()=>{e.selected===void 0&&(t||r)&&l.scrollTo(n-1)})},{immediate:!0}),h(()=>e.selected?.id,async t=>{await o(()=>{if(t===void 0)return;let n=l.list.value.some(e=>e.data.id===t)?-1:e.flatLogEntries.findIndex(e=>e.id===t);n>=0&&l.scrollTo(n)})},{immediate:!0}),(t,n)=>(v(),i(`div`,p({class:t.$style.tree},s(l).containerProps),[C(`div`,p({role:`tree`},s(l).wrapperProps.value),[(v(!0),i(m,null,b(s(l).list.value,({data:t,index:n})=>(v(),d(it,{key:n,data:t,"is-read-only":e.isReadOnly,"is-selected":t.id===e.selected?.id,"is-compact":e.isCompact,"should-show-token-count-column":e.shouldShowTokenCountColumn,"latest-info":e.latestNodeInfo[t.node.id],expanded:c.value[t.id],"can-open-ndv":e.canOpenNdv,onToggleExpanded:e=>r(`toggleExpanded`,t),onOpenNdv:e=>r(`openNdv`,t),onTriggerPartialExecution:e=>u(t),onToggleSelected:n=>r(`select`,e.selected?.id===t.id?void 0:t)},null,8,[`data`,`is-read-only`,`is-selected`,`is-compact`,`should-show-token-count-column`,`latest-info`,`expanded`,`can-open-ndv`,`onToggleExpanded`,`onOpenNdv`,`onTriggerPartialExecution`,`onToggleSelected`]))),128))],16)],16))}}),[[`__cssModules`,{$style:{tree:`_tree_1j0rt_125`,container:`_container_1j0rt_130`,staticScrollBar:`_staticScrollBar_1j0rt_130`}}]]);function ot(e,t){let n=w(e.value);return h(e,D(e=>{n.value=e},t,!0,!0),{immediate:!0}),n}function st({isEnabled:e,filter:t}={}){let r=oe(),i=se(),a=L(),o=ce(),s=c(),l=n(()=>i.workflowExecutionData?.status===`running`&&Object.keys(i.workflowExecutionData.data?.resultData.runData??{}).length>1?ve:0),u=ot(s,l),d=n(()=>u.value?.response.workflowData),f=c({}),p=c({}),m=c(),g=n(()=>Object.values(m.value?.nodes??{}).reduce((e,t)=>{let n=i.getNodeById(t.id);return e[t.id]={deleted:!n,disabled:n?.disabled??!1,name:n?.name??t.name},e},{})),_=n(()=>[Object.values(m.value?.nodes??{}),i.workflow.nodes].some(e=>e.some(z))),v=n(()=>{if(e!==void 0&&!e.value||!u.value||!m.value)return[];let n=Ve(u.value.startData,u.value.response);return Ie(m.value,n,p.value,f.value,t?.value)});function y(){s.value=void 0,a.setWorkflowExecutionData(null),r.updateNodesExecutionIssues(),i.fetchLastSuccessfulExecution()}async function b(e){let t=Q(e);if(!(!s.value||t===void 0))try{let e=await i.fetchExecutionDataById(t.executionId),n=e?.data?I(e.data):void 0;if(!n||!e)throw Error(`Data is missing`);f.value[t.executionId]=n,p.value[t.workflowId]=new U({...e.workflowData,nodeTypes:i.getNodeTypes()})}catch(e){o.showError(e,`Unable to load sub execution`)}}return h([()=>i.workflowExecutionData?.id,()=>i.workflowExecutionData?.workflowData.id,()=>i.workflowExecutionData?.status,()=>i.workflowExecutionResultDataLastUpdate,()=>i.workflowExecutionStartedData],D(([e],[t])=>{s.value=i.workflowExecutionData===null?void 0:{response:Ze(i.workflowExecutionData),startData:i.workflowExecutionStartedData?.[1]??{}},e!==t&&(f.value={},p.value={})},l,!0,!0),{immediate:!0}),h(()=>i.workflowId,()=>{y()}),h(d,e=>{m.value=e?new U({...e,nodeTypes:i.getNodeTypes()}):void 0},{immediate:!0}),{execution:n(()=>u.value?.response),entries:v,hasChat:_,latestNodeNameById:g,resetExecutionData:y,loadSubExecution:b}}function ct(e,t){let r=w({}),i=n(()=>ze(e.value,r.value));function a(e,n){if(He(e)&&e.children.length===0){t(e);return}r.value={...r.value,[e.id]:n===void 0?!r.value[e.id]:!n}}return{flatLogEntries:i,toggleExpanded:a}}export{$ as _,$e as a,Je as b,Le as c,K as d,Ue as f,J as g,Y as h,tt as i,X as l,We as m,st as n,Qe as o,Be as p,at as r,Ke as s,ct as t,Re as u,Xe as v,Ye as y};
//# sourceMappingURL=useLogsTreeExpand-CjcPPamK.js.map