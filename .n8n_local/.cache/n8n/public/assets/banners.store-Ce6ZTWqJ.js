(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`f7e650a4-63ed-43e4-81c0-f04528c5dd01`,e._sentryDebugIdIdentifier=`sentry-dbid-f7e650a4-63ed-43e4-81c0-f04528c5dd01`)})()}catch{}import{C as e,E as t,Gt as n,It as r,M as i,Mt as a,P as o,T as s,at as c,bt as l,et as u,pt as d,vn as f,w as p}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as m}from"./_MapCache-DjbOQyB7.js";import{Bi as h,Ui as g,Y as _}from"./src-CppJvwzX.js";import{t as v}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Ps as y,Wc as b,t as x,ws as S}from"./users.store-pCkD7Zo0.js";import{j as C,l as w,r as T}from"./_baseOrderBy-El3qbNHQ.js";async function E(e,t){return await w(e,``,t)}var D=v(o({__name:`BaseBanner`,props:{name:{},theme:{default:`info`},customIcon:{default:void 0},dismissible:{type:Boolean,default:!0},dismissPermanently:{type:Boolean,default:!1}},emits:[`close`],setup(r,{emit:i}){let a=m(),o=k(),_=d(),v=r,y=i,b=e(()=>!!_.trailingContent);async function x(){await o.dismissBanner(v.name,v.dismissPermanently?`permanent`:`temporary`),y(`close`)}return(e,i)=>(u(),s(n(h),{class:f(e.$style.callout),theme:v.theme,icon:v.customIcon,"icon-size":`medium`,"round-corners":!1,"data-test-id":`banners-${v.name}`,"only-bottom-border":!0},{trailingContent:l(()=>[p(`div`,{class:f(e.$style.trailingContent)},[c(e.$slots,`trailingContent`),r.dismissible?(u(),s(n(g),{key:0,size:`small`,icon:`x`,title:n(a).baseText(`generic.dismiss`),class:`clickable`,"data-test-id":`banner-${v.name}-close`,onClick:x},null,8,[`title`,`data-test-id`])):t(``,!0)],2)]),default:l(()=>[p(`div`,{class:f([e.$style.mainContent,b.value?``:e.$style.keepSpace])},[c(e.$slots,`mainContent`)],2)]),_:3},8,[`class`,`theme`,`icon`,`data-test-id`]))}}),[[`__cssModules`,{$style:{callout:`_callout_9v94h_125`,mainContent:`_mainContent_9v94h_129`,keepSpace:`_keepSpace_9v94h_134`,trailingContent:`_trailingContent_9v94h_138`}}]]),O=v(o({__name:`DynamicBanner`,props:{name:{},content:{},theme:{},isDismissible:{type:Boolean},dismissPermanently:{type:[Boolean,null]}},setup(e){let t=e;return(e,r)=>(u(),s(D,{name:t.name,theme:t.theme,dismissible:t.isDismissible,"dismiss-permanently":t.dismissPermanently??!1},{mainContent:l(()=>[i(n(_),{content:t.content,class:f(e.$style.markdown)},null,8,[`content`,`class`])]),_:1},8,[`name`,`theme`,`dismissible`,`dismiss-permanently`]))}}),[[`__cssModules`,{$style:{markdown:`_markdown_b7cdq_125`}}]]);const k=C(b.BANNERS,()=>{let t=S(),n=x(),i=T(),o=r([]),s=r([]),c=r(0),l=e=>e===`cloud`?`cloud`:`self-hosted`;async function u(){if(!t.settings.dynamicBanners.endpoint||!t.settings.dynamicBanners.enabled)return[];let e=t.settings.versionCli,r=l(t.settings.deployment?.type??`default`);try{return o.value=(await E(t.settings.dynamicBanners.endpoint,{version:e,deploymentType:r,instanceId:t.settings.instanceId,planName:t.settings.license?.planName,userCreatedAt:n.currentUser?.createdAt,isOwner:n.currentUser?.isOwner,role:n.currentUser?.role})).map(e=>({...e,id:`dynamic-banner-${e.id}`,component:a(O)})),o.value}catch(e){return console.error(`Failed to fetch dynamic banners:`,e),[]}}let d=e(()=>o.value.reduce((e,t)=>(e[t.id]=t,e),{})),f=e=>{s.value=s.value.filter(t=>t!==e)},p=async(e,n=`temporary`)=>{if(n===`permanent`){await y(i.restApiContext,{bannerName:e,dismissedBanners:t.permanentlyDismissedBanners}),f(e);return}f(e)},m=e=>{c.value=e},h=e=>{s.value.includes(e)||s.value.push(e)};return{dynamicBanners:o,bannerStack:s,bannersHeight:c,dynamicBannersMap:d,dismissBanner:p,updateBannersHeight:m,pushBannerToStack:h,removeBannerFromStack:f,clearBannerStack:()=>{s.value=[]},loadStaticBanners:e=>{e.banners.forEach(h)},loadDynamicBanners:async()=>{(await u())?.filter(e=>!t.permanentlyDismissedBanners.includes(e.id)).forEach(e=>h(e.id))}}});export{D as n,k as t};
//# sourceMappingURL=banners.store-Ce6ZTWqJ.js.map