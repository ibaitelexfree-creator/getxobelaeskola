(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`d5f418fb-b2af-4c1b-8470-d9a577c116e6`,e._sentryDebugIdIdentifier=`sentry-dbid-d5f418fb-b2af-4c1b-8470-d9a577c116e6`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,T as l,Z as u,bt as d,et as f,j as p,st as m,xt as h}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as g}from"./_MapCache-DjbOQyB7.js";import{Ui as _,Vi as v,jt as y}from"./src-CppJvwzX.js";import{t as b}from"./_plugin-vue_export-helper-B_J4Khre.js";import{yr as x}from"./users.store-pCkD7Zo0.js";import{t as S}from"./externalSecrets.ee.store-RuZGBiOy.js";import{a as C,i as w,n as T,o as E,r as D,t as O}from"./gcp-secrets-manager-Bo0hWOnd.js";function k(e,n){let r=x(),i=S(),a=o(`initializing`),s=t(()=>i.connectionState[e.value?.name??``]),c=t=>{e.value&&i.setConnectionState(e.value.name,t)},l=t(()=>Object.entries(n.value).reduce((t,[n,r])=>{let i=e.value?.properties?.find(e=>e.name===n);return i&&u(i)&&(t[n]=r),t},{}));function u(e){let t=!0;return e.displayOptions?.show&&(t&&=Object.entries(e.displayOptions.show).every(([e,t])=>t?.includes(n.value[e]))),e.displayOptions?.hide&&(t&&=!Object.entries(e.displayOptions.hide).every(([e,t])=>t?.includes(n.value[e]))),t}async function d(t={showError:!0}){if(!e.value)return`initializing`;try{let{testState:t}=await i.testProviderConnection(e.value.name,l.value);return c(t),t}catch(e){return c(`error`),t.showError&&r.showError(e,`Error`,e.response?.data?.data.error),`error`}finally{e.value.connected&&[`connected`,`error`].includes(s.value)&&i.updateStoredProvider(e.value.name,{state:s.value})}}return{initialConnectionState:a,connectionState:s,normalizedProviderData:l,testConnection:d,setConnectionState:c,shouldDisplayProperty:u}}var A=[`src`,`alt`],j=c({__name:`ExternalSecretsProviderImage.ee`,props:{provider:{}},setup(e){let n=t(()=>({doppler:C,infisical:E,vault:w})[e.provider.name]);return(t,i)=>e.provider.name===`awsSecretsManager`?(f(),l(a(D),{key:0})):e.provider.name===`azureKeyVault`?(f(),l(a(T),{key:1})):e.provider.name===`gcpSecretsManager`?(f(),l(a(O),{key:2})):(f(),r(`img`,{key:3,src:n.value,alt:e.provider.displayName,width:`28`,height:`28`},null,8,A))}}),M={class:`connection-switch`},N=b(c({__name:`ExternalSecretsProviderConnectionSwitch.ee`,props:{provider:{},eventBus:{default:void 0},disabled:{type:Boolean,default:!1},beforeUpdate:{type:Function,default:void 0}},emits:[`change`],setup(e,{emit:c}){let b=c,C=e,w=S(),T=g(),E=x(),D=o(!1),O=t(()=>C.provider.connected?`success`:`text-light`);u(()=>{C.eventBus&&C.eventBus.on(`connect`,k)});async function k(e){let t=typeof e==`boolean`?e:!!e;try{if(D.value=!0,C.beforeUpdate&&!await C.beforeUpdate(t)){D.value=!1;return}await w.updateProviderConnected(C.provider.name,t),b(`change`,t)}catch(e){E.showError(e,`Error`)}finally{D.value=!1}}return(t,o)=>{let c=m(`loading`);return h((f(),r(`div`,M,[e.provider.state===`error`?(f(),l(a(_),{key:0,color:`danger`,icon:`triangle-alert`,class:`mr-2xs`})):i(``,!0),s(a(v),{color:O.value,bold:``,class:`mr-2xs`},{default:d(()=>[p(n(a(T).baseText(`settings.externalSecrets.card.${e.provider.connected?`connected`:`disconnected`}`)),1)]),_:1},8,[`color`]),s(a(y),{"model-value":e.provider.connected,title:a(T).baseText(`settings.externalSecrets.card.connectedSwitch.title`,{interpolate:{provider:e.provider.displayName}}),disabled:e.disabled,"data-test-id":`settings-external-secrets-connected-switch`,"onUpdate:modelValue":k},null,8,[`model-value`,`title`,`disabled`])])),[[c,D.value]])}}}),[[`__scopeId`,`data-v-baa1c9fc`]]);export{j as n,k as r,N as t};
//# sourceMappingURL=ExternalSecretsProviderConnectionSwitch.ee-CQj4SLPh.js.map