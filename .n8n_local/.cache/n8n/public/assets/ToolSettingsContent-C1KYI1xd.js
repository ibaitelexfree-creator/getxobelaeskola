(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`56a801ea-7c27-40f6-88b9-03032f552848`,e._sentryDebugIdIdentifier=`sentry-dbid-56a801ea-7c27-40f6-88b9-03032f552848`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,It as a,J as ee,M as o,P as s,T as c,Z as te,_t as l,bt as u,et as d,j as f,nt as p,p as m,vn as h,w as g,xt as _,zt as ne}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as re}from"./_MapCache-DjbOQyB7.js";import{Vi as v,j as y}from"./src-CppJvwzX.js";import{t as b}from"./_plugin-vue_export-helper-B_J4Khre.js";import{C as x,Gt as S,It as C,Pt as w,rt as T}from"./users.store-pCkD7Zo0.js";import{O as E,f as ie,m as ae,t as D,x as O}from"./ParameterInputList-BmOOAGJV.js";import{Ha as k,Oi as oe,Ta as A,bc as se,fa as ce,pa as le,xc as ue,ya as de}from"./constants-D1jZwsUK.js";var j=b(s({__name:`ToolSettingsContent`,props:{initialNode:{},existingToolNames:{}},emits:[`update:valid`,`update:node-name`],setup(s,{expose:b,emit:j}){let M=s,N=j,P=re(),F=x(),I=T(),L=S(),R=C(),z=w(),B=ne(M.initialNode),V=a(!1),H=e(()=>M.existingToolNames??[]),U=e(()=>M.initialNode?F.getNodeType(M.initialNode.type):null),W=a(`params`),G=e(()=>ie(U.value?.properties??[],!1)),fe=e(()=>q.value.length>0||G.value.settings.length>0),K=e(()=>{let e=[{label:P.baseText(`nodeSettings.parameters`),value:`params`}];return fe.value&&e.push({label:P.baseText(`nodeSettings.settings`),value:`settings`}),e}),q=e(()=>ae(!0,P.baseText.bind(P)).filter(e=>e.name!==`notes`&&e.name!==`notesInFlow`)),J=e(()=>B.value?{parameters:k(B.value.parameters)}:{parameters:{}}),pe=e(()=>G.value.params.filter(e=>e.type!==`notice`).length===0),me=e(()=>{if(!U.value||!B.value)return!1;let e=le(U.value.properties,B.value,U.value);return e!==null&&Object.keys(e.parameters??{}).length>0}),he=e(()=>{if(!U.value||!B.value)return!1;let e=R.getNodeIssues(U.value,B.value,{getNode:()=>B.value},[`parameters`,`execution`,`typeUnknown`,`input`]);return Object.keys(e?.credentials??{}).length>0}),ge=e(()=>{if(!B.value)return;let e=new oe({id:`chat-tool-workflow`,name:`Tool Configuration`,nodes:[B.value],connections:{},active:!1,nodeTypes:{getByName(e){let t=F.getNodeType(e);if(t===null)throw Error(`Node type "${e}" not found`);return{description:t}},getByNameAndVersion(e,t){let n=F.getNodeType(e,t);if(n===null)throw Error(`Node type "${e}" (v${t}) not found`);return{description:n}},getKnownTypes(){return{}}},settings:{}});return{localResolve:!0,envVars:z.variablesAsObject,workflow:e,execution:null,nodeName:B.value.name,additionalKeys:{},connections:{},inputNode:void 0}}),Y=e(()=>B.value?.name&&!me.value&&!he.value);p(ue,ge),p(se,!0);function X(e,t){if(!t.includes(e))return e;let n=1;for(;t.includes(`${e} (${n})`);)n++;return`${e} (${n})`}function Z(e){if(!B.value)return;let t=k(B.value.parameters);O(t,e.name,e.value),B.value={...B.value,parameters:t}}function Q(e){if(B.value)if(e.name.startsWith(`parameters.`)){let t=e.name.slice(11),n=k(B.value.parameters);O(n,t,e.value),B.value={...B.value,parameters:n}}else B.value={...B.value,[e.name]:e.value}}function $(e){B.value&&={...B.value,...e.properties}}function _e(e){B.value&&=(V.value=!0,{...B.value,name:e})}return l(()=>M.initialNode,e=>{if(e){let t=X(e.name,H.value),n=t===e.name?e:{...e,name:t};if(U.value){let e=ce(U.value.properties??[],n.parameters??{},!0,!1,n,U.value);n={...n,parameters:e??{}};let t=n.name.replace(/ \(\d+\)$/,``);if(V.value=!(de(t,U.value,n.parameters)||t===U.value.displayName),!V.value){let e=A(n.parameters??{},U.value);e&&e!==t&&(n={...n,name:X(e,H.value)})}}B.value=n}else B.value=e,V.value=!1},{immediate:!0}),l(()=>[B.value?.parameters?.resource,B.value?.parameters?.operation],()=>{if(V.value||!B.value||!U.value)return;let e=A(B.value.parameters,U.value);if(e){let t=X(e,H.value);t!==B.value.name&&(B.value={...B.value,name:t})}}),l(Y,e=>{N(`update:valid`,!!e)}),l(()=>B.value?.name,e=>{e&&N(`update:node-name`,e)}),te(async()=>{N(`update:valid`,!!Y.value),B.value?.name&&N(`update:node-name`,B.value.name);let e=L.personalProject;e&&(L.setCurrentProject(e),I.allCredentials.length===0&&await Promise.all([I.fetchCredentialTypes(!1),I.fetchAllCredentialsForWorkflow({projectId:e.id})]))}),ee(()=>{L.setCurrentProject(null)}),b({node:B,isValid:Y,nodeTypeDescription:U,handleChangeName:_e}),(e,a)=>(d(),n(`div`,{class:h(e.$style.container)},[K.value.length>1?(d(),c(i(y),{key:0,"model-value":W.value,options:K.value,class:h(e.$style.tabs),"onUpdate:modelValue":a[0]||=e=>W.value=e},null,8,[`model-value`,`options`,`class`])):r(``,!0),g(`div`,{class:h(e.$style.tabContent)},[_(g(`div`,null,[B.value?(d(),c(D,{key:0,parameters:G.value.params,"hide-delete":!0,"node-values":B.value.parameters,"is-read-only":!1,node:B.value,onValueChanged:Z},{default:u(()=>[o(E,{node:B.value,readonly:!1,"show-all":!0,"hide-issues":!1,onCredentialSelected:$,onValueChanged:Z},null,8,[`node`])]),_:1},8,[`parameters`,`node-values`,`node`])):r(``,!0),pe.value?(d(),n(`div`,{key:1,class:h(e.$style.noParameters)},[o(i(v),null,{default:u(()=>[f(t(i(P).baseText(`nodeSettings.thisNodeDoesNotHaveAnyParameters`)),1)]),_:1})],2)):r(``,!0)],512),[[m,W.value===`params`]]),_(g(`div`,null,[B.value&&G.value.settings.length>0?(d(),c(D,{key:0,parameters:G.value.settings,"node-values":J.value,"is-read-only":!1,"hide-delete":!0,path:`parameters`,node:B.value,onValueChanged:Q},null,8,[`parameters`,`node-values`,`node`])):r(``,!0),B.value?(d(),c(D,{key:1,parameters:q.value,"hide-delete":!0,"node-values":J.value,"is-read-only":!1,path:``,node:B.value,onValueChanged:Q},null,8,[`parameters`,`node-values`,`node`])):r(``,!0)],512),[[m,W.value===`settings`]])],2)],2))}}),[[`__cssModules`,{$style:{container:`_container_rha2t_125`,tabs:`_tabs_rha2t_133`,tabContent:`_tabContent_rha2t_139`,noParameters:`_noParameters_rha2t_146`}}]]);export{j as t};
//# sourceMappingURL=ToolSettingsContent-C1KYI1xd.js.map