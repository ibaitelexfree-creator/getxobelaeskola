(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`0b497eb3-2092-4c8e-b7d6-836f4b3cdee0`,e._sentryDebugIdIdentifier=`sentry-dbid-0b497eb3-2092-4c8e-b7d6-836f4b3cdee0`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,T as l,_ as u,at as d,bt as f,c as p,et as m,it as h,j as g,vn as _,w as v}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{x as y,yt as b}from"./_MapCache-DjbOQyB7.js";import{Et as x,Hi as S,Oi as C,Ui as w,Vi as T,gi as E,j as D}from"./src-CppJvwzX.js";import{t as O}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{rs as k}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import{r as A}from"./_baseOrderBy-El3qbNHQ.js";import{t as j}from"./orderBy-KAUxkCYD.js";import{i as M,n as N,t as P}from"./SeverityTag-DLCXCZZi.js";var F=e(j(),1),I=O(c({__name:`EmptyTab`,setup(e){return(e,t)=>(m(),r(`div`,{class:_(e.$style.NoIssuesContainer)},[s(a(T),{tag:`h3`,size:`large`,color:`text-base`,class:`mb-2xs`},{default:f(()=>[d(e.$slots,`title`)]),_:3}),s(a(T),{tag:`p`,size:`medium`,color:`text-light`,class:`mb-2xl`},{default:f(()=>[d(e.$slots,`description`)]),_:3})],2))}}),[[`__cssModules`,{$style:{NoIssuesContainer:`_NoIssuesContainer_1o8ra_2`}}]]),L={style:{"max-width":`700px`,margin:`0 auto`,"padding-bottom":`40px`}},R=O(c({__name:`MigrationRules`,setup(e){let c=p(),d=A(),O=b(),j=o(`workflow-issues`),R=o(!1),{state:z,isLoading:B,execute:V}=y(async(e=!1)=>{if(e){let e=await M(d.restApiContext);return e.report.workflowResults.length===0&&e.report.instanceResults.length>0&&(j.value=`instance-issues`),R.value=e.shouldCache,e}let t=await N(d.restApiContext);return R.value=t.shouldCache,t},void 0);async function H(){await V(0,!0)}let U=t(()=>[{label:O.baseText(`settings.migrationReport.tabs.workflowIssues`),value:`workflow-issues`,tag:z.value?.report.workflowResults.length?String(z.value.report.workflowResults.length):void 0},{label:O.baseText(`settings.migrationReport.tabs.instanceIssues`),value:`instance-issues`,tag:z.value?.report.instanceResults.length?String(z.value.report.instanceResults.length):void 0}]),W=t(()=>({critical:O.baseText(`settings.migrationReport.workflowTooltip.critical`),medium:O.baseText(`settings.migrationReport.workflowTooltip.medium`),low:O.baseText(`settings.migrationReport.workflowTooltip.low`)})),G=t(()=>({critical:O.baseText(`settings.migrationReport.instanceTooltip.critical`),medium:O.baseText(`settings.migrationReport.instanceTooltip.medium`),low:O.baseText(`settings.migrationReport.instanceTooltip.low`)})),K=t(()=>z.value?z.value.totalWorkflows-z.value.report.workflowResults.reduce((e,t)=>e+t.nbAffectedWorkflows,0):0),q={critical:0,medium:1,low:2},J=t(()=>z.value?.report.workflowResults?(0,F.default)(z.value.report.workflowResults,[e=>q[e.ruleSeverity]],[`asc`]):[]),Y=t(()=>z.value?.report.instanceResults?(0,F.default)(z.value.report.instanceResults,[e=>q[e.ruleSeverity]],[`asc`]):[]);return(e,t)=>(m(),r(`div`,L,[s(a(T),{tag:`h2`,size:`xlarge`,color:`text-dark`,class:`mb-2xs`},{default:f(()=>[g(n(a(O).baseText(`settings.migrationReport.title`)),1)]),_:1}),s(a(T),{tag:`p`,color:`text-base`,class:`mb-2xl`},{default:f(()=>[g(n(a(O).baseText(`settings.migrationReport.description`,{interpolate:{compatibleCount:String(K.value),totalCount:String(a(z)?.totalWorkflows??0)}}))+` `,1),s(a(E),{theme:`text`,href:`https://docs.n8n.io/2-0-breaking-changes/`,target:`_blank`,rel:`noopener noreferrer`},{default:f(()=>[v(`span`,{class:_(a(c).UnderlinedText)},n(a(O).baseText(`settings.migrationReport.documentationLink`)),3),t[1]||=g(` ↗ `,-1)]),_:1})]),_:1}),v(`div`,{class:_(a(c).ActionBar)},[s(a(D),{modelValue:j.value,"onUpdate:modelValue":t[0]||=e=>j.value=e,options:U.value,variant:`modern`},null,8,[`modelValue`,`options`]),R.value?(m(),l(a(S),{key:0,variant:`subtle`,label:a(O).baseText(`settings.migrationReport.refreshButton`),icon:`refresh-cw`,loading:a(B),disabled:a(B),onClick:H},null,8,[`label`,`loading`,`disabled`])):i(``,!0)],2),a(B)?(m(),r(`div`,{key:0,class:_(a(c).CardContainer)},[(m(),r(u,null,h(4,e=>v(`div`,{key:e,class:_(a(c).Card)},[v(`div`,null,[s(a(x),{variant:`p`,rows:3,class:_(a(c).PLoading)},null,8,[`class`])]),s(a(x),{variant:`button`})],2)),64))],2)):j.value===`workflow-issues`?(m(),r(u,{key:1},[a(z)?.report.workflowResults.length===0?(m(),l(I,{key:0},{title:f(()=>[g(n(a(O).baseText(`settings.migrationReport.emptyWorkflowIssues.title`)),1)]),description:f(()=>[g(n(a(O).baseText(`settings.migrationReport.emptyWorkflowIssues.description`)),1)]),_:1})):(m(),r(`div`,{key:1,class:_(a(c).CardContainer)},[(m(!0),r(u,null,h(J.value,e=>(m(),r(`div`,{key:e.ruleId,class:_(a(c).Card)},[v(`div`,null,[v(`div`,{class:_(a(c).CardTitleContainer)},[s(a(T),{tag:`h3`,size:`medium`,color:`text-dark`},{default:f(()=>[g(n(e.ruleTitle),1)]),_:2},1024),s(a(C),{content:W.value[e.ruleSeverity],placement:`top`,enterable:!1},{default:f(()=>[s(P,{severity:e.ruleSeverity},null,8,[`severity`])]),_:2},1032,[`content`])],2),s(a(T),{tag:`p`,color:`text-base`},{default:f(()=>[g(n(e.ruleDescription)+n(e.ruleDescription.endsWith(`.`)?``:`.`)+` `,1),e.ruleDocumentationUrl?(m(),l(a(E),{key:0,theme:`text`,href:e.ruleDocumentationUrl,target:`_blank`,rel:`noopener noreferrer`,class:_(a(c).NoLineBreak)},{default:f(()=>[v(`span`,{class:_(a(c).UnderlinedText)},n(a(O).baseText(`settings.migrationReport.documentation`)),3),t[2]||=g(` ↗ `,-1)]),_:1},8,[`href`,`class`])):i(``,!0)]),_:2},1024)]),s(a(E),{class:_(a(c).NoLineBreak),theme:`text`,to:{name:a(k).MIGRATION_RULE_REPORT,params:{migrationRuleId:e.ruleId}}},{default:f(()=>[v(`span`,{class:_(a(c).NoLineBreak)},[g(n(a(O).baseText(`settings.migrationReport.workflowsCount`,{interpolate:{count:e.nbAffectedWorkflows}}))+` `,1),s(a(w),{icon:`chevron-right`,size:24})],2)]),_:2},1032,[`class`,`to`])],2))),128))],2))],64)):j.value===`instance-issues`?(m(),r(u,{key:2},[a(z)?.report.instanceResults.length===0?(m(),l(I,{key:0},{title:f(()=>[g(n(a(O).baseText(`settings.migrationReport.emptyInstanceIssues.title`)),1)]),description:f(()=>[g(n(a(O).baseText(`settings.migrationReport.emptyInstanceIssues.description`)),1)]),_:1})):(m(),r(`div`,{key:1,class:_(a(c).CardContainer)},[(m(!0),r(u,null,h(Y.value,e=>(m(),r(`div`,{key:e.ruleId,class:_(a(c).Card)},[v(`div`,null,[v(`div`,{class:_(a(c).CardTitleContainer)},[s(a(T),{tag:`h3`},{default:f(()=>[g(n(e.ruleTitle),1)]),_:2},1024),s(a(C),{content:G.value[e.ruleSeverity],placement:`top`,enterable:!1},{default:f(()=>[s(P,{severity:e.ruleSeverity},null,8,[`severity`])]),_:2},1032,[`content`])],2),s(a(T),{tag:`p`,color:`text-base`},{default:f(()=>[g(n(e.ruleDescription)+n(e.ruleDescription.endsWith(`.`)?``:`.`)+` `,1),e.ruleDocumentationUrl?(m(),l(a(E),{key:0,theme:`text`,href:e.ruleDocumentationUrl,target:`_blank`,rel:`noopener noreferrer`,class:_(a(c).NoLineBreak)},{default:f(()=>[v(`span`,{class:_(a(c).UnderlinedText)},n(a(O).baseText(`settings.migrationReport.documentation`)),3),t[3]||=g(` ↗ `,-1)]),_:1},8,[`href`,`class`])):i(``,!0)]),_:2},1024)])],2))),128))],2))],64)):i(``,!0)]))}}),[[`__cssModules`,{$style:{CardContainer:`_CardContainer_i8nk0_2`,Card:`_Card_i8nk0_2`,CardTitleContainer:`_CardTitleContainer_i8nk0_32`,NoLineBreak:`_NoLineBreak_i8nk0_39`,ActionBar:`_ActionBar_i8nk0_46`,NoIssuesContainer:`_NoIssuesContainer_i8nk0_53`,PLoading:`_PLoading_i8nk0_62`,UnderlinedText:`_UnderlinedText_i8nk0_68`}}]]);export{R as default};
//# sourceMappingURL=MigrationRules-BV8SWxX_.js.map