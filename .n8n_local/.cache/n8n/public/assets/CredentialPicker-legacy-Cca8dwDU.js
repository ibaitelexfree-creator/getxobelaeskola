!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./_baseOrderBy-legacy-BnyL5wLN.js"],(function(e,t){var a,l,d,n,i,r,s,o,c,p,u,y,_,m,b,C,f,v,w,h,g,x,T,E,I,D,j,k,N,P,B,O,$,M,S,z,L,G,V,R;return{setters:[function(e){a=e.C,l=e.Cn,d=e.D,n=e.E,i=e.G,r=e.Gt,s=e.It,o=e.M,c=e.P,p=e.T,u=e._,y=e._t,_=e.bt,m=e.et,b=e.it,C=e.j,f=e.vn,v=e.w},function(e){w=e.yt},function(e){h=e.Hi,g=e.Mi,x=e.Oi,T=e.Ui,E=e.Vi,I=e.ft,D=e.pt},function(e){j=e.t},function(e){k=e.Gt,N=e.Tr,e.Ua,P=e.n,B=e.nt,O=e.r,$=e.rt,M=e.yr},function(e){e.Ss,S=e.qo},function(e){z=e.v}],execute:function(){(L=document.createElement("style")).textContent="._selectPopper_178ar_125 .el-select-dropdown__list{padding:0}._selectPopper_178ar_125 :has(._newCredential_178ar_128:hover) .hover{background-color:transparent}._selectPopper_178ar_125:not(:has(li)) ._newCredential_178ar_128{box-shadow:none;border-radius:var(--radius);border-top:none}._credentialOption_178ar_137{flex-direction:column;display:flex}._newCredential_178ar_128{gap:var(--spacing--3xs);width:100%;font-weight:var(--font-weight--bold);padding:var(--spacing--xs)var(--spacing--md);background-color:var(--color--background--light-2);color:var(--color--text--shade-1);border:0;border-top:var(--border);box-shadow:var(--shadow--light);clip-path:inset(-12px 0 0);align-items:center;display:flex}._newCredential_178ar_128:not([disabled]){cursor:pointer}._newCredential_178ar_128:not([disabled]):hover{color:var(--color--primary)}._newCredential_178ar_128[disabled]{opacity:.5;cursor:not-allowed}._dropdown_1yxv4_125{gap:var(--spacing--2xs);display:flex}._edit_1yxv4_130{min-width:20px;font-size:var(--font-size--sm);justify-content:center;align-items:center;display:flex}._createButton_1yxv4_138{width:100%}\n/*$vite$:1*/",document.head.appendChild(L);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(U=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[U]="c9272636-e02c-4723-80db-93c999dbfd8b",t._sentryDebugIdIdentifier="sentry-dbid-c9272636-e02c-4723-80db-93c999dbfd8b")}catch(t){}var t,U;G=["disabled"],V=j(c({__name:"CredentialsDropdown",props:{credentialOptions:{},selectedCredentialId:{},permissions:{}},emits:["credentialSelected","newCredential"],setup(e,{emit:t}){const n=e,c=t,y=w(),h=s(null),g=s("");function j(e,t){return t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}const k=a((()=>g.value?n.credentialOptions.filter((e=>j(g.value,e.name)||e.homeProject?.name&&j(g.value,e.homeProject.name))):n.credentialOptions)),N=(e="")=>{g.value=e},P=e=>{c("credentialSelected",e)};return(e,t)=>(m(),p(r(I),{ref_key:"selectRefs",ref:h,size:"small",filterable:"","filter-method":N,"model-value":n.selectedCredentialId,"popper-class":e.$style.selectPopper,"onUpdate:modelValue":P},{empty:_((()=>[...t[1]||(t[1]=[])])),footer:_((()=>[o(r(x),{disabled:n.permissions.create,content:r(y).baseText("nodeCredentials.createNew.permissionDenied"),placement:"top"},{default:_((()=>[v("button",{type:"button","data-test-id":"node-credentials-select-item-new",class:f([e.$style.newCredential]),disabled:!n.permissions.create,onClick:t[0]||(t[0]=e=>(async()=>{h.value?.blur(),await i(),c("newCredential")})())},[o(r(T),{size:"xsmall",icon:"plus"}),C(" "+l(r(y).baseText("nodeCredentials.createNew")),1)],10,G)])),_:1},8,["disabled","content"])])),default:_((()=>[(m(!0),d(u,null,b(k.value,(t=>(m(),p(r(D),{key:t.id,"data-test-id":`node-credentials-select-item-${t.id}`,label:t.name,value:t.id},{default:_((()=>[v("div",{class:f([e.$style.credentialOption,"mt-2xs mb-2xs"])},[o(r(E),{bold:""},{default:_((()=>[C(l(t.name),1)])),_:2},1024),t.homeProject?(m(),p(r(E),{key:0,size:"small"},{default:_((()=>[C(l(`${t.typeDisplayName} - ${t.homeProject?.name}`),1)])),_:2},1024)):(m(),p(r(E),{key:1,size:"small"},{default:_((()=>[C(l(t.typeDisplayName),1)])),_:2},1024))],2)])),_:2},1032,["data-test-id","label","value"])))),128))])),_:1},8,["model-value","popper-class"]))}}),[["__cssModules",{$style:{selectPopper:"_selectPopper_178ar_125",newCredential:"_newCredential_178ar_128",credentialOption:"_credentialOption_178ar_137"}}]]),R=c({__name:"CredentialPicker",props:{appName:{},credentialType:{},selectedCredentialId:{},personalOnly:{type:Boolean},showDelete:{type:Boolean},hideCreateNew:{type:Boolean},createButtonVariant:{}},emits:["credentialSelected","credentialDeselected","credentialModalOpened","credentialDeleted"],setup(e,{emit:t}){const l=e,i=t,c=O(),u=$(),b=k(),C=w(),v=M(),T=N(),E=s(!1),I=s(null),D=a((()=>{const e=u.getCredentialsByType(l.credentialType);return l.personalOnly?e.filter((e=>"personal"===e.homeProject?.type||e.isGlobal)):e})),j=a((()=>D.value.map((e=>({id:e.id,name:e.name,typeDisplayName:u.getCredentialTypeByName(e.type)?.displayName,homeProject:e.homeProject}))))),L=a((()=>{const{currentProject:e,personalProject:t}=b;return e??t})),G=a((()=>S(I.value?.scopes??L.value?.scopes).credential)),R=e=>{i("credentialSelected",e)},U=()=>{c.openNewCredential(l.credentialType,!0),E.value=!0,i("credentialModalOpened",void 0)};return B({store:u,onCredentialCreated:e=>{E.value&&i("credentialSelected",e.id)},onCredentialDeleted:e=>{if(!E.value)return;if(e!==l.selectedCredentialId)return;const t=j.value.map((e=>e.id)).filter((t=>t!==e));t.length>0?i("credentialSelected",t[0]):i("credentialDeselected")}}),P({store:c,onModalClosed(e){"editCredential"===e&&E.value&&(E.value=!1)}}),y((()=>l.selectedCredentialId),(()=>{!async function(){if(l.selectedCredentialId)try{const e=await u.getCredentialData({id:l.selectedCredentialId});if(!e)throw new Error(C.baseText("credentialEdit.credentialEdit.couldNotFindCredentialWithId")+":"+l.selectedCredentialId);I.value=e}catch(e){return void v.showError(e,C.baseText("credentialEdit.credentialEdit.showError.loadCredential.title"))}}()}),{immediate:!0}),(e,t)=>(m(),d("div",null,[j.value.length>0||l.hideCreateNew?(m(),d("div",{key:0,class:f(e.$style.dropdown)},[o(V,{"credential-type":l.credentialType,"credential-options":j.value,"selected-credential-id":l.selectedCredentialId,"data-test-id":"credential-dropdown",permissions:G.value,onCredentialSelected:R,onNewCredential:U},null,8,["credential-type","credential-options","selected-credential-id","permissions"]),l.selectedCredentialId?(m(),p(r(x),{key:0,disabled:G.value.update,content:r(C).baseText("nodeCredentials.updateCredential.permissionDenied"),placement:"top"},{default:_((()=>[o(r(g),{variant:"subtle",icon:"pen",class:f({[e.$style.edit]:!0}),title:r(C).baseText("nodeCredentials.updateCredential"),"data-test-id":"credential-edit-button",disabled:!G.value.update,onClick:t[0]||(t[0]=e=>(z(l.selectedCredentialId),c.openExistingCredential(l.selectedCredentialId),E.value=!0,void i("credentialModalOpened",l.selectedCredentialId)))},null,8,["class","title","disabled"])])),_:1},8,["disabled","content"])):n("",!0),l.showDelete&&l.selectedCredentialId?(m(),p(r(x),{key:1,disabled:G.value.update,content:r(C).baseText("nodeCredentials.deleteCredential.permissionDenied"),placement:"top"},{default:_((()=>[l.showDelete&&l.selectedCredentialId?(m(),p(r(g),{key:0,"native-type":"button",title:r(C).baseText("nodeCredentials.deleteCredential"),icon:"trash-2","icon-size":"large",variant:"outline",disabled:!G.value.delete,onClick:t[1]||(t[1]=e=>(async()=>{z(l.selectedCredentialId);const e=l.selectedCredentialId;if("confirm"===await T.confirm(C.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:I.value?.name??l.selectedCredentialId}}),C.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),{confirmButtonText:C.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText")}))try{await u.deleteCredential({id:e}),I.value=null,i("credentialDeleted",e)}catch(t){v.showError(t,C.baseText("credentialEdit.credentialEdit.showError.deleteCredential.title"))}})())},null,8,["title","disabled"])):n("",!0)])),_:1},8,["disabled","content"])):n("",!0)],2)):l.hideCreateNew?n("",!0):(m(),p(r(h),{key:1,label:`Create new ${l.appName} credential`,class:f(e.$style.createButton),"data-test-id":"create-credential",variant:l.createButtonVariant||"solid",disabled:!G.value.create,onClick:U},null,8,["label","class","variant","disabled"]))]))}}),e("t",j(R,[["__cssModules",{$style:{dropdown:"_dropdown_1yxv4_125",edit:"_edit_1yxv4_130",createButton:"_createButton_1yxv4_138"}}]]))}}}));
//# sourceMappingURL=CredentialPicker-legacy-Cca8dwDU.js.map