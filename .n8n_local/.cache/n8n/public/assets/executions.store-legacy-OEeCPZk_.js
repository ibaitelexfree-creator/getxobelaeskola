!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./users.store-legacy-B-bVJKl3.js","./_baseOrderBy-legacy-BnyL5wLN.js"],(function(e,t){var n,o,u,a,r,i,s,c,l,d;return{setters:[function(e){n=e.C,o=e.It},function(e){u=e.Gt,a=e._,r=e.h,i=e.ws,s=e.x},function(e){c=e.d,l=e.j,d=e.r}],execute:function(){try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(f=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[f]="0dafb648-8c25-454b-8894-c6009133b73c",t._sentryDebugIdIdentifier="sentry-dbid-0dafb648-8c25-454b-8894-c6009133b73c")}catch(t){}var t,f;e("t",l("executions",(()=>{const e=d(),t=u(),l=i(),f=o(!1),w=o(10),v=o(null),y=o(a()),x=n((()=>{const e=r(y.value);return t.currentProjectId&&(e.projectId=t.currentProjectId),e})),I=n((()=>({..."all"!==y.value.workflowId?{workflowId:y.value.workflowId}:{}}))),E=o(!0),b=o(null),g=o(4e3),p=o({}),A=o(0),T=o(!1),h=o(0),m=n((()=>{const e=Object.values(p.value);return e.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),e})),k=n((()=>m.value.reduce(((e,t)=>(e[t.workflowId]||(e[t.workflowId]=[]),e[t.workflowId].push(t),e)),{}))),C=o({}),D=(e,t)=>new Date(t.startedAt??t.createdAt).getTime()-new Date(e.startedAt??e.createdAt).getTime(),j=l.isConcurrencyEnabled?(e,t)=>{if(e.status&&t.status){const n={running:1,new:2},o=n[e.status]-n[t.status];if(0!==o)return o}return D(e,t)}:D,P=n((()=>{const e=Object.values(C.value);return e.sort(j),e})),O=n((()=>P.value.reduce(((e,t)=>(e[t.workflowId]||(e[t.workflowId]=[]),e[t.workflowId].push(t),e)),{}))),S=n((()=>[...P.value,...m.value]));function _(e){p.value={...p.value,[e.id]:{...e,mode:e.mode}}}function B(e){const{[e]:t,...n}=p.value;p.value=n}async function R(t=x.value,n,o){f.value=!0;try{const u=await c(e.restApiContext,"GET","/executions",{...t?{filter:t}:{},...o?{firstId:o}:{},...n?{lastId:n}:{},limit:w.value});return C.value={},u.results.forEach((e=>{["new","running"].includes(e.status)?function(e){C.value[e.id]={...e,mode:e.mode}}(e):_(e)})),A.value=u.count,T.value=u.estimated,h.value=u.concurrentExecutionsCount,u}finally{f.value=!1}}async function $(e){F(),await async function(e){const t={...x.value,...e?{workflowId:e}:{}};b.value=setTimeout((async()=>{E.value&&(await R(t),$(e))}),g.value)}(e)}function F(){b.value&&(clearTimeout(b.value),b.value=null)}function G(){p.value={},C.value={},A.value=0,T.value=!1,h.value=0}return{loading:f,annotateExecution:async function(t,n){const o=await c(e.restApiContext,"PATCH",`/executions/${t}`,n);_(o),o.id===v.value?.id&&(v.value=o)},executionsById:p,executions:m,executionsCount:A,executionsCountEstimated:T,concurrentExecutionsCount:h,executionsByWorkflowId:k,currentExecutions:P,currentExecutionsByWorkflowId:O,activeExecution:v,fetchExecutions:R,fetchExecution:async function(t){const n=await c(e.restApiContext,"GET",`/executions/${t}`);return n?s(n):void 0},autoRefresh:E,autoRefreshTimeout:b,startAutoRefreshInterval:$,stopAutoRefreshInterval:F,initialize:async function(e){e&&(y.value.workflowId=e),await R(),await $(e)},filters:y,setFilters:function(e){y.value=e},executionsFilters:x,currentExecutionsFilters:I,allExecutions:S,stopCurrentExecution:async function(t){return await c(e.restApiContext,"POST",`/executions/${t}/stop`)},retryExecution:async function(t,n){return await c(e.restApiContext,"POST",`/executions/${t}/retry`,n?{loadWorkflow:!0}:void 0)},deleteExecutions:async function(t){if(await c(e.restApiContext,"POST","/executions/delete",t),t.ids&&t.ids.forEach(B),t.deleteBefore){const e=new Date(t.deleteBefore);S.value.forEach((t=>{new Date(t.startedAt??t.createdAt)<e&&B(t.id)}))}},addExecution:_,resetData:G,reset:function(){w.value=10,y.value=a(),E.value=!0,G(),F()},itemsPerPage:w,stopManyExecutions:async function(t){return await c(e.restApiContext,"POST","/executions/stopMany",{filter:{...t,workflowId:y.value.workflowId}})}}})))}}}));
//# sourceMappingURL=executions.store-legacy-OEeCPZk_.js.map