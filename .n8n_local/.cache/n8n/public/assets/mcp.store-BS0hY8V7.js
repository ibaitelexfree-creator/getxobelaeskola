(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`fcb771af-4d8a-4a8c-9982-fef5bfd37a46`,e._sentryDebugIdIdentifier=`sentry-dbid-fcb771af-4d8a-4a8c-9982-fef5bfd37a46`)})()}catch{}import{C as e,It as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{Rr as n,ci as r,s as i,ws as a}from"./users.store-pCkD7Zo0.js";import{d as o,j as s,r as c,u as l}from"./_baseOrderBy-El3qbNHQ.js";import{c as u}from"./mcp.constants-BtNzU3_O.js";async function d(e,t){return await o(e,`PATCH`,`/mcp/settings`,{mcpAccessEnabled:t})}async function f(e){return await o(e,`GET`,`/mcp/api-key`)}async function p(e){return await o(e,`POST`,`/mcp/api-key/rotate`)}async function m(e,t,n){return await o(e,`PATCH`,`/mcp/workflows/${encodeURIComponent(t)}/toggle-access`,{availableInMCP:n})}async function h(e){return await o(e,`GET`,`/mcp/oauth-clients`)}async function g(e,t){return await o(e,`DELETE`,`/mcp/oauth-clients/${encodeURIComponent(t)}`)}async function _(e,t){let n={};return t?.take!==void 0&&(n.take=t.take),t?.skip!==void 0&&(n.skip=t.skip),t?.query&&(n.filter=JSON.stringify({query:t.query})),await l(e,`GET`,`/mcp/workflows`,n)}const v=s(`mcp`,()=>{let o=i(),s=n(),l=c(),u=a(),v=t(null),y=t([]),b=t(!1),x=e(()=>!!u.moduleSettings.mcp?.mcpAccessEnabled);async function S(e=1,t=50){return(await s.fetchWorkflowsPage(void 0,e,t,`updatedAt:desc`,{isArchived:!1,availableInMCP:!0},!1,!1)).filter(r)}async function C(e){let{mcpAccessEnabled:t}=await d(l.restApiContext,e);return u.moduleSettings.mcp={...u.moduleSettings.mcp??{},mcpAccessEnabled:t},t}async function w(e,t){let n=await m(l.restApiContext,e,t),{id:r,settings:i,versionId:a}=n;return r===o.workflowId&&(o.setWorkflowVersionData({versionId:a,name:o.versionData?.name??null,description:o.versionData?.description??null}),i&&o.private.setWorkflowSettings(i)),s.workflowsById[r]&&(s.workflowsById[r]={...s.workflowsById[r],settings:i,versionId:a}),n}async function T(){let e=await f(l.restApiContext);return v.value=e,e}async function E(){let e=await p(l.restApiContext);return v.value=e,e}function D(){v.value=null}async function O(){let e=await h(l.restApiContext);return y.value=e.data,e.data}async function k(e){let t=await g(l.restApiContext,e);return y.value=y.value.filter(t=>t.id!==e),t}async function A(e){return await _(l.restApiContext,e)}function j(){b.value=!0}function M(){b.value=!1}return{mcpAccessEnabled:x,fetchWorkflowsAvailableForMCP:S,setMcpAccessEnabled:C,toggleWorkflowMcpAccess:w,currentUserMCPKey:v,getOrCreateApiKey:T,generateNewApiKey:E,resetCurrentUserMCPKey:D,oauthClients:y,getAllOAuthClients:O,removeOAuthClient:k,getMcpEligibleWorkflows:A,connectPopoverOpen:b,openConnectPopover:j,closeConnectPopover:M}});export{v as t};
//# sourceMappingURL=mcp.store-BS0hY8V7.js.map