(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`b8f7b801-d792-450b-8a37-ed0f7d9be443`,e._sentryDebugIdIdentifier=`sentry-dbid-b8f7b801-d792-450b-8a37-ed0f7d9be443`)})()}catch{}import{C as e,Cn as t,D as n,E as r,Gt as i,It as a,M as o,P as s,T as c,W as l,_ as u,bt as d,ct as f,et as p,it as m,j as h,vn as g,w as _}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{M as v,bt as y,g as b,yt as x}from"./_MapCache-DjbOQyB7.js";import{Hi as S,J as C,K as w,Mi as T,Oi as E,Ui as D,V as O,Vi as k,X as A,_i as j,gi as M,q as N}from"./src-CppJvwzX.js";import{t as P}from"./_plugin-vue_export-helper-B_J4Khre.js";import{Lt as F,r as I,t as L,wr as R,ws as z}from"./users.store-pCkD7Zo0.js";import{S as B,cc as V,rs as H}from"./constants-D1jZwsUK.js";import{t as U}from"./versions.store-1_eor2Ku.js";import{t as W}from"./usePageRedirectionHelper-BoF8hzbN.js";import{t as G}from"./KeyboardShortcutTooltip-BuQeOxiO.js";import{t as K}from"./useGlobalEntityCreation-DU5BFKv0.js";const q=e=>`component`in e;function J(){let t=I(),n=e(()=>t.sidebarMenuCollapsed??!1),r=v(V,n.value?42:300),i=()=>{t.toggleSidebarMenuCollapse(),n.value?r.value=42:r.value=200},o=a(!1);function s(){o.value=!0}function c(e){if(n.value&&e.x>100){i();return}if(!n.value){if(e.x<100&&!n.value){i();return}r.value=e.width}}function l(){o.value=!1}return{isCollapsed:n,toggleCollapse:i,sidebarWidth:r,isResizing:o,onResizeStart:s,onResize:c,onResizeEnd:l}}var Y=s({__name:`VersionUpdateCTA`,props:{disabled:{type:Boolean,default:!1},tooltipText:{default:void 0}},setup(e){let t=e,n=x(),r=U(),a=W(),o=F(),s=async()=>{o.track(`User clicked on update button`,{source:`main-sidebar`}),await a.goToVersions()};return(e,a)=>(p(),c(i(N),{"data-test-id":`version-update-cta-button`,item:{id:`version-update-cta`,icon:{value:`status-warning`,type:`icon`,color:`primary`},disabled:t.disabled,disabledReason:t.tooltipText,label:i(n).baseText(`whatsNew.versionsBehind`,{interpolate:{count:i(r).nextVersions.length>99?`99+`:i(r).nextVersions.length}})},onClick:s},null,8,[`item`]))}}),X=P(s({__name:`BottomMenu`,props:{items:{},isCollapsed:{type:Boolean}},emits:[`select`,`logout`],setup(t,{emit:a}){let s=a,v=U(),y=L(),b=x(),S=e(()=>({available:v.hasVersionUpdates||v.whatsNewArticles.length>0,children:[...v.whatsNewArticles.map(e=>({id:`whats-new-article-${e.id}`,label:e.title,size:`small`,customIconSize:`small`,icon:{type:`emoji`,value:`â€¢`,color:v.isWhatsNewArticleRead(e.id)?`text-light`:`primary`}})),{id:`full-changelog`,icon:`external-link`,label:b.baseText(`mainSidebar.whatsNew.fullChangelog`),link:{href:B,target:`_blank`},size:`small`,customIconSize:`small`},...v.hasVersionUpdates?[{id:`version-upgrade-cta`,component:Y,props:{tooltipText:y.canUserUpdateVersion?void 0:b.baseText(`whatsNew.updateNudgeTooltip`),disabled:!y.canUserUpdateVersion}}]:[]]}));function C(e){s(`select`,e)}function w(){s(`logout`)}return(e,a)=>(p(),n(`div`,{class:g({[e.$style.bottomMenu]:!0,[e.$style.collapsed]:t.isCollapsed})},[_(`div`,{class:g(e.$style.bottomMenuItems)},[(p(!0),n(u,null,m(t.items,s=>(p(),n(u,{key:s.id},[s.children&&s.id===`help`?(p(),c(i(O),{key:`help`,side:`right`,align:`end`,"side-offset":12},{content:d(()=>[_(`div`,{class:g(e.$style.popover)},[(p(!0),n(u,null,m(s.children,e=>(p(),n(u,{key:e.id},[i(q)(e)?(p(),c(f(e.component),l({key:0,ref_for:!0},e.props),null,16)):(p(),c(i(N),{key:1,item:e,onClick:()=>C(e.id)},null,8,[`item`,`onClick`]))],64))),128)),S.value.available?(p(),n(u,{key:0},[o(i(k),{bold:``,size:`small`,class:g(e.$style.popoverTitle),color:`text-light`},{default:d(()=>[...a[0]||=[h(`What's new`,-1)]]),_:1},8,[`class`]),(p(!0),n(u,null,m(S.value.children,e=>(p(),n(u,{key:e.id},[i(q)(e)?(p(),c(f(e.component),l({key:0,ref_for:!0},e.props),null,16)):(p(),c(i(N),{key:1,item:e,onClick:()=>C(e.id)},null,8,[`item`,`onClick`]))],64))),128))],64)):r(``,!0)],2)]),trigger:d(()=>[o(i(N),{"data-test-id":`main-sidebar-${s.id}`,item:s,compact:t.isCollapsed,onClick:()=>C(s.id)},null,8,[`data-test-id`,`item`,`compact`,`onClick`])]),_:2},1024)):s.children&&s.id===`settings`?(p(),c(i(O),{key:`settings`,side:`right`,align:`end`,"side-offset":12},{content:d(()=>[_(`div`,{class:g(e.$style.popover)},[(p(!0),n(u,null,m(s.children,e=>(p(),n(u,{key:e.id},[i(q)(e)?(p(),c(f(e.component),l({key:0,ref_for:!0},e.props),null,16)):(p(),c(i(N),{key:1,item:e,onClick:()=>C(e.id)},null,8,[`item`,`onClick`]))],64))),128)),_(`span`,{class:g(e.$style.divider)},null,2),o(i(N),{"data-test-id":`main-sidebar-log-out`,item:{id:`sign-out`,label:`Sign out`,icon:`door-open`},onClick:w})],2)]),trigger:d(()=>[o(i(N),{"data-test-id":`main-sidebar-${s.id}`,item:s,compact:t.isCollapsed,onClick:()=>C(s.id)},null,8,[`data-test-id`,`item`,`compact`,`onClick`])]),_:2},1024)):(p(),c(i(N),{key:2,"data-test-id":`main-sidebar-${s.id}`,item:s,compact:t.isCollapsed,onClick:()=>C(s.id)},null,8,[`data-test-id`,`item`,`compact`,`onClick`]))],64))),128))],2)],2))}}),[[`__cssModules`,{$style:{bottomMenu:`_bottomMenu_1mulz_125`,collapsed:`_collapsed_1mulz_130`,bottomMenuItems:`_bottomMenuItems_1mulz_134`,popover:`_popover_1mulz_138`,popoverTitle:`_popoverTitle_1mulz_145`,divider:`_divider_1mulz_152`}}]]),Z=P(s({__name:`MainSidebarHeader`,props:{isCollapsed:{type:Boolean},isBeta:{type:Boolean},hideCreate:{type:Boolean}},emits:[`collapse`,`openCommandBar`],setup(e,{emit:s}){let l=s,u=x(),f=R(),m=z(),_=a();b(_,()=>{_.value?.close()});function v(){l(`collapse`)}function O(e){l(`openCommandBar`,e)}let{menu:k,handleSelect:N,createProjectAppendSlotName:P,createWorkflowsAppendSlotName:F,createCredentialsAppendSlotName:I,projectsLimitReachedMessage:L,upgradeLabel:B,hasPermissionToCreateProjects:V}=K();return(a,s)=>(p(),n(`div`,{class:g({[a.$style.header]:!0,[a.$style.collapsed]:e.isCollapsed})},[e.isCollapsed?r(``,!0):(p(),c(i(j),{key:0,to:{name:i(H).HOMEPAGE},class:g(a.$style.logo)},{default:d(()=>[o(i(A),{size:`small`,collapsed:e.isCollapsed,"release-channel":i(m).settings.releaseChannel},{default:d(()=>[e.isBeta?(p(),c(C,{key:0,class:g(a.$style.beta),"data-test-id":`beta-icon`},null,8,[`class`])):r(``,!0),i(f).preferences.branchReadOnly&&!e.isCollapsed?(p(),c(i(E),{key:1,placement:`bottom`},{content:d(()=>[o(i(y),{keypath:`readOnlyEnv.tooltip`,scope:`global`},{link:d(()=>[o(i(M),{to:`https://docs.n8n.io/source-control-environments/setup/#step-4-connect-n8n-and-configure-your-instance`,size:`small`},{default:d(()=>[h(t(i(u).baseText(`readOnlyEnv.tooltip.link`)),1)]),_:1})]),_:1})]),default:d(()=>[o(i(D),{"data-test-id":`read-only-env-icon`,icon:`lock`,class:g(a.$style.readOnlyEnvironmentIcon)},null,8,[`class`])]),_:1})):r(``,!0)]),_:1},8,[`collapsed`,`release-channel`])]),_:1},8,[`to`,`class`])),e.hideCreate?r(``,!0):(p(),c(i(w),{key:1,ref_key:`createBtn`,ref:_,"data-test-id":`universal-add`,menu:i(k),onSelect:i(N)},{[i(F)]:d(()=>[i(f).preferences.branchReadOnly?(p(),c(i(E),{key:0,placement:`right`,content:i(u).baseText(`readOnlyEnv.cantAdd.workflow`)},{default:d(()=>[o(i(D),{class:g(a.$style.iconButton),icon:`lock`,size:`xsmall`},null,8,[`class`])]),_:1},8,[`content`])):r(``,!0)]),[i(I)]:d(()=>[i(f).preferences.branchReadOnly?(p(),c(i(E),{key:0,placement:`right`,content:i(u).baseText(`readOnlyEnv.cantAdd.credential`)},{default:d(()=>[o(i(D),{class:g(a.$style.iconButton),icon:`lock`,size:`xsmall`},null,8,[`class`])]),_:1},8,[`content`])):r(``,!0)]),[i(P)]:d(({item:e})=>[i(f).preferences.branchReadOnly?(p(),c(i(E),{key:0,placement:`right`,content:i(u).baseText(`readOnlyEnv.cantAdd.project`)},{default:d(()=>[o(i(D),{class:g(a.$style.iconButton),icon:`lock`,size:`xsmall`},null,8,[`class`])]),_:1},8,[`content`])):e.disabled?(p(),c(i(E),{key:1,placement:`right`,content:i(L)},{default:d(()=>[i(V)?(p(),c(i(S),{key:1,variant:`subtle`,size:`mini`,class:g(a.$style.upgradeButton),onClick:t=>i(N)(e.id)},{default:d(()=>[h(t(i(B)),1)]),_:1},8,[`class`,`onClick`])):(p(),c(i(D),{key:0,class:g(a.$style.iconButton),icon:`lock`,size:`xsmall`},null,8,[`class`]))]),_:2},1032,[`content`])):r(``,!0)]),default:d(()=>[o(i(T),{class:`n8n-button--highlight`,variant:`ghost`,size:`small`,icon:`plus`,"icon-size":`large`,"aria-label":`Add new item`})]),_:2},1032,[`menu`,`onSelect`])),o(G,{placement:e.isCollapsed?`right`:`bottom`,"show-after":500,label:i(u).baseText(`nodeView.openCommandBar`),shortcut:{keys:[`k`],metaKey:!0}},{default:d(()=>[o(i(T),{class:`n8n-button--highlight`,variant:`ghost`,size:`small`,icon:`search`,"icon-size":`large`,"aria-label":`Open command palette`,onClick:O})]),_:1},8,[`placement`,`label`]),o(G,{placement:e.isCollapsed?`right`:`bottom`,label:e.isCollapsed?i(u).baseText(`mainSidebar.state.expand`):i(u).baseText(`mainSidebar.state.collapse`),"show-after":500,shortcut:{keys:[`[`]}},{default:d(()=>[o(i(T),{id:`toggle-sidebar-button`,class:`n8n-button--highlight`,variant:`ghost`,size:`small`,icon:`panel-left`,"icon-size":`large`,"aria-label":`Toggle sidebar`,onClick:v})]),_:1},8,[`placement`,`label`])],2))}}),[[`__cssModules`,{$style:{header:`_header_1q6ea_125`,collapsed:`_collapsed_1q6ea_138`,logo:`_logo_1q6ea_143`,beta:`_beta_1q6ea_147`,readOnlyEnvironmentIcon:`_readOnlyEnvironmentIcon_1q6ea_152`,iconButton:`_iconButton_1q6ea_162`,upgradeButton:`_upgradeButton_1q6ea_167`}}]]);export{X as n,J as r,Z as t};
//# sourceMappingURL=MainSidebarHeader-C11PZIjQ.js.map