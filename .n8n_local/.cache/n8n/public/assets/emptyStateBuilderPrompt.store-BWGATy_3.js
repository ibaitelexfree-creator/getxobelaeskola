(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`9e59518f-8f8e-45dc-9886-82cd3f7786ec`,e._sentryDebugIdIdentifier=`sentry-dbid-9e59518f-8f8e-45dc-9886-82cd3f7786ec`)})()}catch{}import{C as e,It as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{wi as n}from"./src-CppJvwzX.js";import{Fr as r,Lt as i,Wc as a,lr as o,rt as s,s as c}from"./users.store-pCkD7Zo0.js";import{Nc as l,n as u,rs as d}from"./constants-D1jZwsUK.js";import{j as f}from"./_baseOrderBy-El3qbNHQ.js";function p(e){return typeof e==`object`&&!!e&&`nodes`in e&&Array.isArray(e.nodes)}const m=f(a.EXPERIMENT_EMPTY_STATE_BUILDER_PROMPT,()=>{let a=r(),f=o(),m=c(),h=s(),g=n(),_=i();function v(e){if(e?.nodes){for(let t of e.nodes)if(t.credentials)for(let[e,n]of Object.entries(t.credentials))typeof n==`string`||n.id===null||h.getCredentialById(n.id)||delete t.credentials[e]}}let y=t(null),b=e(()=>a.getVariant(l.name)),x=e(()=>b.value===l.variantBuilderPrompt),S=e(()=>f.userIsTrialing&&x.value);async function C(e,t,n){_.track(`User submitted empty state builder prompt`,{prompt_length:e.length}),y.value=e;let r=await m.createNewWorkflow({name:u,nodes:[],connections:{},projectId:t,parentFolderId:n});await g.push({name:d.WORKFLOW,params:{name:r.id}})}function w(){let e=y.value;return y.value=null,e}async function T(e,t,n){if(!p(e))throw Error(`Invalid workflow data`);v(e),_.track(`User imported workflow from empty state`,{node_count:e.nodes?.length??0});let r=await m.createNewWorkflow({name:e.name??`My workflow`,nodes:e.nodes??[],connections:e.connections??{},settings:e.settings,pinData:e.pinData,meta:e.meta,projectId:t,parentFolderId:n});await g.push({name:d.WORKFLOW,params:{name:r.id}})}return{currentVariant:b,isFeatureEnabled:S,pendingPrompt:e(()=>y.value),createWorkflowWithPrompt:C,consumePendingPrompt:w,createWorkflowFromImport:T}});export{m as t};
//# sourceMappingURL=emptyStateBuilderPrompt.store-BWGATy_3.js.map