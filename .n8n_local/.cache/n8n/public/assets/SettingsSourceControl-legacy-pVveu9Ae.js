!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./usePageRedirectionHelper-legacy-DkG-ZaDD.js","./useClipboard-legacy-CaRHRTup.js","./CopyInput-legacy-tkihub7c.js"],(function(e,t){var s,o,n,a,r,l,c,i,u,d,p,g,h,b,y,f,_,m,x,v,T,C,w,k,U,S,B,E,V,I,P,$,R,z,K,j,N,D,G,L,O,F,M,H,A,Q;return{setters:[function(e){s=e.C,o=e.Cn,n=e.D,a=e.E,r=e.Gt,l=e.It,c=e.M,i=e.P,u=e.Pt,d=e.T,p=e.Z,g=e._t,h=e.bt,b=e.et,y=e.j,f=e.vn,_=e.w},function(e){m=e.bt,x=e.yt},function(e){v=e.Bi,T=e.Hi,C=e.Oi,w=e.Pi,k=e.U,U=e.at,S=e.mt,B=e.st,E=e.zi},function(e){V=e.t},function(e){},function(e){I=e.Cr,P=e.Tr,$=e.fn,R=e.wr,z=e.yr},function(e){e.Ss},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){K=e.t},function(e){},function(e){j=e.t}],execute:function(){(N=document.createElement("style")).textContent="._group_o0gi6_125{padding:0 0 var(--spacing--sm);width:100%;display:block}._group_o0gi6_125 hr{margin:0 0 var(--spacing--xl);border:1px solid var(--color--foreground--tint-1)}._group_o0gi6_125>label{padding:0 0 var(--spacing--2xs);font-size:var(--font-size--sm);display:inline-block}._group_o0gi6_125 small{padding:var(--spacing--2xs)0 0;font-size:var(--font-size--2xs);color:var(--color--text--tint-1);display:inline-block}._readOnly_o0gi6_146 span{font-size:var(--font-size--sm)!important}._groupFlex_o0gi6_150{align-items:flex-start;display:flex}._groupFlex_o0gi6_150>div{flex:1}._groupFlex_o0gi6_150>div:last-child{margin-left:var(--spacing--2xs)}._groupFlex_o0gi6_150 input{width:100%}._connect_o0gi6_164{margin:calc(var(--spacing--2xs)*-1)0 var(--spacing--2xs)}._disconnectButton_o0gi6_168{margin:0 0 0 var(--spacing--2xs);height:40px}._actionBox_o0gi6_173{margin:var(--spacing--2xl)0 0}._sshInput_o0gi6_177{align-items:center;width:100%;display:flex}._sshInput_o0gi6_177>div{flex:auto}._sshInput_o0gi6_177>button{height:42px}._sshInput_o0gi6_177 ._copyInput_o0gi6_188{margin:0 var(--spacing--2xs)}._sshKeyTypeSelect_o0gi6_192{min-width:120px}._copyInput_o0gi6_188{overflow:auto}._branchSelection_o0gi6_200{display:flex}._branchSelection_o0gi6_200>div:first-child{flex:1}._branchSelection_o0gi6_200>div:first-child input{height:36px}._branchSelection_o0gi6_200 button._refreshBranches_o0gi6_209{margin-left:var(--spacing--xs)}._branchSelection_o0gi6_200 button._refreshBranches_o0gi6_209 svg{width:16px;height:16px}\n/*$vite$:1*/",document.head.appendChild(N);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(W=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[W]="b2373357-a943-4bdc-aca6-00fd767148ef",t._sentryDebugIdIdentifier="sentry-dbid-b2373357-a943-4bdc-aca6-00fd767148ef")}catch(t){}var t,W;D={key:0,"data-test-id":"source-control-content-licensed"},G=["href"],L={for:"connectionType"},O={for:"repoUrl"},F={for:"httpsUsername"},M={for:"httpsPassword"},H=["href"],A={key:5,"data-test-id":"source-control-connected-content"},Q=["href"],e("default",V(i({__name:"SettingsSourceControl",setup(e){const t=x(),i=R(),V=K(),N=z(),W=P(),X=$(),J=I(),Y=l(!1),Z=l("ssh"),q=l(""),ee=l(""),te=s((()=>i.preferences.branches.map((e=>({value:e,label:e}))))),se=[{value:"ssh",label:"SSH"},{value:"https",label:"HTTPS"}],oe=async()=>{J.startLoading(),J.setLoadingText(t.baseText("settings.sourceControl.loading.connecting"));try{const e={repositoryUrl:i.preferences.repositoryUrl,connectionType:Z.value};"https"===Z.value&&(e.httpsUsername=q.value,e.httpsPassword=ee.value),await i.savePreferences(e),await i.getBranches(),Y.value=!0,N.showMessage({title:t.baseText("settings.sourceControl.toast.connected.title"),message:t.baseText("settings.sourceControl.toast.connected.message"),type:"success"})}catch(e){N.showError(e,t.baseText("settings.sourceControl.toast.connected.error"))}J.stopLoading()},ne=async()=>{try{"confirm"===await W.confirm(t.baseText("settings.sourceControl.modals.disconnect.message"),t.baseText("settings.sourceControl.modals.disconnect.title"),{confirmButtonText:t.baseText("settings.sourceControl.modals.disconnect.confirm"),cancelButtonText:t.baseText("settings.sourceControl.modals.disconnect.cancel")})&&(J.startLoading(),await i.disconnect(!0),Y.value=!1,q.value="",ee.value="",N.showMessage({title:t.baseText("settings.sourceControl.toast.disconnected.title"),message:t.baseText("settings.sourceControl.toast.disconnected.message"),type:"success"}))}catch(e){N.showError(e,t.baseText("settings.sourceControl.toast.disconnected.error"))}J.stopLoading()},ae=async()=>{J.startLoading();try{await i.updatePreferences({branchName:i.preferences.branchName,branchReadOnly:i.preferences.branchReadOnly,branchColor:i.preferences.branchColor}),N.showMessage({title:t.baseText("settings.sourceControl.saved.title"),type:"success"})}catch(e){N.showError(e,t.baseText("settings.sourceControl.saved.error"))}J.stopLoading()},re=e=>{e!==i.preferences.branchName&&(i.preferences.branchName=e)},le=()=>{V.goToUpgrade("source-control","upgrade-source-control")};p((async()=>{X.set(t.baseText("settings.sourceControl.title")),i.isEnterpriseSourceControlEnabled&&await(async()=>{await i.getPreferences(),i.preferences.connected&&(Y.value=!0,Z.value=i.preferences.connectionType||"ssh",i.getBranches())})()}));const ce=u({repoUrl:!1,keyGeneratorType:!1,httpsUsername:!1,httpsPassword:!1});function ie(e,t){ce[e]=t}const ue=s((()=>{const e=[{name:"REQUIRED"}];return"ssh"===Z.value?e.push({name:"MATCH_REGEX",config:{regex:/^(?:git@|ssh:\/\/git@|[\w.-]+@)(?:[\w.-]+|\[[0-9a-fA-F:]+])(?::\d+)?[:\/][\w\-~.]+(?:\/[\w\-~.]+)*(?:\.git)?(?:\/.*)?$/,message:t.baseText("settings.sourceControl.repoUrlInvalid")}}):e.push({name:"MATCH_REGEX",config:{regex:/^https:\/\/.+$/,message:t.baseText("settings.sourceControl.enterValidHttpsUrl")}}),e})),de=[{name:"REQUIRED"}],pe=[{name:"REQUIRED"}],ge=s((()=>"ssh"===Z.value?ce.repoUrl:ce.repoUrl&&ce.httpsUsername&&ce.httpsPassword)),he=[{name:"REQUIRED"}];async function be(){try{"confirm"===await W.confirm(t.baseText("settings.sourceControl.modals.refreshSshKey.message"),t.baseText("settings.sourceControl.modals.refreshSshKey.title"),{confirmButtonText:t.baseText("settings.sourceControl.modals.refreshSshKey.confirm"),cancelButtonText:t.baseText("settings.sourceControl.modals.refreshSshKey.cancel")})&&(await i.generateKeyPair(i.preferences.keyGeneratorType),N.showMessage({title:t.baseText("settings.sourceControl.refreshSshKey.successful.title"),type:"success"}))}catch(e){N.showError(e,t.baseText("settings.sourceControl.refreshSshKey.error.title"))}}const ye=async()=>{try{await i.getBranches(),N.showMessage({title:t.baseText("settings.sourceControl.refreshBranches.success"),type:"success"})}catch(e){N.showError(e,t.baseText("settings.sourceControl.refreshBranches.error"))}},fe=e=>{const t=e;t!==i.preferences.keyGeneratorType&&(i.preferences.keyGeneratorType=t)};return g(Z,(()=>{ce.repoUrl=!1,ce.httpsUsername=!1,ce.httpsPassword=!1,Y.value||(i.preferences.repositoryUrl="")})),(e,s)=>(b(),n("div",null,[c(r(E),{size:"2xlarge",tag:"h1"},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.title")),1)])),_:1}),r(i).isEnterpriseSourceControlEnabled?(b(),n("div",D,[c(r(v),{theme:"secondary",icon:"info",class:"mt-2xl mb-l"},{default:h((()=>[c(r(m),{keypath:"settings.sourceControl.description",tag:"span",scope:"global"},{link:h((()=>[_("a",{href:r(t).baseText("settings.sourceControl.docs.url"),target:"_blank"},o(r(t).baseText("settings.sourceControl.description.link")),9,G)])),_:1})])),_:1}),c(r(E),{size:"xlarge",tag:"h2",class:"mb-s"},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.gitConfig")),1)])),_:1}),Y.value?a("",!0):(b(),n("div",{key:0,class:f(e.$style.group)},[_("label",L,o(r(t).baseText("settings.sourceControl.connectionType")),1),c(r(U),{id:"connectionType",modelValue:Z.value,"onUpdate:modelValue":s[0]||(s[0]=e=>Z.value=e),label:"",type:"select",name:"connectionType",options:se,"data-test-id":"source-control-connection-type-select"},null,8,["modelValue"])],2)),_("div",{class:f(e.$style.group)},[_("label",O,o("ssh"===Z.value?r(t).baseText("settings.sourceControl.sshRepoUrl"):r(t).baseText("settings.sourceControl.httpsRepoUrl")),1),_("div",{class:f(e.$style.groupFlex)},[c(r(U),{id:"repoUrl",modelValue:r(i).preferences.repositoryUrl,"onUpdate:modelValue":s[1]||(s[1]=e=>r(i).preferences.repositoryUrl=e),label:"",class:"ml-0",name:"repoUrl","validate-on-blur":"","validation-rules":ue.value,disabled:Y.value,placeholder:"ssh"===Z.value?r(t).baseText("settings.sourceControl.sshRepoUrlPlaceholder"):r(t).baseText("settings.sourceControl.httpsRepoUrlPlaceholder"),onValidate:s[2]||(s[2]=e=>ie("repoUrl",e))},null,8,["modelValue","validation-rules","disabled","placeholder"]),Y.value?(b(),d(r(T),{key:0,variant:"subtle",class:f(e.$style.disconnectButton),size:"large",icon:"trash-2","data-test-id":"source-control-disconnect-button",onClick:ne},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.button.disconnect")),1)])),_:1},8,["class"])):a("",!0)],2),Y.value||"ssh"!==Z.value?a("",!0):(b(),d(r(k),{key:0,type:"info",class:"mt-s"},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.sshFormatNotice")),1)])),_:1})),Y.value||"https"!==Z.value?a("",!0):(b(),d(r(k),{key:1,type:"info",class:"mt-s"},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.httpsFormatNotice")),1)])),_:1}))],2),"https"!==Z.value||Y.value?a("",!0):(b(),n("div",{key:1,class:f(e.$style.group)},[_("label",F,o(r(t).baseText("settings.sourceControl.httpsUsername")),1),c(r(U),{id:"httpsUsername",modelValue:q.value,"onUpdate:modelValue":s[3]||(s[3]=e=>q.value=e),label:"",name:"httpsUsername",type:"text","validate-on-blur":"","validation-rules":pe,placeholder:r(t).baseText("settings.sourceControl.httpsUsernamePlaceholder"),onValidate:s[4]||(s[4]=e=>ie("httpsUsername",e))},null,8,["modelValue","placeholder"])],2)),"https"!==Z.value||Y.value?a("",!0):(b(),n("div",{key:2,class:f(e.$style.group)},[_("label",M,o(r(t).baseText("settings.sourceControl.httpsPersonalAccessToken")),1),c(r(U),{id:"httpsPassword",modelValue:ee.value,"onUpdate:modelValue":s[5]||(s[5]=e=>ee.value=e),label:"",name:"httpsPassword",type:"password","validate-on-blur":"","validation-rules":pe,placeholder:r(t).baseText("settings.sourceControl.httpsPersonalAccessTokenPlaceholder"),onValidate:s[6]||(s[6]=e=>ie("httpsPassword",e))},null,8,["modelValue","placeholder"]),c(r(k),{type:"warning",class:"mt-s"},{default:h((()=>[c(r(m),{keypath:"settings.sourceControl.httpsWarningNotice",tag:"span",scope:"global"},{strong:h((()=>[_("strong",null,o(r(t).baseText("settings.sourceControl.httpsWarningNotice.strong")),1)])),repo:h((()=>[...s[11]||(s[11]=[_("code",null,"repo",-1)])])),publicRepo:h((()=>[...s[12]||(s[12]=[_("code",null,"public_repo",-1)])])),_:1})])),_:1})],2)),"ssh"===Z.value&&r(i).preferences.publicKey?(b(),n("div",{key:3,class:f(e.$style.group)},[_("label",null,o(r(t).baseText("settings.sourceControl.sshKey")),1),_("div",{class:f({[e.$style.sshInput]:!Y.value})},[Y.value?a("",!0):(b(),d(r(U),{key:0,id:"keyGeneratorType",class:f(e.$style.sshKeyTypeSelect),label:"",type:"select",name:"keyGeneratorType","data-test-id":"source-control-ssh-key-type-select","validate-on-blur":"","validation-rules":de,options:r(i).sshKeyTypesWithLabel,"model-value":r(i).preferences.keyGeneratorType,onValidate:s[7]||(s[7]=e=>ie("keyGeneratorType",e)),"onUpdate:modelValue":fe},null,8,["class","options","model-value"])),c(j,{class:f(e.$style.copyInput),collapse:"",size:"medium",value:r(i).preferences.publicKey,"copy-button-text":r(t).baseText("generic.clickToCopy")},null,8,["class","value","copy-button-text"]),Y.value?a("",!0):(b(),d(r(T),{key:1,variant:"subtle",size:"large",icon:"refresh-cw","data-test-id":"source-control-refresh-ssh-key-button",onClick:be},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.refreshSshKey")),1)])),_:1}))],2),c(r(k),{type:"info",class:"mt-s"},{default:h((()=>[c(r(m),{keypath:"settings.sourceControl.sshKeyDescription",tag:"span",scope:"global"},{link:h((()=>[_("a",{href:r(t).baseText("settings.sourceControl.docs.setup.ssh.url"),target:"_blank"},o(r(t).baseText("settings.sourceControl.sshKeyDescriptionLink")),9,H)])),_:1})])),_:1})],2)):a("",!0),Y.value?a("",!0):(b(),d(r(T),{key:4,size:"large",disabled:!ge.value,class:f(e.$style.connect),"data-test-id":"source-control-connect-button",onClick:oe},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.button.connect")),1)])),_:1},8,["disabled","class"])),Y.value?(b(),n("div",A,[_("div",{class:f(e.$style.group)},[s[13]||(s[13]=_("hr",null,null,-1)),c(r(E),{size:"xlarge",tag:"h2",class:"mb-s"},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.instanceSettings")),1)])),_:1}),_("label",null,o(r(t).baseText("settings.sourceControl.branches")),1),_("div",{class:f(e.$style.branchSelection)},[c(r(U),{id:"branchName",label:"",type:"select",name:"branchName",class:"mb-s","data-test-id":"source-control-branch-select","validate-on-blur":"","validation-rules":he,options:te.value,"model-value":r(i).preferences.branchName,onValidate:s[8]||(s[8]=e=>ie("branchName",e)),"onUpdate:modelValue":re},null,8,["options","model-value"]),c(r(C),{placement:"top"},{content:h((()=>[_("span",null,o(r(t).baseText("settings.sourceControl.refreshBranches.tooltip")),1)])),default:h((()=>[c(r(T),{variant:"subtle",iconOnly:"",size:"xlarge",icon:"refresh-cw","data-test-id":"source-control-refresh-branches-button",class:f(e.$style.refreshBranches),onClick:ye},null,8,["class"])])),_:1})],2),c(r(B),{modelValue:r(i).preferences.branchReadOnly,"onUpdate:modelValue":s[9]||(s[9]=e=>r(i).preferences.branchReadOnly=e),class:f(e.$style.readOnly),"data-test-id":"source-control-read-only-checkbox"},{label:h((()=>[c(r(m),{keypath:"settings.sourceControl.protected",tag:"span",scope:"global"},{bold:h((()=>[_("strong",null,o(r(t).baseText("settings.sourceControl.protected.bold")),1)])),_:1})])),_:1},8,["modelValue","class"])],2),_("div",{class:f(e.$style.group)},[_("label",null,o(r(t).baseText("settings.sourceControl.color")),1),_("div",null,[c(r(S),{modelValue:r(i).preferences.branchColor,"onUpdate:modelValue":s[10]||(s[10]=e=>r(i).preferences.branchColor=e),size:"small"},null,8,["modelValue"])])],2),_("div",{class:f([e.$style.group,"pt-s"])},[c(r(T),{size:"large",disabled:!r(i).preferences.branchName,"data-test-id":"source-control-save-settings-button",onClick:ae},{default:h((()=>[y(o(r(t).baseText("settings.sourceControl.button.save")),1)])),_:1},8,["disabled"])],2)])):a("",!0)])):(b(),d(r(w),{key:1,"data-test-id":"source-control-content-unlicensed",class:f(e.$style.actionBox),description:r(t).baseText("settings.sourceControl.actionBox.description"),"button-text":r(t).baseText("settings.sourceControl.actionBox.buttonText"),"onClick:button":le},{heading:h((()=>[_("span",null,o(r(t).baseText("settings.sourceControl.actionBox.title")),1)])),description:h((()=>[y(o(r(t).baseText("settings.sourceControl.actionBox.description"))+" ",1),_("a",{href:r(t).baseText("settings.sourceControl.docs.url"),target:"_blank"},o(r(t).baseText("settings.sourceControl.actionBox.description.link")),9,Q)])),_:1},8,["class","description","button-text"]))]))}}),[["__cssModules",{$style:{group:"_group_o0gi6_125",readOnly:"_readOnly_o0gi6_146",groupFlex:"_groupFlex_o0gi6_150",connect:"_connect_o0gi6_164",disconnectButton:"_disconnectButton_o0gi6_168",actionBox:"_actionBox_o0gi6_173",sshInput:"_sshInput_o0gi6_177",copyInput:"_copyInput_o0gi6_188",sshKeyTypeSelect:"_sshKeyTypeSelect_o0gi6_192",branchSelection:"_branchSelection_o0gi6_200",refreshBranches:"_refreshBranches_o0gi6_209"}}]]))}}}));
//# sourceMappingURL=SettingsSourceControl-legacy-pVveu9Ae.js.map