!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./nodeIcon-legacy-KJSlWBN7.js","./NodeIcon-legacy-DOI-M5xN.js","./nodeTransforms-legacy-Bt0tXwjd.js","./templateTransforms-legacy-Crg03c3X.js","./SetupTemplateFormStep-legacy-Dg_SDFk3.js","./CredentialPicker-legacy-Cca8dwDU.js","./templateActions-legacy-BTVs6mu0.js","./TemplatesView-legacy-gL2BSFXS.js"],(function(e,t){var a,l,n,i,s,d,r,o,c,u,p,y,f,m,g,_,v,w,b,C,k,h,T,S,I,j,x,A,E,$,B,P,U,D,L,O,R,F,K,M,W,N,z,H;return{setters:[function(e){a=e.C,l=e.Cn,n=e.D,i=e.Gt,s=e.It,d=e.M,r=e.P,o=e.T,c=e.Z,u=e._,p=e._t,y=e.bt,f=e.et,m=e.it,g=e.j,_=e.vn,v=e.w},function(e){w=e.yt},function(e){b=e.Ci,C=e.Et,k=e.Hi,h=e.Oi,T=e.gi,S=e.wi,I=e.zi},function(e){j=e.t},function(e){},function(e){x=e.C,A=e.Lt,E=e.pa,$=e.rt,B=e.s,P=e.xn,U=e.xr},function(e){D=e.rs},function(e){},function(e){L=e.j,O=e.r},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){R=e.n,F=e.r,K=e.t},function(e){},function(e){M=e.t},function(e){W=e.t}],execute:function(){(N=document.createElement("style")).textContent="._grid_u018b_125{flex-direction:column;justify-content:center;max-width:768px;margin:0 auto;display:flex}._notice_u018b_133{margin-bottom:var(--spacing--2xl)}._appCredentialsContainer_u018b_137{gap:var(--spacing--2xl);flex-direction:column;display:flex}._appCredential_u018b_137:not(:last-of-type){padding-bottom:var(--spacing--2xl);border-bottom:1px solid var(--color--foreground--tint-1)}._actions_u018b_148{margin-top:var(--spacing--3xl);margin-bottom:var(--spacing--3xl);justify-content:space-between;align-items:center;display:flex}\n/*$vite$:1*/",document.head.appendChild(N);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(V=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[V]="8bc2ddc5-31c8-448d-8607-732c73d0eee9",t._sentryDebugIdIdentifier="sentry-dbid-8bc2ddc5-31c8-448d-8607-732c73d0eee9")}catch(t){}var t,V;z=L("setupTemplate",(()=>{const e=s(""),t=s(!0),l=s(!1),n=P(),i=x(),d=$(),r=O(),o=B(),c=a((()=>e.value?n.getFullTemplateById(e.value):null)),{appCredentials:u,credentialOverrides:p,credentialUsages:y,credentialsByKey:f,nodesRequiringCredentialsSorted:m,numFilledCredentials:g,selectedCredentialIdByKey:_,setSelectedCredentialId:v,unsetSelectedCredential:w}=F(a((()=>c.value?.workflow.nodes??[]))),b=new Set(["httpBasicAuth","httpCustomAuth","httpDigestAuth","httpHeaderAuth","oAuth1Api","oAuth2Api","httpQueryAuth"]),C=()=>{for(const e of y.value){if(b.has(e.credentialType))continue;const t=d.getCredentialsByType(e.credentialType);1===t.length&&(_.value[e.key]=t[0].id)}},k=async()=>{!c.value&&e.value&&(await n.fetchTemplateById(e.value),C())};return{credentialsByKey:f,isLoading:t,isSaving:l,appCredentials:u,nodesRequiringCredentialsSorted:m,template:c,credentialUsages:y,selectedCredentialIdByKey:_,credentialOverrides:p,numFilledCredentials:g,createWorkflow:async t=>{const{router:a}=t,s=A();if(c.value)try{l.value=!0;const t=await M({template:c.value,credentialOverrides:p.value,rootStore:r,workflowsStore:o,nodeTypeProvider:i});s.track("User closed cred setup",{completed:!0,creds_filled:g.value,creds_needed:y.value.length,workflow_id:t.id}),s.track("User inserted workflow template",{source:"workflow",template_id:E(e.value),wf_template_repo_session_id:n.currentSessionId}),s.track("User saved new workflow from template",{template_id:E(e.value),workflow_id:t.id,wf_template_repo_session_id:n.currentSessionId}),await a.replace({name:D.WORKFLOW,params:{name:t.id}})}finally{l.value=!1}},skipSetup:async({router:t})=>{const a=U(),l=A();await a.run("templatesWorkflowView.openWorkflow",{source:"workflow",template_id:e.value,wf_template_repo_session_id:n.currentSessionId}),l.track("User closed cred setup",{completed:!1,creds_filled:0,creds_needed:y.value.length,workflow_id:null}),await t.replace({name:D.TEMPLATE_IMPORT,params:{id:e.value}})},init:async()=>{t.value=!0;try{_.value={},await Promise.all([d.fetchAllCredentials(),d.fetchCredentialTypes(!1),i.loadNodeTypesIfNotLoaded(),k()]),C()}finally{t.value=!1}},loadTemplateIfNeeded:k,setInitialCredentialSelection:C,setTemplateId:t=>{e.value=t},setSelectedCredentialId:v,unsetSelectedCredential:w}})),H={key:1},e("default",j(r({__name:"SetupWorkflowFromTemplateView",setup(e){const t=z(),s=w(),r=b(),j=S(),x=a((()=>Array.isArray(r.params.id)?r.params.id[0]:r.params.id)),A=a((()=>t.template?.name??"unknown")),E=a((()=>!t.isLoading)),$=a((()=>j.resolve({name:D.TEMPLATE_IMPORT,params:{id:x.value}}).fullPath));return p(x,(async e=>{t.setTemplateId(e),await t.loadTemplateIfNeeded()})),t.setTemplateId(x.value),c((async()=>{await t.init(),await(async()=>!!t.template&&0===t.credentialUsages.length&&(await t.skipSetup({router:j}),!0))()})),(e,a)=>(f(),o(W,{"go-back-enabled":!0},{header:y((()=>[E.value?(f(),o(i(I),{key:0,tag:"h1",size:"2xlarge"},{default:y((()=>[g(l(i(s).baseText("templateSetup.title",{interpolate:{name:A.value}})),1)])),_:1})):(f(),o(i(C),{key:1,variant:"h1"}))])),content:y((()=>[v("div",{class:_(e.$style.grid)},[v("div",{class:_(e.$style.notice),"data-test-id":"info-callout"},[E.value?(f(),o(R,{key:0,"app-credentials":i(t).appCredentials},null,8,["app-credentials"])):(f(),o(i(C),{key:1,variant:"p"}))],2),v("div",null,[E.value?(f(),n("ol",{key:0,class:_(e.$style.appCredentialsContainer)},[(f(!0),n(u,null,m(i(t).credentialUsages,((l,n)=>(f(),o(K,{key:l.key,class:_(e.$style.appCredential),order:n+1,credentials:l,"selected-credential-id":i(t).selectedCredentialIdByKey[l.key],onCredentialSelected:a[0]||(a[0]=e=>i(t).setSelectedCredentialId(e.credentialUsageKey,e.credentialId)),onCredentialDeselected:a[1]||(a[1]=e=>i(t).unsetSelectedCredential(e.credentialUsageKey))},null,8,["class","order","credentials","selected-credential-id"])))),128))],2)):(f(),n("div",{key:1,class:_(e.$style.appCredentialsContainer)},[d(i(C),{class:_(e.$style.appCredential),variant:"p",rows:3},null,8,["class"]),d(i(C),{class:_(e.$style.appCredential),variant:"p",rows:3},null,8,["class"])],2))]),v("div",{class:_(e.$style.actions)},[d(i(T),{href:$.value,"new-window":!1,onClick:a[2]||(a[2]=e=>(async e=>{e.preventDefault(),await t.skipSetup({router:j})})(e))},{default:y((()=>[g(l(i(s).baseText("templateSetup.skip")),1)])),_:1},8,["href"]),E.value?(f(),o(i(h),{key:0,content:i(s).baseText("templateSetup.continue.button.fillRemaining"),disabled:i(t).numFilledCredentials>0},{default:y((()=>[d(i(k),{size:"large",label:i(s).baseText("templateSetup.continue.button"),disabled:i(t).isSaving||0===i(t).numFilledCredentials,"data-test-id":"continue-button",onClick:a[3]||(a[3]=e=>i(t).createWorkflow({router:i(j)}))},null,8,["label","disabled"])])),_:1},8,["content","disabled"])):(f(),n("div",H,[d(i(C),{variant:"button"})]))],2)],2)])),_:1}))}}),[["__cssModules",{$style:{grid:"_grid_u018b_125",notice:"_notice_u018b_133",appCredentialsContainer:"_appCredentialsContainer_u018b_137",appCredential:"_appCredential_u018b_137",actions:"_actions_u018b_148"}}]]))}}}));
//# sourceMappingURL=SetupWorkflowFromTemplateView-legacy-Bv2NZOvi.js.map