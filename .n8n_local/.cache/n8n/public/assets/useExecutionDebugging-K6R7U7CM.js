(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`765c438a-5ea7-4e4e-8231-0c855b3ad2e1`,e._sentryDebugIdIdentifier=`sentry-dbid-765c438a-5ea7-4e4e-8231-0c855b3ad2e1`)})()}catch{}import{C as e,L as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as n}from"./_MapCache-DjbOQyB7.js";import{wi as r}from"./src-CppJvwzX.js";import{Ja as i,Lt as a,Tr as o,Vt as s,Xc as c,Yr as l,r as u,s as d,ws as f,yr as p}from"./users.store-pCkD7Zo0.js";import{Ss as m,Yc as h,rs as g}from"./constants-D1jZwsUK.js";import{r as _}from"./_baseOrderBy-El3qbNHQ.js";import{t as v}from"./usePageRedirectionHelper-BoF8hzbN.js";const y=m=>{let y=a(),b=r(),x=n(),S=o(),C=p(),w=d(),T=m??s(),E=f(),D=u(),O=v(),k=e(()=>E.isEnterpriseFeatureEnabled[h.DebugInEditor]);return{applyExecutionData:async e=>{let n=await w.getExecution(e),r=w.workflowObject,i=w.getNodes();if(!n?.data?.resultData)return;let{runData:a}=n.data.resultData,o=Object.keys(a),s=o.filter(e=>!i.some(t=>t.name===e)),u=Object.keys(w.workflow.pinData??{}),d=o.filter(e=>u.includes(e));if(d.length>0){let n=t(`p`,[x.baseText(`nodeView.confirmMessage.debug.message`),t(`ul`,{class:`mt-l ml-l`},d.map(e=>t(`li`,c(e))))]);if(await S.confirm(n,x.baseText(`nodeView.confirmMessage.debug.headline`),{type:`warning`,confirmButtonText:x.baseText(`nodeView.confirmMessage.debug.confirmButtonText`),cancelButtonText:x.baseText(`nodeView.confirmMessage.debug.cancelButtonText`),customClass:`matching-pinned-nodes-confirmation`})===`confirm`)d.forEach(e=>{let t=w.getNodeByName(e);t&&w.unpinData({node:t})});else{await b.push({name:g.EXECUTION_PREVIEW,params:{name:r.id,executionId:e}});return}}T.resetAllNodesIssues(),T.setWorkflowExecutionData(n);let f=i.filter(e=>!r.getParentNodes(e.name).length),p=0;f.forEach(e=>{let t=a[e.name]?.[0];if(t?.data?.main){let n=t.data.main.find(e=>e&&e.length>0);n&&(p++,w.pinData({node:e,data:n,isRestoration:!0}))}}),C.showToast({title:x.baseText(`nodeView.showMessage.debug.title`),message:x.baseText(`nodeView.showMessage.debug.content`),type:`info`}),s.length&&C.showToast({title:x.baseText(`nodeView.showMessage.debug.missingNodes.title`),message:x.baseText(`nodeView.showMessage.debug.missingNodes.content`,{interpolate:{nodeNames:s.join(`, `)}}),type:`warning`}),y.track(`User clicked debug execution button`,{instance_id:_().instanceId,exec_status:l(n)?n.status:``,override_pinned_data:f.length===p,all_exec_data_imported:s.length===0})},handleDebugLinkClick:e=>{if(!k.value){D.openModalWithData({name:i,data:{title:x.baseText(`executionsList.debug.paywall.title`),footerButtonAction:()=>{D.closeModal(i),O.goToUpgrade(`debug`,`upgrade-debug`)}}}),e.preventDefault(),e.stopPropagation();return}w.isInDebugMode=!1}}};export{y as t};
//# sourceMappingURL=useExecutionDebugging-K6R7U7CM.js.map