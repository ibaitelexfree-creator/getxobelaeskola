(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`2e022697-8a6e-4b0e-9fd6-2fd72c955795`,e._sentryDebugIdIdentifier=`sentry-dbid-2e022697-8a6e-4b0e-9fd6-2fd72c955795`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,Q as l,T as u,Z as d,_ as f,bt as p,c as m,et as h,h as g,it as _,j as v,jt as y,vn as b,w as x}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as S}from"./_MapCache-DjbOQyB7.js";import{Hi as ee,Lt as te,Mi as C,Rt as w,Vi as T,st as E,z as D,zi as O,zt as ne}from"./src-CppJvwzX.js";import{t as k}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import"./date-picker-CHH0vNVG.js";import{C as A,Mt as j,yr as M}from"./users.store-pCkD7Zo0.js";import"./ParameterInputList-BmOOAGJV.js";import{gi as N}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import{r as P}from"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import"./dataTable.store-dy4dvFXe.js";import"./useClipboard-Duc7LjuO.js";import"./executions.store-DnLtKXBA.js";import"./assistant.store-BGYzebcZ.js";import"./chatPanel.store-YdM_XYGp.js";import"./RunData-DoJODYvb.js";import"./NDVEmptyState-Cd-QhxaI.js";import"./useEnvFeatureFlag-CHY3xSda.js";import"./externalSecrets.ee.store-RuZGBiOy.js";import"./uniqBy-Bd2DEoH8.js";import"./semver-DulOjSKL.js";import"./usePinnedData-C6FFXoty.js";import"./nodeIcon--7uU1Imq.js";import"./canvas.utils-C8dCdoZZ.js";import"./nodeCreator.store-KD9kt9dE.js";import"./useCanvasOperations-BHGWcL34.js";import"./folders.store-CS_gIPIm.js";import"./QuickConnectBanner-zXpJTy1t.js";import"./useQuickConnect-D8uMNvJo.js";import"./CredentialIcon-B1JZV04S.js";import"./useDynamicCredentials-BSZ25lEI.js";import"./RunDataHtml-Dkm6vMd9.js";import"./Draggable-YWqutRc8.js";import{t as F}from"./NodeIcon-Dv1e4Lvu.js";import"./VirtualSchema-SoERffbL.js";import"./useCalloutHelpers-BqZQxC7j.js";import"./useTelemetryContext-Dq1_6uNp.js";import"./useRunWorkflow-DzzlHC01.js";import"./pushConnection.store-IFO3HVvG.js";import"./nodeTransforms-CG9uauaw.js";import"./vue-json-pretty-CT_xxsnb.js";import"./collaboration.store-QKYwE2H2.js";import"./dateFormatter-C82w-7IH.js";import"./useExecutionHelpers-mcaelfkG.js";import"./useFreeAiCredits-DbEV2VUt.js";import"./NodeSettings-BBj2nP6A.js";import"./KeyboardShortcutTooltip-BuQeOxiO.js";import"./vue-BgT2pM2d.js";import{a as re,i as ie,n as ae,o as I,r as oe,t as L}from"./useWorkflowDiffUI-CVIwKLt1.js";import"./useCanvasMapping-DLJo3gwW.js";import"./useKeybindings-B_gtbMl6.js";import"./useActions-C_2-IL4P.js";var R={key:0,class:`ml-4xs`},z={key:0},B={style:{flex:`1`}},V={key:2},H=k(c({__name:`WorkflowDiffView`,props:{sourceWorkflow:{},targetWorkflow:{},sourceLabel:{default:`Before`},targetLabel:{default:`After`},tidyUp:{type:Boolean}},setup(e){let o=e,{selectedDetailId:c,onNodeClick:l,syncIsEnabled:k}=ie(),P=m(),H=A(),U=S(),W=M(),{source:G,target:K,nodesDiff:q,connectionsDiff:J}=ae(t(()=>j(o.sourceWorkflow)),t(()=>j(o.targetWorkflow))),{settingsDiff:Y,nodeChanges:X,nextNodeChange:se,previousNodeChange:ce,activeTab:Z,tabs:le,setActiveTab:ue,selectedNode:de,nodeDiffs:fe,changesCount:Q,isSourceWorkflowNew:pe,modifiers:me,setSelectedDetailId:$}=L({sourceWorkflow:t(()=>o.sourceWorkflow),targetWorkflow:t(()=>o.targetWorkflow),nodesDiff:q,connectionsDiff:J,selectedDetailId:c});return l(e=>{let t=q.value.get(e);t&&t.status!==N.Eq&&(c.value=e)}),d(async()=>{try{await H.loadNodeTypesIfNotLoaded()}catch(e){W.showError(e,U.baseText(`workflowDiff.error.loadNodeTypes`))}}),(t,o)=>(h(),r(`div`,{class:b(a(P).workflowDiffViewContainer)},[x(`div`,{class:b(a(P).header)},[x(`div`,{class:b(a(P).headerLeft)},[s(a(O),{tag:`h4`,size:`medium`},{default:p(()=>[v(n(e.sourceWorkflow?.name||e.targetWorkflow?.name),1)]),_:1})],2),x(`div`,{class:b(a(P).headerRight)},[s(a(E),{modelValue:a(k),"onUpdate:modelValue":o[0]||=e=>y(k)?k.value=e:null,"label-size":`small`,label:`Sync views`,class:`mb-0 mr-s`},null,8,[`modelValue`]),s(a(te),{trigger:`click`,"popper-options":{placement:`bottom-end`,modifiers:a(me)},"popper-class":a(P).popper,onVisibleChange:a(ue)},{dropdown:p(()=>[s(a(ne),{"hide-on-click":!1},{default:p(()=>[x(`div`,{class:b(a(P).dropdownContent)},[s(a(D),{modelValue:a(Z),"onUpdate:modelValue":o[1]||=e=>y(Z)?Z.value=e:null,options:a(le),class:b([a(P).tabs,`mb-xs`])},{option:p(({label:e,data:t})=>[v(n(e)+` `,1),t?.count?(h(),r(`span`,R,` (`+n(t.count)+`) `,1)):i(``,!0)]),_:1},8,[`modelValue`,`options`,`class`]),x(`div`,null,[a(Z)===`nodes`?(h(),r(`ul`,z,[a(X).length>0?(h(!0),r(f,{key:0},_(a(X),e=>(h(),u(a(w),{key:e.node.id,class:b({[a(P).clickableChange]:!0,[a(P).clickableChangeActive]:a(c)===e.node.id}),onClick:g(t=>a($)(e.node.id),[`prevent`])},{default:p(()=>[s(I,{type:e.status},null,8,[`type`]),s(F,{"node-type":e.type,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),x(`span`,{class:b(a(P).nodeName)},n(e.node.name),3)]),_:2},1032,[`class`,`onClick`]))),128)):(h(),r(`li`,{key:1,class:b(a(P).emptyState)},[s(a(T),{color:`text-base`,size:`small`},{default:p(()=>[v(n(a(U).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))])):i(``,!0),a(Z)===`connectors`?(h(),r(`ul`,{key:1,class:b(a(P).changes)},[a(J).size>0?(h(!0),r(f,{key:0},_(a(J),e=>(h(),r(`li`,{key:e[0]},[x(`div`,null,[s(I,{type:e[1].status},null,8,[`type`])]),x(`div`,B,[x(`ul`,{class:b(a(P).changesNested)},[s(a(w),{class:b({[a(P).clickableChange]:!0,[a(P).clickableChangeActive]:a(c)===e[1].connection.source?.id}),onClick:g(t=>a($)(e[1].connection.source?.id),[`prevent`])},{default:p(()=>[s(F,{"node-type":e[1].connection.sourceType,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),x(`span`,{class:b(a(P).nodeName)},n(e[1].connection.source?.name),3)]),_:2},1032,[`class`,`onClick`]),x(`div`,{class:b(a(P).separator)},null,2),s(a(w),{class:b({[a(P).clickableChange]:!0,[a(P).clickableChangeActive]:a(c)===e[1].connection.target?.id}),onClick:g(t=>a($)(e[1].connection.target?.id),[`prevent`])},{default:p(()=>[s(F,{"node-type":e[1].connection.targetType,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),x(`span`,{class:b(a(P).nodeName)},n(e[1].connection.target?.name),3)]),_:2},1032,[`class`,`onClick`])],2)])]))),128)):(h(),r(`li`,{key:1,class:b(a(P).emptyState)},[s(a(T),{color:`text-base`,size:`small`},{default:p(()=>[v(n(a(U).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))],2)):i(``,!0),a(Z)===`settings`?(h(),r(`ul`,V,[a(Y).length>0?(h(!0),r(f,{key:0},_(a(Y),e=>(h(),r(`li`,{key:e.name},[s(a(T),{color:`text-dark`,size:`medium`,tag:`div`,bold:``},{default:p(()=>[v(n(a(U).baseText(`workflowSettings.${e.name}`)),1)]),_:2},1024),s(re,{"old-string":e.before,"new-string":e.after,class:b(a(P).noNumberDiff)},null,8,[`old-string`,`new-string`,`class`])]))),128)):(h(),r(`li`,{key:1,class:b(a(P).emptyState)},[s(a(T),{color:`text-base`,size:`small`},{default:p(()=>[v(n(a(U).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))])):i(``,!0)])],2)]),_:1})]),default:p(()=>[s(a(ee),{variant:`subtle`,style:{"--button--radius":`4px 0 0 4px`}},{default:p(()=>[a(Q)?(h(),r(`div`,{key:0,class:b(a(P).circleBadge)},n(a(Q)),3)):i(``,!0),v(` `+n(a(U).baseText(`workflowDiff.changes`)),1)]),_:1})]),_:1},8,[`popper-options`,`popper-class`,`onVisibleChange`]),s(a(C),{variant:`subtle`,icon:`chevron-left`,class:b(a(P).navigationButton),style:{"--button--radius":`0`,margin:`0 -1px`},onClick:a(ce)},null,8,[`class`,`onClick`]),s(a(C),{variant:`subtle`,icon:`chevron-right`,class:b(a(P).navigationButton),style:{"--button--radius":`0 4px 4px 0`},onClick:a(se)},null,8,[`class`,`onClick`])],2)],2),s(oe,{"source-nodes":a(G).nodes,"source-connections":a(G).connections,"target-nodes":a(K).nodes,"target-connections":a(K).connections,"source-label":e.sourceLabel,"target-label":e.targetLabel,"source-exists":!!e.sourceWorkflow,"target-exists":!!e.targetWorkflow,"selected-node":a(de),"node-diffs":a(fe),"is-source-workflow-new":a(pe),"apply-layout":e.tidyUp,"nodes-diff":a(q),"connections-diff":a(J),onCloseAside:o[2]||=e=>c.value=void 0},null,8,[`source-nodes`,`source-connections`,`target-nodes`,`target-connections`,`source-label`,`target-label`,`source-exists`,`target-exists`,`selected-node`,`node-diffs`,`is-source-workflow-new`,`apply-layout`,`nodes-diff`,`connections-diff`])],2))}}),[[`__cssModules`,{$style:{workflowDiffViewContainer:`_workflowDiffViewContainer_hfu81_125`,tabs:`_tabs_hfu81_131`,popper:`_popper_hfu81_142`,changes:`_changes_hfu81_149`,clickableChange:`_clickableChange_hfu81_158`,changesNested:`_changesNested_hfu81_162`,clickableChangeActive:`_clickableChangeActive_hfu81_183`,nodeName:`_nodeName_hfu81_187`,separator:`_separator_hfu81_195`,circleBadge:`_circleBadge_hfu81_204`,dropdownContent:`_dropdownContent_hfu81_218`,noNumberDiff:`_noNumberDiff_hfu81_230`,header:`_header_hfu81_239`,navigationButton:`_navigationButton_hfu81_246`,headerLeft:`_headerLeft_hfu81_251`,headerRight:`_headerRight_hfu81_252`,emptyState:`_emptyState_hfu81_257`}}]]),U=k(c({__name:`DemoDiffView`,setup(e){let t=P(),i=S(),s=o(void 0),c=o(void 0),f=o(!1);function p(e){return e==null?!0:typeof e==`object`&&`nodes`in e&&`connections`in e}function m(){window.parent&&window.parent.postMessage(JSON.stringify({command:`n8nReady`,version:t.versionCli}),`*`)}async function g(e){if(!(!e||typeof e.data!=`string`||!e.data?.includes?.(`"command"`)))try{let t=JSON.parse(e.data);if(t&&t.command===`openDiff`){if(!p(t.oldWorkflow)||!p(t.newWorkflow))return;s.value=t.oldWorkflow??void 0,c.value=t.newWorkflow??void 0,f.value=t.tidyUp===!0}}catch{}}return d(()=>{window.addEventListener(`message`,g),m()}),l(()=>{window.removeEventListener(`message`,g)}),(e,t)=>(h(),r(`div`,{class:b(e.$style.demoDiffView)},[s.value||c.value?(h(),u(H,{key:0,"source-workflow":s.value,"target-workflow":c.value,"source-label":a(i).baseText(`workflowDiff.label.before`),"target-label":a(i).baseText(`workflowDiff.label.after`),"tidy-up":f.value},null,8,[`source-workflow`,`target-workflow`,`source-label`,`target-label`,`tidy-up`])):(h(),r(`div`,{key:1,class:b(e.$style.waitingState)},[x(`p`,null,n(a(i).baseText(`workflowDiff.waitingForData`)),1)],2))],2))}}),[[`__cssModules`,{$style:{demoDiffView:`_demoDiffView_t8kr6_125`,waitingState:`_waitingState_t8kr6_132`}}]]);export{U as default};
//# sourceMappingURL=DemoDiffView-91vPEyox.js.map