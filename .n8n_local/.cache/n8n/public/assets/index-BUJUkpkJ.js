const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FixedCollectionParameter-Dxy4eDtN.js","assets/_plugin-vue_export-helper-B_J4Khre.js","assets/src-CppJvwzX.js","assets/CalendarDate-CR2L-kBx.js","assets/_MapCache-DjbOQyB7.js","assets/vue.runtime.esm-bundler-1e_FtHOF.js","assets/chunk-Din3qlHY.js","assets/sanitize-html-K63Olwt_.js","assets/en-CTDtIhP1.js","assets/src-By0uoI3W.css","assets/nodeCreator.store-KD9kt9dE.js","assets/constants-D1jZwsUK.js","assets/merge-CKxbv8m_.js","assets/users.store-pCkD7Zo0.js","assets/_baseOrderBy-El3qbNHQ.js","assets/dateformat-BhE5sUDK.js","assets/useDebounce-D6lADr4O.js","assets/nodeIcon--7uU1Imq.js","assets/canvas.utils-C8dCdoZZ.js","assets/RunData-DoJODYvb.js","assets/uniqBy-Bd2DEoH8.js","assets/NDVEmptyState-Cd-QhxaI.js","assets/NDVEmptyState-wmCtLnDW.css","assets/vue-json-pretty-CT_xxsnb.js","assets/useRunWorkflow-DzzlHC01.js","assets/useCanvasOperations-BHGWcL34.js","assets/core-DLhNJSBD.js","assets/core-IO9YfrHc.js","assets/xml-BJs1rC06.js","assets/VueMarkdown-OrZqWAIM.js","assets/usePinnedData-C6FFXoty.js","assets/folders.store-CS_gIPIm.js","assets/executions.store-DnLtKXBA.js","assets/useCanvasOperations-C5vD0y-x.css","assets/retry-C_b9sBX6.js","assets/pushConnection.store-IFO3HVvG.js","assets/assistant.store-BGYzebcZ.js","assets/collaboration.store-QKYwE2H2.js","assets/useClipboard-Duc7LjuO.js","assets/chatPanel.store-YdM_XYGp.js","assets/useExecutionHelpers-mcaelfkG.js","assets/dateFormatter-C82w-7IH.js","assets/externalSecrets.ee.store-RuZGBiOy.js","assets/useEnvFeatureFlag-CHY3xSda.js","assets/RunDataHtml-Dkm6vMd9.js","assets/RunDataHtml-Dn-4rgtR.css","assets/RunData-Dg8CXr1L.css","assets/ParameterInputList-BmOOAGJV.js","assets/exports--h7UC0Af.js","assets/vue-BgT2pM2d.js","assets/comlink-Mw9RuxlG.js","assets/date-picker-CHH0vNVG.js","assets/flatten-D8LKlTI-.js","assets/dialog-Ds437WFa.js","assets/VirtualSchema-SoERffbL.js","assets/Draggable-YWqutRc8.js","assets/Draggable-B0pfmmgs.css","assets/NodeIcon-Dv1e4Lvu.js","assets/NodeIcon-Cd4SL1LV.css","assets/useCalloutHelpers-BqZQxC7j.js","assets/useTelemetryContext-Dq1_6uNp.js","assets/useTelemetryContext-DP1IjWBS.css","assets/nodeTransforms-CG9uauaw.js","assets/TextWithHighlights-FXXrxJMD.js","assets/TextWithHighlights-CnnnTpA3.css","assets/VirtualSchema-BRqEE3IK.css","assets/CredentialIcon-B1JZV04S.js","assets/CredentialIcon-D9KQZeCk.css","assets/useQuickConnect-D8uMNvJo.js","assets/useDynamicCredentials-BSZ25lEI.js","assets/ParameterInputList-xQvaQYBT.css","assets/FixedCollectionParameter-CxRFRVl7.css","assets/useImportCurlCommand-CVAkvAV3.js","assets/DefaultLayout-CajRpraH.js","assets/MainSidebarHeader-C11PZIjQ.js","assets/versions.store-1_eor2Ku.js","assets/KeyboardShortcutTooltip-BuQeOxiO.js","assets/KeyboardShortcutTooltip-Bz9DcSWs.css","assets/useGlobalEntityCreation-DU5BFKv0.js","assets/sortByProperty-B0onItmN.js","assets/usePageRedirectionHelper-BoF8hzbN.js","assets/MainSidebarHeader-DfnF5fYL.css","assets/AppSidebar-Dkkt5893.js","assets/useBugReporting-CHn_Ru2H.js","assets/useKeybindings-B_gtbMl6.js","assets/useSettingsItems-DieYApNB.js","assets/resourceCenter.store-DlWGan11.js","assets/readyToRun.store-DM7AW4os.js","assets/constants-BeYoedeu.js","assets/sourceControl.eventBus-C0Et3VBv.js","assets/AppSidebar-DtqedDiv.css","assets/BaseLayout-CcCtCTTx.js","assets/BaseLayout-CVWlZK-m.css","assets/SettingsLayout-CkAwb9pf.js","assets/SettingsLayout-BRRWcuYf.css","assets/WorkflowLayout-CuLtgzH_.js","assets/router-BsVVJ6vf.js","assets/dist-BiTDpeeI.js","assets/banners.store-Ce6ZTWqJ.js","assets/banners-CfXPQxke.css","assets/sso.store-Dd63iqNy.js","assets/roles.store-Cq99swn7.js","assets/mcp.constants-BtNzU3_O.js","assets/dataTable.store-dy4dvFXe.js","assets/insights.store-CIIvho7C.js","assets/insights.utils-B2NpOI0Q.js","assets/insights.constants-DHL43iRt.js","assets/useLogsTreeExpand-CjcPPamK.js","assets/AnimatedSpinner-BEM3aFx0.js","assets/AnimatedSpinner-OiUdRqev.css","assets/useLogsTreeExpand-CdQhtp-t.css","assets/TimeAgo-BLqTSlco.js","assets/usePushConnection-Bqaw2gmy.js","assets/aiTemplatesStarterCollection.store-NMq1bc_J.js","assets/LogsPanel-Dlq2t92C.js","assets/useResizablePanel-Dt5N79tf.js","assets/useResizablePanel-CmmrQ6iY.css","assets/fileUtils-CrAesjp5.js","assets/LogsPanel-D3-Lirqy.css","assets/ProjectIcon-D-HRIqn6.js","assets/ProjectIcon-O0hNAMma.css","assets/ConnectionTracker-JAeLGxUW.js","assets/ConnectionTracker-C-iaSkJ1.css","assets/useWorkflowActivate-CpGKv5Cd.js","assets/useWorkflowsCache-DLQfYyl1.js","assets/injectStrict-CjZBqt9B.js","assets/LoadingView-CXSfI5xz.js","assets/LoadingView-RsKvRnvk.css","assets/FolderBreadcrumbs-BF2BbNF-.js","assets/ProjectBreadcrumb-Crk3D_Vf.js","assets/ProjectBreadcrumb-BbqEo2-6.css","assets/FolderBreadcrumbs-CFrVy9F7.css","assets/useMcp-Vjm6-wcy.js","assets/useExecutionDebugging-K6R7U7CM.js","assets/TagsDropdown-B5U3GUsU.js","assets/TagsDropdown-BhpNFWHz.css","assets/WorkflowTagsDropdown-Bab-8Jcr.js","assets/utils-B9GTX8VZ.js","assets/WorkflowLayout-BSmdPVtu.css","assets/AuthLayout-mboz8-XI.js","assets/DemoLayout-_yTuwWvR.js","assets/ChatLayout-gyvhtGDd.js","assets/chat.store-a0NAXg9S.js","assets/ChatAgentAvatar-B0HR6UWG.js","assets/ChatAgentAvatar-DQdF-oav.css","assets/ChatLayout-DjWIOk4B.css"])))=>i.map(i=>d[i]);
(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();export function __vite_legacy_guard(){import.meta.url,import(`_`).catch(()=>1),(async function*(){})().next()}try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`46990392-a51b-4799-bdf2-c0f90e43da2f`,e._sentryDebugIdIdentifier=`sentry-dbid-46990392-a51b-4799-bdf2-c0f90e43da2f`)})()}catch{}import{o as t,t as n}from"./chunk-Din3qlHY.js";import{$ as r,Bt as i,C as a,Cn as o,D as s,E as c,G as l,Gt as u,It as d,J as f,L as p,M as m,N as h,P as g,Pt as _,Q as v,T as y,U as b,Ut as x,W as S,Z as C,_ as w,_t as T,at as E,b as D,bn as O,bt as k,c as A,ct as j,et as M,f as N,ft as P,h as F,i as I,it as L,j as R,jt as ee,k as te,m as ne,mt as re,n as z,ot as B,p as ie,pt as V,q as ae,r as H,st as oe,vn as U,vt as se,w as W,xt as ce,y as le,yn as ue,zt as de}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{C as fe,D as pe,Q as me,_t as he,bt as ge,gt as G,m as _e,pt as ve,vt as ye,x as be,yt as K,z as xe}from"./_MapCache-DjbOQyB7.js";import{$n as Se,At as Ce,Bi as we,Ci as Te,Di as Ee,Dt as De,Et as Oe,F as ke,Fi as Ae,Ft as je,Gi as Me,Hi as q,Hn as Ne,Ht as Pe,I as Fe,It as Ie,Jt as Le,Ki as Re,Lt as ze,Mi as Be,N as Ve,Oi as He,Ot as Ue,Pi as We,Pt as Ge,Q as Ke,Rt as qe,T as Je,Ti as Ye,U as Xe,Ui as J,V as Ze,Vi as Y,Y as Qe,Z as $e,_t as et,at as tt,bt as nt,c as rt,d as it,di as at,et as ot,fn as st,ft as ct,gi as lt,gt as ut,hi as dt,it as ft,j as pt,ji as mt,jn as ht,jt as gt,kt as _t,m as vt,mi as yt,mn as bt,nn as xt,o as St,ot as Ct,p as wt,pi as Tt,pn as Et,pt as Dt,q as Ot,rn as kt,st as At,wi as jt,wn as Mt,z as Nt,zi as Pt,zt as Ft}from"./src-CppJvwzX.js";import{t as X}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{n as It,t as Lt}from"./table-BUhHdyzF.js";import{t as Rt}from"./date-picker-CHH0vNVG.js";import{$a as zt,$c as Bt,$o as Vt,Aa as Ht,Ao as Ut,Ar as Wt,Bo as Gt,Br as Kt,Bt as qt,C as Jt,Co as Yt,Cr as Xt,Cs as Zt,Da as Qt,Di as $t,Do as en,Dr as tn,Dt as nn,Ea as rn,Ec as an,Ei as on,Eo as sn,Er as cn,Et as ln,Fa as un,Fi as dn,Fo as fn,Fr as pn,Fs as mn,Ft as hn,Ga as gn,Go as _n,Gt as vn,Ha as yn,Ho as bn,Hr as xn,Ia as Sn,Ii as Cn,Io as wn,It as Tn,Ja as En,Ji as Dn,Jo as On,Ka as kn,Kc as An,Ko as jn,Kr as Mn,Kt as Nn,Lc as Pn,Li as Fn,Ln as In,Lo as Ln,Lr as Rn,Lt as zn,Ma as Bn,Mo as Vn,Mr as Hn,Mt as Un,Na as Wn,Ni as Gn,No as Kn,Nr as qn,Oa as Jn,Oc as Yn,Oo as Xn,Or as Zn,Ot as Qn,Pa as $n,Po as er,Pr as tr,Q as nr,Qa as rr,Qc as ir,Qo as ar,Ri as or,Ro as sr,Rr as cr,Rt as lr,So as ur,Ss as dr,Ta as fr,Ti as pr,To as mr,Tr as hr,Tt as gr,Ua as _r,Uo as vr,Ut as yr,Vi as br,Vo as xr,Vt as Sr,Wa as Cr,Wi as wr,Wo as Tr,Xa as Er,Xi as Dr,Xo as Or,Ya as kr,Yo as Ar,Za as jr,Zc as Mr,Zi as Nr,Zo as Pr,_o as Fr,_r as Ir,_s as Lr,ac as Rr,ao as zr,as as Br,bo as Vr,br as Hr,bs as Ur,co as Wr,cs as Gr,d as Kr,dn as qr,do as Jr,ds as Yr,eo as Xr,es as Zr,fi as Qr,fn as $r,fo as ei,fs as ti,g as ni,ga as ri,gi as ii,go as ai,gs as oi,hi as si,hn as ci,ho as li,hs as ui,i as di,ic as fi,ii as pi,io as mi,is as hi,ja as gi,jc as _i,ji as vi,jo as yi,jr as bi,ka as xi,ko as Si,lc as Ci,lo as wi,lr as Ti,ls as Ei,mn as Di,mo as Oi,ms as ki,no as Ai,ns as ji,o as Mi,oc as Ni,oo as Pi,os as Fi,pn as Ii,po as Li,ps as Ri,qa as zi,qo as Bi,r as Vi,ro as Hi,rs as Ui,rt as Wi,s as Gi,so as Ki,ss as qi,t as Ji,to as Yi,ts as Xi,uc as Zi,un as Qi,uo as $i,ur as ea,us as ta,vo as na,vs as ra,vt as ia,w as aa,wi as oa,wo as sa,wr as ca,ws as la,xn as ua,xo as da,xr as fa,xs as pa,yo as ma,yr as ha,ys as ga,zi as _a,zo as va,zt as ya}from"./users.store-pCkD7Zo0.js";import{A as ba,C as xa,E as Sa,N as Ca,P as wa,S as Ta,a as Ea,i as Da,o as Oa,t as ka,w as Aa,x as ja}from"./ParameterInputList-BmOOAGJV.js";import{t as Ma}from"./radio-CPckkBdz.js";import{n as Na,t as Z}from"./col-D8aZ4Gpw.js";import{i as Pa,n as Fa,r as Ia}from"./dialog-Ds437WFa.js";import{t as La}from"./BaseLayout-CcCtCTTx.js";import{As as Ra,Bs as za,Co as Ba,Cr as Va,Cs as Ha,D as Ua,Da as Wa,Ds as Ga,Es as Ka,Fa as qa,Fs as Ja,Ga as Ya,Gc as Xa,Go as Q,Gt as Za,Ha as Qa,Ho as $a,Hs as eo,Ii as to,Ir as no,Is as ro,Ji as io,Ko as ao,Ls as oo,Lt as so,M as co,Ms as lo,No as uo,Ns as fo,O as po,Oo as mo,Os as ho,Pc as go,Po as _o,Ps as vo,Qi as yo,Ra as bo,Rs as xo,S as So,Ss as Co,Ts as wo,Tt as To,Ua as Eo,Uo as Do,Us as Oo,V as ko,Vo as Ao,Vr as jo,Vs as Mo,Wo as No,Xi as Po,Yc as Fo,Yi as Io,Zi as Lo,_s as Ro,as as zo,br as Bo,c as Vo,cs as Ho,dl as Uo,dn as Wo,ds as Go,ei as Ko,fa as qo,fs as Jo,gi as Yo,go as Xo,gs as Zo,h as Qo,hi as $o,ho as es,hs as ts,is as ns,j as rs,ji as is,js as as,ks as os,lo as ss,ls as cs,ms as ls,n as us,ns as ds,o as fs,oo as ps,os as ms,pa as hs,ps as gs,qi as _s,qo as vs,rs as $,so as ys,ss as bs,t as xs,ti as Ss,ul as Cs,us as ws,vo as Ts,vs as Es,w as Ds,ws as Os,xa as ks,ys as As,zs as js}from"./constants-D1jZwsUK.js";import{v as Ms}from"./merge-CKxbv8m_.js";import{A as Ns,C as Ps,N as Fs,S as Is,_ as Ls,b as Rs,c as zs,g as Bs,i as Vs,k as Hs,n as Us,r as Ws,v as Gs,x as Ks}from"./_baseOrderBy-El3qbNHQ.js";import{n as qs,t as Js}from"./banners.store-Ce6ZTWqJ.js";import{t as Ys}from"./dateformat-BhE5sUDK.js";import{n as Xs,t as Zs}from"./useDebounce-D6lADr4O.js";import{t as Qs}from"./versions.store-1_eor2Ku.js";import{t as $s}from"./usePageRedirectionHelper-BoF8hzbN.js";import{t as ec}from"./dataTable.store-dy4dvFXe.js";import{t as tc}from"./Modal-DQeDdfPI.js";import{t as nc}from"./useClipboard-Duc7LjuO.js";import{n as rc,r as ic,t as ac}from"./useBugReporting-CHn_Ru2H.js";import{t as oc}from"./executions.store-DnLtKXBA.js";import{t as sc}from"./CopyInput-DChEtJl3.js";import{t as cc}from"./apiKeys.store-n_GNjqP1.js";import{t as lc}from"./assistant.store-BGYzebcZ.js";import{t as uc}from"./chatPanel.store-YdM_XYGp.js";import{n as dc,r as fc,t as pc}from"./auth.eventBus-OiCaRLlR.js";import"./RunData-DoJODYvb.js";import"./NDVEmptyState-Cd-QhxaI.js";import{$ as mc,A as hc,At as gc,B as _c,C as vc,Ct as yc,D as bc,Dt as xc,E as Sc,Et as Cc,F as wc,G as Tc,H as Ec,I as Dc,J as Oc,K as kc,L as Ac,M as jc,N as Mc,O as Nc,Ot as Pc,P as Fc,Q as Ic,R as Lc,S as Rc,St as zc,T as Bc,Tt as Vc,U as Hc,V as Uc,W as Wc,X as Gc,Y as Kc,Z as qc,_ as Jc,_t as Yc,a as Xc,at as Zc,b as Qc,bt as $c,c as el,ct as tl,d as nl,dt as rl,et as il,f as al,ft as ol,g as sl,gt as cl,h as ll,ht as ul,i as dl,it as fl,j as pl,jt as ml,k as hl,kt as gl,l as _l,lt as vl,m as yl,mt as bl,n as xl,nt as Sl,o as Cl,ot as wl,p as Tl,pt as El,q as Dl,rt as Ol,s as kl,st as Al,t as jl,tt as Ml,u as Nl,ut as Pl,v as Fl,vt as Il,w as Ll,wt as Rl,x as zl,xt as Bl,y as Vl,yt as Hl,z as Ul}from"./exports--h7UC0Af.js";import"./useEnvFeatureFlag-CHY3xSda.js";import{t as Wl}from"./externalSecrets.ee.store-RuZGBiOy.js";import{t as Gl}from"./uniqBy-Bd2DEoH8.js";import{n as Kl,t as ql}from"./semver-DulOjSKL.js";import"./usePinnedData-C6FFXoty.js";import"./nodeIcon--7uU1Imq.js";import{l as Jl,o as Yl}from"./canvas.utils-C8dCdoZZ.js";import{t as Xl}from"./nodeCreator.store-KD9kt9dE.js";import{a as Zl,r as Ql,t as $l}from"./useCanvasOperations-BHGWcL34.js";import{t as eu}from"./folders.store-CS_gIPIm.js";import{o as tu}from"./QuickConnectBanner-zXpJTy1t.js";import{t as nu}from"./useQuickConnect-D8uMNvJo.js";import{n as ru,t as iu}from"./ProjectIcon-D-HRIqn6.js";import{t as au}from"./ProjectCardBadge-dALz__Ys.js";import{t as ou}from"./usage.store-CK5aU6GK.js";import{t as su}from"./CredentialIcon-B1JZV04S.js";import{t as cu}from"./useDynamicCredentials-BSZ25lEI.js";import{t as lu}from"./RunDataHtml-Dkm6vMd9.js";import"./Draggable-YWqutRc8.js";import{t as uu}from"./NodeIcon-Dv1e4Lvu.js";import{c as du,l as fu}from"./VirtualSchema-SoERffbL.js";import{t as pu}from"./useCalloutHelpers-BqZQxC7j.js";import{t as mu}from"./useTelemetryContext-Dq1_6uNp.js";import{n as hu,t as gu}from"./useRunWorkflow-DzzlHC01.js";import{n as _u}from"./pushConnection.store-IFO3HVvG.js";import{t as vu}from"./nodeTransforms-CG9uauaw.js";import{t as yu}from"./vue-json-pretty-CT_xxsnb.js";import{t as bu}from"./collaboration.store-QKYwE2H2.js";import"./dateFormatter-C82w-7IH.js";import"./useExecutionHelpers-mcaelfkG.js";import{t as xu}from"./EnterpriseEdition.ee-BF3fOBuQ.js";import"./useFreeAiCredits-DbEV2VUt.js";import{r as Su}from"./NodeSettings-BBj2nP6A.js";import{t as Cu}from"./TimeAgo-BLqTSlco.js";import{t as wu}from"./orderBy-KAUxkCYD.js";import{t as Tu}from"./ProjectSharing-DgwjJKfK.js";import{t as Eu}from"./roles.store-Cq99swn7.js";import{t as Du}from"./KeyboardShortcutTooltip-BuQeOxiO.js";import{t as Ou}from"./sortByProperty-B0onItmN.js";import"./TagsDropdown-B5U3GUsU.js";import{t as ku}from"./WorkflowTagsDropdown-Bab-8Jcr.js";import{n as Au,r as ju,t as Mu}from"./ExternalSecretsProviderConnectionSwitch.ee-CQj4SLPh.js";import{t as Nu}from"./SecretsProviderImage.ee-Ds8eHg9b.js";import"./dist-BiTDpeeI.js";import"./sso.store-Dd63iqNy.js";import{n as Pu,r as Fu,t as Iu}from"./router-BsVVJ6vf.js";import"./insights.store-CIIvho7C.js";import"./insights.constants-DHL43iRt.js";import"./insights.utils-B2NpOI0Q.js";import{a as Lu,l as Ru,n as zu,u as Bu,y as Vu}from"./constants-BeYoedeu.js";import{t as Hu}from"./logStreaming.store-DPCwPbu7.js";import"./vue-BgT2pM2d.js";import"./templateTransforms-u0_D8fwP.js";import{n as Uu,r as Wu,t as Gu}from"./SetupTemplateFormStep-M1Yhoabp.js";import"./CredentialPicker-u0Fuk2eM.js";import{t as Ku}from"./sourceControl.eventBus-C0Et3VBv.js";import{n as qu,r as Ju,t as Yu}from"./CanvasRunWorkflowButton-B7EvorNA.js";import{r as Xu}from"./utils-B9GTX8VZ.js";import{t as Zu}from"./useMcp-Vjm6-wcy.js";import{t as Qu}from"./useCredentialResolvers-B8bNF6VZ.js";import{a as $u,i as ed,n as td,o as nd,r as rd,t as id}from"./useWorkflowDiffUI-CVIwKLt1.js";import"./useCanvasMapping-DLJo3gwW.js";import"./useKeybindings-B_gtbMl6.js";import"./useActions-C_2-IL4P.js";import{n as ad,r as od,t as sd}from"./shuffle-BkOGhYVg.js";import{t as cd}from"./useWorkflowActivate-CpGKv5Cd.js";import{t as ld}from"./useGlobalEntityCreation-DU5BFKv0.js";import{l as ud,p as dd,t as fd,y as pd}from"./chat.store-a0NAXg9S.js";import{t as md}from"./SlideTransition-B2CvVl70.js";import"./values-B1M_mAMY.js";import{t as hd}from"./LoadingView-CXSfI5xz.js";import{a as gd,c as _d,d as vd,f as yd,i as bd,n as xd,o as Sd,r as Cd,s as wd,u as Td}from"./chart-xT2RiC54.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Ed=ht({...Pa,direction:{type:String,default:`rtl`,values:[`ltr`,`rtl`,`ttb`,`btt`]},size:{type:[String,Number],default:`30%`},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:`2`}}),Dd=g({name:`ElDrawer`,components:{ElOverlay:Bt,ElFocusTrap:Le,ElIcon:xt,Close:Ne},inheritAttrs:!1,props:Ed,emits:Ia,setup(e,{slots:t}){bt({scope:`el-drawer`,from:`the title slot`,replacement:`the header slot`,version:`3.0.0`,ref:`https://element-plus.org/en-US/component/drawer.html#slots`},a(()=>!!t.title)),bt({scope:`el-drawer`,from:`custom-class`,replacement:`class`,version:`2.3.0`,ref:`https://element-plus.org/en-US/component/drawer.html#attributes`,type:`Attribute`},a(()=>!!e.customClass));let n=d(),r=d(),i=st(`drawer`),{t:o}=Et(),s=a(()=>e.direction===`rtl`||e.direction===`ltr`),c=a(()=>Se(e.size));return{...Fa(e,n),drawerRef:n,focusStartRef:r,isHorizontal:s,drawerSize:c,ns:i,t:o}}}),Od=[`aria-label`,`aria-labelledby`,`aria-describedby`],kd=[`id`,`aria-level`],Ad=[`aria-label`],jd=[`id`];function Md(e,t,n,r,i,a){let l=B(`close`),u=B(`el-icon`),d=B(`el-focus-trap`),f=B(`el-overlay`);return M(),y(D,{to:`body`,disabled:!e.appendToBody},[m(z,{name:e.ns.b(`fade`),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:``},{default:k(()=>[ce(m(f,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:k(()=>[m(d,{loop:``,trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:k(()=>[W(`div`,S({ref:`drawerRef`,"aria-modal":`true`,"aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&`open`,e.customClass],style:e.isHorizontal?`width: `+e.drawerSize:`height: `+e.drawerSize,role:`dialog`,onClick:t[1]||=F(()=>{},[`stop`])}),[W(`span`,{ref:`focusStartRef`,class:U(e.ns.e(`sr-focus`)),tabindex:`-1`},null,2),e.withHeader?(M(),s(`header`,{key:0,class:U(e.ns.e(`header`))},[e.$slots.title?E(e.$slots,`title`,{key:1},()=>[c(` DEPRECATED SLOT `)]):E(e.$slots,`header`,{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e(`title`)},()=>[e.$slots.title?c(`v-if`,!0):(M(),s(`span`,{key:0,id:e.titleId,role:`heading`,"aria-level":e.headerAriaLevel,class:U(e.ns.e(`title`))},o(e.title),11,kd))]),e.showClose?(M(),s(`button`,{key:2,"aria-label":e.t(`el.drawer.close`),class:U(e.ns.e(`close-btn`)),type:`button`,onClick:t[0]||=(...t)=>e.handleClose&&e.handleClose(...t)},[m(u,{class:U(e.ns.e(`close`))},{default:k(()=>[m(l)]),_:1},8,[`class`])],10,Ad)):c(`v-if`,!0)],2)):c(`v-if`,!0),e.rendered?(M(),s(`div`,{key:1,id:e.bodyId,class:U(e.ns.e(`body`))},[E(e.$slots,`default`)],10,jd)):c(`v-if`,!0),e.$slots.footer?(M(),s(`div`,{key:2,class:U(e.ns.e(`footer`))},[E(e.$slots,`footer`)],2)):c(`v-if`,!0)],16,Od)]),_:3},8,[`trapped`,`focus-trap-el`,`focus-start-el`,`onReleaseRequested`])]),_:3},8,[`mask`,`overlay-class`,`z-index`,`onClick`]),[[ie,e.visible]])]),_:3},8,[`name`,`onAfterEnter`,`onAfterLeave`,`onBeforeLeave`])],8,[`disabled`])}var Nd=Mt(kt(Dd,[[`render`,Md],[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue`]])),Pd=g({__name:`NonProductionLicenseBanner`,setup(e){return(e,t)=>(M(),y(qs,{name:`NON_PRODUCTION_LICENSE`,dismissible:!1},{mainContent:k(()=>[W(`span`,null,o(u(G).baseText(`banners.nonProductionLicense.message`)),1)]),_:1}))}}),Fd=g({__name:`TrialOverBanner`,setup(e){let t=$s();function n(){t.goToUpgrade(`canvas-nav`,`upgrade-canvas-nav`,`redirect`)}return(e,t)=>(M(),y(qs,{"custom-icon":`info`,theme:`warning`,name:`TRIAL_OVER`},{mainContent:k(()=>[W(`span`,null,o(u(G).baseText(`banners.trialOver.message`)),1)]),trailingContent:k(()=>[m(u(q),{class:`n8n-button--success`,variant:`solid`,icon:`zap`,size:`small`,onClick:n},{default:k(()=>[R(o(u(G).baseText(`generic.upgradeNow`)),1)]),_:1})]),_:1}))}}),Id={key:0},Ld=[`value`,`max`],Rd=8,zd=X(g({__name:`TrialBanner`,setup(e){let t=Ti(),n=$s(),r=jt(),i=a(()=>t.bannerTimeLeft),l=a(()=>t.showExecutions),d=a(()=>({text:t.bannerCta.text,icon:t.bannerCta.icon,size:t.bannerCta.size,style:t.bannerCta.style,href:t.bannerCta.href})),f=a(()=>t.bannerIcon),p=a(()=>t.trialTimeLeft),h=a(()=>{if(i.value.text)return i.value.text;let{count:e,unit:t}=p.value;return G.baseText(`banners.trial.message.${t}`,{adjustToNumber:e,interpolate:{count:String(e)}})}),g=a(()=>{let e=t.currentPlanData,n=t.currentUsageData;return!e||!n?null:{...e,usage:n}}),_=a(()=>g.value?.usage?g.value.usage.executions<g.value.monthlyExecutionsLimit:0),v=a(()=>{if(!g.value?.usage)return 0;let e=g.value.usage.executions,t=Rd*g.value.monthlyExecutionsLimit/100;return e<t?t:e}),b=a(()=>g.value?.monthlyExecutionsLimit?g.value.monthlyExecutionsLimit:0),x=a(()=>{if(!g.value?.usage)return 0;let e=g.value.usage.executions,t=g.value.monthlyExecutionsLimit;return e>t?t:e});function S(){d.value.href?d.value.href.startsWith(`http`)?window.open(d.value.href,`_blank`):r.push(d.value.href):n.goToUpgrade(`canvas-nav`,`upgrade-canvas-nav`,`redirect`)}return(e,n)=>(M(),y(qs,{name:`TRIAL`,theme:`custom`,dismissible:u(t).bannerDismissible,"dismiss-permanently":``,"custom-icon":f.value},{mainContent:k(()=>[W(`div`,{class:U(e.$style.content)},[i.value.show?(M(),s(`span`,Id,o(h.value),1)):c(``,!0),l.value?(M(),s(`div`,{key:1,class:U(e.$style.usageCounter)},[W(`div`,{class:U(e.$style.progressBarDiv)},[W(`progress`,{class:U([_.value?e.$style.progressBarSuccess:e.$style.progressBarDanger,e.$style.progressBar]),value:v.value,max:b.value},null,10,Ld)],2),W(`div`,{class:U(e.$style.executionsCountSection)},[m(u(Y),{size:`xsmall`,color:_.value?`text-dark`:`danger`},{default:k(()=>[R(o(x.value)+`/`+o(b.value),1)]),_:1},8,[`color`]),n[0]||=R(`\xA0`,-1),m(u(Y),{size:`xsmall`,color:_.value?`text-dark`:`danger`},{default:k(()=>[R(o(u(G).baseText(`executionUsage.label.executions`)),1)]),_:1},8,[`color`])],2)],2)):c(``,!0)],2)]),trailingContent:k(()=>[W(`div`,{class:U(e.$style.trailingContentWrapper)},[m(u(q),{variant:d.value.style,icon:d.value.icon,size:d.value.size,onClick:S},{default:k(()=>[R(o(d.value.text),1)]),_:1},8,[`variant`,`icon`,`size`])],2)]),_:1},8,[`dismissible`,`custom-icon`]))}}),[[`__cssModules`,{$style:{content:`_content_1fc63_125`,progressBarDiv:`_progressBarDiv_1fc63_131`,progressBar:`_progressBar_1fc63_131`,progressBarSuccess:`_progressBarSuccess_1fc63_160`,progressBarDanger:`_progressBarDanger_1fc63_170`,usageText:`_usageText_1fc63_179`,usageCounter:`_usageCounter_1fc63_186`,danger:`_danger_1fc63_194`,executionsCountSection:`_executionsCountSection_1fc63_198`,trailingContentWrapper:`_trailingContentWrapper_1fc63_202`}}]]),Bd=X(g({__name:`V1Banner`,setup(e){let t=Js();async function n(){await t.dismissBanner(`V1`,`permanent`)}let r=a(()=>ea([`instanceOwner`]));return(e,t)=>{let i=oe(`n8n-html`);return M(),y(qs,{"custom-icon":`info`,theme:`warning`,name:`V1`,class:U(e.$style.v1container)},{mainContent:k(()=>[ce(W(`span`,null,null,512),[[i,u(G).baseText(`banners.v1.message`)]]),r.value?(M(),s(`a`,{key:0,class:U(e.$style.link),"data-test-id":`banner-confirm-v1`,onClick:n},[ce(W(`span`,null,null,512),[[i,u(G).baseText(`generic.dontShowAgain`)]])],2)):c(``,!0)]),_:1},8,[`class`])}}}),[[`__cssModules`,{$style:{v1container:`_v1container_182t0_125`,link:`_link_182t0_126`}}]]),Vd=g({__name:`EmailConfirmationBanner`,setup(e){let t=ha(),n=Ti(),r=a(()=>n.currentUserCloudInfo?.email??``);async function i(){try{await Ji().sendConfirmationEmail(),t.showMessage({type:`success`,title:G.baseText(`banners.confirmEmail.toast.success.heading`),message:G.baseText(`banners.confirmEmail.toast.success.message`)})}catch(e){t.showMessage({type:`error`,title:G.baseText(`banners.confirmEmail.toast.error.heading`),message:e.message})}}return(e,t)=>{let n=B(`RouterLink`);return M(),y(qs,{name:`EMAIL_CONFIRMATION`,theme:`warning`},{mainContent:k(()=>[W(`span`,null,[R(o(u(G).baseText(`banners.confirmEmail.message.1`))+` `,1),m(n,{to:`/settings/personal`},{default:k(()=>[R(o(r.value),1)]),_:1}),R(` `+o(u(G).baseText(`banners.confirmEmail.message.2`)),1)])]),trailingContent:k(()=>[m(u(q),{class:`n8n-button--success`,variant:`solid`,icon:`mail`,size:`small`,"data-test-id":`confirm-email-button`,onClick:i},{default:k(()=>[R(o(u(G).baseText(`banners.confirmEmail.button`)),1)]),_:1})]),_:1})}}}),Hd=g({__name:`DataTableStorageLimitWarningBanner`,setup(e){let t=ec(),n=K();return(e,r)=>(M(),y(qs,{name:`DATA_TABLE_STORAGE_LIMIT_WARNING`,dismissible:!0,theme:`warning`},{mainContent:k(()=>[W(`span`,null,o(u(n).baseText(`dataTable.banner.storageLimitWarning.message`,{interpolate:{usage:`${u(t).dataTableSize} / ${u(t).maxSizeMB}MB`}})),1)]),_:1}))}}),Ud=g({__name:`DataTableStorageLimitErrorBanner`,setup(e){let t=ec(),n=K();return(e,r)=>(M(),y(qs,{name:`DATA_TABLE_STORAGE_LIMIT_ERROR`,dismissible:!0,theme:`danger`},{mainContent:k(()=>[W(`span`,null,o(u(n).baseText(`dataTable.banner.storageLimitError.message`,{interpolate:{usage:`${u(t).dataTableSize} / ${u(t).maxSizeMB}MB`}})),1)]),_:1}))}}),Wd=g({__name:`WorkflowAutoDeactivatedBanner`,setup(e){return(e,t)=>(M(),y(qs,{name:`WORKFLOW_AUTO_DEACTIVATED`,theme:`warning`,"custom-icon":`info`},{mainContent:k(()=>[W(`span`,null,o(u(G).baseText(`banners.workflowAutoDeactivated.message`)),1)]),_:1}))}}),Gd={"data-test-id":`banner-stack`};const Kd={V1:{priority:350,component:Bd},WORKFLOW_AUTO_DEACTIVATED:{priority:340,component:Wd},TRIAL_OVER:{priority:260,component:Fd},EMAIL_CONFIRMATION:{priority:250,component:Vd},TRIAL:{priority:150,component:zd},NON_PRODUCTION_LICENSE:{priority:140,component:Pd},DATA_TABLE_STORAGE_LIMIT_WARNING:{priority:300,component:Hd},DATA_TABLE_STORAGE_LIMIT_ERROR:{priority:400,component:Ud}};var qd=g({__name:`BannerStack`,setup(e){let t=Js();async function n(){let e=await An();t.updateBannersHeight(e)}let r=e=>Kd[e]||t.dynamicBannersMap[e],i=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>t!==void 0)),o=a(()=>{if(n(),t.bannerStack.length===0)return null;let e=r(t.bannerStack[0]),a=t.bannerStack[0];return t.bannerStack.forEach((t,n)=>{if(n===0)return;let i=r(t);i.priority>e.priority&&(e=i,a=t)}),{component:e.component,props:i({name:a,content:e.content,theme:e.theme,isDismissible:e.isDismissible,dismissPermanently:e.dismissPermanently})}});return C(async()=>{await n()}),(e,t)=>(M(),s(`div`,Gd,[o.value?(M(),y(j(o.value.component),ue(S({key:0},o.value.props)),null,16)):c(``,!0)]))}}),Jd=X(g({__name:`AppBanners`,setup(e){let t=Te(),n=a(()=>t.name===$.DEMO||t.name===$.DEMO_DIFF);return(e,t)=>(M(),s(`div`,{id:`banners`,class:U(e.$style.banners)},[n.value?c(``,!0):(M(),y(qd,{key:0}))],2))}}),[[`__cssModules`,{$style:{banners:`_banners_d938c_125`}}]]),Yd={class:`action-buttons`},Xd=X(g({__name:`AboutModal`,setup(e){let t=et(),n=ha(),r=K(),i=ic(),a=nc(),s=Ws(),c=()=>{t.emit(`close`)},l=async()=>{try{let e=await mn(s.restApiContext),t=new File([e],`THIRD_PARTY_LICENSES.md`,{type:`text/markdown`});window.open(URL.createObjectURL(t))}catch(e){n.showToast({title:r.baseText(`about.thirdPartyLicenses.downloadError`),message:e.message,type:`error`})}},d=async()=>{n.showToast({title:r.baseText(`about.debug.toast.title`),message:r.baseText(`about.debug.toast.message`),type:`info`,duration:5e3}),await a.copy(i.generateDebugInfo())};return(e,n)=>(M(),y(tc,{"max-width":`540px`,title:u(r).baseText(`about.aboutN8n`),"event-bus":u(t),name:u(ns),center:!0},{content:k(()=>[W(`div`,{class:U(e.$style.container)},[m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.n8nVersion`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(s).versionCli),1)]),_:1})]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.sourceCode`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[m(u(lt),{to:`https://github.com/n8n-io/n8n`},{default:k(()=>[...n[0]||=[R(`https://github.com/n8n-io/n8n`,-1)]]),_:1})]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.license`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[m(u(lt),{to:`https://github.com/n8n-io/n8n/blob/master/LICENSE.md`},{default:k(()=>[R(o(u(r).baseText(`about.n8nLicense`)),1)]),_:1})]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.thirdPartyLicenses`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[m(u(lt),{onClick:l},{default:k(()=>[R(o(u(r).baseText(`about.thirdPartyLicensesLink`)),1)]),_:1})]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.instanceID`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(s).instanceId),1)]),_:1})]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:8,class:`info-name`},{default:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(r).baseText(`about.debug.title`)),1)]),_:1})]),_:1}),m(u(Z),{span:16},{default:k(()=>[W(`div`,{class:U(e.$style.debugInfo),onClick:d},[m(u(lt),null,{default:k(()=>[R(o(u(r).baseText(`about.debug.message`)),1)]),_:1})],2)]),_:1})]),_:1})],2)]),footer:k(()=>[W(`div`,Yd,[m(u(q),{float:`right`,label:u(r).baseText(`about.close`),"data-test-id":`close-about-modal-button`,onClick:c},null,8,[`label`])])]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{container:`_container_1mbqn_125`}}]]),Zd=X(g({__name:`ActivationModal`,setup(e){let t=d(!1),n=oc(),r=Gi(),i=Jt(),s=Vi(),c=jt(),l=K(),f=a(()=>l.baseText(`activationModal.workflowPublished`)),p=a(()=>{let e=vi(r.workflowTriggerNodes);if(!e.length)return``;if(e.length>1)return l.baseText(`activationModal.yourTriggersWillNowFire`);let t=e[0],n=i.getNodeType(t.type,t.typeVersion);if(n){if(n.activationMessage)return n.activationMessage;let e=br(n);if(t.webhookId)return l.baseText(`activationModal.yourWorkflowWillNowListenForEvents`,{interpolate:{serviceName:e}});if(n.polling)return l.baseText(`activationModal.yourWorkflowWillNowRegularlyCheck`,{interpolate:{serviceName:e}})}return l.baseText(`activationModal.yourTriggerWillNowFire`)}),h=async()=>{let e=n.activeExecution,t=r.workflowId;e?c.push({name:$.EXECUTION_PREVIEW,params:{name:t,executionId:e.id}}).catch(()=>{}):c.push({name:$.EXECUTION_HOME,params:{name:t}}).catch(()=>{}),s.closeModal(lo)},g=async()=>{s.openModal(Mo)},_=e=>{let n=typeof e==`boolean`?e:!!e;t.value=n,xn(Oo).value=n.toString()};return(e,n)=>(M(),y(tc,{name:u(lo),title:f.value,width:`460px`},{content:k(()=>[W(`div`,null,[m(u(Y),null,{default:k(()=>[R(o(p.value),1)]),_:1})]),W(`div`,{class:U(e.$style.spaced)},[m(u(Y),null,{default:k(()=>[m(u(Y),{bold:!0},{default:k(()=>[R(o(u(l).baseText(`activationModal.theseExecutionsWillNotShowUp`)),1)]),_:1}),R(` `+o(u(l).baseText(`activationModal.butYouCanSeeThem`))+` `,1),W(`a`,{onClick:h},o(u(l).baseText(`activationModal.executionList`)),1),R(` `+o(u(l).baseText(`activationModal.ifYouChooseTo`))+` `,1),W(`a`,{onClick:g},o(u(l).baseText(`activationModal.saveExecutions`)),1)]),_:1})],2)]),footer:k(({close:n})=>[W(`div`,{class:U(e.$style.footer)},[m(u(At),{"model-value":t.value,"onUpdate:modelValue":_},{label:k(()=>[R(o(u(l).baseText(`generic.dontShowAgain`)),1)]),_:1},8,[`model-value`]),m(u(q),{label:u(l).baseText(`activationModal.gotIt`),onClick:n},null,8,[`label`,`onClick`])],2)]),_:1},8,[`name`,`title`]))}}),[[`__cssModules`,{$style:{spaced:`_spaced_1mc84_125`,footer:`_footer_1mc84_129`}}]]),Qd=X({__name:`ApiKeyScopes`,props:{modelValue:{type:Array,default:()=>[]},availableScopes:{type:Array,default:()=>[]},enabled:{type:Boolean,default:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=d(n.modelValue),l=K(),{goToUpgrade:f}=$s(),p=d(!1),h=d(!1),g=d(null),_=a(()=>{let e={};return n.availableScopes.forEach(t=>{let[n,r]=t.split(`:`);e[n]||(e[n]=[]),r&&e[n].push(r)}),e});T(i,e=>{e.length===n.availableScopes.length?(h.value=!1,p.value=!0):e.length>0?h.value=!0:e.length===0&&(h.value=!1,p.value=!1),r(`update:modelValue`,e)}),T(p,e=>{e?i.value=n.availableScopes:i.value=[]});function v(){f(`api-key-scopes`,`upgrade-api-key-scopes`)}return(t,n)=>(M(),s(`div`,{class:U(t.$style[`api-key-scopes`])},[W(`div`,{ref_key:`popperContainer`,ref:g},null,512),m(u(Ct),{label:u(l).baseText(`settings.api.scopes.label`),color:`text-dark`},{default:k(()=>[m(u(Ie),{modelValue:i.value,"onUpdate:modelValue":n[1]||=e=>i.value=e,"data-test-id":`scopes-select`,"popper-class":t.$style[`scopes-dropdown-container`],teleported:!0,multiple:``,"collapse-tags":``,"max-collapse-tags":10,placement:`top`,"reserve-keyword":!1,placeholder:u(l).baseText(`settings.api.scopes.placeholder`),"append-to":g.value},{header:k(()=>[m(u(At),{modelValue:p.value,"onUpdate:modelValue":n[0]||=e=>p.value=e,disabled:!e.enabled,class:U(t.$style[`scopes-checkbox`]),indeterminate:h.value,label:u(l).baseText(`settings.api.scopes.selectAll`)},null,8,[`modelValue`,`disabled`,`class`,`indeterminate`,`label`])]),default:k(()=>[(M(!0),s(w,null,L(_.value,(t,n)=>(M(),y(u(je),{key:n,disabled:!e.enabled,label:u(nr)(n).toUpperCase()},{default:k(()=>[(M(!0),s(w,null,L(t,e=>(M(),y(u(Ge),{key:`${n}:${e}`,label:`${n}:${e}`,value:`${n}:${e}`},null,8,[`label`,`value`]))),128))]),_:2},1032,[`disabled`,`label`]))),128))]),_:1},8,[`modelValue`,`popper-class`,`placeholder`,`append-to`])]),_:1},8,[`label`]),e.enabled?c(``,!0):(M(),y(u(Xe),{key:0},{default:k(()=>[m(u(ge),{keypath:`settings.api.scopes.upgrade`,scope:`global`},{link:k(()=>[m(u(lt),{size:`small`,onClick:v},{default:k(()=>[R(o(u(l).baseText(`generic.upgrade`)),1)]),_:1})]),_:1})]),_:1}))],2))}},[[`__cssModules`,{$style:{"api-key-scopes":`_api-key-scopes_1tru2_2`,"scopes-dropdown-container":`_scopes-dropdown-container_1tru2_12`,"scopes-checkbox":`_scopes-checkbox_1tru2_42`}}]]),$d=X(g({__name:`ApiKeyCreateOrEditModal`,props:{mode:{default:`new`},activeId:{default:``}},setup(e){let t={"7_DAYS":7,"30_DAYS":30,"60_DAYS":60,"90_DAYS":90,CUSTOM:1,NO_EXPIRATION:0},n=K(),{showError:r,showMessage:i}=ha(),l=Vi(),f=Ws(),{createApiKey:p,updateApiKey:h,apiKeysById:g,availableScopes:_}=cc(),v=$r(),b=d(``),x=d(t[`30_DAYS`]),S=et(),T=d(null),E=d(!1),D=d(``),O=d(``),A=d(!1),j=d(``),N=d([]),P=la(),F=cc(),I=a(()=>P.isEnterpriseFeatureEnabled[Fo.ApiKeyScopes]),ee=e=>ps.now().setZone(f.timezone).startOf(`day`).plus({days:e}),te=e=>t.CUSTOM===e?n.baseText(`settings.api.view.modal.form.expiration.custom`):t.NO_EXPIRATION===e?n.baseText(`settings.api.view.modal.form.expiration.none`):n.baseText(`settings.api.view.modal.form.expiration.days`,{interpolate:{numberOfDays:e}}),re=d(ee(x.value).toFormat(`ccc, MMM d yyyy`)),z=d(null),B=e,ie=a(()=>{let e=x.value===t.NO_EXPIRATION||x.value===t.CUSTOM&&O.value||re.value;return b.value&&(I.value?N.value.length:!0)&&(B.mode===`edit`?!0:e)}),V=e=>Date.now()>e.getTime();C(()=>{if(v.set(n.baseText(`settings.api`)),setTimeout(()=>{z.value?.focus()}),B.mode===`edit`){let e=g[B.activeId];b.value=e.label??``,j.value=oe(e),N.value=I.value?e.scopes.filter(e=>F.availableScopes.includes(e)):F.availableScopes}B.mode===`new`&&!I.value&&(N.value=_)});function ae(e){b.value=e}function H(e){N.value=e}let oe=e=>{let t=ps.fromMillis(Date.parse(e.createdAt)).toFormat(`ccc, MMM d yyyy`);return n.baseText(`settings.api.creationTime`,{interpolate:{time:t}})};async function se(){try{E.value=!0,await h(B.activeId,{label:b.value,scopes:N.value}),i({type:`success`,title:n.baseText(`settings.api.update.toast`)}),ce()}catch(e){r(e,n.baseText(`settings.api.edit.error`))}finally{E.value=!1}}function ce(){l.closeModal(fr)}let le=async()=>{if(!b.value)return;let e=null;x.value===t.CUSTOM?e=parseInt(O.value,10):x.value!==t.NO_EXPIRATION&&(e=ee(x.value).toUnixInteger());let a={label:b.value,expiresAt:e,scopes:N.value};try{E.value=!0,T.value=await p(a),D.value=T.value.rawApiKey,i({type:`success`,title:n.baseText(`settings.api.create.toast`)})}catch(e){r(e,n.baseText(`settings.api.create.error`))}finally{E.value=!1}},ue=a(()=>{let e=`edit`;return B.mode===`new`&&(e=T.value?`created`:`create`),n.baseText(`settings.api.view.modal.title.${e}`)}),de=e=>{if(e===t.CUSTOM){A.value=!0,re.value=``;return}if(e!==t.NO_EXPIRATION){re.value=ee(e).toFormat(`ccc, MMM d yyyy`),A.value=!1;return}re.value=``,A.value=!1};async function fe(e){e.key===`Enter`&&(B.mode===`new`?await le():await se())}return(r,i)=>(M(),y(tc,{title:ue.value,"event-bus":u(S),name:u(fr),width:`600px`,"lock-scroll":!1,"close-on-esc":!0,"close-on-click-modal":!1,"show-close":!0},{content:k(()=>[W(`div`,{onKeyup:ne(fe,[`enter`])},[T.value?(M(),y(u(nt),{key:0,class:`mb-4xs`},{default:k(()=>[m(sc,{label:T.value.label,value:T.value.rawApiKey,"redact-value":!0,"copy-button-text":u(n).baseText(`generic.clickToCopy`),"toast-title":u(n).baseText(`settings.api.view.copy.toast`),hint:u(n).baseText(`settings.api.view.copy`)},null,8,[`label`,`value`,`copy-button-text`,`toast-title`,`hint`])]),_:1})):(M(),s(`div`,{key:1,class:U(r.$style.form)},[m(u(Ct),{label:u(n).baseText(`settings.api.view.modal.form.label`),color:`text-dark`},{default:k(()=>[m(u(mt),{ref_key:`inputRef`,ref:z,required:``,"model-value":b.value,size:`large`,type:`text`,placeholder:u(n).baseText(`settings.api.view.modal.form.label.placeholder`),maxlength:50,"data-test-id":`api-key-label`,"onUpdate:modelValue":ae},null,8,[`model-value`,`placeholder`])]),_:1},8,[`label`]),e.mode===`new`?(M(),s(`div`,{key:0,class:U(r.$style.expirationSection)},[m(u(Ct),{label:u(n).baseText(`settings.api.view.modal.form.expiration`),color:`text-dark`},{default:k(()=>[m(u(ct),{modelValue:x.value,"onUpdate:modelValue":[i[0]||=e=>x.value=e,de],size:`large`,filterable:``,readonly:``,"data-test-id":`expiration-select`},{default:k(()=>[(M(!0),s(w,null,L(Object.keys(t),e=>(M(),y(u(Dt),{key:e,value:t[e],label:te(t[e])},null,8,[`value`,`label`]))),128))]),_:1},8,[`modelValue`])]),_:1},8,[`label`]),re.value?(M(),y(u(Y),{key:0,class:`mb-xs`},{default:k(()=>[R(o(u(n).baseText(`settings.api.view.modal.form.expirationText`,{interpolate:{expirationDate:re.value}})),1)]),_:1})):c(``,!0),A.value?(M(),y(u(Rt),{key:1,modelValue:O.value,"onUpdate:modelValue":i[1]||=e=>O.value=e,type:`date`,teleported:!1,placeholder:`yyyy-mm-dd`,"value-format":`X`,"disabled-date":V},null,8,[`modelValue`])):c(``,!0)],2)):c(``,!0),m(Qd,{modelValue:N.value,"onUpdate:modelValue":[i[2]||=e=>N.value=e,H],"available-scopes":u(_),enabled:I.value},null,8,[`modelValue`,`available-scopes`,`enabled`])],2))],32)]),footer:k(()=>[W(`div`,{class:U(r.$style.footer)},[e.mode===`new`&&!T.value?(M(),y(u(q),{key:0,loading:E.value,disabled:!ie.value,label:u(n).baseText(`settings.api.view.modal.save.button`),onClick:le},null,8,[`loading`,`disabled`,`label`])):e.mode===`new`?(M(),y(u(q),{key:1,label:u(n).baseText(`settings.api.view.modal.done.button`),onClick:ce},null,8,[`label`])):c(``,!0),e.mode===`edit`?(M(),y(u(q),{key:2,disabled:!ie.value,label:u(n).baseText(`settings.api.view.modal.save.button`),onClick:se},null,8,[`disabled`,`label`])):c(``,!0),e.mode===`edit`?(M(),y(u(Y),{key:3,size:`small`,color:`text-light`},{default:k(()=>[R(o(j.value),1)]),_:1})):c(``,!0)],2)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{notice:`_notice_gomyt_125`,form:`_form_gomyt_129`,expirationSection:`_expirationSection_gomyt_135`,footer:`_footer_gomyt_142`}}]]),ef=X(g({__name:`NewAssistantSessionModal`,props:{name:{},data:{}},setup(e){let t=K(),n=Vi(),r=lc(),i=uc(),a=e,s=()=>{n.closeModal(Ha)},c=async()=>{`errorHelp`in a.data.context?(await i.openWithErrorHelper(a.data.context.errorHelp),r.trackUserOpenedAssistant({source:`error`,task:`error`,has_existing_session:!0})):`credHelp`in a.data.context&&await i.openWithCredHelp(a.data.context.credHelp.credType),s()};return(e,n)=>(M(),y(tc,{width:`460px`,height:`250px`,"data-test-id":`new-assistant-session-modal`,name:u(Ha),center:!0,"append-to-body":!0},{header:k(()=>[R(o(u(t).baseText(`aiAssistant.newSessionModal.title.part1`))+` `,1),W(`span`,{class:U(e.$style.assistantIcon)},[m(u(Tt),{size:`medium`})],2),m(u(at),{size:`xlarge`,text:u(t).baseText(`aiAssistant.assistant`)},null,8,[`text`]),R(` `+o(u(t).baseText(`aiAssistant.newSessionModal.title.part2`)),1)]),content:k(()=>[W(`div`,{class:U(e.$style.container)},[W(`p`,null,[m(u(Y),null,{default:k(()=>[R(o(u(t).baseText(`aiAssistant.newSessionModal.message`)),1)]),_:1})]),W(`p`,null,[m(u(Y),null,{default:k(()=>[R(o(u(t).baseText(`aiAssistant.newSessionModal.question`)),1)]),_:1})])],2)]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`subtle`,label:u(t).baseText(`generic.cancel`),onClick:s},null,8,[`label`]),m(u(q),{label:u(t).baseText(`aiAssistant.newSessionModal.confirm`),onClick:c},null,8,[`label`])],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{container:`_container_1yu53_125`,assistantIcon:`_assistantIcon_1yu53_132`,footer:`_footer_1yu53_136`}}]]),tf=g({__name:`ChangePasswordModal`,setup(e){let t=d(null),n=ut(),r=et(),i=d(``),a=d(!1),o=K(),{showMessage:s,showError:l}=ha(),f=Ji(),p=e=>typeof e==`string`?e===i.value?!1:{messageKey:`auth.changePassword.passwordsMustMatchError`}:!1,h=e=>{e.name===`password`&&typeof e.value==`string`&&(i.value=e.value)},g=async e=>{let t=e;try{a.value=!0,await f.updateCurrentUserPassword({currentPassword:t.currentPassword,newPassword:t.password,mfaCode:t.mfaCode}),s({type:`success`,title:o.baseText(`auth.changePassword.passwordUpdated`),message:o.baseText(`auth.changePassword.passwordUpdatedMessage`)}),r.emit(`close`)}catch(e){l(e,o.baseText(`auth.changePassword.error`))}finally{a.value=!1}},_=()=>{n.emit(`submit`)};return C(()=>{let e={currentPassword:{name:`currentPassword`,properties:{label:o.baseText(`auth.changePassword.currentPassword`),type:`password`,required:!0,autocomplete:`current-password`,capitalize:!0,focusInitially:!0}},mfaCode:{name:`mfaCode`,properties:{label:o.baseText(`auth.changePassword.mfaCode`),type:`text`,required:!0,capitalize:!0}},newPassword:{name:`password`,properties:{label:o.baseText(`auth.newPassword`),type:`password`,required:!0,validationRules:[{name:`DEFAULT_PASSWORD_RULES`}],infoText:o.baseText(`auth.defaultPasswordRequirements`),autocomplete:`new-password`,capitalize:!0}},newPasswordAgain:{name:`password2`,properties:{label:o.baseText(`auth.changePassword.reenterNewPassword`),type:`password`,required:!0,validators:{TWO_PASSWORDS_MATCH:{validate:p}},validationRules:[{name:`TWO_PASSWORDS_MATCH`}],autocomplete:`new-password`,capitalize:!0}}},{currentUser:n}=f;t.value=n?.mfaEnabled?[e.currentPassword,e.mfaCode,e.newPassword,e.newPasswordAgain]:[e.currentPassword,e.newPassword,e.newPasswordAgain]}),(e,i)=>(M(),y(tc,{name:u(ms),title:u(o).baseText(`auth.changePassword`),center:!0,width:`460px`,"event-bus":u(r),onEnter:_},{content:k(()=>[t.value?(M(),y(u(ft),{key:0,inputs:t.value,"event-bus":u(n),"column-view":!0,onUpdate:h,onSubmit:g},null,8,[`inputs`,`event-bus`])):c(``,!0)]),footer:k(()=>[m(u(q),{loading:a.value,label:u(o).baseText(`auth.changePassword`),float:`right`,"data-test-id":`change-password-button`,onClick:_},null,8,[`loading`,`label`])]),_:1},8,[`name`,`title`,`event-bus`]))}}),nf=X(g({__name:`ConfirmPasswordModal`,setup(e){let t=d(null),n=ut(),r=d(!1),i=K(),a=e=>{let t=e.currentPassword;t&&(r.value=!0,pc.emit(`close`,{currentPassword:t}))},s=()=>{n.emit(`submit`)};return C(()=>{t.value=[{currentPassword:{name:`currentPassword`,properties:{label:i.baseText(`auth.confirmPassword.currentPassword`),type:`password`,required:!0,autocomplete:`current-password`,capitalize:!0,focusInitially:!0}}}.currentPassword]}),(e,l)=>(M(),y(tc,{name:u(Ho),title:u(i).baseText(`auth.confirmPassword`),center:!0,width:`460px`,"event-bus":u(pc),onEnter:s},{content:k(()=>[m(u(Y),{class:U(e.$style.description),tag:`p`},{default:k(()=>[R(o(u(i).baseText(`auth.confirmPassword.confirmPasswordToChangeEmail`)),1)]),_:1},8,[`class`]),t.value?(M(),y(u(ft),{key:0,inputs:t.value,"event-bus":u(n),"column-view":!0,onSubmit:a},null,8,[`inputs`,`event-bus`])):c(``,!0)]),footer:k(()=>[m(u(q),{loading:r.value,label:u(i).baseText(`generic.confirm`),float:`right`,"data-test-id":`confirm-password-button`,onClick:s},null,8,[`loading`,`label`])]),_:1},8,[`name`,`title`,`event-bus`]))}}),[[`__cssModules`,{$style:{description:`_description_z8d8j_125`}}]]),rf={},af={};function of(e,t){rf[e]=rf[e]||[],rf[e].push(t)}function sf(e,t){if(!af[e]){af[e]=!0;try{t()}catch(t){ml&&Cc.error(`Error while instrumenting ${e}`,t)}}}function cf(e,t){let n=e&&rf[e];if(n)for(let r of n)try{r(t)}catch(t){ml&&Cc.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${zc(r)}\nError:`,t)}}var lf=null;function uf(e){let t=`error`;of(t,e),sf(t,df)}function df(){lf=gc.onerror,gc.onerror=function(e,t,n,r,i){return cf(`error`,{column:r,error:i,line:n,msg:e,url:t}),lf?lf.apply(this,arguments):!1},gc.onerror.__SENTRY_INSTRUMENTED__=!0}var ff=null;function pf(e){let t=`unhandledrejection`;of(t,e),sf(t,mf)}function mf(){ff=gc.onunhandledrejection,gc.onunhandledrejection=function(e){return cf(`unhandledrejection`,e),ff?ff.apply(this,arguments):!0},gc.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var hf=`7`;function gf(e){let t=e.protocol?`${e.protocol}:`:``,n=e.port?`:${e.port}`:``;return`${t}//${e.host}${n}${e.path?`/${e.path}`:``}/api/`}function _f(e){return`${gf(e)}${e.projectId}/envelope/`}function vf(e,t){let n={sentry_version:hf};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function yf(e,t,n){return t||`${_f(e)}?${vf(e,n)}`}var bf=[];function xf(e){let t={};return e.forEach(e=>{let{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}function Sf(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(e=>{e.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n==`function`){let e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return xf(r)}function Cf(e,t){let n={};return t.forEach(t=>{t&&Tf(e,t,n)}),n}function wf(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Tf(e,t,n){if(n[t.name]){ml&&Cc.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!bf.includes(t.name)&&typeof t.setupOnce==`function`&&(t.setupOnce(),bf.push(t.name)),t.setup&&typeof t.setup==`function`&&t.setup(e),typeof t.preprocessEvent==`function`){let n=t.preprocessEvent.bind(t);e.on(`preprocessEvent`,(t,r)=>n(t,r,e))}if(typeof t.processEvent==`function`){let n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}ml&&Cc.log(`Integration installed: ${t.name}`)}function Ef(e){return e}function Df(e){return[{type:`log`,item_count:e.length,content_type:`application/vnd.sentry.items.log+json`},{items:e}]}function Of(e,t,n,r){let i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=hc(r)),sl(i,[Df(e)])}function kf(e,t){let n=t??Af(e)??[];if(n.length===0)return;let r=e.getOptions(),i=Of(n,r._metadata,r.tunnel,e.getDsn());jf().set(e,[]),e.emit(`flushLogs`),e.sendEnvelope(i)}function Af(e){return jf().get(e)}function jf(){return Pc(`clientToLogBufferMap`,()=>new WeakMap)}function Mf(e){return[{type:`trace_metric`,item_count:e.length,content_type:`application/vnd.sentry.items.trace-metric+json`},{items:e}]}function Nf(e,t,n,r){let i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=hc(r)),sl(i,[Mf(e)])}function Pf(e,t){let n=t??Ff(e)??[];if(n.length===0)return;let r=e.getOptions(),i=Nf(n,r._metadata,r.tunnel,e.getDsn());If().set(e,[]),e.emit(`flushMetrics`),e.sendEnvelope(i)}function Ff(e){return If().get(e)}function If(){return Pc(`clientToMetricBufferMap`,()=>new WeakMap)}var Lf=Symbol.for(`SentryBufferFullError`);function Rf(e=100){let t=new Set;function n(){return t.size<e}function r(e){t.delete(e)}function i(e){if(!n())return _l(Lf);let i=e();return t.add(i),i.then(()=>r(i),()=>r(i)),i}function a(e){if(!t.size)return Nl(!0);let n=Promise.allSettled(Array.from(t)).then(()=>!0);if(!e)return n;let r=[n,new Promise(t=>setTimeout(()=>t(!1),e))];return Promise.race(r)}return{get $(){return Array.from(t)},add:i,drain:a}}var zf=60*1e3;function Bf(e,t=qc()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?zf:r-t}function Vf(e,t){return e[t]||e.all||0}function Hf(e,t,n=qc()){return Vf(e,t)>n}function Uf(e,{statusCode:t,headers:n},r=qc()){let i={...e},a=n?.[`x-sentry-rate-limits`],o=n?.[`retry-after`];if(a)for(let e of a.trim().split(`,`)){let[t,n,,,a]=e.split(`:`,5),o=parseInt(t,10),s=(isNaN(o)?60:o)*1e3;if(!n)i.all=r+s;else for(let e of n.split(`;`))e===`metric_bucket`?(!a||a.split(`;`).includes(`custom`))&&(i[e]=r+s):i[e]=r+s}else o?i.all=r+Bf(o,r):t===429&&(i.all=r+60*1e3);return i}function Wf(e,t,n=Rf(e.bufferSize||64)){let r={},i=e=>n.drain(e);function a(i){let a=[];if(Vl(i,(t,n)=>{let i=Fl(n);Hf(r,i)?e.recordDroppedEvent(`ratelimit_backoff`,i):a.push(t)}),a.length===0)return Promise.resolve({});let o=sl(i[0],a),s=t=>{if(Jc(o,[`client_report`])){ml&&Cc.warn(`Dropping client report. Will not send outcomes (reason: ${t}).`);return}Vl(o,(n,r)=>{e.recordDroppedEvent(t,Fl(r))})};return n.add(()=>t({body:Qc(o)}).then(e=>(e.statusCode!==void 0&&(e.statusCode<200||e.statusCode>=300)&&ml&&Cc.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Uf(r,e),e),e=>{throw s(`network_error`),ml&&Cc.error(`Encountered error running transport request:`,e),e})).then(e=>e,e=>{if(e===Lf)return ml&&Cc.error(`Skipped sending event because buffer is full.`),s(`queue_overflow`),Promise.resolve({});throw e})}return{send:a,flush:i}}function Gf(e,t,n){let r=[{type:`client_report`},{timestamp:n||Ec(),discarded_events:e}];return sl(t?{dsn:t}:{},[r])}function Kf(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function qf(e){let{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:a,data:o,op:s}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:s,parent_span_id:n,span_id:r??``,start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??``,origin:a,profile_id:o?.[Mc],exclusive_time:o?.[jc],measurements:e.measurements,is_segment:!0}}function Jf(e){return{type:`transaction`,timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{"sentry.profile_id":e.profile_id},...e.exclusive_time&&{"sentry.exclusive_time":e.exclusive_time}}}},measurements:e.measurements}}var Yf=`Not capturing exception because it's already been captured.`,Xf=`Discarded session because of missing or non-string release`,Zf=Symbol.for(`SentryInternalError`),Qf=Symbol.for(`SentryDoNotSendEventError`),$f=5e3;function ep(e){return{message:e,[Zf]:!0}}function tp(e){return{message:e,[Qf]:!0}}function np(e){return!!e&&typeof e==`object`&&Zf in e}function rp(e){return!!e&&typeof e==`object`&&Qf in e}function ip(e,t,n,r,i){let a=0,o,s=!1;e.on(n,()=>{a=0,clearTimeout(o),s=!1}),e.on(t,t=>{a+=r(t),a>=8e5?i(e):s||(s=!0,o=setTimeout(()=>{i(e)},$f))}),e.on(`flush`,()=>{i(e)})}var ap=class{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Rf(e.transportOptions?.bufferSize??64),e.dsn?this._dsn=pl(e.dsn):ml&&Cc.warn(`No DSN provided, client will not send events.`),this._dsn){let t=yf(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&ip(this,`afterCaptureLog`,`flushLogs`,fp,kf),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&ip(this,`afterCaptureMetric`,`flushMetrics`,dp,Pf)}captureException(e,t,n){let r=Oc();if(kc(e))return ml&&Cc.log(Yf),r;let i={event_id:r,...t};return this._process(()=>this.eventFromException(e,i).then(e=>this._captureEvent(e,i,n)).then(e=>e),`error`),i.event_id}captureMessage(e,t,n,r){let i={event_id:Oc(),...n},a=El(e)?e:String(e),o=ul(e),s=o?this.eventFromMessage(a,t,i):this.eventFromException(e,i);return this._process(()=>s.then(e=>this._captureEvent(e,i,r)),o?`unknown`:`error`),i.event_id}captureEvent(e,t,n){let r=Oc();if(t?.originalException&&kc(t.originalException))return ml&&Cc.log(Yf),r;let i={event_id:r,...t},a=e.sdkProcessingMetadata||{},o=a.capturedSpanScope,s=a.capturedSpanIsolationScope,c=op(e.type);return this._process(()=>this._captureEvent(e,i,o||n,s),c),i.event_id}captureSession(e){this.sendSession(e),Uc(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){let t=this._transport;if(!t)return!0;this.emit(`flush`);let n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){let t=await this.flush(e);return this.getOptions().enabled=!1,this.emit(`close`),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith(`Spotlight`)))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let t=this._integrations[e.name];Tf(this,e,this._integrations),t||wf(this,[e])}sendEvent(e,t={}){this.emit(`beforeSendEvent`,e,t);let n=al(e,this._dsn,this._options._metadata,this._options.tunnel);for(let e of t.attachments||[])n=yl(n,ll(e));this.sendEnvelope(n).then(t=>this.emit(`afterSendEvent`,e,t))}sendSession(e){let{release:t,environment:n=vc}=this._options;if(`aggregates`in e){let r=e.attrs||{};if(!r.release&&!t){ml&&Cc.warn(Xf);return}r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t){ml&&Cc.warn(Xf);return}e.release=e.release||t,e.environment=e.environment||n}this.emit(`beforeSendSession`,e);let r=Tl(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){let r=`${e}:${t}`;ml&&Cc.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:``}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){let n=this._hooks[e]=this._hooks[e]||new Set,r=(...e)=>t(...e);return n.add(r),()=>{n.delete(r)}}emit(e,...t){let n=this._hooks[e];n&&n.forEach(e=>e(...t))}async sendEnvelope(e){if(this.emit(`beforeEnvelope`,e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(e){return ml&&Cc.error(`Error while sending envelope:`,e),{}}return ml&&Cc.error(`Transport disabled`),{}}_setupIntegrations(){let{integrations:e}=this._options;this._integrations=Cf(this,e),wf(this,e)}_updateSessionFromEvent(e,t){let n=t.level===`fatal`,r=!1,i=t.exception?.values;if(i){r=!0,n=!1;for(let e of i)if(e.mechanism?.handled===!1){n=!0;break}}let a=e.status===`ok`;(a&&e.errors===0||a&&n)&&(Uc(e,{...n&&{status:`crashed`},errors:e.errors||Number(r||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,t,n,r){let i=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a?.length&&(t.integrations=a),this.emit(`preprocessEvent`,e,t),e.type||r.setLastEventId(e.event_id||t.event_id),el(i,e,t,n,this,r).then(e=>e===null?e:(this.emit(`postprocessEvent`,e,t),e.contexts={trace:Lc(n),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Rc(this,n),...e.sdkProcessingMetadata},e))}_captureEvent(e,t={},n=Dc(),r=Ac()){return ml&&lp(e)&&Cc.log(`Captured error event \`${Kf(e)[0]||`<unknown>`}\``),this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{ml&&(rp(e)?Cc.log(e.message):np(e)?Cc.warn(e.message):Cc.warn(e))})}_processEvent(e,t,n,r){let i=this.getOptions(),{sampleRate:a}=i,o=up(e),s=lp(e),c=`before send for type \`${e.type||`error`}\``,l=a===void 0?void 0:hl(a);if(s&&typeof l==`number`&&Ic()>l)return this.recordDroppedEvent(`sample_rate`,`error`),_l(tp(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));let u=op(e.type);return this._prepareEvent(e,t,n,r).then(e=>{if(e===null)throw this.recordDroppedEvent(`event_processor`,u),tp("An event processor returned `null`, will not send event.");return t.data&&t.data.__sentry__===!0?e:sp(cp(this,i,e,t),c)}).then(i=>{if(i===null){if(this.recordDroppedEvent(`before_send`,u),o){let t=1+(e.spans||[]).length;this.recordDroppedEvent(`before_send`,`span`,t)}throw tp(`${c} returned \`null\`, will not send event.`)}let a=n.getSession()||r.getSession();if(s&&a&&this._updateSessionFromEvent(a,i),o){let e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent(`before_send`,`span`,e)}let l=i.transaction_info;return o&&l&&i.transaction!==e.transaction&&(i.transaction_info={...l,source:`custom`}),this.sendEvent(i,t),i}).then(null,e=>{throw rp(e)||np(e)?e:(this.captureException(e,{mechanism:{handled:!1,type:`internal`},data:{__sentry__:!0},originalException:e}),ep(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`))})}_process(e,t){this._numProcessing++,this._promiseBuffer.add(e).then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e===Lf&&this.recordDroppedEvent(`queue_overflow`,t),e))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{let[n,r]=e.split(`:`);return{reason:n,category:r,quantity:t}})}_flushOutcomes(){ml&&Cc.log(`Flushing outcomes...`);let e=this._clearOutcomes();if(e.length===0){ml&&Cc.log(`No outcomes to send`);return}if(!this._dsn){ml&&Cc.log(`No dsn provided, will not send outcomes`);return}ml&&Cc.log(`Sending outcomes:`,e);let t=Gf(e,this._options.tunnel&&hc(this._dsn));this.sendEnvelope(t)}};function op(e){return e===`replay_event`?`replay`:e||`error`}function sp(e,t){let n=`${t} must return \`null\` or a valid event.`;if(Il(e))return e.then(e=>{if(!bl(e)&&e!==null)throw ep(n);return e},e=>{throw ep(`${t} rejected with ${e}`)});if(!bl(e)&&e!==null)throw ep(n);return e}function cp(e,t,n,r){let{beforeSend:i,beforeSendTransaction:a,beforeSendSpan:o,ignoreSpans:s}=t,c=n;if(lp(c)&&i)return i(c,r);if(up(c)){if(o||s){let t=qf(c);if(s?.length&&Bc(t,s))return null;if(o){let e=o(t);e?c=_c(n,Jf(e)):Nc()}if(c.spans){let t=[],n=c.spans;for(let e of n){if(s?.length&&Bc(e,s)){Ll(n,e);continue}if(o){let n=o(e);n?t.push(n):(Nc(),t.push(e))}else t.push(e)}let r=c.spans.length-t.length;r&&e.recordDroppedEvent(`before_send`,`span`,r),c.spans=t}}if(a){if(c.spans){let e=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return a(c,r)}}return c}function lp(e){return e.type===void 0}function up(e){return e.type===`transaction`}function dp(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+pp(e.attributes)}function fp(e){let t=0;return e.message&&(t+=e.message.length*2),t+pp(e.attributes)}function pp(e){if(!e)return 0;let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)?t+=e.length*mp(e[0]):ul(e)?t+=mp(e):t+=100}),t}function mp(e){return typeof e==`string`?e.length*2:typeof e==`number`?8:typeof e==`boolean`?4:0}function hp(e){return vl(e)&&`__sentry_fetch_url_host__`in e&&typeof e.__sentry_fetch_url_host__==`string`}function gp(e){return hp(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function _p(e,t){t.debug===!0&&(ml?Cc.enable():Vc(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Dc().update(t.initialScope);let n=new e(t);return vp(n),n.init(),n}function vp(e){Dc().setClient(e)}function yp(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||``,r=t[8]||``;return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function bp(e,t=!0){if(e.startsWith(`data:`)){let n=e.match(/^data:([^;,]+)/),r=n?n[1]:`text/plain`,i=e.includes(`;base64,`),a=e.indexOf(`,`),o=``;if(t&&a!==-1){let t=e.slice(a+1);o=t.length>10?`${t.slice(0,10)}... [truncated]`:t}return`data:${r}${i?`,base64`:``}${o?`,${o}`:``}`}return e}function xp(e){`aggregates`in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:`{{auto}}`}):e.ipAddress===void 0&&(e.ipAddress=`{{auto}}`)}function Sp(e,t,n=[t],r=`npm`){let i=e._metadata||{};i.sdk||={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${r}:@sentry/${e}`,version:gl})),version:gl},e._metadata=i}var Cp=100;function wp(e,t){let n=wc(),r=Ac();if(!n)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:a=Cp}=n.getOptions();if(a<=0)return;let o={timestamp:Ec(),...e},s=i?Vc(()=>i(o,t)):o;s!==null&&(n.emit&&n.emit(`beforeAddBreadcrumb`,s,t),r.addBreadcrumb(s,a))}var Tp,Ep=`FunctionToString`,Dp=new WeakMap,Op=Ef((()=>({name:Ep,setupOnce(){Tp=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Sl(this),n=Dp.has(wc())&&t!==void 0?t:this;return Tp.apply(n,e)}}catch{}},setup(e){Dp.set(e,!0)}}))),kp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,`vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)`,`Can't find variable: _AutofillCallbackHandler`,/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ap=`EventFilters`,jp=Ef((e={})=>{let t;return{name:Ap,setup(n){t=Np(e,n.getOptions())},processEvent(n,r,i){return t||=Np(e,i.getOptions()),Pp(n,t)?null:n}}}),Mp=Ef(((e={})=>({...jp(e),name:`InboundFilters`})));function Np(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:kp],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Pp(e,t){if(e.type){if(e.type===`transaction`&&Ip(e,t.ignoreTransactions))return ml&&Cc.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Dl(e)}`),!0}else{if(Fp(e,t.ignoreErrors))return ml&&Cc.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Dl(e)}`),!0;if(Vp(e))return ml&&Cc.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${Dl(e)}`),!0;if(Lp(e,t.denyUrls))return ml&&Cc.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Dl(e)}.\nUrl: ${Bp(e)}`),!0;if(!Rp(e,t.allowUrls))return ml&&Cc.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Dl(e)}.\nUrl: ${Bp(e)}`),!0}return!1}function Fp(e,t){return t?.length?Kf(e).some(e=>Gc(e,t)):!1}function Ip(e,t){if(!t?.length)return!1;let n=e.transaction;return n?Gc(n,t):!1}function Lp(e,t){if(!t?.length)return!1;let n=Bp(e);return n?Gc(n,t):!1}function Rp(e,t){if(!t?.length)return!0;let n=Bp(e);return n?Gc(n,t):!0}function zp(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!==`<anonymous>`&&n.filename!==`[native code]`)return n.filename||null}return null}function Bp(e){try{let t=[...e.exception?.values??[]].reverse().find(e=>e.mechanism?.parent_id===void 0&&e.stacktrace?.frames?.length)?.stacktrace?.frames;return t?zp(t):null}catch{return ml&&Cc.error(`Cannot extract url for event ${Dl(e)}`),null}}function Vp(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&e.type!==`Error`||e.value):!1}function Hp(e,t,n,r,i,a){if(!i.exception?.values||!a||!ol(a.originalException,Error))return;let o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=Up(e,t,r,a.originalException,n,i.exception.values,o,0))}function Up(e,t,n,r,i,a,o,s){if(a.length>=n+1)return a;let c=[...a];if(ol(r[i],Error)){Wp(o,s);let a=e(t,r[i]),l=c.length;Gp(a,i,l,s),c=Up(e,t,n,r[i],i,[a,...c],a,l)}return Array.isArray(r.errors)&&r.errors.forEach((r,a)=>{if(ol(r,Error)){Wp(o,s);let l=e(t,r),u=c.length;Gp(l,`errors[${a}]`,u,s),c=Up(e,t,n,r,i,[l,...c],l,u)}}),c}function Wp(e,t){e.mechanism={handled:!0,type:`auto.core.linked_errors`,...e.mechanism,...e.type===`AggregateError`&&{is_exception_group:!0},exception_id:t}}function Gp(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:`chained`,source:t,exception_id:n,parent_id:r}}function Kp(e){let t=`console`;of(t,e),sf(t,qp)}function qp(){`console`in gc&&Rl.forEach(function(e){e in gc.console&&Ml(gc.console,e,function(t){return xc[e]=t,function(...t){cf(`console`,{args:t,level:e}),xc[e]?.apply(gc.console,t)}})})}function Jp(e){return e===`warn`?`warning`:[`fatal`,`error`,`warning`,`log`,`info`,`debug`].includes(e)?e:`log`}var Yp=`CaptureConsole`,Xp=Ef(((e={})=>{let t=e.levels||Rl,n=e.handled??!0;return{name:Yp,setup(e){`console`in gc&&Kp(({args:r,level:i})=>{wc()!==e||!t.includes(i)||Zp(r,i,n)})}}}));function Zp(e,t,n){let r=Jp(t),i=Error(),a={level:Jp(t),extra:{arguments:e}};Ul(o=>{if(o.addEventProcessor(e=>(e.logger=`console`,Wc(e,{handled:n,type:`auto.core.capture_console`}),e)),t===`assert`){if(!e[0]){let t=`Assertion failed: ${Kc(e.slice(1),` `)||`console.assert`}`;o.setExtra(`arguments`,e.slice(1)),o.captureMessage(t,r,{captureContext:a,syntheticException:i})}return}let s=e.find(e=>e instanceof Error);if(s){xl(s,a);return}let c=Kc(e,` `);o.captureMessage(c,r,{captureContext:a,syntheticException:i})})}var Qp=`Dedupe`,$p=Ef((()=>{let e;return{name:Qp,processEvent(t){if(t.type)return t;try{if(em(t,e))return ml&&Cc.warn(`Event dropped due to being a duplicate of previously captured event.`),null}catch{}return e=t}}}));function em(e,t){return t?!!(tm(e,t)||nm(e,t)):!1}function tm(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!im(e,t)||!rm(e,t))}function nm(e,t){let n=am(t),r=am(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!im(e,t)||!rm(e,t))}function rm(e,t){let n=Bl(e),r=Bl(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function im(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join(``)===r.join(``)}catch{return!1}}function am(e){return e.exception?.values?.[0]}function om(e,t){let n=0;for(let t=e.length-1;t>=0;t--){let r=e[t];r===`.`?e.splice(t,1):r===`..`?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;)e.unshift(`..`);return e}var sm=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function cm(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=sm.exec(t);return n?n.slice(1):[]}function lm(...e){let t=``,n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:`/`;i&&(t=`${i}/${t}`,n=i.charAt(0)===`/`)}return t=om(t.split(`/`).filter(e=>!!e),!n).join(`/`),(n?`/`:``)+t||`.`}function um(e){let t=0;for(;t<e.length&&e[t]===``;t++);let n=e.length-1;for(;n>=0&&e[n]===``;n--);return t>n?[]:e.slice(t,n-t+1)}function dm(e,t){e=lm(e).slice(1),t=lm(t).slice(1);let n=um(e.split(`/`)),r=um(t.split(`/`)),i=Math.min(n.length,r.length),a=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){a=e;break}let o=[];for(let e=a;e<n.length;e++)o.push(`..`);return o=o.concat(r.slice(a)),o.join(`/`)}function fm(e,t){let n=cm(e)[2]||``;return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var pm=`RewriteFrames`,mm=Ef((e={})=>{let t=e.root,n=e.prefix||`app:///`,r=`window`in gc&&!!gc.window,i=e.iteratee||hm({isBrowser:r,root:t,prefix:n});function a(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>({...e,...e.stacktrace&&{stacktrace:o(e.stacktrace)}}))}}}catch{return e}}function o(e){return{...e,frames:e?.frames?.map(e=>i(e))}}return{name:pm,processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=a(t)),t}}});function hm({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes(`\\`)&&!r.filename.includes(`/`),a=/^\//.test(r.filename);if(e){if(t){let e=r.filename;e.indexOf(t)===0&&(r.filename=e.replace(t,n))}}else if(i||a){let e=i?r.filename.replace(/^[a-zA-Z]:/,``).replace(/\\/g,`/`):r.filename;r.filename=`${n}${t?dm(t,e):fm(e)}`}return r}}function gm(e){if(e!==void 0){if(e>=400&&e<500)return`warning`;if(e>=500)return`error`}}var _m=gc;function vm(){return`history`in _m&&!!_m.history}function ym(){if(!(`fetch`in _m))return!1;try{return new Headers,new Request(`data:,`),new Response,!0}catch{return!1}}function bm(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function xm(){if(typeof EdgeRuntime==`string`)return!0;if(!ym())return!1;if(bm(_m.fetch))return!0;let e=!1,t=_m.document;if(t&&typeof t.createElement==`function`)try{let n=t.createElement(`iframe`);n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=bm(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){ml&&Cc.warn(`Could not create sandbox iframe for pure fetch check, bailing to window.fetch: `,e)}return e}function Sm(e,t){let n=`fetch`;of(n,e),sf(n,()=>Cm(void 0,t))}function Cm(e,t=!1){t&&!xm()||Ml(gc,`fetch`,function(t){return function(...n){let r=Error(),{method:i,url:a}=Em(n),o={args:n,fetchData:{method:i,url:a},startTimestamp:Hc()*1e3,virtualError:r,headers:Dm(n)};return e||cf(`fetch`,{...o}),t.apply(gc,n).then(async t=>(e?e(t):cf(`fetch`,{...o,endTimestamp:Hc()*1e3,response:t}),t),e=>{cf(`fetch`,{...o,endTimestamp:Hc()*1e3,error:e}),vl(e)&&e.stack===void 0&&(e.stack=r.stack,mc(e,`framesToPop`,1));let t=wc()?.getOptions().enhanceFetchErrorMessages??`always`;if(t!==!1&&e instanceof TypeError&&(e.message===`Failed to fetch`||e.message===`Load failed`||e.message===`NetworkError when attempting to fetch resource.`))try{let n=new URL(o.fetchData.url).host;t===`always`?e.message=`${e.message} (${n})`:mc(e,`__sentry_fetch_url_host__`,n)}catch{}throw e})}})}function wm(e,t){return!!e&&typeof e==`object`&&!!e[t]}function Tm(e){return typeof e==`string`?e:e?wm(e,`url`)?e.url:e.toString?e.toString():``:``}function Em(e){if(e.length===0)return{method:`GET`,url:``};if(e.length===2){let[t,n]=e;return{url:Tm(t),method:wm(n,`method`)?String(n.method).toUpperCase():cl(t)&&wm(t,`method`)?String(t.method).toUpperCase():`GET`}}let t=e[0];return{url:Tm(t),method:wm(t,`method`)?String(t.method).toUpperCase():`GET`}}function Dm(e){let[t,n]=e;try{if(typeof n==`object`&&n&&`headers`in n&&n.headers)return new Headers(n.headers);if(cl(t))return new Headers(t.headers)}catch{}}function Om(){return`npm`}var km=gc,Am=0;function jm(){return Am>0}function Mm(){Am++,setTimeout(()=>{Am--})}function Nm(e,t={}){function n(e){return typeof e==`function`}if(!n(e))return e;try{let t=e.__sentry_wrapped__;if(t)return typeof t==`function`?t:e;if(Sl(e))return e}catch{return e}let r=function(...n){try{let r=n.map(e=>Nm(e,t));return e.apply(this,r)}catch(e){throw Mm(),Ul(r=>{r.addEventProcessor(e=>(t.mechanism&&(Tc(e,void 0,void 0),Wc(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),xl(e)}),e}};try{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch{}Ol(r,e),mc(e,`__sentry_wrapped__`,r);try{Object.getOwnPropertyDescriptor(r,`name`).configurable&&Object.defineProperty(r,`name`,{get(){return e.name}})}catch{}return r}function Pm(){let e=Zc(),{referrer:t}=km.document||{},{userAgent:n}=km.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}function Fm(e,t){let n=Rm(e,t),r={type:Um(t),value:Wm(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===``&&(r.value=`Unrecoverable error caught`),r}function Im(e,t,n,r){let i=wc()?.getOptions().normalizeDepth,a=Zm(t),o={__serialized__:zl(t,i)};if(a)return{exception:{values:[Fm(e,a)]},extra:o};let s={exception:{values:[{type:rl(t)?t.constructor.name:r?`UnhandledRejection`:`Error`,value:Ym(t,{isUnhandledRejection:r})}]},extra:o};if(n){let t=Rm(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}function Lm(e,t){return{exception:{values:[Fm(e,t)]}}}function Rm(e,t){let n=t.stacktrace||t.stack||``,r=Bm(t),i=Vm(t);try{return e(n,r,i)}catch{}return[]}var zm=/Minified React error #\d+;/i;function Bm(e){return e&&zm.test(e.message)?1:0}function Vm(e){return typeof e.framesToPop==`number`?e.framesToPop:0}function Hm(e){return typeof WebAssembly<`u`&&WebAssembly.Exception!==void 0?e instanceof WebAssembly.Exception:!1}function Um(e){let t=e?.name;return!t&&Hm(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:`WebAssembly.Exception`:t}function Wm(e){let t=e?.message;return Hm(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:`wasm exception`:t?t.error&&typeof t.error.message==`string`?gp(t.error):gp(e):`No error message`}function Gm(e,t,n,r){let i=qm(e,t,n?.syntheticException||void 0,r);return Wc(i),i.level=`error`,n?.event_id&&(i.event_id=n.event_id),Nl(i)}function Km(e,t,n=`info`,r,i){let a=Jm(e,t,r?.syntheticException||void 0,i);return a.level=n,r?.event_id&&(a.event_id=r.event_id),Nl(a)}function qm(e,t,n,r,i){let a;if(Pl(t)&&t.error)return Lm(e,t.error);if(Al(t)||tl(t)){let i=t;if(`stack`in t)a=Lm(e,t);else{let t=i.name||(Al(i)?`DOMError`:`DOMException`),o=i.message?`${t}: ${i.message}`:t;a=Jm(e,o,n,r),Tc(a,o)}return`code`in i&&(a.tags={...a.tags,"DOMException.code":`${i.code}`}),a}return vl(t)?Lm(e,t):bl(t)||rl(t)?(a=Im(e,t,n,i),Wc(a,{synthetic:!0}),a):(a=Jm(e,t,n,r),Tc(a,`${t}`,void 0),Wc(a,{synthetic:!0}),a)}function Jm(e,t,n,r){let i={};if(r&&n){let r=Rm(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]}),Wc(i,{synthetic:!0})}if(El(t)){let{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function Ym(e,{isUnhandledRejection:t}){let n=il(e),r=t?`promise rejection`:`exception`;return Pl(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:rl(e)?`Event \`${Xm(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Xm(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Zm(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var Qm=class extends ap{constructor(e){let t=$m(e);Sp(t,`browser`,[`browser`],km.SENTRY_SDK_SOURCE||Om()),t._metadata?.sdk&&(t._metadata.sdk.settings={infer_ip:t.sendDefaultPii?`auto`:`never`,...t._metadata.sdk.settings}),super(t);let{sendDefaultPii:n,sendClientReports:r,enableLogs:i,_experiments:a,enableMetrics:o}=this._options,s=o??a?.enableMetrics??!0;km.document&&(r||i||s)&&km.document.addEventListener(`visibilitychange`,()=>{km.document.visibilityState===`hidden`&&(r&&this._flushOutcomes(),i&&kf(this),s&&Pf(this))}),n&&this.on(`beforeSendSession`,xp)}eventFromException(e,t){return Gm(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t=`info`,n){return Km(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||`javascript`,super._prepareEvent(e,t,n,r)}};function $m(e){return{release:typeof __SENTRY_RELEASE__==`string`?__SENTRY_RELEASE__:km.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var eh=typeof __SENTRY_DEBUG__>`u`||__SENTRY_DEBUG__,th=gc,nh=1e3,rh,ih,ah;function oh(e){of(`dom`,e),sf(`dom`,sh)}function sh(){if(!th.document)return;let e=cf.bind(null,`dom`),t=uh(e,!0);th.document.addEventListener(`click`,t,!1),th.document.addEventListener(`keypress`,t,!1),[`EventTarget`,`Node`].forEach(t=>{let n=th[t]?.prototype;n?.hasOwnProperty?.(`addEventListener`)&&(Ml(n,`addEventListener`,function(t){return function(n,r,i){if(n===`click`||n==`keypress`)try{let r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=r[n]=r[n]||{refCount:0};if(!a.handler){let r=uh(e);a.handler=r,t.call(this,n,r,i)}a.refCount++}catch{}return t.call(this,n,r,i)}}),Ml(n,`removeEventListener`,function(e){return function(t,n,r){if(t===`click`||t==`keypress`)try{let n=this.__sentry_instrumentation_handlers__||{},i=n[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete n[t]),Object.keys(n).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return e.call(this,t,n,r)}}))})}function ch(e){if(e.type!==ih)return!1;try{if(!e.target||e.target._sentryId!==ah)return!1}catch{}return!0}function lh(e,t){return e===`keypress`?t?.tagName?!(t.tagName===`INPUT`||t.tagName===`TEXTAREA`||t.isContentEditable):!0:!1}function uh(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=dh(n);if(lh(n.type,r))return;mc(n,`_sentryCaptured`,!0),r&&!r._sentryId&&mc(r,`_sentryId`,Oc());let i=n.type===`keypress`?`input`:n.type;ch(n)||(e({event:n,name:i,global:t}),ih=n.type,ah=r?r._sentryId:void 0),clearTimeout(rh),rh=th.setTimeout(()=>{ah=void 0,ih=void 0},nh)}}function dh(e){try{return e.target}catch{return null}}var fh;function ph(e){let t=`history`;of(t,e),sf(t,mh)}function mh(){if(th.addEventListener(`popstate`,()=>{let e=th.location.href,t=fh;fh=e,t!==e&&cf(`history`,{from:t,to:e})}),!vm())return;function e(e){return function(...t){let n=t.length>2?t[2]:void 0;if(n){let r=fh,i=hh(String(n));if(fh=i,r===i)return e.apply(this,t);cf(`history`,{from:r,to:i})}return e.apply(this,t)}}Ml(th.history,`pushState`,e),Ml(th.history,`replaceState`,e)}function hh(e){try{return new URL(e,th.location.origin).toString()}catch{return e}}var gh={};function _h(e){let t=gh[e];if(t)return t;let n=th[e];if(bm(n))return gh[e]=n.bind(th);let r=th.document;if(r&&typeof r.createElement==`function`)try{let t=r.createElement(`iframe`);t.hidden=!0,r.head.appendChild(t);let i=t.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(t)}catch(t){eh&&Cc.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n&&(gh[e]=n.bind(th))}function vh(e){gh[e]=void 0}var yh=`__sentry_xhr_v3__`;function bh(e){of(`xhr`,e),sf(`xhr`,xh)}function xh(){if(!th.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){let r=Error(),i=Hc()*1e3,a=Yc(n[0])?n[0].toUpperCase():void 0,o=Sh(n[1]);if(!a||!o)return e.apply(t,n);t[yh]={method:a,url:o,request_headers:{}},a===`POST`&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);let s=()=>{let e=t[yh];if(e&&t.readyState===4){try{e.status_code=t.status}catch{}cf(`xhr`,{endTimestamp:Hc()*1e3,startTimestamp:i,xhr:t,virtualError:r})}};return`onreadystatechange`in t&&typeof t.onreadystatechange==`function`?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,n){return s(),e.apply(t,n)}}):t.addEventListener(`readystatechange`,s),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){let[r,i]=n,a=t[yh];return a&&Yc(r)&&Yc(i)&&(a.request_headers[r.toLowerCase()]=i),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){let r=t[yh];return r?(n[0]!==void 0&&(r.body=n[0]),cf(`xhr`,{startTimestamp:Hc()*1e3,xhr:t}),e.apply(t,n)):e.apply(t,n)}})}function Sh(e){if(Yc(e))return e;try{return e.toString()}catch{}}var Ch=40;function wh(e,t=_h(`fetch`)){let n=0,r=0;async function i(i){let a=i.body.length;n+=a,r++;let o={body:i.body,method:`POST`,referrerPolicy:`strict-origin`,headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let n=await t(e.url,o);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get(`X-Sentry-Rate-Limits`),"retry-after":n.headers.get(`Retry-After`)}}}catch(e){throw vh(`fetch`),e}finally{n-=a,r--}}return Wf(e,i,Rf(e.bufferSize||Ch))}var Th=typeof __SENTRY_DEBUG__>`u`||__SENTRY_DEBUG__,Eh=30,Dh=50;function Oh(e,t,n,r){let i={filename:e,function:t===`<anonymous>`?`?`:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}var kh=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ah=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jh=/\((\S*)(?::(\d+))(?::(\d+))\)/,Mh=/at (.+?) ?\(data:(.+?),/,Nh=[Eh,e=>{let t=e.match(Mh);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=kh.exec(e);if(n){let[,e,t,r]=n;return Oh(e,`?`,+t,+r)}let r=Ah.exec(e);if(r){if(r[2]&&r[2].indexOf(`eval`)===0){let e=jh.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}let[e,t]=Lh(r[1]||`?`,r[2]);return Oh(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],Ph=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Fh=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ih=$c(Nh,[Dh,e=>{let t=Ph.exec(e);if(t){if(t[3]&&t[3].indexOf(` > eval`)>-1){let e=Fh.exec(t[3]);e&&(t[1]=t[1]||`eval`,t[3]=e[1],t[4]=e[2],t[5]=``)}let e=t[3],n=t[1]||`?`;return[n,e]=Lh(n,e),Oh(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),Lh=(e,t)=>{let n=e.indexOf(`safari-extension`)!==-1,r=e.indexOf(`safari-web-extension`)!==-1;return n||r?[e.indexOf(`@`)===-1?`?`:e.split(`@`)[0],n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Rh=1024,zh=`Breadcrumbs`,Bh=Ef(((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:zh,setup(e){t.console&&Kp(Uh(e)),t.dom&&oh(Hh(e,t.dom)),t.xhr&&bh(Wh(e)),t.fetch&&Sm(Gh(e)),t.history&&ph(Kh(e)),t.sentry&&e.on(`beforeSendEvent`,Vh(e))}}}));function Vh(e){return function(t){wc()===e&&wp({category:`sentry.${t.type===`transaction`?`transaction`:`event`}`,event_id:t.event_id,level:t.level,message:Dl(t)},{event:t})}}function Hh(e,t){return function(n){if(wc()!==e)return;let r,i,a=typeof t==`object`?t.serializeAttribute:void 0,o=typeof t==`object`&&typeof t.maxStringLength==`number`?t.maxStringLength:void 0;o&&o>Rh&&(Th&&Cc.warn(`\`dom.maxStringLength\` cannot exceed ${Rh}, but a value of ${o} was configured. Sentry will use ${Rh} instead.`),o=Rh),typeof a==`string`&&(a=[a]);try{let e=n.event,t=qh(e)?e.target:e;r=wl(t,{keyAttrs:a,maxStringLength:o}),i=fl(t)}catch{r=`<unknown>`}if(r.length===0)return;let s={category:`ui.${n.name}`,message:r};i&&(s.data={"ui.component_name":i}),wp(s,{event:n.event,name:n.name,global:n.global})}}function Uh(e){return function(t){if(wc()!==e)return;let n={category:`console`,data:{arguments:t.args,logger:`console`},level:Jp(t.level),message:Kc(t.args,` `)};if(t.level===`assert`)if(t.args[0]===!1)n.message=`Assertion failed: ${Kc(t.args.slice(1),` `)||`console.assert`}`,n.data.arguments=t.args.slice(1);else return;wp(n,{input:t.args,level:t.level})}}function Wh(e){return function(t){if(wc()!==e)return;let{startTimestamp:n,endTimestamp:r}=t,i=t.xhr[yh];if(!n||!r||!i)return;let{method:a,url:o,status_code:s,body:c}=i,l={method:a,url:o,status_code:s},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:`xhr`,data:l,type:`http`,level:gm(s)};e.emit(`beforeOutgoingRequestBreadcrumb`,d,u),wp(d,u)}}function Gh(e){return function(t){if(wc()!==e)return;let{startTimestamp:n,endTimestamp:r}=t;if(r&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method===`POST`))if(t.fetchData.method,t.fetchData.url,t.error){let i=t.fetchData,a={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},o={category:`fetch`,data:i,level:`error`,type:`http`};e.emit(`beforeOutgoingRequestBreadcrumb`,o,a),wp(o,a)}else{let i=t.response,a={...t.fetchData,status_code:i?.status};t.fetchData.request_body_size,t.fetchData.response_body_size,i?.status;let o={input:t.args,response:i,startTimestamp:n,endTimestamp:r},s={category:`fetch`,data:a,type:`http`,level:gm(a.status_code)};e.emit(`beforeOutgoingRequestBreadcrumb`,s,o),wp(s,o)}}}function Kh(e){return function(t){if(wc()!==e)return;let n=t.from,r=t.to,i=yp(km.location.href),a=n?yp(n):void 0,o=yp(r);a?.path||(a=i),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),wp({category:`navigation`,data:{from:n,to:r}})}}function qh(e){return!!e&&!!e.target}var Jh=`EventTarget.Window.Node.ApplicationCache.AudioTrackList.BroadcastChannel.ChannelMergerNode.CryptoOperation.EventSource.FileReader.HTMLUnknownElement.IDBDatabase.IDBRequest.IDBTransaction.KeyOperation.MediaController.MessagePort.ModalWindow.Notification.SVGElementInstance.Screen.SharedWorker.TextTrack.TextTrackCue.TextTrackList.WebSocket.WebSocketWorker.Worker.XMLHttpRequest.XMLHttpRequestEventTarget.XMLHttpRequestUpload`.split(`.`),Yh=`BrowserApiErrors`,Xh=Ef(((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Yh,setupOnce(){t.setTimeout&&Ml(km,`setTimeout`,Zh),t.setInterval&&Ml(km,`setInterval`,Zh),t.requestAnimationFrame&&Ml(km,`requestAnimationFrame`,Qh),t.XMLHttpRequest&&`XMLHttpRequest`in km&&Ml(XMLHttpRequest.prototype,`send`,$h);let e=t.eventTarget;e&&(Array.isArray(e)?e:Jh).forEach(e=>eg(e,t))}}}));function Zh(e){return function(...t){let n=t[0];return t[0]=Nm(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${zc(e)}`}}),e.apply(this,t)}}function Qh(e){return function(t){return e.apply(this,[Nm(t,{mechanism:{data:{handler:zc(e)},handled:!1,type:`auto.browser.browserapierrors.requestAnimationFrame`}})])}}function $h(e){return function(...t){let n=this;return[`onload`,`onerror`,`onprogress`,`onreadystatechange`].forEach(e=>{e in n&&typeof n[e]==`function`&&Ml(n,e,function(t){let n={mechanism:{data:{handler:zc(t)},handled:!1,type:`auto.browser.browserapierrors.xhr.${e}`}},r=Sl(t);return r&&(n.mechanism.data.handler=zc(r)),Nm(t,n)})}),e.apply(this,t)}}function eg(e,t){let n=km[e]?.prototype;n?.hasOwnProperty?.(`addEventListener`)&&(Ml(n,`addEventListener`,function(n){return function(r,i,a){try{tg(i)&&(i.handleEvent=Nm(i.handleEvent,{mechanism:{data:{handler:zc(i),target:e},handled:!1,type:`auto.browser.browserapierrors.handleEvent`}}))}catch{}return t.unregisterOriginalCallbacks&&ng(this,r,i),n.apply(this,[r,Nm(i,{mechanism:{data:{handler:zc(i),target:e},handled:!1,type:`auto.browser.browserapierrors.addEventListener`}}),a])}}),Ml(n,`removeEventListener`,function(e){return function(t,n,r){try{let i=n.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch{}return e.call(this,t,n,r)}}))}function tg(e){return typeof e.handleEvent==`function`}function ng(e,t,n){e&&typeof e==`object`&&`removeEventListener`in e&&typeof e.removeEventListener==`function`&&e.removeEventListener(t,n)}var rg=Ef(()=>({name:`BrowserSession`,setupOnce(){if(km.document===void 0){Th&&Cc.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}kl({ignoreDuration:!0}),dl(),ph(({from:e,to:t})=>{e!==void 0&&e!==t&&(kl({ignoreDuration:!0}),dl())})}})),ig=`GlobalHandlers`,ag=Ef(((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:ig,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(og(e),dg(`onerror`)),t.onunhandledrejection&&(sg(e),dg(`onunhandledrejection`))}}}));function og(e){uf(t=>{let{stackParser:n,attachStacktrace:r}=fg();if(wc()!==e||jm())return;let{msg:i,url:a,line:o,column:s,error:c}=t,l=ug(qm(n,c||i,void 0,r,!1),a,o,s);l.level=`error`,jl(l,{originalException:c,mechanism:{handled:!1,type:`auto.browser.global_handlers.onerror`}})})}function sg(e){pf(t=>{let{stackParser:n,attachStacktrace:r}=fg();if(wc()!==e||jm())return;let i=cg(t),a=ul(i)?lg(i):qm(n,i,void 0,r,!0);a.level=`error`,jl(a,{originalException:i,mechanism:{handled:!1,type:`auto.browser.global_handlers.onunhandledrejection`}})})}function cg(e){if(ul(e))return e;try{if(`reason`in e)return e.reason;if(`detail`in e&&`reason`in e.detail)return e.detail.reason}catch{}return e}function lg(e){return{exception:{values:[{type:`UnhandledRejection`,value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function ug(e,t,n,r){let i=e.exception=e.exception||{},a=i.values=i.values||[],o=a[0]=a[0]||{},s=o.stacktrace=o.stacktrace||{},c=s.frames=s.frames||[],l=r,u=n,d=pg(t)??Zc();return c.length===0&&c.push({colno:l,filename:d,function:`?`,in_app:!0,lineno:u}),e}function dg(e){Th&&Cc.log(`Global Handler attached: ${e}`)}function fg(){return wc()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function pg(e){if(!(!Yc(e)||e.length===0))return e.startsWith(`data:`)?`<${bp(e,!1)}>`:e}var mg=Ef(()=>({name:`HttpContext`,preprocessEvent(e){if(!km.navigator&&!km.location&&!km.document)return;let t=Pm(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}})),hg=`cause`,gg=5,_g=`LinkedErrors`,vg=Ef(((e={})=>{let t=e.limit||gg,n=e.key||hg;return{name:_g,preprocessEvent(e,r,i){Hp(Fm,i.getOptions().stackParser,n,t,e,r)}}}));function yg(){return bg()?(Th&&Vc(()=>{console.error(`[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/`)}),!0):!1}function bg(){if(km.window===void 0)return!1;let e=km;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let t=Zc();return!(km===km.top&&[`chrome-extension`,`moz-extension`,`ms-browser-extension`,`safari-web-extension`].some(e=>t.startsWith(`${e}://`)))}function xg(e){return[Mp(),Op(),Xh(),Bh(),ag(),vg(),$p(),mg(),rg()]}function Sg(e={}){let t=!e.skipBrowserExtensionCheck&&yg(),n=e.defaultIntegrations==null?xg():e.defaultIntegrations;return _p(Qm,{...e,enabled:t?!1:e.enabled,stackParser:yc(e.stackParser||Ih),integrations:Sf({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||wh})}var Cg=[`activate`,`mount`],wg=typeof __SENTRY_DEBUG__>`u`||__SENTRY_DEBUG__,Tg=/(?:^|[-_])(\w)/g,Eg=e=>e.replace(Tg,e=>e.toUpperCase()).replace(/[-_]/g,``),Dg=`<Root>`,Og=`<Anonymous>`,kg=(e,t)=>e.repeat(t),Ag=(e,t)=>{if(!e)return Og;if(e.$root===e)return Dg;if(!e.$options)return Og;let n=e.$options,r=n.name||n._componentTag||n.__name,i=n.__file;if(!r&&i){let e=i.match(/([^/\\]+)\.vue$/);e&&(r=e[1])}return(r?`<${Eg(r)}>`:Og)+(i&&t!==!1?` at ${i}`:``)},jg=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){let t=[],n=0;for(;e;){if(t.length>0){let r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}else n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return`\n\nfound in\n\n${t.map((e,t)=>`${(t===0?`---> `:kg(` `,5+t*2))+(Array.isArray(e)?`${Ag(e[0])}... (${e[1]} recursive calls)`:Ag(e))}`).join(`
`)}`}return`\n\n(found in ${Ag(e)})`},Mg=(e,t)=>{let{errorHandler:n}=e.config;e.config.errorHandler=(r,i,a)=>{let o={componentName:Ag(i,!1),lifecycleHook:a,trace:i?jg(i):``};if(t?.attachProps!==!1&&i&&(i.$options?.propsData?o.propsData=i.$options.propsData:i.$props&&(o.propsData=i.$props)),setTimeout(()=>{xl(r,{captureContext:{contexts:{vue:o}},mechanism:{handled:!!n,type:`auto.function.vue.error_handler`}})}),typeof n==`function`&&e.config.errorHandler)n.call(e,r,i,a);else throw r}},Ng=`ui.vue`,Pg={activate:[`activated`,`deactivated`],create:[`beforeCreate`,`created`],unmount:[`beforeUnmount`,`unmounted`],destroy:[`beforeDestroy`,`destroyed`],mount:[`beforeMount`,`mounted`],update:[`beforeUpdate`,`updated`]};function Fg(e,t,n){e.$_sentryRootComponentSpanTimer&&clearTimeout(e.$_sentryRootComponentSpanTimer),e.$_sentryRootComponentSpanTimer=setTimeout(()=>{e.$root?.$_sentryRootComponentSpan&&(e.$root.$_sentryRootComponentSpan.end(t),e.$root.$_sentryRootComponentSpan=void 0)},n)}function Ig(e,t){function n(e){return e.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,`$1`)}return e.some(e=>n(t)===n(e))}var Lg=(e={})=>{let t=(e.hooks||[]).concat(Cg).filter((e,t,n)=>n.indexOf(e)===t),n={},r=e.timeout||2e3;for(let i of t){let t=Pg[i];if(!t){wg&&Cc.warn(`Unknown hook: ${i}`);continue}for(let a of t)n[a]=function(){let n=this.$root===this;n&&(this.$_sentryRootComponentSpan=this.$_sentryRootComponentSpan||nl({name:`Application Render`,op:`${Ng}.render`,attributes:{"sentry.origin":`auto.ui.vue`},onlyIfParent:!0}),Fg(this,Hc(),r));let o=Ag(this,!1);if(!(n||(Array.isArray(e.trackComponents)?Ig(e.trackComponents,o):e.trackComponents))){Fg(this,Hc(),r);return}this.$_sentryComponentSpans=this.$_sentryComponentSpans||{};let s=a===t[0],c=this.$root?.$_sentryRootComponentSpan||bc();if(s){if(c){let e=this.$_sentryComponentSpans[i];e&&e.end(),this.$_sentryComponentSpans[i]=nl({name:`Vue ${o}`,op:`${Ng}.${i}`,attributes:{[Fc]:`auto.ui.vue`},onlyIfParent:!0})}}else{let e=this.$_sentryComponentSpans[i];if(!e)return;e.end(),Fg(this,Hc(),r)}}}return n},Rg={Vue:gc.Vue,attachProps:!0,attachErrorHandler:!0,tracingOptions:{hooks:Cg,timeout:2e3,trackComponents:!1}},zg=`Vue`,Bg=Ef((e={})=>({name:zg,setup(t){let n={...Rg,...t.getOptions(),...e};if(!n.Vue&&!n.app){Vc(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")});return}n.app?(Array.isArray(n.app)?n.app:[n.app]).forEach(e=>Vg(e,n)):n.Vue&&Vg(n.Vue,n)}})),Vg=(e,t)=>{wg&&e._instance?.isMounted===!0&&Vc(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")}),t.attachErrorHandler&&Mg(e,t),Sc(t)&&e.mixin(Lg(t.tracingOptions))};function Hg(e={}){let t={defaultIntegrations:[...xg(e),Bg()],...e};return Sp(t,`vue`),Sg(t)}var Ug={key:0},Wg={class:`mb-s`},Gg={class:`mb-s`},Kg={class:`action-buttons`},qg=`import`,Jg=X(g({__name:`ChatEmbedModal`,props:{modalBus:{default:()=>et()}},setup(e){let t=e,n=K(),r=Ws(),i=Gi(),l=d([{label:`CDN Embed`,value:`cdn`},{label:`Vue Embed`,value:`vue`},{label:`React Embed`,value:`react`},{label:`Other`,value:`other`}]),f=d(`cdn`),p=a(()=>{for(let e of[Za,Va]){let t=i.workflow.nodes.find(t=>t.type===e);if(t){if(e===`@n8n/n8n-nodes-langchain.chatTrigger`&&!t.parameters.public)continue;return{type:e,node:t}}}return null}),h=a(()=>{let e=`${r.webhookUrl}${p.value?`/${p.value.node.webhookId}`:``}`;return p.value?.type===`@n8n/n8n-nodes-langchain.chatTrigger`?`${e}/chat`:e});function g(e,t=`	`){return e.split(`
`).map(e=>`${t}${e}`).join(`
`)}let _=a(()=>({import:`${qg} '@n8n/chat/style.css';
${qg} { createChat } from '@n8n/chat';`,createChat:`createChat({
	webhookUrl: '${h.value}'
});`,install:`npm install @n8n/chat`})),v=a(()=>`<link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
<script type="module">
${qg} { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

${_.value.createChat}
<\/script>`),b=a(()=>`<script lang="ts" setup>
${qg} { onMounted } from 'vue';
${_.value.import}

onMounted(() => {
${g(_.value.createChat)}
});
<\/script>`),x=a(()=>`${qg} { useEffect } from 'react';
${_.value.import}

export const App = () => {
	useEffect(() => {
${g(_.value.createChat,`		`)}
	}, []);

	return (<div></div>);
};

<\/script>`),S=a(()=>`${_.value.import}

${_.value.createChat}`);function C(){t.modalBus.emit(`close`)}return(t,r)=>(M(),y(tc,{"max-width":`960px`,title:u(n).baseText(`chatEmbed.title`),"event-bus":e.modalBus,name:u(bs),center:!0},{content:k(()=>[W(`div`,{class:U(t.$style.container)},[m(u(pt),{modelValue:f.value,"onUpdate:modelValue":r[0]||=e=>f.value=e,options:l.value},null,8,[`modelValue`,`options`]),f.value===`cdn`?c(``,!0):(M(),s(`div`,Ug,[W(`div`,Wg,[m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`chatEmbed.install`)),1)]),_:1})]),m(wa,{"model-value":_.value.install,"is-read-only":``},null,8,[`model-value`])])),W(`div`,Gg,[m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:`chatEmbed.paste.${f.value}`,scope:`global`},{code:k(()=>[W(`code`,null,o(u(n).baseText(`chatEmbed.paste.${f.value}.file`)),1)]),_:1},8,[`keypath`])]),_:1})]),f.value===`cdn`?(M(),y(wa,{key:1,"model-value":v.value,"is-read-only":``},null,8,[`model-value`])):c(``,!0),f.value===`vue`?(M(),y(wa,{key:2,"model-value":b.value,"is-read-only":``},null,8,[`model-value`])):c(``,!0),f.value===`react`?(M(),y(Ca,{key:3,"model-value":x.value,"is-read-only":``},null,8,[`model-value`])):c(``,!0),f.value===`other`?(M(),y(Ca,{key:4,"model-value":S.value,"is-read-only":``},null,8,[`model-value`])):c(``,!0),m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`chatEmbed.packageInfo.description`))+` `,1),m(u(lt),{href:u(n).baseText(`chatEmbed.url`),"new-window":``,bold:``},{default:k(()=>[R(o(u(n).baseText(`chatEmbed.packageInfo.link`)),1)]),_:1},8,[`href`])]),_:1}),m(u(Ke),{class:`mt-s`},{default:k(()=>[R(o(u(n).baseText(`chatEmbed.chatTriggerNode`)),1)]),_:1})],2)]),footer:k(()=>[W(`div`,Kg,[m(u(q),{float:`right`,label:u(n).baseText(`chatEmbed.close`),onClick:C},null,8,[`label`])])]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{container:`_container_1mbqn_125`}}]]),Yg=[`textContent`],Xg=X(g({__name:`CommunityPackageInstallModal`,setup(e){let t=zn(),n=K(),{installNode:r,loading:i}=tu(),l=Vi(),f=et(),p=a(()=>l.modalsById[xi]?.data),h=d(p.value?.packageName??``),g=d(!1),_=d(!1),v=d(``),{getQuickConnectOptionByPackageName:b}=nu(),x=a(()=>b(h.value)),S=()=>{t.track(`user clicked cnr browse button`,{source:`cnr install modal`}),window.open(gi,`_blank`)},C=async()=>{if(!g.value)_.value=!0;else{v.value=``;let e=await r({type:`unverified`,packageName:h.value,nodeType:p.value?.nodeType,telemetry:{source:`cnr settings page`,hasQuickConnect:x.value!==void 0}});e.error&&`httpStatusCode`in e.error&&e.error.httpStatusCode===400&&(v.value=e.error.message),e.success&&f.emit(`close`)}},w=()=>{_.value=!1},T=()=>!i.value,E=()=>{h.value=h.value.replaceAll(`npm i `,``).replaceAll(`npm install `,``)},D=()=>{t.track(`user clicked cnr docs link`,{source:`install package modal top`})},O=()=>{t.track(`user clicked cnr docs link`,{source:`install package modal bottom`})};return(e,t)=>(M(),y(tc,{width:`540px`,name:u(xi),title:u(n).baseText(`settings.communityNodes.installModal.title`),"event-bus":u(f),center:!0,"before-close":T,"show-close":!u(i)},{content:k(()=>[p.value?.hideSuggestion?c(``,!0):(M(),s(`div`,{key:0,class:U([e.$style.descriptionContainer,`p-s`])},[W(`div`,null,[m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`settings.communityNodes.installModal.description`)),1)]),_:1}),t[2]||=R(` `+o(` `)+` `,-1),m(u(lt),{to:u(rn),onClick:D},{default:k(()=>[R(o(u(n).baseText(`generic.moreInfo`)),1)]),_:1},8,[`to`])]),m(u(q),{label:u(n).baseText(`settings.communityNodes.browseButton.label`),icon:`external-link`,class:U(e.$style.browseButton),onClick:S},null,8,[`label`,`class`])],2)),W(`div`,{class:U([e.$style.formContainer,`mt-m`])},[m(u(Ct),{class:U(e.$style.labelTooltip),label:u(n).baseText(`settings.communityNodes.installModal.packageName.label`),"tooltip-text":u(n).baseText(`settings.communityNodes.installModal.packageName.tooltip`,{interpolate:{npmURL:u(gi)}})},{default:k(()=>[m(u(mt),{modelValue:h.value,"onUpdate:modelValue":t[0]||=e=>h.value=e,name:`packageNameInput`,type:`text`,"data-test-id":`package-name-input`,maxlength:214,placeholder:u(n).baseText(`settings.communityNodes.installModal.packageName.placeholder`),required:!0,disabled:u(i)||p.value?.disableInput,onBlur:E},null,8,[`modelValue`,`placeholder`,`disabled`])]),_:1},8,[`class`,`label`,`tooltip-text`]),W(`div`,{class:U([e.$style.infoText,`mt-4xs`])},[W(`span`,{size:`small`,class:U([e.$style.infoText,v.value?e.$style.error:``]),textContent:o(v.value)},null,10,Yg)],2),m(u(At),{modelValue:g.value,"onUpdate:modelValue":t[1]||=e=>g.value=e,class:U([e.$style.checkbox,_.value?e.$style.error:``,`mt-l`]),disabled:u(i),"data-test-id":`user-agreement-checkbox`,onChange:w},{label:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`settings.communityNodes.installModal.checkbox.label`)),1)]),_:1}),t[3]||=W(`br`,null,null,-1),m(u(lt),{to:u(Qt),onClick:O},{default:k(()=>[R(o(u(n).baseText(`generic.moreInfo`)),1)]),_:1},8,[`to`])]),_:1},8,[`modelValue`,`class`,`disabled`])],2)]),footer:k(()=>[m(u(q),{loading:u(i),disabled:!g.value||h.value===``||u(i),label:u(i)?u(n).baseText(`settings.communityNodes.installModal.installButton.label.loading`):u(n).baseText(`settings.communityNodes.installModal.installButton.label`),size:`large`,float:`right`,"data-test-id":`install-community-package-button`,onClick:C},null,8,[`loading`,`disabled`,`label`])]),_:1},8,[`name`,`title`,`event-bus`,`show-close`]))}}),[[`__cssModules`,{$style:{descriptionContainer:`_descriptionContainer_1v6t2_125`,formContainer:`_formContainer_1v6t2_140`,checkbox:`_checkbox_1v6t2_146`,error:`_error_1v6t2_150`}}]]),Zg=t(ql(),1),Qg={key:0,class:`status active`},$g={key:1,class:`status inactive`},e_=X(g({__name:`NodesInWorkflowTable`,props:b({data:{}},{sortBy:{},sortByModifiers:{}}),emits:[`update:sortBy`],setup(e){let t=e,n=P(e,`sortBy`),r=K(),i=vn(),l=d([{title:`Workflow`,key:`name`,width:250},{title:`Owner`,key:`homeProject.name`,width:100},{title:`Status`,key:`active`,width:30}]),f=a(()=>{if(!n?.value?.length)return t.data;let[{id:e,desc:r}]=n.value;return[...t.data].sort((t,n)=>!t[e]||!n[e]?0:t[e]<n[e]?r?1:-1:t[e]>n[e]?r?-1:1:0)}),p=e=>({name:$.WORKFLOW,params:{name:e}});return(e,t)=>{let a=B(`RouterLink`);return M(),s(`div`,null,[f.value?.length?(M(),y(u(wt),{key:0,"sort-by":n.value,"onUpdate:sortBy":t[0]||=e=>n.value=e,headers:l.value,items:f.value,"items-length":f.value.length,"page-sizes":[f.value.length+1]},{"item.name":k(({item:e})=>[m(a,{to:p(e.id),target:`_blank`},{default:k(()=>[m(u(Y),{class:`ellipsis`,style:{color:`var(--color--text)`}},{default:k(()=>[R(o(e.name),1)]),_:2},1024)]),_:2},1032,[`to`])]),"item.homeProject.name":k(({item:e})=>[W(`div`,null,[m(au,{class:`cardBadge`,resource:e,"resource-type":u(pr).Workflow,"resource-type-label":u(r).baseText(`generic.workflow`).toLowerCase(),"personal-project":u(i).personalProject,"show-badge-border":!1},null,8,[`resource`,`resource-type`,`resource-type-label`,`personal-project`])])]),"item.active":k(({item:e})=>[e.active?(M(),s(`span`,Qg,`Active`)):(M(),s(`span`,$g,`Inactive`))]),_:2},1032,[`sort-by`,`headers`,`items`,`items-length`,`page-sizes`])):c(``,!0)])}}}),[[`__scopeId`,`data-v-c38bafc6`]]),t_=X(g({__name:`CommunityPackageManageConfirmModal`,props:{modalName:{},activePackageName:{},mode:{}},setup(e){let t=e,n=Kl(),r=Jt(),i=la(),s=cr(),l=et(),f=ha(),p=K(),h=zn(),g=d(!1),_=d([]),v=i.isCommunityNodesFeatureEnabled&&i.isUnverifiedPackagesEnabled,b=i.isCommunityNodesFeatureEnabled&&!i.isUnverifiedPackagesEnabled,x=a(()=>n.installedPackages[t.activePackageName]),S=a(()=>i.isUnverifiedPackagesEnabled?x.value.updateAvailable:w.value?.npmVersion),w=d(),T=d(!0),E=d(x.value.updateAvailable??``),D=a(()=>x.value.installedNodes.map(e=>e.name).join(`, `)),O=a(()=>t.mode===Ht.UNINSTALL?{title:p.baseText(`settings.communityNodes.confirmModal.uninstall.title`),message:p.baseText(`settings.communityNodes.confirmModal.includedNodes`,{interpolate:{nodes:D.value}}),description:_.value.length?p.baseText(`settings.communityNodes.confirmModal.uninstall.description`):p.baseText(`settings.communityNodes.confirmModal.noWorkflowsUsingNodes`),buttonLabel:p.baseText(`settings.communityNodes.confirmModal.uninstall.buttonLabel`),buttonLoadingLabel:p.baseText(`settings.communityNodes.confirmModal.uninstall.buttonLoadingLabel`)}:{title:p.baseText(`settings.communityNodes.confirmModal.update.title`),message:p.baseText(`settings.communityNodes.confirmModal.includedNodes`,{interpolate:{nodes:D.value}}),description:_.value.length?p.baseText(`settings.communityNodes.confirmModal.update.description`):p.baseText(`settings.communityNodes.confirmModal.noWorkflowsUsingNodes`),warning:p.baseText(`settings.communityNodes.confirmModal.update.warning`),buttonLabel:p.baseText(`settings.communityNodes.confirmModal.update.buttonLabel`),buttonLoadingLabel:p.baseText(`settings.communityNodes.confirmModal.update.buttonLoadingLabel`)}),A=()=>!g.value,j=async()=>{t.mode===Ht.UNINSTALL?await N():t.mode===Ht.UPDATE&&await P()},N=async()=>{try{h.track(`user started cnr package deletion`,{package_name:x.value.packageName,package_node_names:x.value.installedNodes.map(e=>e.name),package_version:x.value.installedVersion,package_author:x.value.authorName,package_author_email:x.value.authorEmail}),g.value=!0,await n.uninstallPackage(t.activePackageName),await Promise.all([Jt().getNodeTypes(),Jt().fetchCommunityNodePreviews()]),f.showMessage({title:p.baseText(`settings.communityNodes.messages.uninstall.success.title`),type:`success`})}catch(e){f.showError(e,p.baseText(`settings.communityNodes.messages.uninstall.error`))}finally{g.value=!1,l.emit(`close`)}},P=async()=>{try{if(h.track(`user started cnr package update`,{package_name:x.value.packageName,package_node_names:x.value.installedNodes.map(e=>e.name),package_version_current:x.value.installedVersion,package_version_new:x.value.updateAvailable,package_author:x.value.authorName,package_author_email:x.value.authorEmail}),g.value=!0,i.isUnverifiedPackagesEnabled)await n.updatePackage(t.activePackageName);else if(i.isCommunityNodesFeatureEnabled)await n.updatePackage(t.activePackageName,S.value,w.value?.checksum);else throw Error(`Community nodes feature is not correctly enabled.`);await Jt().getNodeTypes(),f.showMessage({title:p.baseText(`settings.communityNodes.messages.update.success.title`),message:p.baseText(`settings.communityNodes.messages.update.success.message`,{interpolate:{packageName:t.activePackageName,version:S.value??``}}),type:`success`})}catch(e){f.showError(e,p.baseText(`settings.communityNodes.messages.update.error.title`))}finally{g.value=!1,l.emit(`close`)}};async function F(e){await r.loadNodeTypesIfNotLoaded();let t=r.visibleNodeTypes.find(t=>t.name.includes(e));t&&(w.value=await r.getCommunityNodeAttributes(t?.name)??void 0)}function I(){v&&w.value?.npmVersion&&x.value.updateAvailable&&(T.value=Zg.default.eq(w.value.npmVersion,x.value.updateAvailable))}function L(){b&&(E.value=w.value?.npmVersion??E.value)}let ee=async()=>{Vi().closeModal(Jn)};return C(async()=>{if(t.activePackageName&&await F(t.activePackageName),x.value?.installedNodes.length){let e=x.value.installedNodes.map(e=>e.type);_.value=(await s.fetchWorkflowsWithNodesIncluded(e))?.data??[]}I(),L()}),(e,t)=>(M(),y(tc,{width:`640px`,name:u(Jn),title:O.value.title,"event-bus":u(l),center:!0,"show-close":!g.value,"before-close":A},{content:k(()=>[m(u(Y),{color:`text-dark`,bold:!0},{default:k(()=>[R(o(O.value.message),1)]),_:1}),!T.value&&O.value.warning?(M(),y(u(Xe),{key:0,"data-test-id":`communityPackageManageConfirmModal-warning`,content:O.value.warning},null,8,[`content`])):c(``,!0),W(`div`,{class:U(e.$style.descriptionContainer)},[m(u(Y),{size:`medium`,color:`text-base`},{default:k(()=>[R(o(O.value.description),1)]),_:1})],2),_.value?.length?(M(),y(e_,{key:1,data:_.value},null,8,[`data`])):c(``,!0)]),footer:k(()=>[W(`div`,{class:U(e.$style.footerContainer)},[m(u(q),{variant:`subtle`,label:u(p).baseText(`settings.communityNodes.confirmModal.cancel`),size:`large`,"data-test-id":`close-button`,onClick:ee},null,8,[`label`]),m(u(q),{loading:g.value,disabled:g.value,label:g.value?O.value.buttonLoadingLabel:O.value.buttonLabel,size:`large`,onClick:j},null,8,[`loading`,`disabled`,`label`])],2)]),_:1},8,[`name`,`title`,`event-bus`,`show-close`]))}}),[[`__cssModules`,{$style:{descriptionContainer:`_descriptionContainer_jy4l8_125`,footerContainer:`_footerContainer_jy4l8_131`,descriptionIcon:`_descriptionIcon_jy4l8_137`,descriptionText:`_descriptionText_jy4l8_142`}}]]),n_=[`href`],r_=X(g({__name:`CommunityPlusEnrollmentModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=ha(),i=ou(),a=zn(),s=Ji(),c=d(!1),l=d(!1),f=d(s.currentUser?.email??``),p=d([{name:`email`}]),h=d({email:{validate:e=>typeof e==`string`?rs.test(e)?!1:{message:`settings.users.invalidEmailError`,options:{interpolate:{email:e}}}:!1}}),g=et(),_=()=>{a.track(`User skipped community plus`),g.emit(`close`),t.data?.closeCallback?.()},v=async()=>{if(!(!l.value||c.value)){c.value=!0;try{let{title:e,text:t}=await i.registerCommunityEdition(f.value);_(),r.showMessage({title:e??n.baseText(`communityPlusModal.success.title`),message:t??n.baseText(`communityPlusModal.success.message`,{interpolate:{email:f.value}}),type:`success`,duration:0})}catch(e){r.showError(e,n.baseText(`communityPlusModal.error.title`))}finally{c.value=!1}}};return(r,i)=>(M(),y(tc,{width:`500px`,name:t.modalName,"event-bus":u(g),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{content:k(()=>[W(`div`,null,[m(u(Y),{tag:`h1`,align:`center`,size:`xlarge`,class:`mb-m`},{default:k(()=>[R(o(e.data?.customHeading??u(n).baseText(`communityPlusModal.title`)),1)]),_:1}),m(u(Y),{tag:`p`},{default:k(()=>[R(o(u(n).baseText(`communityPlusModal.description`)),1)]),_:1}),W(`ul`,{class:U(r.$style.features)},[W(`li`,null,[i[2]||=W(`i`,null,``,-1),m(u(Y),null,{default:k(()=>[W(`strong`,null,o(u(n).baseText(`communityPlusModal.features.debugging.title`)),1),R(` `+o(u(n).baseText(`communityPlusModal.features.debugging.description`)),1)]),_:1})]),W(`li`,null,[i[3]||=W(`i`,null,``,-1),m(u(Y),null,{default:k(()=>[W(`strong`,null,o(u(n).baseText(`communityPlusModal.features.execution.title`)),1),R(` `+o(u(n).baseText(`communityPlusModal.features.execution.description`)),1)]),_:1})]),W(`li`,null,[i[4]||=W(`i`,null,` `,-1),m(u(Y),null,{default:k(()=>[W(`strong`,null,o(u(n).baseText(`communityPlusModal.features.folders.title`)),1),R(` `+o(u(n).baseText(`communityPlusModal.features.folders.description`)),1)]),_:1})])],2),m(u(tt),{id:`email`,modelValue:f.value,"onUpdate:modelValue":i[0]||=e=>f.value=e,label:u(n).baseText(`communityPlusModal.input.email.label`),type:`email`,name:`email`,"label-size":`small`,"tag-size":`small`,required:``,"show-required-asterisk":!0,"validate-on-blur":!1,"validation-rules":p.value,validators:h.value,onValidate:i[1]||=e=>l.value=e,onKeyup:ne(v,[`enter`])},null,8,[`modelValue`,`label`,`validation-rules`,`validators`])])]),footer:k(()=>[W(`div`,{class:U(r.$style.notice)},[m(u(Y),{size:`xsmall`,tag:`span`},{default:k(()=>[R(o(u(n).baseText(`communityPlusModal.notice`))+` `,1),W(`a`,{href:u(kn),target:`_blank`},o(u(n).baseText(`generic.moreInfo`)),9,n_)]),_:1})],2),W(`div`,{class:U(r.$style.buttons)},[m(u(q),{variant:`ghost`,class:U(r.$style.skip),disabled:c.value,onClick:_},{default:k(()=>[R(o(u(n).baseText(`communityPlusModal.button.skip`)),1)]),_:1},8,[`class`,`disabled`]),m(u(q),{disabled:!l.value||c.value,variant:`solid`,onClick:v},{default:k(()=>[R(o(u(n).baseText(`communityPlusModal.button.confirm`)),1)]),_:1},8,[`disabled`])],2)]),_:1},8,[`name`,`event-bus`]))}}),[[`__cssModules`,{$style:{notice:`_notice_vkgua_125`,features:`_features_vkgua_129`,buttons:`_buttons_vkgua_148`}}]]),i_={key:0,"data-test-id":`node-auth-type-selector`},a_=X(g({__name:`AuthTypeSelector`,props:{credentialType:{}},emits:[`authTypeChanged`],setup(e,{expose:t,emit:n}){let r=n,i=Jt(),l=qt(),f=K(),p=e,h=d(``),g=d({});C(()=>{if(_.value?.credentials){let e=_.value.credentials.find(e=>e.name===p.credentialType.name)||null;h.value=dn(_.value,e)?.value||``}x.value.forEach(e=>{g.value={...g.value,[e.name]:e.default}})});let _=a(()=>{let e=l.activeNode;return e?i.getNodeType(e.type,e.typeVersion):null}),v=a(()=>or(_.value,l.activeNode?.typeVersion)),b=a(()=>v.value.filter(e=>S(e))),x=a(()=>{let e=Fn(_.value);return _.value?.properties.filter(t=>wr(e,t))||[]});function S(e){if(x.value.length===0)return!0;let t=!1;return Object.keys(g.value).forEach(n=>{if(e.displayOptions?.show&&e.displayOptions.show[n]?.includes(g.value[n])){t=!0;return}}),t}function T(e){r(`authTypeChanged`,typeof e==`string`?e:String(e))}function E(e){g.value={...g.value,[e.name]:e.value}}return t({onAuthTypeChange:T}),(e,t)=>b.value.length>0?(M(),s(`div`,i_,[(M(!0),s(w,null,L(x.value,e=>(M(),s(`div`,{key:e.name,class:`mb-l`},[m(Da,{parameter:e,value:g.value[e.name]||e.default,path:e.name,"display-options":!1,onUpdate:E},null,8,[`parameter`,`value`,`path`])]))),128)),W(`div`,null,[m(u(Ct),{label:u(f).baseText(`credentialEdit.credentialConfig.authTypeSelectorLabel`),"tooltip-text":u(f).baseText(`credentialEdit.credentialConfig.authTypeSelectorTooltip`),required:!0},null,8,[`label`,`tooltip-text`])]),(M(!0),s(w,null,L(b.value,n=>(M(),y(u(Ma),{key:n.value,modelValue:h.value,"onUpdate:modelValue":[t[0]||=e=>h.value=e,T],label:n.value,class:U(e.$style.authRadioButton),border:``},{default:k(()=>[R(o(n.name),1)]),_:2},1032,[`modelValue`,`label`,`class`]))),128))])):c(``,!0)}}),[[`__cssModules`,{$style:{authRadioButton:`_authRadioButton_11kxo_125`}}]]),o_=X(g({__name:`Banner`,props:{theme:{},message:{},buttonLabel:{default:``},buttonLoadingLabel:{default:``},buttonTitle:{default:``},details:{default:``},buttonLoading:{type:Boolean,default:!1}},emits:[`click`],setup(e,{emit:t}){let n=t,r=d(!1),i=()=>{r.value=!0},a=()=>{r.value=!1,n(`click`)};return(t,n)=>(M(),y(u(Pe),{type:e.theme,"disable-transitions":!0,class:U(t.$style.container)},{default:k(()=>[m(u(J),{icon:e.theme===`success`?`circle-check`:`triangle-alert`,class:U(e.theme===`success`?t.$style.icon:t.$style.dangerIcon)},null,8,[`icon`,`class`]),W(`div`,{class:U(t.$style.banner)},[W(`div`,{class:U(t.$style.content)},[W(`div`,null,[W(`span`,{class:U(e.theme===`success`?t.$style.message:t.$style.dangerMessage)},o(e.message)+`\xA0 `,3),e.details&&!r.value?(M(),y(u(lt),{key:0,bold:!0,size:`small`,onClick:i},{default:k(()=>[W(`span`,{class:U(t.$style.moreDetails)},`More details`,2)]),_:1})):c(``,!0)])],2),t.$slots.button?E(t.$slots,`button`,{key:0}):e.buttonLabel?(M(),y(u(q),{key:1,variant:`outline`,label:e.buttonLoading&&e.buttonLoadingLabel?e.buttonLoadingLabel:e.buttonLabel,title:e.buttonTitle,loading:e.buttonLoading,size:`small`,onClick:F(a,[`stop`])},null,8,[`label`,`title`,`loading`])):c(``,!0)],2),r.value?(M(),s(`div`,{key:0,class:U(t.$style.details)},o(e.details),3)):c(``,!0)]),_:3},8,[`type`,`class`]))}}),[[`__cssModules`,{$style:{icon:`_icon_co75j_125`,dangerIcon:`_dangerIcon_co75j_133 _icon_co75j_125`,container:`_container_co75j_138`,message:`_message_co75j_145`,dangerMessage:`_dangerMessage_co75j_152 _message_co75j_145`,banner:`_banner_co75j_157`,content:`_content_co75j_162`,details:`_details_co75j_169 _message_co75j_145`,moreDetails:`_moreDetails_co75j_176`}}]]),s_={key:0,class:`fixed-collection-wrapper`,"data-test-id":`fixed-collection-wrapper`},c_=X(g({__name:`ParameterInputExpanded`,props:{parameter:{},value:{type:[String,Number,Boolean,null,Object,Array]},nodeValues:{default:()=>({})},showValidationWarnings:{type:Boolean},documentationUrl:{default:void 0},eventSource:{default:void 0},label:{default:()=>({size:`small`})}},emits:[`update`],setup(e,{emit:t}){let n=h(async()=>await Re(()=>import(`./FixedCollectionParameter-Dxy4eDtN.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71]))),r=e,i=t,l=d(!1),f=d(!1),p=d(!1),g=d(et()),_=Vi(),v=Gi(),b=K(),x=zn(),{activeCredentialType:S}=Fs(_),C=a(()=>r.parameter.type===`fixedCollection`),w=a(()=>{if(!C.value||!r.parameter.options?.length)return[];let e=[];for(let t of r.parameter.options)qa(t)&&e.push(...t.values.map(e=>e.name));return e}),T=a(()=>!C.value||!r.value?{}:r.value),E=a(()=>{if(!r.parameter.required)return!1;if(f.value||r.showValidationWarnings){if(r.parameter.type===`string`)return!r.value;if(r.parameter.type===`number`)return typeof r.value==`string`&&r.value.startsWith(`=`)?!1:typeof r.value!=`number`}return!1}),D=a(()=>O.value?null:b.credText(S.value).hint(r.parameter)),O=a(()=>Dn(r.parameter,r.value));function A(){l.value=!0}function j(){f.value=!0,l.value=!1}function N(e){p.value=e}function P(e){g.value.emit(`optionSelected`,e)}function F(e){let t=e.name;C.value||(t=t.split(`.`).pop()??t),i(`update`,{name:t,value:e.value})}function I(){x.track(`User clicked credential modal docs link`,{docs_link:r.documentationUrl,source:`field`,workflow_id:v.workflowId})}return(t,r)=>(M(),s(`div`,null,[m(u(Ct),{label:u(b).credText(u(S)).inputLabelDisplayName(e.parameter),"tooltip-text":u(b).credText(u(S)).inputLabelDescription(e.parameter),required:e.parameter.required,"show-tooltip":l.value,"show-options":p.value,"data-test-id":e.parameter.name,size:e.label.size},{options:k(()=>[m(Ea,{parameter:e.parameter,value:e.value,"is-read-only":!1,"show-options":!C.value,"show-expression-selector":!C.value,"is-value-expression":O.value,"onUpdate:modelValue":P,onMenuExpanded:N},null,8,[`parameter`,`value`,`show-options`,`show-expression-selector`,`is-value-expression`])]),default:k(()=>[C.value?c(``,!0):(M(),y(Oa,{key:0,ref:`param`,"input-size":`large`,parameter:e.parameter,"model-value":e.value,path:e.parameter.name,"hide-issues":!0,"documentation-url":e.documentationUrl,"error-highlight":E.value,"is-for-credential":!0,"event-source":e.eventSource,hint:!E.value&&D.value?D.value:``,"event-bus":g.value,onFocus:A,onBlur:j,onTextInput:F,onUpdate:F},null,8,[`parameter`,`model-value`,`path`,`documentation-url`,`error-highlight`,`event-source`,`hint`,`event-bus`])),E.value?(M(),s(`div`,{key:1,class:U(t.$style.errors)},[m(u(Y),{color:`danger`,size:`small`},{default:k(()=>[R(o(u(b).baseText(`parameterInputExpanded.thisFieldIsRequired`))+` `,1),e.documentationUrl?(M(),y(u(lt),{key:0,to:e.documentationUrl,size:`small`,underline:!0,onClick:I},{default:k(()=>[R(o(u(b).baseText(`parameterInputExpanded.openDocs`)),1)]),_:1},8,[`to`])):c(``,!0)]),_:1})],2)):c(``,!0)]),_:1},8,[`label`,`tooltip-text`,`required`,`show-tooltip`,`show-options`,`data-test-id`,`size`]),C.value?(M(),s(`div`,s_,[m(u(n),{parameter:e.parameter,values:T.value,"node-values":e.nodeValues,path:e.parameter.name,"hidden-issues-inputs":w.value,onValueChanged:F},null,8,[`parameter`,`values`,`node-values`,`path`,`hidden-issues-inputs`])])):c(``,!0)]))}}),[[`__cssModules`,{$style:{errors:`_errors_jmusx_125`,hint:`_hint_jmusx_129`}}]]),l_=X(g({__name:`CredentialInputs`,props:{credentialProperties:{},credentialData:{},documentationUrl:{},showValidationWarnings:{type:Boolean}},emits:[`update`],setup(e,{emit:t}){let n=e,r=a(()=>n.credentialData),i=t;function o(e){i(`update`,e)}return(t,n)=>e.credentialProperties.length?(M(),s(`div`,{key:0,class:U(t.$style.container),onKeydown:n[1]||=F(()=>{},[`stop`])},[(M(!0),s(w,null,L(e.credentialProperties,t=>(M(),s(`form`,{key:t.name,autocomplete:`off`,"data-test-id":`credential-connection-parameter`,onSubmit:n[0]||=F(()=>{},[`prevent`])},[t.type===`notice`?(M(),y(u(Xe),{key:0,content:t.displayName},null,8,[`content`])):(M(),y(c_,{key:1,parameter:t,value:r.value[t.name],"node-values":r.value,"documentation-url":e.documentationUrl,"show-validation-warnings":e.showValidationWarnings,label:{size:`medium`},"event-source":`credentials`,onUpdate:o},null,8,[`parameter`,`value`,`node-values`,`documentation-url`,`show-validation-warnings`]))],32))),128))],34)):c(``,!0)}}),[[`__cssModules`,{$style:{container:`_container_55ujx_125`}}]]),u_=X(g({__name:`OauthButton`,props:{isGoogleOAuthType:{type:Boolean}},setup(e){let t=K();return(n,r)=>(M(),s(`div`,{class:U(n.$style.container)},[e.isGoogleOAuthType?(M(),y(ba,{key:0})):(M(),y(u(q),{key:1,label:u(t).baseText(`credentialEdit.oAuthButton.connectMyAccount`),size:`large`},null,8,[`label`]))],2))}}),[[`__cssModules`,{$style:{container:`_container_8ywgs_125`}}]]),d_={key:1},f_={class:`ml-4xs`},p_=[`textContent`],m_=X(g({__name:`CredentialConfig`,props:{mode:{},credentialType:{},credentialProperties:{},credentialData:{},credentialId:{default:``},credentialPermissions:{default:()=>({})},parentTypes:{default:()=>[]},showValidationWarning:{type:Boolean,default:!1},authError:{default:``},testedSuccessfully:{type:Boolean},isOAuthType:{type:Boolean},allOAuth2BasePropertiesOverridden:{type:Boolean},isOAuthConnected:{type:Boolean},isRetesting:{type:Boolean},requiredPropertiesFilled:{type:Boolean},showAuthTypeSelector:{type:Boolean},isManaged:{type:Boolean},isDynamicCredentialsEnabled:{type:Boolean},isResolvable:{type:Boolean},isNewCredential:{type:Boolean}},emits:[`update`,`authTypeChanged`,`scrollToTop`,`retest`,`oauth`,`update:isResolvable`],setup(e,{emit:t}){let n=e,r=t,i=Wi(),l=qt(),d=Ws(),f=Vi(),p=Gi(),h=lc(),g=uc(),_=K(),v=zn();ae(async()=>{if(f.activeCredentialType=n.credentialType.name,d.defaultLocale===`en`)return;let e=`n8n-nodes-base.credentials.${n.credentialType.name}`;if(_.exists(e))return;let t=await i.getCredentialTranslation(n.credentialType.name);t&&ve({[n.credentialType.name]:t},d.defaultLocale)});let b=a(()=>n.credentialType?Gn(n.credentialType.displayName)||_.baseText(`credentialEdit.credentialConfig.theServiceYouReConnectingTo`):``),x=a(()=>n.credentialType?.name),S=a(()=>i.getCredentialOwnerNameById(`${n.credentialId}`)),C=a(()=>{let e=n.credentialType,t=l.activeNode,r=t?Eo(t.type):!1,i=e?.documentationUrl;if(!i)return``;let a;if(i.startsWith(`https://`)||i.startsWith(`http://`)){if(a=new URL(i),a.hostname!==`docs.n8n.io`)return i}else if(r)return``;else a=new URL(`${Vo}${i}/`);return a.hostname===`docs.n8n.io`&&(a.searchParams.set(`utm_source`,`n8n_app`),a.searchParams.set(`utm_medium`,`credential_settings`),a.searchParams.set(`utm_campaign`,`create_new_credentials_modal`)),a.href}),E=a(()=>x.value===`googleOAuth2Api`||n.parentTypes.includes(`googleOAuth2Api`)),D=a(()=>{let e=x.value===`oAuth2Api`||n.parentTypes.includes(`oAuth2Api`)?`oauth2`:`oauth1`;return d.OAuthCallbackUrls[e]}),O=a(()=>n.isOAuthType&&n.requiredPropertiesFilled&&n.isOAuthConnected&&!n.authError),A=a(()=>n.credentialType===null),j=a(()=>n.mode===`new`&&!n.credentialId),N=a(()=>C.value&&C.value.includes(`docs.n8n.io`)&&n.credentialProperties.length&&n.credentialPermissions.update&&!(n.isOAuthType&&n.requiredPropertiesFilled)&&h.isAssistantEnabled),P=a(()=>h.isCredTypeActive(n.credentialType));function F(e){r(`update`,e)}function I(){v.track(`User clicked credential modal docs link`,{docs_link:C.value,credential_type:x.value,source:`modal`,workflow_id:p.workflowId})}function L(e){r(`authTypeChanged`,e)}async function ee(){if(!h.isSessionEnded){f.openModalWithData({name:Ha,data:{context:{credHelp:{credType:n.credentialType}}}});return}await g.openWithCredHelp(n.credentialType)}return T(O,(e,t)=>{e&&!t&&r(`scrollToTop`)}),(t,n)=>e.isManaged?(M(),y(u(we),{key:0,theme:`warning`,icon:`triangle-alert`},{default:k(()=>[R(o(u(_).baseText(`freeAi.credits.credentials.edit`)),1)]),_:1})):(M(),s(`div`,d_,[W(`div`,{class:U(t.$style.config),"data-test-id":`node-credentials-config-container`},[m(Su,{"credential-type-name":e.credentialType?.name},null,8,[`credential-type-name`]),C.value&&e.credentialProperties.length?(M(),y(u(Xe),{key:0,theme:`warning`},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.needHelpFillingOutTheseFields`))+` `,1),W(`span`,f_,[m(u(lt),{to:C.value,size:`small`,bold:``,onClick:I},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.openDocs`)),1)]),_:1},8,[`to`])])]),_:1})):c(``,!0),ce(m(o_,{theme:`danger`,message:u(_).baseText(`credentialEdit.credentialConfig.pleaseCheckTheErrorsBelow${e.credentialPermissions.update?``:`.sharee`}`,{interpolate:{owner:S.value}})},null,8,[`message`]),[[ie,e.showValidationWarning]]),e.authError&&!e.showValidationWarning?(M(),y(o_,{key:1,theme:`danger`,message:u(_).baseText(`credentialEdit.credentialConfig.couldntConnectWithTheseSettings${e.credentialPermissions.update?``:`.sharee`}`,{interpolate:{owner:S.value}}),details:e.authError,"button-label":u(_).baseText(`credentialEdit.credentialConfig.retry`),"button-loading-label":`Retrying`,"button-title":u(_).baseText(`credentialEdit.credentialConfig.retryCredentialTest`),"button-loading":e.isRetesting,onClick:n[0]||=e=>t.$emit(`retest`)},null,8,[`message`,`details`,`button-label`,`button-title`,`button-loading`])):c(``,!0),ce(m(o_,{theme:`success`,message:u(_).baseText(`credentialEdit.credentialConfig.accountConnected`),"button-label":u(_).baseText(`credentialEdit.credentialConfig.reconnect`),"button-title":u(_).baseText(`credentialEdit.credentialConfig.reconnectOAuth2Credential`),"data-test-id":`oauth-connect-success-banner`,onClick:n[2]||=e=>t.$emit(`oauth`)},te({_:2},[E.value?{name:`button`,fn:k(()=>[W(`p`,{class:U(t.$style.googleReconnectLabel),textContent:o(`${u(_).baseText(`credentialEdit.credentialConfig.reconnect`)}:`)},null,10,p_),m(ba,{onClick:n[1]||=e=>t.$emit(`oauth`)})]),key:`0`}:void 0]),1032,[`message`,`button-label`,`button-title`]),[[ie,O.value&&!e.showValidationWarning]]),ce(m(o_,{theme:`success`,message:u(_).baseText(`credentialEdit.credentialConfig.connectionTestedSuccessfully`),"button-label":u(_).baseText(`credentialEdit.credentialConfig.retry`),"button-loading-label":u(_).baseText(`credentialEdit.credentialConfig.retrying`),"button-title":u(_).baseText(`credentialEdit.credentialConfig.retryCredentialTest`),"button-loading":e.isRetesting,"data-test-id":`credentials-config-container-test-success`,onClick:n[3]||=e=>t.$emit(`retest`)},null,8,[`message`,`button-label`,`button-loading-label`,`button-title`,`button-loading`]),[[ie,e.testedSuccessfully&&!e.showValidationWarning]]),e.isDynamicCredentialsEnabled&&e.isOAuthType&&(e.credentialPermissions.create&&j.value||e.credentialPermissions.update)?(M(),s(`div`,{key:2,class:U(t.$style.dynamicCredentials),"data-test-id":`dynamic-credentials-section`},[W(`div`,{class:U(t.$style.dynamicCredentialsRow)},[m(u(gt),{"model-value":e.isResolvable,"data-test-id":`dynamic-credentials-toggle`,"onUpdate:modelValue":n[4]||=e=>t.$emit(`update:isResolvable`,!!e)},null,8,[`model-value`]),m(u(Y),{size:`small`},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.dynamicCredentials.title`)),1)]),_:1}),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,null,o(u(_).baseText(`credentialEdit.credentialConfig.dynamicCredentials.infoTip`)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`,size:`small`,color:`text-light`})]),_:1})],2)],2)):c(``,!0),e.credentialPermissions.create&&j.value||e.credentialPermissions.update?(M(),s(w,{key:3},[e.showAuthTypeSelector&&j.value?(M(),y(a_,{key:0,"credential-type":e.credentialType,onAuthTypeChanged:L},null,8,[`credential-type`])):c(``,!0),N.value?(M(),s(`div`,{key:1,class:U(t.$style.askAssistantButton),"data-test-id":`credential-edit-ask-assistant-button`},[m(u(ot),{asked:P.value,onClick:ee},null,8,[`asked`]),n[6]||=W(`span`,null,`for setup instructions`,-1)],2)):c(``,!0),e.isOAuthType&&!e.allOAuth2BasePropertiesOverridden?(M(),y(sc,{key:2,label:u(_).baseText(`credentialEdit.credentialConfig.oAuthRedirectUrl`),value:D.value,"copy-button-text":u(_).baseText(`credentialEdit.credentialConfig.clickToCopy`),hint:u(_).baseText(`credentialEdit.credentialConfig.subtitle`,{interpolate:{appName:b.value}}),"toast-title":u(_).baseText(`credentialEdit.credentialConfig.redirectUrlCopiedToClipboard`),"redact-value":!0},null,8,[`label`,`value`,`copy-button-text`,`hint`,`toast-title`])):c(``,!0)],64)):(M(),y(xu,{key:4,features:[u(Fo).Sharing]},{default:k(()=>[W(`div`,null,[m(u(Ke),{bold:!1},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialEdit.info.sharee`,{interpolate:{credentialOwnerName:S.value}})),1)]),_:1})])]),_:1},8,[`features`])),e.credentialType&&(e.credentialPermissions.create&&j.value||e.credentialPermissions.update)?(M(),y(l_,{key:5,"credential-data":e.credentialData,"credential-properties":e.credentialProperties,"documentation-url":C.value,"show-validation-warnings":e.showValidationWarning,onUpdate:F},null,8,[`credential-data`,`credential-properties`,`documentation-url`,`show-validation-warnings`])):c(``,!0),e.isOAuthType&&e.requiredPropertiesFilled&&!e.isOAuthConnected&&(e.credentialPermissions.create&&j.value||e.credentialPermissions.update)?(M(),y(u_,{key:6,"is-google-o-auth-type":E.value,"data-test-id":`oauth-connect-button`,onClick:n[5]||=e=>t.$emit(`oauth`)},null,8,[`is-google-o-auth-type`])):c(``,!0),A.value?(M(),y(u(Y),{key:7,color:`text-base`,size:`medium`},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.missingCredentialType`)),1)]),_:1})):c(``,!0),m(xu,{features:[u(Fo).ExternalSecrets]},{fallback:k(()=>[m(u(Ke),{class:`mt-s`},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.externalSecrets`))+` `,1),m(u(lt),{bold:``,to:u(_).baseText(`settings.externalSecrets.docs`),size:`small`},{default:k(()=>[R(o(u(_).baseText(`credentialEdit.credentialConfig.externalSecrets.moreInfo`)),1)]),_:1},8,[`to`])]),_:1})]),_:1},8,[`features`])],2)]))}}),[[`__cssModules`,{$style:{config:`_config_1hbof_125`,googleReconnectLabel:`_googleReconnectLabel_1hbof_133`,askAssistantButton:`_askAssistantButton_1hbof_137`,dynamicCredentials:`_dynamicCredentials_1hbof_146`,dynamicCredentialsRow:`_dynamicCredentialsRow_1hbof_155`,dynamicCredentialsNotice:`_dynamicCredentialsNotice_1hbof_161`}}]]),h_=X(g({__name:`CredentialInfo`,props:{currentCredential:{}},setup(e){let t=K();return(n,r)=>(M(),s(`div`,{class:U(n.$style.container)},[e.currentCredential?(M(),y(u(Na),{key:0},{default:k(()=>[m(u(Z),{span:8,class:U(n.$style.label)},{default:k(()=>[m(u(Y),{compact:!0,bold:!0},{default:k(()=>[R(o(u(t).baseText(`credentialEdit.credentialInfo.created`)),1)]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:16,class:U(n.$style.valueLabel)},{default:k(()=>[m(u(Y),{compact:!0},{default:k(()=>[m(Cu,{date:e.currentCredential.createdAt,capitalize:!0},null,8,[`date`])]),_:1})]),_:1},8,[`class`])]),_:1})):c(``,!0),e.currentCredential?(M(),y(u(Na),{key:1},{default:k(()=>[m(u(Z),{span:8,class:U(n.$style.label)},{default:k(()=>[m(u(Y),{compact:!0,bold:!0},{default:k(()=>[R(o(u(t).baseText(`credentialEdit.credentialInfo.lastModified`)),1)]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:16,class:U(n.$style.valueLabel)},{default:k(()=>[m(u(Y),{compact:!0},{default:k(()=>[m(Cu,{date:e.currentCredential.updatedAt,capitalize:!0},null,8,[`date`])]),_:1})]),_:1},8,[`class`])]),_:1})):c(``,!0),e.currentCredential?(M(),y(u(Na),{key:2},{default:k(()=>[m(u(Z),{span:8,class:U(n.$style.label)},{default:k(()=>[m(u(Y),{compact:!0,bold:!0},{default:k(()=>[R(o(u(t).baseText(`credentialEdit.credentialInfo.id`)),1)]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:16,class:U(n.$style.valueLabel)},{default:k(()=>[m(u(Y),{compact:!0},{default:k(()=>[R(o(e.currentCredential.id),1)]),_:1})]),_:1},8,[`class`])]),_:1})):c(``,!0)],2))}}),[[`__cssModules`,{$style:{container:`_container_11e3x_125`,label:`_label_11e3x_129`,accessLabel:`_accessLabel_11e3x_134 _label_11e3x_129`,valueLabel:`_valueLabel_11e3x_139`}}]]),g_={key:0},__={key:1},v_=X(g({__name:`CredentialSharing.ee`,props:{credentialId:{},credentialData:{},credentialPermissions:{},credential:{default:null},modalBus:{},isSharedGlobally:{type:Boolean,default:!1}},emits:[`update:modelValue`,`update:shareWithAllUsers`],setup(e,{emit:t}){let n=e,r=t,i=K(),c=Ji(),l=Vi(),f=la(),p=vn(),h=Eu(),g=$s(),_=d([...n.credential?.sharedWithProjects??[]]),v=a(()=>f.isEnterpriseFeatureEnabled[Fo.Sharing]),b=a(()=>{let{name:e,email:t}=$t(n.credential?.homeProject?.name??``);return e??t??``}),x=a(()=>n.credentialData&&(e=>`homeProject`in e)(n.credentialData)?n.credentialData.homeProject:void 0),S=a(()=>p.projects.filter(e=>e.id!==n.credential?.homeProject?.id&&e.id!==x.value?.id)),w=a(()=>n.credential?.homeProject??x.value),E=a(()=>w.value?.type===Nn.Team),D=a(()=>w.value?.type===Nn.Personal&&w.value?.id===p.personalProject?.id&&!n.credentialPermissions.share),O=a(()=>({"credential:user":i.baseText(`credentialEdit.credentialSharing.role.user`)})),A=a(()=>h.processedCredentialRoles.map(({slug:e,scopes:t,licensed:n,description:r,systemRole:i,roleType:a})=>({slug:e,displayName:O.value[e],scopes:t,licensed:n,description:r,systemRole:i,roleType:a}))),j=a(()=>p.teamProjects.length?i.baseText(`projects.sharing.select.placeholder.project`):i.baseText(`projects.sharing.select.placeholder.user`)),N=a(()=>vs(c.currentUser?.globalScopes).credential?.shareGlobally??!1);T(_,e=>{r(`update:modelValue`,e)},{deep:!0}),C(async()=>{await p.getAllProjects()});function P(){g.goToUpgrade(`credential_sharing`,`upgrade-credentials-sharing`)}return(t,n)=>(M(),s(`div`,{class:U(t.$style.container)},[v.value?(M(),s(`div`,__,[e.credentialPermissions.share||D.value?(M(),y(u(Ke),{key:0,bold:!1,class:`mb-s`},{default:k(()=>[R(o(u(i).baseText(`credentialEdit.credentialSharing.info.owner`)),1)]),_:1})):E.value?(M(),y(u(Ke),{key:1,bold:!1,class:`mb-s`},{default:k(()=>[R(o(u(i).baseText(`credentialEdit.credentialSharing.info.sharee.team`)),1)]),_:1})):(M(),y(u(Ke),{key:2,bold:!1,class:`mb-s`},{default:k(()=>[R(o(u(i).baseText(`credentialEdit.credentialSharing.info.sharee.personal`,{interpolate:{credentialOwnerName:b.value}})),1)]),_:1})),m(Tu,{modelValue:_.value,"onUpdate:modelValue":n[0]||=e=>_.value=e,projects:S.value,roles:A.value,"home-project":w.value,readonly:!e.credentialPermissions.share,static:!e.credentialPermissions.share,"disabled-tooltip":D.value?u(i).baseText(`credentialEdit.credentialSharing.info.personalSpaceRestricted`):void 0,placeholder:j.value,"can-share-globally":N.value,"is-shared-globally":e.isSharedGlobally,"onUpdate:shareWithAllUsers":n[1]||=e=>r(`update:shareWithAllUsers`,e)},null,8,[`modelValue`,`projects`,`roles`,`home-project`,`readonly`,`static`,`disabled-tooltip`,`placeholder`,`can-share-globally`,`is-shared-globally`])])):(M(),s(`div`,g_,[m(u(We),{heading:u(i).baseText(u(l).contextBasedTranslationKeys.credentials.sharing.unavailable.title),description:u(i).baseText(u(l).contextBasedTranslationKeys.credentials.sharing.unavailable.description),"button-text":u(i).baseText(u(l).contextBasedTranslationKeys.credentials.sharing.unavailable.button),"onClick:button":P},null,8,[`heading`,`description`,`button-text`])]))],2))}}),[[`__cssModules`,{$style:{container:`_container_1f7z1_125`}}]]),y_=X(g({__name:`SaveButton`,props:{saved:{type:Boolean},isSaving:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},variant:{default:`solid`},withShortcut:{type:Boolean,default:!1},shortcutTooltip:{},savingLabel:{}},emits:[`click`],setup(e,{emit:t}){let n=t,r=e,i=K(),c=a(()=>r.isSaving?r.savingLabel??i.baseText(`saveButton.saving`):i.baseText(`saveButton.save`)),l=a(()=>r.shortcutTooltip??i.baseText(`saveButton.save`));return(t,r)=>(M(),s(`span`,{class:U(t.$style.container),"data-test-id":`save-button`},[e.saved?(M(),s(`span`,{key:0,class:U(t.$style.saved),onClick:r[0]||=F(()=>{},[`prevent`,`stop`])},o(u(i).baseText(`saveButton.saved`)),3)):(M(),s(w,{key:1},[e.withShortcut?(M(),y(Du,{key:0,label:l.value,shortcut:{keys:[`s`],metaKey:!0},placement:`bottom`},{default:k(()=>[m(u(q),{label:c.value,loading:e.isSaving,disabled:e.disabled,class:U(t.$style.button),variant:e.variant,onClick:r[1]||=e=>n(`click`)},null,8,[`label`,`loading`,`disabled`,`class`,`variant`])]),_:1},8,[`label`])):(M(),y(u(q),{key:1,label:c.value,loading:e.isSaving,disabled:e.disabled,class:U(t.$style.button),variant:e.variant,onClick:r[2]||=e=>n(`click`)},null,8,[`label`,`loading`,`disabled`,`class`,`variant`]))],64))],2))}}),[[`__cssModules`,{$style:{container:`_container_1f4xz_125`,button:`_button_1f4xz_132`,saved:`_saved_1f4xz_136`}}]]),b_=t(vt(),1),x_=X(g({__name:`CredentialEdit`,props:{modalName:{},activeId:{default:void 0},mode:{default:`new`}},setup(e){let t=e,n=Wi(),r=qt(),i=la(),l=Vi(),f=Gi(),p=Sr(),h=Jt(),g=vn(),_=Tn(),v=fa(),b=ha(),x=hr(),S=K(),T=zn(),E=jt(),D=Ws(),{isEnabled:O}=cu(),A=d(`connection`),j=d(``),N=d(``),P=d(``),F=d(``),I=d({}),ee=d(null),te=d(et()),ne=d(!1),z=d(!1),B=d(!1),ie=d(!1),V=d(!1),ae=d(!1),H=d(!1),oe=d(!1),se=d(!1),ce=d(!1),le=d(!1),ue=d(!1),de=d(),fe=d(!1),me=d(!1),he=a(()=>{let e=r.activeNode;return e?h.getNodeType(e.type,e.typeVersion):null}),ge=a(()=>{if(t.mode!==`new`)return null;if(F.value!==``)return n.getCredentialTypeByName(F.value)??null;if(ue.value){let e=or(he.value);return e.length>0&&he.value?.credentials?_a(he.value,e[0].value):he.value?.credentials?he.value.credentials[0]:null}return null}),G=a(()=>{if(!_e.value)return null;let e=n.getCredentialTypeByName(_e.value);return e?{...e,properties:Fe(_e.value)}:null}),_e=a(()=>t.mode===`edit`?ee.value?ee.value.type:null:ge.value?ge.value.name:`${t.activeId}`),ve=a(()=>t.activeId?n.getCredentialById(t.activeId)?.isManaged??!1:!1),ye=a(()=>Se.value||!Ee.value||Te.value.some(e=>{let t=I.value[e.name];return typeof t==`string`&&ss(t)&&!ia(t)})?!1:!!be.value.filter(e=>e.credentials?!!e.credentials.filter(e=>e.name===_e.value&&e.testedBy).length:!1).length||!!G.value&&!!G.value.test),be=a(()=>_e.value?n.getNodesWithAccess(_e.value):[]),xe=a(()=>_e.value?Ke(_e.value):[]),Se=a(()=>!!_e.value&&((_e.value===`oAuth2Api`||xe.value.includes(`oAuth2Api`))&&(I.value.grantType===`authorizationCode`||I.value.grantType===`pkce`)||_e.value===`oAuth1Api`||xe.value.includes(`oAuth1Api`))),Ce=a(()=>G.value?.__overwrittenProperties?G.value.__overwrittenProperties.includes(`clientId`)&&G.value.__overwrittenProperties.includes(`clientSecret`):!1),we=a(()=>Se.value&&!!I.value.oauthTokenData),Te=a(()=>{let e=G.value;if(!e)return[];let t=e.properties.filter(t=>Pe(t)?!e.__overwrittenProperties?.includes(t.name):!1);return t.every(e=>e.type===`notice`)?[]:t}),Ee=a(()=>{for(let e of Te.value){if(e.required!==!0)continue;let t=I.value[e.name];if(e.type===`string`&&!t)return!1;if(e.type===`number`){let e=typeof t==`string`&&t.startsWith(`=`);if(typeof t!=`number`&&!e)return!1}}return!0}),De=a(()=>vs(ee.value?.scopes??Me.value?.scopes).credential),Oe=a(()=>[{id:`connection`,label:S.baseText(`credentialEdit.credentialEdit.connection`),position:`top`},{id:`sharing`,label:S.baseText(`credentialEdit.credentialEdit.sharing`),position:`top`},{id:`details`,label:S.baseText(`credentialEdit.credentialEdit.details`),position:`top`}]),ke=a(()=>{let e=_e.value;return(!e||e===`null`)&&he.value?.credentials&&he.value.credentials.length>0&&(e=he.value.credentials[0].name),e??``}),Ae=a(()=>(t.mode===`new`||ie.value||V.value)&&(De.value.create??De.value.update)),je=a(()=>A.value===`sharing`&&!!G.value),Me=a(()=>{let{currentProject:e,personalProject:t}=g;return e??t}),q=a(()=>t.mode===`new`&&!N.value);C(async()=>{if(ue.value=Mn(l.modalsById.editCredential)&&l.modalsById.editCredential.showAuthSelector===!0,t.mode===`new`&&_e.value?(P.value=await n.getNewCredentialName({credentialTypeName:ke.value}),I.value={...I.value,...Me.value?{homeProject:Me.value}:{}}):await Le(),G.value)for(let e of G.value.properties)!I.value.hasOwnProperty(e.name)&&!G.value.__overwrittenProperties?.includes(e.name)&&(I.value={...I.value,[e.name]:e.default});await v.run(`credentialsEdit.credentialModalOpened`,{credentialType:_e.value,isEditingCredential:t.mode===`edit`,activeNode:r.activeNode}),setTimeout(async()=>{N.value&&(!Ee.value&&De.value.update?H.value=!0:await Xe())},0),ae.value=!1});async function Ne(){let e=!1;if(ie.value){let t=G.value?G.value.displayName:``;e=await x.confirm(S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose1.message`,{interpolate:{credentialDisplayName:t}}),S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose1.headline`),{cancelButtonText:S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose1.cancelButtonText`),confirmButtonText:S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose1.confirmButtonText`)})===Co}else De.value.update&&Se.value&&!we.value&&(e=await x.confirm(S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose2.message`),S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose2.headline`),{cancelButtonText:S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose2.cancelButtonText`),confirmButtonText:S.baseText(`credentialEdit.credentialEdit.confirmMessage.beforeClose2.confirmButtonText`)})===Co);if(e)Ee.value?Se.value&&Ye():(H.value=!0,Je());else return l.activeCredentialType=null,!0;return!1}function Pe(e){return e.type===`hidden`||e.displayOptions?.hideOnCloud&&i.isCloudDeployment?!1:e.displayOptions===void 0?!0:_.displayParameter(I.value,e,``,null)}function Fe(e){let t=n.getCredentialTypeByName(e);if(!t)return[];if(t.extends===void 0)return t.properties;let r=[];for(let e of t.extends)Wa(r,Fe(e));return Wa(r,t.properties),r}function Ie(e){let t=structuredClone(e);return Object.entries(t).forEach(([e,n])=>{n===``&&delete t[e]}),t}async function Le(){N.value=t.activeId??``;try{let e=await n.getCredentialData({id:N.value});if(!e)throw Error(S.baseText(`credentialEdit.credentialEdit.couldNotFindCredentialWithId`)+`:`+N.value);ee.value=e,I.value=Ie(e.data||{}),e.sharedWithProjects&&(I.value={...I.value,sharedWithProjects:e.sharedWithProjects}),e.homeProject&&(I.value={...I.value,homeProject:e.homeProject}),P.value=e.name,fe.value=`isGlobal`in e&&typeof e.isGlobal==`boolean`?e.isGlobal:!1,me.value=`isResolvable`in e&&typeof e.isResolvable==`boolean`?e.isResolvable:!1}catch(e){b.showError(e,S.baseText(`credentialEdit.credentialEdit.showError.loadCredential.title`)),Ge();return}}function Re(e){A.value=e;let t=G.value?G.value.name:``,n=r.activeNode;T.track(`User viewed credential tab`,{credential_type:t,node_type:n?n.type:null,tab:e,workflow_id:f.workflowId,credential_id:N.value,sharing_enabled:Fo.Sharing})}function ze(e){I.value={...I.value,sharedWithProjects:e},le.value=!0,ie.value=!0}function He(e){fe.value=e,ie.value=!0}function Ue(e){me.value=e,ie.value=!0}function We({name:e,value:t}){if((0,b_.default)(I.value,e)===t)return;ie.value=!0;let{oauthTokenData:n,...r}=I.value;I.value=Qa(r),ja(I.value,e,t)}function Ge(){te.value.emit(`close`)}function Ke(e){let t=n.getCredentialTypeByName(e);if(t?.extends===void 0)return[];let r=[];for(let e of t.extends)r.push(e),r.push.apply(r,Ke(e));return r}function qe(e){ie.value=!0,ce.value=!0,P.value=e}function Je(){setTimeout(()=>{de.value&&(de.value.scrollTop=0)},0)}function Ye(){setTimeout(()=>{de.value&&(de.value.scrollTop=de.value.scrollHeight)},0)}async function Xe(){if(ve.value)return;if(!ye.value||!_e.value){j.value=``,oe.value=!1;return}let{ownedBy:e,sharedWithProjects:t,...n}=I.value,r={id:N.value,name:P.value,type:_e.value,data:n};se.value=!0,await Ze(r),se.value=!1}async function Ze(e){let t=await n.testCredential(e);t.status===`Error`?(j.value=t.message,oe.value=!1):(j.value=``,oe.value=!0),Je()}function Qe(e){return Object.entries(e).some(([,e])=>typeof e!=`object`&&/=.*\{\{[^}]*\$secrets\.[^}]+}}.*/.test(`${e}`))}async function $e(){if(Ee.value)H.value=!1;else return H.value=!0,Je(),null;z.value=!0,Gs(G.value);let e=qo(G.value.properties,I.value,!1,!1,null,null);Gs(_e.value);let n={id:N.value,name:P.value,type:_e.value,data:e,isGlobal:fe.value,isResolvable:me.value};i.isEnterpriseFeatureEnabled[Fo.Sharing]&&I.value.sharedWithProjects&&(n.sharedWithProjects=I.value.sharedWithProjects),I.value.homeProject&&(n.homeProject=I.value.homeProject);let a=null,o=t.mode===`new`&&!N.value;if(o?a=await rt(n,g.currentProject):(i.isEnterpriseFeatureEnabled[Fo.Sharing]&&(n.sharedWithProjects=I.value.sharedWithProjects),a=await at(n)),z.value=!1,a){N.value=a.id,ee.value=a,ye.value?(B.value=!0,n.data=I.value,n.id=N.value,await Ze(n),B.value=!1):(j.value=``,oe.value=!1);let e={credential_type:n.type,workflow_id:f.workflowId,credential_id:a.id,is_complete:!!Ee.value,is_new:o,uses_external_secrets:Qe(n.data??{})};Se.value?e.is_valid=!!we.value:ye.value&&(e.is_valid=!!oe.value),r.activeNode&&(e.node_type=r.activeNode.type),j.value&&j.value!==``&&(e.authError=j.value),Se.value||(T.track(`User saved credentials`,e),tt(!!e.is_valid)),await v.run(`credentialEdit.saveCredential`,e)}return a}async function tt(e){if(!(!e||!i.isCloudDeployment))try{let e=await Pn(D.restApiContext,{eventType:`credential-saved`,metadata:{credential_type:_e.value}});e.title&&e.message&&setTimeout(async()=>{try{await x.confirm(e.message,e.title,{confirmButtonText:S.baseText(`generic.keepBuilding`),cancelButtonText:``,showCancelButton:!1,closeOnClickModal:!0,closeOnPressEscape:!0})}catch{}},15e3)}catch{}}let nt=e=>{let t=S.baseText(`credentials.create.personal.toast.title`),n=``;return g.currentProject&&g.currentProject.id!==g.personalProject?.id&&(t=S.baseText(`credentials.create.project.toast.title`,{interpolate:{projectName:e?.name??``}}),n=S.baseText(`credentials.create.project.toast.text`,{interpolate:{projectName:e?.name??``}})),{title:t,message:n}};async function rt(e,t){let r;try{r=await n.createNewCredential(e,t?.id,E.currentRoute.value.query.uiContext?.toString());let{uiContext:i,...a}=E.currentRoute.value.query;E.replace({query:a}),ie.value=!1;let{title:o,message:s}=nt(t);b.showMessage({title:o,message:s,type:`success`})}catch(e){return b.showError(e,S.baseText(`credentialEdit.credentialEdit.showError.createCredential.title`)),null}return await v.run(`credential.saved`,{credential_type:e.type,credential_id:r.id,is_new:!0}),T.track(`User created credentials`,{credential_type:e.type,credential_id:r.id,workflow_id:f.workflowId}),r}async function at(e){let t=null;try{De.value.update&&(t=await n.updateCredential({id:N.value,data:e})),De.value.share&&le.value&&e.sharedWithProjects&&(t=await n.setCredentialSharedWith({credentialId:e.id,sharedWithProjects:e.sharedWithProjects}),le.value=!1),ie.value=!1,V.value=!0,t&&await v.run(`credential.saved`,{credential_type:e.type,credential_id:t.id,is_new:!1})}catch(e){return b.showError(e,S.baseText(`credentialEdit.credentialEdit.showError.updateCredential.title`)),null}return _.updateNodesCredentialsIssues(),t}async function ot(){if(!ee.value)return;let e=ee.value.name;if(await x.confirm(S.baseText(`credentialEdit.credentialEdit.confirmMessage.deleteCredential.message`,{interpolate:{savedCredentialName:e}}),S.baseText(`credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline`),{confirmButtonText:S.baseText(`credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText`)})===`confirm`){try{ne.value=!0,await n.deleteCredential({id:N.value}),ie.value=!1,V.value=!0}catch(e){b.showError(e,S.baseText(`credentialEdit.credentialEdit.showError.deleteCredential.title`)),ne.value=!1;return}ne.value=!1,_.updateNodesCredentialsIssues(),I.value={},b.showMessage({title:S.baseText(`credentialEdit.credentialEdit.showMessage.title`),type:`success`}),Ge()}}async function st(){let e,i=await $e();if(!i)return;let a=xe.value;try{let{sharedWithProjects:t,...r}=I.value,o={id:i.id,...r};_e.value===`oAuth2Api`||a.includes(`oAuth2Api`)?pi(o)&&(e=await n.oAuth2Authorize(o)):(_e.value===`oAuth1Api`||a.includes(`oAuth1Api`))&&pi(o)&&(e=await n.oAuth1Authorize(o))}catch(e){b.showError(e,S.baseText(`credentialEdit.credentialEdit.showError.generateAuthorizationUrl.title`),S.baseText(`credentialEdit.credentialEdit.showError.generateAuthorizationUrl.message`));return}if(e===void 0||e===``){b.showError(Error(S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.message`)),S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.title`));return}let o=[`http:`,`https:`];try{let t=new URL(e);if(!o.includes(t.protocol)){b.showError(Error(S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.message`)),S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.title`));return}}catch{b.showError(Error(S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.message`)),S.baseText(`credentialEdit.credentialEdit.showError.invalidOAuthUrl.title`));return}let s=window.open(e,`OAuth Authorization`,`scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700`);I.value={...I.value,oauthTokenData:null};let c=new BroadcastChannel(`oauth-callback`),l=e=>{let n=e.data===`success`,i={credential_type:_e.value,workflow_id:f.workflowId||null,credential_id:N.value,is_complete:!!Ee.value,is_new:t.mode===`new`&&!N.value,is_valid:n,uses_external_secrets:Qe(I.value)};r.activeNode&&(i.node_type=r.activeNode.type),T.track(`User saved credentials`,i),tt(n),n&&(c.removeEventListener(`message`,l),I.value={...I.value,oauthTokenData:{}},s&&s.close())};c.addEventListener(`message`,l)}async function ct(e){if(!he.value?.credentials)return;let t=_a(he.value,e);t&&(F.value=t.name,l.activeCredentialType=t.name,lt(),Dr(p,r.activeNode,e),ie.value&&!ce.value&&(P.value=await n.getNewCredentialName({credentialTypeName:ke.value})))}function lt(){if(!G.value)return;for(let e of G.value.properties)G.value.__overwrittenProperties?.includes(e.name)||(I.value={...I.value,[e.name]:e.default});let{currentProject:e,personalProject:t}=g,n=e?.scopes??t?.scopes??[],r=e??t??{};I.value={...I.value,scopes:n,homeProject:r}}let ut=re(`credNameRef`),{width:dt}=pe(ut);return(n,r)=>(M(),y(tc,{name:e.modalName,"custom-class":n.$style.credentialModal,"event-bus":te.value,loading:ae.value,"before-close":Ne,width:`70%`,height:`80%`},{header:k(()=>[W(`div`,{class:U(n.$style.header)},[W(`div`,{class:U(n.$style.credInfo)},[W(`div`,{class:U(n.$style.credIcon)},[m(su,{"credential-type-name":ke.value},null,8,[`credential-type-name`])],2),W(`div`,{ref_key:`credNameRef`,ref:ut,class:U(n.$style.credName)},[W(`div`,{class:U(n.$style.credNameRow)},[P.value?(M(),y(u(it),{key:0,"data-test-id":`credential-name`,"model-value":P.value,"max-width":u(dt)-10,readonly:!(De.value.create&&t.mode===`new`||De.value.update)||!G.value||ve.value,"onUpdate:modelValue":qe},null,8,[`model-value`,`max-width`,`readonly`])):c(``,!0),me.value?(M(),y(u(Ve),{key:1,text:u(S).baseText(`credentialEdit.credentialEdit.dynamic`),clickable:!1,class:U(n.$style.dynamicTag),"data-test-id":`credential-dynamic-tag`},{tag:k(()=>[W(`span`,{class:U(n.$style.dynamicTagContent)},[m(u(J),{icon:`key-round`,size:`xsmall`}),R(` `+o(u(S).baseText(`credentialEdit.credentialEdit.dynamic`)),1)],2)]),_:1},8,[`text`,`class`])):c(``,!0)],2),G.value?(M(),y(u(Y),{key:0,size:`small`,tag:`p`,color:`text-light`},{default:k(()=>[R(o(G.value.displayName),1)]),_:1})):c(``,!0)],2)],2),W(`div`,{class:U(n.$style.credActions)},[ee.value&&De.value.delete?(M(),y(u(Be),{key:0,variant:`subtle`,title:u(S).baseText(`credentialEdit.credentialEdit.delete`),icon:`trash-2`,disabled:z.value,loading:ne.value,"data-test-id":`credential-delete-button`,onClick:ot},null,8,[`title`,`disabled`,`loading`])):c(``,!0),Ae.value?(M(),y(y_,{key:1,saved:!ie.value&&!B.value&&!!N.value,"is-saving":z.value||B.value,"saving-label":B.value?u(S).baseText(`credentialEdit.credentialEdit.testing`):u(S).baseText(`credentialEdit.credentialEdit.saving`),"data-test-id":`credential-save-button`,onClick:$e},null,8,[`saved`,`is-saving`,`saving-label`])):c(``,!0)],2)],2)]),content:k(()=>[W(`div`,{class:U(n.$style.container),"data-test-id":`credential-edit-dialog`},[ve.value?c(``,!0):(M(),s(`div`,{key:0,class:U(n.$style.sidebar)},[(M(!0),s(w,null,L(Oe.value,e=>(M(),y(u(Ot),{key:e.id,item:e,active:A.value===e.id,onClick:()=>Re(e.id)},null,8,[`item`,`active`,`onClick`]))),128))],2)),A.value===`connection`&&G.value?(M(),s(`div`,{key:1,ref_key:`contentRef`,ref:de,class:U(n.$style.mainContent)},[m(m_,{"credential-type":G.value,"credential-properties":Te.value,"credential-data":I.value,"credential-id":N.value,"is-managed":ve.value,"show-validation-warning":H.value,"auth-error":j.value,"tested-successfully":oe.value,"is-o-auth-type":Se.value,"is-o-auth-connected":we.value,"is-retesting":se.value,"parent-types":xe.value,"required-properties-filled":Ee.value,"credential-permissions":De.value,"all-o-auth2-base-properties-overridden":Ce.value,mode:e.mode,"selected-credential":F.value,"show-auth-type-selector":ue.value,"is-dynamic-credentials-enabled":u(O),"is-resolvable":me.value,"is-new-credential":q.value,onUpdate:We,onOauth:st,onRetest:Xe,onScrollToTop:Je,onAuthTypeChanged:ct,"onUpdate:isResolvable":Ue},null,8,[`credential-type`,`credential-properties`,`credential-data`,`credential-id`,`is-managed`,`show-validation-warning`,`auth-error`,`tested-successfully`,`is-o-auth-type`,`is-o-auth-connected`,`is-retesting`,`parent-types`,`required-properties-filled`,`credential-permissions`,`all-o-auth2-base-properties-overridden`,`mode`,`selected-credential`,`show-auth-type-selector`,`is-dynamic-credentials-enabled`,`is-resolvable`,`is-new-credential`])],2)):je.value?(M(),s(`div`,{key:2,class:U(n.$style.mainContent)},[m(v_,{credential:ee.value,"credential-data":I.value,"credential-id":N.value,"credential-permissions":De.value,"is-shared-globally":fe.value,"modal-bus":te.value,"onUpdate:modelValue":ze,"onUpdate:shareWithAllUsers":He},null,8,[`credential`,`credential-data`,`credential-id`,`credential-permissions`,`is-shared-globally`,`modal-bus`])],2)):A.value===`details`&&G.value?(M(),s(`div`,{key:3,class:U(n.$style.mainContent)},[m(h_,{"current-credential":ee.value},null,8,[`current-credential`])],2)):c(``,!0)],2)]),_:1},8,[`name`,`custom-class`,`event-bus`,`loading`]))}}),[[`__cssModules`,{$style:{credentialModal:`_credentialModal_p2tw3_125`,mainContent:`_mainContent_p2tw3_139`,credName:`_credName_p2tw3_145`,credNameRow:`_credNameRow_p2tw3_152`,dynamicTagContent:`_dynamicTagContent_p2tw3_159`,sidebar:`_sidebar_p2tw3_165`,header:`_header_p2tw3_175`,container:`_container_p2tw3_179`,credInfo:`_credInfo_p2tw3_184`,credActions:`_credActions_p2tw3_192`,credIcon:`_credIcon_p2tw3_203`}}]]),S_=X(g({__name:`CredentialsSelectModal`,setup(e){let t=fa(),n=zn(),r=K(),i=d(et()),a=d(``),c=d(!0),l=d(),f=Wi(),p=Vi(),h=Gi();C(async()=>{try{await f.fetchCredentialTypes(!1)}catch{}c.value=!1,setTimeout(()=>{l.value&&l.value.focus()},0)});function g(e){a.value=e}function _(){i.value.emit(`close`),p.openNewCredential(a.value);let e={credential_type:a.value,source:`primary_menu`,new_credential:!0,workflow_id:h.workflowId};n.track(`User opened Credential modal`,e),t.run(`credentialsSelectModal.openCredentialType`,e)}return(e,t)=>(M(),y(tc,{name:u(Cr),"event-bus":i.value,width:`50%`,center:!0,loading:c.value,"max-width":`460px`,"min-height":`250px`},{header:k(()=>[W(`h2`,{class:U(e.$style.title)},o(u(r).baseText(`credentialSelectModal.addNewCredential`)),3)]),content:k(()=>[W(`div`,null,[W(`div`,{class:U(e.$style.subtitle)},o(u(r).baseText(`credentialSelectModal.selectAnAppOrServiceToConnectTo`)),3),m(u(ct),{ref_key:`selectRef`,ref:l,filterable:``,"default-first-option":``,placeholder:u(r).baseText(`credentialSelectModal.searchForApp`),size:`xlarge`,"model-value":a.value,"data-test-id":`new-credential-type-select`,"onUpdate:modelValue":g},{prefix:k(()=>[m(u(J),{icon:`search`})]),default:k(()=>[(M(!0),s(w,null,L(u(f).allCredentialTypes,e=>(M(),y(u(Dt),{key:e.name,value:e.name,label:e.displayName,filterable:``,"data-test-id":`new-credential-type-select-option`},null,8,[`value`,`label`]))),128))]),_:1},8,[`placeholder`,`model-value`])])]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{label:u(r).baseText(`credentialSelectModal.continue`),float:`right`,size:`large`,disabled:!a.value,"data-test-id":`new-credential-type-button`,onClick:_},null,8,[`label`,`disabled`])],2)]),_:1},8,[`name`,`event-bus`,`loading`]))}}),[[`__cssModules`,{$style:{title:`_title_1qwik_125`,subtitle:`_subtitle_1qwik_130`}}]]),C_=X(g({__name:`DebugPaywallModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K();return(e,r)=>(M(),y(tc,{width:`500px`,title:t.data.title,name:t.modalName},{content:k(()=>[m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`executionsList.debug.paywall.content`))+` `,1),r[0]||=W(`br`,null,null,-1),r[1]||=W(`br`,null,null,-1),R(` `+o(u(n).baseText(`executionsList.debug.paywall.subContent`))+` `,1),m(u(lt),{to:u(n).baseText(`executionsList.debug.paywall.link.url`),"new-window":``},{default:k(()=>[R(o(u(n).baseText(`executionsList.debug.paywall.link.text`)),1)]),_:1},8,[`to`])]),_:1})]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{onClick:t.data.footerButtonAction},{default:k(()=>[R(o(u(n).baseText(`generic.seePlans`)),1)]),_:1},8,[`onClick`])],2)]),_:1},8,[`title`,`name`]))}}),[[`__cssModules`,{$style:{footer:`_footer_zandy_125`}}]]),w_=[`title`,`data-resourceid`],T_=4,E_=`/`,D_=X(g({__name:`MoveToFolderDropdown`,props:{selectedLocation:{default:null},selectedProjectId:{},currentProjectId:{default:void 0},currentFolderId:{default:void 0},parentFolderId:{default:void 0}},emits:[`location:selected`],setup(e,{emit:t}){let n=e,r=t,i=K(),l=eu(),f=d([]),p=a({get:()=>n.selectedLocation?.id??null,set:e=>{let t=f.value.find(t=>t.id===e);t&&r(`location:selected`,t)}}),h=d(!1),g=d(!0),_=async e=>{h.value=!0;let t=await l.fetchFoldersAvailableForMove(n.selectedProjectId,n.currentFolderId,{name:e??void 0});n.parentFolderId?f.value=t.filter(e=>e.id!==n.parentFolderId):f.value=t;let a=i.baseText(`folders.move.project.root.name`),o=!e||a.toLowerCase().includes(e?.toLowerCase()),s={id:n.selectedProjectId,name:a,resource:`project`,createdAt:``,updatedAt:``,workflowCount:0,subFolderCount:0,path:[]};o&&f.value.unshift(s),!e&&!n.selectedLocation&&r(`location:selected`,s),h.value=!1,g.value=!1};T(()=>[n.selectedProjectId,n.currentFolderId,n.parentFolderId],()=>{f.value=[],g.value=!0,_()},{immediate:!0});let v=(e,t)=>t===e.path.length-1||t>=3;return(e,t)=>(M(),s(`div`,{class:U(e.$style[`move-folder-dropdown`]),"data-test-id":`move-to-folder-dropdown`},[g.value?(M(),y(u(Oe),{key:0,rows:1,class:U(e.$style[`loading-skeleton`])},null,8,[`class`])):(M(),y(u(ct),{key:1,ref:`moveFolderDropdown`,modelValue:p.value,"onUpdate:modelValue":t[0]||=e=>p.value=e,filterable:!0,remote:!0,"remote-method":_,loading:h.value,placeholder:u(i).baseText(`folders.move.modal.folder.placeholder`),"no-data-text":u(i).baseText(`folders.move.modal.folder.noData.label`),"option-label":`name`,"option-value":`id`},{prefix:k(()=>[m(u(J),{icon:`search`})]),default:k(()=>[(M(!0),s(w,null,L(f.value,n=>(M(),y(u(Dt),{key:n.id,value:n.id,label:n.name,"data-test-id":`move-to-folder-option`},{default:k(()=>[W(`div`,{class:U(e.$style[`folder-select-item`])},[W(`ul`,{class:U(e.$style.list)},[n.resource===`project`?(M(),s(`li`,{key:0,class:U(e.$style.current)},[m(u(Y),null,{default:k(()=>[R(o(n.name),1)]),_:2},1024)],2)):(M(),s(w,{key:1},[n.path.length>T_?(M(),s(`li`,{key:0,class:U(e.$style.item)},[m(u(Y),null,{default:k(()=>[...t[1]||=[R(`...`,-1)]]),_:1})],2)):c(``,!0),n.path.length>0?(M(),s(`li`,{key:1,class:U(e.$style.separator)},[m(u(Y),null,{default:k(()=>[R(o(E_))]),_:1})],2)):c(``,!0),(M(!0),s(w,null,L(n.path.slice(-T_),(t,r)=>(M(),s(w,{key:`${n.id}-${r}`},[W(`li`,{class:U({[e.$style.item]:!0,[e.$style.current]:v(n,r)}),title:t,"data-resourceid":t,"data-test-id":`breadcrumbs-item`,"data-target":`folder-breadcrumb-item`},[m(u(Y),null,{default:k(()=>[R(o(t),1)]),_:2},1024)],10,w_),v(n,r)?c(``,!0):(M(),s(`li`,{key:0,class:U(e.$style.separator)},[m(u(Y),null,{default:k(()=>[R(o(E_))]),_:1})],2))],64))),128))],64))],2)],2)]),_:2},1032,[`value`,`label`]))),128))]),_:1},8,[`modelValue`,`loading`,`placeholder`,`no-data-text`]))],2))}}),[[`__cssModules`,{$style:{"move-folder-dropdown":`_move-folder-dropdown_7gob5_125`,"loading-skeleton":`_loading-skeleton_7gob5_130`,"folder-select-item":`_folder-select-item_7gob5_139`,list:`_list_7gob5_151`,item:`_item_7gob5_157`,current:`_current_7gob5_172`,separator:`_separator_7gob5_176`}}]]),O_={key:0},k_=X(g({__name:`DeleteFolderModal`,props:{modalName:{},activeId:{},data:{}},setup(e){let t=e,n=et(),{showMessage:r,showError:i}=ha(),l=K(),f=Te(),p=eu(),h=vn(),g=d(!1),_=d(``),v=d(``),b=d(null),x=a(()=>t.activeId?p.breadcrumbsCache[t.activeId]:null),S=a(()=>b.value?!b.value.name:!1),C=a(()=>{let e=x.value?.name??``;return l.baseText(`folders.delete.confirm.title`,{interpolate:{folderName:e}})}),w=a(()=>!!(S.value||_.value===`delete`&&v.value===l.baseText(`folders.delete.typeToConfirm`,{interpolate:{folderName:x.value?.name??``}})||_.value===`transfer`&&b.value)),T=a(()=>{let e=h.currentProject;return e?.type===Nn.Personal?l.baseText(`projects.menu.personal`):e?.name}),E=a(()=>{let e=t.data.content.subFolderCount??0,n=t.data.content.workflowCount??0,r=``,i=``;return e>0&&(r=l.baseText(`folder.count`,{interpolate:{count:e}})),n>0&&(i=l.baseText(`workflow.count`,{interpolate:{count:n}})),e>0&&n>0&&(r+=` ${l.baseText(`folder.and.workflow.separator`)} `),l.baseText(`folder.delete.modal.confirmation`,{interpolate:{folders:r,workflows:i}})});async function D(){if(w.value)try{g.value=!0;let e=b.value?.resource===`project`?`0`:b.value?.id??void 0;await p.deleteFolder(f.params.projectId,t.activeId,e);let i=``;b.value&&(i=l.baseText(`folders.transfer.confirm.message`,{interpolate:{folderName:b.value.name??``}})),r({type:`success`,title:l.baseText(`folders.delete.success.message`),message:i}),t.data.workflowListEventBus.emit(`folder-deleted`,{folderId:t.activeId,workflowCount:t.data.content.workflowCount,folderCount:t.data.content.subFolderCount}),n.emit(`close`)}catch(e){i(e,l.baseText(`folders.delete.error.message`))}finally{g.value=!1}}let O=e=>{b.value=e};return(r,i)=>(M(),y(tc,{name:e.modalName,title:C.value,center:!0,width:`600`,"event-bus":u(n),onEnter:D},{content:k(()=>[W(`div`,null,[S.value?(M(),s(`div`,O_,[m(u(Y),{color:`text-base`},{default:k(()=>[R(o(u(l).baseText(`folders.delete.confirm.message`)),1)]),_:1})])):(M(),s(`div`,{key:1,class:U(r.$style.content)},[W(`div`,null,[m(u(Y),{color:`text-base`},{default:k(()=>[R(o(E.value),1)]),_:1})]),m(u(Ma),{modelValue:_.value,"onUpdate:modelValue":[i[0]||=e=>_.value=e,i[1]||=e=>_.value=`transfer`],"data-test-id":`transfer-content-radio`,label:`transfer`},{default:k(()=>[T.value?(M(),y(u(Y),{key:0},{default:k(()=>[R(o(u(l).baseText(`folders.transfer.action`,{interpolate:{projectName:T.value}})),1)]),_:1})):(M(),y(u(Y),{key:1,color:`text-dark`},{default:k(()=>[R(o(u(l).baseText(`folders.transfer.action.noProject`)),1)]),_:1}))]),_:1},8,[`modelValue`]),_.value===`transfer`?(M(),s(`div`,{key:0,class:U(r.$style.optionInput)},[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(l).baseText(`folders.transfer.selectFolder`)),1)]),_:1}),u(h).currentProject?(M(),y(D_,{key:0,"selected-location":b.value,"selected-project-id":u(h).currentProject?.id,"current-project-id":u(h).currentProject?.id,"current-folder-id":t.activeId,"parent-folder-id":x.value?.parentFolder,"onLocation:selected":O},null,8,[`selected-location`,`selected-project-id`,`current-project-id`,`current-folder-id`,`parent-folder-id`])):c(``,!0)],2)):c(``,!0),m(u(Ma),{modelValue:_.value,"onUpdate:modelValue":[i[2]||=e=>_.value=e,i[3]||=e=>_.value=`delete`],"data-test-id":`delete-content-radio`,label:`delete`},{default:k(()=>[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(l).baseText(`folders.delete.action`)),1)]),_:1})]),_:1},8,[`modelValue`]),_.value===`delete`?(M(),s(`div`,{key:1,class:U(r.$style.optionInput),"data-test-id":`delete-data-input`},[m(u(Ct),{label:u(l).baseText(`folders.delete.confirmation.message`,{interpolate:{folderName:x.value?.name??``}})},{default:k(()=>[m(u(mt),{modelValue:v.value,"onUpdate:modelValue":i[4]||=e=>v.value=e,"data-test-id":`delete-data-input`,placeholder:u(l).baseText(`folders.delete.typeToConfirm`,{interpolate:{folderName:x.value?.name??``}})},null,8,[`modelValue`,`placeholder`])]),_:1},8,[`label`])],2)):c(``,!0)],2))])]),footer:k(()=>[m(u(q),{loading:g.value,disabled:!w.value,label:u(l).baseText(`generic.delete`),float:`right`,"data-test-id":`confirm-delete-folder-button`,onClick:D},null,8,[`loading`,`disabled`,`label`])]),_:1},8,[`name`,`title`,`event-bus`]))}}),[[`__cssModules`,{$style:{content:`_content_1d66r_125`,innerContent:`_innerContent_1d66r_132`,optionInput:`_optionInput_1d66r_136`,"folder-select-item":`_folder-select-item_1d66r_140`}}]]),A_={key:1},j_=X(g({__name:`ProjectMoveResourceModalCredentialsList`,props:{credentials:{default:()=>[]},currentProjectId:{default:``}},setup(e){let t=e,n=e=>`scopes`in e?vs(e.scopes).credential.read:!1,r=e=>{let n=e.sharedWithProjects?.find(e=>e.id===t.currentProjectId),r={credentialId:e.id};return(n??e.homeProject?.id)&&(r.projectId=n?t.currentProjectId:e.homeProject?.id),{name:n?$.PROJECTS_CREDENTIALS:$.CREDENTIALS,params:r}};return(e,i)=>{let a=B(`RouterLink`);return M(),s(`ul`,{class:U(e.$style.credentialsList)},[(M(!0),s(w,null,L(t.credentials,e=>(M(),s(`li`,{key:e.id},[n(e)?(M(),y(a,{key:0,target:`_blank`,to:r(e)},{default:k(()=>[R(o(e.name),1)]),_:2},1032,[`to`])):(M(),s(`span`,A_,o(e.name),1))]))),128))],2)}}}),[[`__cssModules`,{$style:{credentialsList:`_credentialsList_3zpk8_125`}}]]),M_=X(g({__name:`MoveToFolderModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=et(),i=eu(),l=vn(),f=Vi(),p=Wi(),h=cr(),g=Gi(),_=ha(),v=d(null),b=d(l.currentProject),x=d(!1),S=a(()=>b.value?.type===Nn.Personal),w=a(()=>b.value?.type===Nn.Personal&&b.value?.id===l.personalProject?.id),E=a(()=>b.value&&b.value?.id!==l.currentProject?.id),D=d(0),O=d(0),A=d(!1),j=d([]),N=d([]),P=a(()=>N.value.filter(e=>E.value&&vs(e.scopes).credential.share&&j.value.find(t=>t.id===e.id))),F=a(()=>j.value.reduce((e,t)=>{let n=p.getCredentialById(t.id),r=vs(n?.scopes).credential;return r.share||(r.read?e.push(n):e.push(t)),e},[])),I=a(()=>Ou(`name`,l.availableProjects.filter(e=>!e.scopes||vs(e.scopes)[t.data.resourceType].create))),L=a(()=>n.baseText(`generic.${t.data.resourceType}`).toLowerCase()),ee=a(()=>n.baseText(`folders.move.modal.title`,{interpolate:{folderName:t.data.resource.name,resourceTypeLabel:L.value}})),te=a(()=>{if(t.data.resourceType!==`workflow`)return{id:t.data.resource.id,name:t.data.resource.name}}),ne=async()=>{if(!te.value||!l.currentProject)return;let{totalWorkflows:e,totalSubFolders:t}=await i.fetchFolderContent(l.currentProject.id,te.value.id);D.value=e,O.value=t};T(()=>[b.value],()=>{v.value=null}),T(()=>[te.value,b.value],()=>{ne()},{immediate:!0});let re=e=>{v.value=e},z=e=>{let{name:t}=$t(e??``),r=n.baseText(`projects.sharing.personalSpace`);return t?`${t} (${r})`:r},B=a(()=>b.value?.type===Nn.Personal?z(b.value?.name):on(b.value?.name)),ie=async()=>{if(!b.value||x.value)return;let e=v.value?{id:v.value.id,name:v.value.name,type:v.value.resource}:{id:b.value.id,name:B.value,type:`project`};x.value=!0;try{if(t.data.resourceType===`folder`)if(b.value.id!==l.currentProject?.id){let e=v.value&&v.value.id!==b.value.id?v.value.id:void 0,n=A.value?P.value.map(e=>e.id):void 0;await i.moveFolderToProject(l.currentProject?.id??``,t.data.resource.id,b.value.id,e,n),t.data.workflowListEventBus.emit(`folder-transferred`,{source:{projectId:l.currentProject?.id,folder:{id:t.data.resource.id,name:t.data.resource.name}},destination:{projectId:b.value.id,parentFolder:{id:e,name:v.value&&v.value.id!==b.value.id?v.value.name:B.value},canAccess:H.value}})}else{let n=e.type===`folder`?e.id:`0`;await i.moveFolder(l.currentProject?.id??``,t.data.resource.id,n),t.data.workflowListEventBus.emit(`folder-moved`,{newParent:e,folder:{id:t.data.resource.id,name:t.data.resource.name},options:{skipApiCall:!0}})}else if(E.value){let e=v.value&&v.value.id!==b.value.id?v.value.id:void 0,n=A.value?P.value.map(e=>e.id):void 0;await l.moveResourceToProject(`workflow`,t.data.resource.id,b.value.id,e,n),t.data.workflowListEventBus.emit(`workflow-transferred`,{source:{projectId:l.currentProject?.id,workflow:{id:t.data.resource.id,name:t.data.resource.name}},destination:{projectId:b.value.id,parentFolder:{id:e,name:v.value&&v.value.id!==b.value.id?v.value.name:B.value},canAccess:H.value}})}else{let n=e.type===`folder`?e.id:`0`;await g.updateWorkflow(t.data.resource.id,{parentFolderId:n}),t.data.workflowListEventBus.emit(`workflow-moved`,{newParent:e,workflow:{id:t.data.resource.id,name:t.data.resource.name,oldParentId:t.data.resource.parentFolderId},options:{skipApiCall:!0}})}f.closeModal(yn)}catch(e){let r=t.data.resourceType===`folder`?`folders.move.error.title`:`folders.move.workflow.error.title`;_.showError(e,n.baseText(r))}finally{x.value=!1}},V=a(()=>{let e=``,t=``;return O.value>0&&(e=n.baseText(`folders.move.modal.folder.count`,{interpolate:{count:O.value}})),D.value>0&&(t=n.baseText(`folders.move.modal.workflow.count`,{interpolate:{count:D.value}})),O.value>0&&D.value>0&&(e+=` ${n.baseText(`folder.and.workflow.separator`)} `),n.baseText(`folders.move.modal.description`,{interpolate:{folders:e?` ${e}`:``,workflows:t?` ${t}`:``}})}),ae=a(()=>t.data.resourceType===pr.Workflow),H=a(()=>w.value||!S.value),oe=a(()=>l.currentProject?.id??t.data.resource.homeProjectId);return C(async()=>{if(l.isTeamProjectFeatureEnabled||(b.value=l.personalProject),ae.value){let[e,n]=await Promise.all([h.fetchWorkflow(t.data.resource.id),p.fetchAllCredentials()]);j.value=e?.usedCredentials??[],N.value=n}else if(l.currentProject?.id&&te.value?.id){let[e,t]=await Promise.all([await i.fetchFolderUsedCredentials(l.currentProject.id,te.value.id),p.fetchAllCredentials()]);j.value=e,N.value=t}}),(i,a)=>(M(),y(tc,{name:e.modalName,title:ee.value,width:`500`,class:U(i.$style.container),"event-bus":u(r)},{content:k(()=>[t.data.resourceType===`folder`&&(D.value>0||O.value>0)?(M(),s(`p`,{key:0,class:U(i.$style.description),"data-test-id":`move-modal-description`},o(V.value),3)):c(``,!0),m(xu,{features:[u(Fo).Sharing],class:U(i.$style.content)},{default:k(()=>[W(`div`,{class:U(i.$style.block)},[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(n).baseText(`folders.move.modal.project.label`)),1)]),_:1}),m(Tu,{modelValue:b.value,"onUpdate:modelValue":a[0]||=e=>b.value=e,class:`pt-2xs`,projects:I.value,placeholder:u(n).baseText(`folders.move.modal.project.placeholder`)},null,8,[`modelValue`,`projects`,`placeholder`])],2),E.value?(M(),s(`div`,{key:0,class:U(i.$style.block)},[m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message.sharingNote`,scope:`global`},{note:k(()=>[W(`strong`,null,o(u(n).baseText(`projects.move.resource.modal.message.note`)),1)]),resourceTypeLabel:k(()=>[R(o(L.value),1)]),_:1}),t.data.resource.sharedWithProjects?.length??!1?(M(),s(`div`,{key:0,class:U(i.$style.textBlock)},o(u(n).baseText(`projects.move.resource.modal.message.sharingInfo`,{adjustToNumber:t.data.resource.sharedWithProjects?.length,interpolate:{count:t.data.resource.sharedWithProjects?.length??0}})),3)):c(``,!0)]),_:1})],2)):c(``,!0)]),_:1},8,[`features`,`class`]),b.value&&H.value?(M(),s(`div`,{key:1,class:U(i.$style.block)},[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(n).baseText(`folders.move.modal.folder.label`)),1)]),_:1}),m(D_,{"selected-location":v.value,"selected-project-id":b.value.id,"current-project-id":oe.value,"current-folder-id":te.value?.id,"parent-folder-id":t.data.resource.parentFolderId,"exclude-only-parent":t.data.resourceType===`workflow`,"onLocation:selected":re},null,8,[`selected-location`,`selected-project-id`,`current-project-id`,`current-folder-id`,`parent-folder-id`,`exclude-only-parent`])],2)):c(``,!0),P.value.length?(M(),y(u(At),{key:2,modelValue:A.value,"onUpdate:modelValue":a[1]||=e=>A.value=e,class:U(i.$style.textBlock),"data-test-id":`move-modal-share-credentials-checkbox`},{label:k(()=>[m(u(ge),{keypath:e.data.resourceType===`workflow`?`folders.move.modal.message.usedCredentials.workflow`:`folders.move.modal.message.usedCredentials.folder`,scope:`global`},{usedCredentials:k(()=>[m(u(He),{placement:`top`},{content:k(()=>[m(j_,{"current-project-id":u(l).currentProjectId,credentials:P.value},null,8,[`current-project-id`,`credentials`])]),default:k(()=>[W(`span`,{class:U(i.$style.tooltipText)},o(u(n).baseText(`projects.move.resource.modal.message.usedCredentials.number`,{adjustToNumber:P.value.length,interpolate:{count:P.value.length}})),3)]),_:1})]),_:1},8,[`keypath`])]),_:1},8,[`modelValue`,`class`])):c(``,!0),P.value.length&&!A.value?(M(),y(u(we),{key:3,class:U(i.$style.credentialsCallout),theme:`warning`,"data-test-id":`move-modal-used-credentials-warning`},{default:k(()=>[R(o(u(n).baseText(`folders.move.modal.message.usedCredentials.warning`)),1)]),_:1},8,[`class`])):c(``,!0),F.value.length?(M(),s(`div`,{key:4,class:U(i.$style.textBlock)},[m(u(ge),{keypath:`projects.move.resource.modal.message.unAccessibleCredentials.note`,scope:`global`},{credentials:k(()=>[m(u(He),{placement:`top`},{content:k(()=>[m(j_,{"current-project-id":u(l).currentProjectId,credentials:F.value},null,8,[`current-project-id`,`credentials`])]),default:k(()=>[W(`span`,{class:U(i.$style.tooltipText)},o(u(n).baseText(`projects.move.resource.modal.message.unAccessibleCredentials`)),3)]),_:1})]),_:1})],2)):c(``,!0)]),footer:k(({close:e})=>[W(`div`,{class:U(i.$style.footer)},[m(u(q),{variant:`subtle`,label:u(n).baseText(`generic.cancel`),disabled:x.value,float:`right`,"data-test-id":`cancel-move-folder-button`,onClick:e},null,8,[`label`,`disabled`,`onClick`]),m(u(q),{disabled:!v.value&&H.value||x.value,loading:x.value,label:u(n).baseText(`folders.move.modal.confirm`,{interpolate:{resourceTypeLabel:L.value}}),float:`right`,"data-test-id":`confirm-move-folder-button`,onClick:ie},null,8,[`disabled`,`loading`,`label`])],2)]),_:1},8,[`name`,`title`,`class`,`event-bus`]))}}),[[`__cssModules`,{$style:{container:`_container_1nh1g_125`,description:`_description_1nh1g_129`,block:`_block_1nh1g_134`,footer:`_footer_1nh1g_138`,tooltipText:`_tooltipText_1nh1g_144`,credentialsCallout:`_credentialsCallout_1nh1g_148`}}]]),N_={key:0},P_=X(g({__name:`DeleteUserModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=et(),r=d(!1),i=d(``),l=d(``),f=d(null),p=K(),h=Ji(),g=vn(),_=a(()=>t.data?.userId?h.usersList.state.items.find(e=>e.id===t.data.userId):null),v=a(()=>!_.value?.firstName),b=a(()=>{let e=_.value?.firstName&&_.value.lastName?`${_.value.firstName} ${_.value.lastName}`:_.value?.email??``;return p.baseText(`settings.users.deleteUser`,{interpolate:{user:e}})}),x=a(()=>v.value||i.value===`delete`&&l.value===p.baseText(`settings.users.deleteConfirmationText`)?!0:!!(i.value===`transfer`&&f.value)),S=a(()=>g.projects.filter(e=>e.name!==`${_.value?.firstName} ${_.value?.lastName} <${_.value?.email}>`));ae(async()=>{await g.getAllProjects()});let{showMessage:C,showError:w}=ha();async function T(){if(x.value)try{r.value=!0;let e={id:t.data.userId};i.value===`transfer`&&f.value&&(e.transferId=f.value.id),await h.deleteUser(e);let a=``;if(e.transferId){let t=S.value.find(t=>t.id===e.transferId);t&&(a=p.baseText(`settings.users.transferredToUser`,{interpolate:{projectName:t.name??``}}))}C({type:`success`,title:p.baseText(`settings.users.userDeleted`),message:a}),await t.data.afterDelete?.(),n.emit(`close`)}catch(e){w(e,p.baseText(`settings.users.userDeletedError`))}finally{r.value=!1}}return(t,a)=>(M(),y(tc,{name:e.modalName,title:b.value,center:!0,width:`520`,"event-bus":u(n),onEnter:T},{content:k(()=>[W(`div`,null,[v.value?(M(),s(`div`,N_,[m(u(Y),{color:`text-base`},{default:k(()=>[R(o(u(p).baseText(`settings.users.confirmUserDeletion`)),1)]),_:1})])):(M(),s(`div`,{key:1,class:U(t.$style.content)},[W(`div`,null,[m(u(Y),{color:`text-base`},{default:k(()=>[R(o(u(p).baseText(`settings.users.confirmDataHandlingAfterDeletion`)),1)]),_:1})]),m(u(Ma),{modelValue:i.value,"onUpdate:modelValue":[a[0]||=e=>i.value=e,a[1]||=e=>i.value=`transfer`],label:`transfer`},{default:k(()=>[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(p).baseText(`settings.users.transferWorkflowsAndCredentials`)),1)]),_:1})]),_:1},8,[`modelValue`]),i.value===`transfer`?(M(),s(`div`,{key:0,class:U(t.$style.optionInput)},[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(p).baseText(`settings.users.transferWorkflowsAndCredentials.user`)),1)]),_:1}),m(Tu,{modelValue:f.value,"onUpdate:modelValue":a[2]||=e=>f.value=e,class:`pt-2xs`,projects:S.value,placeholder:u(p).baseText(`settings.users.transferWorkflowsAndCredentials.placeholder`)},null,8,[`modelValue`,`projects`,`placeholder`])],2)):c(``,!0),m(u(Ma),{modelValue:i.value,"onUpdate:modelValue":[a[3]||=e=>i.value=e,a[4]||=e=>i.value=`delete`],label:`delete`},{default:k(()=>[m(u(Y),{color:`text-dark`},{default:k(()=>[R(o(u(p).baseText(`settings.users.deleteWorkflowsAndCredentials`)),1)]),_:1})]),_:1},8,[`modelValue`]),i.value===`delete`?(M(),s(`div`,{key:1,class:U(t.$style.optionInput),"data-test-id":`delete-data-input`},[m(u(Ct),{label:u(p).baseText(`settings.users.deleteConfirmationMessage`)},{default:k(()=>[m(u(mt),{modelValue:l.value,"onUpdate:modelValue":a[5]||=e=>l.value=e,placeholder:u(p).baseText(`settings.users.deleteConfirmationText`)},null,8,[`modelValue`,`placeholder`])]),_:1},8,[`label`])],2)):c(``,!0)],2))])]),footer:k(()=>[m(u(q),{loading:r.value,disabled:!x.value,label:u(p).baseText(`settings.users.delete`),float:`right`,"data-test-id":`confirm-delete-user-button`,onClick:T},null,8,[`loading`,`disabled`,`label`])]),_:1},8,[`name`,`title`,`event-bus`]))}}),[[`__cssModules`,{$style:{content:`_content_18nve_125`,innerContent:`_innerContent_18nve_132`,optionInput:`_optionInput_18nve_136`}}]]),F_=X(g({__name:`DuplicateWorkflowDialog`,props:{modalName:{},isActive:{type:Boolean},data:{}},setup(e){let t=e,n=Ii({router:jt()}),r=gr(),{showMessage:i,showError:a}=ha(),o=K(),s=zn(),f=Wi(),p=la(),h=Gi(),g=cr(),_=d(``),v=d(t.data.tags),b=d(!1),x=d(v.value),S=et(),w=et(),E=d(),D=()=>{w.emit(`focus`)},O=()=>{E.value?.focus&&E.value.focus()},A=()=>{x.value=v.value},j=()=>{v.value=x.value},N=()=>{S.emit(`close`)},P=async()=>{let e=_.value.trim();if(!e){i({title:o.baseText(`duplicateWorkflowDialog.errors.missingName.title`),message:o.baseText(`duplicateWorkflowDialog.errors.missingName.message`),type:`error`});return}let c=t.data.parentFolderId,l=t.data.id;b.value=!0;try{let i;if(h.isWorkflowSaved[t.data.id]){let{createdAt:e,updatedAt:n,usedCredentials:a,id:o,homeProject:s,sharedWithProjects:c,activeVersionId:l,activeVersion:u,active:d,...p}=await g.fetchWorkflow(t.data.id);i=p,r.removeForeignCredentialsFromWorkflow(i,f.allCredentials)}await n.saveAsNewWorkflow({name:e,data:i,tags:v.value,resetWebhookUrls:!0,openInNewWindow:!0,resetNodeIds:!0,requestNewId:!0,parentFolderId:c})&&(N(),s.track(`User duplicated workflow`,{old_workflow_id:l,workflow_id:t.data.id,sharing_role:r.getWorkflowProjectRole(t.data.id)}),t.data.externalEventBus?.emit(`workflow-duplicated`,{id:t.data.id}))}catch(e){e.httpStatusCode===403?(e.message=o.baseText(`duplicateWorkflowDialog.errors.forbidden.message`),a(e,o.baseText(`duplicateWorkflowDialog.errors.forbidden.title`))):a(e,o.baseText(`duplicateWorkflowDialog.errors.generic.title`))}finally{b.value=!1}};return T(()=>t.isActive,e=>{e&&D()}),C(async()=>{_.value=await h.getDuplicateCurrentWorkflowName(t.data.name),await l(),O()}),(t,n)=>(M(),y(tc,{name:e.modalName,"event-bus":u(S),title:u(o).baseText(`duplicateWorkflowDialog.duplicateWorkflow`),center:!0,width:`420px`,onEnter:P},{content:k(()=>[W(`div`,{class:U(t.$style.content)},[m(u(mt),{ref_key:`nameInputRef`,ref:E,modelValue:_.value,"onUpdate:modelValue":n[0]||=e=>_.value=e,placeholder:u(o).baseText(`duplicateWorkflowDialog.enterWorkflowName`),maxlength:u(128)},null,8,[`modelValue`,`placeholder`,`maxlength`]),u(p).areTagsEnabled?(M(),y(ku,{key:0,ref:`dropdown`,modelValue:v.value,"onUpdate:modelValue":n[1]||=e=>v.value=e,"create-enabled":!0,"event-bus":u(w),placeholder:u(o).baseText(`duplicateWorkflowDialog.chooseOrCreateATag`),onBlur:A,onEsc:j},null,8,[`modelValue`,`event-bus`,`placeholder`])):c(``,!0)],2)]),footer:k(({close:e})=>[W(`div`,{class:U(t.$style.footer)},[m(u(q),{variant:`subtle`,disabled:b.value,label:u(o).baseText(`duplicateWorkflowDialog.cancel`),onClick:e},null,8,[`disabled`,`label`,`onClick`]),m(u(q),{loading:b.value,label:u(o).baseText(`duplicateWorkflowDialog.save`),onClick:P},null,8,[`loading`,`label`])],2)]),_:1},8,[`name`,`event-bus`,`title`]))}}),[[`__cssModules`,{$style:{content:`_content_uugk4_125`,footer:`_footer_uugk4_129`}}]]),I_={key:0,class:`mb-l`},L_={key:0},R_=X(g({__name:`ExternalSecretsProviderModal.ee`,props:{data:{}},setup(e){let t=e,n={infisical:{siteURL:`https://app.infisical.com`}},r=Wl(),i=ha(),l=K(),{confirm:f}=hr(),p=d(!1),h=et(),g={size:`medium`},_=a(()=>r.providers.find(e=>e.name===t.data.name)),v=d({}),{connectionState:b,initialConnectionState:x,normalizedProviderData:S,shouldDisplayProperty:T,setConnectionState:E,testConnection:D}=ju(_,v),O=a(()=>Object.keys(v.value).find(e=>v.value[e]!==_.value?.data?.[e])),A=a(()=>_.value?.properties?.filter(e=>e.required&&T(e)).every(e=>!!v.value[e.name])&&O.value);C(async()=>{try{let e=await r.getProvider(t.data.name);v.value={...n[t.data.name]||{},...e.data},E(e.state),e.connected?x.value=e.state:Object.keys(e.data??{}).length&&await D(),e.state===`connected`&&r.reloadProvider(t.data.name)}catch(e){i.showError(e,`Error`)}});function j(e){v.value={...v.value,[e.name]:e.value}}async function N(){if(_.value){try{p.value=!0,await r.updateProvider(_.value.name,{data:S.value}),E(_.value.state)}catch(e){i.showError(e,`Error`)}await D(),x.value===`initializing`&&b.value===`tested`&&setTimeout(()=>{h.emit(`connect`,!0)},100),p.value=!1}}async function P(){return O.value?await f(l.baseText(`settings.externalSecrets.provider.closeWithoutSaving.description`,{interpolate:{provider:_.value?.displayName??``}}),{title:l.baseText(`settings.externalSecrets.provider.closeWithoutSaving.title`),confirmButtonText:l.baseText(`settings.externalSecrets.provider.closeWithoutSaving.confirm`),cancelButtonText:l.baseText(`settings.externalSecrets.provider.closeWithoutSaving.cancel`)})!==Co:!0}async function I(){await D()}return(t,n)=>(M(),y(tc,{id:`external-secrets-provider-modal`,width:`812px`,title:_.value?.displayName,"event-bus":e.data.eventBus,name:u(ls),"before-close":P},{header:k(()=>[_.value?(M(),s(`div`,{key:0,class:U(t.$style.header)},[W(`div`,{class:U(t.$style.providerTitle)},[m(Au,{provider:_.value,class:`mr-xs`},null,8,[`provider`]),W(`span`,null,o(_.value.displayName),1)],2),W(`div`,{class:U(t.$style.providerActions)},[m(Mu,{class:`mr-s`,disabled:(u(b)===`initializing`||u(b)===`error`)&&!_.value.connected,"event-bus":u(h),provider:_.value,onChange:I},null,8,[`disabled`,`event-bus`,`provider`]),m(u(q),{variant:`solid`,loading:p.value,disabled:!A.value&&!p.value,onClick:N},{default:k(()=>[R(o(u(l).baseText(`settings.externalSecrets.provider.buttons.${p.value?`saving`:`save`}`)),1)]),_:1},8,[`loading`,`disabled`])],2)],2)):c(``,!0)]),content:k(()=>[_.value?(M(),s(`div`,{key:0,class:U(t.$style.container)},[n[2]||=W(`hr`,{class:`mb-l`},null,-1),u(b)===`initializing`?c(``,!0):(M(),s(`div`,I_,[u(b)===`connected`||u(b)===`tested`?(M(),y(u(we),{key:0,theme:`success`},{default:k(()=>[R(o(u(l).baseText(`settings.externalSecrets.provider.testConnection.success${_.value.connected?`.connected`:``}`,{interpolate:{count:`${u(r).secrets[_.value.name]?.length}`,provider:_.value.displayName}}))+` `,1),_.value.connected?(M(),s(`span`,L_,[n[1]||=W(`br`,null,null,-1),m(u(ge),{keypath:`settings.externalSecrets.provider.testConnection.success.connected.usage`,scope:`global`},{code:k(()=>[W(`code`,null,o(`\{\{ \$secrets\.${_.value.name}\.secret_name \}\}`),1)]),_:1}),m(u(lt),{href:u(l).baseText(`settings.externalSecrets.docs.use`),size:`small`},{default:k(()=>[R(o(u(l).baseText(`settings.externalSecrets.provider.testConnection.success.connected.docs`)),1)]),_:1},8,[`href`])])):c(``,!0)]),_:1})):u(b)===`error`?(M(),y(u(we),{key:1,theme:`danger`},{default:k(()=>[R(o(u(l).baseText(`settings.externalSecrets.provider.testConnection.error${_.value.connected?`.connected`:``}`,{interpolate:{provider:_.value.displayName}})),1)]),_:1})):c(``,!0)])),(M(!0),s(w,null,L(_.value.properties,e=>ce((M(),s(`form`,{key:e.name,autocomplete:`off`,"data-test-id":`external-secrets-provider-properties-form`,onSubmit:n[0]||=F(()=>{},[`prevent`])},[e.type===`notice`?(M(),y(u(Xe),{key:0,content:e.displayName},null,8,[`content`])):(M(),y(c_,{key:1,class:`mb-l`,parameter:e,value:v.value[e.name],label:g,"event-source":`external-secrets-provider`,onUpdate:j},null,8,[`parameter`,`value`]))],32)),[[ie,u(T)(e)]])),128))],2)):c(``,!0)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{container:`_container_1b79w_125`,header:`_header_1b79w_129`,providerTitle:`_providerTitle_1b79w_137`,providerActions:`_providerActions_1b79w_149`,footer:`_footer_1b79w_156`}}]]);function z_(){let e=Ws(),t=d(`initializing`),n=d(!1),r=d(!1);async function i(n){r.value=!0;try{let{testState:r}=await Ci(e.restApiContext,n);return t.value=r===`tested`?`connected`:r,t.value}catch{return t.value=`error`,`error`}finally{r.value=!1}}async function a(t){n.value=!0;try{return await Ni(e.restApiContext,t)}finally{n.value=!1}}async function o(t){return await fi(e.restApiContext,{...t,isGlobal:!0})}async function s(t,n){return await Zi(e.restApiContext,t,n)}return{connectionState:t,isLoading:n,isTesting:r,getConnection:a,createConnection:o,updateConnection:s,testConnection:i}}var B_=/^[a-z0-9]+(?:-[a-z0-9]+)*$/;function V_(e){return B_.test(e)}function H_(e){let{providerTypes:t}=e,n=Ir(),r=ha(),i=vn(),o=d(e.providerKey?.value),s=d(0),c=d(``),l=d(``),u=d(!1),f=d(void 0),p=d({}),m=d({}),h=d(!1),g=d(!1),_=z_();function v(e){let t=!0;return e.displayOptions?.show&&(t&&=Object.entries(e.displayOptions.show).every(([e,t])=>t?.includes(p.value[e]))),e.displayOptions?.hide&&(t&&=!Object.entries(e.displayOptions.hide).every(([e,t])=>t?.includes(p.value[e]))),t}let y=d([]),b=d(!0),x=d([]),S=d(!0),C=d([]);T(C,async e=>{if(e.length===0)return;let t=e[0].id;i.projects.find(e=>e.id===t)||await i.fetchProject(t)},{immediate:!0});let w=a(()=>y.value.length===0?[]:i.projects.filter(e=>y.value.includes(e.id))),E=(e,t)=>i.myProjects.find(t=>t.id===e)?.scopes?.includes(t)??!1,D=a(()=>e.projectId?E(e.projectId,`externalSecretsProvider:create`):!1),O=a(()=>x.value.length===0?!1:x.value.every(e=>E(e,`externalSecretsProvider:update`))),k=a(()=>n.hasScope(`externalSecretsProvider:create`)||D.value),A=a(()=>n.hasScope(`externalSecretsProvider:update`)||O.value),j=a(()=>n.hasScope(`externalSecretsProvider:delete`)),M=a(()=>n.hasScope(`externalSecretsProvider:update`)),N=a(()=>!!o.value),P=a(()=>t.value.map(e=>({label:e.displayName,value:e.type}))),F=a(()=>Object.keys(p.value).some(e=>p.value[e]!==m.value[e])),I=a(()=>b.value!==S.value||JSON.stringify(y.value)!==JSON.stringify(x.value)),L=a(()=>c.value!==l.value||F.value||I.value),R=a(()=>f.value?f.value.properties?.filter(e=>e.required&&v(e)).every(e=>{let t=p.value[e.name];return t!=null&&t!==``})??!0:!0),ee=a(()=>Object.entries(p.value).reduce((e,[t,n])=>{let r=f.value?.properties?.find(e=>e.name===t);return r&&v(r)&&(e[t]=n),e},{})),te=a(()=>{let t=c.value.trim();return(e.existingProviderNames?.value??[]).includes(t)&&(!N.value||t!==l.value)}),ne=a(()=>{let e=c.value.trim();return e.length>0&&V_(e)&&!te.value}),re=a(()=>{let e=c.value.trim();return e.length===0?G.baseText(`settings.secretsProviderConnections.modal.validation.connectionName.required`):V_(e)?te.value?G.baseText(`settings.secretsProviderConnections.modal.connectionName.unique`):null:G.baseText(`settings.secretsProviderConnections.modal.validation.connectionName.format`)}),z=a(()=>!ne.value||!f.value||!(N.value?A.value:k.value)?!1:R.value&&(y.value.length>0||b.value)&&(F.value||I.value||!N.value)),B=a(()=>l.value?`{{ $secrets.${l.value}.secret_name }}`:``);function ie(e){let t={};e.properties?.forEach(e=>{e.default!==void 0&&e.default!==``&&(t[e.name]=e.default)}),p.value=t}function V(e,t){p.value={...p.value,[e]:t}}function ae(e){return e.trim().replace(/\s+/g,`-`).replace(/([a-z])([A-Z])/g,`$1-$2`).replace(/([A-Z])([A-Z][a-z])/g,`$1-$2`).toLowerCase()}function H(e){let n=t.value.find(t=>t.type===e);n&&(f.value=n,ie(n))}async function oe(e){await _.testConnection(e),_.connectionState.value===`connected`?r.showMessage({title:G.baseText(`settings.secretsProviderConnections.modal.testConnection.success.title`),message:G.baseText(`settings.secretsProviderConnections.modal.testConnection.success.description`,{interpolate:{providerName:c.value}}),type:`success`}):r.showError(Error(G.baseText(`generic.error`)),G.baseText(`generic.error`),G.baseText(`settings.secretsProviderConnections.modal.testConnection.error.serviceDisabled`))}async function U(){if(o.value)try{let{name:e,type:n,settings:r,projects:i}=await _.getConnection(o.value);c.value=e,l.value=e,u.value=!0,p.value={...r},m.value={...r},C.value=i??[],y.value=(i??[]).map(e=>e.id),b.value=y.value.length===0,x.value=[...y.value],S.value=b.value,f.value=t.value.find(e=>e.type===n),await _.testConnection(o.value)}catch(e){r.showError(e,G.baseText(`generic.error`),e?.response?.data?.data.error)}}async function se(){if(!f.value)return!1;let e=b.value?[]:y.value.slice(0,1),t={providerKey:c.value.trim(),type:f.value.type,settings:ee.value,projectIds:e},{secretsCount:n}=await _.createConnection(t);return o.value=c.value.trim(),s.value=n,m.value={...p.value},l.value=c.value.trim(),x.value=[...y.value],S.value=b.value,o.value&&await oe(o.value),!0}async function W(){if(!o.value||!f.value)return!1;let e=b.value?[]:y.value.slice(0,1),t={isGlobal:b.value,settings:ee.value,projectIds:e},n=F.value,{secretsCount:r,projects:i}=await _.updateConnection(o.value,t);return s.value=r,m.value={...p.value},l.value=c.value.trim(),x.value=[...y.value],b.value=i.length===0,S.value=i.length===0,n&&o.value&&await oe(o.value),!0}function ce(e,t){y.value=e.slice(0,1),b.value=t}function le(){if(!o.value&&e.projectId){let t=i.myProjects.find(t=>t.id===e.projectId);y.value=[e.projectId],b.value=!1,x.value=[e.projectId],S.value=!1,t?.name&&(C.value=[{id:t.id,name:t.name}])}}le();async function ue(){if(!f.value||!z.value)return!1;if(!(N.value?A.value:k.value))return r.showError(Error(G.baseText(`generic.missing.permissions`)),G.baseText(`generic.error`),G.baseText(`generic.missing.permissions`)),!1;h.value=!0;try{let e=N.value?await W():await se();return e&&(g.value=!0),e}catch(e){return r.showError(e,G.baseText(`generic.error`),e?.response?.data?.data.error),!1}finally{h.value=!1}}return{providerSecretsCount:s,providerKey:o,connectionName:c,connectionNameBlurred:u,originalConnectionName:l,selectedProviderType:f,connectionSettings:p,isSaving:h,didSave:g,connection:_,projectIds:y,isSharedGlobally:b,connectionProjects:C,sharedWithProjects:w,canUpdate:A,canDelete:j,canShareGlobally:M,setScopeState:ce,isEditMode:N,providerTypeOptions:P,hasUnsavedChanges:L,canSave:z,expressionExample:B,isValidName:ne,connectionNameError:re,scopeUpdated:I,updateSettings:V,selectProviderType:H,hyphenateConnectionName:ae,loadConnection:U,saveConnection:ue,shouldDisplayProperty:v}}var U_={key:0},W_={key:1},G_={class:`mb-l`},K_={class:`mb-l`},q_=X(g({__name:`SecretsProviderConnectionModal.ee`,props:{modalName:{},data:{default:()=>({activeTab:`connection`})}},setup(e){let t=e,n=K(),{confirm:r}=hr(),i=et(),l=vn(),f=Vi(),p={size:`medium`},h=d(t.data?.activeTab??`connection`),g=a(()=>t.data.providerTypes??[]),_=H_({providerTypes:g,providerKey:a(()=>t.data.providerKey??``),existingProviderNames:a(()=>t.data.existingProviderNames??[]),projectId:a(()=>t.data.projectId).value}),v=a(()=>[{id:`connection`,label:n.baseText(`settings.secretsProviderConnections.modal.items.connection`),position:`top`},{id:`sharing`,label:n.baseText(`settings.secretsProviderConnections.modal.items.scope`),position:`top`}]),b=a(()=>_.canShareGlobally.value?l.teamProjects.filter(e=>!_.projectIds.value.includes(e.id)):[]);function x(e){let t=Array.isArray(e)?e.at(-1):e;_.setScopeState(t?[t.id]:[],!1)}function S(e){_.setScopeState([],e)}function T(e){_.connectionName.value=e,_.connectionNameBlurred.value=!1}function E(){_.connectionName.value=_.hyphenateConnectionName(_.connectionName.value),_.connectionNameBlurred.value=!0}function D(e){_.selectProviderType(e)}function O(e){_.updateSettings(e.name,e.value)}async function A(){await _.saveConnection()}function j(){_.providerKey.value&&f.openModalWithData({name:ws,data:{providerKey:_.providerKey.value,providerName:_.connectionName.value,secretsCount:_.providerSecretsCount.value??0,onConfirm:()=>{t.data.onClose?.(),i.emit(`close`)}}})}async function N(){return _.hasUnsavedChanges.value&&await r(n.baseText(`settings.secretsProviderConnections.modal.unsavedChanges.text`),{title:n.baseText(`settings.secretsProviderConnections.modal.unsavedChanges.title`),confirmButtonText:n.baseText(`generic.keepEditing`),cancelButtonText:n.baseText(`generic.close`)})===`confirm`?!1:(t.data.onClose?.(),!0)}C(async()=>{g.value.length!==0&&_.isEditMode.value&&await Promise.all([_.loadConnection()])});let P=re(`nameRef`),{width:I}=pe(P);return(e,t)=>g.value.length?(M(),y(tc,{key:0,id:`${u(Ka)}-modal`,"custom-class":e.$style.secretsProviderConnectionModal,"event-bus":u(i),name:u(Ka),"before-close":N,width:`70%`,height:`80%`},{header:k(()=>[W(`div`,{class:U(e.$style.header)},[W(`div`,{class:U(e.$style.info)},[W(`div`,{class:U(e.$style.icon)},[u(_).selectedProviderType.value?(M(),y(Nu,{key:0,provider:u(_).selectedProviderType.value,class:U(e.$style.headerIcon)},null,8,[`provider`,`class`])):(M(),y(u(J),{key:1,icon:`vault`,width:`24`,height:`24`}))],2),W(`div`,{ref_key:`nameRef`,ref:P,class:U(e.$style.name)},[W(`div`,{class:U(e.$style.nameRow)},[m(u(Y),{size:`large`},{default:k(()=>[R(o(u(_).selectedProviderType.value?.displayName??u(n).baseText(`settings.secretsProviderConnections.modal.providerType.placeholder`)),1)]),_:1})],2)],2)],2),W(`div`,{class:U(e.$style.actions)},[m(u(He),{placement:`left`},{content:k(()=>[R(o(u(n).baseText(`generic.delete`)),1)]),default:k(()=>[u(_).isEditMode.value&&u(_).canDelete.value?(M(),y(u(Be),{key:0,title:u(n).baseText(`generic.delete`),icon:`trash-2`,variant:`ghost`,disabled:u(_).isSaving.value,"data-test-id":`secrets-provider-delete-button`,onClick:j},null,8,[`title`,`disabled`])):c(``,!0)]),_:1}),m(y_,{saved:!u(_).hasUnsavedChanges.value&&u(_).isEditMode.value,"is-saving":u(_).isSaving.value,disabled:!u(_).canSave.value,"saving-label":u(n).baseText(`settings.secretsProviderConnections.modal.saving`),"data-test-id":`secrets-provider-connection-save-button`,onClick:A},null,8,[`saved`,`is-saving`,`disabled`,`saving-label`])],2)],2)]),content:k(()=>[W(`div`,{class:U(e.$style.container)},[W(`nav`,{class:U(e.$style.sidebar)},[(M(!0),s(w,null,L(v.value,e=>(M(),y(u(Ot),{key:e.id,item:e,active:h.value===e.id,"data-test-id":`sidebar-item-${e.id}`,onClick:t=>h.value=e.id},null,8,[`item`,`active`,`data-test-id`,`onClick`]))),128))],2),W(`div`,{class:U(e.$style.contentArea)},[u(_).connection.isLoading.value?(M(),s(`div`,U_,[m(u(Oe),{variant:`p`,rows:4})])):(M(),s(`div`,W_,[h.value===`connection`?(M(),s(`div`,{key:0,class:U(e.$style.mainContent)},[W(`div`,null,[u(_).connection.connectionState.value===`connected`?(M(),y(u(we),{key:0,theme:`success`,class:`mb-l`,"data-test-id":`connection-success-callout`},{default:k(()=>[W(`div`,null,[W(`p`,null,o(u(n).baseText(`settings.secretsProviderConnections.modal.testConnection.success.serviceEnabled`,{interpolate:{count:u(_).providerSecretsCount.value,providerName:u(_).connectionName.value}})),1),W(`p`,null,o(u(n).baseText(`settings.secretsProviderConnections.modal.testConnection.success.reference`)),1),W(`code`,{class:U(e.$style.expressionExample)},o(u(_).expressionExample.value),3)])]),_:1})):u(_).connection.connectionState.value===`error`?(M(),y(u(we),{key:1,theme:`danger`,class:`mb-l`,"data-test-id":`connection-error-callout`},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.modal.testConnection.error`,{interpolate:{providerName:u(_).connectionName.value}})),1)]),_:1})):c(``,!0),W(`div`,G_,[m(u(Ct),{label:u(n).baseText(`settings.secretsProviderConnections.modal.connectionName`)},null,8,[`label`]),m(u(mt),{"data-test-id":`provider-name`,"model-value":u(_).connectionName.value,"max-width":u(I)-10,readonly:u(_).isEditMode.value,disabled:u(_).isEditMode.value,"aria-required":`true`,placeholder:`vault-project-x-y-z`,"onUpdate:modelValue":T,onBlur:E},null,8,[`model-value`,`max-width`,`readonly`,`disabled`]),u(_).connectionNameError.value&&u(_).connectionNameBlurred.value&&!u(_).isEditMode.value?(M(),y(u(Y),{key:0,size:`small`,color:`danger`,class:U(e.$style.headerHint)},{default:k(()=>[R(o(u(_).connectionNameError.value),1)]),_:1},8,[`class`])):u(_).isEditMode.value?c(``,!0):(M(),y(u(Y),{key:1,size:`small`,color:`text-light`,class:U(e.$style.headerHint)},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.modal.connectionName.hint`)),1)]),_:1},8,[`class`]))]),W(`div`,K_,[m(u(Ct),{label:u(n).baseText(`settings.secretsProviderConnections.modal.providerType`)},null,8,[`label`]),m(u(ct),{"data-test-id":`provider-type-select`,"model-value":u(_).selectedProviderType.value?.type,disabled:u(_).isEditMode.value,"onUpdate:modelValue":D},{default:k(()=>[(M(!0),s(w,null,L(u(_).providerTypeOptions.value,e=>(M(),y(u(Dt),{key:e.value,label:e.label,value:e.value},null,8,[`label`,`value`]))),128))]),_:1},8,[`model-value`,`disabled`])]),(M(!0),s(w,null,L(u(_).selectedProviderType.value?.properties,e=>ce((M(),s(`form`,{key:e.name,autocomplete:`off`,onSubmit:t[0]||=F(()=>{},[`prevent`])},[e.type===`notice`?(M(),y(u(Xe),{key:0,content:e.displayName},null,8,[`content`])):(M(),y(c_,{key:1,class:`mb-l`,parameter:e,value:u(_).connectionSettings.value[e.name],label:p,"event-source":`secrets-provider-connection`,onUpdate:O},null,8,[`parameter`,`value`]))],32)),[[ie,u(_).shouldDisplayProperty(e)]])),128))])],2)):c(``,!0),h.value===`sharing`&&u(_).isEditMode?(M(),s(`div`,{key:1,class:U(e.$style.mainContent)},[W(`div`,null,[m(u(Ke),{bold:!1,class:`mb-s`},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.modal.scope.info`)),1)]),_:1}),m(Tu,{"model-value":u(_).sharedWithProjects.value,projects:b.value,readonly:!u(_).canUpdate.value,static:!u(_).canUpdate.value,placeholder:u(n).baseText(`settings.secretsProviderConnections.modal.scope.placeholder.project`),"all-users-label":u(n).baseText(`settings.secretsProviderConnections.modal.scope.global`),"empty-options-text":u(n).baseText(`settings.secretsProviderConnections.modal.scope.emptyOptionsText`),"can-share-globally":u(_).canShareGlobally.value,"is-shared-globally":u(_).isSharedGlobally.value,"onUpdate:shareWithAllUsers":S,"onUpdate:modelValue":x},null,8,[`model-value`,`projects`,`readonly`,`static`,`placeholder`,`all-users-label`,`empty-options-text`,`can-share-globally`,`is-shared-globally`])])],2)):c(``,!0)]))],2)],2)]),_:1},8,[`id`,`custom-class`,`event-bus`,`name`])):c(``,!0)}}),[[`__cssModules`,{$style:{secretsProviderConnectionModal:`_secretsProviderConnectionModal_1mosk_125`,mainContent:`_mainContent_1mosk_140`,icon:`_icon_1mosk_146`,name:`_name_1mosk_154`,nameRow:`_nameRow_1mosk_161`,headerHint:`_headerHint_1mosk_168`,modalLayout:`_modalLayout_1mosk_173`,sidebar:`_sidebar_1mosk_179`,header:`_header_1mosk_168`,container:`_container_1mosk_193`,info:`_info_1mosk_198`,actions:`_actions_1mosk_206`,contentArea:`_contentArea_1mosk_217`,expressionExample:`_expressionExample_1mosk_223`}}]]),J_=X(g({__name:`DeleteSecretsProviderModal.ee`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=ha(),i=Ws(),l=Vi(),f=et(),p=d(``),h=d(!1),g=d(0),_=d(!0),v=a(()=>g.value>0),b=a(()=>!v.value||p.value===t.data.providerName),x=a(()=>({name:$.CREDENTIALS,query:{externalSecretsStore:t.data.providerKey}})),S=a(()=>{let e=t.data.secretsCount;return e===1?n.baseText(`settings.secretsProviderConnections.delete.description.oneSecret`):n.baseText(`settings.secretsProviderConnections.delete.description.secrets`,{interpolate:{count:e.toString()}})}),w=a(()=>{let e=g.value;return e===1?n.baseText(`settings.secretsProviderConnections.delete.impact.oneCredential`):n.baseText(`settings.secretsProviderConnections.delete.impact.credentials`,{interpolate:{count:e.toString()}})});C(async()=>{_.value=!0;try{g.value=(await Nr(i.restApiContext,{includeGlobal:!0,externalSecretsStore:t.data.providerKey})).length}catch(e){r.showError(e,n.baseText(`error`))}finally{_.value=!1}});async function T(){h.value=!0;try{await Rr(i.restApiContext,t.data.providerKey),r.showMessage({title:n.baseText(`settings.secretsProviderConnections.delete.success`,{interpolate:{name:t.data.providerName}}),type:`success`}),t.data.onConfirm&&await t.data.onConfirm(),l.closeModal(t.modalName),l.closeModal(Ka)}catch(e){r.showError(e,n.baseText(`settings.secretsProviderConnections.delete.error`))}finally{h.value=!1}}function E(){l.closeModal(t.modalName)}return(t,r)=>(M(),y(tc,{name:e.modalName,title:u(n).baseText(`settings.secretsProviderConnections.delete.title`,{interpolate:{name:e.data.providerName}}),"event-bus":u(f),width:`540px`},{content:k(()=>[v.value?(M(),s(`div`,{key:0,class:U(t.$style.content)},[m(u(Y),{size:`medium`,color:`text-base`},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.delete.description`,{interpolate:{name:e.data.providerName,secretsCount:S.value}})),1)]),_:1}),_.value?c(``,!0):(M(),s(`div`,{key:0,class:U(t.$style.impact)},[m(u(Y),{size:`medium`,color:`text-base`,bold:``},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.delete.impact.title`)),1)]),_:1}),W(`ul`,null,[W(`li`,null,[m(u(Y),{size:`medium`,color:`text-base`},{default:k(()=>[m(u(lt),{"data-test-id":`credentials-link`,to:x.value,target:`_blank`},{default:k(()=>[R(o(w.value),1)]),_:1},8,[`to`]),R(` `+o(u(n).baseText(`settings.secretsProviderConnections.delete.impact.description`)),1)]),_:1})])])],2)),W(`div`,{class:U(t.$style.confirmation)},[m(u(Ct),{label:u(n).baseText(`settings.secretsProviderConnections.delete.confirmationLabel`,{interpolate:{name:e.data.providerName}}),size:`small`},{default:k(()=>[m(u(mt),{modelValue:p.value,"onUpdate:modelValue":r[0]||=e=>p.value=e,placeholder:e.data.providerName,"data-test-id":`delete-confirmation-input`},null,8,[`modelValue`,`placeholder`])]),_:1},8,[`label`])],2)],2)):(M(),s(`div`,{key:1,class:U(t.$style.content)},[m(u(Y),{size:`medium`,color:`text-base`},{default:k(()=>[R(o(u(n).baseText(`settings.secretsProviderConnections.delete.description.noImpact`)),1)]),_:1})],2))]),footer:k(()=>[W(`div`,{class:U(t.$style.footer)},[m(u(q),{type:`secondary`,onClick:E},{default:k(()=>[R(o(u(n).baseText(`generic.cancel`)),1)]),_:1}),m(u(q),{type:`danger`,disabled:!b.value,loading:h.value,"data-test-id":`confirm-delete-button`,onClick:T},{default:k(()=>[R(o(u(n).baseText(`generic.delete`)),1)]),_:1},8,[`disabled`,`loading`])],2)]),_:1},8,[`name`,`title`,`event-bus`]))}}),[[`__cssModules`,{$style:{content:`_content_z2i0v_125`,impact:`_impact_z2i0v_131`,confirmation:`_confirmation_z2i0v_137`,footer:`_footer_z2i0v_141`}}]]);function Y_({node:e}){let t=d([]),n=Gi(),r=vn(),i=Jt(),o=hu(),s=_({}),c=d(void 0),l=a(()=>{if(!e.value)return;let t=n.getWorkflowExecution?.data?.resultData.runData[e.value?.name];if(t)return t[0]}),u={string:{inputType:`text`,defaultValue:``},boolean:{inputType:`checkbox`,defaultValue:!0},number:{inputType:`number`,defaultValue:0},json:{inputType:`text`,defaultValue:``}},f=e=>(typeof e==`string`?e:e.name).replaceAll(` `,`_`),p=e=>`node_${f(e)}_`,m=e=>`tool_${f(e)}_option`;function h(e){let t=i.getNodeType(e.type,e.typeVersion)?.codex?.subcategories?.AI,n=t?.includes(`Vector Stores`)&&t?.includes(`Tools`),r=e.parameters.mode;return n&&r===`retrieve-as-tool`||vu.includes(e.type)}let g=async e=>{let t=[],a=await i.getNodeParameterOptions({nodeTypeAndVersion:{name:e.type,version:e.typeVersion},path:`parameters.includedTools`,methodName:`getTools`,currentNodeParameters:e.parameters,credentials:e.credentials,projectId:r.currentProjectId,workflowId:n.workflowId}),o=a?.map(e=>({label:e.name,value:String(e.value),disabled:!1}));t.push({name:m(e),initialValue:``,properties:{label:`Tool name`,type:`select`,options:o,required:!0},metadata:{nodeName:e.name,type:`selector`}});let c=s[e.name];if(c){let e=a?.find(e=>String(e.value)===c)?.inputSchema;if(e?.properties)for(let[n,r]of Object.entries(e.properties)){let e=typeof r==`object`&&`type`in r&&typeof r.type==`string`?r.type:`text`;t.push({name:`${p(c)}query.${n}`,initialValue:``,properties:{label:n,type:u[e].inputType,required:!0},metadata:{nodeName:c,type:`query`,propertyName:n}})}}return t},v=async(e,t=!1)=>e?ks(e.type)?{parameters:await y(e)}:e.type===`@n8n/n8n-nodes-langchain.mcpClientTool`?{parameters:await g(e)}:{parameters:b(e,t)}:{parameters:[]},y=async e=>{let t=[],r=n.workflowObject.getParentNodes(e.name,`ALL_NON_MAIN`,1).map(e=>n.getNodeByName(e)).filter(e=>!!e),i=[`tool`,`toolParameters`],a=b(e,!0).filter(e=>!i.includes(e.name.replace(/^query\./,``))).map(t=>({...t,name:`${f(e)}_${t.name}`}));t.push(...a);let o=r.map(e=>({label:e.name,value:e.name,disabled:!1}));t.push({name:m(e),initialValue:``,properties:{label:`Tool name`,type:`select`,options:o,required:!0},metadata:{nodeName:e.name,type:`selector`}});let c=s[e.name];if(c){let e=r.find(e=>e.name===c);if(e){let n=await v(e,!0);t.push(...n.parameters.map(t=>({...t,name:`${p(e)}${t.name}`})))}}return t},b=(e,t=!1)=>{let r=[],i=e.parameters,a=[];to(i,a);let s=l.value?.inputOverride?.[ys.AiTool]?.[0]?.[0].json,c=s?.query;a.forEach(t=>{let i=t.type??`string`,a=c?.[t.key]?c[t.key]:o.getQueryValue(n.workflowId,e.id,e.name,t.key)??u[i]?.defaultValue;r.push({name:`query.`+t.key,initialValue:a,properties:{label:t.key,type:u[t.type??`string`].inputType,required:!0},metadata:{nodeName:e.name,type:`query`,propertyName:t.key}})});let d=h(e);if(r.length===0&&!t||d){let t=d?`input`:`query`,i=s?.[t]??o.getQueryValue(n.workflowId,e.id,e.name,t)??``;r.unshift({name:d?`query.input`:`query`,initialValue:i??``,properties:{label:`Query`,type:`text`,required:!0},metadata:{nodeName:e.name,type:`query`,propertyName:d?`input`:`query`,implicitInput:d}})}return r};return T([e,s],async([e])=>{c.value=void 0;try{t.value=(await v(e)).parameters}catch(e){c.value=e instanceof Error?e:Error(`Unknown error occurred`);return}},{immediate:!0}),{getToolName:f,parameters:t,error:c,updateSelectedTool:(e,t)=>{s[e]=t}}}var X_=X(g({__name:`FromAiParametersModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=d(),r=K(),i=zn(),s=qt(),l=et(),f=Gi(),{runWorkflow:p}=gu({router:jt()}),h=hu(),g=a(()=>t.data.nodeName?f.getNodeByName(t.data.nodeName):void 0),_=a(()=>{if(!g.value)return;let e=f.workflowObject.getChildNodes(g.value.name,`ALL`,1);if(e.length!==0)return f.getNodeByName(e[0])?.name}),{getToolName:v,parameters:b,error:x,updateSelectedTool:S}=Y_({node:g}),C=()=>{l.emit(`close`)},w=async()=>{if(!g.value)return;let e=g.value.name,t=Object.values(n.value?.getValuesWithMetadata()??{});h.clearAgentRequests(f.workflowId,g.value.id);let r=t.findLast(e=>e.metadata?.type===`selector`)?.value,a={query:{},toolName:v(r||e)};for(let e of t){if(e.metadata?.type!==`query`)continue;let t=v(e.metadata.nodeName),n=e.metadata.propertyName,r=e.value;e.metadata.implicitInput?a.query[t]=r:(a.query[t]??={},a.query[t][n]=r)}h.setAgentRequestForNode(f.workflowId,g.value.id,a);let o={node_type:g.value.type,workflow_id:f.workflowId,source:`from-ai-parameters-modal`,push_ref:s.pushRef};i.track(`User clicked execute node button in modal`,o),await p({destinationNode:{nodeName:g.value.name,mode:`inclusive`}}),C()},T=e=>{let t=e.metadata;t?.type===`selector`&&typeof e.value==`string`&&S(t.nodeName,e.value)};return(e,t)=>(M(),y(tc,{"max-width":`540px`,title:u(r).baseText(`fromAiParametersModal.title`,{interpolate:{nodeName:g.value?.name||``}}),"event-bus":u(l),name:u(ts),center:!0,"close-on-click-modal":!1},te({_:2},[u(x)?{name:`content`,fn:k(()=>[u(x)?(M(),y(u(we),{key:0,theme:`danger`},{default:k(()=>[R(o(u(x).message),1)]),_:1})):c(``,!0)]),key:`0`}:{name:`content`,fn:k(()=>[m(u(Z),null,{default:k(()=>[m(u(Na),{class:U(e.$style.row)},{default:k(()=>[m(u(Y),{"data-testid":`from-ai-parameters-modal-description`},{default:k(()=>[R(o(u(r).baseText(`fromAiParametersModal.description`,{interpolate:{parentNodeName:_.value||``}})),1)]),_:1})]),_:1},8,[`class`])]),_:1}),m(u(Z),null,{default:k(()=>[m(u(Na),{class:U(e.$style.row)},{default:k(()=>[u(b).length?(M(),y(u(ft),{key:0,ref_key:`inputs`,ref:n,inputs:u(b),"column-view":!0,"data-test-id":`from-ai-parameters-modal-inputs`,onSubmit:w,onUpdate:T},null,8,[`inputs`])):c(``,!0)]),_:1},8,[`class`])]),_:1})]),key:`1`},u(x)?void 0:{name:`footer`,fn:k(()=>[m(u(q),{"data-test-id":`execute-workflow-button`,icon:`flask-conical`,label:u(r).baseText(`fromAiParametersModal.execute`),float:`right`,onClick:w},null,8,[`label`])]),key:`2`}]),1032,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{row:`_row_19gz0_125`}}]]),Z_=X(g({__name:`ImportCurlModal`,setup(e){let t=zn(),n=K(),r=Vi(),i=qt(),a=d(``),o=et(),s=d(null);C(()=>{let e=r.modalsById[Zo].data?.curlCommands,t=i.activeNode?.id??``;a.value=e?.[t]??``,setTimeout(()=>{s.value?.focus()})});function c(e){a.value=e}function l(){s.value?.select()}function f(){o.emit(`close`)}function p(){_(),f()}function h(e){_({success:!1,...e})}function g(){let e=i.activeNode?.id,t=r.modalsById.importCurl.data?.curlCommands??{};t[e]=a.value,r.setModalData({name:Zo,data:{curlCommands:t}})}function _(e={success:!0,invalidProtocol:!1,protocol:``}){t.track(`User imported curl command`,{success:e.success,invalidProtocol:e.invalidProtocol,protocol:e.protocol})}async function v(){let{useImportCurlCommand:e}=await Re(async()=>{let{useImportCurlCommand:e}=await import(`./useImportCurlCommand-CVAkvAV3.js`);return{useImportCurlCommand:e}},__vite__mapDeps([72,2,1,3,4,5,6,7,8,9,11,12,13,14,15,16])),{importCurlCommand:t}=e({onImportSuccess:p,onImportFailure:h,onAfterImport:g});t(a)}return(e,t)=>(M(),y(tc,{width:`700px`,title:u(n).baseText(`importCurlModal.title`),"event-bus":u(o),name:u(Zo),center:!0},{content:k(()=>[W(`div`,{class:U(e.$style.container)},[m(u(Ct),{label:u(n).baseText(`importCurlModal.input.label`),color:`text-dark`},{default:k(()=>[m(u(mt),{ref_key:`inputRef`,ref:s,"model-value":a.value,type:`textarea`,rows:5,"data-test-id":`import-curl-modal-input`,placeholder:u(n).baseText(`importCurlModal.input.placeholder`),"onUpdate:modelValue":c,onFocus:l},null,8,[`model-value`,`placeholder`])]),_:1},8,[`label`])],2)]),footer:k(()=>[W(`div`,{class:U(e.$style.modalFooter)},[m(u(Xe),{class:U(e.$style.notice),content:u(n).baseText(`ImportCurlModal.notice.content`)},null,8,[`class`,`content`]),W(`div`,null,[m(u(q),{float:`right`,label:u(n).baseText(`importCurlModal.button.label`),"data-test-id":`import-curl-modal-button`,onClick:v},null,8,[`label`])])],2)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{modalFooter:`_modalFooter_b99k5_125`,notice:`_notice_b99k5_131`,container:`_container_b99k5_135`}}]]),Q_={key:0,class:`loading-message`},$_={key:1,class:`error-message`},ev={key:2,class:`content-wrapper`},tv={key:0,controls:``,autoplay:``},nv=[`src`,`type`],rv={key:1,controls:``,autoplay:``},iv=[`src`,`type`],av=[`src`,`alt`],ov={key:6,class:`text-content`},sv=[`src`],cv={key:8,class:`error-message`},lv=X(g({__name:`BinaryDataViewModal`,props:{data:{}},setup(e){let t=K(),n=Gi(),r=e,i=d(!0),c=d(``),l=d(!1),p=d(``),m=null,h=a(()=>{let{id:e,mimeType:t,fileName:n}=r.data.binaryData,i=r.data.binaryData.fileType;return t&&(t.startsWith(`image/`)?i=`image`:t.startsWith(`audio/`)?i=`audio`:t.startsWith(`video/`)?i=`video`:t===`application/pdf`?i=`pdf`:t===`application/json`||t===`text/json`?i=`json`:t===`text/html`?i=`html`:t===`text/markdown`||t.includes(`markdown`)?i=`markdown`:t===`text/plain`?i=`text`:i===void 0&&(i=`other`)),{id:e,mimeType:t,fileName:n,fileType:i||`other`}});function g(){m&&=(URL.revokeObjectURL(m),null)}async function _(){i.value=!0,l.value=!1,g(),c.value=``,p.value=``;let{id:e,fileName:t,fileType:r,mimeType:a}=h.value;try{let i=[`html`,`pdf`,`text`].includes(r)?`download`:`view`,o=n.getBinaryUrl(e,i,t||``,a||``);switch(r){case`json`:p.value=await(await fetch(o,{credentials:`include`})).json();break;case`html`:case`markdown`:case`text`:p.value=await(await fetch(o,{credentials:`include`})).text();break;case`pdf`:{let e=await(await fetch(o,{credentials:`include`})).blob();m=URL.createObjectURL(e),c.value=m;break}default:c.value=o}}catch(e){console.error(e.message),l.value=!0}i.value=!1}return T(()=>r.data.binaryData,()=>{_().catch(()=>{})},{immediate:!0}),f(()=>{g()}),(e,n)=>(M(),y(tc,{width:`60%`,height:`90%`,title:`File Preview`,name:u(zo),center:!0},{content:k(()=>[W(`div`,{class:U([`binary-data-modal-content`,h.value.fileType])},[i.value?(M(),s(`div`,Q_,`Loading binary data...`)):l.value?(M(),s(`div`,$_,`Error loading binary data`)):(M(),s(`div`,ev,[h.value.fileType===`video`?(M(),s(`video`,tv,[W(`source`,{src:c.value,type:h.value.mimeType},null,8,nv),R(` `+o(u(t).baseText(`binaryDataDisplay.yourBrowserDoesNotSupport`)),1)])):h.value.fileType===`audio`?(M(),s(`audio`,rv,[W(`source`,{src:c.value,type:h.value.mimeType},null,8,iv),R(` `+o(u(t).baseText(`binaryDataDisplay.yourBrowserDoesNotSupport`)),1)])):h.value.fileType===`image`?(M(),s(`img`,{key:2,src:c.value,alt:h.value.fileName||`Image preview`},null,8,av)):h.value.fileType===`json`?(M(),y(u(yu),{key:3,data:p.value,deep:3,"show-length":!0},null,8,[`data`])):h.value.fileType===`html`?(M(),y(lu,{key:4,"input-html":p.value},null,8,[`input-html`])):h.value.fileType===`markdown`?(M(),y(Sa,{key:5,"input-markdown":p.value},null,8,[`input-markdown`])):h.value.fileType===`text`?(M(),s(`pre`,ov,`						`+o(p.value)+`
					`,1)):h.value.fileType===`pdf`?(M(),s(`embed`,{key:7,src:c.value,class:`binary-data`,type:`application/pdf`},null,8,sv)):(M(),s(`div`,cv,`Preview not available for this file type`))]))],2)]),_:1},8,[`name`]))}}),[[`__scopeId`,`data-v-c6e05d49`]]),uv=X(g({__name:`ImportWorkflowUrlModal`,setup(e){let t=K(),n=Vi(),r=d(``),i=d(null),s=a(()=>r.value?co.test(r.value):!0),c=()=>{n.closeModal(Ro)},l=()=>{ri.emit(`importWorkflowUrl`,{url:r.value}),c()},f=async()=>{i.value&&i.value.focus()};return(e,n)=>(M(),y(tc,{name:u(Ro),title:u(t).baseText(`mainSidebar.prompt.importWorkflowFromUrl`),"show-close":!0,center:!0,width:`420px`,onOpened:f},{content:k(()=>[W(`div`,{class:U(e.$style.noScrollbar)},[m(u(mt),{ref_key:`inputRef`,ref:i,modelValue:r.value,"onUpdate:modelValue":n[0]||=e=>r.value=e,placeholder:u(t).baseText(`mainSidebar.prompt.workflowUrl`),state:s.value?`default`:`error`,"data-test-id":`workflow-url-import-input`,onKeyup:ne(l,[`enter`])},null,8,[`modelValue`,`placeholder`,`state`]),W(`p`,{class:U(e.$style[`error-text`]),style:O({visibility:s.value?`hidden`:`visible`})},o(u(t).baseText(`mainSidebar.prompt.invalidUrl`)),7)],2)]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`solid`,float:`right`,disabled:!r.value||!s.value,"data-test-id":`confirm-workflow-import-url-button`,onClick:l},{default:k(()=>[R(o(u(t).baseText(`mainSidebar.prompt.import`)),1)]),_:1},8,[`disabled`]),m(u(q),{variant:`subtle`,float:`right`,"data-test-id":`cancel-workflow-import-url-button`,onClick:c},{default:k(()=>[R(o(u(t).baseText(`mainSidebar.prompt.cancel`)),1)]),_:1})],2)]),_:1},8,[`name`,`title`]))}}),[[`__cssModules`,{$style:{"error-text":`_error-text_15or2_125`,footer:`_footer_15or2_133`,noScrollbar:`_noScrollbar_15or2_139`}}]]),dv={key:1},fv=g({__name:`InviteUsersModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=/^.* <(.*)>$/,r=Ji(),i=la(),l=pn(),f=nc(),{showMessage:p,showError:h}=ha(),g=K(),{goToUpgrade:_}=$s(),v=ut(),b=et(),x=d(),S=d(``),w=d(t.data.initialRole??Ss.Member),T=d(null),E=d(!1),D=a(()=>S.value.split(`,`).filter(e=>!!e.trim()).length),O=a(()=>D.value>1?g.baseText(`settings.users.inviteXUser${i.isSmtpSetup?``:`.inviteUrl`}`,{interpolate:{count:D.value.toString()}}):g.baseText(`settings.users.inviteUser${i.isSmtpSetup?``:`.inviteUrl`}`)),A=a(()=>D.value>=1),j=a(()=>i.isEnterpriseFeatureEnabled[Fo.AdvancedPermissions]),N=a(()=>i.isChatFeatureEnabled),P=a(()=>N.value&&i.isEnterpriseFeatureEnabled[Fo.AdvancedPermissions]),F=a(()=>l.isVariantEnabled(Xa.name,Xa.variant)),I=a(()=>T.value?T.value.map(e=>({...e.user,isPendingUser:!0})):[]),L=e=>{if(typeof e!=`string`)return!1;let t=e.split(`,`);for(let e=0;e<t.length;e++){let n=t[e],r=ae(n);if(r.trim()&&!rs.test(String(r).trim().toLowerCase()))return{messageKey:`settings.users.invalidEmailError`,options:{interpolate:{email:r}}}}return!1};function ee(e){return typeof e==`string`&&[Ss.Member,Ss.Admin,Ss.ChatUser].includes(e)}function ne(e){e.name===`emails`&&typeof e.value==`string`&&(S.value=e.value),e.name===`role`&&ee(e.value)&&(w.value=e.value)}async function re(){try{E.value=!0;let e=S.value.split(`,`).map(e=>({email:ae(e),role:w.value})).filter(e=>!!e.email);if(e.length===0)throw Error(g.baseText(`settings.users.noUsersToInvite`));let n=await r.inviteUsers(e),i=n.filter(e=>e.error),a=n.filter(e=>!e.error&&e.user.emailSent),o=n.filter(e=>!e.error&&!e.user.emailSent);if(a.length&&p({type:`success`,title:g.baseText(a.length>1?`settings.users.usersInvited`:`settings.users.userInvited`),message:g.baseText(`settings.users.emailInvitesSent`,{interpolate:{emails:a.map(({user:e})=>e.email).join(`, `)}})}),o.length){if(o.length===1)if(F.value)try{let e=await r.generateInviteLink({id:o[0].user.id});f.copy(e.link)}catch(e){h(e,g.baseText(`settings.users.inviteLinkError`))}else f.copy(o[0].user.inviteAcceptUrl);p({type:`success`,title:g.baseText(o.length>1?`settings.users.multipleInviteUrlsCreated`:`settings.users.inviteUrlCreated`),message:g.baseText(o.length>1?`settings.users.multipleInviteUrlsCreated.message`:`settings.users.inviteUrlCreated.message`,{interpolate:{emails:o.map(({user:e})=>e.email).join(`, `)}})})}i.length&&setTimeout(()=>{p({type:`error`,title:g.baseText(`settings.users.usersEmailedError`),message:g.baseText(`settings.users.emailInvitesSentError`,{interpolate:{emails:i.map(({error:e})=>e).join(`, `)}})})},0),o.length>1?T.value=o:b.emit(`close`),await t.data.afterInvite?.()}catch(e){h(e,g.baseText(`settings.users.usersInvitedError`))}E.value=!1}function z(e){p({type:`success`,title:g.baseText(e.length>1?`settings.users.multipleInviteUrlsCreated`:`settings.users.inviteUrlCreated`),message:g.baseText(e.length>1?`settings.users.multipleInviteUrlsCreated.message`:`settings.users.inviteUrlCreated.message`,{interpolate:{emails:e.map(({user:e})=>e.email).join(`, `)}})})}function B(){v.emit(`submit`)}async function ie(e){if(T.value)if(F.value)try{let t=await r.generateInviteLink({id:e.id});f.copy(t.link),z([])}catch(e){h(e,g.baseText(`settings.users.inviteLinkError`))}else e.inviteAcceptUrl&&(f.copy(e.inviteAcceptUrl),z([]))}function V(){_(`advanced-permissions`,`upgrade-advanced-permissions`)}function ae(e){let t=e.trim();if(n.test(t)){let e=t.match(n);e&&e.length===2&&(t=e[1])}return t}return C(()=>{x.value=[{name:`emails`,properties:{label:g.baseText(`settings.users.newEmailsToInvite`),required:!0,validationRules:[{name:`VALID_EMAILS`}],validators:{VALID_EMAILS:{validate:L}},placeholder:`name1@email.com, name2@email.com, ...`,capitalize:!0,focusInitially:!0}},{name:`role`,initialValue:t.data.initialRole??Ss.Member,properties:{label:g.baseText(`auth.role`),required:!0,type:`select`,options:[{value:Ss.Member,label:g.baseText(`auth.roles.member`)},...N.value?[{value:Ss.ChatUser,label:g.baseText(`auth.roles.chatUser`),disabled:!P.value}]:[],{value:Ss.Admin,label:g.baseText(`auth.roles.admin`),disabled:!j.value}],capitalize:!0}}]}),(e,t)=>(M(),y(tc,{name:u(Xn),title:u(g).baseText(T.value?`settings.users.copyInviteUrls`:`settings.users.inviteNewUsers`),center:!0,width:`460px`,"event-bus":u(b),onEnter:re},te({content:k(()=>[j.value?c(``,!0):(M(),y(u(Xe),{key:0},{default:k(()=>[m(u(ge),{keypath:`settings.users.advancedPermissions.warning`,scope:`global`},{link:k(()=>[m(u(lt),{size:`small`,onClick:V},{default:k(()=>[R(o(u(g).baseText(`generic.upgrade`)),1)]),_:1})]),_:1})]),_:1})),T.value?(M(),s(`div`,dv,[m(u(Je),{users:I.value},{actions:k(({user:e})=>[F.value?(M(),y(u(He),{key:0},{content:k(()=>[R(o(u(g).baseText(`settings.users.actions.generateInviteLink`)),1)]),default:k(()=>[m(u(Be),{variant:`subtle`,icon:`link`,"data-test-id":`generate-invite-link-button`,onClick:t=>ie(e)},null,8,[`onClick`])]),_:2},1024)):e.inviteAcceptUrl?(M(),y(u(He),{key:1},{content:k(()=>[R(o(u(g).baseText(`settings.users.inviteLink.copy`)),1)]),default:k(()=>[m(u(Be),{variant:`subtle`,icon:`link`,"data-test-id":`copy-invite-link-button`,"data-invite-link":e.inviteAcceptUrl,onClick:t=>ie(e)},null,8,[`data-invite-link`,`onClick`])]),_:2},1024)):c(``,!0)]),_:1},8,[`users`])])):x.value?(M(),y(u(ft),{key:2,inputs:x.value,"event-bus":u(v),"column-view":!0,onUpdate:ne,onSubmit:re},null,8,[`inputs`,`event-bus`])):c(``,!0)]),_:2},[T.value?void 0:{name:`footer`,fn:k(()=>[m(u(q),{loading:E.value,disabled:!A.value,label:O.value,float:`right`,onClick:B},null,8,[`loading`,`disabled`,`label`])]),key:`0`}]),1032,[`name`,`title`,`event-bus`]))}}),pv=function(){return pv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pv.apply(this,arguments)},mv={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},hv=mv;function gv(e){this.mode=hv.MODE_8BIT_BYTE,this.data=e}gv.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var _v=gv,vv={L:1,M:0,Q:3,H:2},yv=vv;function bv(e,t){this.totalCount=e,this.dataCount=t}bv.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],bv.getRSBlocks=function(e,t){var n=bv.getRsBlockTable(e,t);if(n==null)throw Error(`bad rs block @ typeNumber:`+e+`/errorCorrectLevel:`+t);for(var r=n.length/3,i=[],a=0;a<r;a++)for(var o=n[a*3+0],s=n[a*3+1],c=n[a*3+2],l=0;l<o;l++)i.push(new bv(s,c));return i},bv.getRsBlockTable=function(e,t){switch(t){case yv.L:return bv.RS_BLOCK_TABLE[(e-1)*4+0];case yv.M:return bv.RS_BLOCK_TABLE[(e-1)*4+1];case yv.Q:return bv.RS_BLOCK_TABLE[(e-1)*4+2];case yv.H:return bv.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var xv=bv;function Sv(){this.buffer=[],this.length=0}Sv.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var Cv=Sv,wv={glog:function(e){if(e<1)throw Error(`glog(`+e+`)`);return wv.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return wv.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},Tv=0;Tv<8;Tv++)wv.EXP_TABLE[Tv]=1<<Tv;for(var Tv=8;Tv<256;Tv++)wv.EXP_TABLE[Tv]=wv.EXP_TABLE[Tv-4]^wv.EXP_TABLE[Tv-5]^wv.EXP_TABLE[Tv-6]^wv.EXP_TABLE[Tv-8];for(var Tv=0;Tv<255;Tv++)wv.LOG_TABLE[wv.EXP_TABLE[Tv]]=Tv;var Ev=wv,Dv=Ev;function Ov(e,t){if(e.length==null)throw Error(e.length+`/`+t);for(var n=0;n<e.length&&e[n]==0;)n++;this.num=Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}Ov.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=Dv.gexp(Dv.glog(this.get(n))+Dv.glog(e.get(r)));return new Ov(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Dv.glog(this.get(0))-Dv.glog(e.get(0)),n=Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=Dv.gexp(Dv.glog(e.get(r))+t);return new Ov(n,0).mod(e)}};var kv=Ov,Av=mv,jv=kv,Mv=Ev,Nv={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Pv={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Pv.getBCHDigit(t)-Pv.getBCHDigit(Pv.G15)>=0;)t^=Pv.G15<<Pv.getBCHDigit(t)-Pv.getBCHDigit(Pv.G15);return(e<<10|t)^Pv.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Pv.getBCHDigit(t)-Pv.getBCHDigit(Pv.G18)>=0;)t^=Pv.G18<<Pv.getBCHDigit(t)-Pv.getBCHDigit(Pv.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Pv.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case Nv.PATTERN000:return(t+n)%2==0;case Nv.PATTERN001:return t%2==0;case Nv.PATTERN010:return n%3==0;case Nv.PATTERN011:return(t+n)%3==0;case Nv.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case Nv.PATTERN101:return t*n%2+t*n%3==0;case Nv.PATTERN110:return(t*n%2+t*n%3)%2==0;case Nv.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw Error(`bad maskPattern:`+e)}},getErrorCorrectPolynomial:function(e){for(var t=new jv([1],0),n=0;n<e;n++)t=t.multiply(new jv([1,Mv.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Av.MODE_NUMBER:return 10;case Av.MODE_ALPHA_NUM:return 9;case Av.MODE_8BIT_BYTE:return 8;case Av.MODE_KANJI:return 8;default:throw Error(`mode:`+e)}else if(t<27)switch(e){case Av.MODE_NUMBER:return 12;case Av.MODE_ALPHA_NUM:return 11;case Av.MODE_8BIT_BYTE:return 16;case Av.MODE_KANJI:return 10;default:throw Error(`mode:`+e)}else if(t<41)switch(e){case Av.MODE_NUMBER:return 14;case Av.MODE_ALPHA_NUM:return 13;case Av.MODE_8BIT_BYTE:return 16;case Av.MODE_KANJI:return 12;default:throw Error(`mode:`+e)}else throw Error(`type:`+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var a=0,o=e.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||s==0&&c==0||o==e.isDark(r+s,i+c)&&a++;a>5&&(n+=3+a-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var l=0;e.isDark(r,i)&&l++,e.isDark(r+1,i)&&l++,e.isDark(r,i+1)&&l++,e.isDark(r+1,i+1)&&l++,(l==0||l==4)&&(n+=3)}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var u=0,i=0;i<t;i++)for(var r=0;r<t;r++)e.isDark(r,i)&&u++;var d=Math.abs(100*u/t/t-50)/5;return n+=d*10,n}},Fv=Pv,Iv=_v,Lv=xv,Rv=Cv,zv=Fv,Bv=kv;function Vv(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Hv=Vv.prototype;Hv.addData=function(e){var t=new Iv(e);this.dataList.push(t),this.dataCache=null},Hv.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw Error(e+`,`+t);return this.modules[e][t]},Hv.getModuleCount=function(){return this.moduleCount},Hv.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Lv.getRSBlocks(e,this.errorCorrectLevel),n=new Rv,r=0,i=0;i<t.length;i++)r+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var a=this.dataList[i];n.put(a.mode,4),n.put(a.getLength(),zv.getLengthInBits(a.mode,e)),a.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},Hv.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache??=Vv.createData(this.typeNumber,this.errorCorrectLevel,this.dataList),this.mapData(this.dataCache,t)},Hv.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[e+n][t+r]=!0:this.modules[e+n][t+r]=!1)},Hv.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=zv.getLostPoint(this);(n==0||e>r)&&(e=r,t=n)}return t},Hv.createMovieClip=function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var a=0;a<this.modules.length;a++)for(var o=a*i,s=0;s<this.modules[a].length;s++){var c=s*i;this.modules[a][s]&&(r.beginFill(0,100),r.moveTo(c,o),r.lineTo(c+i,o),r.lineTo(c+i,o+i),r.lineTo(c,o+i),r.endFill())}return r},Hv.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]??(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]??(this.modules[6][t]=t%2==0)},Hv.setupPositionAdjustPattern=function(){for(var e=zv.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(this.modules[r][i]==null)for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)a==-2||a==2||o==-2||o==2||a==0&&o==0?this.modules[r+a][i+o]=!0:this.modules[r+a][i+o]=!1}},Hv.setupTypeNumber=function(e){for(var t=zv.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},Hv.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=zv.getBCHTypeInfo(n),i=0;i<15;i++){var a=!e&&(r>>i&1)==1;i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var i=0;i<15;i++){var a=!e&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=a:i<9?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!e},Hv.mapData=function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,a=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var s=0;s<2;s++)if(this.modules[r][o-s]==null){var c=!1;a<e.length&&(c=(e[a]>>>i&1)==1),zv.getMask(t,r,o-s)&&(c=!c),this.modules[r][o-s]=c,i--,i==-1&&(a++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}},Vv.PAD0=236,Vv.PAD1=17,Vv.createData=function(e,t,n){for(var r=Lv.getRSBlocks(e,t),i=new Rv,a=0;a<n.length;a++){var o=n[a];i.put(o.mode,4),i.put(o.getLength(),zv.getLengthInBits(o.mode,e)),o.write(i)}for(var s=0,a=0;a<r.length;a++)s+=r[a].dataCount;if(i.getLengthInBits()>s*8)throw Error(`code length overflow. (`+i.getLengthInBits()+`>`+s*8+`)`);for(i.getLengthInBits()+4<=s*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=s*8||(i.put(Vv.PAD0,8),i.getLengthInBits()>=s*8));)i.put(Vv.PAD1,8);return Vv.createBytes(i,r)},Vv.createBytes=function(e,t){for(var n=0,r=0,i=0,a=Array(t.length),o=Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,l=t[s].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),a[s]=Array(c);for(var u=0;u<a[s].length;u++)a[s][u]=255&e.buffer[u+n];n+=c;var d=zv.getErrorCorrectPolynomial(l),f=new Bv(a[s],d.getLength()-1).mod(d);o[s]=Array(d.getLength()-1);for(var u=0;u<o[s].length;u++){var p=u+f.getLength()-o[s].length;o[s][u]=p>=0?f.get(p):0}}for(var m=0,u=0;u<t.length;u++)m+=t[u].totalCount;for(var h=Array(m),g=0,u=0;u<r;u++)for(var s=0;s<t.length;s++)u<a[s].length&&(h[g++]=a[s][u]);for(var u=0;u<i;u++)for(var s=0;s<t.length;s++)u<o[s].length&&(h[g++]=o[s][u]);return h};var Uv=Vv,Wv=`H`,Gv=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function Kv(e,t){var n=vv[t],r=new Uv(-1,n);return r.addData(Jv(e)),r.make(),r}function qv(e){return e in vv}function Jv(e){for(var t=``,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r<2048?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|r&63)):r<55296||r>=57344?(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r&63)):(n++,r=65536+((r&1023)<<10|e.charCodeAt(n)&1023),t+=String.fromCharCode(240|r>>18),t+=String.fromCharCode(128|r>>12&63),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r&63))}return t}function Yv(e,t){t===void 0&&(t=0);var n=[];return e.forEach(function(e,r){var i=null;e.forEach(function(a,o){if(!a&&i!==null){n.push(`M${i+t} ${r+t}h${o-i}v1H${i+t}z`),i=null;return}if(o===e.length-1){if(!a)return;i===null?n.push(`M${o+t},${r+t} h1v1H${o+t}z`):n.push(`M${i+t},${r+t} h${o+1-i}v1H${i+t}z`);return}a&&i===null&&(i=o)})}),n.join(``)}var Xv={value:{type:String,required:!0,default:``},size:{type:Number,default:100},level:{type:String,default:Wv,validator:function(e){return qv(e)}},background:{type:String,default:`#fff`},foreground:{type:String,default:`#000`},margin:{type:Number,required:!1,default:0}},Zv=pv(pv({},Xv),{renderAs:{type:String,required:!1,default:`canvas`,validator:function(e){return[`canvas`,`svg`].indexOf(e)>-1}}}),Qv=g({name:`QRCodeSvg`,props:Xv,setup:function(e){var t=d(0),n=d(``),i=function(){var r=e.value,i=e.level,a=e.margin,o=Kv(r,i).modules;t.value=o.length+a*2,n.value=Yv(o,a)};return i(),r(i),function(){return p(`svg`,{width:e.size,height:e.size,"shape-rendering":`crispEdges`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 ${t.value} ${t.value}`},[p(`path`,{fill:e.background,d:`M0,0 h${t.value}v${t.value}H0z`}),p(`path`,{fill:e.foreground,d:n.value})])}}}),$v=g({name:`QRCodeCanvas`,props:Xv,setup:function(e){var t=d(null),n=function(){var n=e.value,r=e.level,i=e.size,a=e.margin,o=e.background,s=e.foreground,c=Kv(n,r).modules,l=c.length+a*2,u=t.value;if(u){var d=u.getContext(`2d`);if(d){var f=window.devicePixelRatio||1,p=i/l*f;u.height=u.width=i*f,d.scale(p,p),d.fillStyle=o,d.fillRect(0,0,l,l),d.fillStyle=s,Gv?d.fill(new Path2D(Yv(c,a))):c.forEach(function(e,t){e.forEach(function(e,n){e&&d.fillRect(n+a,t+a,1,1)})})}}};return C(n),r(n),function(){return p(`canvas`,{ref:t,style:{width:`${e.size}px`,height:`${e.size}px`}})}}}),ey=g({name:`Qrcode`,render:function(){var e=this.$props,t=e.renderAs,n=e.value,r=e.size,i=e.margin,a=e.level,o=e.background,s=e.foreground,c=r>>>0,l=i>>>0,u=qv(a)?a:Wv;return p(t===`svg`?Qv:$v,{value:n,size:c,margin:l,level:u,background:o,foreground:s})},props:Zv}),ty=[`textContent`],ny={key:0},ry={key:1},iy=X(g({__name:`MfaSetupModal`,setup(e){let t=d(As),n=d(dc),r=d(``),i=d(``),a=d(!1),c=d(dc),l=d(!1),f=d([]),p=d(!1),h=d(``),g=d(``),_=d(!0),v=nc(),b=Ji(),x=la(),S=K(),T=ha(),E=()=>{n.value.emit(`close`)},D=e=>{if(e.length!==6){g.value=``;return}b.verifyMfaCode({mfaCode:e}).then(()=>{l.value=!0,h.value=e}).catch(()=>{g.value=S.baseText(`mfa.setup.invalidCode`)})},O=()=>{v.copy(r.value),T.showToast({title:S.baseText(`mfa.setup.step1.toast.copyToClipboard.title`),message:S.baseText(`mfa.setup.step1.toast.copyToClipboard.message`),type:`success`})},A=()=>{c.value.emit(`submit`)},j=()=>{let e=document.createElement(`a`);e.setAttribute(`href`,`data:text/plain;charset=utf-8,`+encodeURIComponent(f.value.join(`
`))),e.setAttribute(`download`,`n8n-recovery-codes.txt`),e.style.display=`none`,document.body.appendChild(e),e.click(),document.body.removeChild(e),p.value=!0},N=async()=>{try{await b.enableMfa({mfaCode:h.value}),E(),T.showMessage({type:`success`,title:S.baseText(`mfa.setup.step2.toast.setupFinished.message`)}),x.isMFAEnforced&&(await b.logout(),await Iu.push({name:$.SIGNIN}))}catch(e){if(e.errorCode===997){T.showMessage({type:`error`,title:S.baseText(`mfa.setup.step2.toast.tokenExpired.error.message`)});return}T.showMessage({type:`error`,title:S.baseText(`mfa.setup.step2.toast.setupFinished.error.message`)})}},P=async()=>{try{let e=await b.fetchMfaQR();i.value=e.qrCode,r.value=e.secret,f.value=e.recoveryCodes}catch(e){T.showError(e,S.baseText(`settings.api.view.error`))}finally{_.value=!1}};return C(async()=>{await P()}),(e,r)=>(M(),y(tc,{width:`460px`,height:`80%`,"max-height":`640px`,title:l.value?u(S).baseText(`mfa.setup.step2.title`):u(S).baseText(`mfa.setup.step1.title`),"event-bus":n.value,name:t.value,center:!0,loading:_.value},{content:k(()=>[l.value?(M(),s(`div`,{key:1,class:U(e.$style.container)},[W(`div`,null,[m(u(Y),{size:`medium`,bold:!1},{default:k(()=>[R(o(u(S).baseText(`mfa.setup.step2.description`)),1)]),_:1})]),W(`div`,{class:U(e.$style.recoveryCodesContainer)},[(M(!0),s(w,null,L(f.value,e=>(M(),s(`div`,{key:e},[m(u(Y),{size:`medium`},{default:k(()=>[R(o(e),1)]),_:2},1024)]))),128))],2),m(u(Ke),{bold:!1,class:U(e.$style[`edit-mode-footer-infotip`])},{default:k(()=>[m(u(ge),{keypath:`mfa.setup.step2.infobox.description`,tag:`span`,scope:`global`},{part1:k(()=>[R(o(u(S).baseText(`mfa.setup.step2.infobox.description.part1`)),1)]),part2:k(()=>[m(u(Y),{size:`small`,bold:!0,class:U(e.$style.loseAccessText)},{default:k(()=>[R(o(u(S).baseText(`mfa.setup.step2.infobox.description.part2`)),1)]),_:1},8,[`class`])]),_:1})]),_:1},8,[`class`]),W(`div`,null,[m(u(q),{variant:`solid`,icon:`hard-drive-download`,float:`right`,label:u(S).baseText(`mfa.setup.step2.button.download`),"data-test-id":`mfa-recovery-codes-button`,onClick:j},null,8,[`label`])])],2)):(M(),s(`div`,{key:0,class:U([e.$style.container,e.$style.modalContent])},[W(`div`,{class:U(e.$style.textContainer)},[m(u(Y),{size:`large`,color:`text-dark`,bold:!0},{default:k(()=>[R(o(u(S).baseText(`mfa.setup.step1.instruction1.title`)),1)]),_:1})],2),W(`div`,null,[m(u(Y),{size:`medium`,bold:!1},{default:k(()=>[m(u(ge),{keypath:`mfa.setup.step1.instruction1.subtitle`,tag:`span`,scope:`global`},{part1:k(()=>[R(o(u(S).baseText(`mfa.setup.step1.instruction1.subtitle.part1`)),1)]),part2:k(()=>[W(`a`,{class:U(e.$style.secret),"data-test-id":`mfa-secret-button`,onClick:O},o(u(S).baseText(`mfa.setup.step1.instruction1.subtitle.part2`)),3)]),_:1})]),_:1})]),W(`div`,{class:U(e.$style.qrContainer)},[m(ey,{value:i.value,size:150,level:`H`},null,8,[`value`])],2),W(`div`,{class:U(e.$style.textContainer)},[m(u(Y),{size:`large`,color:`text-dark`,bold:!0},{default:k(()=>[R(o(u(S).baseText(`mfa.setup.step1.instruction2.title`)),1)]),_:1})],2),W(`div`,{class:U([e.$style.form,g.value?e.$style.error:``])},[m(u(Ct),{size:`medium`,bold:!1,class:U(e.$style.labelTooltip),label:u(S).baseText(`mfa.setup.step1.input.label`)},{default:k(()=>[m(u(mt),{modelValue:h.value,"onUpdate:modelValue":r[0]||=e=>h.value=e,type:`text`,maxlength:6,placeholder:u(S).baseText(`mfa.code.input.placeholder`),required:!0,"data-test-id":`mfa-token-input`,onInput:D},null,8,[`modelValue`,`placeholder`])]),_:1},8,[`class`,`label`]),W(`div`,{class:U([e.$style.infoText,`mt-4xs`])},[W(`span`,{size:`small`,textContent:o(g.value)},null,8,ty)],2)],2)],2))]),footer:k(()=>[l.value?(M(),s(`div`,ny,[W(`div`,null,[m(u(q),{float:`right`,disabled:!p.value,label:u(S).baseText(`mfa.setup.step2.button.save`),size:`large`,"data-test-id":`mfa-save-button`,onClick:N},null,8,[`disabled`,`label`])])])):(M(),s(`div`,ry,[W(`div`,null,[m(u(q),{float:`right`,label:u(S).baseText(`mfa.setup.step1.button.continue`),size:`large`,disabled:!a.value,onClick:A},null,8,[`label`,`disabled`])])]))]),_:1},8,[`title`,`event-bus`,`name`,`loading`]))}}),[[`__cssModules`,{$style:{container:`_container_13wpk_125`,textContainer:`_textContainer_13wpk_139`,formContainer:`_formContainer_13wpk_145`,qrContainer:`_qrContainer_13wpk_149`,headerContainer:`_headerContainer_13wpk_156`,recoveryCodesContainer:`_recoveryCodesContainer_13wpk_160`,form:`_form_13wpk_145`,secret:`_secret_13wpk_194`,loseAccessText:`_loseAccessText_13wpk_199`,error:`_error_13wpk_203`,modalFooter:`_modalFooter_13wpk_212`,notice:`_notice_13wpk_218`}}]]),ay={key:0},oy=g({__name:`ModalRoot`,props:{name:{},keepAlive:{type:Boolean}},setup(e){let t=Vi();return(n,r)=>u(t).modalsById[e.name].open||e.keepAlive?(M(),s(`div`,ay,[E(n.$slots,`default`,{modalName:e.name,active:u(t).isModalActiveById[e.name],open:u(t).modalsById[e.name].open,activeId:u(t).modalsById[e.name].activeId,mode:u(t).modalsById[e.name].mode,data:u(t).modalsById[e.name].data})])):c(``,!0)}}),sy=g({__name:`ModalDrawer`,props:{name:{},beforeClose:{},eventBus:{},direction:{},modal:{type:Boolean,default:!0},width:{},wrapperClosable:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},zIndex:{}},emits:[`enter`],setup(e,{emit:t}){let n=e,r=t,i=Vi(),a=()=>{i.isModalActiveById[n.name]&&r(`enter`)},o=e=>{i.isModalActiveById[n.name]&&e&&e.keyCode===13&&a()},s=async()=>{n.beforeClose&&await n.beforeClose()===!1||i.closeModal(n.name)};return C(()=>{window.addEventListener(`keydown`,o),n.eventBus?.on(`close`,s);let e=document.activeElement;e&&e.blur()}),f(()=>{n.eventBus?.off(`close`,s),window.removeEventListener(`keydown`,o)}),(t,n)=>(M(),y(u(Nd),{direction:e.direction,"model-value":u(i).modalsById[e.name]?.open??!1,size:e.width,"before-close":s,modal:e.modal,"wrapper-closable":e.wrapperClosable,"close-on-click-modal":e.closeOnClickModal,"z-index":e.zIndex,"show-close":e.showClose},{header:k(()=>[E(t.$slots,`header`)]),default:k(()=>[W(`span`,{onKeydown:n[0]||=F(()=>{},[`stop`])},[E(t.$slots,`content`)],32)]),_:3},8,[`direction`,`model-value`,`size`,`modal`,`wrapper-closable`,`close-on-click-modal`,`z-index`,`show-close`]))}}),cy=X(g({__name:`NpsSurvey`,props:{isActive:{type:Boolean}},setup(e){let t=e,n=Ws(),r=K(),i=ha(),l=zn(),{APP_Z_INDEXES:f}=Hr(),p=r.baseText(`prompts.npsSurvey.recommendationQuestion`),h=r.baseText(`prompts.npsSurvey.greatFeedbackTitle`),g=r.baseText(`prompts.npsSurvey.defaultFeedbackTitle`),_=r.baseText(`prompts.npsSurvey.feedbackQuestionTitle`),v=r.baseText(`prompts.npsSurvey.veryLikely`),b=r.baseText(`prompts.npsSurvey.notLikely`),x=r.baseText(`prompts.npsSurvey.send`),S=d({value:``,feedback:``}),C=d(!0),E=d(!1),D=et(),O=a(()=>E.value?_:S?.value?.value===``?p:Number(S.value.value)>7?h:g);async function A(){S.value.value===``&&(l.track(`User responded value survey score`,{instance_id:n.instanceId,nps:``}),await cn().ignoreNpsSurvey()),S.value.value!==``&&S.value.feedback.trim()===``&&l.track(`User responded value survey feedback`,{instance_id:n.instanceId,feedback:``,nps:S.value.value})}async function j(e){S.value.value=e,C.value=!1,E.value=!0,l.track(`User responded value survey score`,{instance_id:n.instanceId,nps:S.value.value}),await cn().respondNpsSurvey()}function N(e){S.value.feedback=e}async function P(){S.value.feedback.trim()!==``&&(l.track(`User responded value survey feedback`,{instance_id:n.instanceId,nps:S.value.value,feedback:S.value.feedback}),i.showMessage({title:r.baseText(`prompts.npsSurvey.thanks`),message:Number(S.value.value)>=8?r.baseText(`prompts.npsSurvey.reviewUs`):``,type:`success`,duration:15e3}),setTimeout(()=>{S.value.value=``,S.value.feedback=``,C.value=!0,E.value=!1},1e3),D.emit(`close`))}return T(()=>t.isActive,e=>{e&&l.track(`User shown value survey`,{instance_id:n.instanceId})}),(e,t)=>(M(),y(sy,{name:u(Os),"event-bus":u(D),"before-close":A,modal:!0,"wrapper-closable":!1,direction:`btt`,width:`auto`,class:U([`nps-survey`,e.$style.npsSurvey]),"close-on-click-modal":!1,"z-index":u(f).NPS_SURVEY_MODAL,"data-test-id":`nps-survey-modal`},{header:k(()=>[W(`div`,{class:U(e.$style.title)},[m(u(Pt),{tag:`h2`,size:`medium`,color:`text-xlight`},{default:k(()=>[R(o(O.value),1)]),_:1})],2)]),content:k(()=>[W(`section`,{class:U(e.$style.content)},[C.value?(M(),s(`div`,{key:0,class:U(e.$style.wrapper)},[W(`div`,{class:U(e.$style.buttons),"data-test-id":`nps-survey-ratings`},[(M(),s(w,null,L(11,t=>W(`div`,{key:t-1,class:U(e.$style.container)},[m(u(q),{variant:`subtle`,iconOnly:``,label:(t-1).toString(),onClick:e=>j((t-1).toString())},null,8,[`label`,`onClick`])],2)),64))],2),W(`div`,{class:U(e.$style.text)},[m(u(Y),{size:`small`,color:`text-xlight`},{default:k(()=>[R(o(u(b)),1)]),_:1}),m(u(Y),{size:`small`,color:`text-xlight`},{default:k(()=>[R(o(u(v)),1)]),_:1})],2)],2)):E.value?(M(),s(`div`,{key:1,class:U(e.$style.feedback)},[W(`div`,{class:U(e.$style.input),"data-test-id":`nps-survey-feedback`},[m(u(mt),{modelValue:S.value.feedback,"onUpdate:modelValue":[t[0]||=e=>S.value.feedback=e,N],type:`textarea`,rows:2,class:U(e.$style.feedbackInput)},null,8,[`modelValue`,`class`])],2),W(`div`,{class:U(e.$style.button),"data-test-id":`nps-survey-feedback-button`},[m(u(q),{label:u(x),float:`right`,disabled:!S.value.feedback.trim(),onClick:P},null,8,[`label`,`disabled`])],2)],2)):c(``,!0)],2)]),_:1},8,[`name`,`event-bus`,`class`,`z-index`]))}}),[[`__cssModules`,{$style:{title:`_title_1ov97_125`,content:`_content_1ov97_139`,wrapper:`_wrapper_1ov97_150`,text:`_text_1ov97_154`,buttons:`_buttons_1ov97_158`,container:`_container_1ov97_162`,input:`_input_1ov97_183`,button:`_button_1ov97_158`,feedback:`_feedback_1ov97_192`,feedbackInput:`_feedbackInput_1ov97_200`,npsSurvey:`_npsSurvey_1ov97_211`}}]]),ly=`v4`,uy=X(g({__name:`PersonalizationModal`,setup(e){let t=fa(),n=et(),r=ut(),{showError:i}=ha(),o=K(),s=Ws(),c=Ji(),l=pn(),f=Te(),p=jt(),h=Vi(),g=d({}),_=d(!1),v=a(()=>vs(c.currentUser?.globalScopes)),b=a(()=>[{name:$i,properties:{label:o.baseText(`personalizationModal.whatBestDescribesYourCompany`),type:`select`,placeholder:o.baseText(`personalizationModal.select`),options:[{label:o.baseText(`personalizationModal.saas`),value:Ur},{label:o.baseText(`personalizationModal.eCommerce`),value:Yt},{label:o.baseText(`personalizationModal.digitalAgencyOrConsultant`),value:ur},{label:o.baseText(`personalizationModal.systemsIntegrator`),value:dr},{value:sa,label:o.baseText(`personalizationModal.education`)},{label:o.baseText(`personalizationModal.other`),value:_n},{label:o.baseText(`personalizationModal.imNotUsingN8nForWork`),value:Ar}]}},{name:Ai,properties:{type:`multi-select`,label:o.baseText(`personalizationModal.whichIndustriesIsYourCompanyIn`),placeholder:o.baseText(`personalizationModal.select`),options:[{value:mr,label:o.baseText(`personalizationModal.financeOrInsurance`)},{value:sn,label:o.baseText(`personalizationModal.government`)},{value:en,label:o.baseText(`personalizationModal.healthcare`)},{value:Si,label:o.baseText(`personalizationModal.it`)},{value:Ut,label:o.baseText(`personalizationModal.legal`)},{value:`msp`,label:o.baseText(`personalizationModal.managedServiceProvider`)},{value:Gt,label:o.baseText(`personalizationModal.marketing`)},{value:xr,label:o.baseText(`personalizationModal.media`)},{value:yi,label:o.baseText(`personalizationModal.manufacturing`)},{value:Or,label:o.baseText(`personalizationModal.physicalRetailOrServices`)},{value:Pr,label:o.baseText(`personalizationModal.realEstateOrConstruction`)},{value:pa,label:o.baseText(`personalizationModal.security`)},{value:Zt,label:o.baseText(`personalizationModal.telecoms`)},{value:jn,label:o.baseText(`personalizationModal.otherPleaseSpecify`)}]},shouldDisplay(e){return e[$i]===_n}},{name:Tr,properties:{placeholder:o.baseText(`personalizationModal.specifyYourCompanysIndustry`)},shouldDisplay(e){let t=e[$i],n=e[Ai];return t===`other`&&!!n&&n.includes(`other`)}},{name:ui,properties:{type:`select`,label:o.baseText(`personalizationModal.whichRoleBestDescribesYou`),placeholder:o.baseText(`personalizationModal.select`),options:[{value:Ei,label:o.baseText(`personalizationModal.businessOwner`)},{value:ta,label:o.baseText(`personalizationModal.customerSupport`)},{value:Yr,label:o.baseText(`personalizationModal.dataScience`)},{value:ti,label:o.baseText(`personalizationModal.devops`)},{value:`it`,label:o.baseText(`personalizationModal.it`)},{value:Ri,label:o.baseText(`personalizationModal.engineering`)},{value:ra,label:o.baseText(`personalizationModal.salesAndMarketing`)},{value:ga,label:o.baseText(`personalizationModal.security`)},{value:oi,label:o.baseText(`personalizationModal.otherPleaseSpecify`)}]},shouldDisplay(e){return e[$i]!==Ar}},{name:Lr,properties:{placeholder:o.baseText(`personalizationModal.specifyYourRole`)},shouldDisplay(e){let t=e[$i],n=e[ui];return t!==`personal`&&n===`other`}},{name:li,properties:{type:`multi-select`,label:o.baseText(`personalizationModal.whatAreYouLookingToAutomate`),placeholder:o.baseText(`personalizationModal.select`),options:[{value:ei,label:o.baseText(`personalizationModal.cicd`)},{value:Li,label:o.baseText(`personalizationModal.cloudInfrastructureOrchestration`)},{value:Oi,label:o.baseText(`personalizationModal.dataSynching`)},{value:na,label:o.baseText(`personalizationModal.incidentResponse`)},{value:ma,label:o.baseText(`personalizationModal.monitoringAndAlerting`)},{value:Vr,label:o.baseText(`personalizationModal.reporting`)},{value:da,label:o.baseText(`personalizationModal.ticketingSystemsIntegrations`)},{value:vr,label:o.baseText(`personalizationModal.other`)}]},shouldDisplay(e){let t=e[$i],n=e[ui];return t!==`personal`&&[`devops`,`engineering`,`it`].includes(n)}},{name:ai,properties:{placeholder:o.baseText(`personalizationModal.specifyYourAutomationGoal`)},shouldDisplay(e){let t=e[$i],n=e[li],r=e[ui];return t!==`personal`&&[`devops`,`engineering`,`it`].includes(r)&&!!n&&n.includes(`other`)}},{name:wn,properties:{type:`multi-select`,label:o.baseText(`personalizationModal.specifySalesMarketingGoal`),placeholder:o.baseText(`personalizationModal.select`),options:[{label:o.baseText(`personalizationModal.leadGeneration`),value:Ln},{label:o.baseText(`personalizationModal.customerCommunication`),value:er},{label:o.baseText(`personalizationModal.customerActions`),value:Vn},{label:o.baseText(`personalizationModal.adCampaign`),value:Kn},{label:o.baseText(`personalizationModal.reporting`),value:va},{label:o.baseText(`personalizationModal.dataSynching`),value:fn},{label:o.baseText(`personalizationModal.other`),value:sr}]},shouldDisplay(e){let t=e[$i],n=e[ui];return t!==`personal`&&n===`sales-and-marketing`}},{name:Bi,properties:{placeholder:o.baseText(`personalizationModal.specifyOtherSalesAndMarketingGoal`)},shouldDisplay(e){let t=e[$i],n=e[wn],r=e[ui];return t!==`personal`&&r===`sales-and-marketing`&&!!n&&n.includes(`other`)}},{name:rr,properties:{type:`select`,label:o.baseText(`personalizationModal.specifyAutomationBeneficiary`),placeholder:o.baseText(`personalizationModal.select`),options:[{label:o.baseText(`personalizationModal.myself`),value:Yi},{label:o.baseText(`personalizationModal.myTeam`),value:zt},{label:o.baseText(`personalizationModal.otherTeams`),value:Xr}]},shouldDisplay(e){return e[$i]!==Ar}},{name:Wr,properties:{type:`select`,label:o.baseText(`personalizationModal.howBigIsYourCompany`),placeholder:o.baseText(`personalizationModal.select`),options:[{label:o.baseText(`personalizationModal.lessThan20People`),value:`<20`},{label:`20-99 ${o.baseText(`personalizationModal.people`)}`,value:zr},{label:`100-499 ${o.baseText(`personalizationModal.people`)}`,value:mi},{label:`500-999 ${o.baseText(`personalizationModal.people`)}`,value:Ki},{label:`1000+ ${o.baseText(`personalizationModal.people`)}`,value:Hi},{label:o.baseText(`personalizationModal.imNotUsingN8nForWork`),value:wi}]},shouldDisplay(e){return e[$i]!==Ar}},{name:Xi,properties:{type:`select`,label:o.baseText(`personalizationModal.howDidYouHearAboutN8n`),placeholder:o.baseText(`personalizationModal.select`),options:[{label:`Google`,value:Zr},{label:`Twitter`,value:qi},{label:`LinkedIn`,value:ji},{label:`YouTube`,value:Gr},{label:`ChatGPT / LLM`,value:`llm`},{label:o.baseText(`personalizationModal.friendWordOfMouth`),value:Vt},{label:o.baseText(`personalizationModal.podcast`),value:Fi},{label:o.baseText(`personalizationModal.event`),value:ar},{label:o.baseText(`personalizationModal.otherPleaseSpecify`),value:hi}]}},{name:Br,properties:{placeholder:o.baseText(`personalizationModal.specifyReportedSource`)},shouldDisplay(e){return e[Xi]===hi}}]),x=()=>{r.emit(`submit`)},S=()=>{f.name!==$.HOMEPAGE&&p.replace({name:$.HOMEPAGE})},C=()=>{n.emit(`close`),v.value.community.register?h.openModalWithData({name:zi,data:{closeCallback:S,customHeading:void 0}}):S()},w=async e=>{_.value=!0;try{let n={...e,version:ly,personalization_survey_submitted_at:new Date().toISOString(),personalization_survey_n8n_version:s.versionCli};await t.run(`personalizationModal.onSubmit`,n),await c.submitPersonalizationSurvey(n),l.setMetadata(n,`user`)}catch(e){i(e,`Error while submitting results`)}finally{_.value=!1,C()}};return(e,t)=>(M(),y(tc,{name:u(On),title:u(o).baseText(`personalizationModal.customizeN8n`),subtitle:u(o).baseText(`personalizationModal.theseQuestionsHelpUs`),"center-title":!0,"show-close":!1,"event-bus":u(n),"close-on-click-modal":!1,"close-on-press-escape":!1,width:`460px`,"data-test-id":`personalization-form`,onEnter:x},{content:k(()=>[W(`div`,{class:U(e.$style.container)},[m(u(ft),{modelValue:g.value,"onUpdate:modelValue":t[0]||=e=>g.value=e,inputs:b.value,"column-view":!0,"event-bus":u(r),teleported:!0,"tag-size":`small`,onSubmit:w},null,8,[`modelValue`,`inputs`,`event-bus`])],2)]),footer:k(()=>[W(`div`,null,[m(u(q),{loading:_.value,label:u(o).baseText(`personalizationModal.getStarted`),float:`right`,onClick:x},null,8,[`loading`,`label`])])]),_:1},8,[`name`,`title`,`subtitle`,`event-bus`]))}}),[[`__cssModules`,{$style:{container:`_container_4s3tu_125`}}]]),dy={key:0},fy={key:1},py={key:2},my={key:1,class:`pt-s`},hy={href:`#`},gy=g({__name:`ProjectMoveSuccessToastMessage`,props:{routeName:{},resourceType:{},targetProject:{},isShareCredentialsChecked:{type:Boolean},areAllUsedCredentialsShareable:{type:Boolean}},setup(e){let t=e,n=K(),r=a(()=>t.resourceType===pr.Workflow),i=a(()=>t.targetProject.type===Nn.Team),l=a(()=>on(t.targetProject?.name));return(e,a)=>(M(),s(`div`,null,[r.value?(M(),y(u(Y),{key:0,tag:`p`,class:`pt-xs`},{default:k(()=>[t.isShareCredentialsChecked&&t.areAllUsedCredentialsShareable?(M(),s(`span`,dy,o(u(n).baseText(`projects.move.resource.success.message.workflow.withAllCredentials`)),1)):t.isShareCredentialsChecked?(M(),s(`span`,fy,o(u(n).baseText(`projects.move.resource.success.message.workflow.withSomeCredentials`)),1)):(M(),s(`span`,py,o(u(n).baseText(`projects.move.resource.success.message.workflow`)),1))]),_:1})):c(``,!0),i.value?(M(),s(`p`,my,[W(`a`,hy,o(u(n).baseText(`projects.move.resource.success.link`,{interpolate:{targetProjectName:l.value}})),1)])):c(``,!0)]))}}),_y={key:0},vy=X(g({__name:`ProjectMoveResourceModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=Vi(),i=ha(),l=jt(),f=vn(),h=cr(),g=Wi(),_=zn(),v=d(``),b=d(null),x=d(!1),S=d([]),T=d([]),E=d(!1),D=a(()=>T.value.filter(e=>vs(e.scopes).credential.share&&S.value.find(t=>t.id===e.id))),O=a(()=>S.value.reduce((e,t)=>{let n=g.getCredentialById(t.id),r=vs(n?.scopes).credential;return r.share||(r.read?e.push(n):e.push(t)),e},[])),A=a(()=>ie(t.data.resource.homeProject?.name??``)??``),j=a(()=>Ou(`name`,f.availableProjects.filter(e=>e.id!==t.data.resource.homeProject?.id&&(!e.scopes||vs(e.scopes)[t.data.resourceType].create)))),N=a(()=>j.value.filter(e=>e.name?.toLowerCase().includes(v.value.toLowerCase()))),P=a(()=>j.value.find(e=>e.id===b.value)),F=a(()=>B(t.data.resource)),I=a(()=>t.data.resourceType===pr.Workflow),ee=a(()=>on(P.value?.name)),ne=a(()=>Ae(t.data.resource.name,25)),re=a(()=>t.data.resource.homeProject?.type===Nn.Personal&&t.data.resource.homeProject?.id===f.personalProject?.id),z=a(()=>b.value===f.personalProject?.id),B=e=>e.homeProject?.type===Nn.Team,ie=e=>{let{name:t,email:n}=$t(e);return t??n},V=e=>{b.value=e},ae=()=>{r.closeModal(t.modalName)},H=e=>{v.value=e},oe=async()=>{if(!(!P.value||E.value)){E.value=!0;try{await f.moveResourceToProject(t.data.resourceType,t.data.resource.id,P.value.id,void 0,x.value?D.value.map(e=>e.id):void 0),ae(),_.track(`User successfully moved ${t.data.resourceType}`,{[`${t.data.resourceType}_id`]:t.data.resource.id,project_from_type:f.currentProject?.type??f.personalProject?.type}),i.showToast({title:n.baseText(`projects.move.resource.success.title`,{interpolate:{resourceTypeLabel:t.data.resourceTypeLabel,resourceName:ne.value,targetProjectName:ee.value}}),message:p(gy,{routeName:I.value?$.PROJECTS_WORKFLOWS:$.PROJECTS_CREDENTIALS,resourceType:t.data.resourceType,targetProject:P.value,isShareCredentialsChecked:x.value,areAllUsedCredentialsShareable:D.value.length===S.value.length}),onClick:e=>{e?.target instanceof HTMLAnchorElement&&P.value&&(e.preventDefault(),l.push({name:I.value?$.PROJECTS_WORKFLOWS:$.PROJECTS_CREDENTIALS,params:{projectId:P.value.id}}))},type:`success`,duration:8e3}),t.data.eventBus&&t.data.eventBus.emit(`resource-moved`,{resourceId:t.data.resource.id,resourceType:t.data.resourceType,targetProjectId:P.value.id})}catch(e){i.showError(e,n.baseText(`projects.move.resource.error.title`,{interpolate:{resourceTypeLabel:t.data.resourceTypeLabel,resourceName:ne.value}}))}finally{E.value=!1}}};return C(async()=>{if(_.track(`User clicked to move a ${t.data.resourceType}`,{[`${t.data.resourceType}_id`]:t.data.resource.id,project_from_type:f.currentProject?.type??f.personalProject?.type}),await f.getAvailableProjects(),I.value){let[e,n]=await Promise.all([h.fetchWorkflow(t.data.resource.id),g.fetchAllCredentials()]);S.value=e?.usedCredentials??[],T.value=n??[]}}),(e,r)=>(M(),y(tc,{width:`500px`,name:t.modalName,"data-test-id":`project-move-resource-modal`},{header:k(()=>[m(u(Pt),{tag:`h2`,size:`xlarge`,class:`mb-m pr-s`},{default:k(()=>[R(o(u(n).baseText(`projects.move.resource.modal.title`,{interpolate:{resourceTypeLabel:t.data.resourceTypeLabel}})),1)]),_:1}),m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message`,scope:`global`},te({resourceName:k(()=>[W(`strong`,null,o(ne.value),1)]),_:2},[F.value?{name:`inTeamProject`,fn:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message.team`,scope:`global`},{resourceHomeProjectName:k(()=>[W(`strong`,null,o(A.value),1)]),_:1})]),key:`0`}:{name:`inPersonalProject`,fn:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message.personal`,scope:`global`},{resourceHomeProjectName:k(()=>[W(`strong`,null,o(A.value),1)]),_:1})]),key:`1`}]),1024)]),_:1})]),content:k(()=>[j.value.length?(M(),s(`div`,_y,[m(u(ct),{class:`mr-2xs mb-xs`,"model-value":b.value,filterable:!0,"filter-method":H,placeholder:u(n).baseText(`projects.move.resource.modal.selectPlaceholder`),"data-test-id":`project-move-resource-modal-select`,"onUpdate:modelValue":V},{prefix:k(()=>[m(u(J),{icon:`search`})]),default:k(()=>[(M(!0),s(w,null,L(N.value,e=>(M(),y(u(Dt),{key:e.id,value:e.id,label:e.name??``},null,8,[`value`,`label`]))),128))]),_:1},8,[`model-value`,`placeholder`]),m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message.sharingNote`,scope:`global`},{note:k(()=>[W(`strong`,null,o(u(n).baseText(`projects.move.resource.modal.message.note`)),1)]),resourceTypeLabel:k(()=>[R(o(t.data.resourceTypeLabel),1)]),_:1}),t.data.resource.sharedWithProjects?.length??!1?(M(),s(`span`,{key:0,class:U(e.$style.textBlock)},o(u(n).baseText(`projects.move.resource.modal.message.sharingInfo`,{adjustToNumber:t.data.resource.sharedWithProjects?.length,interpolate:{count:t.data.resource.sharedWithProjects?.length??0}})),3)):c(``,!0),D.value.length&&!z.value?(M(),y(u(At),{key:1,modelValue:x.value,"onUpdate:modelValue":r[0]||=e=>x.value=e,class:U(e.$style.textBlock),"data-test-id":`project-move-resource-modal-checkbox-all`},{label:k(()=>[m(u(ge),{keypath:`projects.move.resource.modal.message.usedCredentials`,scope:`global`},{usedCredentials:k(()=>[m(u(He),{placement:`top`},{content:k(()=>[m(j_,{"current-project-id":u(f).currentProjectId,credentials:D.value},null,8,[`current-project-id`,`credentials`])]),default:k(()=>[W(`span`,{class:U(e.$style.tooltipText)},o(u(n).baseText(`projects.move.resource.modal.message.usedCredentials.number`,{adjustToNumber:D.value.length,interpolate:{count:D.value.length}})),3)]),_:1})]),_:1})]),_:1},8,[`modelValue`,`class`])):c(``,!0),O.value.length&&!z.value?(M(),y(u(we),{key:2,theme:`warning`,class:U(e.$style.textBlock)},{default:k(()=>[m(u(ge),{keypath:re.value?`projects.move.resource.modal.message.unAccessibleCredentials.personalSpaceNote`:`projects.move.resource.modal.message.unAccessibleCredentials.note`,scope:`global`},{credentials:k(()=>[m(u(He),{placement:`top`},{content:k(()=>[m(j_,{"current-project-id":u(f).currentProjectId,credentials:O.value},null,8,[`current-project-id`,`credentials`])]),default:k(()=>[W(`span`,{class:U(e.$style.tooltipText)},o(u(n).baseText(`projects.move.resource.modal.message.unAccessibleCredentials.count`,{adjustToNumber:O.value.length,interpolate:{count:O.value.length}})),3)]),_:1})]),_:1},8,[`keypath`])]),_:1},8,[`class`])):c(``,!0)]),_:1})])):(M(),y(u(Y),{key:1},{default:k(()=>[R(o(u(n).baseText(`projects.move.resource.modal.message.noProjects`,{interpolate:{resourceTypeLabel:t.data.resourceTypeLabel}})),1)]),_:1}))]),footer:k(()=>[W(`div`,{class:U(e.$style.buttons)},[m(u(q),{variant:`ghost`,class:`mr-2xs`,disabled:E.value,onClick:ae},{default:k(()=>[R(o(u(n).baseText(`generic.cancel`)),1)]),_:1},8,[`disabled`]),m(u(q),{variant:`solid`,loading:E.value,disabled:!b.value||E.value,"data-test-id":`project-move-resource-modal-button`,onClick:oe},{default:k(()=>[R(o(u(n).baseText(`projects.move.resource.modal.button`,{interpolate:{resourceTypeLabel:t.data.resourceTypeLabel}})),1)]),_:1},8,[`loading`,`disabled`])],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{buttons:`_buttons_7tzrp_125`,textBlock:`_textBlock_7tzrp_130`,tooltipText:`_tooltipText_7tzrp_134`}}]]),yy=t(Ta(),1),by=t(xa(),1);function xy(e,t=`n8n-nodes-base.stickyNote`){return{id:e.id,name:e.id,typeVersion:1,type:t,position:[0,0],credentials:{...e.credentials},parameters:{...e}}}var Sy=X(g({__name:`EventSelection`,props:{destinationId:{default:`defaultDestinationId`},readonly:{type:Boolean,default:!1}},emits:[`input`,`change`],setup(e,{emit:t}){let n=e,r=t,i=K(),l=Hu(),d=a(()=>l.items[n.destinationId]?.destination.anonymizeAuditMessages);function f(){r(`input`)}function p(e,t){l.setSelectedInGroup(n.destinationId,e,t)}function h(e){l.items[n.destinationId].destination.anonymizeAuditMessages=e,r(`change`,{name:`anonymizeAuditMessages`,node:n.destinationId,value:e})}function g(e){return i.baseText(`settings.log-streaming.eventGroup.${e}`)??e}function _(e){let t=`settings.log-streaming.eventGroup.${e}.info`,n=i.baseText(t);if(!(n===t||n===``))return n}return(t,n)=>(M(),s(`div`,null,[(M(!0),s(w,null,L(u(l).items[e.destinationId]?.eventGroups,r=>(M(),s(`div`,{key:r.name,shadow:`never`},[m(u(At),{"model-value":r.selected,indeterminate:r.indeterminate,disabled:e.readonly,"onUpdate:modelValue":e=>{f(),p(r.name,e)}},{label:k(()=>[W(`strong`,null,o(g(r.name)),1),_(r.name)===void 0?c(``,!0):(M(),y(u(He),{key:0,placement:`top`,"content-class":t.$style.tooltipPopper,class:`ml-xs`},{content:k(()=>[R(o(_(r.name)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`,size:`small`,class:`ml-4xs`})]),_:2},1032,[`content-class`]))]),_:2},1032,[`model-value`,`indeterminate`,`disabled`,`onUpdate:modelValue`]),r.name===`n8n.audit`?(M(),y(u(At),{key:0,"model-value":d.value,disabled:e.readonly,"onUpdate:modelValue":n[0]||=e=>{f(),h(e)}},{label:k(()=>[R(o(u(i).baseText(`settings.log-streaming.tab.events.anonymize`))+` `,1),m(u(He),{placement:`top`,"content-class":t.$style.tooltipPopper},{content:k(()=>[R(o(u(i).baseText(`settings.log-streaming.tab.events.anonymize.info`)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`,size:`small`,class:`ml-4xs`})]),_:1},8,[`content-class`])]),_:1},8,[`model-value`,`disabled`])):c(``,!0),W(`ul`,{class:U(t.$style.eventList)},[(M(!0),s(w,null,L(r.children,n=>(M(),s(`li`,{key:n.name,class:U(`${t.$style.eventListItem}`)},[m(u(At),{"model-value":n.selected||r.selected,indeterminate:n.indeterminate,disabled:e.readonly,"onUpdate:modelValue":e=>{f(),p(n.name,e)}},{label:k(()=>[R(o(n.label)+` `,1),m(u(He),{placement:`top`,"content-class":t.$style.tooltipPopper},{content:k(()=>[R(o(n.name),1)]),_:2},1032,[`content-class`])]),_:2},1032,[`model-value`,`indeterminate`,`disabled`,`onUpdate:modelValue`])],2))),128))],2)]))),128))]))}}),[[`__cssModules`,{$style:{eventListCard:`_eventListCard_194hy_125`,eventList:`_eventList_194hy_125`,eventListItem:`_eventListItem_194hy_137`,eventListItemDisabled:`_eventListItemDisabled_194hy_145`,listItem:`_listItem_194hy_152`}}]]);const Cy={displayName:`Circuit Breaker Options`,name:`circuitBreaker`,type:`collection`,placeholder:`Add Circuit Breaker Option`,description:`A circuit breaker protects services from cascading failures by monitoring request failures and temporarily blocking requests when failure rates are high. This gives failing services time to recover without being overwhelmed by traffic.`,default:{},options:[{displayName:`Max Failures`,name:`maxFailures`,type:`number`,typeOptions:{minValue:1},default:5,description:`After this many errors within the failure window n8n stops sending requests to prevent overloading the external service thats not working properly.`},{displayName:`Failure Window`,name:`failureWindow`,type:`number`,typeOptions:{minValue:100},default:Rs,description:`Time window in milliseconds for counting failures (sliding window). Only failures within this window are counted toward the threshold. Older failures expire naturally.`}]},wy=[{displayName:`Method`,name:`method`,noDataExpression:!0,type:`options`,options:[{name:`GET`,value:`GET`},{name:`POST`,value:`POST`},{name:`PUT`,value:`PUT`}],default:`POST`,description:`The request method to use`},{displayName:`URL`,name:`url`,type:`string`,noDataExpression:!0,default:``,placeholder:`http://example.com/index.html`,description:`The URL to make the request to`},{displayName:`Generic Auth Type (OAuth not supported yet)`,name:`genericAuthType`,type:`credentialsSelect`,default:``,credentialTypes:[`has:genericAuth`],displayOptions:{show:{authentication:[`genericCredentialType`]}}},{displayName:`Add Query Parameters`,name:`sendQuery`,type:`boolean`,default:!1,noDataExpression:!0,description:`Whether the request has query params or not`},{displayName:`Specify Query Parameters`,name:`specifyQuery`,type:`options`,displayOptions:{show:{sendQuery:[!0]}},options:[{name:`Using Fields Below`,value:`keypair`},{name:`Using JSON`,value:`json`}],default:`keypair`},{displayName:`Add Query Parameters`,name:`queryParameters`,type:`fixedCollection`,displayOptions:{show:{sendQuery:[!0],specifyQuery:[`keypair`]}},typeOptions:{multipleValues:!0},placeholder:`Add Parameter`,default:{parameters:[{name:``,value:``}]},options:[{name:`parameters`,displayName:`Parameter`,values:[{displayName:`Name`,name:`name`,type:`string`,default:``},{displayName:`Value`,name:`value`,type:`string`,default:``}]}]},{displayName:`JSON`,name:`jsonQuery`,type:`json`,displayOptions:{show:{sendQuery:[!0],specifyQuery:[`json`]}},default:``},{displayName:`Add Headers`,name:`sendHeaders`,type:`boolean`,default:!1,noDataExpression:!0,description:`Whether the request has headers or not`},{displayName:`Specify Headers`,name:`specifyHeaders`,type:`options`,displayOptions:{show:{sendHeaders:[!0]}},options:[{name:`Using Fields Below`,value:`keypair`},{name:`Using JSON`,value:`json`}],default:`keypair`},{displayName:`Header Parameters`,name:`headerParameters`,type:`fixedCollection`,displayOptions:{show:{sendHeaders:[!0],specifyHeaders:[`keypair`]}},typeOptions:{multipleValues:!0},placeholder:`Add Parameter`,default:{parameters:[{name:``,value:``}]},options:[{name:`parameters`,displayName:`Parameter`,values:[{displayName:`Name`,name:`name`,type:`string`,default:``},{displayName:`Value`,name:`value`,type:`string`,default:``}]}]},{displayName:`JSON`,name:`jsonHeaders`,type:`json`,displayOptions:{show:{sendHeaders:[!0],specifyHeaders:[`json`]}},default:``},{displayName:`Options`,name:`options`,type:`collection`,placeholder:`Add Option`,default:{},options:[{displayName:`Ignore SSL Issues (Insecure)`,name:`allowUnauthorizedCerts`,type:`boolean`,noDataExpression:!0,default:!1,description:`Whether to ignore SSL certificate validation`},{displayName:`Array Format in Query Parameters`,name:`queryParameterArrays`,type:`options`,displayOptions:{show:{"/sendQuery":[!0]}},options:[{name:`No Brackets`,value:`repeat`,description:`e.g. foo=bar&foo=qux`},{name:`Brackets Only`,value:`brackets`,description:`e.g. foo[]=bar&foo[]=qux`},{name:`Brackets with Indices`,value:`indices`,description:`e.g. foo[0]=bar&foo[1]=qux`}],default:`brackets`},{displayName:`Redirects`,name:`redirect`,placeholder:`Add Redirect`,type:`fixedCollection`,typeOptions:{multipleValues:!1},default:{redirect:{}},options:[{displayName:`Redirect`,name:`redirect`,values:[{displayName:`Follow Redirects`,name:`followRedirects`,type:`boolean`,default:!1,noDataExpression:!0,description:`Whether to follow all redirects`},{displayName:`Max Redirects`,name:`maxRedirects`,type:`number`,displayOptions:{show:{followRedirects:[!0]}},default:21,description:`Max number of redirects to follow`}]}]},{displayName:`Proxy`,name:`proxy`,description:`Add Proxy`,type:`fixedCollection`,typeOptions:{multipleValues:!1},default:{proxy:{}},options:[{displayName:`Proxy`,name:`proxy`,values:[{displayName:`Protocol`,name:`protocol`,type:`options`,default:`https`,options:[{name:`HTTPS`,value:`https`},{name:`HTTP`,value:`http`}]},{displayName:`Host`,name:`host`,type:`string`,default:`127.0.0.1`,description:`Proxy Host (without protocol or port)`},{displayName:`Port`,name:`port`,type:`number`,default:9e3,description:`Proxy Port`}]}]},{displayName:`Timeout`,name:`timeout`,type:`number`,typeOptions:{minValue:1},default:5e3,description:`Time in ms to wait for the server to send response headers (and start the response body) before aborting the request`},{displayName:`Socket`,name:`socket`,description:`Socket options`,type:`collection`,typeOptions:{multipleValues:!1},default:{keepAlive:!0,maxSockets:50,maxFreeSockets:5},options:[{displayName:`Keep Alive`,name:`keepAlive`,type:`boolean`,default:!0,noDataExpression:!0,description:`Whether to keep the sockets available.`},{displayName:`Max Sockets`,name:`maxSockets`,type:`number`,typeOptions:{minValue:1},default:50,description:`Maximum number of sockets per host to keep open at any given time.`},{displayName:`Max Free Sockets`,name:`maxFreeSockets`,type:`number`,typeOptions:{minValue:1},default:5,description:`Maximum number of sockets per host to leave open in a free state.`}]}]},Cy],Ty=[{displayName:`Host`,name:`host`,type:`string`,default:`127.0.0.1`,placeholder:`127.0.0.1`,description:`The IP or host name to make the request to`,noDataExpression:!0},{displayName:`Port`,name:`port`,type:`number`,default:`514`,placeholder:`514`,description:`The port number to make the request to`,noDataExpression:!0},{displayName:`Protocol`,name:`protocol`,type:`options`,options:[{name:`TCP`,value:`tcp`},{name:`UDP`,value:`udp`},{name:`TLS`,value:`tls`}],default:`udp`,description:`The protocol to use for the connection`},{displayName:`TLS CA`,name:`tlsCa`,type:`string`,typeOptions:{rows:4},displayOptions:{show:{protocol:[`tls`]}},required:!0,default:``,description:`The CA certificate to use for TLS connections`},{displayName:`Facility`,name:`facility`,type:`options`,options:[{name:`Kernel`,value:0},{name:`User`,value:1},{name:`System`,value:3},{name:`Audit`,value:13},{name:`Alert`,value:14},{name:`Local0`,value:16},{name:`Local1`,value:17},{name:`Local2`,value:18},{name:`Local3`,value:19},{name:`Local4`,value:20},{name:`Local5`,value:21},{name:`Local6`,value:22},{name:`Local7`,value:23}],default:`16`,description:`Syslog facility parameter`},{displayName:`App Name`,name:`app_name`,type:`string`,default:`n8n`,placeholder:`n8n`,noDataExpression:!0,description:`Syslog app name parameter`},Cy],Ey=[{displayName:`DSN`,name:`dsn`,type:`string`,default:`https://`,noDataExpression:!0,description:`Your Sentry DSN Client Key`},Cy];var Dy=t(vt(),1),Oy={class:`mt-m text-right`},ky={class:``},Ay=X(g({name:`EventDestinationSettingsModal`,__name:`EventDestinationSettingsModal`,props:{modalName:{},destination:{default:()=>Qa(io)},isNew:{type:Boolean,default:!1},eventBus:{}},setup(e){let{modalName:t,destination:n,isNew:r,eventBus:i}=e,l=K(),{confirm:f}=hr(),p=zn(),h=Hu(),g=qt(),_=Gi(),b=Sr(),x=Vi(),S=d(!r),T=d(`settings`),E=d(!r),D=d(!1),O=d(!1),A=d(!1),j=d(``),N=d(`Destination Type`),P=d(Qa(io)),F=d(wy),I=d(Ey),ee=d(Ty),te=d(et()),ne=d(n.label),z=d(!1),B=d(!1),ie=a(()=>{let e=[];for(let t of yo)t!==_s.abstract&&e.push({value:t,label:`settings.log-streaming.${t}`});return e}),V=a(()=>P.value.__type===_s.abstract),ae=a(()=>P.value.__type===_s.webhook),H=a(()=>P.value.__type===_s.syslog),oe=a(()=>P.value.__type===_s.sentry),se=a(()=>xy(P.value)),ce=a(()=>`settings.log-streaming.${P.value.__type}`),le=a(()=>{let e=[{id:`settings`,label:l.baseText(`settings.log-streaming.tab.settings`),position:`top`}];return V.value||e.push({id:`events`,label:l.baseText(`settings.log-streaming.tab.events`),position:`top`}),e}),ue=a(()=>ea([`rbac`],{rbac:{scope:`logStreaming:manage`}})),de=a(()=>{if(V.value)return!1;let e;if(ae.value)e=F.value;else if(oe.value)e=I.value;else if(H.value)e=ee.value;else return!1;return hs(e,se.value,null)===null});function fe(e){let t=e[1];t.name===n.id&&`credentials`in t.properties&&(S.value=!1,P.value.credentials=t.properties.credentials)}C(()=>{G(Object.assign(Qa(io),n)),yr.on(`updateNodeProperties`,fe)}),v(()=>yr.off(`updateNodeProperties`,fe));function me(){S.value=!1,z.value=!1}function he(e){T.value=e}function ge(e){me(),ne.value=e,P.value.label=e}function G(e){_.removeNode(se.value),g.setActiveNodeName(e.id??`thisshouldnothappen`,`other`),_.addNode(xy(e)),P.value=e,h.items[n.id].destination=e}function _e(e){j.value=e}async function ve(){let e;switch(j.value){case _s.syslog:e=Object.assign(Qa(Po),{id:n.id});break;case _s.sentry:e=Object.assign(Qa(Io),{id:n.id});break;case _s.webhook:e=Object.assign(Qa(Lo),{id:n.id});break}e&&(ne.value=e?.label??ne.value,G(e))}function ye(e){S.value=!1,z.value=!1;let t=e.value,n=e.name?.startsWith(`parameters.`)?e.name.split(`.`).slice(1).join(`.`):e.name||``,r=Qa(P.value);if(e.value===void 0&&n.match(/(.*)\[(\d+)\]$/)){let e=n.match(/(.*)\[(\d+)\]$/)?.[1],t=parseInt(n.match(/(.*)\[(\d+)\]$/)?.[2]??`0`,10),i=(0,Dy.default)(r,e);Array.isArray(i)&&(i.splice(t,1),r[e]=i)}else t===void 0?(0,yy.default)(r,n):(0,by.default)(r,n,t);P.value=Qa(r),b.updateNodeProperties({name:se.value.name,properties:{parameters:P.value,position:[0,0]}}),E.value&&h.updateDestination(P.value)}async function be(){B.value=await h.sendTestMessage(P.value),z.value=!0}async function xe(){await f(l.baseText(`settings.log-streaming.destinationDelete.message`,{interpolate:{destinationName:n.label}}),l.baseText(`settings.log-streaming.destinationDelete.headline`),{type:`warning`,confirmButtonText:l.baseText(`settings.log-streaming.destinationDelete.confirmButtonText`),cancelButtonText:l.baseText(`settings.log-streaming.destinationDelete.cancelButtonText`)})===`confirm`&&(we(`remove`,n.id),x.closeModal(Es),x.markStateClean())}function Se(){E.value||(_.removeNode(se.value),P.value.id&&typeof P.value.id!=`object`&&h.removeDestination(P.value.id.toString())),g.unsetActiveNodeName(),we(`closing`,n.id),x.markStateClean()}async function Ce(){if(!(S.value||!n.id||!de.value)&&await h.saveDestination(P.value)){E.value=!0,z.value=!1,S.value=!0,we(`destinationWasSaved`,n.id),x.markStateClean();let e=(P.value.__type&&typeof P.value.__type!=`object`?`${P.value.__type}`:`unknown`).replace(`$MessageEventBusDestination`,``).toLowerCase();p.track(`User updated log streaming destination`,{instance_id:Ws().instanceId,destination_type:e,is_complete:(()=>{if(ae.value)return n.url!==``;if(oe.value)return n.dsn!==``;if(H.value){let e=n;return e.host!==``&&e.port!==void 0&&e.protocol!==``&&e.facility!==void 0&&e.app_name!==``}return!1})(),is_active:n.enabled})}}function we(e,t){i&&i.emit(e,t)}let Te=re(`defNameRef`),{width:Ee}=pe(Te);return(e,r)=>(M(),y(tc,{name:u(t),"event-bus":te.value,"before-close":Se,scrollable:!0,center:!0,loading:A.value,"min-width":V.value?`460px`:`70%`,"max-width":V.value?`460px`:`70%`,"min-height":V.value?`160px`:`650px`,"max-height":V.value?`300px`:`650px`,"data-test-id":`destination-modal`},{header:k(()=>[V.value?(M(),s(`div`,{key:0,class:U(e.$style.headerCreate)},[...r[0]||=[W(`span`,null,`Add new destination`,-1)]],2)):(M(),s(w,{key:1},[W(`div`,{class:U(e.$style.header)},[W(`div`,{ref_key:`defNameRef`,ref:Te,class:U(e.$style.destinationInfo)},[m(u(it),{"max-width":u(Ee)-10,"data-test-id":`subtitle-showing-type`,"model-value":ne.value,readonly:V.value,"onUpdate:modelValue":ge},null,8,[`max-width`,`model-value`,`readonly`]),m(u(Y),{size:`small`,tag:`p`,color:`text-light`},{default:k(()=>[R(o(V.value?`Select type`:u(l).baseText(ce.value)),1)]),_:1})],2),W(`div`,{class:U(e.$style.destinationActions)},[P.value&&E.value&&S.value?(M(),y(u(q),{key:0,variant:`subtle`,icon:z.value?B.value?`check`:`triangle-alert`:void 0,title:z.value&&B.value?`Event sent and returned OK`:`Event returned with error`,label:`Send Test-Event`,disabled:!E.value||!S.value,"data-test-id":`destination-test-button`,onClick:be},null,8,[`icon`,`title`,`disabled`])):c(``,!0),ue.value?(M(),s(w,{key:1},[P.value&&E.value?(M(),y(u(Be),{key:0,variant:`subtle`,title:u(l).baseText(`settings.log-streaming.delete`),icon:`trash-2`,disabled:D.value,loading:O.value,"data-test-id":`destination-delete-button`,onClick:xe},null,8,[`title`,`disabled`,`loading`])):c(``,!0),m(y_,{saved:S.value&&E.value,disabled:S.value||!de.value,"saving-label":u(l).baseText(`settings.log-streaming.saving`),"data-test-id":`destination-save-button`,onClick:Ce},null,8,[`saved`,`disabled`,`saving-label`])],64)):c(``,!0)],2)],2),r[1]||=W(`hr`,null,null,-1)],64))]),content:k(()=>[W(`div`,{class:U(e.$style.container)},[V.value?(M(),y(u(Ct),{key:0,class:U(e.$style.typeSelector),label:u(l).baseText(`settings.log-streaming.selecttype`),"tooltip-text":u(l).baseText(`settings.log-streaming.selecttypehint`),bold:!1,size:`medium`,underline:!1},{default:k(()=>[m(u(ct),{ref:`typeSelectRef`,"model-value":j.value,placeholder:N.value,"data-test-id":`select-destination-type`,name:`name`,"onUpdate:modelValue":_e},{default:k(()=>[(M(!0),s(w,null,L(ie.value||[],e=>(M(),y(u(Dt),{key:e.value,value:e.value,label:u(l).baseText(e.label)},null,8,[`value`,`label`]))),128))]),_:1},8,[`model-value`,`placeholder`]),W(`div`,Oy,[m(u(q),{size:`large`,"data-test-id":`select-destination-button`,disabled:!j.value,onClick:ve},{default:k(()=>[R(o(u(l).baseText(`settings.log-streaming.continue`)),1)]),_:1},8,[`disabled`])])]),_:1},8,[`class`,`label`,`tooltip-text`])):(M(),s(w,{key:1},[W(`div`,{class:U(e.$style.sidebar)},[(M(!0),s(w,null,L(le.value,e=>(M(),y(u(Ot),{key:e.id,item:e,active:T.value===e.id,onClick:()=>he(e.id)},null,8,[`item`,`active`,`onClick`]))),128))],2),T.value===`settings`?(M(),s(`div`,{key:0,ref:`content`,class:U(e.$style.mainContent)},[ae.value?(M(),y(ka,{key:0,parameters:F.value,"hide-delete":!0,"node-values":P.value,"is-read-only":!ue.value,path:``,onValueChanged:ye},null,8,[`parameters`,`node-values`,`is-read-only`])):H.value?(M(),y(ka,{key:1,parameters:ee.value,"hide-delete":!0,"node-values":P.value,"is-read-only":!ue.value,path:``,onValueChanged:ye},null,8,[`parameters`,`node-values`,`is-read-only`])):oe.value?(M(),y(ka,{key:2,parameters:I.value,"hide-delete":!0,"node-values":P.value,"is-read-only":!ue.value,path:``,onValueChanged:ye},null,8,[`parameters`,`node-values`,`is-read-only`])):c(``,!0)],2)):c(``,!0),T.value===`events`?(M(),s(`div`,{key:1,class:U(e.$style.mainContent)},[W(`div`,ky,[m(u(Ct),{class:`mb-m mt-m`,label:u(l).baseText(`settings.log-streaming.tab.events.title`),bold:!0,size:`medium`,underline:!1},null,8,[`label`]),m(Sy,{"destination-id":u(n).id,readonly:!ue.value,onInput:me,onChange:ye},null,8,[`destination-id`,`readonly`])])],2)):c(``,!0)],64))],2)]),_:1},8,[`name`,`event-bus`,`loading`,`min-width`,`max-width`,`min-height`,`max-height`]))}}),[[`__cssModules`,{$style:{labelMargins:`_labelMargins_bgsjl_125`,typeSelector:`_typeSelector_bgsjl_130`,sidebarSwitches:`_sidebarSwitches_bgsjl_136`,tabbar:`_tabbar_bgsjl_144`,mainContent:`_mainContent_bgsjl_148`,sidebar:`_sidebar_bgsjl_136`,cardTitle:`_cardTitle_bgsjl_167`,header:`_header_bgsjl_172`,headerCreate:`_headerCreate_bgsjl_177`,container:`_container_bgsjl_182`,destinationInfo:`_destinationInfo_bgsjl_187`,destinationActions:`_destinationActions_bgsjl_196`}}]]);const jy=()=>{let e=Gi(),t=Sr(),n=Wi(),r=Tn(),{appCredentials:i,credentialOverrides:o,credentialUsages:s,credentialsByKey:c,numFilledCredentials:l,selectedCredentialIdByKey:u,setSelectedCredentialId:d,unsetSelectedCredential:f}=Wu(a(()=>e.allNodes)),p=()=>{u.value={};for(let e of s.value){let t=n.getCredentialsByType(e.credentialType).find(t=>t.name===e.credentialName);t&&(u.value[e.key]=t.id)}};return{appCredentials:i,credentialOverrides:o,credentialUsages:s,credentialsByKey:c,numFilledCredentials:l,selectedCredentialIdByKey:u,setInitialCredentialSelection:p,setCredential:(e,i)=>{d(e,i);let a=c.value.get(e);if(!a)return;let o={id:i,name:n.getCredentialById(i)?.name};a.usedBy.forEach(e=>{t.updateNodeProperties({name:e.name,properties:{credentials:{...e.credentials,[a.credentialType]:o}}}),r.updateNodeCredentialIssuesByName(e.name)}),p()},unsetCredential:e=>{f(e);let n=c.value.get(e);n&&(n.usedBy.forEach(e=>{let i={...e.credentials};delete i[n.credentialType],t.updateNodeProperties({name:e.name,properties:{credentials:i}}),r.updateNodeCredentialIssuesByName(e.name)}),p())}}};var My=X(g({__name:`SetupWorkflowCredentialsModal`,props:{modalName:{},data:{}},setup(e){let t=K(),n=zn(),r=Gi(),i=Vi(),c=e,l=a(()=>c.data?.source===`builder`?t.baseText(`setupCredentialsModal.title.builder`):t.baseText(`setupCredentialsModal.title`)),{appCredentials:d,credentialUsages:f,numFilledCredentials:p,selectedCredentialIdByKey:h,setInitialCredentialSelection:g,setCredential:_,unsetCredential:b}=jy();return C(()=>{g(),n.track(`User opened cred setup`,{source:c.data?.source??`canvas`})}),v(()=>{n.track(`User closed cred setup`,{completed:p.value===f.value.length,creds_filled:p.value,creds_needed:f.value.length,workflow_id:r.workflowId,source:c.data?.source??`canvas`})}),(e,n)=>(M(),y(tc,{width:`700px`,"max-height":`90%`,name:c.modalName},{header:k(()=>[m(u(Pt),{tag:`h2`,size:`xlarge`},{default:k(()=>[R(o(l.value),1)]),_:1})]),content:k(()=>[W(`div`,{class:U(e.$style.grid)},[W(`div`,{class:U(e.$style.notice),"data-test-id":`info-callout`},[m(Uu,{"app-credentials":u(d),source:c.data?.source},null,8,[`app-credentials`,`source`])],2),W(`div`,null,[W(`ol`,{class:U(e.$style.appCredentialsContainer)},[(M(!0),s(w,null,L(u(f),(t,r)=>(M(),y(Gu,{key:t.key,class:U(e.$style.appCredential),order:r+1,credentials:t,"selected-credential-id":u(h)[t.key],source:c.data?.source,onCredentialSelected:n[0]||=e=>u(_)(e.credentialUsageKey,e.credentialId),onCredentialDeselected:n[1]||=e=>u(b)(e.credentialUsageKey)},null,8,[`class`,`order`,`credentials`,`selected-credential-id`,`source`]))),128))],2)])],2)]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{size:`large`,label:u(t).baseText(`templateSetup.continue.button`),disabled:u(p)===0,"data-test-id":`continue-button`,onClick:n[2]||=e=>u(i).closeModal(c.modalName)},null,8,[`label`,`disabled`])],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{grid:`_grid_ng0wr_125`,notice:`_notice_ng0wr_133`,appCredentialsContainer:`_appCredentialsContainer_ng0wr_137`,appCredential:`_appCredential_ng0wr_137`,footer:`_footer_ng0wr_149`}}]]),Ny=n(((e,t)=>{function n(e,t,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}t.exports=n})),Py=n(((e,t)=>{var n=Us();function r(e,t,r,i){return n(e,function(e,n,a){t(i,e,r(e),a)}),i}t.exports=r})),Fy=n(((e,t)=>{var n=Ny(),r=Py(),i=is(),a=_e();function o(e,t){return function(o,s){var c=a(o)?n:r,l=t?t():{};return c(o,e,i(s,2),l)}}t.exports=o})),Iy=t(n(((e,t)=>{var n=Ms(),r=Fy(),i=Object.prototype.hasOwnProperty;t.exports=r(function(e,t,r){i.call(e,r)?e[r].push(t):n(e,r,[t])})}))(),1),Ly=K();const Ry=e=>Ly.baseText(`settings.sourceControl.status.${e}`),zy=e=>({[No.created]:`success`,[No.deleted]:`danger`,[No.modified]:`warning`})[e];var By={[No.modified]:2,[No.created]:1,[No.deleted]:3};const Vy=e=>By[e]??0;var Hy={[No.modified]:1,[No.renamed]:2,[No.created]:3,[No.deleted]:4};const Uy=e=>Hy[e]??0;var Wy=e=>{let t={name:$.HOME_VARIABLES,query:{incomplete:`true`}},{href:n}=e.resolve(t);return{title:Ly.baseText(`settings.sourceControl.pull.upToDate.variables.title`),message:p(`a`,{href:n,onClick:n=>{n.preventDefault(),ya.track(`User clicked review variables`),e.push(t)}},Ly.baseText(`settings.sourceControl.pull.upToDate.variables.description`)),type:`info`,duration:0}},Gy=e=>{let t={name:$.CREDENTIALS,query:{setupNeeded:`true`}},{href:n}=e.resolve(t);return{title:Ly.baseText(`settings.sourceControl.pull.upToDate.credentials.title`),message:p(`a`,{href:n,onClick:n=>{n.preventDefault(),ya.track(`User clicked review credentials`),e.push(t)}},Ly.baseText(`settings.sourceControl.pull.upToDate.credentials.description`)),type:`info`,duration:0}},Ky=({credential:e,tags:t,variables:n,datatable:r,workflow:i,folders:a,project:o})=>{let s=[];i?.length&&s.push(Ly.baseText(`generic.workflow`,{adjustToNumber:i.length,interpolate:{count:i.length}})),e?.length&&s.push(Ly.baseText(`generic.credential`,{adjustToNumber:e.length,interpolate:{count:e.length}})),n?.length&&s.push(Ly.baseText(`generic.variable_plural`)),r?.length&&s.push(Ly.baseText(`generic.datatable`,{adjustToNumber:r.length,interpolate:{count:r.length}})),t?.length&&s.push(Ly.baseText(`generic.tag_plural`)),a?.length&&s.push(Ly.baseText(`generic.folders_plural`)),o?.length&&s.push(Ly.baseText(`generic.projects`));let c=(i?.length??0)+(e?.length??0)+(n?.length??0)+(r?.length??0)+(t?.length??0)+(a?.length??0)+(o?.length??0),l=n?.length||t?.length||a?.length||o?.length?Math.max(c,2):c;return[new Intl.ListFormat(Ly.locale,{style:`long`,type:`conjunction`}).format(s),Ly.baseText(`settings.sourceControl.pull.success.description`,{adjustToNumber:l})].join(` `)};const qy=async(e,t,n)=>{if(!e?.length){t.showMessage({title:Ly.baseText(`settings.sourceControl.pull.upToDate.title`),message:Ly.baseText(`settings.sourceControl.pull.upToDate.description`),type:`success`});return}let{credential:r,tags:i,variables:a,datatable:o,workflow:s,folders:c,project:u}=(0,Iy.default)(e,`type`),d=[...a?.length?[Wy(n)]:[],...r?.length?[Gy(n)]:[],{title:Ly.baseText(`settings.sourceControl.pull.success.title`),message:Ky({credential:r,tags:i,variables:a,datatable:o,workflow:s,folders:c,project:u}),type:`success`}];for(let e of d)t.showToast(e),await l()};var Jy=t(Ys(),1),Yy=t(wu(),1),Xy={style:{display:`flex`,"flex-direction":`column`,height:`100%`}},Zy={style:{display:`flex`,flex:`1`,"min-height":`0`}},Qy=[`data-test-id`,`onClick`],$y={style:{flex:`1`}},eb={style:{flex:`1`,overflow:`hidden`}},tb={key:2},nb={key:1,class:`mb-xs`},rb=X(g({__name:`SourceControlPullModal`,props:{data:{}},setup(e){let t=e,n=zn(),r=Xt(),i=ha(),l=K(),f=ca(),p=vn(),h=Te(),g=jt(),_=la(),v=Vi(),b=a(()=>_.settings.enterprise.workflowDiffs),x=d(t.data.status||[]),S=d(!1),T=d(`none`),E=a(()=>{let e=x.value.filter(e=>e.type===Q.workflow).some(e=>e.isLocalPublished&&e.status!==`created`);return[{label:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.off`),description:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.off.description`),value:`none`},{label:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.published`),description:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.published.description`),value:`published`,disabled:!e},{label:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.on`),description:l.baseText(`settings.sourceControl.modals.pull.autoPublish.options.on.description`),value:`all`}]}),D=a(()=>x.value.some(e=>e.type===Q.workflow&&e.status===`modified`)),O=a(()=>x.value.some(e=>e.type===Q.credential&&e.status===`modified`));async function A(){if(!S.value){S.value=!0,r.startLoading(),r.setLoadingText(l.baseText(`settings.sourceControl.loading.checkingForChanges`));try{x.value=await f.getAggregatedStatus({direction:`pull`,preferLocalVersion:!1,verbose:!1})||[],x.value.length===0&&(i.showMessage({title:l.baseText(`settings.sourceControl.pull.upToDate.description`),type:`success`}),le())}catch(e){i.showError(e,`Error`),le()}finally{S.value=!1,r.stopLoading(),r.setLoadingText(l.baseText(`genericHelpers.loading`))}}}ae(()=>{p.getAvailableProjects()});let j=d(Q.workflow),N=a(()=>{let e={};return x.value.forEach(t=>{e[t.type]||(e[t.type]=[]),e[t.type].push(t)}),e}),P=a(()=>N.value[Q.workflow]||[]),F=a(()=>(0,Yy.default)(P.value,[({status:e})=>Vy(e),`updatedAt`],[`asc`,`desc`]).map(e=>({...e,willBeAutoPublished:e.type===Q.workflow&&e.status!==`deleted`&&$o({isNewWorkflow:e.status===`created`,isLocalPublished:e.isLocalPublished??!1,isRemoteArchived:e.isRemoteArchived??!1,autoPublish:T.value})}))),I=a(()=>N.value[Q.credential]||[]),ee=a(()=>(0,Yy.default)(I.value,[({status:e})=>Vy(e),`updatedAt`],[`asc`,`desc`])),te=a(()=>N.value[Q.datatable]||[]),ne=a(()=>(0,Yy.default)(te.value,[({status:e})=>Vy(e),`updatedAt`],[`asc`,`desc`])),re=a(()=>te.value.filter(e=>e.conflict===!0&&e.status===`modified`)),z=a(()=>re.value.length>0),ie=a(()=>z.value?l.baseText(`settings.sourceControl.modals.pull.dataTablesWarning`,{interpolate:{count:re.value.length}}):``),V=a(()=>j.value===Q.workflow?F.value:j.value===Q.credential?ee.value:j.value===Q.datatable?ne.value:[]),H=a(()=>j.value===Q.workflow?l.baseText(`workflows.noResults`):j.value===Q.credential?l.baseText(`credentials.noResults`):j.value===Q.datatable?l.baseText(`dataTables.noResults`):l.baseText(`workflows.noResults`)),oe=a(()=>[{label:`Workflows`,value:Q.workflow,total:N.value[Q.workflow]?.length||0},{label:`Credentials`,value:Q.credential,total:N.value[Q.credential]?.length||0},{label:`Data Tables`,value:Q.datatable,total:N.value[Q.datatable]?.length||0}]),se=a(()=>{let e=[],t=N.value[Q.variables];t&&e.push.apply(e,t);let n=N.value[Q.tags];n&&e.push.apply(e,n);let r=N.value[Q.folders];r&&e.push.apply(e,r);let i=N.value[Q.project];return i&&e.push.apply(e,i),e}),ce=a(()=>{let e=[],t=N.value[Q.variables];t?.length&&e.push(`Variables (${t.length})`);let n=N.value[Q.tags];n?.length&&e.push(`Tags (${n.length})`);let r=N.value[Q.folders];r?.length&&e.push(`Folders (${r.length})`);let i=N.value[Q.project];return i?.length&&e.push(`Projects (${i.length})`),e.join(`, `)});function le(){g.back()}async function ue(){r.startLoading(l.baseText(`settings.sourceControl.loading.checkingForChanges`));let e=F.value.filter(e=>e.willBeAutoPublished);try{let t=await f.pullWorkfolder(!0,T.value);if(await qy(t,i,g),Ku.emit(`pull`),e.length>0){let n=t.filter(t=>t.type===Q.workflow&&e.some(e=>e.id===t.id));n.length>0&&v.openModalWithData({name:$n,data:{workflows:n}})}}catch(e){i.showError(e,`Error`)}finally{r.stopLoading(),le()}}function de(e){let t=new Date().getFullYear().toString();return l.baseText(`settings.sourceControl.lastUpdated`,{interpolate:{date:(0,Jy.default)(e.updatedAt,`d mmm${e.updatedAt?.startsWith(t)?``:`, yyyy`}`),time:(0,Jy.default)(e.updatedAt,`HH:MM`)}})}function fe(e){n.track(`User clicks compare workflows`,{workflow_id:e,context:`source_control_pull`}),g.push({query:{...h.query,diff:e,direction:`pull`}})}let pe=a(()=>N.value[Q.workflow]?.length||N.value[Q.credential]?.length?`min(80vh, 850px)`:`auto`);return C(()=>{(!t.data.status||t.data.status.length===0)&&A()}),(t,n)=>{let r=B(`RouterLink`);return S.value?c(``,!0):(M(),y(tc,{key:0,width:`812px`,"event-bus":e.data.eventBus,name:u(Wn),height:pe.value,"custom-class":t.$style.sourceControlPull,"before-close":le},{header:k(()=>[m(u(Pt),{tag:`h1`,size:`xlarge`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.title`)),1)]),_:1}),W(`div`,{class:U([[t.$style.filtersRow],`mt-xs`])},[m(u(Y),{tag:`div`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.description`))+` `,1),m(u(lt),{to:u(l).baseText(`settings.sourceControl.docs.using.pushPull.url`)},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.description.learnMore`)),1)]),_:1},8,[`to`])]),_:1})],2)]),content:k(()=>[W(`div`,Xy,[W(`div`,{class:U(t.$style.autoPublishSection)},[m(u(Y),{tag:`div`,bold:``,size:`medium`,color:`text-dark`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.autoPublish.title`)),1)]),_:1}),m(u(ct),{modelValue:T.value,"onUpdate:modelValue":n[0]||=e=>T.value=e,size:`medium`,class:U(t.$style.select),"data-test-id":`auto-publish-select`},{default:k(()=>[(M(!0),s(w,null,L(E.value,e=>(M(),y(u(Dt),{key:e.value,value:e.value,label:e.label,disabled:e.disabled},{default:k(()=>[W(`div`,{class:U(t.$style.listOption)},[m(u(Y),{bold:``},{default:k(()=>[R(o(e.label),1)]),_:2},1024),e.description?(M(),y(u(Y),{key:0,size:`small`,color:`text-light`},{default:k(()=>[R(o(e.description),1)]),_:2},1024)):c(``,!0)],2)]),_:2},1032,[`value`,`label`,`disabled`]))),128))]),_:1},8,[`modelValue`,`class`])],2),W(`div`,Zy,[W(`div`,{class:U(t.$style.tabs)},[(M(!0),s(w,null,L(oe.value,e=>(M(),s(`button`,{key:e.value,type:`button`,class:U([t.$style.tab,{[t.$style.tabActive]:j.value===e.value}]),"data-test-id":`source-control-pull-modal-tab-${e.value}`,onClick:t=>j.value=e.value},[W(`div`,null,o(e.label),1),m(u(Y),{tag:`div`,color:`text-light`},{default:k(()=>[R(o(e.total)+` `+o(e.total===1?`item`:`items`),1)]),_:2},1024)],10,Qy))),128))],2),W(`div`,$y,[W(`div`,{class:U([t.$style.table])},[W(`div`,{class:U([t.$style.tableHeader])},[W(`div`,{class:U(t.$style.headerTitle)},[m(u(Y),null,{default:k(()=>[...n[1]||=[R(`Title`,-1)]]),_:1})],2)],2),W(`div`,eb,[V.value.length?c(``,!0):(M(),y(u(Ke),{key:0,class:`p-xs`,bold:!1},{default:k(()=>[R(o(H.value),1)]),_:1})),V.value.length?(M(),y(u(fu),{key:1,class:U([t.$style.scroller]),items:V.value,"min-item-size":57,"item-class":`scrollerItem`},{default:k(({item:e,active:n,index:i})=>[m(u(du),{item:e,active:n,"size-dependencies":[e.name,e.id],"data-index":i},{default:k(()=>[W(`div`,{class:U([t.$style.listItem]),"data-test-id":`pull-modal-item`},[W(`div`,{class:U([t.$style.itemContent])},[m(u(Y),{tag:`div`,bold:``,color:`text-dark`,class:U([t.$style.listItemName])},{default:k(()=>[e.type===u(Q).credential?(M(),y(r,{key:0,target:`_blank`,rel:`noopener noreferrer`,to:{name:u($).CREDENTIALS,params:{credentialId:e.id}}},{default:k(()=>[R(o(e.name),1)]),_:2},1032,[`to`])):e.type===u(Q).workflow?(M(),y(r,{key:1,target:`_blank`,rel:`noopener noreferrer`,to:{name:u($).WORKFLOW,params:{name:e.id}}},{default:k(()=>[R(o(e.name),1)]),_:2},1032,[`to`])):(M(),s(`span`,tb,o(e.name),1))]),_:2},1032,[`class`]),W(`div`,{class:U(t.$style.statusLine)},[e.updatedAt?(M(),y(u(Y),{key:0,color:`text-light`,size:`small`},{default:k(()=>[R(o(de(e)),1)]),_:2},1024)):c(``,!0),e.willBeAutoPublished?(M(),y(u(Y),{key:1,color:`success`,size:`small`,bold:``},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.autoPublishing`)),1)]),_:1})):c(``,!0),e.isRemoteArchived?(M(),y(u(Y),{key:2,color:`warning`,size:`small`,bold:``},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.willBeArchived`)),1)]),_:1})):c(``,!0)],2)],2),W(`span`,{class:U([t.$style.badges])},[m(u(Ce),{theme:u(zy)(e.status),style:{height:`25px`}},{default:k(()=>[R(o(u(Ry)(e.status)),1)]),_:2},1032,[`theme`]),b.value?(M(),s(w,{key:0},[e.type===u(Q).workflow&&e.status===`modified`?(M(),y(u(He),{key:0,content:u(l).baseText(`workflowDiff.compare`),placement:`top`},{default:k(()=>[m(u(Be),{variant:`subtle`,icon:`file-diff`,onClick:t=>fe(e.id)},null,8,[`onClick`])]),_:2},1032,[`content`])):c(``,!0)],64)):c(``,!0)],2)],2)]),_:2},1032,[`item`,`active`,`size-dependencies`,`data-index`])]),_:1},8,[`class`,`items`])):c(``,!0)])],2)])])])]),footer:k(()=>[O.value?(M(),y(u(Xe),{key:0,compact:!1,class:`mt-0`},{default:k(()=>[m(u(Y),{size:`small`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.modifiedCredentialsNotice`)),1)]),_:1})]),_:1})):c(``,!0),se.value.length?(M(),s(`div`,nb,[m(u(Y),{bold:``,size:`medium`},{default:k(()=>[...n[2]||=[R(`Additional changes to be pulled:`,-1)]]),_:1}),m(u(Y),{size:`small`},{default:k(()=>[R(o(ce.value),1)]),_:1})])):c(``,!0),z.value?(M(),y(u(we),{key:2,theme:`warning`,class:`mb-xs`},{default:k(()=>[W(`div`,{class:U(t.$style.warningContent)},[W(`div`,null,o(ie.value),1),W(`ul`,{class:U(t.$style.dataTableList)},[(M(!0),s(w,null,L(re.value,e=>(M(),s(`li`,{key:e.id},o(e.name),1))),128))],2)],2)]),_:1})):c(``,!0),W(`div`,{class:U(t.$style.footer)},[m(u(q),{variant:`subtle`,class:`mr-2xs`,onClick:le},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.pull.buttons.cancel`)),1)]),_:1}),m(u(q),{variant:`solid`,"data-test-id":`force-pull`,onClick:ue},{default:k(()=>[R(o(D.value?u(l).baseText(`settings.sourceControl.modals.pull.buttons.save`):u(l).baseText(`settings.sourceControl.modals.pull.buttons.pull`)),1)]),_:1})],2)]),_:1},8,[`event-bus`,`name`,`height`,`custom-class`]))}}}),[[`__cssModules`,{$style:{sourceControlPull:`_sourceControlPull_1rygv_125`,filtersRow:`_filtersRow_1rygv_132`,filters:`_filters_1rygv_132`,headerTitle:`_headerTitle_1rygv_145`,filtersApplied:`_filtersApplied_1rygv_151`,scroller:`_scroller_1rygv_155`,listItem:`_listItem_1rygv_160`,itemContent:`_itemContent_1rygv_174`,listItemName:`_listItemName_1rygv_179`,badges:`_badges_1rygv_196`,footer:`_footer_1rygv_203`,warningContent:`_warningContent_1rygv_210`,dataTableList:`_dataTableList_1rygv_216`,table:`_table_1rygv_228`,tableHeader:`_tableHeader_1rygv_238`,tabs:`_tabs_1rygv_244`,tab:`_tab_1rygv_228`,tabActive:`_tabActive_1rygv_272`,autoPublishSection:`_autoPublishSection_1rygv_277`,select:`_select_1rygv_285`,statusLine:`_statusLine_1rygv_289`,listOption:`_listOption_1rygv_295`}}]]),ib={style:{display:`flex`,"flex-direction":`column`,height:`100%`}},ab={style:{display:`flex`,flex:`1`,"min-height":`0`}},ob=[`data-test-id`,`onClick`],sb={style:{flex:`1`}},cb=X(g({__name:`SourceControlPullResultModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=Vi(),i=a(()=>t.data.workflows.filter(e=>e.type===Q.workflow&&!e.publishingError)),l=a(()=>t.data.workflows.filter(e=>e.type===Q.workflow&&e.publishingError)),f=d(l.value.length>0?`failed`:`published`),p=a(()=>{let e=[];return l.value.length>0&&e.push({label:n.baseText(`settings.sourceControl.modals.pullResult.tabs.failed`),value:`failed`,total:l.value.length}),e.push({label:n.baseText(`settings.sourceControl.modals.pullResult.tabs.published`),value:`published`,total:i.value.length}),e}),h=a(()=>f.value===`failed`?l.value:i.value);function g(){r.closeModal(t.modalName)}return(t,r)=>{let i=B(`RouterLink`);return M(),y(tc,{name:e.modalName,width:`812px`,height:`min(80vh, 850px)`,"custom-class":t.$style.pullResultModal,onClose:g},{header:k(()=>[m(u(Pt),{tag:`h1`,size:`xlarge`},{default:k(()=>[R(o(u(n).baseText(`settings.sourceControl.modals.pullResult.title`)),1)]),_:1})]),content:k(()=>[W(`div`,ib,[W(`div`,ab,[W(`div`,{class:U(t.$style.tabs)},[(M(!0),s(w,null,L(p.value,e=>(M(),s(`button`,{key:e.value,type:`button`,class:U([t.$style.tab,{[t.$style.tabActive]:f.value===e.value}]),"data-test-id":`pull-result-modal-tab-${e.value}`,onClick:t=>f.value=e.value},[W(`div`,null,o(e.label),1),m(u(Y),{tag:`div`,color:`text-light`},{default:k(()=>[R(o(u(n).baseText(`settings.sourceControl.modals.pullResult.itemCount`,{adjustToNumber:e.total,interpolate:{count:`${e.total}`}})),1)]),_:2},1024)],10,ob))),128))],2),W(`div`,sb,[W(`div`,{class:U([t.$style.table])},[W(`div`,{class:U([t.$style.tableHeader])},[W(`div`,{class:U(t.$style.headerTitle)},[m(u(Y),null,{default:k(()=>[R(o(u(n).baseText(`settings.sourceControl.modals.pullResult.tableHeader.title`)),1)]),_:1})],2)],2),W(`div`,{class:U(t.$style.tableContent)},[h.value.length?c(``,!0):(M(),y(u(Ke),{key:0,class:`p-xs`,bold:!1},{default:k(()=>[R(o(u(n).baseText(`settings.sourceControl.modals.pullResult.noWorkflows`)),1)]),_:1})),h.value.length?(M(),s(`div`,{key:1,class:U(t.$style.scrollContent)},[(M(!0),s(w,null,L(h.value,e=>(M(),s(`div`,{key:e.id,class:U(t.$style.listItem)},[W(`div`,{class:U([t.$style.itemContent])},[m(u(Y),{tag:`div`,bold:``,color:`text-dark`,class:U([t.$style.listItemName])},{default:k(()=>[m(i,{target:`_blank`,rel:`noopener noreferrer`,to:{name:u($).WORKFLOW,params:{name:e.id}}},{default:k(()=>[R(o(e.name),1)]),_:2},1032,[`to`])]),_:2},1032,[`class`]),e.publishingError?(M(),y(u(Y),{key:0,tag:`p`,class:`mt-4xs`,color:`danger`,size:`small`},{default:k(()=>[R(o(e.publishingError),1)]),_:2},1024)):c(``,!0)],2)],2))),128))],2)):c(``,!0)],2)],2)])])])]),footer:k(()=>[W(`div`,{class:U(t.$style.footer)},[m(u(q),{type:`primary`,onClick:g},{default:k(()=>[R(o(u(n).baseText(`settings.sourceControl.modals.pullResult.buttons.close`)),1)]),_:1})],2)]),_:1},8,[`name`,`custom-class`])}}}),[[`__cssModules`,{$style:{pullResultModal:`_pullResultModal_ibmqa_125`,headerTitle:`_headerTitle_ibmqa_132`,scrollContent:`_scrollContent_ibmqa_138`,listItem:`_listItem_ibmqa_144`,itemContent:`_itemContent_ibmqa_157`,listItemName:`_listItemName_ibmqa_162`,footer:`_footer_ibmqa_179`,table:`_table_ibmqa_186`,tableHeader:`_tableHeader_ibmqa_196`,tableContent:`_tableContent_ibmqa_202`,tabs:`_tabs_ibmqa_209`,tab:`_tab_ibmqa_186`,tabActive:`_tabActive_ibmqa_237`}}]]),lb=t(Ys(),1),ub=t(wu(),1),db={key:0,class:`mt-s`},fb={style:{display:`flex`,height:`100%`}},pb=[`data-test-id`,`onClick`],mb={style:{flex:`1`}},hb={style:{flex:`1`,overflow:`hidden`}},gb={key:0},_b=X(g({__name:`SourceControlPushModal`,props:{data:{}},setup(e){let t=e,n=Xt(),r=ha(),l=K(),f=ca(),p=vn(),h=Te(),g=jt(),v=zn(),b=Ji(),x=la(),E=a(()=>x.settings.enterprise.workflowDiffs),D=d(t.data.status??[]),O=d(!1);async function A(){if(!O.value){O.value=!0,n.startLoading(),n.setLoadingText(l.baseText(`settings.sourceControl.loading.checkingForChanges`));try{let e=await f.getAggregatedStatus();if(!e.length){r.showMessage({title:`No changes to commit`,message:`Everything is up to date`,type:`info`}),ke();return}D.value=e,e.forEach(e=>{e.type===`credential`&&he.add(e.id),e.type===`datatable`&&ge.add(e.id)})}catch(e){r.showError(e,l.baseText(`error`)),ke()}finally{n.stopLoading(),n.setLoadingText(l.baseText(`genericHelpers.loading`)),O.value=!1}}}let j=xe(`SOURCE_CONTROL_PROJECT_ADMIN_CALLOUT_DISMISSED`,!1,localStorage);ae(()=>{p.getAvailableProjects()});let N=a(()=>p.availableProjects.filter(e=>!e.role||e.role===`project:admin`)),P=e=>new Intl.ListFormat(l.locale,{style:`long`,type:`conjunction`}).format(e),I=(e,t)=>e.reduce((e,n)=>{let r=p.availableProjects.find(({id:e})=>e===n.owner?.projectId);return n.location===Do.remote&&n.type===Q.workflow&&n.status===No.created?e:n.type===Q.variables?(e.variables.push({...n,project:r}),e):n.type===Q.datatable?(e.datatable.push({...n,project:r}),e):n.type===Q.tags?(e.tags.push({...n,project:r}),e):n.type===Q.folders?(e.folders.push({...n,project:r}),e):(n.type===Q.workflow&&t===n.id&&(e.currentWorkflow={...n,project:r}),n.type===Q.workflow?(e.workflow.push({...n,project:r}),e):n.type===Q.credential?(e.credential.push({...n,project:r}),e):(n.type===Q.project&&e.projects.push({...n,project:r}),e))},{tags:[],variables:[],datatable:[],credential:[],workflow:[],folders:[],projects:[],currentWorkflow:void 0}),ee=a(()=>{let e=[];return z.value.variables.length&&e.push({title:`Variables`,content:`at least one new or modified`}),z.value.tags.length&&e.push({title:`Tags`,content:`at least one new or modified`}),z.value.folders.length&&e.push({title:`Folders`,content:`at least one new or modified`}),z.value.projects.length&&e.push({title:`Projects`,content:`at least one new or modified`}),e}),te=a(()=>z.value.credential.some(e=>he.has(e.id)&&e.status===`modified`)),re=a(()=>[$.WORKFLOW].includes(h.name)&&h.params.name?.toString()||void 0),z=a(()=>I(D.value,re.value)),B=_(new Set),ie=e=>e&&B.add(e.id),V=d({project:null}),H=a(()=>!!le.value||!!Object.values(V.value).filter(Boolean).length),oe=()=>{V.value={project:null},le.value=``},ce=[{label:`New`,value:No.created},{label:`Modified`,value:No.modified},{label:`Deleted`,value:No.deleted}],le=d(``),ue=me(le,250),de=a(()=>Object.values(V.value).reduce((e,t)=>t?e+1:e,0)),fe=a(()=>{let e=ue.value.toLocaleLowerCase();return z.value.workflow.filter(t=>t.name.toLocaleLowerCase().includes(e)?V.value.project?t.project?.id===V.value.project.id:!(V.value.status&&V.value.status!==t.status):!1)}),pe=a(()=>(0,ub.default)(fe.value,[({id:e})=>e===z.value.currentWorkflow?.id,({status:e})=>Uy(e),`updatedAt`],[`desc`,`asc`,`desc`])),he=_(new Set),ge=_(new Set),G=a(()=>{let e=ue.value.toLocaleLowerCase();return z.value.credential.filter(t=>t.name.toLocaleLowerCase().includes(e)?V.value.project?t.project?.id===V.value.project.id:!(V.value.status&&V.value.status!==t.status):!1)}),_e=a(()=>(0,ub.default)(G.value,[({status:e})=>Uy(e),`updatedAt`],[`asc`,`desc`])),ve=a(()=>{let e=ue.value.toLocaleLowerCase();return z.value.datatable.filter(t=>t.name.toLocaleLowerCase().includes(e)?V.value.project?t.project?.id===V.value.project.id:!(V.value.status&&V.value.status!==t.status):!1)}),ye=a(()=>(0,ub.default)(ve.value,[({status:e})=>Uy(e),`updatedAt`],[`asc`,`desc`])),be=d(``),Se=a(()=>be.value.trim()?he.size+ge.size+z.value.tags.length+z.value.variables.length+z.value.folders.length+z.value.projects.length+B.size<=0:!0),Ee=a(()=>!Ue.value.size||i(Ue.value).intersection(new Set(ze.value.map(({id:e})=>e))).size===0?!1:!Ie.value),De=a(()=>B.size+he.size+ge.size);function Oe(){if(Ie.value){let e=i(Ue.value).difference(new Set(ze.value.map(({id:e})=>e)));Ue.value.clear(),e.forEach(e=>Ue.value.add(e))}else ze.value.forEach(e=>Ue.value.add(e.id))}function ke(){g.back()}function Ae(e){let t=new Date().getFullYear().toString();return l.baseText(`settings.sourceControl.lastUpdated`,{interpolate:{date:(0,lb.default)(e.updatedAt,`d mmm${e.updatedAt?.startsWith(t)?``:`, yyyy`}`),time:(0,lb.default)(e.updatedAt,`HH:MM`)}})}async function je(){Se.value||await Ne()}let Me=()=>{let e=[];B.size&&e.push(l.baseText(`generic.workflow`,{adjustToNumber:B.size,interpolate:{count:B.size}})),he.size&&e.push(l.baseText(`generic.credential`,{adjustToNumber:he.size,interpolate:{count:he.size}})),z.value.variables.length&&e.push(l.baseText(`generic.variable_plural`)),ge.size&&e.push(l.baseText(`generic.datatable`,{adjustToNumber:ge.size,interpolate:{count:ge.size}})),z.value.folders.length&&e.push(l.baseText(`generic.folders_plural`)),z.value.tags.length&&e.push(l.baseText(`generic.tag_plural`)),z.value.projects.length&&e.push(l.baseText(`generic.projects`));let t=B.size+he.size+z.value.variables.length+ge.size+z.value.folders.length+z.value.tags.length+z.value.projects.length;return[P(e),l.baseText(`settings.sourceControl.modals.push.success.description`,{adjustToNumber:t})].join(` `)};async function Ne(){let e=z.value.tags.concat(z.value.variables).concat(z.value.datatable.filter(e=>ge.has(e.id))).concat(z.value.credential.filter(e=>he.has(e.id))).concat(z.value.folders).concat(z.value.projects).concat(z.value.workflow.filter(e=>B.has(e.id)));n.startLoading(l.baseText(`settings.sourceControl.loading.push`)),ke();try{await f.pushWorkfolder({force:!0,commitMessage:be.value,fileNames:e}),r.showToast({title:l.baseText(`settings.sourceControl.modals.push.success.title`),message:Me(),type:`success`})}catch(e){r.showError(e,l.baseText(`error`))}finally{n.stopLoading()}}let Pe=a(()=>z.value.workflow.length?`min(80vh, 850px)`:`auto`);T(()=>V.value.status,e=>{v.track(`User filtered by status in commit modal`,{status:e})}),T(me(le,500),e=>{v.track(`User searched workflows in commit modal`,{search:e})});let Fe=d(Q.workflow),Ie=a(()=>{if(!Ue.value.size)return!1;if(Fe.value===Q.workflow){let e=new Set(pe.value.map(({id:e})=>e));return e.size?!e.difference(i(Ue.value)).size:!1}if(Fe.value===Q.credential){let e=new Set(_e.value.map(({id:e})=>e));return e.size?!e.difference(i(Ue.value)).size:!1}if(Fe.value===Q.datatable){let e=new Set(ye.value.map(({id:e})=>e));return e.size?!e.difference(i(Ue.value)).size:!1}return!1});function Le(e){Ue.value.has(e)?Ue.value.delete(e):Ue.value.add(e)}let Re=a(()=>Fe.value===Q.workflow?z.value.workflow:Fe.value===Q.credential?z.value.credential:Fe.value===Q.datatable?z.value.datatable:[]),ze=a(()=>Fe.value===Q.workflow?pe.value:Fe.value===Q.credential?_e.value:Fe.value===Q.datatable?ye.value:[]),Ve=a(()=>Fe.value===Q.workflow?`generic.workflows`:Fe.value===Q.credential?`generic.credentials`:`generic.datatable`),Ue=a(()=>Fe.value===Q.workflow?B:Fe.value===Q.credential?he:Fe.value===Q.datatable?ge:new Set),We=a(()=>[{label:`Workflows`,value:Q.workflow,selected:B.size,total:z.value.workflow.length},{label:`Credentials`,value:Q.credential,selected:he.size,total:z.value.credential.length},{label:`Data Tables`,value:Q.datatable,selected:ge.size,total:z.value.datatable.length}]),Ge=a(()=>Fe.value===Q.workflow?l.baseText(`workflows.noResults`):Fe.value===Q.credential?l.baseText(`credentials.noResults`):Fe.value===Q.datatable?l.baseText(`dataTables.noResults`):l.baseText(`workflows.noResults`));function qe(e){return e===Q.workflow?pr.Workflow:pr.Credential}function Je(e){return{homeProject:e,id:``,name:``,active:!1,activeVersionId:null,createdAt:``,updatedAt:``,isArchived:!1,readOnly:!1,resourceType:`workflow`,sharedWithProjects:[]}}function Ye(e,t){v.track(`User clicks compare workflows`,{workflow_id:e,context:`source_control_push`}),g.push({query:{...h.query,diff:e,workflowStatus:t,direction:`push`}})}return se(()=>{z.value.currentWorkflow&&!B.has(z.value.currentWorkflow.id)&&ie(z.value.currentWorkflow)}),C(async()=>{await A()}),(t,n)=>O.value?c(``,!0):(M(),y(tc,{key:0,width:`812px`,"event-bus":e.data.eventBus,name:u(un),height:Pe.value,"custom-class":t.$style.sourceControlPush,"before-close":ke},{header:k(()=>[m(u(Pt),{tag:`h1`,size:`xlarge`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.title`)),1)]),_:1}),z.value.workflow.length||z.value.credential.length||z.value.datatable.length?(M(),s(`div`,{key:0,class:U([[t.$style.filtersRow],`mt-l`])},[W(`div`,{class:U([t.$style.filters])},[m(u(mt),{modelValue:le.value,"onUpdate:modelValue":n[0]||=e=>le.value=e,"data-test-id":`source-control-push-search`,placeholder:`Filter by title`,clearable:``,style:{width:`234px`}},{prefix:k(()=>[m(u(J),{icon:`search`})]),_:1},8,[`modelValue`]),m(u(Ze),{width:`304px`,"content-class":t.$style[`popover-content`],style:{"align-self":`normal`},"z-index":`2000`},{trigger:k(()=>[m(u(q),{variant:`subtle`,icon:`funnel`,style:{height:`100%`},active:!!de.value,"data-test-id":`source-control-filter-dropdown`},{default:k(()=>[de.value?(M(),y(u(Ce),{key:0,theme:`primary`,class:`mr-4xs`},{default:k(()=>[R(o(de.value),1)]),_:1})):c(``,!0)]),_:1},8,[`active`])]),content:k(()=>[m(u(Ct),{label:u(l).baseText(`workflows.filters.status`),bold:!1,size:`small`,color:`text-base`,class:`mb-3xs`},null,8,[`label`]),m(u(ct),{modelValue:V.value.status,"onUpdate:modelValue":n[1]||=e=>V.value.status=e,"data-test-id":`source-control-status-filter`,clearable:``},{default:k(()=>[(M(),s(w,null,L(ce,e=>m(u(Dt),S({key:e.label,"data-test-id":`source-control-status-filter-option`},{ref_for:!0},e),null,16)),64))]),_:1},8,[`modelValue`]),m(u(Ct),{label:u(l).baseText(`forms.resourceFiltersDropdown.owner`),bold:!1,size:`small`,color:`text-base`,class:`mb-3xs mt-3xs`},null,8,[`label`]),m(Tu,{modelValue:V.value.project,"onUpdate:modelValue":n[2]||=e=>V.value.project=e,"data-test-id":`source-control-push-modal-project-search`,projects:N.value,placeholder:u(l).baseText(`forms.resourceFiltersDropdown.owner.placeholder`),"empty-options-text":u(l).baseText(`projects.sharing.noMatchingProjects`)},null,8,[`modelValue`,`projects`,`placeholder`,`empty-options-text`]),de.value?(M(),s(`div`,db,[m(u(lt),{onClick:oe},{default:k(()=>[R(o(u(l).baseText(`forms.resourceFiltersDropdown.reset`)),1)]),_:1})])):c(``,!0)]),_:1},8,[`content-class`])],2)],2)):c(``,!0),u(b).currentUser&&u(b).currentUser.role?(M(),s(w,{key:1},[u(b).currentUser.role!==u(Ss).Owner&&u(b).currentUser.role!==u(Ss).Admin?(M(),s(w,{key:0},[u(j)?c(``,!0):(M(),y(u(we),{key:0,theme:`secondary`,class:`mt-s`},{trailingContent:k(()=>[m(u(J),{icon:`x`,title:`Dismiss`,size:`medium`,type:`secondary`,onClick:n[3]||=e=>j.value=!0})]),default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.projectAdmin.callout`))+` `,1)]),_:1}))],64)):c(``,!0)],64)):c(``,!0)]),content:k(()=>[W(`div`,fb,[W(`div`,{class:U(t.$style.tabs)},[(M(!0),s(w,null,L(We.value,e=>(M(),s(`button`,{key:e.value,type:`button`,class:U([t.$style.tab,{[t.$style.tabActive]:Fe.value===e.value}]),"data-test-id":`source-control-push-modal-tab-${e.value}`,onClick:t=>Fe.value=e.value},[W(`div`,null,o(e.label),1),m(u(Y),{tag:`div`,color:`text-light`},{default:k(()=>[R(o(e.selected)+` / `+o(e.total)+` selected `,1)]),_:2},1024)],10,pb))),128))],2),W(`div`,mb,[W(`div`,{class:U([t.$style.table])},[W(`div`,{class:U([t.$style.tableHeader])},[m(u(At),{class:U(t.$style.selectAll),indeterminate:Ee.value,"model-value":Ie.value,"data-test-id":`source-control-push-modal-toggle-all`,disabled:ze.value.length===0,"onUpdate:modelValue":Oe},{label:k(()=>[m(u(Y),null,{default:k(()=>[...n[5]||=[R(` Title `,-1)]]),_:1})]),_:1},8,[`class`,`indeterminate`,`model-value`,`disabled`]),H.value?(M(),y(u(Ke),{key:0,class:U([`p-xs`,t.$style.filtersApplied]),bold:!1},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.filter`,{interpolate:{count:`${ze.value.length} / ${Re.value.length}`,entity:u(l).baseText(Ve.value).toLowerCase()}}))+` `,1),m(u(lt),{size:`small`,"data-test-id":`source-control-filters-reset`,onClick:oe},{default:k(()=>[R(o(u(l).baseText(`workflows.filters.active.reset`)),1)]),_:1})]),_:1},8,[`class`])):c(``,!0)],2),W(`div`,hb,[ze.value.length?c(``,!0):(M(),y(u(Ke),{key:0,class:`p-xs`,bold:!1},{default:k(()=>[R(o(Ge.value),1)]),_:1})),ze.value.length?(M(),y(u(fu),{key:1,class:U([t.$style.scroller]),items:ze.value,"min-item-size":57,"item-class":`scrollerItem`},{default:k(({item:e,active:r,index:i})=>[m(u(du),{item:e,active:r,"size-dependencies":[e.name,e.id],"data-index":i,"data-test-id":`push-modal-item`},{default:k(()=>[m(u(At),{class:U([t.$style.listItem]),"data-test-id":`source-control-push-modal-file-checkbox`,"model-value":Ue.value.has(e.id),"onUpdate:modelValue":t=>Le(e.id)},{label:k(()=>[W(`div`,{class:U(t.$style.listItemContent)},[W(`span`,null,[m(u(Y),{tag:`div`,bold:``,color:`text-dark`,class:U([t.$style.listItemName])},{default:k(()=>[R(o(e.name||e.id),1)]),_:2},1032,[`class`]),e.updatedAt?(M(),y(u(Y),{key:0,tag:`p`,class:`mt-0`,color:`text-light`,size:`small`},{default:k(()=>[R(o(Ae(e)),1)]),_:2},1024)):c(``,!0)]),W(`span`,{class:U([t.$style.badges])},[z.value.currentWorkflow&&e.id===z.value.currentWorkflow.id?(M(),y(u(Ce),{key:0,class:`mr-2xs`},{default:k(()=>[...n[6]||=[R(` Current workflow `,-1)]]),_:1})):c(``,!0),e.type===u(Q).workflow||e.type===u(Q).credential||e.type===u(Q).datatable?(M(),s(w,{key:1},[e.project?(M(),y(au,{key:0,"data-test-id":`source-control-push-modal-project-badge`,resource:Je(e.project),"resource-type":qe(e.type),"resource-type-label":u(l).baseText(`generic.${e.type}`).toLowerCase(),"personal-project":u(p).personalProject,"show-badge-border":!1},null,8,[`resource`,`resource-type`,`resource-type-label`,`personal-project`])):c(``,!0)],64)):c(``,!0),m(u(Ce),{theme:u(zy)(e.status),style:{height:`25px`}},{default:k(()=>[R(o(u(Ry)(e.status)),1)]),_:2},1032,[`theme`]),E.value?(M(),s(w,{key:2},[e.type===u(Q).workflow?(M(),y(u(He),{key:0,content:u(l).baseText(`workflowDiff.compare`),placement:`top`},{default:k(()=>[m(u(Be),{variant:`subtle`,"data-test-id":`source-control-workflow-diff-button`,icon:`file-diff`,onClick:t=>Ye(e.id,e.status)},null,8,[`onClick`])]),_:2},1032,[`content`])):c(``,!0)],64)):c(``,!0)],2)],2)]),_:2},1032,[`class`,`model-value`,`onUpdate:modelValue`])]),_:2},1032,[`item`,`active`,`size-dependencies`,`data-index`])]),_:1},8,[`class`,`items`])):c(``,!0)])],2)])])]),footer:k(()=>[ee.value.length||te.value?(M(),y(u(Xe),{key:0,compact:!1,class:`mt-0`,id:`source-control-push-modal-notice`},{default:k(()=>[ee.value.length?(M(),s(w,{key:0},[m(u(Y),{bold:``,size:`medium`},{default:k(()=>[...n[7]||=[R(`Changes to variables, tags, folders and projects `,-1)]]),_:1}),n[8]||=W(`br`,null,null,-1),(M(!0),s(w,null,L(ee.value,({title:e,content:t})=>(M(),s(w,{key:e},[m(u(Y),{bold:``,size:`small`},{default:k(()=>[R(o(e),1)]),_:2},1024),m(u(Y),{size:`small`},{default:k(()=>[R(` : `+o(t)+`. `,1)]),_:2},1024)],64))),128)),te.value?(M(),s(`br`,gb)):c(``,!0)],64)):c(``,!0),te.value?(M(),y(u(Y),{key:1,size:`small`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.modifiedCredentialsNotice`)),1)]),_:1})):c(``,!0)]),_:1})):c(``,!0),m(u(Y),{bold:``,tag:`p`},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.commitMessage`)),1)]),_:1}),W(`div`,{class:U(t.$style.footer)},[m(u(mt),{modelValue:be.value,"onUpdate:modelValue":n[4]||=e=>be.value=e,class:`mr-2xs`,"data-test-id":`source-control-push-modal-commit`,placeholder:u(l).baseText(`settings.sourceControl.modals.push.commitMessage.placeholder`),onKeydown:ne(F(je,[`stop`]),[`enter`])},null,8,[`modelValue`,`placeholder`,`onKeydown`]),m(u(q),{variant:`solid`,"data-test-id":`source-control-push-modal-submit`,disabled:Se.value,size:`large`,onClick:Ne},{default:k(()=>[R(o(u(l).baseText(`settings.sourceControl.modals.push.buttons.save`))+` `+o(De.value?`(${De.value})`:void 0),1)]),_:1},8,[`disabled`])],2)]),_:1},8,[`event-bus`,`name`,`height`,`custom-class`]))}}),[[`__cssModules`,{$style:{filtersRow:`_filtersRow_1q3i6_125`,filters:`_filters_1q3i6_125`,selectAll:`_selectAll_1q3i6_138`,filtersApplied:`_filtersApplied_1q3i6_144`,scroller:`_scroller_1q3i6_148`,listItem:`_listItem_1q3i6_153`,listItemContent:`_listItemContent_1q3i6_164`,listItemName:`_listItemName_1q3i6_170`,badges:`_badges_1q3i6_180`,footer:`_footer_1q3i6_186`,sourceControlPush:`_sourceControlPush_1q3i6_193`,table:`_table_1q3i6_200`,tableHeader:`_tableHeader_1q3i6_210`,tabs:`_tabs_1q3i6_216`,tab:`_tab_1q3i6_200`,tabActive:`_tabActive_1q3i6_244`,"popover-content":`_popover-content_1q3i6_249`}}]]),vb=X(g({__name:`TagsTableHeader`,props:{disabled:{type:Boolean,default:!1},search:{default:``}},emits:[`searchChange`,`createEnable`],setup(e,{emit:t}){let n=K(),r=t,i=d(24),a=()=>{r(`createEnable`)},o=e=>{r(`searchChange`,e)};return(t,r)=>(M(),y(u(Na),{class:`tags-header`},{default:k(()=>[m(u(Z),{span:10},{default:k(()=>[m(u(mt),{placeholder:u(n).baseText(`tagsTableHeader.searchTags`),"model-value":e.search,disabled:e.disabled,maxlength:i.value,clearable:``,"onUpdate:modelValue":o},{prefix:k(()=>[m(u(J),{icon:`search`})]),_:1},8,[`placeholder`,`model-value`,`disabled`,`maxlength`])]),_:1}),m(u(Z),{span:14},{default:k(()=>[m(u(q),{disabled:e.disabled,icon:`plus`,label:u(n).baseText(`tagsTableHeader.addNew`),size:`large`,float:`right`,onClick:a},null,8,[`disabled`,`label`])]),_:1})]),_:1}))}}),[[`__scopeId`,`data-v-02364ed2`]]),yb={key:1},bb=350,xb=100,Sb=X(g({__name:`TagsTable`,props:{rows:{},isLoading:{type:Boolean},newName:{},isSaving:{type:Boolean},usageColumnTitleLocaleKey:{default:`tagsTable.usage`}},emits:[`updateEnable`,`newNameChange`,`deleteEnable`,`cancelOperation`,`applyOperation`],setup(e,{emit:t}){let n=e,r=t,i=K(),a=d(null),l=d(null),f=d(24),p=({row:e})=>e.disable?`disabled`:``,h=({row:e,columnIndex:t})=>t===0&&e.tag&&e.delete?{rowspan:1,colspan:2}:t===1&&e.tag&&e.delete?{rowspan:0,colspan:0}:{rowspan:1,colspan:1},g=e=>{e.tag&&(r(`updateEnable`,e.tag.id),r(`newNameChange`,e.tag.name),S())},_=e=>{e.tag&&(r(`deleteEnable`,e.tag.id),w())},v=()=>{r(`cancelOperation`)},b=()=>{r(`applyOperation`)},x=e=>{r(`newNameChange`,e)},S=()=>{setTimeout(()=>{l.value?.focus&&l.value.focus()},bb)},w=()=>{setTimeout(()=>{let e=l.value;e?.focus&&e.focus()},xb)},E=()=>{let e=a.value?.$refs.bodyWrapper;e&&(e.scrollTop=0),S()};return T(()=>n.rows,e=>{e?.[0]?.create&&E()}),C(()=>{n.rows.length===1&&n.rows[0].create&&S()}),(t,n)=>{let r=oe(`loading`);return ce((M(),y(u(Lt),{ref_key:`table`,ref:a,class:U(t.$style[`tags-table`]),stripe:``,"max-height":`450`,"empty-text":u(i).baseText(`tagsTable.noMatchingTagsExist`),data:e.rows,"span-method":h,"row-class-name":p},{default:k(()=>[m(u(It),{label:u(i).baseText(`tagsTable.name`)},{default:k(r=>[(M(),s(`div`,{key:r.row.id,class:U(t.$style.name),onKeydown:n[0]||=F(()=>{},[`stop`])},[m(z,{name:`fade`,mode:`out-in`},{default:k(()=>[r.row.create||r.row.update?(M(),y(u(mt),{key:0,ref_key:`nameInput`,ref:l,"model-value":e.newName,maxlength:f.value,"onUpdate:modelValue":x},null,8,[`model-value`,`maxlength`])):r.row.delete?(M(),s(`span`,yb,[W(`span`,null,o(u(i).baseText(`tagsTable.areYouSureYouWantToDeleteThisTag`)),1),W(`input`,{ref:`deleteHiddenInput`,class:U(t.$style.hidden)},null,2)])):(M(),s(`span`,{key:2,class:U({[t.$style.disabled]:r.row.disable})},o(r.row.tag.name),3))]),_:2},1024)],34))]),_:1},8,[`label`]),m(u(It),{label:u(i).baseText(e.usageColumnTitleLocaleKey),width:`170`},{default:k(e=>[m(z,{name:`fade`,mode:`out-in`},{default:k(()=>[!e.row.create&&!e.row.delete?(M(),s(`div`,{key:0,class:U({[t.$style.disabled]:e.row.disable})},o(e.row.usage),3)):c(``,!0)]),_:2},1024)]),_:1},8,[`label`]),m(u(It),null,{default:k(n=>[m(z,{name:`fade`,mode:`out-in`},{default:k(()=>[n.row.create?(M(),s(`div`,{key:0,class:U(t.$style.ops)},[m(u(q),{variant:`subtle`,label:u(i).baseText(`tagsTable.cancel`),disabled:e.isSaving,onClick:F(v,[`stop`])},null,8,[`label`,`disabled`]),m(u(q),{label:u(i).baseText(`tagsTable.createTag`),loading:e.isSaving,onClick:F(b,[`stop`])},null,8,[`label`,`loading`])],2)):n.row.update?(M(),s(`div`,{key:1,class:U(t.$style.ops)},[m(u(q),{variant:`subtle`,label:u(i).baseText(`tagsTable.cancel`),disabled:e.isSaving,onClick:F(v,[`stop`])},null,8,[`label`,`disabled`]),m(u(q),{label:u(i).baseText(`tagsTable.saveChanges`),loading:e.isSaving,onClick:F(b,[`stop`])},null,8,[`label`,`loading`])],2)):n.row.delete?(M(),s(`div`,{key:2,class:U(t.$style.ops)},[m(u(q),{variant:`subtle`,label:u(i).baseText(`tagsTable.cancel`),disabled:e.isSaving,onClick:F(v,[`stop`])},null,8,[`label`,`disabled`]),m(u(q),{label:u(i).baseText(`tagsTable.deleteTag`),loading:e.isSaving,onClick:F(b,[`stop`])},null,8,[`label`,`loading`])],2)):n.row.disable?c(``,!0):(M(),s(`div`,{key:3,class:U([t.$style.ops,t.$style.main])},[m(u(Be),{title:u(i).baseText(`tagsTable.editTag`),icon:`pen`,"data-test-id":`edit-tag-button`,onClick:F(e=>g(n.row),[`stop`])},null,8,[`title`,`onClick`]),n.row.canDelete?(M(),y(u(Be),{key:0,title:u(i).baseText(`tagsTable.deleteTag`),icon:`trash-2`,"data-test-id":`delete-tag-button`,onClick:F(e=>_(n.row),[`stop`])},null,8,[`title`,`onClick`])):c(``,!0)],2))]),_:2},1024)]),_:1})]),_:1},8,[`class`,`empty-text`,`data`])),[[r,e.isLoading]])}}}),[[`__cssModules`,{$style:{"tags-table":`_tags-table_1ogen_125`,disabled:`_disabled_1ogen_125`,name:`_name_1ogen_129`,ops:`_ops_1ogen_135`,main:`_main_1ogen_146`,hidden:`_hidden_1ogen_155`}}],[`__scopeId`,`data-v-6f1aecbf`]]),Cb=g({name:`TagsView`,__name:`TagsView`,props:{usageColumnTitleLocaleKey:{default:`tagsTable.usage`},usageLocaleKey:{default:`tagsView.inUse`},tags:{},isLoading:{type:Boolean}},emits:[`update`,`delete`,`create`,`disableCreate`],setup(e,{emit:t}){let n=e,r=t,i=(e,t)=>e.toLowerCase().trim().includes(t.toLowerCase().trim()),o=K(),c=Ir(),l=d(!1),u=d(``),f=d(``),p=d(``),h=d(``),g=d(new Set),_=d(!1),v=a(()=>n.tags.length===0||l.value),y=a(()=>{let e=e=>e&&e>0?o.baseText(n.usageLocaleKey,{adjustToNumber:e}):o.baseText(`tagsView.notBeingUsed`),t=v.value||!!f.value||!!u.value,r=n.tags.filter(e=>g.value.has(e.id)||i(e.name,p.value)).map(n=>({tag:n,usage:e(n.usageCount),disable:t&&n.id!==u.value&&n.id!==f.value,update:t&&n.id===f.value,delete:t&&n.id===u.value,canDelete:c.hasScope(`tag:delete`)}));return v.value?[{create:!0},...r]:r}),b=e=>{h.value=e},x=e=>{g.value.clear(),p.value=e},S=()=>n.isLoading||!!(v.value||f.value||u.value),C=e=>{f.value=e},w=()=>{f.value=``,h.value=``},T=()=>{_.value=!0;let e=h.value.trim();r(`update`,f.value,e,e=>{_.value=!1,e&&(g.value.add(f.value),w())})},E=e=>{u.value=e},D=()=>{u.value=``},O=()=>{_.value=!0,r(`delete`,u.value,e=>{e&&D(),_.value=!1})},k=()=>{l.value=!0,h.value=``},A=()=>{l.value=!1,r(`disableCreate`)},j=()=>{_.value=!0,r(`create`,h.value.trim(),e=>{e&&(g.value.add(e.id),A()),_.value=!1})},N=()=>{_.value||(v.value?j():f.value?T():u.value&&O())},P=()=>{_.value||(v.value?A():f.value?w():u.value&&D())};return(t,n)=>(M(),s(`div`,{onKeyup:[ne(N,[`enter`]),ne(P,[`esc`])]},[m(vb,{search:p.value,disabled:S(),onSearchChange:x,onCreateEnable:k},null,8,[`search`,`disabled`]),m(Sb,{ref:`tagsTable`,rows:y.value,"is-loading":e.isLoading,"is-saving":_.value,"new-name":h.value,"usage-column-title-locale-key":e.usageColumnTitleLocaleKey,"data-test-id":`tags-table`,onNewNameChange:b,onUpdateEnable:C,onDeleteEnable:E,onCancelOperation:P,onApplyOperation:N},null,8,[`rows`,`is-loading`,`is-saving`,`new-name`,`usage-column-title-locale-key`])],32))}}),wb={class:`mb-s`},Tb={class:`description`},Eb=X(g({__name:`NoTagsView`,props:{titleLocaleKey:{default:`noTagsView.readyToOrganizeYourWorkflows`},descriptionLocaleKey:{default:`noTagsView.withWorkflowTagsYouReFree`},createLocaleKey:{default:`noTagsView.createTag`}},setup(e){let t=K();return(n,r)=>(M(),s(`div`,{class:U(n.$style.container)},[m(u(Z),{class:`notags`,span:16},{default:k(()=>[r[1]||=W(`div`,{class:`icon`},``,-1),W(`div`,{class:U(n.$style.content)},[W(`div`,wb,[m(u(Pt),{size:`large`},{default:k(()=>[R(o(u(t).baseText(e.titleLocaleKey)),1)]),_:1})]),W(`div`,Tb,o(u(t).baseText(e.descriptionLocaleKey)),1),m(u(q),{label:u(t).baseText(`${e.createLocaleKey}`),size:`large`,onClick:r[0]||=e=>n.$emit(`enableCreate`)},null,8,[`label`])],2)]),_:1})],2))}}),[[`__cssModules`,{$style:{container:`_container_15m14_125`,content:`_content_15m14_132`}}],[`__scopeId`,`data-v-d999c057`]]),Db=g({__name:`TagsManager`,props:{modalKey:{},usageLocaleKey:{default:`tagsView.inUse`},usageColumnTitleLocaleKey:{default:`tagsTable.usage`},titleLocaleKey:{default:`tagsManager.manageTags`},noTagsTitleLocaleKey:{default:`noTagsView.readyToOrganizeYourWorkflows`},noTagsDescriptionLocaleKey:{default:`noTagsView.withWorkflowTagsYouReFree`},noTagsCreateLocaleKey:{default:`noTagsView.createTag`},tags:{},isLoading:{type:Boolean},onFetchTags:{},onCreateTag:{},onUpdateTag:{},onDeleteTag:{}},emits:[`update:tags`],setup(e,{emit:t}){let n=e,r=t,i=d(n.tags.map(e=>e.id)),o=d(!1),s=et(),c=a(()=>i.value.map(e=>n.tags.find(t=>t.id===e)).filter(e=>!!e)),l=a(()=>c.value.length>0),f=K();C(()=>{n.onFetchTags()});function p(){o.value=!0}function h(){o.value=!1}async function g(e,t){try{if(!e)throw Error(f.baseText(`tagsManager.tagNameCannotBeEmpty`));let a=await n.onCreateTag(e);i.value=[a.id,...i.value],r(`update:tags`,[...n.tags,a]),t(a)}catch(e){t(null,e)}}async function _(e,t,i){let a=n.tags.find(t=>t.id===e);if(!a){i(!1,Error(`Tag not found`));return}let o=a.name;try{if(!t)throw Error(f.baseText(`tagsManager.tagNameCannotBeEmpty`));if(t===o){i(!0);return}let a=await n.onUpdateTag(e,t);r(`update:tags`,n.tags.map(t=>t.id===e?a:t)),i(!0)}catch(e){i(!1,e)}}async function v(e,t){if(!n.tags.find(t=>t.id===e)){t(!1,Error(`Tag not found`));return}try{let a=await n.onDeleteTag(e);if(!a)throw Error(f.baseText(`tagsManager.couldNotDeleteTag`));i.value=i.value.filter(t=>t!==e),r(`update:tags`,n.tags.filter(t=>t.id!==e)),t(a)}catch(e){t(!1,e)}}function b(){n.isLoading||(l.value?s.emit(`close`):p())}return(t,n)=>(M(),y(tc,{title:u(f).baseText(e.titleLocaleKey),name:e.modalKey,"event-bus":u(s),"min-width":`620px`,"min-height":`420px`,onEnter:b},{content:k(()=>[m(u(Na),null,{default:k(()=>[l.value||o.value?(M(),y(Cb,{key:0,"is-loading":e.isLoading,tags:c.value,"usage-locale-key":e.usageLocaleKey,"usage-column-title-locale-key":e.usageColumnTitleLocaleKey,onCreate:g,onUpdate:_,onDelete:v,onDisableCreate:h},null,8,[`is-loading`,`tags`,`usage-locale-key`,`usage-column-title-locale-key`])):(M(),y(Eb,{key:1,"title-locale-key":e.noTagsTitleLocaleKey,"description-locale-key":e.noTagsDescriptionLocaleKey,"create-locale-key":e.noTagsCreateLocaleKey,onEnableCreate:p},null,8,[`title-locale-key`,`description-locale-key`,`create-locale-key`]))]),_:1})]),footer:k(({close:e})=>[m(u(q),{variant:`subtle`,label:u(f).baseText(`tagsManager.done`),style:{"margin-left":`auto`},onClick:e},null,8,[`label`,`onClick`])]),_:1},8,[`title`,`name`,`event-bus`]))}}),Ob=g({__name:`AnnotationTagsManager.ee`,setup(e){let t=K(),{showError:n,showMessage:r}=ha(),i=nn(),o=a(()=>i.allTags),s=a(()=>i.isLoading);async function c(){try{await i.fetchAll({force:!0,withUsageCount:!0})}catch(e){n(e,t.baseText(`tagsManager.showError.onFetch.title`),t.baseText(`tagsManager.showError.onFetch.message`))}}async function l(e){try{return await i.create(e)}catch(r){let i=escape(e);throw n(r,t.baseText(`tagsManager.showError.onCreate.title`),t.baseText(`tagsManager.showError.onCreate.message`,{interpolate:{escapedName:i}})+`:`),r}}async function d(e,a){try{let n=await i.rename({id:e,name:a});return r({title:t.baseText(`tagsManager.showMessage.onUpdate.title`),type:`success`}),n}catch(e){let r=escape(a);throw n(e,t.baseText(`tagsManager.showError.onUpdate.title`),t.baseText(`tagsManager.showError.onUpdate.message`,{interpolate:{escapedName:r}})+`:`),e}}async function f(e){try{let n=await i.deleteTagById(e);if(!n)throw Error(t.baseText(`tagsManager.couldNotDeleteTag`));return r({title:t.baseText(`tagsManager.showMessage.onDelete.title`),type:`success`}),n}catch(r){let a=i.tagsById[e],o=escape(a?.name||``);throw n(r,t.baseText(`tagsManager.showError.onDelete.title`),t.baseText(`tagsManager.showError.onDelete.message`,{interpolate:{escapedName:o}})+`:`),r}}return(e,t)=>(M(),y(Db,{"title-locale-key":`annotationTagsManager.manageTags`,"usage-locale-key":`annotationTagsView.inUse`,"usage-column-title-locale-key":`annotationTagsView.usage`,"no-tags-title-locale-key":`noAnnotationTagsView.title`,"no-tags-description-locale-key":`noAnnotationTagsView.description`,"modal-key":u(kr),tags:o.value,"is-loading":s.value,"on-fetch-tags":c,"on-create-tag":l,"on-update-tag":d,"on-delete-tag":f},null,8,[`modal-key`,`tags`,`is-loading`]))}}),kb=g({__name:`WorkflowTagsManager`,setup(e){let t=K(),{showError:n,showMessage:r}=ha(),i=Qn(),o=a(()=>i.allTags),s=a(()=>i.isLoading);async function c(){try{await i.fetchAll({force:!0,withUsageCount:!0})}catch(e){n(e,t.baseText(`tagsManager.showError.onFetch.title`),t.baseText(`tagsManager.showError.onFetch.message`))}}async function l(e){try{return await i.create(e)}catch(r){let i=escape(e);throw n(r,t.baseText(`tagsManager.showError.onCreate.title`),t.baseText(`tagsManager.showError.onCreate.message`,{interpolate:{escapedName:i}})+`:`),r}}async function d(e,a){try{let n=await i.rename({id:e,name:a});return r({title:t.baseText(`tagsManager.showMessage.onUpdate.title`),type:`success`}),n}catch(e){let r=escape(a);throw n(e,t.baseText(`tagsManager.showError.onUpdate.title`),t.baseText(`tagsManager.showError.onUpdate.message`,{interpolate:{escapedName:r}})+`:`),e}}async function f(e){try{let n=await i.deleteTagById(e);if(!n)throw Error(t.baseText(`tagsManager.couldNotDeleteTag`));return r({title:t.baseText(`tagsManager.showMessage.onDelete.title`),type:`success`}),n}catch(r){let a=i.tagsById[e],o=escape(a?.name||``);throw n(r,t.baseText(`tagsManager.showError.onDelete.title`),t.baseText(`tagsManager.showError.onDelete.message`,{interpolate:{escapedName:o}})+`:`),r}}return(e,t)=>(M(),y(Db,{"modal-key":u(jr),tags:o.value,"is-loading":s.value,"on-fetch-tags":c,"on-create-tag":l,"on-update-tag":d,"on-delete-tag":f},null,8,[`modal-key`,`tags`,`is-loading`]))}}),Ab=t(Ys(),1),jb=[`data-test-id`],Mb=X(g({__name:`WhatsNewModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=d({}),r=$s(),i=K(),f=et(),p=Qs(),h=Vi(),g=Ji(),_=zn(),v=a(()=>p.nextVersions),b=()=>{h.openModal(os)},x=async()=>{_.track(`User clicked on update button`,{source:`whats-new-modal`}),await r.goToVersions()},S=async e=>{await l(()=>{let t=n.value[e];t&&t.scrollIntoView({behavior:`smooth`,block:`start`})})};return f.on(`opened`,()=>{p.closeWhatsNewCallout();for(let e of p.whatsNewArticles)p.isWhatsNewArticleRead(e.id)||p.setWhatsNewArticleRead(e.id);S(t.data.articleId)}),(e,t)=>(M(),y(tc,{"max-width":`860px`,"max-height":`85vh`,"event-bus":u(f),name:u(Ra),center:!0,"show-close":!1},{header:k(()=>[W(`div`,{class:U(e.$style.header)},[W(`div`,{class:U(e.$style.row)},[m(u(J),{icon:`bell`,color:`primary`,size:`large`}),W(`div`,{class:U(e.$style.column)},[m(u(Pt),{size:`xlarge`},{default:k(()=>[R(o(u(p).whatsNew.title),1)]),_:1}),W(`div`,{class:U(e.$style.row)},[m(u(Pt),{size:`medium`,color:`text-light`},{default:k(()=>[R(o(u(Ab.default)(u(p).latestVersion.createdAt,`d mmmm, yyyy`)),1)]),_:1}),u(p).hasVersionUpdates?(M(),s(w,{key:0},[m(u(Y),{size:`medium`,class:U(e.$style.text),color:`text-base`},{default:k(()=>[...t[0]||=[R(``,-1)]]),_:1},8,[`class`]),m(u(lt),{size:`medium`,theme:`primary`,"data-test-id":`whats-new-modal-next-versions-link`,onClick:b},{default:k(()=>[R(o(u(i).baseText(`whatsNew.versionsBehind`,{interpolate:{count:v.value.length>99?`99+`:v.value.length}})),1)]),_:1})],64)):c(``,!0)],2)],2)],2),u(p).hasVersionUpdates?(M(),y(u(He),{key:0,disabled:u(g).canUserUpdateVersion,content:u(i).baseText(`whatsNew.updateNudgeTooltip`),placement:`bottom`},{default:k(()=>[m(u(q),{size:`large`,label:u(i).baseText(`whatsNew.update`),disabled:!u(g).canUserUpdateVersion,"data-test-id":`whats-new-modal-update-button`,onClick:x},null,8,[`label`,`disabled`])]),_:1},8,[`disabled`,`content`])):c(``,!0)],2)]),content:k(()=>[W(`div`,{class:U(e.$style.container)},[u(p).hasSignificantUpdates?(M(),y(u(we),{key:0,class:U(e.$style.callout),theme:`warning`},{default:k(()=>[E(e.$slots,`callout-message`,{},()=>[m(u(Y),{size:`small`},{default:k(()=>[R(o(u(i).baseText(`whatsNew.updateAvailable`,{interpolate:{currentVersion:u(p).currentVersion?.name??`unknown`,latestVersion:u(p).latestVersion?.name,count:v.value.length}}))+` `,1),m(u(lt),{size:`small`,underline:!0,theme:`primary`,to:u(So),target:`_blank`},{default:k(()=>[R(o(u(i).baseText(`whatsNew.updateAvailable.changelogLink`)),1)]),_:1},8,[`to`])]),_:1})])]),_:3},8,[`class`])):c(``,!0),(M(!0),s(w,null,L(u(p).whatsNewArticles,t=>(M(),s(`div`,{ref_for:!0,ref:e=>{e&&(n.value[t.id]=e)},key:t.id,class:U(e.$style.article),"data-test-id":`whats-new-item-${t.id}`},[m(u(Pt),{bold:``,tag:`h2`,size:`xlarge`},{default:k(()=>[R(o(t.title),1)]),_:2},1024),m(u(Qe),{content:t.content,class:U(e.$style.markdown),options:{markdown:{html:!0,linkify:!0,typographer:!0,breaks:!0},tasklists:{enabled:!1},linkAttributes:{attrs:{target:`_blank`,rel:`noopener`}},youtube:{width:`100%`,height:`315`}}},null,8,[`content`,`class`])],10,jb))),128)),m(u(Qe),{content:u(p).whatsNew.footer,class:U(e.$style.markdown),options:{markdown:{html:!0,linkify:!0,typographer:!0,breaks:!0},tasklists:{enabled:!1},linkAttributes:{attrs:{target:`_blank`,rel:`noopener`}},youtube:{width:`100%`,height:`315`}}},null,8,[`content`,`class`])],2)]),_:3},8,[`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{header:`_header_1bhk4_125`,column:`_column_1bhk4_137`,row:`_row_1bhk4_143`,container:`_container_1bhk4_150`,article:`_article_1bhk4_154`,markdown:`_markdown_1bhk4_158`}}]]),Nb={"data-test-id":`conflicting-webhook-path`},Pb=X(g({__name:`WorkflowActivationConflictingWebhookModal`,props:{data:{}},setup(e){let t=et(),n=Vi(),r=Ws(),{data:i}=e,s=a(()=>r.webhookUrl),c=a(()=>{let e=` and activate this one, or `;return i.triggerType===`n8n-nodes-base.formTrigger`?{title:`Form`,callout:`form trigger`,suggestion:e+`adjust the following URL path in either workflow:`}:i.triggerType===`@n8n/n8n-nodes-langchain.chatTrigger`?{title:`Chat`,callout:`chat trigger`,suggestion:e+`insert a new Chat Trigger node in either workflow:`}:i.triggerType===`n8n-nodes-base.webhook`?{title:`Webhook`,callout:`webhook trigger`,suggestion:e+`adjust the following URL path in either workflow:`}:{title:`Trigger`,callout:`trigger`,suggestion:e+`insert a new trigger node of the same type in either workflow:`}}),l=a(()=>r.urlBaseEditor+`workflow/`+i.workflowId),d=async()=>{n.closeModal(as)};return(e,n)=>(M(),y(tc,{width:`540px`,name:u(as),title:`Conflicting ${c.value.title} Path`,"event-bus":u(t),center:!0},{content:k(()=>[m(u(we),{theme:`danger`,"data-test-id":`conflicting-webhook-callout`},{default:k(()=>[R(` A `+o(c.value.callout)+` '`+o(u(i).node)+`' in the workflow '`+o(u(i).workflowName)+`' uses a conflicting URL path, so this workflow cannot be activated `,1)]),_:1}),W(`div`,{class:U(e.$style.container)},[W(`div`,null,[m(u(Y),{color:`text-base`},{default:k(()=>[...n[0]||=[R(` You can deactivate `,-1)]]),_:1}),m(u(lt),{to:l.value,underline:!0},{default:k(()=>[R(o(u(i).workflowName),1)]),_:1},8,[`to`]),n[1]||=R(` `+o(` `)+` `,-1),m(u(Y),{color:`text-base`,"data-test-id":`conflicting-webhook-suggestion`},{default:k(()=>[R(o(c.value.suggestion),1)]),_:1})])],2),W(`div`,Nb,[m(u(Y),{color:`text-light`},{default:k(()=>[R(o(s.value)+`/`,1)]),_:1}),m(u(Y),{color:`text-dark`,bold:``},{default:k(()=>[R(o(u(i).webhookPath),1)]),_:1})])]),footer:k(()=>[m(u(q),{label:`Done`,size:`medium`,float:`right`,"data-test-id":`close-button`,onClick:d})]),_:1},8,[`name`,`title`,`event-bus`]))}}),[[`__cssModules`,{$style:{container:`_container_1lcly_125`}}]]),Fb=`My Sub-workflow`,Ib=X(g({__name:`WorkflowExtractionNameModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=ha(),i=et(),o=Ju(),s=d(Fb),c=d(!1),l=a(()=>s.value?s.value:Fb),f=async()=>{if(c.value)return;c.value=!0;let{selection:e,subGraph:a}=t.data;try{await o.extractNodesIntoSubworkflow(e,a,l.value)}catch(e){r.showError(e,n.baseText(`workflowExtraction.error.failure`))}finally{i.emit(`close`)}},p=d(null);return C(()=>{setTimeout(()=>{p.value?.inputRef?.select(),p.value?.inputRef?.focus()})}),(e,r)=>(M(),y(tc,{"max-width":`540px`,title:u(n).baseText(`workflowExtraction.modal.description`,{adjustToNumber:t.data.subGraph.length}),"event-bus":u(i),name:u(Ja),center:!0,"close-on-click-modal":!1},{content:k(()=>[m(u(tt),{ref_key:`inputRef`,ref:p,modelValue:s.value,"onUpdate:modelValue":r[0]||=e=>s.value=e,name:`key`,label:``,"max-length":`128`,"focus-initially":``,onEnter:f},null,8,[`modelValue`])]),footer:k(({close:t})=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`subtle`,label:u(n).baseText(`generic.cancel`),float:`right`,"data-test-id":`cancel-button`,onClick:t},null,8,[`label`,`onClick`]),m(u(q),{label:u(n).baseText(`generic.confirm`),float:`right`,disabled:!s.value,"data-test-id":`submit-button`,onClick:f},null,8,[`label`,`disabled`])],2)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{row:`_row_5zd7s_125`,container:`_container_5zd7s_129`,description:`_description_5zd7s_133`,footer:`_footer_5zd7s_138`}}]]),Lb=X(g({__name:`WorkflowHistoryVersionRestoreModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=Vi(),i=()=>{r.closeModal(t.modalName)};return(e,r)=>(M(),y(tc,{width:`500px`,name:t.modalName,"before-close":t.data.beforeClose},{header:k(()=>[m(u(Pt),{tag:`h2`,size:`xlarge`},{default:k(()=>[R(o(u(n).baseText(`workflowHistory.action.restore.modal.title`)),1)]),_:1})]),content:k(()=>[W(`div`,null,[m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:`workflowHistory.action.restore.modal.subtitle`,tag:`span`,scope:`global`},{date:k(()=>[W(`strong`,null,o(t.data.formattedCreatedAt),1)]),_:1}),r[0]||=W(`br`,null,null,-1),r[1]||=W(`br`,null,null,-1),t.data.isWorkflowActivated?(M(),y(u(ge),{key:0,keypath:`workflowHistory.action.restore.modal.publishedNote`,tag:`span`,scope:`global`})):c(``,!0)]),_:1})])]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[(M(!0),s(w,null,L(t.data.buttons,(e,t)=>(M(),y(u(q),{key:t,size:`medium`,variant:e.variant,onClick:()=>{e.action(),i()}},{default:k(()=>[R(o(e.text),1)]),_:2},1032,[`variant`,`onClick`]))),128))],2)]),_:1},8,[`name`,`before-close`]))}}),[[`__cssModules`,{$style:{footer:`_footer_1xtox_125`}}]]),Rb=X(g({__name:`WorkflowHistoryVersionUnpublishModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=Vi(),i=d(!1),a=()=>{r.closeModal(t.modalName)},s=()=>{t.data.eventBus.emit(`cancel`),a()},c=()=>{i.value=!0,t.data.eventBus.emit(`unpublish`)};return f(()=>{i.value=!1}),(e,r)=>(M(),y(tc,{width:`500px`,name:t.modalName,"before-close":s},{header:k(()=>[m(u(Pt),{tag:`h2`,size:`xlarge`},{default:k(()=>[R(o(u(n).baseText(`workflowHistory.action.unpublish.modal.title`,{interpolate:{versionName:t.data.versionName||``}})),1)]),_:1})]),content:k(()=>[W(`div`,{class:U(e.$style.content)},[m(u(J),{class:U(e.$style.icon),icon:`triangle-alert`,color:`warning`,size:`xlarge`},null,8,[`class`]),m(u(Y),{size:`medium`},{default:k(()=>[R(o(u(n).baseText(`workflowHistory.action.unpublish.modal.description`,{interpolate:{versionName:t.data.versionName||``}})),1)]),_:1})],2)]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`subtle`,size:`medium`,disabled:i.value,onClick:s},{default:k(()=>[R(o(u(n).baseText(`generic.cancel`)),1)]),_:1},8,[`disabled`]),m(u(q),{variant:`solid`,size:`medium`,loading:i.value,onClick:c},{default:k(()=>[R(o(u(n).baseText(`workflowHistory.action.unpublish.modal.button.unpublish`)),1)]),_:1},8,[`loading`])],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{footer:`_footer_1hiim_125`,content:`_content_1hiim_134`,icon:`_icon_1hiim_141`}}]]),zb=X(g({__name:`WorkflowVersionForm`,props:b({disabled:{type:Boolean},versionNameTestId:{},descriptionTestId:{}},{versionName:{required:!0},versionNameModifiers:{},description:{required:!0},descriptionModifiers:{}}),emits:b([`submit`],[`update:versionName`,`update:description`]),setup(e,{expose:t,emit:n}){let r=P(e,`versionName`),i=P(e,`description`),a=re(`nameInput`),o=K(),c=n,l=()=>{a.value?.select()},d=()=>{c(`submit`)};return t({focusInput:l}),(t,n)=>(M(),s(`div`,{class:U(t.$style.formContainer)},[m(u(Ct),{"input-name":`workflow-version-name`,label:u(o).baseText(`workflows.publishModal.versionNameLabel`),required:!0,class:U(t.$style.inputWrapper)},{default:k(()=>[m(u(mt),{id:`workflow-version-name`,ref:`nameInput`,modelValue:r.value,"onUpdate:modelValue":n[0]||=e=>r.value=e,disabled:e.disabled,size:`large`,maxlength:u(128),"data-test-id":e.versionNameTestId,onKeydown:ne(d,[`enter`])},null,8,[`modelValue`,`disabled`,`maxlength`,`data-test-id`])]),_:1},8,[`label`,`class`]),m(u(Ct),{"input-name":`workflow-version-description`,label:u(o).baseText(`workflows.publishModal.descriptionPlaceholder`)},{default:k(()=>[m(u(mt),{id:`workflow-version-description`,modelValue:i.value,"onUpdate:modelValue":n[1]||=e=>i.value=e,type:`textarea`,rows:4,disabled:e.disabled,size:`large`,maxlength:u(Ao),"data-test-id":e.descriptionTestId},null,8,[`modelValue`,`disabled`,`maxlength`,`data-test-id`])]),_:1},8,[`label`])],2))}}),[[`__cssModules`,{$style:{formContainer:`_formContainer_1ibyw_125`,inputWrapper:`_inputWrapper_1ibyw_131`}}]]),Bb=X(g({__name:`WorkflowVersionFormModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=K(),r=et(),i=Vi(),s=re(`versionForm`),c=d(``),l=d(``),p=a(()=>t.data.submitting??!1);function h(){s.value?.focusInput()}C(()=>{t.data.versionName?c.value=t.data.versionName:t.data.versionId&&(c.value=Xu(t.data.versionId)),t.data.description&&(l.value=t.data.description),r.on(`opened`,h)}),f(()=>{r.off(`opened`,h)});let g=()=>{i.closeModal(t.modalName)},_=()=>{t.data.eventBus.emit(`cancel`),g()},v=()=>{c.value.trim().length!==0&&t.data.eventBus.emit(`submit`,{versionId:t.data.versionId,name:c.value,description:l.value})};return(t,i)=>(M(),y(tc,{width:`500px`,"max-height":`85vh`,name:e.modalName,"event-bus":u(r),center:!0,"before-close":_},{header:k(()=>[m(u(Pt),{size:`xlarge`},{default:k(()=>[R(o(e.data.modalTitle),1)]),_:1})]),content:k(()=>[W(`div`,{class:U(t.$style.content)},[m(zb,{ref_key:`versionForm`,ref:s,"version-name":c.value,"onUpdate:versionName":i[0]||=e=>c.value=e,description:l.value,"onUpdate:description":i[1]||=e=>l.value=e,"version-name-test-id":`${e.modalName}-version-name-input`,"description-test-id":`${e.modalName}-description-input`,onSubmit:v},null,8,[`version-name`,`description`,`version-name-test-id`,`description-test-id`]),W(`div`,{class:U(t.$style.actions)},[m(u(q),{variant:`subtle`,disabled:p.value,label:u(n).baseText(`generic.cancel`),"data-test-id":`${e.modalName}-cancel-button`,onClick:_},null,8,[`disabled`,`label`,`data-test-id`]),m(u(q),{loading:p.value,disabled:c.value.trim().length===0,label:e.data.submitButtonLabel,"data-test-id":`${e.modalName}-submit-button`,onClick:v},null,8,[`loading`,`disabled`,`label`,`data-test-id`])],2)],2)]),_:1},8,[`name`,`event-bus`]))}}),[[`__cssModules`,{$style:{content:`_content_1r5gk_125`,actions:`_actions_1r5gk_131`}}]]),Vb={class:`list-option`},Hb={class:`option-headline`},Ub={class:`option-description`},Wb=[`textContent`],Gb=[`disabled`],Kb={key:1,"data-test-id":`workflow-caller-policy`},qb=[`textContent`],Jb=[`textContent`],Yb=[`textContent`],Xb=[`textContent`],Zb=[`textContent`],Qb=[`textContent`],$b=[`textContent`],ex=[`textContent`],tx={key:2,"data-test-id":`workflow-settings-timeout-form`},nx=[`textContent`],rx={for:`availableInMCP`},ix={for:`timeSavedPerExecution`},ax={class:`ignore-key-press-canvas`},ox=X(g({__name:`WorkflowSettings`,setup(e){let t=Te(),n=K(),r=fa(),i=ha(),h=et(),g=zn(),{isEligibleForMcpAccess:_,trackMcpAccessEnabledForWorkflow:v,mcpTriggerMap:b}=Zu(),{registerCustomAction:x,unregisterCustomAction:S}=qu(),{isEnabled:T}=cu(),E=Ws(),D=la(),O=ca(),A=bu(),j=Gi(),N=cr(),P=Sr(),F=ln(),I=Xl(),ee=pn(),te=d(!0),ne=d([]),re=d([]),z=d([]),B=d([]),ie=d([]),V=d([{key:`v0`,value:n.baseText(`workflowSettings.executionLogic.v0.title`),description:n.baseText(`workflowSettings.executionLogic.v0.description`)},{key:`v1`,value:n.baseText(`workflowSettings.executionLogic.v1.title`),description:n.baseText(`workflowSettings.executionLogic.v1.description`)},{key:`v2`,value:n.baseText(`workflowSettings.executionLogic.v2.title`),description:n.baseText(`workflowSettings.executionLogic.v2.description`)}]),ae=d([]),H=d({}),se=d([]),le=d(null),ue=d(void 0),{resolvers:de,fetchResolvers:fe,openCreateModal:pe,openEditModal:me}=Qu(),he=d(0),ge=d(0),G=d({hours:0,minutes:0,seconds:0}),_e=a(()=>({errorWorkflow:n.baseText(`workflowSettings.helpTexts.errorWorkflow`),timezone:n.baseText(`workflowSettings.helpTexts.timezone`),credentialResolver:n.baseText(`workflowSettings.helpTexts.credentialResolver`),saveDataErrorExecution:n.baseText(`workflowSettings.helpTexts.saveDataErrorExecution`),saveDataSuccessExecution:n.baseText(`workflowSettings.helpTexts.saveDataSuccessExecution`),saveExecutionProgress:n.baseText(`workflowSettings.helpTexts.saveExecutionProgress`),saveManualExecutions:n.baseText(`workflowSettings.helpTexts.saveManualExecutions`),executionTimeoutToggle:n.baseText(`workflowSettings.helpTexts.executionTimeoutToggle`),executionTimeout:n.baseText(`workflowSettings.helpTexts.executionTimeout`),workflowCallerPolicy:n.baseText(`workflowSettings.helpTexts.workflowCallerPolicy`),workflowCallerIds:n.baseText(`workflowSettings.helpTexts.workflowCallerIds`)})),ve=d({timezone:`America/New_York`,saveDataErrorExecution:`all`,saveDataSuccessExecution:`all`,saveExecutionProgress:!1,saveManualExecutions:!1,workflowCallerPolicy:`workflowsFromSameOwner`,availableInMCP:!1}),ye=a(()=>H.value.binaryMode===`combined`?`v2`:H.value.executionOrder||`v0`),be=a(()=>D.isModuleActive(`mcp`)&&D.moduleSettings.mcp?.mcpAccessEnabled),xe=a(()=>O.preferences.branchReadOnly||A.shouldBeReadOnly),Se=a(()=>j.workflowName),Ce=a(()=>j.workflowId),we=a(()=>N.getWorkflowById(Ce.value)),Ee=a(()=>D.isEnterpriseFeatureEnabled[Fo.Sharing]),De=a(()=>{let e=n.baseText(`workflowSettings.callerPolicy.options.workflowsFromSameProject`);return F.getWorkflowOwnerName(`${Ce.value}`,e)}),Oe=a(()=>vs(we.value?.scopes).workflow),ke=a(()=>xe.value||!Oe.value.update||!je.value),Ae=a(()=>je.value?n.baseText(`workflowSettings.availableInMCP.tooltip`):n.baseText(`mcp.workflowNotEligable.description`,{interpolate:{triggers:Object.values(b).join(`, `)}})),je=a(()=>we?.value?.active?_(we.value):!1),Me=a(()=>we?.value?.nodes?we.value.nodes.filter(e=>e.type===`n8n-nodes-base.timeSaved`&&e.disabled!==!0):[]),Ne=a(()=>Me.value.length>0),Pe=a(()=>[{label:n.baseText(`workflowSettings.timeSavedPerExecution.tab.fixed`),value:`fixed`},{label:n.baseText(`workflowSettings.timeSavedPerExecution.tab.dynamic`),value:`dynamic`}]),Fe=a(()=>H.value.binaryMode===`combined`||ee.isVariantEnabled(go.name,go.variant)?V.value:V.value.filter(e=>e.key!==`v2`)),Ie=e=>{H.value.callerIds=/^[a-zA-Z0-9,\s_-]+$/.test(e)?e:e.replace(/[^a-zA-Z0-9,\s_-]/g,``)},Le=()=>{h.emit(`close`),r.run(`workflowSettings.dialogVisibleChanged`,{dialogVisible:!1})},Re=(e,t)=>{let n=t?parseInt(t,10):0;G.value={...G.value,[e]:n}},ze=async()=>{ne.value=[{key:`none`,value:n.baseText(`workflowSettings.callerPolicy.options.none`)},{key:`workflowsFromSameOwner`,value:n.baseText(we.value.homeProject?.type===Nn.Personal?`workflowSettings.callerPolicy.options.workflowsFromPersonalProject`:`workflowSettings.callerPolicy.options.workflowsFromTeamProject`,{interpolate:{projectName:De.value}})},{key:`workflowsFromAList`,value:n.baseText(`workflowSettings.callerPolicy.options.workflowsFromAList`)},{key:`any`,value:n.baseText(`workflowSettings.callerPolicy.options.any`)}]},Ve=async()=>{re.value=[{key:`DEFAULT`,value:n.baseText(`workflowSettings.saveDataErrorExecutionOptions.defaultSave`,{interpolate:{defaultValue:ve.value.saveDataErrorExecution===`all`?n.baseText(`workflowSettings.saveDataErrorExecutionOptions.save`):n.baseText(`workflowSettings.saveDataErrorExecutionOptions.doNotSave`)}})},{key:`all`,value:n.baseText(`workflowSettings.saveDataErrorExecutionOptions.save`)},{key:`none`,value:n.baseText(`workflowSettings.saveDataErrorExecutionOptions.doNotSave`)}]},Ue=async()=>{z.value=[{key:`DEFAULT`,value:n.baseText(`workflowSettings.saveDataSuccessExecutionOptions.defaultSave`,{interpolate:{defaultValue:ve.value.saveDataSuccessExecution===`all`?n.baseText(`workflowSettings.saveDataSuccessExecutionOptions.save`):n.baseText(`workflowSettings.saveDataSuccessExecutionOptions.doNotSave`)}})},{key:`all`,value:n.baseText(`workflowSettings.saveDataSuccessExecutionOptions.save`)},{key:`none`,value:n.baseText(`workflowSettings.saveDataSuccessExecutionOptions.doNotSave`)}]},We=async()=>{B.value=[{key:`DEFAULT`,value:n.baseText(`workflowSettings.saveExecutionProgressOptions.defaultSave`,{interpolate:{defaultValue:ve.value.saveExecutionProgress?n.baseText(`workflowSettings.saveExecutionProgressOptions.save`):n.baseText(`workflowSettings.saveExecutionProgressOptions.doNotSave`)}})},{key:!0,value:n.baseText(`workflowSettings.saveExecutionProgressOptions.save`)},{key:!1,value:n.baseText(`workflowSettings.saveExecutionProgressOptions.doNotSave`)}]},Ge=async()=>{ie.value=[{key:`DEFAULT`,value:n.baseText(`workflowSettings.saveManualOptions.defaultSave`,{interpolate:{defaultValue:ve.value.saveManualExecutions?n.baseText(`workflowSettings.saveManualOptions.save`):n.baseText(`workflowSettings.saveManualOptions.doNotSave`)}})},{key:!0,value:n.baseText(`workflowSettings.saveManualOptions.save`)},{key:!1,value:n.baseText(`workflowSettings.saveManualOptions.doNotSave`)}]},Ke=async()=>{if(ae.value.length!==0)return;let e=await D.getTimezones(),t=e[ve.value.timezone];t===void 0&&(t=n.baseText(`workflowSettings.defaultTimezoneNotValid`)),ae.value.push({key:`DEFAULT`,value:n.baseText(`workflowSettings.defaultTimezone`,{interpolate:{defaultTimezoneValue:t}})});for(let t of Object.keys(e))ae.value.push({key:t,value:e[t]})},qe=async e=>{let t=await N.searchWorkflows({query:e,isArchived:!1,triggerNodeTypes:[`n8n-nodes-base.errorTrigger`]});t.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),t.unshift({id:`DEFAULT`,name:n.baseText(`workflowSettings.noWorkflow`)}),se.value=t},Je=async()=>{le.value?.blur(),await l(),pe({onSave:async e=>{await fe(),H.value.credentialResolverId=e}})},Ye=async()=>{H.value.credentialResolverId&&me(H.value.credentialResolverId,{onSave:fe,onDelete:async e=>{await fe(),H.value.credentialResolverId===e&&(H.value.credentialResolverId=void 0)}})},{debounce:Xe}=Zs(),Ze=Xe(qe,{debounceTime:300,trailing:!0}),Y=e=>{if(e>0){let t=Math.floor(e/3600),n=e%3600;return{hours:t,minutes:Math.floor(n/60),seconds:n%60}}return{hours:0,minutes:0,seconds:0}},Qe=async()=>{let e={settings:H.value},{hours:a,minutes:o,seconds:s}=G.value;if(e.settings.executionTimeout=e.settings.executionTimeout===-1?-1:a*3600+o*60+s,e.settings.executionTimeout===0){i.showError(Error(n.baseText(`workflowSettings.showError.saveSettings1.errorMessage`)),n.baseText(`workflowSettings.showError.saveSettings1.title`),n.baseText(`workflowSettings.showError.saveSettings1.message`)+`:`);return}if(H.value?.maxExecutionTimeout&&e.settings.executionTimeout>H.value?.maxExecutionTimeout){let e=Y(H.value.maxExecutionTimeout);i.showError(Error(n.baseText(`workflowSettings.showError.saveSettings2.errorMessage`,{interpolate:{hours:e.hours.toString(),minutes:e.minutes.toString(),seconds:e.seconds.toString()}})),n.baseText(`workflowSettings.showError.saveSettings2.title`),n.baseText(`workflowSettings.showError.saveSettings2.message`)+`:`);return}delete e.settings.maxExecutionTimeout,te.value=!0,e.versionId=j.workflowVersionId,e.expectedChecksum=j.workflowChecksum;try{await j.updateWorkflow(String(t.params.name),e)}catch(e){i.showError(e,n.baseText(`workflowSettings.showError.saveSettings3.title`)),te.value=!1;return}let c=Object.fromEntries(Object.entries(H.value).filter(([,e])=>e!==`DEFAULT`)),l=Qa(j.workflowSettings);P.setWorkflowSettings(c),te.value=!1,i.showMessage({title:n.baseText(`workflowSettings.showMessage.saveSettings.title`),type:`success`}),Le(),r.run(`workflowSettings.saveSettings`,{oldSettings:l}),g.track(`User updated workflow settings`,{workflow_id:j.workflowId,time_saved:H.value.timeSavedPerExecution??``,error_workflow:H.value.errorWorkflow??``}),be.value&&H.value.availableInMCP&&v(Ce.value),H.value.binaryMode!==ue.value&&i.showMessage({title:n.baseText(`workflowSettings.executionLogic.changed.title`),message:p(`span`,[n.baseText(`workflowSettings.executionLogic.changed.description`),p(lt,{to:`https://docs.n8n.io/data/binary-data/`,size:`small`,newWindow:!0},()=>n.baseText(`generic.learnMore`))]),type:`warning`,duration:0})},tt=()=>{H.value.executionTimeout=H.value.executionTimeout===-1?0:-1},nt=()=>{H.value.availableInMCP=!H.value.availableInMCP},rt=e=>{let t=parseInt(e,10);H.value.timeSavedPerExecution=isNaN(t)?void 0:t<0?0:t},it=e=>{(e===`v0`||e===`v1`)&&(H.value.binaryMode=Xo,H.value.executionOrder=e),e===`v2`&&(H.value.binaryMode=es,H.value.executionOrder=`v1`)};return C(async()=>{if(he.value=E.executionTimeout,ge.value=E.maxExecutionTimeout,!j.isWorkflowSaved[j.workflowId]){i.showMessage({title:`No workflow active`,message:`No workflow active to display settings of.`,type:`error`,duration:0}),Le();return}ve.value.saveDataErrorExecution=D.saveDataErrorExecution,ve.value.saveDataSuccessExecution=D.saveDataSuccessExecution,ve.value.saveManualExecutions=D.saveManualExecutions,ve.value.saveExecutionProgress=D.saveDataProgressExecution,ve.value.timezone=E.timezone,ve.value.workflowCallerPolicy=D.workflowCallerPolicyDefaultOption,te.value=!0;try{let e=[N.fetchWorkflow(Ce.value),qe(),Ve(),Ue(),We(),Ge(),Ke(),ze()];T.value&&e.push(fe()),await Promise.all(e)}catch(e){i.showError(e,`Problem loading settings`,`The following error occurred loading the data:`)}let e=Qa(j.workflowSettings);e.timeSavedMode===void 0&&(e.timeSavedMode=`fixed`),e.errorWorkflow===void 0&&(e.errorWorkflow=`DEFAULT`),e.timezone===void 0&&(e.timezone=`DEFAULT`),e.saveDataErrorExecution===void 0&&(e.saveDataErrorExecution=`DEFAULT`),e.saveDataSuccessExecution===void 0&&(e.saveDataSuccessExecution=`DEFAULT`),e.saveExecutionProgress===void 0&&(e.saveExecutionProgress=`DEFAULT`),e.saveManualExecutions===void 0&&(e.saveManualExecutions=`DEFAULT`),e.callerPolicy===void 0&&(e.callerPolicy=ve.value.workflowCallerPolicy),e.executionTimeout===void 0&&(e.executionTimeout=E.executionTimeout),e.maxExecutionTimeout===void 0&&(e.maxExecutionTimeout=E.maxExecutionTimeout),e.executionOrder===void 0&&(e.executionOrder=`v0`),e.binaryMode===void 0&&(e.binaryMode=Xo),e.availableInMCP===void 0&&(e.availableInMCP=ve.value.availableInMCP),ue.value=e.binaryMode,H.value=e,G.value=Y(e.executionTimeout),te.value=!1,r.run(`workflowSettings.dialogVisibleChanged`,{dialogVisible:!0}),g.track(`User opened workflow settings`,{workflow_id:j.workflowId}),x({key:`openSavedTimeNodeCreator`,action:()=>{Le(),I.openNodeCreatorForRegularNodes(To.NODE_CONNECTION_ACTION)}})}),f(()=>{Ze.cancel?.(),S(`openSavedTimeNodeCreator`)}),(e,t)=>{let r=oe(`n8n-html`),i=oe(`loading`);return M(),y(tc,{name:u(Mo),width:`65%`,"max-height":`80%`,title:u(n).baseText(`workflowSettings.settingsFor`,{interpolate:{workflowName:Se.value,workflowId:Ce.value}}),"event-bus":u(h),scrollable:!0},{content:k(()=>[ce((M(),s(`div`,{class:U(e.$style[`workflow-settings`]),"data-test-id":`workflow-settings-dialog`},[m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.executionLogic`)),1)]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:ye.value,"onUpdate:modelValue":[t[0]||=e=>ye.value=e,it],placeholder:`Select Execution Order`,size:`medium`,filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-execution-order`},{default:k(()=>[(M(!0),s(w,null,L(Fe.value,e=>(M(),y(u(Dt),{key:e.key,label:e.value,value:e.key},{default:k(()=>[W(`div`,Vb,[W(`div`,Hb,o(e.value),1),ce(W(`div`,Ub,null,512),[[r,e.description]])])]),_:2},1032,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`disabled`])]),_:1})]),_:1}),m(u(Na),{"data-test-id":`error-workflow`},{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.errorWorkflow`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[ce(W(`div`,null,null,512),[[r,_e.value.errorWorkflow]])]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.errorWorkflow,"onUpdate:modelValue":t[1]||=e=>H.value.errorWorkflow=e,placeholder:`Select Workflow`,filterable:``,remote:``,"remote-method":u(Ze),"remote-show-suffix":``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-error-workflow`},{default:k(()=>[(M(!0),s(w,null,L(se.value,t=>(M(),y(u(Dt),{key:t.id,label:t.name,value:t.id,disabled:t.active===!1},{default:k(()=>[W(`div`,{class:U(e.$style.optionContent)},[W(`span`,null,o(t.name),1),t.active===!1?(M(),y(u(He),{key:0,content:u(n).baseText(`resourceLocator.workflow.inactive.tooltip`),placement:`top`},{default:k(()=>[m(u(J),{icon:`triangle-alert`,size:`small`,class:U(e.$style.inactiveIcon)},null,8,[`class`])]),_:1},8,[`content`])):c(``,!0)],2)]),_:2},1032,[`label`,`value`,`disabled`]))),128))]),_:1},8,[`modelValue`,`remote-method`,`disabled`])]),_:1})]),_:1}),u(T)?(M(),y(u(Na),{key:0,"data-test-id":`credential-resolver`},{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.credentialResolver`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.credentialResolver)},null,8,Wb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[W(`div`,{class:U(e.$style[`credential-resolver-container`])},[m(u(ct),{ref_key:`credentialResolverSelectRef`,ref:le,modelValue:H.value.credentialResolverId,"onUpdate:modelValue":t[2]||=e=>H.value.credentialResolverId=e,placeholder:u(n).baseText(`workflowSettings.credentialResolver.placeholder`),filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-credential-resolver`},{footer:k(()=>[W(`button`,{type:`button`,class:U(e.$style[`create-new-button`]),disabled:xe.value||!Oe.value.update,"data-test-id":`workflow-settings-credential-resolver-create-new`,onClick:Je},[m(u(J),{size:`xsmall`,icon:`plus`}),R(` `+o(u(n).baseText(`workflowSettings.credentialResolver.createNew`)),1)],10,Gb)]),default:k(()=>[(M(!0),s(w,null,L(u(de),e=>(M(),y(u(Dt),{key:e.id,label:e.name,value:e.id},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`,`disabled`]),H.value.credentialResolverId?(M(),y(u(Be),{key:0,variant:`ghost`,icon:`pen`,size:`small`,disabled:xe.value||!Oe.value.update,title:u(n).baseText(`workflowSettings.credentialResolver.edit`),"data-test-id":`workflow-settings-credential-resolver-edit`,onClick:Ye},null,8,[`disabled`,`title`])):c(``,!0)],2)]),_:1})]),_:1})):c(``,!0),Ee.value?(M(),s(`div`,Kb,[m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.callerPolicy`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.workflowCallerPolicy)},null,8,qb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.callerPolicy,"onUpdate:modelValue":t[3]||=e=>H.value.callerPolicy=e,disabled:xe.value||!Oe.value.update,placeholder:u(n).baseText(`workflowSettings.selectOption`),filterable:``,"limit-popper-width":!0},{default:k(()=>[(M(!0),s(w,null,L(ne.value,e=>(M(),y(u(Dt),{key:e.key,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`disabled`,`placeholder`])]),_:1})]),_:1}),H.value.callerPolicy===`workflowsFromAList`?(M(),y(u(Na),{key:0},{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.callerIds`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.workflowCallerIds)},null,8,Jb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14},{default:k(()=>[m(u(mt),{modelValue:H.value.callerIds,"onUpdate:modelValue":[t[4]||=e=>H.value.callerIds=e,Ie],disabled:xe.value||!Oe.value.update,placeholder:u(n).baseText(`workflowSettings.callerIds.placeholder`),type:`text`,"data-test-id":`workflow-caller-policy-workflow-ids`},null,8,[`modelValue`,`disabled`,`placeholder`])]),_:1})]),_:1})):c(``,!0)])):c(``,!0),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.timezone`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.timezone)},null,8,Yb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.timezone,"onUpdate:modelValue":t[5]||=e=>H.value.timezone=e,placeholder:`Select Timezone`,filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-timezone`},{default:k(()=>[(M(!0),s(w,null,L(ae.value,e=>(M(),y(u(Dt),{key:e.key,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`disabled`])]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.saveDataErrorExecution`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.saveDataErrorExecution)},null,8,Xb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.saveDataErrorExecution,"onUpdate:modelValue":t[6]||=e=>H.value.saveDataErrorExecution=e,placeholder:u(n).baseText(`workflowSettings.selectOption`),filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-save-failed-executions`},{default:k(()=>[(M(!0),s(w,null,L(re.value,e=>(M(),y(u(Dt),{key:e.key,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`,`disabled`])]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.saveDataSuccessExecution`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.saveDataSuccessExecution)},null,8,Zb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.saveDataSuccessExecution,"onUpdate:modelValue":t[7]||=e=>H.value.saveDataSuccessExecution=e,placeholder:u(n).baseText(`workflowSettings.selectOption`),filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-save-success-executions`},{default:k(()=>[(M(!0),s(w,null,L(z.value,e=>(M(),y(u(Dt),{key:e.key,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`,`disabled`])]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.saveManualExecutions`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.saveManualExecutions)},null,8,Qb)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.saveManualExecutions,"onUpdate:modelValue":t[8]||=e=>H.value.saveManualExecutions=e,placeholder:u(n).baseText(`workflowSettings.selectOption`),filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-save-manual-executions`},{default:k(()=>[(M(!0),s(w,null,L(ie.value,e=>(M(),y(u(Dt),{key:`${e.key}`,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`,`disabled`])]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.saveExecutionProgress`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.saveExecutionProgress)},null,8,$b)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14,class:`ignore-key-press-canvas`},{default:k(()=>[m(u(ct),{modelValue:H.value.saveExecutionProgress,"onUpdate:modelValue":t[9]||=e=>H.value.saveExecutionProgress=e,placeholder:u(n).baseText(`workflowSettings.selectOption`),filterable:``,disabled:xe.value||!Oe.value.update,"limit-popper-width":!0,"data-test-id":`workflow-settings-save-execution-progress`},{default:k(()=>[(M(!0),s(w,null,L(B.value,e=>(M(),y(u(Dt),{key:`${e.key}`,label:e.value,value:e.key},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`,`disabled`])]),_:1})]),_:1}),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.timeoutWorkflow`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.executionTimeoutToggle)},null,8,ex)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:14},{default:k(()=>[W(`div`,null,[m(u(gt),{ref:`inputField`,disabled:xe.value||!Oe.value.update,"model-value":(H.value.executionTimeout??-1)>-1,"data-test-id":`workflow-settings-timeout-workflow`,"onUpdate:modelValue":tt},null,8,[`disabled`,`model-value`])])]),_:1})]),_:1}),(H.value.executionTimeout??-1)>-1?(M(),s(`div`,tx,[m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[R(o(u(n).baseText(`workflowSettings.timeoutAfter`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[W(`div`,{textContent:o(_e.value.executionTimeout)},null,8,nx)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})]),_:1},8,[`class`]),m(u(Z),{span:4},{default:k(()=>[m(u(mt),{disabled:xe.value||!Oe.value.update,"model-value":G.value.hours,min:0,"onUpdate:modelValue":t[10]||=e=>Re(`hours`,e)},{append:k(()=>[R(o(u(n).baseText(`workflowSettings.hours`)),1)]),_:1},8,[`disabled`,`model-value`])]),_:1}),m(u(Z),{span:4,class:U(e.$style[`timeout-input`])},{default:k(()=>[m(u(mt),{disabled:xe.value||!Oe.value.update,"model-value":G.value.minutes,min:0,max:60,"onUpdate:modelValue":t[11]||=e=>Re(`minutes`,e)},{append:k(()=>[R(o(u(n).baseText(`workflowSettings.minutes`)),1)]),_:1},8,[`disabled`,`model-value`])]),_:1},8,[`class`]),m(u(Z),{span:4,class:U(e.$style[`timeout-input`])},{default:k(()=>[m(u(mt),{disabled:xe.value||!Oe.value.update,"model-value":G.value.seconds,min:0,max:60,"onUpdate:modelValue":t[12]||=e=>Re(`seconds`,e)},{append:k(()=>[R(o(u(n).baseText(`workflowSettings.seconds`)),1)]),_:1},8,[`disabled`,`model-value`])]),_:1},8,[`class`])]),_:1})])):c(``,!0),be.value?(M(),y(u(Na),{key:3,"data-test-id":`workflow-settings-available-in-mcp`},{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[W(`label`,rx,[R(o(u(n).baseText(`workflowSettings.availableInMCP`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[R(o(Ae.value),1)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})])]),_:1},8,[`class`]),m(u(Z),{span:14},{default:k(()=>[W(`div`,null,[m(u(He),{placement:`top`,disabled:!ke.value},{content:k(()=>[R(o(Ae.value),1)]),default:k(()=>[m(u(gt),{ref:`inputField`,disabled:ke.value,"model-value":H.value.availableInMCP??!1,"data-test-id":`workflow-settings-available-in-mcp`,"onUpdate:modelValue":nt},null,8,[`disabled`,`model-value`])]),_:1},8,[`disabled`])])]),_:1})]),_:1})):c(``,!0),m(u(Na),null,{default:k(()=>[m(u(Z),{span:10,class:U(e.$style[`setting-name`])},{default:k(()=>[W(`label`,ix,[R(o(u(n).baseText(`workflowSettings.timeSavedPerExecution`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[R(o(u(n).baseText(`workflowSettings.timeSavedPerExecution.tooltip`)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`})]),_:1})])]),_:1},8,[`class`]),m(u(Z),{span:14},{default:k(()=>[W(`div`,ax,[m(u(ct),{modelValue:H.value.timeSavedMode,"onUpdate:modelValue":t[13]||=e=>H.value.timeSavedMode=e,disabled:xe.value||!Oe.value.update,"data-test-id":`workflow-settings-time-saved-mode`,size:`medium`,filterable:``,"limit-popper-width":!0},{default:k(()=>[(M(!0),s(w,null,L(Pe.value,e=>(M(),y(u(Dt),{key:e.value,label:e.label,value:e.value},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`disabled`])])]),_:1})]),_:1}),H.value.timeSavedMode===`fixed`?(M(),y(u(Na),{key:4},{default:k(()=>[m(u(Z),{span:14,offset:10},{default:k(()=>[W(`div`,{class:U(e.$style[`time-saved-input`])},[m(u($e),{id:`timeSavedPerExecution`,modelValue:H.value.timeSavedPerExecution,"onUpdate:modelValue":[t[14]||=e=>H.value.timeSavedPerExecution=e,rt],"controls-position":`right`,size:`medium`,controls:!0,disabled:xe.value||!Oe.value.update,"data-test-id":`workflow-settings-time-saved-per-execution`,min:0},null,8,[`modelValue`,`disabled`]),W(`span`,null,o(u(n).baseText(`workflowSettings.timeSavedPerExecution.hint`)),1)],2)]),_:1})]),_:1})):c(``,!0),H.value.timeSavedMode===`fixed`&&Ne.value?(M(),y(u(Na),{key:5},{default:k(()=>[m(u(Z),{span:14,offset:10},{default:k(()=>[W(`div`,{class:U(e.$style[`time-saved-content`])},[W(`div`,{class:U(e.$style[`time-saved-warning`])},[ce(W(`span`,null,null,512),[[r,u(n).baseText(`workflowSettings.timeSavedPerExecution.fixedTabWarning`,{interpolate:{link:`<a href='#' class='${e.$style[`time-saved-link`]}' data-action='openSavedTimeNodeCreator'>${u(n).baseText(`workflowSettings.timeSavedPerExecution.fixedTabWarning.link`)}</a>`}})]])],2)],2)]),_:1})]),_:1})):c(``,!0),H.value.timeSavedMode===`dynamic`&&Ne.value?(M(),y(u(Na),{key:6},{default:k(()=>[m(u(Z),{span:14,offset:10},{default:k(()=>[W(`div`,{class:U(e.$style[`time-saved-content`])},[W(`div`,{class:U(e.$style[`time-saved-nodes-active`])},[W(`div`,{class:U(e.$style[`nodes-active-wrapper`])},[m(u(J),{icon:`clock`,class:U(e.$style[`nodes-active-icon`])},null,8,[`class`]),W(`div`,{class:U(e.$style[`nodes-active-content`])},[W(`div`,{class:U(e.$style[`nodes-active-title`])},o(u(n).baseText(`workflowSettings.timeSavedPerExecution.nodesDetected`,{interpolate:{count:Me.value.length}})),3),W(`div`,{class:U(e.$style[`nodes-active-hint`])},o(u(n).baseText(`workflowSettings.timeSavedPerExecution.nodesDetected.hint`)),3)],2)],2),W(`a`,{href:`#`,class:U(e.$style[`add-more-link`]),"data-action":`openSavedTimeNodeCreator`},o(u(n).baseText(`workflowSettings.timeSavedPerExecution.nodesDetected.addMore`)),3)],2)],2)]),_:1})]),_:1})):c(``,!0),H.value.timeSavedMode===`dynamic`&&!Ne.value?(M(),y(u(Na),{key:7},{default:k(()=>[m(u(Z),{span:14,offset:10},{default:k(()=>[W(`div`,{class:U(e.$style[`time-saved-content`])},[W(`div`,{class:U(e.$style[`time-saved-no-nodes`])},[W(`div`,{class:U(e.$style[`no-nodes-title`])},o(u(n).baseText(`workflowSettings.timeSavedPerExecution.noNodesDetected`)),3),W(`div`,{class:U(e.$style[`no-nodes-hint`])},o(u(n).baseText(`workflowSettings.timeSavedPerExecution.noNodesDetected.hint`)),3)],2)],2)]),_:1})]),_:1})):c(``,!0)],2)),[[i,te.value]])]),footer:k(()=>[W(`div`,{class:U(e.$style[`action-buttons`]),"data-test-id":`workflow-settings-save-button`},[m(u(q),{disabled:xe.value||!Oe.value.update,label:u(n).baseText(`workflowSettings.save`),size:`large`,float:`right`,onClick:Qe},null,8,[`disabled`,`label`])],2)]),_:1},8,[`name`,`title`,`event-bus`])}}}),[[`__cssModules`,{$style:{"workflow-settings":`_workflow-settings_su0eg_125`,"setting-name":`_setting-name_su0eg_139`,"timeout-input":`_timeout-input_su0eg_153`,"time-saved":`_time-saved_su0eg_157`,"time-saved-input":`_time-saved-input_su0eg_168`,"time-saved-dropdown":`_time-saved-dropdown_su0eg_177`,"time-saved-tabs":`_time-saved-tabs_su0eg_181`,"time-saved-content":`_time-saved-content_su0eg_187`,"time-saved-warning":`_time-saved-warning_su0eg_194`,"time-saved-link":`_time-saved-link_su0eg_199`,"time-saved-no-nodes":`_time-saved-no-nodes_su0eg_207`,"no-nodes-title":`_no-nodes-title_su0eg_213`,"no-nodes-hint":`_no-nodes-hint_su0eg_218`,"time-saved-nodes-active":`_time-saved-nodes-active_su0eg_224`,"nodes-active-wrapper":`_nodes-active-wrapper_su0eg_230`,"nodes-active-icon":`_nodes-active-icon_su0eg_236`,"nodes-active-content":`_nodes-active-content_su0eg_241`,"nodes-active-title":`_nodes-active-title_su0eg_248`,"nodes-active-hint":`_nodes-active-hint_su0eg_253`,"add-more-link":`_add-more-link_su0eg_258`,"list-option":`_list-option_su0eg_267`,"option-headline":`_option-headline_su0eg_272`,"option-description":`_option-description_su0eg_277`,optionContent:`_optionContent_su0eg_285`,c:`_c_su0eg_292`,"credential-resolver-container":`_credential-resolver-container_su0eg_301`,"create-new-button":`_create-new-button_su0eg_306`}}]]),sx=X(g({__name:`WorkflowShareModal.ee`,props:{data:{}},setup(e){let{data:t}=e,n=Gi(),r=cr(),i=la(),l=Vi(),f=ln(),p=vn(),h=Eu(),g=ha(),_=hr(),v=$s(),b=K(),x=jt(),S=Te(),w=Ii({router:x}),E=d(t.id&&r.workflowsById[t.id]?r.workflowsById[t.id]:n.workflow),D=d(!0),O=d(!1),A=et(),j=d([...E.value.sharedWithProjects??[]]),N=d(null),P=a(()=>i.isEnterpriseFeatureEnabled[Fo.Sharing]),F=a(()=>E.value.homeProject?.type===Nn.Team),I=a(()=>F.value?b.baseText(`workflows.shareModal.title.static`,{interpolate:{projectName:E.value.homeProject?.name??``}}):b.baseText(P.value?l.contextBasedTranslationKeys.workflows.sharing.title:l.contextBasedTranslationKeys.workflows.sharing.unavailable.title,{interpolate:{name:E.value.name}})),L=a(()=>vs(E.value?.scopes).workflow),ee=a(()=>E.value.homeProject?.type===Nn.Personal&&E.value.homeProject?.id===p.personalProject?.id&&!L.value.share),te=a(()=>f.getWorkflowOwnerName(`${E.value.id}`)),ne=a(()=>p.personalProjects.filter(e=>e.id!==E.value.homeProject?.id)),re=a(()=>N.value?.relations.length??0),z=a(()=>({"workflow:editor":b.baseText(`workflows.shareModal.role.editor`),"workflow:owner":``})),B=a(()=>h.processedWorkflowRoles.map(({slug:e,scopes:t,displayName:n,licensed:r,description:i,systemRole:a,roleType:o})=>({slug:e,displayName:e in z.value?z.value[e]:n,scopes:t,licensed:r,description:i,systemRole:a,roleType:o}))),V=(e,t)=>{ya.track(e,{workflow_id:E.value.id,...t})},ae=e=>{V(`User selected sharee to add`,{project_id_sharer:E.value.homeProject?.id,project_id_sharee:e.id})},H=e=>{V(`User selected sharee to remove`,{project_id_sharer:E.value.homeProject?.id,project_id_sharee:e.id})},oe=async()=>{if(D.value)return;D.value=!0;let e=async()=>{if(n.isWorkflowSaved[E.value.id])return E.value.id;{let e=S.query.folderId,t=await w.saveAsNewWorkflow({parentFolderId:e});if(!t)throw Error(b.baseText(`workflows.shareModal.onSave.error.title`));return t}};try{let t=await e();await f.saveWorkflowSharedWith({workflowId:t,sharedWithProjects:j.value}),g.showMessage({title:b.baseText(`workflows.shareModal.onSave.success.title`)}),O.value=!1}catch(e){g.showError(e,b.baseText(`workflows.shareModal.onSave.error.title`))}finally{A.emit(`close`),D.value=!1}},se=async()=>O.value&&await _.confirm(b.baseText(`workflows.shareModal.saveBeforeClose.message`),b.baseText(`workflows.shareModal.saveBeforeClose.title`),{type:`warning`,confirmButtonText:b.baseText(`workflows.shareModal.saveBeforeClose.confirmButtonText`),cancelButtonText:b.baseText(`workflows.shareModal.saveBeforeClose.cancelButtonText`)})===`confirm`?await oe():!0,le=()=>{v.goToUpgrade(`workflow_sharing`,`upgrade-workflow-sharing`)},ue=async()=>{P.value&&(await p.getAllProjects(),n.isWorkflowSaved[E.value.id]&&await r.fetchWorkflow(E.value.id),F.value&&E.value.homeProject&&(N.value=await p.fetchProject(E.value.homeProject.id))),D.value=!1};return C(async()=>{await ue()}),T(j,()=>{O.value=!0},{deep:!0}),(e,t)=>(M(),y(tc,{width:`460px`,"max-height":`75%`,title:I.value,"event-bus":u(A),name:u(eo),center:!0,"before-close":se},{content:k(()=>[P.value?(M(),s(`div`,{key:1,class:U(e.$style.container)},[!L.value.share&&!F.value&&!ee.value?(M(),y(u(Ke),{key:0,bold:!1,class:`mb-s`},{default:k(()=>[R(o(u(b).baseText(`workflows.shareModal.info.sharee`,{interpolate:{workflowOwnerName:te.value}})),1)]),_:1})):c(``,!0),m(xu,{features:[u(Fo).Sharing],class:U(e.$style.content)},{fallback:k(()=>[m(u(Y),null,{default:k(()=>[m(u(ge),{keypath:u(l).contextBasedTranslationKeys.workflows.sharing.unavailable.description.tooltip,tag:`span`,scope:`global`},{action:k(()=>[...t[2]||=[]]),_:1},8,[`keypath`])]),_:1})]),default:k(()=>[W(`div`,null,[m(Tu,{modelValue:j.value,"onUpdate:modelValue":t[0]||=e=>j.value=e,"home-project":E.value.homeProject,projects:ne.value,roles:B.value,readonly:!L.value.share,static:F.value||!L.value.share,"disabled-tooltip":ee.value?u(b).baseText(`workflows.shareModal.info.personalSpaceRestricted`):void 0,placeholder:u(b).baseText(`workflows.shareModal.select.placeholder`),"empty-options-text":u(b).baseText(`workflows.shareModel.select.notFound`),onProjectAdded:ae,onProjectRemoved:H},null,8,[`modelValue`,`home-project`,`projects`,`roles`,`readonly`,`static`,`disabled-tooltip`,`placeholder`,`empty-options-text`]),F.value?(M(),y(u(Ke),{key:0,bold:!1,class:`mt-s`},{default:k(()=>[m(u(ge),{keypath:`workflows.shareModal.info.members`,tag:`span`,scope:`global`},{projectName:k(()=>[R(o(E.value.homeProject?.name),1)]),members:k(()=>[W(`strong`,null,o(u(b).baseText(`workflows.shareModal.info.members.number`,{interpolate:{number:String(re.value)},adjustToNumber:re.value})),1)]),_:1})]),_:1})):c(``,!0)])]),_:1},8,[`features`,`class`])],2)):(M(),s(`div`,{key:0,class:U(e.$style.container)},[m(u(Y),null,{default:k(()=>[R(o(u(b).baseText(u(l).contextBasedTranslationKeys.workflows.sharing.unavailable.description.modal)),1)]),_:1})],2))]),footer:k(()=>[P.value?(M(),y(xu,{key:1,features:[u(Fo).Sharing],class:U(e.$style.actionButtons)},{default:k(()=>[ce(m(u(Y),{color:`text-light`,size:`small`,class:`mr-xs`},{default:k(()=>[R(o(u(b).baseText(`workflows.shareModal.changesHint`)),1)]),_:1},512),[[ie,O.value]]),F.value?(M(),y(u(q),{key:0,variant:`subtle`,onClick:t[1]||=e=>u(A).emit(`close`)},{default:k(()=>[R(o(u(b).baseText(`generic.close`)),1)]),_:1})):ce((M(),y(u(q),{key:1,loading:D.value,disabled:!O.value,"data-test-id":`workflow-sharing-modal-save-button`,onClick:oe},{default:k(()=>[R(o(u(b).baseText(`workflows.shareModal.save`)),1)]),_:1},8,[`loading`,`disabled`])),[[ie,L.value.share]])]),_:1},8,[`features`,`class`])):(M(),s(`div`,{key:0,class:U(e.$style.actionButtons)},[m(u(q),{onClick:le},{default:k(()=>[R(o(u(b).baseText(u(l).contextBasedTranslationKeys.workflows.sharing.unavailable.button)),1)]),_:1})],2))]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{container:`_container_15pka_125`,content:`_content_15pka_135`,usersList:`_usersList_15pka_142`,actionButtons:`_actionButtons_15pka_147`,roleSelect:`_roleSelect_15pka_153`,roleSelectRemoveOption:`_roleSelectRemoveOption_15pka_157`}}]]),cx={key:0,class:`ml-4xs`},lx={key:0},ux={style:{flex:`1`}},dx={key:2},fx=X(g({__name:`WorkflowDiffModal`,props:{data:{}},setup(e){let t=e,{selectedDetailId:n,onNodeClick:r,syncIsEnabled:i}=ed(),l=zn(),f=ha(),p=A(),h=Jt(),g=ca(),_=K(),b=jt(),x=Te(),S=cr(),T={resetOnExecute:!0,shallow:!1,immediate:!1},E=d(!1),D=be(async()=>{if(t.data.direction===`push`&&t.data.workflowStatus===`created`)return{workflow:void 0,remote:!0};try{let{workflowId:e}=t.data,{content:n}=await g.getRemoteWorkflow(e);return{workflow:n,remote:!0}}catch(e){return f.showError(e,_.baseText(`generic.error`)),he(),{workflow:void 0,remote:!0}}},void 0,T),O=be(async()=>{try{let{workflowId:e}=t.data;return{workflow:await S.fetchWorkflow(e),remote:!1}}catch(e){return f.showError(e,_.baseText(`generic.error`)),he(),{workflow:void 0,remote:!1}}},void 0,T),j=a(()=>t.data.direction===`push`?D:O),N=a(()=>t.data.direction===`push`?O:D),{source:P,target:I,nodesDiff:te,connectionsDiff:ne}=td(a(()=>Un(j.value.state.value?.workflow)),a(()=>Un(N.value.state.value?.workflow))),{settingsDiff:re,nodeChanges:z,activeTab:B,tabs:ie,selectedNode:V,nodeDiffs:ae,changesCount:H,isSourceWorkflowNew:oe,modifiers:se}=id({sourceWorkflow:a(()=>j.value.state.value?.workflow),targetWorkflow:a(()=>N.value.state.value?.workflow),nodesDiff:te,connectionsDiff:ne,selectedDetailId:n});function ce(e){return e?_.baseText(`workflowDiff.remote`,{interpolate:{branchName:g.preferences.branchName}}):_.baseText(`workflowDiff.local`)}let le=a(()=>ce(j.value.state.value?.remote??!1)),ue=a(()=>ce(N.value.state.value?.remote??!1));function de(){l.track(`User iterated over changes`,{workflow_id:t.data.workflowId,context:`next`});let e=(z.value.findIndex(e=>e.node.id===n.value)+1)%z.value.length;n.value=z.value[e]?.node.id}function fe(){l.track(`User iterated over changes`,{workflow_id:t.data.workflowId,context:`previous`});let e=(z.value.findIndex(e=>e.node.id===n.value)-1+z.value.length)%z.value.length;n.value=z.value[e]?.node.id}function pe(e){if(!e){B.value=void 0;return}l.track(`User clicked workflow diff changes button`,{workflow_id:t.data.workflowId}),B.value=`nodes`}function me(e){l.track(`User clicked changes tabs`,{workflow_id:t.data.workflowId,context:`${e}_tab`})}function he(){if(!E.value)if(E.value=!0,n.value=void 0,window.history.length>1)b.back();else{let e={...x.query};delete e.diff,delete e.direction,b.replace({query:e})}}function ge(e){e.key===`Escape`&&(e.preventDefault(),e.stopPropagation(),he())}C(async()=>{document.addEventListener(`keydown`,ge,!0),await h.loadNodeTypesIfNotLoaded(),D.execute(),O.execute()}),v(()=>{document.removeEventListener(`keydown`,ge,!0)}),r(e=>{let r=te.value.get(e);r&&(l.track(`User clicked to view node changes`,{workflow_id:t.data.workflowId,node_type:r.node.type,context:`canvas`}),r.status!==Yo.Eq&&(n.value=e))});function G(e,r){if(!e){n.value=void 0;return}n.value=e;let i=te.value.get(e);i&&l.track(`User clicked to view node changes`,{workflow_id:t.data.workflowId,node_type:i.node.type,context:`${r}_list`})}return(t,r)=>(M(),y(tc,{"event-bus":e.data.eventBus,name:u(vo),"custom-class":u(p).workflowDiffModal,height:`100%`,width:`100%`,"max-width":`100%`,"max-height":`100%`,"close-on-press-escape":!1,onBeforeClose:he},{header:k(()=>[W(`div`,{class:U(u(p).header)},[W(`div`,{class:U(u(p).headerLeft)},[m(u(Be),{variant:`subtle`,icon:`arrow-left`,class:U([u(p).backButton,`mr-xs`]),"icon-size":`large`,onClick:he},null,8,[`class`]),m(u(Pt),{tag:`h4`,size:`medium`},{default:k(()=>[R(o(j.value.state.value?.workflow?.name||N.value.state.value?.workflow?.name),1)]),_:1})],2),W(`div`,{class:U(u(p).headerRight)},[m(u(At),{modelValue:u(i),"onUpdate:modelValue":r[0]||=e=>ee(i)?i.value=e:null,"label-size":`small`,label:`Sync views`,class:`mb-0 mr-s`},null,8,[`modelValue`]),m(u(ze),{trigger:`click`,"popper-options":{placement:`bottom-end`,modifiers:u(se)},"popper-class":u(p).popper,onVisibleChange:pe},{dropdown:k(()=>[m(u(Ft),{"hide-on-click":!1},{default:k(()=>[W(`div`,{class:U(u(p).dropdownContent)},[m(u(Nt),{modelValue:u(B),"onUpdate:modelValue":[r[1]||=e=>ee(B)?B.value=e:null,me],options:u(ie),class:U([u(p).tabs,`mb-xs`])},{option:k(({label:e,data:t})=>[R(o(e)+` `,1),t?.count?(M(),s(`span`,cx,` (`+o(t.count)+`) `,1)):c(``,!0)]),_:1},8,[`modelValue`,`options`,`class`]),W(`div`,null,[u(B)===`nodes`?(M(),s(`ul`,lx,[u(z).length>0?(M(!0),s(w,{key:0},L(u(z),e=>(M(),y(u(qe),{key:e.node.id,class:U({[u(p).clickableChange]:!0,[u(p).clickableChangeActive]:u(n)===e.node.id}),onClick:F(t=>G(e.node.id,u(B)),[`prevent`])},{default:k(()=>[m(nd,{type:e.status},null,8,[`type`]),m(uu,{"node-type":e.type,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),W(`span`,{class:U(u(p).nodeName)},o(e.node.name),3)]),_:2},1032,[`class`,`onClick`]))),128)):(M(),s(`li`,{key:1,class:U(u(p).emptyState)},[m(u(Y),{color:`text-base`,size:`small`},{default:k(()=>[R(o(u(_).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))])):c(``,!0),u(B)===`connectors`?(M(),s(`ul`,{key:1,class:U(u(p).changes)},[u(ne).size>0?(M(!0),s(w,{key:0},L(u(ne),e=>(M(),s(`li`,{key:e[0]},[W(`div`,null,[m(nd,{type:e[1].status},null,8,[`type`])]),W(`div`,ux,[W(`ul`,{class:U(u(p).changesNested)},[m(u(qe),{class:U({[u(p).clickableChange]:!0,[u(p).clickableChangeActive]:u(n)===e[1].connection.source?.id}),onClick:F(t=>G(e[1].connection.source?.id,u(B)),[`prevent`])},{default:k(()=>[m(uu,{"node-type":e[1].connection.sourceType,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),W(`span`,{class:U(u(p).nodeName)},o(e[1].connection.source?.name),3)]),_:2},1032,[`class`,`onClick`]),W(`div`,{class:U(u(p).separator)},null,2),m(u(qe),{class:U({[u(p).clickableChange]:!0,[u(p).clickableChangeActive]:u(n)===e[1].connection.target?.id}),onClick:F(t=>G(e[1].connection.target?.id,u(B)),[`prevent`])},{default:k(()=>[m(uu,{"node-type":e[1].connection.targetType,size:16,class:`ml-2xs mr-4xs`},null,8,[`node-type`]),W(`span`,{class:U(u(p).nodeName)},o(e[1].connection.target?.name),3)]),_:2},1032,[`class`,`onClick`])],2)])]))),128)):(M(),s(`li`,{key:1,class:U(u(p).emptyState)},[m(u(Y),{color:`text-base`,size:`small`},{default:k(()=>[R(o(u(_).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))],2)):c(``,!0),u(B)===`settings`?(M(),s(`ul`,dx,[u(re).length>0?(M(!0),s(w,{key:0},L(u(re),e=>(M(),s(`li`,{key:e.name},[m(u(Y),{color:`text-dark`,size:`medium`,tag:`div`,bold:``},{default:k(()=>[R(o(u(_).baseText(`workflowSettings.${e.name}`)),1)]),_:2},1024),m($u,{"old-string":e.before,"new-string":e.after,class:U(u(p).noNumberDiff)},null,8,[`old-string`,`new-string`,`class`])]))),128)):(M(),s(`li`,{key:1,class:U(u(p).emptyState)},[m(u(Y),{color:`text-base`,size:`small`},{default:k(()=>[R(o(u(_).baseText(`workflowDiff.noChanges`)),1)]),_:1})],2))])):c(``,!0)])],2)]),_:1})]),default:k(()=>[m(u(q),{variant:`subtle`,style:{"--button--radius":`4px 0 0 4px`}},{default:k(()=>[u(H)?(M(),s(`div`,{key:0,class:U(u(p).circleBadge)},o(u(H)),3)):c(``,!0),R(` `+o(u(_).baseText(`workflowDiff.changes`)),1)]),_:1})]),_:1},8,[`popper-options`,`popper-class`]),m(u(Be),{variant:`subtle`,icon:`chevron-left`,class:U(u(p).navigationButton),style:{"--button--radius":`0`,margin:`0 -1px`},onClick:fe},null,8,[`class`]),m(u(Be),{variant:`subtle`,icon:`chevron-right`,class:U(u(p).navigationButton),style:{"--button--radius":`0 4px 4px 0`},onClick:de},null,8,[`class`])],2)],2)]),content:k(()=>[m(rd,{"source-nodes":u(P).nodes,"source-connections":u(P).connections,"target-nodes":u(I).nodes,"target-connections":u(I).connections,"source-label":le.value,"target-label":ue.value,"source-exists":!!j.value.state.value?.workflow,"target-exists":!!N.value.state.value?.workflow,"selected-node":u(V),"node-diffs":u(ae),"is-source-workflow-new":u(oe),"nodes-diff":u(te),"connections-diff":u(ne),onCloseAside:r[2]||=e=>n.value=void 0},{sourceLabel:k(()=>[j.value.state.value?(M(),y(u(Y),{key:0,color:`text-dark`,size:`small`,class:U(u(p).sourceBadge)},{default:k(()=>[j.value.state.value.remote?(M(),y(u(J),{key:0,icon:`git-branch`})):c(``,!0),R(` `+o(le.value),1)]),_:1},8,[`class`])):c(``,!0)]),sourceEmptyText:k(()=>[j.value.state.value?.remote?(M(),y(u(Y),{key:0,color:`text-base`},{default:k(()=>[R(o(u(oe)?u(_).baseText(`workflowDiff.newWorkflow.remote`):u(_).baseText(`workflowDiff.deletedWorkflow.remote`)),1)]),_:1})):(M(),y(u(Y),{key:1,color:`text-base`},{default:k(()=>[R(o(u(oe)?u(_).baseText(`workflowDiff.newWorkflow.database`):u(_).baseText(`workflowDiff.deletedWorkflow.database`)),1)]),_:1}))]),targetLabel:k(()=>[N.value.state.value?(M(),y(u(Y),{key:0,color:`text-dark`,size:`small`,class:U(u(p).sourceBadge)},{default:k(()=>[N.value.state.value.remote?(M(),y(u(J),{key:0,icon:`git-branch`})):c(``,!0),R(` `+o(ue.value),1)]),_:1},8,[`class`])):c(``,!0)]),targetEmptyText:k(()=>[N.value.state.value?.remote?(M(),y(u(Y),{key:0,color:`text-base`},{default:k(()=>[R(o(u(_).baseText(`workflowDiff.deletedWorkflow.remote`)),1)]),_:1})):(M(),y(u(Y),{key:1,color:`text-base`},{default:k(()=>[R(o(u(_).baseText(`workflowDiff.deletedWorkflow.database`)),1)]),_:1}))]),_:1},8,[`source-nodes`,`source-connections`,`target-nodes`,`target-connections`,`source-label`,`target-label`,`source-exists`,`target-exists`,`selected-node`,`node-diffs`,`is-source-workflow-new`,`nodes-diff`,`connections-diff`])]),_:1},8,[`event-bus`,`name`,`custom-class`]))}}),[[`__cssModules`,{$style:{workflowDiffModal:`_workflowDiffModal_1lf2g_125`,sourceBadge:`_sourceBadge_1lf2g_139 _sourceBadge_5j5ev_3`,tabs:`_tabs_1lf2g_143`,popper:`_popper_1lf2g_154`,changes:`_changes_1lf2g_161`,clickableChange:`_clickableChange_1lf2g_170`,changesNested:`_changesNested_1lf2g_174`,clickableChangeActive:`_clickableChangeActive_1lf2g_195`,nodeName:`_nodeName_1lf2g_199`,separator:`_separator_1lf2g_207`,circleBadge:`_circleBadge_1lf2g_216`,dropdownContent:`_dropdownContent_1lf2g_230`,noNumberDiff:`_noNumberDiff_1lf2g_242`,header:`_header_1lf2g_251`,navigationButton:`_navigationButton_1lf2g_256`,backButton:`_backButton_1lf2g_260`,headerLeft:`_headerLeft_1lf2g_264`,headerRight:`_headerRight_1lf2g_265`,emptyState:`_emptyState_1lf2g_270`}}]]),px=X(g({__name:`PromptMfaCodeModal`,setup(e){let t=K(),n=ut(),r=d(!1),i=[{name:`mfaCodeOrMfaRecoveryCode`,initialValue:``,properties:{label:t.baseText(`mfa.code.recovery.input.label`),placeholder:t.baseText(`mfa.code.recovery.input.placeholder`),focusInitially:!0,capitalize:!0,required:!0}}];function a(e){if(`mfaCodeOrMfaRecoveryCode`in e&&typeof e.mfaCodeOrMfaRecoveryCode==`string`){if(Kt(e.mfaCodeOrMfaRecoveryCode)){fc.emit(`close`,{mfaRecoveryCode:e.mfaCodeOrMfaRecoveryCode});return}fc.emit(`close`,{mfaCode:e.mfaCodeOrMfaRecoveryCode})}}function o(){n.emit(`submit`)}function s(e){r.value=e}return(e,c)=>(M(),y(tc,{width:`500px`,height:`300px`,"max-height":`640px`,title:u(t).baseText(`mfa.prompt.code.modal.title`),"event-bus":u(fc),name:u(wo),center:!0},{content:k(()=>[W(`div`,{class:U([e.$style.formContainer])},[m(u(ft),{"data-test-id":`mfa-code-or-recovery-code-input`,inputs:i,"event-bus":u(n),onSubmit:a,onReady:s},null,8,[`event-bus`])],2)]),footer:k(()=>[W(`div`,null,[m(u(q),{float:`right`,disabled:!r.value,label:u(t).baseText(`settings.personal.save`),size:`large`,"data-test-id":`mfa-save-button`,onClick:o},null,8,[`disabled`,`label`])])]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{formContainer:`_formContainer_1rysb_125`}}]]),mx=g({__name:`DynamicModalLoader`,setup(e){let t=de([]),n=e=>typeof e==`function`,r=()=>{let e=[];di().forEach((t,r)=>{let i=n(t.component)?h(t.component):t.component;e.push({key:r,component:i})}),t.value=e},i;return C(()=>{r(),i=Mi(()=>{r()})}),v(()=>{i?.()}),(e,n)=>(M(),s(`div`,null,[(M(!0),s(w,null,L(t.value,e=>(M(),y(oy,{key:e.key,name:e.key},{default:k(({modalName:t,active:n,open:r,activeId:i,mode:a,data:o})=>[(M(),y(j(e.component),{"modal-name":t,active:n,open:r,"active-id":i,mode:a,data:o},null,8,[`modal-name`,`active`,`open`,`active-id`,`mode`,`data`]))]),_:2},1032,[`name`]))),128))]))}}),hx=X(g({__name:`TemplateCard`,props:{template:{},currentNodeName:{}},setup(e){let t=e,n=Jt(),{getTemplateRoute:r,trackTemplateTileClick:i}=od(),l=jt(),d=Vi(),f=K(),p=a(()=>{if(!t.template?.nodes)return[];let e=new Set(t.template.nodes.map(e=>e.name)),r=Array.from(e);if(t.currentNodeName&&e.has(t.currentNodeName)){let e=r.filter(e=>e!==t.currentNodeName),i=[t.currentNodeName];return e.length>0&&i.push(e[0]),i.map(e=>n.getNodeType(e)).filter(Boolean)}return r.slice(0,2).map(e=>n.getNodeType(e)).filter(Boolean)}),h=async()=>{i(t.template.id),await l.push(r(t.template.id)),d.closeModal(Jo)};return(t,n)=>(M(),y(u(nt),{class:U(t.$style.suggestion)},{default:k(()=>[W(`div`,null,[p.value.length>0?(M(),s(`div`,{key:0,class:U([t.$style.nodes,`mb-s`])},[(M(!0),s(w,null,L(p.value,e=>(M(),s(`div`,{key:e.name,class:U(t.$style.nodeIcon)},[m(uu,{size:18,"stroke-width":1.5,"node-type":e},null,8,[`node-type`])],2))),128))],2)):c(``,!0),m(u(Y),{size:`medium`,bold:!0},{default:k(()=>[R(o(e.template.name),1)]),_:1})]),W(`div`,{class:U([t.$style.actions,`mt-m`])},[m(u(q),{variant:`subtle`,label:u(f).baseText(`workflows.templateRecoV2.useTemplate`),size:`xsmall`,onClick:h},null,8,[`label`])],2)]),_:1},8,[`class`]))}}),[[`__cssModules`,{$style:{nodes:`_nodes_1e9yq_125`,nodeIcon:`_nodeIcon_1e9yq_130`,suggestion:`_suggestion_1e9yq_141`,actions:`_actions_1e9yq_148`,user:`_user_1e9yq_154`,avatar:`_avatar_1e9yq_160`}}]]),gx=[`src`],_x=X(g({__name:`YoutubeCard`,props:{videoId:{},title:{},description:{}},setup(e){let t=e,{trackVideoClick:n}=od(),r=()=>{n(t.title),window.open(`https://www.youtube.com/watch?v=${t.videoId}`,`_blank`)};return(e,n)=>(M(),y(u(nt),{hoverable:``,onClick:r},{default:k(()=>[W(`div`,{class:U(e.$style.tutorial)},[W(`img`,{src:`https://img.youtube.com/vi/${t.videoId}/hq720.jpg`,width:`250px`,class:U(e.$style.video)},null,10,gx),W(`div`,null,[m(u(Y),{tag:`h2`,size:`large`,bold:!0},{default:k(()=>[R(o(t.title),1)]),_:1}),m(u(Y),{tag:`h3`,size:`small`,class:`mt-2xs`},{default:k(()=>[R(o(t.description),1)]),_:1})])],2)]),_:1}))}}),[[`__cssModules`,{$style:{tutorial:`_tutorial_7x292_125`,video:`_video_7x292_131`}}]]),vx=X(g({__name:`NodeRecommendationModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=Vi(),{nodes:r,getNodeData:i,getTemplateData:c,trackModalTabView:l,trackSeeMoreClick:f}=od(),p=Jt(),h=K(),g=()=>{n.closeModal(Jo)},_=d(t.data.nodeName??r[0]??``),v=d([]),b=d([]),x=d(!1),S=a(()=>r.map(e=>({value:e,label:p.getNodeType(e)?.displayName??``}))),C=a(()=>new Map(r.map(e=>[e,p.getNodeType(e)]))),T=a(()=>i(_.value)),E=a(()=>T.value.youtube||[]),D=a(()=>{let e=C.value.get(_.value)?.displayName??``,t=encodeURIComponent(e);return`${Ds.BASE_WEBSITE_URL}?integrations=${t}&q=Simple`}),O=a(()=>{let e=C.value.get(_.value)?.displayName??``,t=encodeURIComponent(e);return`${Ds.BASE_WEBSITE_URL}?integrations=${t}`});function A(e){_.value=e}return se(async()=>{if(!_.value)return;let e=S.value.find(e=>e.value===_.value)?.label;e&&l(e),x.value=!0;try{let e=i(_.value),t=e.starter?.map(async e=>await c(e))||[],n=e.popular?.map(async e=>await c(e))||[],[r,a]=await Promise.all([Promise.allSettled(t),Promise.allSettled(n)]);v.value=r.filter(e=>e.status===`fulfilled`&&e.value!==null).map(e=>e.value),b.value=a.filter(e=>e.status===`fulfilled`&&e.value!==null).map(e=>e.value)}catch(e){console.error(`Error loading templates:`,e)}finally{x.value=!1}}),(e,t)=>(M(),y(tc,{name:u(Jo),"min-width":`min(800px, 90vw)`,"max-height":`90vh`,onClose:g,onCanceled:g},{header:k(()=>[W(`div`,{class:U(e.$style.header)},[m(u(Nt),{modelValue:_.value,"onUpdate:modelValue":[t[0]||=e=>_.value=e,A],options:S.value,size:`medium`},{option:k(t=>[W(`div`,{class:U(e.$style.tab)},[m(uu,{size:18,class:U(e.$style.nodeIcon),"stroke-width":1.5,"node-type":C.value.get(t.value)},null,8,[`class`,`node-type`])],2)]),_:1},8,[`modelValue`,`options`])],2)]),content:k(()=>[W(`div`,{class:U([e.$style.title,`mb-m`])},[m(u(Y),{tag:`h2`,size:`large`,bold:!0},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.starterTemplates`)),1)]),_:1}),m(u(lt),{href:D.value,onClick:t[1]||=e=>u(f)(`starter`)},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.seeMoreStarterTemplates`)),1)]),_:1},8,[`href`])],2),W(`div`,{class:U(e.$style.suggestions)},[x.value?(M(),s(`div`,{key:0,class:U(e.$style.loading)},[m(u(ke),{size:`small`}),m(u(Y),{size:`small`},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.loadingTemplates`)),1)]),_:1})],2)):(M(!0),s(w,{key:1},L(v.value,e=>(M(),y(hx,{key:e.id,template:e,"current-node-name":_.value},null,8,[`template`,`current-node-name`]))),128))],2),W(`div`,{class:U([e.$style.title,`mb-m mt-m`])},[m(u(Y),{tag:`h2`,size:`large`,bold:!0},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.popularTemplates`)),1)]),_:1}),m(u(lt),{href:O.value,onClick:t[2]||=e=>u(f)(`popular`)},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.seeMorePopularTemplates`)),1)]),_:1},8,[`href`])],2),W(`div`,{class:U(e.$style.suggestions)},[x.value?(M(),s(`div`,{key:0,class:U(e.$style.loading)},[m(u(ke),{size:`small`}),m(u(Y),{size:`small`},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.loadingTemplates`)),1)]),_:1})],2)):(M(!0),s(w,{key:1},L(b.value,e=>(M(),y(hx,{key:e.id,template:e,"current-node-name":_.value},null,8,[`template`,`current-node-name`]))),128))],2),m(u(Y),{tag:`h2`,size:`large`,bold:!0,class:`mb-m mt-m`},{default:k(()=>[R(o(u(h).baseText(`workflows.templateRecoV2.tutorials`)),1)]),_:1}),W(`div`,{class:U(e.$style.videos)},[(M(!0),s(w,null,L(E.value,e=>(M(),y(_x,{key:e.id,"video-id":e.id,title:e.title,description:e.description},null,8,[`video-id`,`title`,`description`]))),128))],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{header:`_header_156ku_125`,tab:`_tab_156ku_130`,suggestions:`_suggestions_156ku_134`,title:`_title_156ku_142`,videos:`_videos_156ku_149`,loading:`_loading_156ku_156`}}]]),yx=X(g({__name:`TemplateCard`,props:{template:{}},setup(e){let t=e,n=Jt(),{getTemplateRoute:r,trackTemplateClickFromModal:i}=ad(),l=jt(),d=Vi(),f=a(()=>{if(!t.template?.nodes)return[];let e=new Set(t.template.nodes.map(e=>e.name)),r=Array.from(e),i=[],a=n.getNodeType(`n8n-nodes-base.hubspot`);a&&e.has(`n8n-nodes-base.hubspot`)&&i.push(a);let o=r.filter(e=>e!==`n8n-nodes-base.hubspot`);if(o.length>0){let e=n.getNodeType(o[0]);e&&i.push(e)}return i}),p=a(()=>t.template?.name?t.template.name.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{1FA70}-\u{1FAFF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu,``).replace(/\s+/g,` `).trim():``),h=a(()=>t.template?.description?t.template.description.replace(/\*\*(.*?)\*\*/g,`<script setup lang="ts">`).replace(/\*(.*?)\*/g,`<script setup lang="ts">`).replace(/`(.*?)`/g,`<script setup lang="ts">`).replace(/!\[(.*?)\]\(.*?\)/g,``).replace(/\[(.*?)\]\(.*?\)/g,`<script setup lang="ts">`).replace(/#{1,6}\s/g,``).replace(/^\s*[-*+]\s/gm,``).replace(/^\s*\d+\.\s/gm,``).replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{1FA70}-\u{1FAFF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu,``).replace(/[\r\n\t\f\v]/g,` `).replace(/[\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/g,` `).replace(/[\u200B-\u200D\uFEFF\uFE0F]/g,``).replace(/\s+/g,` `).trim():``),g=async()=>{i(t.template.id),await l.push(r(t.template.id)),d.closeModal(gs)};return(e,t)=>(M(),y(u(nt),{class:U(e.$style.suggestion),onClick:g},{default:k(()=>[W(`div`,{class:U(e.$style.content)},[m(u(Y),{size:`medium`,bold:!0},{default:k(()=>[R(o(p.value),1)]),_:1}),h.value?(M(),y(u(Y),{key:0,size:`small`,class:U([e.$style.description,`mt-2xs`])},{default:k(()=>[R(o(h.value),1)]),_:1},8,[`class`])):c(``,!0)],2),f.value.length>0?(M(),s(`div`,{key:0,class:U([e.$style.nodes,`mt-m`])},[(M(!0),s(w,null,L(f.value,t=>(M(),s(`div`,{key:t.name,class:U(e.$style.nodeIcon)},[m(uu,{size:18,"stroke-width":1.5,"node-type":t},null,8,[`node-type`])],2))),128))],2)):c(``,!0)]),_:1},8,[`class`]))}}),[[`__cssModules`,{$style:{nodes:`_nodes_1mfcg_125`,nodeIcon:`_nodeIcon_1mfcg_130`,remainingNodes:`_remainingNodes_1mfcg_139`,description:`_description_1mfcg_144`,suggestion:`_suggestion_1mfcg_154`,content:`_content_1mfcg_169`}}]]),bx={key:1},xx=X(g({__name:`NodeRecommendationModal`,setup(e){let t=Vi(),n=ua(),{getHubSpotData:r,getTemplateData:i,trackPersonalizationModalView:a,trackTemplatesRepoClickFromModal:c}=ad(),l=K(),f=()=>{t.closeModal(gs)},p=()=>{c(),window.open(n.websiteTemplateRepositoryURL,`_blank`)},h=d([]),g=d(!1);return se(async()=>{a(),g.value=!0;try{let e=r().templates?.map(async e=>await i(e))||[];h.value=(await Promise.allSettled(e)).filter(e=>e.status===`fulfilled`&&e.value!==null).map(e=>e.value)}catch(e){console.error(`Error loading templates:`,e)}finally{g.value=!1}}),(e,t)=>(M(),y(tc,{name:u(gs),"min-width":`min(800px, 90vw)`,"max-height":`90vh`,class:U(e.$style.modal),onClose:f,onCanceled:f},{header:k(()=>[W(`div`,{class:U(e.$style.header)},[m(u(Y),{tag:`h1`,size:`large`,bold:!0},{default:k(()=>[R(o(u(l).baseText(`experiments.personalizedTemplatesV3.recommendedForYou`)),1)]),_:1})],2)]),content:k(()=>[g.value?(M(),s(`div`,{key:0,class:U(e.$style.loading)},[m(u(ke),{size:`small`}),m(u(Y),{size:`small`},{default:k(()=>[R(o(u(l).baseText(`experiments.personalizedTemplatesV3.loadingTemplates`)),1)]),_:1})],2)):(M(),s(`div`,bx,[W(`div`,{class:U(e.$style.templates)},[(M(!0),s(w,null,L(h.value,e=>(M(),y(yx,{key:e.id,template:e},null,8,[`template`]))),128))],2),m(u(nt),{class:U([e.$style.footerCard]),onClick:p},{default:k(()=>[W(`div`,{class:U(e.$style.footerContent)},[W(`div`,{class:U(e.$style.footerText)},[m(u(Y),{size:`medium`,bold:!0,class:`mr-s`,color:`text-light`},{default:k(()=>[R(o(u(l).baseText(`experiments.personalizedTemplatesV3.couldntFind`)),1)]),_:1}),m(u(Y),{size:`small`,class:U(`mt-2xs`)},{default:k(()=>[R(o(u(l).baseText(`experiments.personalizedTemplatesV3.browseAllTemplates`)),1)]),_:1})],2),W(`div`,{class:U(e.$style.footerIcon)},[m(u(J),{icon:`external-link`,size:`medium`})],2)],2)]),_:1},8,[`class`])]))]),_:1},8,[`name`,`class`]))}}),[[`__cssModules`,{$style:{modal:`_modal_1a3q6_125`,header:`_header_1a3q6_129`,templates:`_templates_1a3q6_134`,loading:`_loading_1a3q6_141`,footerCard:`_footerCard_1a3q6_150`,footerContent:`_footerContent_1a3q6_161`,footerText:`_footerText_1a3q6_167`,footerIcon:`_footerIcon_1a3q6_172`}}]]),Sx={key:2},Cx=1e3,wx=X(g({__name:`VariableModal`,props:{mode:{default:`new`},variable:{}},setup(e){let t=e,n=K(),{showError:r}=ha(),i=Vi(),f=hn(),p=vn(),h=et(),g=d(!1),v=d(!1),b=d(null),x=[{name:`REQUIRED`},{name:`MAX_LENGTH`,config:{maximum:50}},{name:`MATCH_REGEX`,config:{regex:/^[A-Za-z0-9_]+$/,message:n.baseText(`variables.editing.key.error.regex`)}}],S=[{name:`MAX_LENGTH`,config:{maximum:Cx}}],T=_({key:t.variable?.key||``,value:t.variable?.value||``,projectId:t.variable?t.variable.project?.id:p.currentProjectId}),E=_({key:!1,value:!1}),D=a(()=>T.key?!!f.variables.find(e=>t.mode===`edit`&&e.id===t.variable?.id||e.key!==T.key?!1:!e.project&&!T.projectId?!0:e.project&&e.project?.id===T.projectId):!1),O=a(()=>!T.key||D.value||!T.projectId?!1:!!f.variables.find(e=>e.key===T.key&&!e.project)),A=a(()=>Object.values(E).every(e=>e)&&!D.value),j=a(()=>t.mode===`new`?n.baseText(`variables.modal.title.create`):n.baseText(`variables.modal.title.edit`)),N=a(()=>{let e=[{value:``,label:n.baseText(`variables.modal.scope.global`),icon:{type:`icon`,value:`database`}}];return p.availableProjects&&e.push(...p.availableProjects.filter(e=>e.type!==`personal`).map(e=>{let t=e.icon||{type:`icon`,value:`layer-group`};return{value:e.id,label:e.name??e.id,icon:t}})),e}),P=a(()=>N.value.find(e=>e.value===T.projectId)?.icon??{type:`icon`,value:`database`}),F=a(()=>t.mode===`new`&&!p.currentProjectId);function I(){i.closeModal(gn)}async function ee(){if(v.value=!0,A.value)try{g.value=!0;let e={key:T.key,value:T.value};T.projectId!==void 0&&(e.projectId=T.projectId),t.mode===`new`?await f.createVariable(e):t.variable&&await f.updateVariable({id:t.variable.id,...e}),I()}catch(e){r(e,n.baseText(`variables.errors.save`))}finally{g.value=!1}}return C(async()=>{await l();let e=b.value?.inputRef;e&&requestAnimationFrame(()=>{e.focus()})}),(e,t)=>(M(),y(tc,{title:j.value,"event-bus":u(h),name:u(gn),width:`600px`,"lock-scroll":!1,"close-on-esc":!0,"close-on-click-modal":!1,"show-close":!0},{content:k(()=>[W(`div`,{class:U(e.$style.form),onKeyup:ne(ee,[`enter`])},[m(u(tt),{ref_key:`keyInputRef`,ref:b,modelValue:T.key,"onUpdate:modelValue":t[0]||=e=>T.key=e,label:u(n).baseText(`variables.modal.key.label`),name:`key`,"focus-initially":``,"data-test-id":`variable-modal-key-input`,placeholder:u(n).baseText(`variables.editing.key.placeholder`),required:``,"validate-on-blur":v.value,"validation-rules":x,onValidate:t[1]||=e=>E.key=e},null,8,[`modelValue`,`label`,`placeholder`,`validate-on-blur`]),D.value?(M(),y(u(we),{key:0,theme:`danger`,"data-test-id":`variable-modal-key-exists-error`},{default:k(()=>[R(o(u(n).baseText(`variables.modal.error.keyExistsInProject`)),1)]),_:1})):O.value?(M(),y(u(we),{key:1,theme:`warning`,"data-test-id":`variable-modal-global-exists-warning`},{default:k(()=>[R(o(u(n).baseText(`variables.modal.warning.globalKeyExists`)),1)]),_:1})):c(``,!0),m(u(tt),{modelValue:T.value,"onUpdate:modelValue":t[2]||=e=>T.value=e,name:`value`,label:u(n).baseText(`variables.modal.value.label`),"data-test-id":`variable-modal-value-input`,placeholder:u(n).baseText(`variables.editing.value.placeholder`),type:`textarea`,autosize:{minRows:3,maxRows:6},maxlength:Cx,"validate-on-blur":v.value,"validation-rules":S,onValidate:t[3]||=e=>E.value=e},null,8,[`modelValue`,`label`,`placeholder`,`validate-on-blur`]),F.value?(M(),s(`div`,Sx,[m(u(Ct),{label:u(n).baseText(`variables.modal.scope.label`),color:`text-dark`},{default:k(()=>[m(u(ct),{modelValue:T.projectId,"onUpdate:modelValue":t[4]||=e=>T.projectId=e,size:`large`,filterable:``,"data-test-id":`variable-modal-scope-select`},{prefix:k(()=>[P.value?.type===`emoji`?(M(),y(u(Y),{key:0,class:U(e.$style.menuItemEmoji)},{default:k(()=>[R(o(P.value.value),1)]),_:1},8,[`class`])):P.value?.value?(M(),y(u(J),{key:1,icon:P.value.value},null,8,[`icon`])):c(``,!0)]),default:k(()=>[(M(!0),s(w,null,L(N.value,t=>(M(),y(u(Dt),{key:t.value||`global`,value:t.value,label:t.label,class:U({[e.$style.globalOption]:t.value===``})},{default:k(()=>[W(`div`,{class:U(e.$style.optionContent)},[t.icon?.type===`emoji`?(M(),y(u(Y),{key:0,class:U(e.$style.menuItemEmoji)},{default:k(()=>[R(o(t.icon.value),1)]),_:2},1032,[`class`])):t.icon?.value?(M(),y(u(J),{key:1,icon:t.icon.value},null,8,[`icon`])):c(``,!0),W(`span`,null,o(t.label),1)],2)]),_:2},1032,[`value`,`label`,`class`]))),128))]),_:1},8,[`modelValue`])]),_:1},8,[`label`])])):c(``,!0)],34)]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`subtle`,label:u(n).baseText(`variables.modal.button.cancel`),"data-test-id":`variable-modal-cancel-button`,onClick:I},null,8,[`label`]),m(u(q),{loading:g.value,disabled:!A.value,label:u(n).baseText(`variables.modal.button.save`),"data-test-id":`variable-modal-save-button`,onClick:ee},null,8,[`loading`,`disabled`,`label`])],2)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{form:`_form_uzzue_125`,footer:`_footer_uzzue_131`,optionContent:`_optionContent_uzzue_139`,iconEmoji:`_iconEmoji_uzzue_145`,globalOption:`_globalOption_uzzue_150`}}]]),Tx=X(g({__name:`StopManyExecutionsModal`,props:{modalName:{}},setup(e){let t=e,n=d(!1),r=oc(),i=K(),s=zn(),l=d(!0),f=d(!0),p=d(!0),h=a(()=>{let{startedBefore:e,startedAfter:t}=r.executionsFilters;return e&&t?i.baseText(`executionStopManyModal.dateHint.startEnd`,{interpolate:{startedBefore:e,startedAfter:t}}):t?i.baseText(`executionStopManyModal.dateHint.startOnly`,{interpolate:{startedAfter:t}}):e?i.baseText(`executionStopManyModal.dateHint.endOnly`,{interpolate:{startedBefore:e}}):``}),g=a(()=>r.filters.workflowId===`all`?i.baseText(`executionStopManyModal.allWorkflowsHint`):``),_=ha(),v=et(),b=async()=>{try{let e=[p.value?[`waiting`]:[],l.value?[`running`]:[],f.value?[`new`]:[]].flat(),{startedBefore:t,startedAfter:a}=r.executionsFilters;n.value=!0;let{stopped:o}=await r.stopManyExecutions({status:e,startedBefore:t,startedAfter:a});n.value=!1,_.showMessage({title:i.baseText(`executionStopManyModal.success`,{interpolate:{count:o}}),type:o>0?`success`:`info`}),s.track(`User confirmed stop many executions`,{waitingExecutions:p.value,runningExecutions:l.value,queuedExecutions:f.value,stoppedCount:o})}catch(e){_.showError(e,i.baseText(`executionStopManyModal.error.failure`))}finally{v.emit(`close`)}};function x(){v.emit(`close`)}return(e,r)=>(M(),y(tc,{"max-width":`540px`,title:u(i).baseText(`executionStopManyModal.title`),"event-bus":u(v),name:t.modalName,center:!0},{content:k(()=>[h.value?(M(),y(u(Na),{key:0,class:U(e.$style.vertPadding)},{default:k(()=>[m(u(we),{theme:`info`},{default:k(()=>[R(o(h.value),1)]),_:1})]),_:1},8,[`class`])):c(``,!0),g.value?(M(),y(u(Na),{key:1,class:U(e.$style.vertPadding)},{default:k(()=>[m(u(we),{theme:`warning`},{default:k(()=>[R(o(g.value),1)]),_:1})]),_:1},8,[`class`])):c(``,!0),m(u(Na),{class:U(e.$style.vertPadding)},{default:k(()=>[m(u(Y),{color:`text-base`},{default:k(()=>[R(o(u(i).baseText(`executionStopManyModal.description`)),1)]),_:1})]),_:1},8,[`class`]),m(u(Na),null,{default:k(()=>[m(u(tt),{modelValue:f.value,"onUpdate:modelValue":r[0]||=e=>f.value=e,type:`checkbox`,label:u(i).baseText(`executionStopManyModal.queued`),"data-test-id":`sme-check-queued`},null,8,[`modelValue`,`label`])]),_:1}),m(u(Na),null,{default:k(()=>[m(u(tt),{modelValue:l.value,"onUpdate:modelValue":r[1]||=e=>l.value=e,type:`checkbox`,label:u(i).baseText(`executionStopManyModal.running`),"data-test-id":`sme-check-running`},null,8,[`modelValue`,`label`])]),_:1}),m(u(Na),null,{default:k(()=>[m(u(tt),{modelValue:p.value,"onUpdate:modelValue":r[2]||=e=>p.value=e,type:`checkbox`,label:u(i).baseText(`executionStopManyModal.waiting`),"data-test-id":`sme-check-waiting`},null,8,[`modelValue`,`label`])]),_:1})]),footer:k(()=>[W(`div`,{class:U(e.$style.footer)},[m(u(q),{variant:`subtle`,label:u(i).baseText(`executionStopManyModal.button.close`),"data-test-id":`sme-close-button`,onClick:x},null,8,[`label`]),m(u(q),{disabled:!p.value&&!l.value&&!f.value,label:u(i).baseText(`executionStopManyModal.button.submit`),loading:n.value,"data-test-id":`sme-submit-button`,onClick:b},null,8,[`disabled`,`label`,`loading`])],2)]),_:1},8,[`title`,`event-bus`,`name`]))}}),[[`__cssModules`,{$style:{form:`_form_1v8e2_125`,footer:`_footer_1v8e2_131`,vertPadding:`_vertPadding_1v8e2_139`}}]]),Ex=X(g({__name:`WorkflowDescriptionModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=et(),r=K(),i=ha(),s=zn(),c=la(),l=Gi(),f=d(t.data.workflowDescription??``),p=re(`descriptionInput`),h=d(!1),g=a(()=>(f.value??``).trim()),_=a(()=>(t.data.workflowDescription??``).trim()),v=a(()=>g.value!==_.value),b=a(()=>c.isModuleActive(`mcp`)&&c.moduleSettings.mcp?.mcpAccessEnabled),x=a(()=>b.value?r.baseText(`workflow.description.mcp`):r.baseText(`workflow.description.nomcp`)),S=async()=>{h.value=!0;try{await l.saveWorkflowDescription(t.data.workflowId,g.value??null),t.data.onSave?.(g.value??null),s.track(`User set workflow description`,{workflow_id:t.data.workflowId,description:g.value??null})}catch(e){i.showError(e,r.baseText(`workflow.description.error.title`))}finally{h.value=!1}},w=()=>{n.emit(`close`)},T=async()=>{await S(),n.emit(`close`)},E=async e=>{if(e.key===`Escape`&&(e.preventDefault(),e.stopPropagation(),w()),e.key===`Enter`&&!e.shiftKey){if(!v.value)return;e.preventDefault(),e.stopPropagation(),await T()}};return C(()=>{setTimeout(()=>{p.value?.focus()},150)}),(e,t)=>(M(),y(tc,{name:u(fo),title:u(r).baseText(`generic.description`),width:`500`,class:U(e.$style.container),"event-bus":u(n),"close-on-click-modal":!1},{content:k(()=>[W(`div`,{class:U(e.$style[`description-edit-content`]),"data-test-id":`workflow-description-edit-content`},[m(u(Y),{color:`text-base`,"data-test-id":`descriptionTooltip`},{default:k(()=>[R(o(x.value),1)]),_:1}),m(u(mt),{ref_key:`descriptionInput`,ref:p,modelValue:f.value,"onUpdate:modelValue":t[0]||=e=>f.value=e,rows:6,"data-test-id":`workflow-description-input`,type:`textarea`,onKeydown:E},null,8,[`modelValue`])],2)]),footer:k(()=>[W(`div`,{class:U(e.$style[`popover-footer`])},[m(u(q),{variant:`subtle`,label:u(r).baseText(`generic.cancel`),size:`small`,disabled:h.value,"data-test-id":`workflow-description-cancel-button`,onClick:w},null,8,[`label`,`disabled`]),m(u(q),{variant:`solid`,label:u(r).baseText(`generic.unsavedWork.confirmMessage.confirmButtonText`),loading:h.value,disabled:!v.value||h.value,"data-test-id":`workflow-description-save-button`,onClick:T},null,8,[`label`,`loading`,`disabled`])],2)]),_:1},8,[`name`,`title`,`class`,`event-bus`]))}}),[[`__cssModules`,{$style:{"description-edit-content":`_description-edit-content_1vjsk_125`,"popover-footer":`_popover-footer_1vjsk_132`}}]]),Dx=g({__name:`WorkflowActivationErrorMessage`,props:{message:{}},setup(e){let t=K();return(n,r)=>(M(),s(`div`,null,[R(o(u(t).baseText(`workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined`))+` `,1),r[0]||=W(`br`,null,null,-1),W(`i`,null,o(e.message),1)]))}}),Ox=X(g({__name:`WorkflowPublishModal`,setup(e){let t=et(),n=K(),r=Gi(),i=Wi(),{showMessage:l}=ha(),h=cd(),g=d(!1),_=re(`publishForm`),v=d(``),b=d(``),x=a(()=>vi(r.workflowTriggerNodes)),S=a(()=>x.value.length>0),T=a(()=>r.workflow.versionId!==r.workflow.activeVersion?.versionId),E=a(()=>r.nodesIssuesExist),D=a(()=>!T.value||!S.value||E.value||g.value),O=a(()=>D.value||b.value.trim().length===0),A=a(()=>S.value?E.value?`nodeIssues`:T.value?null:`noChanges`:`noTrigger`);function j(){_.value?.focusInput()}C(()=>{let e=r.versionData;b.value||(e?.name?b.value=e.name:b.value=Xu(r.workflow.versionId)),!v.value&&e?.description&&(v.value=e.description),t.on(`opened`,j)}),f(()=>{t.off(`opened`,j)});function N(e){return Object.keys(e).find(e=>{let t=i.state.credentials[e];return t.isManaged&&t.type===`openAiApi`})}function P(e,t){return e.some(e=>e?.credentials?.openAiApi?.id===t&&!e.disabled)}let F=a(()=>{let e=r?.usedCredentials;if(!e)return!1;let t=N(e);return t?P(r.allNodes,t):!1});async function I(){let e;try{let t=await r.getActivationError(r.workflow.id);e=t===void 0?n.baseText(`workflowActivator.showMessage.displayActivationError.message.errorDataUndefined`):p(Dx,{message:t})}catch{e=n.baseText(`workflowActivator.showMessage.displayActivationError.message.catchBlock`)}l({title:n.baseText(`workflowActivator.showMessage.displayActivationError.title`),message:e,type:`warning`,duration:0})}async function ee(){if(O.value)return;g.value=!0;let{success:e,errorHandled:i}=await h.publishWorkflow(r.workflow.id,r.workflow.versionId,{name:b.value,description:v.value});e?(r.setWorkflowVersionData({versionId:r.workflow.versionId,name:b.value,description:v.value}),F.value&&l({title:n.baseText(`freeAi.credits.showWarning.workflow.activation.title`),message:n.baseText(`freeAi.credits.showWarning.workflow.activation.description`),type:`warning`,duration:0}),ya.track(`User published version from canvas`,{workflow_id:r.workflow.id}),t.emit(`close`)):i||await I(),g.value=!1}return(e,i)=>(M(),y(tc,{"max-width":`500px`,"max-height":`85vh`,name:u(za),center:!0,"show-close":!0,"close-on-click-modal":!1,"event-bus":u(t)},{header:k(()=>[m(u(Pt),{size:`xlarge`},{default:k(()=>[R(o(u(n).baseText(`workflows.publishModal.title`)),1)]),_:1})]),content:k(()=>[W(`div`,{class:U(e.$style.content)},[A.value===`noTrigger`?(M(),y(u(we),{key:0,theme:`danger`,icon:`status-error`},{default:k(()=>[R(o(u(n).baseText(`workflows.publishModal.noTriggerMessage`)),1)]),_:1})):A.value===`nodeIssues`?(M(),y(u(we),{key:1,theme:`danger`,icon:`status-error`},{default:k(()=>[R(o(u(n).baseText(`workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title`,{interpolate:{count:u(r).nodesWithIssues.length},adjustToNumber:u(r).nodesWithIssues.length}))+` `,1),W(`ul`,{class:U(e.$style.nodeLinks)},[(M(!0),s(w,null,L(u(r).nodesWithIssues,e=>(M(),s(`li`,{key:e.id},[m(u(lt),{size:`small`,to:`/workflow/${u(r).workflow.id}/${e.id}`,onClick:i[0]||=e=>u(t).emit(`close`)},{default:k(()=>[R(o(e.name),1)]),_:2},1032,[`to`])]))),128))],2)]),_:1})):A.value===`noChanges`?(M(),y(u(we),{key:2,theme:`warning`},{default:k(()=>[R(o(u(n).baseText(`workflows.publishModal.noChanges`)),1)]),_:1})):c(``,!0),m(zb,{ref_key:`publishForm`,ref:_,"version-name":b.value,"onUpdate:versionName":i[1]||=e=>b.value=e,description:v.value,"onUpdate:description":i[2]||=e=>v.value=e,disabled:D.value,"version-name-test-id":`workflow-publish-version-name-input`,"description-test-id":`workflow-publish-description-input`,onSubmit:ee},null,8,[`version-name`,`description`,`disabled`]),W(`div`,{class:U(e.$style.actions)},[m(u(q),{variant:`subtle`,disabled:g.value,label:u(n).baseText(`generic.cancel`),"data-test-id":`workflow-publish-cancel-button`,onClick:i[3]||=e=>u(t).emit(`close`)},null,8,[`disabled`,`label`]),m(u(q),{disabled:O.value,loading:g.value,label:u(n).baseText(`workflows.publish`),"data-test-id":`workflow-publish-button`,onClick:ee},null,8,[`disabled`,`loading`,`label`])],2)],2)]),_:1},8,[`name`,`event-bus`]))}}),[[`__cssModules`,{$style:{content:`_content_1b5ei_125`,actions:`_actions_1b5ei_131`,nodeLinks:`_nodeLinks_1b5ei_137`}}]]),kx={components:{ElTag:Pe},props:[`text`,`type`]},Ax={badge:`_badge_pehdx_125`,danger:`_danger_pehdx_135 _badge_pehdx_125`,warning:`_warning_pehdx_142 _badge_pehdx_125`};function jx(e,t,n,r,i,a){let s=B(`ElTag`);return n.type===`danger`?(M(),y(s,{key:0,type:`danger`,size:`small`,class:U(e.$style.danger),"disable-transitions":!0},{default:k(()=>[R(o(n.text),1)]),_:1},8,[`class`])):n.type===`warning`?(M(),y(s,{key:1,size:`small`,class:U(e.$style.warning),"disable-transitions":!0},{default:k(()=>[R(o(n.text),1)]),_:1},8,[`class`])):c(``,!0)}var Mx=X(kx,[[`render`,jx],[`__cssModules`,{$style:Ax}]]),Nx=X(g({__name:`WarningTooltip`,setup(e){return(e,t)=>(M(),s(`span`,null,[m(u(He),{content:` `,placement:`top`},{content:k(()=>[E(e.$slots,`default`)]),default:k(()=>[m(u(J),{class:U(e.$style.icon),icon:`triangle-alert`},null,8,[`class`])]),_:3})]))}}),[[`__cssModules`,{$style:{icon:`_icon_1n98w_125`}}]]),Px=[`href`],Fx=X(g({__name:`VersionCard`,props:{version:{}},setup(e){let t=K(),n=e=>e===null?t.baseText(`versionCard.unknown`):e.displayName;return(r,i)=>{let a=oe(`n8n-html`);return e.version?(M(),s(`a`,{key:0,href:e.version.documentationUrl,target:`_blank`,class:U(r.$style.card),"data-test-id":`version-card`},[W(`div`,{class:U(r.$style.header)},[W(`div`,null,[W(`div`,{class:U(r.$style.name)},o(`${u(t).baseText(`versionCard.version`)} ${e.version.name}`),3),e.version.hasSecurityIssue?(M(),y(Nx,{key:0},{default:k(()=>[ce(W(`span`,null,null,512),[[a,u(t).baseText(`versionCard.thisVersionHasASecurityIssue`)]])]),_:1})):c(``,!0),e.version.hasSecurityFix?(M(),y(Mx,{key:1,text:u(t).baseText(`versionCard.securityUpdate`),type:`danger`},null,8,[`text`])):c(``,!0),e.version.hasBreakingChange?(M(),y(Mx,{key:2,text:u(t).baseText(`versionCard.breakingChanges`),type:`warning`},null,8,[`text`])):c(``,!0)]),W(`div`,{class:U(r.$style[`release-date`])},[R(o(u(t).baseText(`versionCard.released`))+`\xA0`,1),m(Cu,{date:e.version.createdAt},null,8,[`date`])],2)],2),e.version.description||e.version.nodes&&e.version.nodes.length?(M(),s(`div`,{key:0,class:U(r.$style.divider)},null,2)):c(``,!0),W(`div`,null,[e.version.description?ce((M(),s(`div`,{key:0,class:U(r.$style.description)},null,2)),[[a,e.version.description]]):c(``,!0),e.version.nodes&&e.version.nodes.length>0?(M(),s(`div`,{key:1,class:U(r.$style.nodes)},[(M(!0),s(w,null,L(e.version.nodes,e=>(M(),y(uu,{key:e.name,"node-type":e,title:n(e)},null,8,[`node-type`,`title`]))),128))],2)):c(``,!0)])],10,Px)):c(``,!0)}}}),[[`__cssModules`,{$style:{card:`_card_k0ocw_125`,header:`_header_k0ocw_137`,name:`_name_k0ocw_152`,divider:`_divider_k0ocw_159`,description:`_description_k0ocw_165`,"release-date":`_release-date_k0ocw_172`,nodes:`_nodes_k0ocw_179`}}]]),Ix={key:0},Lx=X(g({__name:`UpdatesPanel`,setup(e){let t=Qs(),n=$s(),r=K();return(e,i)=>(M(),y(sy,{name:u(os),direction:`ltr`,width:`520px`,"data-test-id":`version-updates-panel`},{header:k(()=>[W(`span`,{class:U(e.$style.title)},o(u(r).baseText(`updatesPanel.weVeBeenBusy`)),3)]),content:k(()=>[W(`section`,{class:U(e.$style.description)},[u(t).currentVersion?(M(),s(`p`,Ix,[R(o(u(r).baseText(`updatesPanel.youReOnVersion`,{interpolate:{currentVersionName:u(t).currentVersion.name}}))+` `,1),W(`strong`,null,[m(Cu,{date:u(t).currentVersion.createdAt},null,8,[`date`])]),R(` `+o(u(r).baseText(`updatesPanel.andIs`))+` `,1),W(`strong`,null,o(u(r).baseText(`updatesPanel.version`,{interpolate:{numberOfVersions:u(t).nextVersions.length,howManySuffix:u(t).nextVersions.length>1?`s`:``}})),1),R(` `+o(u(r).baseText(`updatesPanel.behindTheLatest`)),1)])):c(``,!0),u(t).infoUrl?(M(),y(u(q),{key:1,variant:`ghost`,size:`large`,class:U(e.$style.link),bold:!0,onClick:i[0]||=e=>u(n).goToVersions()},{default:k(()=>[m(u(J),{icon:`info`,class:`mr-2xs`}),W(`span`,null,o(u(r).baseText(`updatesPanel.howToUpdateYourN8nVersion`)),1)]),_:1},8,[`class`])):c(``,!0)],2),W(`section`,{class:U(e.$style.versions)},[(M(!0),s(w,null,L(u(t).nextVersions,t=>(M(),s(`div`,{key:t.name,class:U(e.$style[`versions-card`])},[m(Fx,{version:t},null,8,[`version`])],2))),128))],2)]),_:1},8,[`name`]))}}),[[`__cssModules`,{$style:{title:`_title_18xkw_125`,description:`_description_18xkw_133`,link:`_link_18xkw_148`,versions:`_versions_18xkw_157`,"versions-card":`_versions-card_18xkw_166`}}]]),Rx=X(g({__name:`CredentialResolverEditModal`,props:{modalName:{},data:{}},setup(e){let t=e,n=et(),r=K(),i=ha(),l=Ws(),f=d(`configuration`),p=d(!1),h=d(!1),g=d(``),_=d(``),v=d({}),b=d(null),x=d(!1),S=d(``),T=d(),E=d(``),D=d(``),O=d({}),A=d(!1),{resolverTypes:j,fetchResolverTypes:N,deleteResolver:P,isDeleting:F}=Qu(),I=a(()=>!!t.data?.resolverId),ee=e=>typeof e==`string`||typeof e==`number`||typeof e==`boolean`?!0:Array.isArray(e)?e.every(e=>typeof e==`string`||typeof e==`object`&&!!e&&!Array.isArray(e)):!!(typeof e==`object`&&e),te=e=>{let t={};for(let[n,r]of Object.entries(e))ee(r)?t[n]=r:(typeof r==`string`||typeof r==`number`||typeof r==`boolean`)&&(t[n]=String(r));return t},ne=a(()=>j.value.find(e=>e.name===_.value)),re=e=>({...e,name:typeof e.name==`string`?e.name:``,type:typeof e.type==`string`?e.type:`string`,displayName:typeof e.displayName==`string`?e.displayName:``,default:e.default??``,...typeof e.required==`boolean`&&{required:e.required},...typeof e.description==`string`&&{description:e.description},...typeof e.placeholder==`string`&&{placeholder:e.placeholder}}),z=a(()=>ne.value?.options?ne.value.options.map(re):[]),B=a(()=>te(v.value)),ie=a(()=>{for(let e of z.value){if(e.required!==!0)continue;let t=B.value[e.name];if(e.type===`string`&&!t)return!1;if(e.type===`number`){let e=typeof t==`string`&&t.startsWith(`=`);if(typeof t!=`number`&&!e)return!1}}return!0}),V=a(()=>{if(!I.value)return!1;let e=D.value!==_.value,t=JSON.stringify(O.value)!==JSON.stringify(v.value);return(e||t)&&(A.value=!0),A.value}),ae=a(()=>{let e=g.value.trim()!==``&&_.value!==``;return I.value&&V.value?e&&b.value!==null:e}),H=a(()=>[{id:`configuration`,label:r.baseText(`credentialResolverEdit.sidebar.configuration`),position:`top`},{id:`details`,label:r.baseText(`credentialResolverEdit.sidebar.details`),position:`top`}]),oe=async()=>{if(t.data?.resolverId)try{let e=await Yn(l.restApiContext,t.data.resolverId);g.value=e.name,_.value=e.type,v.value=e.decryptedConfig||{},E.value=e.name,D.value=e.type,O.value=Qa(e.decryptedConfig||{}),A.value=!1,b.value=null}catch(e){i.showError(e,r.baseText(`credentialResolverEdit.error.save`))}},se=()=>(x.value,!0),ce=async()=>{if(ae.value){if(h.value=!0,S.value=``,!ie.value){S.value=r.baseText(`credentialResolverEdit.error.missingRequiredFields`),h.value=!1;return}if(I.value&&V.value&&b.value===null){S.value=r.baseText(`credentialResolverEdit.clearCredentials.error.required`),h.value=!1;return}try{let e={name:g.value.trim(),type:_.value,config:v.value};I.value&&(V.value&&b.value!==null?e.clearCredentials=b.value:V.value||(e.clearCredentials=!1));let a;a=I.value&&t.data?.resolverId?await _i(l.restApiContext,t.data.resolverId,e):await an(l.restApiContext,e),t.data?.onSave&&t.data.onSave(a.id),i.showMessage({title:r.baseText(`credentialResolverEdit.saveSuccess.title`),type:`success`}),x.value=!1,n.emit(`close`)}catch(e){S.value=e instanceof Error?e.message:r.baseText(`credentialResolverEdit.error.save`),T.value?.scrollTo({top:0,behavior:`smooth`})}finally{h.value=!1}}},le=e=>{v.value={...v.value,[e.name]:e.value},x.value=!0,S.value=``,I.value&&(b.value=null)},ue=e=>{g.value=e,x.value=!0},de=e=>{f.value=e},fe=async()=>{t.data?.resolverId&&await P({id:t.data.resolverId,name:g.value,type:_.value,config:JSON.stringify(v.value),createdAt:new Date,updatedAt:new Date})&&(x.value=!1,t.data?.onDelete&&t.data.onDelete(t.data.resolverId),n.emit(`close`))};return C(async()=>{p.value=!0,await N(),I.value?await oe():(g.value=r.baseText(`credentialResolverEdit.defaultName`),b.value=null),p.value=!1}),(e,i)=>(M(),y(tc,{name:u(cs),"custom-class":e.$style.resolverModal,"event-bus":u(n),loading:p.value,"before-close":se,width:`70%`,height:`80%`},{header:k(()=>[W(`div`,{class:U(e.$style.header)},[W(`div`,{class:U(e.$style.resolverInfo)},[W(`div`,{class:U(e.$style.resolverIcon)},[m(u(Be),{variant:`subtle`,icon:`database`,size:`large`,disabled:!0})],2),W(`div`,{class:U(e.$style.resolverName)},[g.value?(M(),y(u(it),{key:0,"data-test-id":`credential-resolver-name`,"model-value":g.value,"onUpdate:modelValue":ue},null,8,[`model-value`])):c(``,!0),ne.value?(M(),y(u(Y),{key:1,size:`small`,tag:`p`,color:`text-light`},{default:k(()=>[R(o(ne.value.displayName),1)]),_:1})):c(``,!0)],2)],2),W(`div`,{class:U(e.$style.resolverActions)},[I.value?(M(),y(u(Be),{key:0,variant:`subtle`,title:u(r).baseText(`credentialResolverEdit.delete`),icon:`trash-2`,disabled:h.value,loading:u(F),"data-test-id":`credential-resolver-delete-button`,onClick:fe},null,8,[`title`,`disabled`,`loading`])):c(``,!0),m(y_,{saved:!1,"is-saving":h.value,disabled:!ae.value,"data-test-id":`credential-resolver-save-button`,onClick:ce},null,8,[`is-saving`,`disabled`])],2)],2)]),content:k(()=>[W(`div`,{class:U(e.$style.container),"data-test-id":`credential-resolver-edit-dialog`},[W(`div`,{class:U(e.$style.sidebar)},[(M(!0),s(w,null,L(H.value,e=>(M(),y(u(Ot),{key:e.id,item:e,active:f.value===e.id,onClick:()=>de(e.id)},null,8,[`item`,`active`,`onClick`]))),128))],2),f.value===`configuration`?(M(),s(`div`,{key:0,ref_key:`mainContentRef`,ref:T,class:U(e.$style.mainContent)},[S.value?(M(),y(u(we),{key:0,theme:`danger`,class:U(e.$style.errorAlert),"data-test-id":`credential-resolver-error-alert`},{default:k(()=>[R(o(S.value),1)]),_:1},8,[`class`])):c(``,!0),I.value&&V.value?(M(),s(`div`,{key:1,class:U(e.$style.formGroup)},[W(`label`,{class:U(e.$style.label)},o(u(r).baseText(`credentialResolverEdit.clearCredentials.label`)),3),m(u(ct),{modelValue:b.value,"onUpdate:modelValue":[i[0]||=e=>b.value=e,i[1]||=()=>{x.value=!0,S.value=``}],placeholder:u(r).baseText(`credentialResolverEdit.clearCredentials.placeholder`),"data-test-id":`credential-resolver-clear-credentials-select`},{default:k(()=>[m(u(Dt),{label:u(r).baseText(`credentialResolverEdit.clearCredentials.yes`),value:!0},null,8,[`label`]),m(u(Dt),{label:u(r).baseText(`credentialResolverEdit.clearCredentials.no`),value:!1},null,8,[`label`])]),_:1},8,[`modelValue`,`placeholder`])],2)):c(``,!0),I.value&&V.value?(M(),y(u(we),{key:2,theme:`warning`,class:U(e.$style.warningAlert),"data-test-id":`credential-resolver-clear-credentials-warning`},{default:k(()=>[R(o(u(r).baseText(`credentialResolverEdit.clearCredentials.warning`)),1)]),_:1},8,[`class`])):c(``,!0),W(`div`,{class:U(e.$style.formGroup)},[W(`label`,{class:U(e.$style.label)},o(u(r).baseText(`credentialResolverEdit.type.label`)),3),m(u(ct),{modelValue:_.value,"onUpdate:modelValue":[i[2]||=e=>_.value=e,i[3]||=()=>{x.value=!0,S.value=``,b.value=null}],placeholder:u(r).baseText(`credentialResolverEdit.type.placeholder`),"data-test-id":`credential-resolver-type-select`},{default:k(()=>[(M(!0),s(w,null,L(u(j),e=>(M(),y(u(Dt),{key:e.name,label:e.displayName,value:e.name},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`placeholder`])],2),z.value.length>0?(M(),s(`div`,{key:3,class:U(e.$style.configSection)},[m(l_,{"credential-properties":z.value,"credential-data":B.value,"documentation-url":``,"show-validation-warnings":!!S.value,onUpdate:le},null,8,[`credential-properties`,`credential-data`,`show-validation-warnings`])],2)):c(``,!0)],2)):c(``,!0),f.value===`details`?(M(),s(`div`,{key:1,class:U(e.$style.mainContent)},[W(`div`,{class:U(e.$style.formGroup)},[W(`label`,{class:U(e.$style.label)},o(u(r).baseText(`credentialResolverEdit.details.id`)),3),t.data?.resolverId?(M(),y(u(Y),{key:0,color:`text-base`},{default:k(()=>[R(o(t.data.resolverId),1)]),_:1})):(M(),y(u(Y),{key:1,color:`text-light`},{default:k(()=>[R(o(u(r).baseText(`credentialResolverEdit.details.notSaved`)),1)]),_:1}))],2)],2)):c(``,!0)],2)]),_:1},8,[`name`,`custom-class`,`event-bus`,`loading`]))}}),[[`__cssModules`,{$style:{resolverModal:`_resolverModal_1z027_125`,mainContent:`_mainContent_1z027_139`,resolverName:`_resolverName_1z027_145`,sidebar:`_sidebar_1z027_152`,header:`_header_1z027_162`,container:`_container_1z027_166`,resolverInfo:`_resolverInfo_1z027_171`,resolverActions:`_resolverActions_1z027_179`,resolverIcon:`_resolverIcon_1z027_190`,formGroup:`_formGroup_1z027_196`,label:`_label_1z027_203`,configSection:`_configSection_1z027_209`,errorAlert:`_errorAlert_1z027_213`,warningAlert:`_warningAlert_1z027_217`}}]]),zx=g({__name:`Modals`,setup(e){return(e,t)=>(M(),s(`div`,null,[m(oy,{name:u(_r)},{default:k(({modalName:e,activeId:t,mode:n})=>[m(x_,{"modal-name":e,mode:n,"active-id":t},null,8,[`modal-name`,`mode`,`active-id`])]),_:1},8,[`name`]),m(oy,{name:u(fr)},{default:k(({modalName:e,data:{mode:t,activeId:n}})=>[m($d,{"modal-name":e,mode:t,"active-id":n},null,8,[`modal-name`,`mode`,`active-id`])]),_:1},8,[`name`]),m(oy,{name:u(ns)},{default:k(()=>[m(Xd)]),_:1},8,[`name`]),m(oy,{name:u(bs)},{default:k(()=>[m(Jg)]),_:1},8,[`name`]),m(oy,{name:u(Cr)},{default:k(()=>[m(S_)]),_:1},8,[`name`]),m(oy,{name:u(Go)},{default:k(({modalName:e,active:t,data:n})=>[m(F_,{data:n,"is-active":t,"modal-name":e},null,8,[`data`,`is-active`,`modal-name`])]),_:1},8,[`name`]),m(oy,{name:u(Ro)},{default:k(()=>[m(uv)]),_:1},8,[`name`]),m(oy,{name:u(On)},{default:k(()=>[m(uy)]),_:1},8,[`name`]),m(oy,{name:u(jr)},{default:k(()=>[m(kb)]),_:1},8,[`name`]),m(oy,{name:u(kr)},{default:k(()=>[m(Ob)]),_:1},8,[`name`]),m(oy,{name:u(os),"keep-alive":!0},{default:k(()=>[m(Lx)]),_:1},8,[`name`]),m(oy,{name:u(Os),"keep-alive":!0},{default:k(({active:e})=>[m(cy,{"is-active":e},null,8,[`is-active`])]),_:1},8,[`name`]),m(oy,{name:u(Mo)},{default:k(()=>[m(ox)]),_:1},8,[`name`]),m(oy,{name:u(ms)},{default:k(()=>[m(tf)]),_:1},8,[`name`]),m(oy,{name:u(Ho)},{default:k(()=>[m(nf)]),_:1},8,[`name`]),m(oy,{name:u(Xn)},{default:k(({modalName:e,data:t})=>[m(fv,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Jr)},{default:k(({modalName:e,data:t})=>[m(P_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(lo)},{default:k(()=>[m(Zd)]),_:1},8,[`name`]),m(oy,{name:u(As)},{default:k(()=>[m(iy)]),_:1},8,[`name`]),m(oy,{name:u(wo)},{default:k(()=>[m(px)]),_:1},8,[`name`]),m(oy,{name:u(eo)},{default:k(({modalName:e,active:t,data:n})=>[m(sx,{data:n,"is-active":t,"modal-name":e},null,8,[`data`,`is-active`,`modal-name`])]),_:1},8,[`name`]),m(oy,{name:u(xi)},{default:k(()=>[m(Xg)]),_:1},8,[`name`]),m(oy,{name:u(Zo)},{default:k(()=>[m(Z_)]),_:1},8,[`name`]),m(oy,{name:u(Jn)},{default:k(({modalName:e,activeId:t,mode:n})=>[m(t_,{"modal-name":e,"active-package-name":t,mode:n},null,8,[`modal-name`,`active-package-name`,`mode`])]),_:1},8,[`name`]),m(oy,{name:u(Es)},{default:k(({modalName:e,data:t})=>[m(Ay,{"modal-name":e,destination:t.destination,"is-new":t.isNew,"event-bus":t.eventBus},null,8,[`modal-name`,`destination`,`is-new`,`event-bus`])]),_:1},8,[`name`]),m(oy,{name:u(un)},{default:k(({modalName:e,data:t})=>[m(_b,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Wn)},{default:k(({modalName:e,data:t})=>[m(rb,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u($n)},{default:k(({modalName:e,data:t})=>[m(cb,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(vo)},{default:k(({modalName:e,data:t})=>[m(fx,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(ls)},{default:k(({modalName:e,data:t})=>[m(R_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Ka)},{default:k(({modalName:e,data:t})=>[m(q_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(ws)},{default:k(({modalName:e,data:t})=>[m(J_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(En)},{default:k(({modalName:e,data:t})=>[m(C_,{"data-test-id":`debug-paywall-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(xo)},{default:k(({modalName:e,data:t})=>[m(Lb,{"data-test-id":`workflow-history-version-restore-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(js)},{default:k(({modalName:e,data:t})=>[m(Rb,{"data-test-id":`workflow-history-version-unpublish-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(ro)},{default:k(({modalName:e,data:t})=>[m(Bb,{"data-test-id":`workflow-history-name-version-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Ga)},{default:k(({modalName:e,data:t})=>[m(My,{"data-test-id":`setup-workflow-credentials-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Bn)},{default:k(({modalName:e,data:t})=>[m(vy,{"data-test-id":`project-move-resource-modal`,"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Ha)},{default:k(({modalName:e,data:t})=>[m(ef,{name:e,data:t},null,8,[`name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(zi)},{default:k(({modalName:e,data:t})=>[m(r_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Sn)},{default:k(({modalName:e,activeId:t,data:n})=>[m(k_,{"modal-name":e,"active-id":t,data:n},null,8,[`modal-name`,`active-id`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(yn)},{default:k(({modalName:e,activeId:t,data:n})=>[m(M_,{"modal-name":e,"active-id":t,data:n},null,8,[`modal-name`,`active-id`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(as)},{default:k(({modalName:e,data:t})=>[m(Pb,{data:t,"modal-name":e},null,8,[`data`,`modal-name`])]),_:1},8,[`name`]),m(oy,{name:u(ts)},{default:k(({modalName:e,data:t})=>[m(X_,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(ho)},{default:k(({modalName:e,data:t})=>[m(Tx,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Ja)},{default:k(({modalName:e,data:t})=>[m(Ib,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Ra)},{default:k(({modalName:e,data:t})=>[m(Mb,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(Jo)},{default:k(({modalName:e,data:t})=>[m(vx,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(gs)},{default:k(({modalName:e,data:t})=>[m(xx,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(gn)},{default:k(({data:e})=>[m(wx,{mode:e?.mode??`new`,variable:e?.variable},null,8,[`mode`,`variable`])]),_:1},8,[`name`]),m(oy,{name:u(zo)},{default:k(({modalName:e,data:t})=>[m(lv,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(fo)},{default:k(({modalName:e,data:t})=>[m(Ex,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(za)},{default:k(({modalName:e,data:t})=>[m(Ox,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(oo)},{default:k(({modalName:e,data:t})=>[m(Bb,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(oy,{name:u(cs)},{default:k(({modalName:e,data:t})=>[m(Rx,{"modal-name":e,data:t},null,8,[`modal-name`,`data`])]),_:1},8,[`name`]),m(mx)]))}}),Bx=[`id`],Vx=g({__name:`AppModals`,setup(e){return(e,t)=>(M(),s(`div`,{id:u(Ua)},[m(zx)],8,Bx))}}),Hx=X(g({__name:`CommandBarItemTitle`,props:{title:{},suffix:{},suffixIcon:{},actionText:{},shortcut:{},isSelected:{type:Boolean},isHovered:{type:Boolean}},setup(e){return(t,n)=>(M(),s(`span`,{class:U(t.$style.container)},[W(`span`,{class:U(t.$style.title)},o(e.title),3),e.suffix?(M(),s(`span`,{key:0,class:U(t.$style.suffix)},[e.suffixIcon?(M(),y(iu,{key:0,icon:e.suffixIcon,size:`mini`,"border-less":!0},null,8,[`icon`])):c(``,!0),R(` `+o(e.suffix),1)],2)):c(``,!0),e.actionText&&(e.isSelected||e.isHovered)?(M(),s(`span`,{key:1,class:U(t.$style.action)},o(e.actionText),3)):c(``,!0),e.shortcut?(M(),s(`span`,{key:2,class:U(t.$style.shortcut)},[m(u(Ue),{keys:e.shortcut.keys,"meta-key":e.shortcut.metaKey,"alt-key":e.shortcut.altKey,"shift-key":e.shortcut.shiftKey},null,8,[`keys`,`meta-key`,`alt-key`,`shift-key`])],2)):c(``,!0)],2))}}),[[`__cssModules`,{$style:{container:`_container_epkes_125`,title:`_title_epkes_132`,suffix:`_suffix_epkes_141`,action:`_action_epkes_152`,shortcut:`_shortcut_epkes_158`}}]]),Ux={ADD_NODE:`add-node`,OPEN_NODE:`open-node`,ADD_STICKY:`add-sticky`};function Wx(e){let t=K(),{lastQuery:n}=e,{addNodes:r,setNodeActive:i,editableWorkflow:o}=$l(),s=Jt(),c=Wi(),l=ca(),u=Gi(),d=bu(),{generateMergedNodesAndActions:f}=aa(),p=a(()=>l.preferences.branchReadOnly||d.shouldBeReadOnly),m=a(()=>u.workflow.isArchived),h=a(()=>vs(u.workflow.scopes).workflow),g=e=>h.value[e]===!0&&!p.value&&!m.value||!u.isWorkflowSaved[u.workflowId],_=a(()=>{let e=c.httpOnlyCredentialTypes,t=s.visibleNodeTypes;return f(t,e).mergedNodes}),v=(e,n)=>{let{name:i,displayName:a}=e;return{id:i,title:n?`${t.baseText(`generic.add`)} ${a}`:a,section:n?t.baseText(`commandBar.sections.nodes`):t.baseText(`commandBar.nodes.addNode`),keywords:[a],icon:{component:uu,props:{nodeType:e,size:16}},handler:async()=>{let e=await r([{type:i}]);e&&e.length>0&&Ql.emit(`nodes:select`,{ids:[e[0].id]})}}},y=a(()=>g(`update`)?_.value.map(e=>v(e,!1)):[]),b=a(()=>n.value.length<=2||!g(`update`)?[]:_.value.map(e=>v(e,!0))),x=(e,n)=>{let{id:r,name:a,type:o}=e,c=s.getNodeType(e.type,e.typeVersion);return{id:r,title:n?t.baseText(`generic.openResource`,{interpolate:{resource:a}}):a,section:n?t.baseText(`commandBar.sections.nodes`):t.baseText(`commandBar.nodes.openNode`),keywords:[a,o],icon:{component:uu,props:{nodeType:c,size:16}},handler:()=>{i(r,`command_bar`)},placeholder:t.baseText(`commandBar.nodes.searchPlaceholder`)}},S=a(()=>o.value.nodes.map(e=>x(e,!1))),C=a(()=>n.value.length<=2?[]:o.value.nodes.map(e=>x(e,!0)));return{commands:a(()=>[...g(`update`)?[{id:Ux.ADD_NODE,title:{component:Hx,props:{title:t.baseText(`commandBar.nodes.addNode`),shortcut:{keys:[`tab`]}}},keywords:[t.baseText(`commandBar.nodes.addNode`)],section:t.baseText(`commandBar.sections.nodes`),placeholder:t.baseText(`commandBar.nodes.searchPlaceholder`),children:[...y.value],icon:{component:J,props:{icon:`plus`}}}]:[],...b.value,{id:Ux.OPEN_NODE,title:t.baseText(`commandBar.nodes.openNode`),section:t.baseText(`commandBar.sections.nodes`),children:[...S.value],placeholder:t.baseText(`commandBar.nodes.searchPlaceholder`),icon:{component:J,props:{icon:`columns-3-cog`}}},...C.value,...g(`update`)?[{id:Ux.ADD_STICKY,title:{component:Hx,props:{title:t.baseText(`commandBar.nodes.addStickyNote`),shortcut:{shiftKey:!0,keys:[`s`]}}},section:t.baseText(`commandBar.sections.nodes`),handler:()=>{Ql.emit(`create:sticky`)},icon:{component:J,props:{icon:`sticky-note`}}}]:[]])}}var Gx=Zn(),Kx=t(Gl(),1),qx={OPEN_CREDENTIAL:`open-credential`,OPEN_SUB_WORKFLOW:`open-sub-workflow`,TEST_WORKFLOW:`test-workflow`,SELECT_ALL:`select-all`,OPEN_WORKFLOW_SETTINGS:`open-workflow-settings`,TIDY_UP_WORKFLOW:`tidy-up-workflow`,RENAME_WORKFLOW:`rename-workflow`,ADD_TAG:`add-tag`,DUPLICATE_WORKFLOW:`duplicate-workflow`,DOWNLOAD_WORKFLOW:`download-workflow`,IMPORT_WORKFLOW_FROM_URL:`import-workflow-from-url`,IMPORT_WORKFLOW_FROM_FILE:`import-workflow-from-file`,ARCHIVE_WORKFLOW:`archive-workflow`,UNARCHIVE_WORKFLOW:`unarchive-workflow`,DELETE_WORKFLOW:`delete-workflow`,PUBLISH_WORKFLOW:`publish-workflow`,UNPUBLISH_WORKFLOW:`unpublish-workflow`};function Jx(){let e=K(),{editableWorkflow:t}=$l(),n=Ws(),r=Vi(),i=Qn(),o=Gi(),s=ca(),c=bu(),l=jt(),u=gu({router:l}),d=gr(),f=zn(),p=a(()=>s.preferences.branchReadOnly||c.shouldBeReadOnly),m=a(()=>o.workflow.isArchived),h=a(()=>vs(o.workflow.scopes).workflow),g=e=>h.value[e]===!0&&!p.value||!o.isWorkflowSaved[o.workflowId],_=a(()=>{let n=(0,Kx.default)(t.value.nodes.map(e=>Object.values(e.credentials??{})).flat(),e=>e.id);return n.length===0?[]:[{id:qx.OPEN_CREDENTIAL,title:e.baseText(`commandBar.workflow.openCredential`),section:e.baseText(`commandBar.sections.credentials`),children:[...n.map(e=>({id:e.id,title:e.name,handler:()=>{typeof e.id==`string`&&r.openExistingCredential(e.id)}}))],icon:{component:J,props:{icon:`arrow-right`}}}]}),v=a(()=>[...g(`update`)&&!m.value?[{id:qx.PUBLISH_WORKFLOW,title:e.baseText(`commandBar.workflow.publish`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{ri.emit(`publishWorkflow`)},icon:{component:J,props:{icon:`circle-check`}}},{id:qx.UNPUBLISH_WORKFLOW,title:e.baseText(`commandBar.workflow.unpublish`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{ri.emit(`unpublishWorkflow`)},icon:{component:J,props:{icon:`circle-minus`}}},{id:qx.TEST_WORKFLOW,title:{component:Hx,props:{title:e.baseText(`commandBar.workflow.test`),shortcut:{metaKey:!0,keys:[`enter`]}}},section:e.baseText(`commandBar.sections.workflow`),keywords:[e.baseText(`commandBar.workflow.test`),e.baseText(`commandBar.workflow.keywords.test`),e.baseText(`commandBar.workflow.keywords.execute`),e.baseText(`commandBar.workflow.keywords.run`),e.baseText(`commandBar.workflow.keywords.workflow`)],handler:()=>{u.runEntireWorkflow(`main`)},icon:{component:J,props:{icon:`flask-conical`}}},{id:qx.TIDY_UP_WORKFLOW,title:{component:Hx,props:{title:e.baseText(`commandBar.workflow.tidyUp`),shortcut:{shiftKey:!0,altKey:!0,keys:[`t`]}}},keywords:[e.baseText(`commandBar.workflow.tidyUp`)],section:e.baseText(`commandBar.sections.workflow`),handler:()=>{Ql.emit(`tidyUp`,{source:`command-bar`})},icon:{component:J,props:{icon:`wand-sparkles`}}},{id:qx.RENAME_WORKFLOW,title:e.baseText(`commandBar.workflow.rename`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{ri.emit(`renameWorkflow`)},icon:{component:J,props:{icon:`pencil-alt`}}},{id:qx.ADD_TAG,title:e.baseText(`workflowDetails.addTag`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{ri.emit(`addTag`)},icon:{component:J,props:{icon:`tags`}}}]:[],{id:qx.SELECT_ALL,title:{component:Hx,props:{title:e.baseText(`commandBar.workflow.selectAll`),shortcut:{metaKey:!0,keys:[`a`]}}},section:e.baseText(`commandBar.sections.workflow`),keywords:[e.baseText(`commandBar.workflow.selectAll`)],handler:()=>{Ql.emit(`nodes:selectAll`)},icon:{component:J,props:{icon:`list-checks`}}},{id:qx.OPEN_WORKFLOW_SETTINGS,title:e.baseText(`commandBar.workflow.openSettings`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{r.openModal(Mo)},icon:{component:J,props:{icon:`cog`}}},...g(`create`)?[{id:qx.DUPLICATE_WORKFLOW,title:e.baseText(`commandBar.workflow.duplicate`),section:e.baseText(`commandBar.sections.workflow`),handler:()=>{r.openModalWithData({name:Go,data:{id:o.workflowId,name:t.value.name,tags:t.value.tags}})},icon:{component:J,props:{icon:`copy`}}}]:[]]),y=a(()=>{let n=t.value.nodes.filter(e=>e.type===Wo).map(e=>e?.parameters?.workflowId).filter(e=>bo(e)&&typeof e.value==`string`&&typeof e.cachedResultName==`string`).map(({value:e,cachedResultName:t})=>({id:e,name:t}));return n.length===0?[]:[{id:qx.OPEN_SUB_WORKFLOW,title:e.baseText(`commandBar.workflow.openSubworkflow`),section:e.baseText(`commandBar.sections.workflow`),children:[...n.map(e=>({id:e.id,title:e.name,handler:()=>{let{href:t}=l.resolve({name:$.WORKFLOW,params:{name:e.id}});window.open(t,`_blank`,`noreferrer`)}}))],icon:{component:J,props:{icon:`sign-in-alt`}}}]}),b=a(()=>[{id:qx.DOWNLOAD_WORKFLOW,title:e.baseText(`commandBar.workflow.download`),section:e.baseText(`commandBar.sections.workflow`),handler:async()=>{let e=await d.getWorkflowDataToSave(),{tags:r,...a}=e,o={...a,meta:{...e.meta,instanceId:n.instanceId},tags:(r??[]).map(e=>i.tagsById[e])},s=new Blob([JSON.stringify(o,null,2)],{type:`application/json;charset=utf-8`}),c=t.value.name||`unsaved_workflow`;c=c.replace(/[^a-z0-9]/gi,`_`),f.track(`User exported workflow`,{workflow_id:e.id}),(0,Gx.saveAs)(s,c+`.json`)},icon:{component:J,props:{icon:`download`}},keywords:[e.baseText(`commandBar.workflow.keywords.download`),e.baseText(`commandBar.workflow.keywords.export`)]}]),x=a(()=>!g(`update`)||m.value?[]:[{id:qx.IMPORT_WORKFLOW_FROM_URL,title:e.baseText(`commandBar.workflow.importFromURL`),section:e.baseText(`commandBar.sections.workflow`),icon:{component:J,props:{icon:`link`}},handler:()=>{r.openModal(Ro)}},{id:qx.IMPORT_WORKFLOW_FROM_FILE,title:e.baseText(`commandBar.workflow.importFromFile`),section:e.baseText(`commandBar.sections.workflow`),icon:{component:J,props:{icon:`file-import`}},handler:()=>{ri.emit(`importWorkflowFromFile`)}}]),S=a(()=>g(`delete`)?m.value?[{id:qx.UNARCHIVE_WORKFLOW,title:e.baseText(`commandBar.workflow.unarchive`),section:e.baseText(`commandBar.sections.workflow`),keywords:[e.baseText(`commandBar.workflow.keywords.restore`)],icon:{component:J,props:{icon:`archive-restore`}},handler:()=>{ri.emit(`unarchiveWorkflow`)}},{id:qx.DELETE_WORKFLOW,title:e.baseText(`commandBar.workflow.delete`),section:e.baseText(`commandBar.sections.workflow`),icon:{component:J,props:{icon:`trash`}},handler:()=>{ri.emit(`deleteWorkflow`)}}]:[{id:qx.ARCHIVE_WORKFLOW,title:e.baseText(`commandBar.workflow.archive`),section:e.baseText(`commandBar.sections.workflow`),keywords:[e.baseText(`commandBar.workflow.keywords.delete`)],icon:{component:J,props:{icon:`trash`}},handler:()=>{ri.emit(`archiveWorkflow`)}}]:[]),C=a(()=>[...v.value,...y.value,...b.value,...x.value,...S.value]);return{commands:a(()=>[...C.value,..._.value])}}var Yx=t(Xs(),1),Xx={CREATE_WORKFLOW:`create-workflow`,OPEN_WORKFLOW:`open-workflow`};function Zx(e){let t=K(),{lastQuery:n,activeNodeId:r,currentProjectName:i}=e,o=Jt(),s=Wi(),c=Gi(),l=cr(),u=vn(),f=Qn(),p=ca(),m=eu(),h=jt(),g=Te(),{generateMergedNodesAndActions:_}=aa(),v=d([]),y=d(new Map),b=d(new Map),x=d(!1),S=a(()=>u.currentProject??u.personalProject);function C(e){return e.sort((e,t)=>e.homeProject?.id===u.currentProjectId?-1:t.homeProject?.id===u.currentProjectId?1:0)}let w=async e=>{try{let t=(e||``).trim(),n=t.toLowerCase(),r=s.httpOnlyCredentialTypes,i=o.allNodeTypes,{mergedNodes:a}=_(i,r),c=a.filter(e=>e.displayName?.toLowerCase()===n),u=Array.from(new Set(c.map(e=>e.name))),d=f.allTags.find(e=>e.name.toLowerCase()===n),p=l.searchWorkflows({query:t,select:[`id`,`name`,`active`,`ownedBy`,`parentFolder`,`isArchived`,`description`]}),h=u.length>0?l.searchWorkflows({nodeTypes:u,select:[`id`,`name`,`active`,`nodes`,`ownedBy`,`parentFolder`,`isArchived`,`description`]}):Promise.resolve([]),g=d?l.searchWorkflows({tags:[d.name],select:[`id`,`name`,`active`,`ownedBy`,`tags`,`parentFolder`,`isArchived`,`description`]}):Promise.resolve([]),[x,S,w]=await Promise.all([p,h,g]),T=new Map,E=new Map,D=new Map(c.map(e=>[e.name,e.displayName]));S.forEach(e=>{if(!e.nodes)return;let t=e.nodes.filter(e=>u.includes(e.type));if(t.length===0)return;E.set(e.id,t[0].type);let n=t.map(e=>D.get(e.type)).filter(e=>!!e);n.length>0&&T.set(e.id,n)}),y.value=T,b.value=E;let O=[...x,...S,...w],k=Array.from(new Map(O.map(e=>[e.id,e])).values()).filter(e=>!e.isArchived);v.value=C(k);let A=k.map(e=>e.parentFolder).filter(e=>e!=null);A.length>0&&m.cacheFolders(A.map(e=>({id:e.id,name:e.name,parentFolder:void 0})))}catch{v.value=[],y.value.clear(),b.value.clear()}finally{x.value=!1}},T=(0,Yx.default)(w,300),E=e=>{let t=[],n=e;for(;n;){let e=m.getCachedFolder(n);if(!e)break;t.unshift(e.name),n=e.parentFolder}return t},D=e=>e.homeProject?.type===Nn.Personal?{type:`icon`,value:`user`}:e.homeProject?.name?ru(e.homeProject.icon)?e.homeProject.icon:{type:`icon`,value:`layers`}:{type:`icon`,value:`house`},O=e=>{let n=[];if(e.homeProject&&e.homeProject.type===Nn.Personal?n.push(t.baseText(`projects.menu.personal`)):e.homeProject?.name&&n.push(e.homeProject.name),e.parentFolder?.id){let t=E(e.parentFolder.id);t.length>2?n.push(t[0],`...`,t[t.length-1]):n.push(...t)}return n.join(` / `)},k=(e,n)=>{let r=y.value.get(e.id)??[],i=b.value.get(e.id),a;if(i){let e=o.getNodeType(i);e&&(a={component:uu,props:{nodeType:e,size:24}})}let s=e.name;r=[...r,s],e.description&&(r=[...r,e.description]),e.tags&&e.tags.length>0&&(r=[...r,...e.tags.map(e=>typeof e==`string`?e:e.name)]);let c=O(e),l=e.name||t.baseText(`commandBar.workflows.unnamed`),u=n?t.baseText(`generic.openResource`,{interpolate:{resource:l}}):l,d=n?t.baseText(`commandBar.sections.workflows`):t.baseText(`commandBar.workflows.open`);return{id:e.id,matchAnySearchTerm:!n,title:{component:Hx,props:{title:u,suffix:c,...c?{suffixIcon:D(e)}:{}}},section:d,...r.length>0?{keywords:r}:{},...a?{icon:a}:{},handler:()=>{let t=h.resolve({name:$.WORKFLOW,params:{name:e.id}});window.location.href=t.fullPath}}},A=a(()=>v.value.map(e=>k(e,!1))),j=a(()=>n.value.length<=2||!c.canViewWorkflows?[]:v.value.map(e=>k(e,!0))),M=a(()=>{let e=!p.preferences.branchReadOnly&&vs(S.value?.scopes).workflow.create,n={id:Xx.CREATE_WORKFLOW,title:t.baseText(`commandBar.workflows.create`,{interpolate:{projectName:i.value}}),keywords:[t.baseText(`workflows.add`)],section:t.baseText(`commandBar.sections.workflows`),icon:{component:J,props:{icon:`plus`,color:`text-light`}},handler:()=>{let e=h.resolve({name:$.NEW_WORKFLOW,query:{projectId:u.currentProjectId,parentFolderId:g.params.folderId}});window.location.href=e.fullPath}};return[...e?[n]:[],...c.canViewWorkflows?[{id:Xx.OPEN_WORKFLOW,title:t.baseText(`commandBar.workflows.open`),section:t.baseText(`commandBar.sections.workflows`),placeholder:t.baseText(`commandBar.workflows.searchPlaceholder`),children:A.value,icon:{component:J,props:{icon:`arrow-right`,color:`text-light`}}}]:[],...j.value]});function N(e){let t=e.trim(),n=r.value===Xx.OPEN_WORKFLOW,i=r.value===null&&t.length>2;(n||i)&&(x.value=!0,T(t))}function P(e){r.value=e,e===Xx.OPEN_WORKFLOW?(x.value=!0,w(``)):e===null&&(x.value=!1,v.value=[],y.value.clear(),b.value.clear())}async function F(){await f.fetchAll()}return{commands:M,handlers:{onCommandBarChange:N,onCommandBarNavigateTo:P},isLoading:x,initialize:F}}var Qx=t(Xs(),1),$x={OPEN_DATA_TABLE:`open-data-table`,CREATE_DATA_TABLE:`create-data-table`};function eS(e){let t=K(),{lastQuery:n,activeNodeId:r,currentProjectName:i}=e,o=ec(),s=vn(),c=ca(),l=jt(),u=Te(),f=d([]),p=d(!1),m=d(!1),h=a(()=>typeof u.params.projectId==`string`?u.params.projectId:_.value),g=a(()=>s.currentProject??s.personalProject),_=a(()=>s.myProjects.find(e=>e.type===`personal`)?.id);function v(e){return e.sort((e,t)=>e.project?.id===h.value?-1:t.project?.id===h.value?1:0)}let y=async e=>{try{let t=(e||``).trim();m.value||=(await o.fetchDataTables(``,1,1e3),!0);let n=t.toLowerCase();f.value=v(o.dataTables.filter(e=>e.name.toLowerCase().includes(n)))}catch{f.value=[]}finally{p.value=!1}},b=(0,Qx.default)(y,300),x=e=>e.project&&e.project.type===`personal`?t.baseText(`projects.menu.personal`):e.project?.name??``,S=(e,n)=>{let r=[e.name],i=n?t.baseText(`generic.openResource`,{interpolate:{resource:e.name}}):e.name,a=n?t.baseText(`commandBar.sections.dataTables`):t.baseText(`commandBar.dataTables.open`);return{id:e.id,title:{component:Hx,props:{title:i,suffix:x(e)}},section:a,keywords:r,handler:()=>{l.push({name:no,params:{projectId:e.projectId,id:e.id}})}}},C=a(()=>f.value.map(e=>S(e,!1))),w=a(()=>n.value.length<=2||!o.canViewDataTables?[]:f.value.map(e=>S(e,!0))),T=a(()=>{let e=!c.preferences.branchReadOnly&&vs(g.value?.scopes).dataTable.create,n={id:$x.CREATE_DATA_TABLE,title:t.baseText(`commandBar.dataTables.create`,{interpolate:{projectName:i.value}}),section:t.baseText(`commandBar.sections.dataTables`),icon:{component:J,props:{icon:`table`,color:`text-light`}},handler:()=>{h.value&&l.push({name:Ko,params:{projectId:h.value,new:`new`}})}};return[...e?[n]:[],...o.canViewDataTables?[{id:$x.OPEN_DATA_TABLE,title:t.baseText(`commandBar.dataTables.open`),section:t.baseText(`commandBar.sections.dataTables`),placeholder:t.baseText(`commandBar.dataTables.searchPlaceholder`),icon:{component:J,props:{icon:`table`,color:`text-light`}},children:C.value}]:[],...w.value]});function E(e){if(!o.canViewDataTables)return;let t=e.trim(),n=r.value===$x.OPEN_DATA_TABLE,i=r.value===null&&t.length>2;(n||i)&&(p.value=!0,b(t))}function D(e){r.value=e,e===$x.OPEN_DATA_TABLE?(p.value=!0,y(``)):e===null&&(p.value=!1,f.value=[],m.value=!1)}return{commands:T,handlers:{onCommandBarChange:E,onCommandBarNavigateTo:D},isLoading:p}}var tS=t(Xs(),1),nS={CREATE_CREDENTIAL:`create-credential`,OPEN_CREDENTIAL:`open-credential`};function rS(e){let t=K(),{lastQuery:n,activeNodeId:r,currentProjectName:i}=e,o=Wi(),s=vn(),c=Vi(),l=ca(),u=Te(),f=jt(),p=d([]),m=d(!1),h=a(()=>s.myProjects.find(e=>e.type===`personal`)?.id),g=a(()=>s.currentProject??s.personalProject);function _(e){let t=typeof u.params.projectId==`string`?u.params.projectId:h.value;return e.sort((e,n)=>e.homeProject?.id===t?-1:n.homeProject?.id===t?1:0)}let v=async e=>{try{let t=(e||``).trim();await o.fetchAllCredentials();let n=t.toLowerCase();p.value=_(o.allCredentials.filter(e=>e.name.toLowerCase().includes(n)))}catch{p.value=[]}finally{m.value=!1}},y=(0,tS.default)(v,300),b=e=>e.homeProject&&e.homeProject.type===`personal`?t.baseText(`projects.menu.personal`):e.homeProject?.name??``,x=(e,n)=>{let r=[e.name],i=n?t.baseText(`generic.openResource`,{interpolate:{resource:e.name}}):e.name,a=n?t.baseText(`commandBar.sections.credentials`):t.baseText(`commandBar.credentials.open`);return{id:e.id,title:{component:Hx,props:{title:i,suffix:b(e)}},section:a,keywords:r,icon:{component:su,props:{credentialTypeName:e.type}},handler:()=>{c.openExistingCredential(e.id)}}},S=a(()=>p.value.map(e=>x(e,!1))),C=a(()=>n.value.length<=2?[]:p.value.map(e=>x(e,!0))),w=a(()=>{let e=!l.preferences.branchReadOnly&&vs(g.value?.scopes).credential.create,n={id:nS.CREATE_CREDENTIAL,title:t.baseText(`commandBar.credentials.create`,{interpolate:{projectName:i.value}}),section:t.baseText(`commandBar.sections.credentials`),keywords:[t.baseText(`credentials.add`)],icon:{component:J,props:{icon:`lock`,color:`text-light`}},handler:()=>{let e=typeof u.params.projectId==`string`?u.params.projectId:h.value,t=u.name===$.SHARED_CREDENTIALS?$.SHARED_CREDENTIALS:u.name===$.CREDENTIALS?$.CREDENTIALS:$.PROJECTS_CREDENTIALS;f.push({name:t,params:{projectId:e,credentialId:`create`}})}};return[...e?[n]:[],{id:nS.OPEN_CREDENTIAL,title:t.baseText(`commandBar.credentials.open`),section:t.baseText(`commandBar.sections.credentials`),placeholder:t.baseText(`commandBar.credentials.searchPlaceholder`),children:S.value,icon:{component:J,props:{icon:`lock`,color:`text-light`}}},...C.value]});function T(e){let t=e.trim(),n=r.value===nS.OPEN_CREDENTIAL,i=r.value===null&&t.length>2;(n||i)&&(m.value=!0,y(t))}function E(e){r.value=e,e===nS.OPEN_CREDENTIAL?(m.value=!0,v(``)):e===null&&(m.value=!1,p.value=[])}async function D(){await o.fetchCredentialTypes(!1)}return{commands:w,handlers:{onCommandBarChange:T,onCommandBarNavigateTo:E},isLoading:m,initialize:D}}function iS(){let e=K(),t=vn(),n=Gi(),r=jt(),i=Te(),o=a(()=>t.myProjects.find(e=>e.type===`personal`)?.id),s=a(()=>typeof i.params.projectId==`string`?i.params.projectId:o.value);return{commands:a(()=>n.canViewWorkflows?[{id:`open-executions`,title:e.baseText(`commandBar.executions.open`),section:e.baseText(`commandBar.sections.executions`),icon:{component:J,props:{icon:`arrow-right`}},handler:()=>{s.value===o.value?r.push({name:$.EXECUTIONS}):r.push({name:$.PROJECTS_EXECUTIONS,params:{projectId:s.value}})}}]:[])}}var aS={CREATE_PROJECT:`create-project`,OPEN_PROJECT:`open-project`};function oS(e){let t=K(),{lastQuery:n,activeNodeId:r}=e,i=vn(),o=ld(),s=jt(),c=a(()=>{let e=(n.value||``).trim().toLowerCase(),t=i.availableProjects;return e?t.filter(t=>t.name?.toLowerCase().includes(e)||t.id?.toLowerCase().includes(e)):t}),l=(e,n)=>{let r=e.type===`personal`?t.baseText(`projects.menu.personal`):e.name?e.name:t.baseText(`commandBar.projects.unnamed`);n&&(r=t.baseText(`generic.openResource`,{interpolate:{resource:r}}));let i=n?t.baseText(`commandBar.sections.projects`):t.baseText(`commandBar.projects.open`);return{id:e.id,title:r,section:i,keywords:[r],handler:()=>{s.push({name:$.PROJECTS_WORKFLOWS,params:{projectId:e.id}})}}},u=a(()=>r.value===aS.OPEN_PROJECT?c.value.map(e=>l(e,!1)):[]),d=a(()=>!(r.value===null&&n.value.trim().length>2)||!i.canViewProjects?[]:c.value.map(e=>l(e,!0))),f=a(()=>{let e=[];return i.hasPermissionToCreateProjects&&i.canCreateProjects&&e.push({id:aS.CREATE_PROJECT,title:t.baseText(`commandBar.projects.create`),section:t.baseText(`commandBar.sections.projects`),icon:{component:J,props:{icon:`layers`,color:`text-light`}},handler:()=>{o.createProject(`command_bar`)}}),i.availableProjects.length>0&&i.canViewProjects&&e.push({id:aS.OPEN_PROJECT,title:t.baseText(`commandBar.projects.open`),section:t.baseText(`commandBar.sections.projects`),placeholder:t.baseText(`commandBar.projects.searchPlaceholder`),children:u.value,icon:{component:J,props:{icon:`layers`,color:`text-light`}}}),[...e,...d.value]});function p(e){n.value=e}function m(e){r.value=e}return{commands:f,handlers:{onCommandBarChange:p,onCommandBarNavigateTo:m}}}var sS={DELETE_EXECUTION:`delete-execution`,RETRY_CURRENT_WORKFLOW:`retry-current-workflow`,RETRY_ORIGINAL_WORKFLOW:`retry-original-workflow`,STOP_EXECUTION:`stop-execution`,DEBUG_EXECUTION:`debug-execution`,VOTE_UP:`vote-up`,VOTE_DOWN:`vote-down`};function cS(){let e=K(),t=jt(),n=Te(),r=oc(),i=cr(),o=la(),s=ha(),c=hr(),l=zn(),u=a(()=>n.params.name),d=a(()=>r.activeExecution),f=a(()=>vs(i.getWorkflowById(u.value)?.scopes).workflow),p=a(()=>o.isEnterpriseFeatureEnabled[Fo.AdvancedExecutionFilters]),m=a(()=>!!d.value?.annotation&&(d.value?.annotation.vote||d.value?.annotation.tags.length>0)),h=a(()=>d.value?.annotation?.vote||null),g=a(()=>u.value?[...r.currentExecutionsByWorkflowId[u.value]??[],...r.executionsByWorkflowId[u.value]??[]]:[]),_=a(()=>{if(!d.value)return!1;let e=d.value.status;return e===`error`||e===`crashed`||e===`canceled`}),v=a(()=>d.value?d.value.status===`running`||d.value.status===`new`:!1);async function y(){let n=[m.value&&e.baseText(`executionDetails.confirmMessage.annotationsNote`),e.baseText(`executionDetails.confirmMessage.message`)].filter(Boolean).join(` `);if(await c.confirm(n,e.baseText(`executionDetails.confirmMessage.headline`),{type:`warning`,confirmButtonText:e.baseText(`executionDetails.confirmMessage.confirmButtonText`),cancelButtonText:``})===`confirm`)try{let n=d.value.id,i=g.value.findIndex(e=>e.id===n),a=g.value[i+1]||g.value[i-1]||g.value[0];await r.deleteExecutions({ids:[n]}),g.value.length>0?await t.replace({name:$.EXECUTION_PREVIEW,params:{name:u.value,executionId:a.id}}).catch(()=>{}):await t.replace({name:$.EXECUTION_HOME,params:{name:u.value}}),s.showMessage({title:e.baseText(`executionsList.showMessage.handleDeleteSelected.title`),type:`success`})}catch(t){s.showError(t,e.baseText(`executionsList.showError.handleDeleteSelected.title`))}}async function b(t){s.showMessage({title:e.baseText(`executionDetails.runningMessage`),type:`info`,duration:2e3});try{let e=ni((await r.retryExecution(d.value.id,t)).status);e&&s.showMessage(e),l.track(`User clicked retry execution button`,{workflow_id:u.value,execution_id:d.value.id,retry_type:t?`current`:`original`})}catch(t){s.showError(t,e.baseText(`executionsList.showError.retryExecution.title`))}}async function x(){try{await r.stopCurrentExecution(d.value.id),s.showMessage({title:e.baseText(`executionsList.showMessage.stopExecution.title`),message:e.baseText(`executionsList.showMessage.stopExecution.message`,{interpolate:{activeExecutionId:d.value.id}}),type:`success`})}catch(t){s.showError(t,e.baseText(`executionsList.showError.stopExecution.title`))}}function S(){t.push({name:$.EXECUTION_DEBUG,params:{name:d.value.workflowId,executionId:d.value.id}})}async function C(e){let t=e===h.value?null:e;try{await r.annotateExecution(d.value.id,{vote:t})}catch(e){s.showError(e,`executionAnnotationView.vote.error`)}}return{commands:a(()=>{if(!d.value)return[];let t=[];if(f.value.update){let n=d.value.status===`success`;t.push({id:sS.DEBUG_EXECUTION,title:n?e.baseText(`executionsList.debug.button.copyToEditor`):e.baseText(`executionsList.debug.button.debugInEditor`),section:e.baseText(`commandBar.sections.execution`),handler:S,icon:{component:J,props:{icon:n?`copy`:`bug`}}})}return _.value&&f.value.update&&(t.push({id:sS.RETRY_CURRENT_WORKFLOW,title:e.baseText(`executionsList.retryWithCurrentlySavedWorkflow`),section:e.baseText(`commandBar.sections.execution`),handler:async()=>await b(!0),icon:{component:J,props:{icon:`redo-2`}}}),t.push({id:sS.RETRY_ORIGINAL_WORKFLOW,title:e.baseText(`executionsList.retryWithOriginalWorkflow`),section:e.baseText(`commandBar.sections.execution`),handler:async()=>await b(!1),icon:{component:J,props:{icon:`redo`}}})),v.value&&f.value.execute&&t.push({id:sS.STOP_EXECUTION,title:e.baseText(`executionsList.stopExecution`),section:e.baseText(`commandBar.sections.execution`),handler:x,icon:{component:J,props:{icon:`stop`}}}),p.value&&(t.push({id:sS.VOTE_UP,title:h.value===`up`?e.baseText(`executionAnnotationView.vote.removeUp`):e.baseText(`executionAnnotationView.vote.up`),section:e.baseText(`commandBar.sections.execution`),handler:async()=>await C(`up`),icon:{component:J,props:{icon:`thumbs-up`}}}),t.push({id:sS.VOTE_DOWN,title:h.value===`down`?e.baseText(`executionAnnotationView.vote.removeDown`):e.baseText(`executionAnnotationView.vote.down`),section:e.baseText(`commandBar.sections.execution`),handler:async()=>await C(`down`),icon:{component:J,props:{icon:`thumbs-down`}}})),f.value.update&&t.push({id:sS.DELETE_EXECUTION,title:e.baseText(`executionDetails.deleteExecution`),section:e.baseText(`commandBar.sections.execution`),handler:y,icon:{component:J,props:{icon:`trash-2`}}}),t})}}var lS={CHAT_HUB:`chat-hub`,WHATS_NEW:`whats-new`,SETTINGS:`settings`,SIGN_OUT:`sign-out`,TEMPLATES:`templates`,VARIABLES:`variables`,INSIGHTS:`insights`,QUICKSTART:`quickstart`,DOCUMENTATION:`documentation`,FORUM:`forum`,COURSE:`course`,REPORT_BUG:`report-bug`,ABOUT:`about`};function uS(){let e=K(),t=Vi(),n=jt(),r=la(),i=vn(),o=ua(),{getReportingURL:s}=ac();return{commands:a(()=>[{id:lS.WHATS_NEW,title:e.baseText(`mainSidebar.whatsNew`),section:e.baseText(`commandBar.sections.general`),handler:()=>{t.openModal(Ra)},icon:{component:J,props:{icon:`bell`}},keywords:[e.baseText(`mainSidebar.whatsNew`).toLowerCase(),e.baseText(`mainSidebar.whatsNew.fullChangelog`).toLowerCase()]},...r.isChatFeatureEnabled?[{id:lS.CHAT_HUB,title:e.baseText(`projects.menu.chat`),section:e.baseText(`commandBar.sections.general`),handler:()=>{n.push({name:Ru,force:!0})},icon:{component:J,props:{icon:`message-circle`}},keywords:[`chat`,`open chat`,e.baseText(`projects.menu.chat`).toLowerCase()]}]:[],...i.canViewProjects?[{id:lS.TEMPLATES,title:e.baseText(`generic.templates`),section:e.baseText(`commandBar.sections.general`),handler:()=>{o.hasCustomTemplatesHost?n.push({name:$.TEMPLATES}):window.open(o.websiteTemplateRepositoryURL,`_blank`)},icon:{component:J,props:{icon:`package-open`}},keywords:[e.baseText(`generic.templates`).toLowerCase()]}]:[],...i.canViewProjects?[{id:lS.VARIABLES,title:e.baseText(`mainSidebar.variables`),section:e.baseText(`commandBar.sections.general`),handler:()=>{n.push({name:$.HOME_VARIABLES})},icon:{component:J,props:{icon:`variable`}},keywords:[e.baseText(`mainSidebar.variables`).toLowerCase()]}]:[],...i.canViewProjects?[{id:lS.INSIGHTS,title:`Insights`,section:e.baseText(`commandBar.sections.general`),handler:()=>{n.push({name:$.INSIGHTS})},icon:{component:J,props:{icon:`chart-column-decreasing`}},keywords:[`insights`]}]:[],{id:lS.QUICKSTART,title:e.baseText(`mainSidebar.helpMenuItems.quickstart`),section:e.baseText(`mainSidebar.help`),handler:()=>{window.open(rc.QUICKSTART_VIDEO,`_blank`,`noreferrer`)},icon:{component:J,props:{icon:`video`}},keywords:[e.baseText(`mainSidebar.helpMenuItems.quickstart`).toLowerCase()]},{id:lS.DOCUMENTATION,title:e.baseText(`mainSidebar.helpMenuItems.documentation`),section:e.baseText(`mainSidebar.help`),handler:()=>{window.open(rc.DOCUMENTATION,`_blank`,`noreferrer`)},icon:{component:J,props:{icon:`book`}},keywords:[e.baseText(`mainSidebar.helpMenuItems.documentation`).toLowerCase()]},{id:lS.FORUM,title:e.baseText(`mainSidebar.helpMenuItems.forum`),section:e.baseText(`mainSidebar.help`),handler:()=>{window.open(rc.FORUM,`_blank`,`noreferrer`)},icon:{component:J,props:{icon:`users`}},keywords:[e.baseText(`mainSidebar.helpMenuItems.forum`).toLowerCase()]},{id:lS.COURSE,title:e.baseText(`mainSidebar.helpMenuItems.course`),section:e.baseText(`mainSidebar.help`),handler:()=>{window.open(rc.COURSES,`_blank`,`noreferrer`)},icon:{component:J,props:{icon:`graduation-cap`}},keywords:[e.baseText(`mainSidebar.helpMenuItems.course`).toLowerCase()]},{id:lS.REPORT_BUG,title:e.baseText(`mainSidebar.helpMenuItems.reportBug`),section:e.baseText(`mainSidebar.help`),handler:()=>{window.open(s(),`_blank`,`noreferrer`)},icon:{component:J,props:{icon:`bug`}},keywords:[e.baseText(`mainSidebar.helpMenuItems.reportBug`).toLowerCase()]},{id:lS.ABOUT,title:e.baseText(`mainSidebar.aboutN8n`),section:e.baseText(`mainSidebar.help`),handler:()=>{t.openModal(ns)},icon:{component:J,props:{icon:`info`}},keywords:[e.baseText(`mainSidebar.aboutN8n`).toLowerCase()]},{id:lS.SETTINGS,title:e.baseText(`settings`),section:e.baseText(`commandBar.sections.general`),handler:()=>{n.push({name:$.SETTINGS})},icon:{component:J,props:{icon:`cog`}},keywords:[e.baseText(`settings`).toLowerCase()]},{id:lS.SIGN_OUT,title:e.baseText(`auth.signout`),section:e.baseText(`commandBar.sections.general`),handler:()=>{n.push({name:$.SIGNOUT})},icon:{component:J,props:{icon:`sign-out-alt`}},keywords:[e.baseText(`auth.signout`).toLowerCase()]}])}}var dS={NEW_SESSION:`new-session`,NEW_SESSION_WITH_MODEL:`new-session-with-model`,OPEN_SESSION:`open-session`,DELETE_SESSION:`delete-session`,STOP_MESSAGE_GENERATION:`stop-message-generation`};function fS(e){let t=K(),{lastQuery:n}=e,r=jt(),i=Te(),o=fd(),s=la(),c=ha(),l=hr(),u=a(()=>(i.name===`chat`||i.name===`chat-conversation`)&&typeof i.params.id==`string`?i.params.id:null),d=a(()=>u.value?o.isResponding(u.value):!1);async function f(e){if(await l.confirm(t.baseText(`chatHub.session.delete.confirm.message`),t.baseText(`chatHub.session.delete.confirm.title`),{confirmButtonText:t.baseText(`chatHub.session.delete.confirm.button`),cancelButtonText:t.baseText(`chatHub.session.delete.cancel.button`)})===`confirm`)try{await o.deleteSession(e),c.showMessage({type:`success`,title:t.baseText(`chatHub.session.delete.success`)}),e===u.value&&r.push({name:Ru})}catch(e){c.showError(e,t.baseText(`chatHub.session.delete.error`))}}let p=a(()=>{let e=(n.value||``).trim().toLowerCase(),t=Object.values(o.sessions.byId)??[];return e?t.filter(t=>!!t&&(t.title?.toLowerCase().includes(e)??!1)):t.filter(e=>!!e)}),m=a(()=>{let e=(n.value||``).trim().toLowerCase(),t=Object.values(o.agents).flatMap(e=>e.models);return e?t.filter(t=>{if(!t.metadata.available)return!1;let n=t.model.provider;if(dd(n)){let e=s.moduleSettings?.[`chat-hub`]?.providers[n];if(e&&!e.enabled)return!1}return t.name?.toLowerCase().includes(e)||t.model.provider?.toLowerCase().includes(e)||Vu[t.model.provider]?.toLowerCase().includes(e)}):t}),h=(e,n)=>{let i=e.title;n&&(i=t.baseText(`generic.openResource`,{interpolate:{resource:i}}));let a=n?t.baseText(`commandBar.sections.chat`):t.baseText(`commandBar.chat.open`);return{id:e.id,title:i,section:a,keywords:[i],handler:()=>{r.push({name:zu,params:{id:e.id}})}}},g=a(()=>p.value.map(e=>h(e,!1))),_=(e,n)=>{let r=e.title;n&&(r=t.baseText(`commandBar.chat.deleteSession`,{interpolate:{title:r}}));let i=n?t.baseText(`commandBar.sections.chat`):t.baseText(`commandBar.chat.delete`);return{id:e.id,title:r,section:i,handler:()=>{f(e.id)}}},v=a(()=>p.value.map(e=>_(e,!1))),y=e=>({id:pd(e.model),title:{component:Hx,props:{title:Vu[e.model.provider],suffix:e.name}},section:t.baseText(`commandBar.chat.newWithModel`),keywords:[e.name,Vu[e.model.provider]],handler:()=>{r.push({...ud(e.model),force:!0})}}),b=a(()=>m.value.map(e=>y(e)));return{commands:a(()=>{let e=[{id:dS.NEW_SESSION,title:t.baseText(`commandBar.chat.new`),section:t.baseText(`commandBar.sections.chat`),handler:()=>{r.push({name:Ru,force:!0})},icon:{component:J,props:{icon:`plus`}},keywords:[t.baseText(`commandBar.chat.new`),t.baseText(`commandBar.sections.chat`),t.baseText(`generic.create`),t.baseText(`generic.start`)]},{id:dS.NEW_SESSION_WITH_MODEL,title:t.baseText(`commandBar.chat.newWithModel`),section:t.baseText(`commandBar.sections.chat`),children:b.value,icon:{component:J,props:{icon:`message-square-plus`}},keywords:[t.baseText(`commandBar.chat.new`),t.baseText(`commandBar.sections.chat`),t.baseText(`generic.create`),t.baseText(`generic.start`)]},{id:dS.OPEN_SESSION,title:t.baseText(`commandBar.chat.open`),section:t.baseText(`commandBar.sections.chat`),placeholder:t.baseText(`commandBar.chat.open.searchPlaceholder`),children:g.value,icon:{component:J,props:{icon:`message-square`,color:`text-light`}}},{id:dS.DELETE_SESSION,title:t.baseText(`commandBar.chat.delete`),section:t.baseText(`commandBar.sections.chat`),placeholder:t.baseText(`commandBar.chat.open.searchPlaceholder`),children:v.value,icon:{component:J,props:{icon:`trash-2`,color:`text-light`}}}];return d.value&&u.value&&e.push({id:dS.STOP_MESSAGE_GENERATION,title:t.baseText(`commandBar.chat.stop`),section:t.baseText(`commandBar.sections.chat`),handler:async()=>{u.value&&await o.stopStreamingMessage(u.value)}}),e})}}function pS(){let e=Jt(),t=vn(),n=Gi(),r=jt(),i=Te(),o=K(),s=zn(),c=o.baseText(`commandBar.placeholder`),l=d(null),u=d(``),f=a(()=>{let e=i.params.projectId||t.currentProjectId;return e===t.personalProject?.id?`Personal`:t.myProjects.find(t=>t.id===e)?.name??`Personal`}),p=Wx({lastQuery:u,activeNodeId:l}),m=Jx(),h=cS(),g=Zx({lastQuery:u,activeNodeId:l,currentProjectName:f}),_=eS({lastQuery:u,activeNodeId:l,currentProjectName:f}),v=rS({lastQuery:u,activeNodeId:l,currentProjectName:f}),y=iS(),b=oS({lastQuery:u,activeNodeId:l}),x=uS(),S=Pu(),C=fS({lastQuery:u}),w=[S,p,m,g,x],T=[S,h,g,b,v,_,y,x],E=[S,g,b,v,_,y,x],D=[S,v,b,g,_,y,x],O=[S,g,b,v,_,x],k=[S,_,b,g,v,y,x],A=[S,g,b,v,_,y,x],j=[C,S,x,b,g,v,_,y],M=[S,b,g,v,_,y,x],N=a(()=>{switch(r.currentRoute.value.name){case $.WORKFLOW:case $.NEW_WORKFLOW:return w;case $.EXECUTION_PREVIEW:case $.EXECUTION_DEBUG:return T;case $.WORKFLOWS:case $.PROJECTS_WORKFLOWS:return E;case $.CREDENTIALS:case $.PROJECTS_CREDENTIALS:return D;case $.EXECUTIONS:case $.PROJECTS_EXECUTIONS:return O;case Ko:case jo:return k;case $.EVALUATION:case $.EVALUATION_EDIT:case $.EVALUATION_RUNS_DETAIL:return A;case Ru:case zu:case Lu:case Bu:return j;default:return M}}),P=a(()=>{switch(r.currentRoute.value.name){case $.WORKFLOW:case $.NEW_WORKFLOW:return n.workflow.name?o.baseText(`commandBar.sections.workflow`)+`  `+n.workflow.name:``;case $.EXECUTION_PREVIEW:case $.EXECUTION_DEBUG:return n.workflow.name?o.baseText(`commandBar.sections.execution`)+`  `+n.workflow.name:``;case $.EVALUATION:case $.EVALUATION_EDIT:case $.EVALUATION_RUNS_DETAIL:return n.workflow.name?`  `+n.workflow.name:``;default:return``}}),F=(e,t,n)=>{s.track(`User executed command bar command`,{command_id:e.id,command_section:e.section,view:t,parent_command_id:n?.id})},I=e=>{let t={...e},n=(r.currentRoute.value.name??``).toString();if(e.handler){let r=e.handler;t.handler=async()=>(F(e,n),await r())}return e.children&&(t.children=e.children.map(t=>{if(t.handler){let r=t.handler;return{...t,handler:async()=>(F(t,n,e),await r())}}return t})),t},L=a(()=>N.value.flatMap(e=>e.commands.value).map(I)),R=a(()=>N.value.some(e=>e.isLoading?.value===!0));function ee(e){u.value=e;for(let t of N.value)t.handlers?.onCommandBarChange&&t.handlers.onCommandBarChange(e)}function te(e){for(let t of N.value)t.handlers?.onCommandBarNavigateTo&&t.handlers.onCommandBarNavigateTo(e)}async function ne(){await e.loadNodeTypesIfNotLoaded();let t=N.value.map(async e=>{e.initialize&&await e.initialize()});await Promise.all(t)}return{items:L,initialize:ne,onCommandBarChange:ee,onCommandBarNavigateTo:te,placeholder:c,context:P,isLoading:R}}var mS=g({__name:`AppCommandBar`,setup(e){let t=Te(),{APP_Z_INDEXES:n}=Hr(),{initialize:r,items:i,placeholder:o,context:s,onCommandBarChange:l,onCommandBarNavigateTo:d,isLoading:f}=pS(),p=a(()=>t.name===$.DEMO),m=a(()=>ea([`authenticated`])&&!p.value);return T(m,e=>{e&&r()}),(e,t)=>m.value?(M(),y(u(rt),{key:0,items:u(i),placeholder:u(o),context:u(s),"is-loading":u(f),"z-index":u(n).COMMAND_BAR,onInputChange:u(l),onNavigateTo:u(d)},null,8,[`items`,`placeholder`,`context`,`is-loading`,`z-index`,`onInputChange`,`onNavigateTo`])):c(``,!0)}}),hS={key:0},gS=g({__name:`AppLayout`,emits:[`mounted`],setup(e,{emit:t}){let n=h(async()=>await Re(()=>import(`./DefaultLayout-CajRpraH.js`),__vite__mapDeps([73,2,1,3,4,5,6,7,8,9,11,12,13,14,15,16,74,75,76,77,78,79,80,81,82,83,84,18,85,86,87,31,88,89,90,91,92]))),r=h(async()=>await Re(()=>import(`./SettingsLayout-CkAwb9pf.js`),__vite__mapDeps([93,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,85,91,92,94]))),i=h(async()=>await Re(()=>import(`./WorkflowLayout-CuLtgzH_.js`),__vite__mapDeps([95,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,96,97,98,99,100,101,75,57,58,88,102,103,104,105,106,69,107,108,109,110,111,112,113,87,114,115,116,76,77,84,117,118,119,120,74,78,79,80,81,121,122,82,83,85,86,89,90,123,124,91,92,125,126,127,128,129,130,131,132,133,134,135,136,137,138]))),a=h(async()=>await Re(()=>import(`./AuthLayout-mboz8-XI.js`),__vite__mapDeps([139,5,6,91,1,92]))),o=h(async()=>await Re(()=>import(`./DemoLayout-_yTuwWvR.js`),__vite__mapDeps([140,2,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,107,108,109,57,58,110,114,115,116,76,77,84,117,118,91,92]))),c=h(async()=>await Re(()=>import(`./ChatLayout-gyvhtGDd.js`),__vite__mapDeps([141,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,142,34,117,88,74,75,76,77,78,79,80,81,84,18,85,91,92,143,66,67,144,145]))),l=Te(),f=jt(),p=t,m=d(!1),g=f.afterEach(()=>{m.value=!0,g()});function _(e){p(`mounted`,e)}return(e,t)=>m.value?(M(),y(le,{key:1},{default:k(()=>[u(l).meta.layout===`settings`?(M(),y(u(r),{key:0,onMounted:_})):u(l).meta.layout===`workflow`?(M(),y(u(i),{key:1,onMounted:_})):u(l).meta.layout===`auth`?(M(),y(u(a),{key:2,onMounted:_})):u(l).meta.layout===`demo`?(M(),y(u(o),{key:3,onMounted:_})):u(l).meta.layout===`chat`?(M(),y(u(c),{key:4,onMounted:_})):(M(),y(u(n),{key:5,onMounted:_}))]),_:1})):(M(),s(`div`,hS))}}),_S=[`aria-label`],vS=[`aria-label`],yS=X(g({__name:`NodeIssueItem`,props:{issue:{},getNodeType:{type:Function},formatIssueMessage:{type:Function}},emits:[`click`],setup(e,{emit:t}){let n=e,r=t,i=qt();function a(){i.setActiveNodeName(n.issue.node,`other`),r(`click`)}return(t,n)=>(M(),s(`li`,{class:U(t.$style.nodeIssue),role:`listitem`,"aria-label":`Edit ${e.issue.node} node`,onClick:a},[m(uu,{"node-type":e.getNodeType(e.issue.node),size:14,shrink:!1,"show-tooltip":!0,"tooltip-position":`left`,class:U(t.$style.nodeIcon),"aria-label":`${e.issue.node} node`},null,8,[`node-type`,`class`,`aria-label`]),W(`div`,{class:U(t.$style.issueMessage),"aria-label":`Issue: ${e.formatIssueMessage(e.issue.value)}`},[W(`span`,{class:U(t.$style.nodeName)},o(e.issue.node)+`:`,3),R(` `+o(e.formatIssueMessage(e.issue.value)),1)],10,vS),m(u(J),{class:U(t.$style.chevron),icon:`chevron-right`},null,8,[`class`])],10,_S))}}),[[`__cssModules`,{$style:{nodeIssue:`_nodeIssue_1dpuo_125`,nodeIcon:`_nodeIcon_1dpuo_136`,nodeName:`_nodeName_1dpuo_141`,issueMessage:`_issueMessage_1dpuo_146`,chevron:`_chevron_1dpuo_152`}}]]),bS=3,xS=X(g({__name:`CredentialsSetupCard`,props:{issues:{}},emits:[`click`],setup(e,{emit:t}){let n=e,r=t,i=K(),c=a(()=>{let e=new Set;return n.issues.filter(t=>e.has(t.node)?!1:(e.add(t.node),!0)).map(e=>e.node)}),l=a(()=>{let e=c.value;if(e.length===0)return``;if(e.length===1)return e[0];if(e.length===2)return i.baseText(`aiAssistant.builder.executeMessage.nodeListTwo`,{interpolate:{first:e[0],second:e[1]}});if(e.length<=bS){let t=e.slice(0,-1).join(`, `);return i.baseText(`aiAssistant.builder.executeMessage.nodeListLast`,{interpolate:{list:t,last:e[e.length-1]}})}let t=e.slice(0,bS).join(`, `),n=e.length-bS;return i.baseText(`aiAssistant.builder.executeMessage.nodeListMore`,{interpolate:{list:t,count:String(n)},adjustToNumber:n})});function d(){r(`click`)}return(e,t)=>(M(),s(`div`,{class:U(e.$style.credentialsCard),role:`button`,tabindex:`0`,onClick:d,onKeydown:ne(d,[`enter`])},[m(u(J),{class:U(e.$style.keyIcon),icon:`key-round`,size:14},null,8,[`class`]),W(`div`,{class:U(e.$style.credentialsContent)},[W(`span`,{class:U(e.$style.credentialsHeader)},o(u(i).baseText(`aiAssistant.builder.executeMessage.addMissingCredentials`)),3),W(`span`,{class:U(e.$style.credentialsDescription)},o(l.value),3)],2),m(u(J),{class:U(e.$style.chevron),icon:`chevron-right`},null,8,[`class`])],34))}}),[[`__cssModules`,{$style:{credentialsCard:`_credentialsCard_1ux5v_125`,keyIcon:`_keyIcon_1ux5v_135`,credentialsContent:`_credentialsContent_1ux5v_141`,credentialsHeader:`_credentialsHeader_1ux5v_147`,credentialsDescription:`_credentialsDescription_1ux5v_151`,chevron:`_chevron_1ux5v_155`}}]]),SS=X(g({__name:`ExecuteMessage`,emits:[`workflowExecuted`],setup(e,{emit:t}){let n=t,r=jt(),i=Gi(),p=Jt(),h=Vi(),g=K(),_=Zl(),v=ha(),b=Qi(),{runWorkflow:x}=gu({router:r}),S,E=d(),D=()=>{S&&=(S(),void 0)},O=()=>{if(S)return;let e=[`running`,`waiting`];S=T(()=>i.workflowExecutionData?.status,async t=>{await l(),!(!t||e.includes(t))&&(D(),t!==`canceled`&&n(`workflowExecuted`))})},A=a(()=>b.workflowTodos.length>0),j=a(()=>i.workflow.nodes.filter(e=>p.isTriggerNode(e.type))),N=a(()=>{let e=[],t=[];for(let n of b.workflowTodos)(n.type===`credentials`?e:t).push(n);return{credentials:e,other:t}});function P(e){let t=g.baseText(e,{interpolate:{type:`.+`}}).replace(/[.*+?^${}()|[\]\\]/g,`\\$&`).replace(`\\.\\+`,`.+`);return new RegExp(t,`i`)}let F=P(`nodeIssues.credentials.notSet`),I=/Parameter\s+".+"\s+is\s+required/i;function ee(e){let t=i.formatIssueMessage(e);return I.test(t)&&t.match(/Parameter\s+"(.+)"\s+is\s+required/i)?.[1]?.toLowerCase()===`model`?g.baseText(`aiAssistant.builder.executeMessage.chooseModel`):F.test(t)?g.baseText(`aiAssistant.builder.executeMessage.chooseCredentials`):t}function te(e){let t=i.workflow.nodes.find(t=>t.name===e);return t?p.getNodeType(t.type):null}let ne=a(()=>i.isWorkflowRunning),re=a(()=>i.executionWaitingForWebhook),z=a(()=>A.value?[]:j.value),B=a(()=>A.value?g.baseText(`aiAssistant.builder.executeMessage.validationTooltip`):``),ie=a(()=>b.isCodeBuilder&&b.hasTodosHiddenByPinnedData&&b.hasHadSuccessfulExecution);function V(){b.unpinAllNodes(),b.trackWorkflowBuilderJourney(`user_clicked_unpin_all`)}async function ae(){if(A.value)return;O();let e=i.selectedTriggerNodeName??z.value[0]?.name,t=e?i.getNodeByName(e):null;if(t&&Kr(t)){v.showMessage({title:g.baseText(`aiAssistant.builder.toast.title`),message:g.baseText(`aiAssistant.builder.toast.description`),type:`info`}),_.toggleOpen(!0);return}let n={};e&&(n.triggerNode=e),await x(n)}function oe(){E.value?.scrollIntoView({behavior:`smooth`,block:`nearest`,inline:`nearest`})}function se(e){b.trackWorkflowBuilderJourney(`user_clicked_todo`,{node_type:i.getNodeByName(e.node)?.type,type:e.type})}function ce(){h.openModalWithData({name:Ga,data:{source:`builder`}}),b.trackWorkflowBuilderJourney(`user_clicked_todo`,{type:`credentials`,count:N.value.credentials.length,source:`builder`})}return C(oe),T(A,(e,t)=>{t&&!e&&b.trackWorkflowBuilderJourney(`no_placeholder_values_left`)}),f(()=>{D()}),(e,t)=>(M(),s(`div`,{ref_key:`containerRef`,ref:E,class:U(e.$style.container),role:`region`,"aria-label":`Workflow execution panel`},[A.value?(M(),s(w,{key:0},[W(`p`,{class:U(e.$style.description)},o(u(g).baseText(`aiAssistant.builder.executeMessage.description`)),3),W(`div`,{class:U(e.$style.issuesBox)},[N.value.credentials.length>0?(M(),y(xS,{key:0,issues:N.value.credentials,"get-node-type":te,onClick:ce},null,8,[`issues`])):c(``,!0),N.value.other.length>0?(M(),y(H,{key:1,name:`fade`,tag:`ul`,class:U(e.$style.issuesList),role:`list`,"aria-label":`Workflow validation issues`},{default:k(()=>[(M(!0),s(w,null,L(N.value.other,e=>(M(),y(yS,{key:`${ee(e.value)}_${e.node}`,issue:e,"get-node-type":te,"format-issue-message":ee,onClick:()=>se(e)},null,8,[`issue`,`onClick`]))),128))]),_:1},8,[`class`])):c(``,!0)],2)],64)):j.value.length>0?(M(),s(`p`,{key:1,class:U(e.$style.noIssuesMessage)},[R(o(u(b).hasTodosHiddenByPinnedData?u(g).baseText(`aiAssistant.builder.executeMessage.noIssuesWithPinData`):u(g).baseText(`aiAssistant.builder.executeMessage.noIssues`))+` `,1),u(b).hasTodosHiddenByPinnedData?(M(),y(u(He),{key:0,placement:`top`},{content:k(()=>[R(o(u(g).baseText(`aiAssistant.builder.executeMessage.unpinTooltip`)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`,size:`small`,class:U(e.$style.infoIcon)},null,8,[`class`])]),_:1})):c(``,!0)],2)):c(``,!0),j.value.length>0?(M(),y(u(He),{key:2,disabled:!A.value,content:B.value,placement:`left`},{default:k(()=>[m(Yu,{class:U(e.$style.runButton),disabled:A.value||u(b).hasNoCreditsRemaining,"waiting-for-webhook":re.value,"hide-tooltip":!0,label:u(g).baseText(`aiAssistant.builder.executeMessage.execute`),executing:ne.value,"include-chat-trigger":!0,size:`medium`,"trigger-nodes":z.value,"get-node-type":u(p).getNodeType,"selected-trigger-node-name":u(i).selectedTriggerNodeName,onExecute:ae,onSelectTriggerNode:u(i).setSelectedTriggerNodeName},null,8,[`class`,`disabled`,`waiting-for-webhook`,`label`,`executing`,`trigger-nodes`,`get-node-type`,`selected-trigger-node-name`,`onSelectTriggerNode`])]),_:1},8,[`disabled`,`content`])):c(``,!0),ie.value?(M(),s(`div`,{key:3,class:U(e.$style.unpinSection)},[m(u(q),{type:`secondary`,size:`medium`,icon:`pin`,label:u(g).baseText(`aiAssistant.builder.executeMessage.unpinAll`),onClick:V},null,8,[`label`]),W(`span`,{class:U(e.$style.unpinIndividuallyText)},[R(o(u(g).baseText(`aiAssistant.builder.executeMessage.unpinIndividually`))+` `,1),m(u(He),{placement:`top`},{content:k(()=>[R(o(u(g).baseText(`aiAssistant.builder.executeMessage.unpinTooltip`)),1)]),default:k(()=>[m(u(J),{icon:`circle-help`,size:`small`,class:U(e.$style.infoIcon)},null,8,[`class`])]),_:1})],2)],2)):c(``,!0)],2))}}),[[`__cssModules`,{$style:{container:`_container_uywbd_125`,description:`_description_uywbd_134`,noIssuesMessage:`_noIssuesMessage_uywbd_140`,issuesBox:`_issuesBox_uywbd_145`,issuesList:`_issuesList_uywbd_152`,runButton:`_runButton_uywbd_161`,unpinSection:`_unpinSection_uywbd_165`,unpinIndividuallyText:`_unpinIndividuallyText_uywbd_172`,infoIcon:`_infoIcon_uywbd_180`}}],[`__scopeId`,`data-v-1370372a`]]),CS=X(g({__name:`NotificationPermissionBanner`,setup(e){let{requestPermission:t,recordDismissal:n,resetMetadata:r}=qr(),i=K(),a=Qi();async function c(){let{permission:e}=await t();(e===`denied`||e===`granted`)&&r(),a.trackWorkflowBuilderJourney(`browser_notification_accept`)}function l(){a.trackWorkflowBuilderJourney(`browser_notification_dismiss`),n()}return(e,t)=>(M(),s(`div`,{class:U(e.$style.banner),"data-test-id":`notification-permission-banner`},[m(u(J),{icon:`bell`,size:`medium`,class:U(e.$style.icon)},null,8,[`class`]),W(`span`,{class:U(e.$style.text)},o(u(i).baseText(`aiAssistant.builder.notificationBanner.text`)),3),m(u(q),{variant:`solid`,size:`xsmall`,"data-test-id":`notification-banner-notify`,onClick:c},{default:k(()=>[R(o(u(i).baseText(`aiAssistant.builder.notificationBanner.notify`)),1)]),_:1}),m(u(J),{icon:`x`,size:`small`,class:U(e.$style.closeIcon),"data-test-id":`notification-banner-dismiss`,onClick:l},null,8,[`class`])],2))}}),[[`__cssModules`,{$style:{banner:`_banner_gny94_125`,icon:`_icon_gny94_138`,text:`_text_gny94_142`,closeIcon:`_closeIcon_gny94_148`}}]]);function wS(e={}){let{maxResults:t=50}=e,n=Wt(),r=Gi(),i=d(!1),o=d(``),s=d(0),c=d({top:0,left:0}),l=d(-1),u=d(null),f=d(!1),p=a(()=>{let e=o.value.toLowerCase(),i=r.allNodes,a=new Set(n.confirmedNodeIds),s=i.filter(e=>!a.has(e.id));return e&&(s=s.filter(t=>t.name.toLowerCase().includes(e))),s.slice(0,t)});T(()=>r.allNodes.length,()=>{i.value&&g()});function m(e,t={}){let n=e.getBoundingClientRect();t.alignRight?c.value={top:n.top-8,right:window.innerWidth-n.right}:c.value={top:n.top-8,left:n.left}}function h(e,t={}){if(f.value=t.viaButton??!1,t.viaButton)u.value=null,l.value=-1;else{let t=e;u.value=t,l.value=t.selectionStart??t.value.length}i.value=!0,o.value=``,s.value=0,m(e,t)}function g(e=!1){if(e&&u.value&&l.value>=0){let e=u.value,t=e.value,n=e.selectionStart??t.length;e.value=t.substring(0,l.value)+t.substring(n);let r=l.value;e.setSelectionRange(r,r),e.dispatchEvent(new Event(`input`,{bubbles:!0}))}i.value=!1,o.value=``,s.value=0,l.value=-1}function _(e,t){let n=t.value,r=t.selectionStart??n.length;if(i.value)l.value>=0&&r>l.value?(o.value=n.substring(l.value+1,r),s.value=0):g(),(!n.includes(`@`)||r<=l.value)&&g();else if(n.charAt(r-1)===`@`){h(t),l.value=r-1;return}}function v(e){if(!i.value)return!1;switch(e.key){case`ArrowDown`:return e.preventDefault(),s.value=Math.min(s.value+1,p.value.length-1),!0;case`ArrowUp`:return e.preventDefault(),s.value=Math.max(s.value-1,0),!0;case`Enter`:return p.value.length>0?(e.preventDefault(),e.stopPropagation(),y(p.value[s.value]),!0):!1;case`Escape`:return e.preventDefault(),g(p.value.length===0),!0;case`Tab`:return p.value.length>0?(e.preventDefault(),y(p.value[s.value]),!0):(g(),!1);default:return!1}}function y(e){if(n.confirmNodes([e.id],`mention`),u.value&&l.value>=0){let t=u.value,n=t.value,r=t.selectionStart??n.length,i=n.substring(0,l.value),a=n.substring(r),o=e.name+` `;t.value=i+o+a;let s=l.value+o.length;t.setSelectionRange(s,s),t.dispatchEvent(new Event(`input`,{bubbles:!0}))}g()}return{showDropdown:i,searchQuery:o,highlightedIndex:s,dropdownPosition:c,filteredNodes:p,openedViaButton:f,handleInput:_,handleKeyDown:v,selectNode:y,closeDropdown:g,openDropdown:h}}function TS(){let e=Wt(),t=Jt(),n=Gi(),r=a(()=>e.confirmedNodes),i=a(()=>e.filteredUnconfirmedNodes),o=a(()=>r.value.length),s=a(()=>i.value.length),c=a(()=>o.value>0&&n.allNodes.length>0&&o.value>=n.allNodes.length),l=a(()=>o.value===0&&s.value>0&&n.allNodes.length>0&&s.value>=n.allNodes.length),u=a(()=>o.value>=3),d=a(()=>s.value>=3),f=a(()=>o.value>=1&&o.value<3?r.value:[]),p=a(()=>s.value>=1&&s.value<3?i.value:[]);function m(e){return t.getNodeType(e)}function h(t){if(e.focusedNodesMap[t]?.state===`confirmed`)Ql.emit(`nodes:select`,{ids:[t],panIntoView:!0});else{let n=e.isNodeSelectedOnCanvas(t);e.toggleNode(t,n)}}function g(t){e.isNodeSelectedOnCanvas(t)?e.setState(t,`unconfirmed`):e.removeNode(t)}return{confirmedNodes:r,unconfirmedNodes:i,confirmedCount:o,unconfirmedCount:s,allNodesConfirmed:c,allNodesUnconfirmed:l,shouldBundleConfirmed:u,shouldBundleUnconfirmed:d,individualConfirmedNodes:f,individualUnconfirmedNodes:p,getNodeType:m,handleChipClick:h,handleRemove:g}}var ES=[`placeholder`],DS=[`onClick`,`onMouseenter`],OS=X(g({__name:`NodeMentionDropdown`,props:{nodes:{},selectedNodeIds:{},highlightedIndex:{},position:{},searchQuery:{},viaButton:{type:Boolean}},emits:[`select`,`highlight`,`keydown`,`close`,`update:searchQuery`],setup(e,{emit:t}){let n=e,r=t,i=K(),f=Jt(),p=d(null),h=d(null),g=d(n.searchQuery);T(()=>n.searchQuery,e=>{g.value=e}),T(g,e=>{r(`update:searchQuery`,e)});let _=a(()=>{let e={top:`${n.position.top}px`,transform:`translateY(-100%)`};return n.position.right===void 0?n.position.left!==void 0&&(e.left=`${n.position.left}px`):e.right=`${n.position.right}px`,e});function b(e){return f.getNodeType(e)}function x(e){r(`select`,e)}function S(e){r(`highlight`,e)}function E(e){r(`keydown`,e)}function k(e){e.target.closest(`[data-node-mention-dropdown]`)||r(`close`)}return T(()=>n.highlightedIndex,e=>{l(()=>{let t=h.value;t&&t.querySelectorAll(`[data-mention-item]`)[e]?.scrollIntoView({block:`nearest`})})}),C(()=>{n.viaButton&&l(()=>{p.value?.focus()}),document.addEventListener(`click`,k)}),v(()=>{document.removeEventListener(`click`,k)}),(t,n)=>(M(),y(D,{to:`body`},[W(`div`,{"data-node-mention-dropdown":``,class:U(t.$style.dropdown),style:O(_.value)},[e.viaButton?(M(),s(`div`,{key:0,class:U(t.$style.searchWrapper)},[m(u(J),{icon:`search`,size:`small`,class:U(t.$style.searchIcon)},null,8,[`class`]),ce(W(`input`,{ref_key:`inputRef`,ref:p,"onUpdate:modelValue":n[0]||=e=>g.value=e,type:`text`,class:U(t.$style.searchInput),placeholder:u(i).baseText(`focusedNodes.mentionPlaceholder`),onKeydown:E},null,42,ES),[[N,g.value]])],2)):c(``,!0),W(`div`,{ref_key:`listRef`,ref:h,class:U(t.$style.list)},[(M(!0),s(w,null,L(e.nodes,(n,r)=>(M(),s(`div`,{key:n.id,"data-mention-item":``,class:U([t.$style.item,{[t.$style.highlighted]:r===e.highlightedIndex},{[t.$style.selected]:e.selectedNodeIds.includes(n.id)}]),onClick:e=>x(n),onMouseenter:e=>S(r)},[m(uu,{"node-type":b(n.type),size:16},null,8,[`node-type`]),W(`span`,{class:U(t.$style.nodeName)},o(n.name),3),e.selectedNodeIds.includes(n.id)?(M(),y(u(J),{key:0,icon:`check`,size:`small`,class:U(t.$style.checkIcon)},null,8,[`class`])):c(``,!0)],42,DS))),128)),e.nodes.length===0?(M(),s(`div`,{key:0,class:U(t.$style.emptyState)},o(u(i).baseText(`focusedNodes.noMatches`,{interpolate:{query:e.searchQuery}})),3)):c(``,!0)],2)],6)]))}}),[[`__cssModules`,{$style:{dropdown:`_dropdown_d2t4b_125`,searchWrapper:`_searchWrapper_d2t4b_136`,searchIcon:`_searchIcon_d2t4b_144`,searchInput:`_searchInput_d2t4b_149`,list:`_list_d2t4b_163`,item:`_item_d2t4b_169`,highlighted:`_highlighted_d2t4b_179`,selected:`_selected_d2t4b_182`,nodeName:`_nodeName_d2t4b_189`,checkIcon:`_checkIcon_d2t4b_199`,emptyState:`_emptyState_d2t4b_203`}}]]),kS=X(g({__name:`FocusedNodeChip`,props:{node:{}},emits:[`click`,`remove`],setup(e,{emit:t}){let n=e,r=t,i=K(),c=Jt(),l=a(()=>n.node.state===`confirmed`),d=a(()=>n.node.state===`unconfirmed`),f=a(()=>c.getNodeType(n.node.nodeType)),p=a(()=>{let e=n.node.nodeName;return e.length<=20?e:`${e.substring(0,19)}...`});function h(e){e.stopPropagation(),r(`click`)}function g(e){e.stopPropagation(),r(`remove`)}return(e,t)=>(M(),y(u(He),{content:u(i).baseText(`focusedNodes.unconfirmedTooltip`),disabled:!d.value,placement:`top`,"show-after":300},{default:k(()=>[W(`span`,{class:U([e.$style.chip,{[e.$style.unconfirmed]:d.value}]),onClick:h},[W(`span`,{class:U([e.$style.iconWrapper,{[e.$style.confirmedIcon]:l.value}])},[d.value?(M(),y(u(J),{key:0,icon:`plus`,size:`xsmall`,class:U(e.$style.prefixIcon)},null,8,[`class`])):(M(),s(w,{key:1},[m(uu,{"node-type":f.value,size:12,class:U(e.$style.nodeIcon)},null,8,[`node-type`,`class`]),W(`button`,{type:`button`,class:U(e.$style.removeButton),onClick:g},[m(u(J),{icon:`x`,class:U(e.$style.closeIcon)},null,8,[`class`])],2)],64))],2),W(`span`,{class:U(e.$style.label)},o(p.value),3)],2)]),_:1},8,[`content`,`disabled`]))}}),[[`__cssModules`,{$style:{chip:`_chip_1061o_125`,unconfirmed:`_unconfirmed_1061o_142`,iconWrapper:`_iconWrapper_1061o_152`,confirmedIcon:`_confirmedIcon_1061o_162`,nodeIcon:`_nodeIcon_1061o_172`,removeButton:`_removeButton_1061o_176`,closeIcon:`_closeIcon_1061o_190`,prefixIcon:`_prefixIcon_1061o_195`,label:`_label_1061o_199`}}]]),AS=[`onClick`],jS=X(g({__name:`ChatInputWithMention`,props:{modelValue:{default:``},placeholder:{default:``},disabled:{type:Boolean,default:!1},disabledTooltip:{default:void 0},streaming:{type:Boolean,default:!1},creditsQuota:{default:void 0},creditsRemaining:{default:void 0},showAskOwnerTooltip:{type:Boolean,default:!1},maxLength:{default:void 0}},emits:[`update:modelValue`,`submit`,`stop`,`upgrade-click`],setup(e,{expose:t,emit:n}){let r=e,i=n,f=K(),p=Wt(),h=a(()=>p.isFeatureEnabled),{confirmedNodes:g,unconfirmedNodes:_,confirmedCount:v,unconfirmedCount:b,allNodesConfirmed:x,allNodesUnconfirmed:S,shouldBundleConfirmed:C,shouldBundleUnconfirmed:D,individualConfirmedNodes:O,individualUnconfirmedNodes:A,getNodeType:j,handleChipClick:N,handleRemove:P}=TS(),I=d(null),R=d(r.modelValue);T(()=>r.modelValue,e=>{R.value=e}),T(R,e=>{i(`update:modelValue`,e)});let{showDropdown:ee,searchQuery:ne,highlightedIndex:re,dropdownPosition:z,filteredNodes:B,openedViaButton:ie,handleInput:V,handleKeyDown:ae,selectNode:H,closeDropdown:oe,openDropdown:se}=wS(),ce=a(()=>p.confirmedNodeIds),le=a(()=>g.value.length>0),ue=a(()=>_.value.length>0);function de(){p.confirmAllUnconfirmed()}function fe(){p.removeAllConfirmed()}function pe(e){if(!h.value)return;let t=e,n=e.target;n&&V(t,n)}function me(e){ae(e)&&e.preventDefault()}function he(){ee.value||i(`submit`)}function ge(){i(`stop`)}function G(){i(`upgrade-click`)}function _e(e){ae(e)&&(e.key===`Enter`||e.key===`Tab`)&&l(()=>{xe()})}function ve(e){H(e),l(()=>{xe()})}function ye(e){ne.value=e}function be(){oe(B.value.length===0)}function xe(){I.value?.focusInput?.()}function Se(e){e.stopPropagation();let t=e.currentTarget;t&&se(t,{viaButton:!0,alignRight:!0})}return t({focusInput:xe}),(t,n)=>(M(),s(`div`,{class:U(t.$style.wrapper)},[m(u(dt),{ref_key:`inputRef`,ref:I,modelValue:R.value,"onUpdate:modelValue":n[0]||=e=>R.value=e,placeholder:e.placeholder,disabled:e.disabled,"disabled-tooltip":e.disabledTooltip,streaming:e.streaming,"credits-quota":e.creditsQuota,"credits-remaining":e.creditsRemaining,"show-ask-owner-tooltip":e.showAskOwnerTooltip,"max-length":e.maxLength,"refocus-after-send":!0,"data-test-id":`chat-input-with-mention`,autofocus:``,onInput:pe,onKeydown:me,onSubmit:he,onStop:ge,onUpgradeClick:G},te({_:2},[h.value&&le.value?{name:`inline-chips`,fn:k(()=>[u(x)?(M(),s(`span`,{key:0,class:U(t.$style.bundledConfirmedChip)},[W(`span`,{class:U(t.$style.bundledIconWrapper)},[m(u(J),{icon:`layers`,size:`small`,class:U(t.$style.bundledConfirmedIcon)},null,8,[`class`]),W(`button`,{type:`button`,class:U(t.$style.bundledRemoveButton),onClick:F(fe,[`stop`])},[m(u(J),{icon:`x`,size:`small`})],2)],2),W(`span`,null,o(u(f).baseText(`focusedNodes.allNodes`)),1)],2)):(M(),s(w,{key:1},[(M(!0),s(w,null,L(u(O),e=>(M(),y(kS,{key:e.nodeId,node:e,onClick:t=>u(N)(e.nodeId),onRemove:t=>u(P)(e.nodeId)},null,8,[`node`,`onClick`,`onRemove`]))),128)),u(C)?(M(),y(u(Ze),{key:0,side:`top`,width:`220px`,"z-index":2e3},{trigger:k(()=>[W(`span`,{class:U(t.$style.bundledConfirmedChip)},[W(`span`,{class:U(t.$style.bundledIconWrapper)},[m(u(J),{icon:`layers`,size:`small`,class:U(t.$style.bundledConfirmedIcon)},null,8,[`class`]),W(`button`,{type:`button`,class:U(t.$style.bundledRemoveButton),onClick:F(fe,[`stop`])},[m(u(J),{icon:`x`,size:`small`})],2)],2),W(`span`,null,o(u(f).baseText(`focusedNodes.nodesCount`,{interpolate:{count:u(v)}})),1)],2)]),content:k(()=>[W(`div`,{class:U(t.$style.expandedNodeList)},[(M(!0),s(w,null,L(u(g),e=>(M(),s(`div`,{key:e.nodeId,class:U(t.$style.expandedNodeItem)},[m(uu,{"node-type":u(j)(e.nodeType),size:12},null,8,[`node-type`]),W(`span`,{class:U(t.$style.expandedNodeName)},o(e.nodeName),3),W(`button`,{type:`button`,class:U(t.$style.expandedRemoveButton),onClick:F(t=>u(P)(e.nodeId),[`stop`])},[m(u(J),{icon:`x`,size:`xsmall`})],10,AS)],2))),128))],2)]),_:1})):c(``,!0)],64))]),key:`0`}:void 0,h.value||t.$slots[`extra-actions`]?{name:`extra-actions`,fn:k(()=>[E(t.$slots,`extra-actions`),h.value?(M(),y(u(Be),{key:0,icon:`at-sign`,variant:`ghost`,text:!0,size:`small`,title:u(f).baseText(`focusedNodes.mentionTooltip`),"data-test-id":`mention-node-button`,onClick:Se},null,8,[`title`])):c(``,!0)]),key:`1`}:void 0,h.value&&ue.value?{name:`bottom-actions-chips`,fn:k(()=>[u(S)?(M(),y(u(He),{key:0,content:u(f).baseText(`focusedNodes.unconfirmedTooltip`),placement:`top`},{default:k(()=>[W(`button`,{type:`button`,class:U(t.$style.bundledUnconfirmedChip),onClick:de},[m(u(J),{icon:`plus`,size:`xsmall`,class:U(t.$style.bundledUnconfirmedIcon)},null,8,[`class`]),W(`span`,null,o(u(f).baseText(`focusedNodes.allNodes`)),1)],2)]),_:1},8,[`content`])):(M(),s(w,{key:1},[(M(!0),s(w,null,L(u(A),e=>(M(),y(kS,{key:e.nodeId,node:e,onClick:t=>u(N)(e.nodeId),onRemove:t=>u(P)(e.nodeId)},null,8,[`node`,`onClick`,`onRemove`]))),128)),u(D)?(M(),y(u(He),{key:0,content:u(f).baseText(`focusedNodes.unconfirmedTooltip`),placement:`top`},{default:k(()=>[W(`button`,{type:`button`,class:U(t.$style.bundledUnconfirmedChip),onClick:de},[m(u(J),{icon:`plus`,size:`xsmall`,class:U(t.$style.bundledUnconfirmedIcon)},null,8,[`class`]),W(`span`,null,o(u(f).baseText(`focusedNodes.nodesCount`,{interpolate:{count:u(b)}})),1)],2)]),_:1},8,[`content`])):c(``,!0)],64))]),key:`2`}:void 0]),1032,[`modelValue`,`placeholder`,`disabled`,`disabled-tooltip`,`streaming`,`credits-quota`,`credits-remaining`,`show-ask-owner-tooltip`,`max-length`]),h.value&&u(ee)?(M(),y(OS,{key:0,nodes:u(B),"selected-node-ids":ce.value,"highlighted-index":u(re),position:u(z),"search-query":u(ne),"via-button":u(ie),onSelect:ve,onHighlight:n[1]||=e=>re.value=e,onKeydown:_e,onClose:be,"onUpdate:searchQuery":ye},null,8,[`nodes`,`selected-node-ids`,`highlighted-index`,`position`,`search-query`,`via-button`])):c(``,!0)],2))}}),[[`__cssModules`,{$style:{wrapper:`_wrapper_1qi5n_125`,overflowText:`_overflowText_1qi5n_129`,bundledConfirmedChip:`_bundledConfirmedChip_1qi5n_135`,bundledIconWrapper:`_bundledIconWrapper_1qi5n_150`,bundledConfirmedIcon:`_bundledConfirmedIcon_1qi5n_158`,bundledRemoveButton:`_bundledRemoveButton_1qi5n_165`,bundledUnconfirmedChip:`_bundledUnconfirmedChip_1qi5n_182`,bundledUnconfirmedIcon:`_bundledUnconfirmedIcon_1qi5n_202`,expandedNodeList:`_expandedNodeList_1qi5n_206`,expandedNodeItem:`_expandedNodeItem_1qi5n_212`,expandedNodeName:`_expandedNodeName_1qi5n_225`,expandedRemoveButton:`_expandedRemoveButton_1qi5n_233`}}]]),MS=X(g({__name:`MessageFocusedNodesChips`,props:{focusedNodeNames:{}},setup(e){let t=e,n=K(),r=Jt(),i=Gi(),l=a(()=>t.focusedNodeNames?.length??0),d=a(()=>l.value>=3),f=a(()=>l.value>0&&i.allNodes.length>0&&l.value>=i.allNodes.length),p=a(()=>t.focusedNodeNames?.length?t.focusedNodeNames.map(e=>{let t=i.allNodes.find(t=>t.name===e);return{name:e,nodeType:t?r.getNodeType(t.type):null}}):[]),h=e=>e.length<=20?e:`${e.substring(0,19)}...`;return(t,r)=>e.focusedNodeNames?.length?(M(),s(`div`,{key:0,class:U(t.$style.container)},[f.value?(M(),s(`span`,{key:0,class:U(t.$style.chip)},[m(u(J),{icon:`layers`,size:`small`,class:U(t.$style.chipIcon)},null,8,[`class`]),W(`span`,{class:U(t.$style.chipLabel)},o(u(n).baseText(`focusedNodes.allNodes`)),3)],2)):d.value?(M(),s(`span`,{key:1,class:U(t.$style.chip)},[m(u(J),{icon:`layers`,size:`small`,class:U(t.$style.chipIcon)},null,8,[`class`]),W(`span`,{class:U(t.$style.chipLabel)},o(u(n).baseText(`focusedNodes.nodesCount`,{interpolate:{count:l.value}})),3)],2)):(M(!0),s(w,{key:2},L(p.value,e=>(M(),s(`span`,{key:e.name,class:U(t.$style.chip)},[W(`span`,{class:U(t.$style.chipIconWrapper)},[e.nodeType?(M(),y(uu,{key:0,"node-type":e.nodeType,size:12},null,8,[`node-type`])):(M(),y(u(J),{key:1,icon:`crosshair`,size:`xsmall`,class:U(t.$style.chipIcon)},null,8,[`class`]))],2),W(`span`,{class:U(t.$style.chipLabel)},o(h(e.name)),3)],2))),128))],2)):c(``,!0)}}),[[`__cssModules`,{$style:{container:`_container_rsqvg_125`,chip:`_chip_rsqvg_131`,chipIconWrapper:`_chipIconWrapper_rsqvg_145`,chipIcon:`_chipIcon_rsqvg_145`,chipLabel:`_chipLabel_rsqvg_164`}}]]);const NS=[{id:`multi-agent-research`,summary:`Multi-agent research workflow`,prompt:'Create a multi-agent AI workflow using `gpt-4.1-mini` where several agents work together to research a topic, fact-check the findings, and write a report that\'s sent as an HTML email. One agent should gather recent, credible information about the topic. Another agent should verify the facts and only mark something as "verified" if it appears in at least two independent sources. A third agent should combine the verified information into a clear, well-written report under 1,000 words. A final agent should edit and format the report to make it look clean and professional in the body of the email. Use Gmail to send the report.'},{id:`email-summary`,summary:`Summarize emails with AI`,prompt:"Create an automation that runs on Monday mornings. It reads my Gmail inbox from the weekend, analyzes them with `gpt-4.1-mini` to find action items and priorities, and emails me a structured email using Gmail."},{id:`ai-news-digest`,summary:`Daily AI news digest`,prompt:'Build an automation that runs every night 8pm. Use the NewsAPI "/everything" endpoint to search for AI-related news from the day. Pick the top 5 articles and use OpenAI `gpt-4.1-mini` to summarize each in two sentences. Generate an image using OpenAI based on the top article\'s summary. Send a structured Telegram message.'},{id:`daily-weather-report`,summary:`Daily weather report`,prompt:"Create an automation that checks the weather for my location every morning at 5 a.m using OpenWeather. Send me a short weather report by email using Gmail. Use OpenAI `gpt-4.1-mini` to write a short, fun formatted email body by adding personality when describing the weather and how the day might feel. Include all details relevant to decide on my plans and clothes for the day."},{id:`invoice-pipeline`,summary:`Invoice processing pipeline`,prompt:"Create an invoice processing workflow using an n8n Form. When a user submits an invoice file (PDF or image) with their email address, use OpenAI `gpt-4.1-mini` to extract invoice data. Then, validate the date format is correct, the currency is valid, and the total amount is greater than zero. If validation fails, email the user a clear error message that explains which check failed from my Gmail. If the data passes validation, store the structured result in a datatable plus email the user. Every Monday morning, generate a weekly spending report using `gpt-4.1-mini` based on stored invoices and send a clean email using Gmail."},{id:`rag-assistant`,summary:`RAG knowledge assistant`,prompt:"Build an automation that creates a document-to-chat RAG pipeline. The workflow starts with an n8n Form where a user uploads one or more files (PDF, CSV, or JSON). Each upload should trigger a process that reads the file, splits it into chunks, and generates embeddings using OpenAI `gpt-4.1-mini` model, saved in one Pinecone table. Add a second part of the workflow for querying: use a Chat Message Trigger to act as a chatbot interface. When a user sends a question, retrieve the top 5 most relevant chunks from Pinecone, pass them into `gpt-4.1-mini` as context, and have it answer naturally using only the retrieved information. If a question can't be answered confidently, the bot should respond with: \"I couldn't find that in the uploaded documents.\" Log each chat interaction in a Data Table with the user query, matched file(s), and timestamp. Send a daily summary email through Gmail showing total questions asked, top files referenced, and any failed lookups."},{id:`lead-qualification`,summary:`Lead qualification and call scheduling`,prompt:`Create an n8n form with a lead generation form I can embed on my website homepage. Build an automation that processes form submissions, uses AI to qualify the lead, sends data to an n8n data table. For high-score leads, it should also email them to offer to schedule a 15-min call in a free slot in my calendar.`},{id:`youtube-auto-chapters`,summary:`YouTube video chapters`,prompt:`Build an n8n workflow that automatically generates YouTube chapter timestamps from video captions. Use the n8n chat trigger for me to enter the URL of the YouTube video. Use the YouTube Get a video node to get the video title, description, and existing metadata. Use the YouTube Captions API to download the transcript for the given video ID. Send the transcript to AI agent using Anthropic's Claude model. Prompt the model to identify topic shifts and return structured output in timestamp - chapter format. Append the generated chapter list to the existing video description. Use the YouTube Update a video node to update the video description. Respond back with the updates using the respond to chat node.`}];var PS=t(_o(),1);function FS(){let e=Gi(),t=Sr(),n=Wi(),r=Jt(),i=Qi(),a=$l(),o=Tn();function s(t){let n=new Map(e.allNodes.map(e=>[e.id,e])),r=new Map(e.allNodes.map(e=>[`${e.type}::${e.name}`,e])),i=[],a=[],o=[],s=new Set;return t.nodes?.forEach(e=>{let t=n.get(e.id);if(!t){let n=`${e.type}::${e.name}`;t=r.get(n)}t?(i.push({existing:t,updated:{...e,id:t.id}}),s.add(t.id)):a.push(e)}),n.forEach((e,t)=>{s.has(t)||o.push(e)}),{nodesToUpdate:i,nodesToAdd:a,nodesToRemove:o}}async function c(n){if(n.length===0)return;let i=new Map;for(let{existing:e,updated:t}of n)if(e.name!==t.name){let n=await a.renameNode(e.name,t.name,{trackHistory:!0,trackBulk:!1,showErrorToast:!1});n&&i.set(e.id,n)}let s=e.cloneWorkflowObject();for(let{existing:e,updated:a}of n){let n=i.get(e.id)??e.name,o=s.nodes[n];if(!o)continue;Object.assign(o,{...a,position:e.position,name:n});let c=r.getNodeType(o.type,o.typeVersion);c&&(o.parameters=qo(c.properties??[],o.parameters,!0,!1,o,c)??{}),(0,PS.default)(e.parameters,a.parameters)||t.resetParametersLastUpdatedAt(n)}e.setNodes(Object.values(s.nodes)),e.setConnections(s.connectionsBySourceNode);for(let{existing:e}of n){let t=i.get(e.id)??e.name;o.updateNodeParameterIssuesByName(t)}}function l(e){for(let t of e)a.deleteNode(t.id,{trackHistory:!0,trackBulk:!1})}async function u(e){return e.length===0?[]:await a.addNodes(e.map(e=>({...e})),{trackHistory:!0,trackBulk:!1,forcePosition:!0,telemetry:!1})}function d(e,t){return e.source===t.source&&e.target===t.target&&(e.sourceHandle??null)===(t.sourceHandle??null)&&(e.targetHandle??null)===(t.targetHandle??null)}async function f(t){let n=e.workflow.connections,r=Yl(n,e.allNodes),i=Yl(t,e.allNodes),o=r.filter(e=>!i.some(t=>d(e,t))),s=i.filter(e=>!r.some(t=>d(t,e)));for(let e of o)a.deleteConnection(e,{trackHistory:!0,trackBulk:!1});s.length>0&&await a.addConnections(s,{trackHistory:!0,trackBulk:!1})}function p(e){for(let t of e){if(t.credentials&&Object.keys(t.credentials).length>0)continue;let e=r.getNodeType(t.type);if(e?.credentials)for(let r of e.credentials){let i=n.getCredentialsByType(r.name);if(!i||i.length===0)continue;let a=i[0];t.credentials={[a.type]:{id:a.id,name:a.name}};let o=Cn(e),s=dn(e,r);o&&s&&(t.parameters[o.name]=s.value);break}}}function m(n,r){n&&r&&e.workflow.name.startsWith(`My workflow`)&&t.setWorkflowName({newName:n,setStateDirty:!1})}function h(e){e.length!==0&&Ql.emit(`tidyUp`,{source:`builder-update`,nodeIdsFilter:e,trackEvents:!1,trackHistory:!0,trackBulk:!1})}async function g(t,n){try{p(t.nodes??[]);let{nodesToUpdate:r,nodesToAdd:a,nodesToRemove:o}=s(t);await c(r),l(o);let d=(await u(a)).map(e=>e.id);return await f(t.connections??{}),m(t.name,n?.isInitialGeneration),t.pinData&&e.setWorkflowPinData({...e.workflow.pinData,...t.pinData}),i.setBuilderMadeEdits(!0),h([...d,...n?.nodeIdsToTidyUp??[]]),{success:!0,newNodeIds:d}}catch(e){return{success:!1,error:e}}}return{updateWorkflow:g}}function IS(e){let t=ha(),n=K();function r(r,i){let a=r instanceof Error?r.message:String(r),o=i?.context;console.error(`[${e.source}${o?` - ${o}`:``}]`,r),xl(r,{tags:{source:e.source,context:o}});let s=i?.title??(e.titleKey?n.baseText(e.titleKey):`Error`);t.showMessage({type:`error`,title:s,message:i?.message??a})}return{handleError:r}}var LS=t(sd(),1),RS=X(g({__name:`AISettingsButton`,props:{disabled:{type:Boolean,default:!1},showUsabilityNotice:{type:Boolean,default:!1}},setup(e){let t=e,n=K();return(e,r)=>(M(),s(`div`,{class:U(e.$style.container),"data-test-id":`ai-settings-button`},[t.showUsabilityNotice?(M(),y(u(Ke),{key:0,theme:`warning`,type:`tooltip`},{default:k(()=>[W(`span`,null,o(u(n).baseText(`aiAssistant.reducedHelp.chat.notice`)),1)]),_:1})):c(``,!0),m(u(He),{content:u(n).baseText(`settings.ai.button.tooltip`),disabled:t.disabled},{default:k(()=>[m(u(lt),{to:t.disabled?void 0:{name:u($).AI_SETTINGS},"aria-label":u(n).baseText(`settings.ai.button.tooltip`),class:U({[e.$style.link]:!0,[e.$style.disabled]:t.disabled})},{default:k(()=>[m(u(J),{icon:`settings`,size:`large`,color:`text-light`})]),_:1},8,[`to`,`aria-label`,`class`])]),_:1},8,[`content`,`disabled`])],2))}}),[[`__cssModules`,{$style:{container:`_container_1w2a4_125`,link:`_link_1w2a4_132`,disabled:`_disabled_1w2a4_148`}}]]),zS=X(g({__name:`BuildModeEmptyState`,setup(e){let t=K();return(e,n)=>(M(),s(`div`,{class:U(e.$style.container)},[m(u(J),{icon:`wand-sparkles`,class:U(e.$style.icon)},null,8,[`class`]),W(`h3`,{class:U(e.$style.title)},o(u(t).baseText(`aiAssistant.builder.existingWorkflow.emptyState.title`)),3),W(`p`,{class:U(e.$style.body)},o(u(t).baseText(`aiAssistant.builder.existingWorkflow.emptyState.body`)),3)],2))}}),[[`__cssModules`,{$style:{container:`_container_d7kbl_125`,icon:`_icon_d7kbl_133`,title:`_title_d7kbl_139`,body:`_body_d7kbl_147`}}]]),BS=X(g({__name:`PlanDisplayMessage`,props:{message:{},disabled:{type:Boolean},showActions:{type:Boolean,default:!0}},emits:[`decision`],setup(e,{emit:t}){let n=e,r=t,i=K(),l=d(!1),f=a(()=>n.message.data.plan);function p(){l.value||(l.value=!0,r(`decision`,{action:`approve`}))}return(t,n)=>(M(),s(`div`,{class:U(t.$style.message),"data-test-id":`plan-mode-plan-message`},[W(`div`,{class:U(t.$style.card)},[m(u(Y),null,{default:k(()=>[R(o(f.value.summary),1)]),_:1}),W(`div`,{class:U(t.$style.triggerSection)},[m(u(Y),null,{default:k(()=>[R(o(u(i).baseText(`aiAssistant.builder.planMode.plan.triggerLabel`))+`:`,1)]),_:1}),m(u(Y),{tag:`p`},{default:k(()=>[R(o(f.value.trigger),1)]),_:1})],2),W(`ol`,{class:U(t.$style.steps)},[(M(!0),s(w,null,L(f.value.steps,(e,n)=>(M(),s(`li`,{key:n},[m(u(Y),null,{default:k(()=>[R(o(e.description),1)]),_:2},1024),e.subSteps?.length?(M(),s(`ul`,{key:0,class:U(t.$style.subSteps)},[(M(!0),s(w,null,L(e.subSteps,(e,t)=>(M(),s(`li`,{key:t},[m(u(Y),null,{default:k(()=>[R(o(e),1)]),_:2},1024)]))),128))],2)):c(``,!0)]))),128))],2),f.value.additionalSpecs?.length?(M(),s(`div`,{key:0,class:U(t.$style.section)},[m(u(Y),null,{default:k(()=>[R(o(u(i).baseText(`aiAssistant.builder.planMode.plan.notesLabel`)),1)]),_:1}),W(`ul`,{class:U(t.$style.notes)},[(M(!0),s(w,null,L(f.value.additionalSpecs,(e,t)=>(M(),s(`li`,{key:t},[m(u(Y),null,{default:k(()=>[R(o(e),1)]),_:2},1024)]))),128))],2)],2)):c(``,!0),e.showActions?(M(),s(`div`,{key:1,class:U(t.$style.actions)},[m(u(q),{type:`primary`,disabled:e.disabled||l.value,"data-test-id":`plan-mode-plan-approve`,onClick:p},{default:k(()=>[R(o(u(i).baseText(`aiAssistant.builder.planMode.actions.implement`)),1)]),_:1},8,[`disabled`])],2)):c(``,!0)],2)],2))}}),[[`__cssModules`,{$style:{message:`_message_1jt83_125`,card:`_card_1jt83_132`,section:`_section_1jt83_139`,triggerSection:`_triggerSection_1jt83_145`,steps:`_steps_1jt83_151`,subSteps:`_subSteps_1jt83_158`,notes:`_notes_1jt83_165`,actions:`_actions_1jt83_172`}}]]),VS=X(g({__name:`PlanModeSelector`,props:{modelValue:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=K(),l=a(()=>[{id:`build`,label:i.baseText(`aiAssistant.builder.planMode.selector.build`),description:i.baseText(`aiAssistant.builder.planMode.selector.build.description`),icon:`box`,checked:n.modelValue===`build`},{id:`plan`,label:i.baseText(`aiAssistant.builder.planMode.selector.plan`),description:i.baseText(`aiAssistant.builder.planMode.selector.plan.description`),icon:`scroll-text`,checked:n.modelValue===`plan`}]),d=a(()=>l.value.find(e=>e.id===n.modelValue)??l.value[0]);function f(e){r(`update:modelValue`,e)}return(e,t)=>(M(),s(`div`,{class:U(e.$style.container),"data-test-id":`plan-mode-selector`},[m(u(De),{items:l.value,placement:`bottom-end`,"hide-arrow":``,onSelect:f},{activator:k(()=>[m(u(q),{type:`secondary`,size:`small`,class:U(e.$style.trigger)},{default:k(()=>[d.value.icon?(M(),y(u(J),{key:0,icon:d.value.icon,size:`small`},null,8,[`icon`])):c(``,!0),W(`span`,{class:U(e.$style.triggerLabel)},o(d.value.label),3),m(u(J),{icon:`chevron-down`,size:`xsmall`})]),_:1},8,[`class`])]),menuItem:k(t=>[W(`div`,{class:U(e.$style.menuItem)},[W(`span`,{class:U(e.$style.label)},o(t.label),3),W(`span`,{class:U(e.$style.description)},o(t.description),3)],2)]),_:1},8,[`items`])],2))}}),[[`__cssModules`,{$style:{container:`_container_1su38_125`,trigger:`_trigger_1su38_130`,triggerLabel:`_triggerLabel_1su38_137`,menuItem:`_menuItem_1su38_141`,label:`_label_1su38_147`,description:`_description_1su38_153`}}]]),HS={key:1},US=`__other__`,WS=X(g({__name:`PlanQuestionsMessage`,props:{questions:{},introMessage:{},disabled:{type:Boolean},answered:{type:Boolean}},emits:[`submit`],setup(e,{emit:t}){let n=e,r=K(),i=t,l=d(0),f=d(!1),p=d(new Map),h=a(()=>n.questions[l.value]),g=a(()=>l.value===0),_=a(()=>l.value===n.questions.length-1),v=a(()=>(h.value.options??[]).filter(e=>!e.toLowerCase().trim().startsWith(`other`))),b=a(()=>{let e=h.value;return e?p.value.get(e.id):void 0}),x=a(()=>{let e=b.value;if(!e)return!1;if(e.skipped)return!0;let t=!!e.customText?.trim(),n=e.selectedOptions.length>0;return h.value?.type===`text`||e.selectedOptions.includes(US)?t:n||t}),S=a(()=>x.value?_.value?r.baseText(`aiAssistant.builder.planMode.questions.submitButton`):r.baseText(`aiAssistant.builder.planMode.questions.next`):_.value?r.baseText(`aiAssistant.builder.planMode.questions.skipAndSubmit`):r.baseText(`aiAssistant.builder.planMode.questions.skip`));T(l,()=>{let e=h.value;e&&!p.value.has(e.id)&&p.value.set(e.id,{questionId:e.id,question:e.question,selectedOptions:[],customText:``,skipped:!1})},{immediate:!0});function C(e){let t=b.value;t&&(t.selectedOptions=[e],e!==US&&(t.customText=``),t.skipped=!1)}function E(e,t){let n=b.value;if(!n)return;let r=n.selectedOptions;if(t&&!r.includes(e))r.push(e);else if(!t){let t=r.indexOf(e);t>-1&&r.splice(t,1)}n.skipped=!1}function D(e){let t=b.value;t&&(t.customText=e,t.skipped=!1)}function O(){g.value||l.value--}function A(){if(!x.value){let e=b.value;e&&(e.skipped=!0)}_.value?j():l.value++}function j(){f.value||(f.value=!0,i(`submit`,n.questions.map(e=>{let t=p.value.get(e.id);return t?{...t,selectedOptions:t.selectedOptions.filter(e=>e!==US)}:{questionId:e.id,question:e.question,selectedOptions:[],customText:``,skipped:!0}})))}return(t,n)=>(M(),s(`div`,{class:U(t.$style.wrapper),"data-test-id":`plan-mode-questions-message`},[e.introMessage?(M(),y(u(Y),{key:0,class:U(t.$style.intro)},{default:k(()=>[R(o(e.introMessage),1)]),_:1},8,[`class`])):c(``,!0),!e.answered&&h.value&&b.value?(M(),s(`div`,{key:1,class:U(t.$style.container)},[W(`div`,{class:U(t.$style.question)},[m(u(Y),{tag:`p`,bold:!0,class:U(t.$style.questionText)},{default:k(()=>[R(o(h.value.question),1)]),_:1},8,[`class`]),h.value.type===`single`?(M(),s(`div`,{key:0,class:U(t.$style.options)},[(M(!0),s(w,null,L(v.value,t=>(M(),y(u(Ma),{key:t,"model-value":b.value.selectedOptions[0],label:t,disabled:e.disabled,"onUpdate:modelValue":()=>C(t)},{default:k(()=>[R(o(t),1)]),_:2},1032,[`model-value`,`label`,`disabled`,`onUpdate:modelValue`]))),128))],2)):h.value.type===`multi`?(M(),s(`div`,{key:1,class:U(t.$style.options)},[(M(!0),s(w,null,L(v.value,n=>(M(),s(`label`,{key:n,class:U([t.$style.checkboxOption,{[t.$style.selected]:b.value.selectedOptions.includes(n)}])},[m(u(At),{"model-value":b.value.selectedOptions.includes(n),disabled:e.disabled,"onUpdate:modelValue":e=>E(n,e)},null,8,[`model-value`,`disabled`,`onUpdate:modelValue`]),W(`span`,{class:U(t.$style.optionLabel)},o(n),3)],2))),128))],2)):h.value.type===`text`?(M(),y(u(mt),{key:2,"model-value":b.value.customText,type:`textarea`,rows:3,disabled:e.disabled,placeholder:u(r).baseText(`aiAssistant.builder.planMode.questions.customPlaceholder`),"onUpdate:modelValue":D},null,8,[`model-value`,`disabled`,`placeholder`])):c(``,!0),h.value.type===`single`?(M(),s(`div`,{key:3,class:U(t.$style.otherOption)},[m(u(Ma),{"model-value":b.value.selectedOptions[0],label:US,disabled:e.disabled,"onUpdate:modelValue":n[1]||=()=>C(US)},{default:k(()=>[m(u(mt),{"model-value":b.value.customText,disabled:e.disabled,placeholder:u(r).baseText(`aiAssistant.builder.planMode.questions.other`),size:`small`,class:U(t.$style.otherInput),"onUpdate:modelValue":D,onFocus:n[0]||=()=>C(US)},null,8,[`model-value`,`disabled`,`placeholder`,`class`])]),_:1},8,[`model-value`,`disabled`])],2)):h.value.type===`multi`?(M(),s(`div`,{key:4,class:U(t.$style.otherOption)},[m(u(At),{"model-value":!!b.value.customText?.trim(),disabled:e.disabled,"onUpdate:modelValue":n[2]||=e=>{e||D(``)}},null,8,[`model-value`,`disabled`]),m(u(mt),{"model-value":b.value.customText,disabled:e.disabled,placeholder:u(r).baseText(`aiAssistant.builder.planMode.questions.other`),size:`small`,class:U(t.$style.otherInput),"onUpdate:modelValue":D},null,8,[`model-value`,`disabled`,`placeholder`,`class`])],2)):c(``,!0)],2),W(`div`,{class:U(t.$style.footer)},[W(`div`,{class:U(t.$style.progress)},[(M(!0),s(w,null,L(e.questions,(e,n)=>(M(),s(`div`,{key:n,class:U([t.$style.progressDot,{[t.$style.active]:n<=l.value}])},null,2))),128))],2),W(`div`,{class:U(t.$style.navigation)},[g.value?(M(),s(`div`,HS)):(M(),y(u(q),{key:0,variant:`subtle`,size:`small`,disabled:e.disabled,onClick:O},{default:k(()=>[R(o(u(r).baseText(`aiAssistant.builder.planMode.questions.back`)),1)]),_:1},8,[`disabled`])),m(u(q),{type:_.value&&x.value?`primary`:`secondary`,size:`small`,disabled:e.disabled||f.value,"data-test-id":`plan-mode-questions-next`,onClick:A},{default:k(()=>[R(o(S.value),1)]),_:1},8,[`type`,`disabled`])],2)],2)],2)):c(``,!0)],2))}}),[[`__cssModules`,{$style:{wrapper:`_wrapper_14n6a_125`,intro:`_intro_14n6a_131`,container:`_container_14n6a_135`,question:`_question_14n6a_140`,questionText:`_questionText_14n6a_144`,options:`_options_14n6a_148`,checkboxOption:`_checkboxOption_14n6a_165`,selected:`_selected_14n6a_177`,optionLabel:`_optionLabel_14n6a_181`,otherOption:`_otherOption_14n6a_186`,otherInput:`_otherInput_14n6a_205`,footer:`_footer_14n6a_209`,progress:`_progress_14n6a_217`,progressDot:`_progressDot_14n6a_222`,active:`_active_14n6a_229`,navigation:`_navigation_14n6a_233`}}]]),GS=X(g({__name:`UserAnswersMessage`,props:{answers:{}},setup(e){let t=K();function n(e){let n=[];return e.selectedOptions.length>0&&n.push(e.selectedOptions.join(`, `)),e.customText?.trim()&&n.push(e.customText.trim()),n.join(`, `)||t.baseText(`aiAssistant.builder.planMode.answers.noAnswer`)}return(r,i)=>e.answers.length>0?(M(),s(`div`,{key:0,class:U(r.$style.container),"data-test-id":`plan-mode-user-answers`},[(M(!0),s(w,null,L(e.answers,e=>(M(),s(`div`,{key:e.questionId,class:U(r.$style.answerItem)},[m(u(Y),{bold:!0,class:U(r.$style.question)},{default:k(()=>[R(o(e.question),1)]),_:2},1032,[`class`]),e.skipped?(M(),y(u(Y),{key:0},{default:k(()=>[R(o(u(t).baseText(`aiAssistant.builder.planMode.answers.skipped`)),1)]),_:1})):(M(),y(u(Y),{key:1},{default:k(()=>[R(o(n(e)),1)]),_:2},1024))],2))),128))],2)):c(``,!0)}}),[[`__cssModules`,{$style:{container:`_container_1vfyo_125`,answerItem:`_answerItem_1vfyo_132`,question:`_question_1vfyo_141`}}]]),KS=X(g({__name:`AskAssistantBuild`,emits:[`close`],setup(e,{expose:t,emit:n}){let r=n,i=Qi(),o=Ji(),f=tn(),p=Qr(),h=bu(),g=ci(),_=la(),v=zn(),b=V(),x=Gi(),S=lc(),C=bi(),w=jt(),D=K(),O=Te(),{goToUpgrade:A}=$s(),j=ha(),{updateWorkflow:N}=FS(),{handleError:P}=IS({source:`ai-builder`,titleKey:`aiAssistant.builder.error.title`}),{onDocumentVisible:I}=Aa(),{canPrompt:L}=qr();I(()=>{i.clearDoneIndicatorTitle()});let R=d(new Set),ee=d([]),ne=d(),re=d(),B=d(),ie=d(``),ae=d(!1);T(()=>i.streaming,e=>{e&&L.value&&(ae.value=!0)});let H=a(()=>S.canManageAISettings),oe=a(()=>_.settings.ai.allowSendingParameterValues),se=a(()=>ae.value&&L.value);T(se,e=>{e&&i.trackWorkflowBuilderJourney(`browser_notification_ask_permission`)});let ce=a(()=>({firstName:o.currentUser?.firstName??``,lastName:o.currentUser?.lastName??``})),le=a(()=>{if(!(i.getRunningTools(i.chatMessages).length>0))return i.builderThinkingMessage}),ue=a(()=>O.name),de=a(()=>{let e=i.chatMessages,t=e.findLastIndex(e=>e.type===`workflow-updated`||e.type===`tool`&&e.toolName===`update_node_parameters`),n=e.slice(t+1),r=n.some(e=>e.type===`error`),a=n.some(e=>Ye(e)),o=e.findLast(e=>e.role===`assistant`),s=o&&(qn(o)||Hn(o));return!i.streaming&&x.workflow.nodes.length>0&&t>-1&&!r&&!a&&!s}),fe=a(()=>i.creditsQuota),pe=a(()=>i.creditsRemaining),me=a(()=>!o.isInstanceOwner),he=a(()=>i.isCodeBuilder?D.baseText(`aiAssistant.builder.thinkingCompletionMessage.codeBuilder`):void 0),ge=a(()=>{if(!(i.hasMessages||x.workflow.nodes.length>0))return(0,LS.default)(NS)}),G=a(()=>g.autoSaveState===xs.Scheduled||g.autoSaveState===xs.InProgress),_e=a(()=>h.shouldBeReadOnly||G.value),ve=a(()=>_e.value||i.shouldDisableChatInput),ye=a(()=>{if(ve.value){if(G.value)return D.baseText(`aiAssistant.builder.disabledTooltip.autosaving`);if(h.shouldBeReadOnly)return D.baseText(`aiAssistant.builder.disabledTooltip.readOnly`)}});function be(e){let t=i.chatMessages,n=t.findIndex(t=>t.id===e.id);if(n===-1)return!1;for(let e=n+1;e<t.length;e++)if(tr(t[e]))return!0;return!1}function xe(e){let t=i.chatMessages,n=t.findLastIndex(t=>t.id===e.id);return n===-1?!1:!t.slice(n+1).some(e=>e.role===`user`)}async function Se(e){h.requestWriteAccess(),ee.value=[];let t=x.workflow.nodes.length===0;await i.sendChatMessage({text:e,initialGeneration:t})}async function Ce(){if(!ie.value.trim())return;let e=ie.value;ie.value=``,await Se(e)}function we(){i.resetBuilderChat(),R.value.clear(),ee.value=[],ae.value=!1}function De(e){e.rating&&v.track(`User rated workflow generation`,{helpful:e.rating===`up`,workflow_id:x.workflowId,session_id:i.trackingSessionId}),e.feedback&&v.track(`User submitted workflow generation feedback`,{feedback:e.feedback,workflow_id:x.workflowId,session_id:i.trackingSessionId,user_message_id:i.lastUserMessageId})}async function Oe(){let e=x.workflowExecutionData,t=e?.status??`unknown`,n=e?.data?.resultData.lastNodeExecuted,r=n?x.workflow.nodes.find(e=>e.name===n)?.type:void 0;if(!e){await i.sendChatMessage({text:D.baseText(`aiAssistant.builder.executeMessage.noExecutionData`),type:`execution`,executionStatus:`error`,errorMessage:`Workflow execution data missing after run attempt.`});return}if(t===`success`){await i.sendChatMessage({text:D.baseText(`aiAssistant.builder.executeMessage.executionSuccess`),type:`execution`,executionStatus:t});return}let a=e.data?.resultData.error?.message??`Unknown error`,o=n?D.baseText(`aiAssistant.builder.executeMessage.executionFailedOnNode`,{interpolate:{nodeName:n,errorMessage:a}}):D.baseText(`aiAssistant.builder.executeMessage.executionFailed`,{interpolate:{errorMessage:a}}),s=t===`unknown`?`error`:t;await i.sendChatMessage({text:o,type:`execution`,errorMessage:a,errorNodeType:r,executionStatus:s})}function ke(e){try{return Ya(e)}catch(e){P(e,{context:`workflow-json-parse`,title:D.baseText(`aiAssistant.builder.workflowParsingError.title`),message:D.baseText(`aiAssistant.builder.workflowParsingError.content`)});return}}T(()=>i.workflowMessages,async e=>{for(let t of e){if(!t.id||R.value.has(t.id)||!Ee(t))continue;R.value.add(t.id);let e=ke(t.codeSnippet);if(!e)continue;let n=await N(e,{isInitialGeneration:i.initialGeneration,nodeIdsToTidyUp:ee.value});if(!n.success){P(n.error,{context:`workflow-update`}),i.abortStreaming();return}n.newNodeIds.length>0&&(ee.value=[...ee.value,...n.newNodeIds])}},{deep:!0}),T(()=>i.streaming,(e,t)=>{e&&!t?p.startRecordingUndo():!e&&t&&p.stopRecordingUndo()}),T(()=>i.streaming,async(e,t)=>{!t||e||(i.initialGeneration&&x.workflow.nodes.length>0&&(i.initialGeneration=!1),ee.value.length>0&&(await l(),Ql.emit(`fitView`)))});async function Ae(e,t){try{let n=await i.restoreToVersion(e,t);if(!n)return;i.clearExistingWorkflow(),ri.emit(`importWorkflowData`,{data:n,tidyUp:!1,regenerateIds:!1,trackEvents:!1,setStateDirty:!1})}catch(e){j.showMessage({type:`error`,title:D.baseText(`aiAssistant.builder.restoreError.title`),message:e instanceof Error?e.message:`Unknown error`})}}function je(e){let t=w.resolve({name:$.WORKFLOW_HISTORY,params:{workflowId:x.workflowId,versionId:e}});window.open(t.href,`_blank`)}return T(ue,()=>{i.streaming||we()}),T(()=>C.focusRequested,()=>{l(()=>{B.value?.focusInput()??re.value?.focusInput()??ne.value?.focusInput()})}),t({focusInput:()=>{B.value?.focusInput()??re.value?.focusInput()??ne.value?.focusInput()}}),(e,t)=>(M(),s(`div`,{"data-test-id":`ask-assistant-chat`,tabindex:`0`,class:U(e.$style.container),onKeydown:t[4]||=F(()=>{},[`stop`])},[m(u(yt),{ref_key:`n8nChatRef`,ref:ne,user:ce.value,messages:u(i).chatMessages,streaming:u(i).streaming,"loading-message":le.value,"thinking-completion-message":he.value,mode:u(D).baseText(`aiAssistant.builder.mode`),"show-stop":!0,"scroll-on-new-message":!0,"credits-quota":fe.value,"credits-remaining":pe.value,"show-ask-owner-tooltip":me.value,suggestions:ge.value,"input-placeholder":u(D).baseText(`aiAssistant.builder.assistantPlaceholder`),"workflow-id":u(x).workflowId,"prune-time-hours":u(f).evaluatedPruneTime,disabled:ve.value,"disabled-tooltip":ye.value,onClose:t[2]||=e=>r(`close`),onMessage:Se,onUpgradeClick:t[3]||=()=>u(A)(`ai-builder-sidebar`,`upgrade-builder`),onFeedback:De,onStop:u(i).abortStreaming,onRestoreConfirm:Ae,onShowVersion:je},{"focused-nodes-chips":k(({message:e})=>[m(MS,{"focused-node-names":e.focusedNodeNames},null,8,[`focused-node-names`])]),header:k(()=>[W(`div`,{class:U({[e.$style.header]:!0,[e.$style[`with-slot`]]:!!u(b).header})},[E(e.$slots,`header`,{},void 0,!0),H.value?(M(),y(RS,{key:0,"show-usability-notice":!oe.value,disabled:u(i).streaming},null,8,[`show-usability-notice`,`disabled`])):c(``,!0)],2)]),inputHeader:k(()=>[m(z,{name:`slide`},{default:k(()=>[se.value?(M(),y(CS,{key:0})):c(``,!0)]),_:1})]),messagesFooter:k(()=>[de.value?(M(),y(SS,{key:0,onWorkflowExecuted:Oe})):c(``,!0)]),placeholder:k(()=>[m(zS)]),"custom-message":k(({message:e})=>[u(qn)(e)?(M(),y(WS,{key:0,questions:e.data.questions,"intro-message":e.data.introMessage,disabled:u(i).streaming,answered:be(e),onSubmit:u(i).resumeWithQuestionsAnswers},null,8,[`questions`,`intro-message`,`disabled`,`answered`,`onSubmit`])):u(Hn)(e)?(M(),y(BS,{key:1,message:e,disabled:u(i).streaming,"show-actions":xe(e),onDecision:u(i).resumeWithPlanDecision},null,8,[`message`,`disabled`,`show-actions`,`onDecision`])):u(tr)(e)?(M(),y(GS,{key:2,answers:e.data.answers},null,8,[`answers`])):c(``,!0)]),"suggestions-input":k(({modelValue:e,onUpdateModelValue:t,placeholder:n,disabled:r,disabledTooltip:a,streaming:o,creditsQuota:s,creditsRemaining:c,showAskOwnerTooltip:l,onSubmit:d,onStop:f,onUpgradeClick:p,registerFocus:h})=>[m(jS,{ref_key:`suggestionsInputRef`,ref:B,"model-value":e,placeholder:n,disabled:r,"disabled-tooltip":a,streaming:o,"credits-quota":s,"credits-remaining":c,"show-ask-owner-tooltip":l,"onUpdate:modelValue":t,onSubmit:d,onStop:f,onUpgradeClick:p,onVnodeMounted:e=>h(()=>B.value?.focusInput())},te({_:2},[u(i).isPlanModeAvailable?{name:`extra-actions`,fn:k(()=>[m(VS,{"model-value":u(i).builderMode,"onUpdate:modelValue":u(i).setBuilderMode},null,8,[`model-value`,`onUpdate:modelValue`])]),key:`0`}:void 0]),1032,[`model-value`,`placeholder`,`disabled`,`disabled-tooltip`,`streaming`,`credits-quota`,`credits-remaining`,`show-ask-owner-tooltip`,`onUpdate:modelValue`,`onSubmit`,`onStop`,`onUpgradeClick`,`onVnodeMounted`])]),inputPlaceholder:k(()=>[m(jS,{ref_key:`chatInputRef`,ref:re,modelValue:ie.value,"onUpdate:modelValue":t[0]||=e=>ie.value=e,placeholder:u(D).baseText(`aiAssistant.builder.assistantPlaceholder`),disabled:_e.value,"disabled-tooltip":ye.value,streaming:u(i).streaming,"credits-quota":fe.value,"credits-remaining":pe.value,"show-ask-owner-tooltip":me.value,onSubmit:Ce,onStop:u(i).abortStreaming,onUpgradeClick:t[1]||=()=>u(A)(`ai-builder-sidebar`,`upgrade-builder`)},te({_:2},[u(i).isPlanModeAvailable?{name:`extra-actions`,fn:k(()=>[m(VS,{"model-value":u(i).builderMode,"onUpdate:modelValue":u(i).setBuilderMode},null,8,[`model-value`,`onUpdate:modelValue`])]),key:`0`}:void 0]),1032,[`modelValue`,`placeholder`,`disabled`,`disabled-tooltip`,`streaming`,`credits-quota`,`credits-remaining`,`show-ask-owner-tooltip`,`onStop`])]),_:3},8,[`user`,`messages`,`streaming`,`loading-message`,`thinking-completion-message`,`mode`,`credits-quota`,`credits-remaining`,`show-ask-owner-tooltip`,`suggestions`,`input-placeholder`,`workflow-id`,`prune-time-hours`,`disabled`,`disabled-tooltip`,`onStop`])],34))}}),[[`__cssModules`,{$style:{container:`_container_vqbbm_125`,header:`_header_vqbbm_130`,"with-slot":`_with-slot_vqbbm_136`,newWorkflowButtonWrapper:`_newWorkflowButtonWrapper_vqbbm_140`,newWorkflowText:`_newWorkflowText_vqbbm_150`}}],[`__scopeId`,`data-v-a353f097`]]),qS=X(g({__name:`AskModeEmptyState`,setup(e){let t=K();return(e,n)=>(M(),s(`div`,{class:U(e.$style.container)},[m(u(J),{icon:`lightbulb`,class:U(e.$style.icon)},null,8,[`class`]),W(`h3`,{class:U(e.$style.title)},o(u(t).baseText(`aiAssistant.askMode.emptyState.title`)),3),W(`p`,{class:U(e.$style.body)},o(u(t).baseText(`aiAssistant.askMode.emptyState.body1`)),3),W(`p`,{class:U(e.$style.body)},[R(o(u(t).baseText(`aiAssistant.askMode.emptyState.body2`))+` `,1),m(u(ot),{size:`small`,static:!0,class:U(e.$style.inlineButton)},null,8,[`class`]),R(` `+o(u(t).baseText(`aiAssistant.askMode.emptyState.body3`)),1)],2)],2))}}),[[`__cssModules`,{$style:{container:`_container_18k35_125`,icon:`_icon_18k35_133`,title:`_title_18k35_139`,body:`_body_18k35_147`,inlineButton:`_inlineButton_18k35_155`}}]]),JS=X(g({__name:`AskAssistantChat`,emits:[`close`],setup(e,{expose:t,emit:n}){let r=n,i=lc(),o=Sr(),l=Ji(),f=la(),p=zn(),h=V(),g=K(),_=d(),v=a(()=>f.settings.ai.allowSendingParameterValues),b=a(()=>({firstName:l.currentUser?.firstName??``,lastName:l.currentUser?.lastName??``})),x=a(()=>i.assistantThinkingMessage),S=a(()=>i.canManageAISettings);async function C(e,t,n=!1){i.currentSessionId?await i.sendMessage({text:e,quickReplyType:t}):await i.initSupportChat(e);let r=i.chatSessionTask,a=i.chatMessages.filter(e=>e.role===`assistant`&&![`text`,`event`].includes(e.type)).length;n&&p.track(`User gave feedback`,{task:r,chat_session_id:i.currentSessionId,is_quick_reply:!!t,is_positive:t===`all-good`,solution_count:a,response:e})}async function w(e){await i.applyCodeDiff(o,e),p.track(`User clicked solution card action`,{action:`replace_code`})}async function T(e){await i.undoCodeDiff(o,e),p.track(`User clicked solution card action`,{action:`undo_code_replace`})}return t({focusInput:()=>{_.value?.focusInput()}}),(e,t)=>(M(),s(`div`,{"data-test-id":`ask-assistant-chat`,tabindex:`0`,class:U(e.$style.wrapper),onKeydown:t[1]||=F(()=>{},[`stop`])},[m(u(yt),{ref_key:`n8nChatRef`,ref:_,user:b.value,messages:u(i).chatMessages,streaming:u(i).streaming,"loading-message":x.value,"session-id":u(i).currentSessionId,"input-placeholder":u(g).baseText(`aiAssistant.askMode.inputPlaceholder`),onClose:t[0]||=e=>r(`close`),onMessage:C,onCodeReplace:w,onCodeUndo:T},{header:k(()=>[W(`div`,{class:U({[e.$style.header]:!0,[e.$style[`with-slot`]]:!!u(h).header})},[E(e.$slots,`header`),S.value?(M(),y(RS,{key:0,"show-usability-notice":!v.value,disabled:u(i).streaming},null,8,[`show-usability-notice`,`disabled`])):c(``,!0)],2)]),placeholder:k(()=>[m(qS)]),_:3},8,[`user`,`messages`,`streaming`,`loading-message`,`session-id`,`input-placeholder`])],34))}}),[[`__cssModules`,{$style:{wrapper:`_wrapper_1692g_125`,header:`_header_1692g_130`,"with-slot":`_with-slot_1692g_136`}}]]),YS={class:`ask-mode-coachmark__header`},XS={class:`ask-mode-coachmark__title`},ZS={class:`ask-mode-coachmark__body`},QS={class:`ask-mode-coachmark__footer`},$S=g({__name:`AskModeCoachmark`,props:{visible:{type:Boolean}},emits:[`dismiss`],setup(e,{emit:t}){let n=t,r=K();return(t,i)=>(M(),y(u(Ze),{open:e.visible,"show-arrow":!0,"enable-scrolling":!1,"suppress-auto-focus":!0,side:`bottom`,align:`center`,"side-offset":8,"z-index":2200,"content-class":`ask-mode-coachmark`},{trigger:k(()=>[E(t.$slots,`default`)]),content:k(()=>[W(`div`,YS,[W(`span`,XS,o(u(r).baseText(`aiAssistant.coachmark.title`)),1)]),W(`p`,ZS,o(u(r).baseText(`aiAssistant.coachmark.body`)),1),W(`div`,QS,[m(u(q),{size:`small`,label:u(r).baseText(`aiAssistant.coachmark.gotIt`),class:`ask-mode-coachmark__button`,onClick:i[0]||=e=>n(`dismiss`)},null,8,[`label`])])]),_:3},8,[`open`]))}}),eC=e=>typeof e==`string`&&Rn.includes(e);function tC(){let e=uc(),t=Qi(),n=la(),r=Te(),{isCalloutDismissed:i,dismissCallout:o}=pu(),s=a(()=>e.isBuilderModeActive),c=a(()=>n.isAiAssistantEnabled&&t.isAIBuilderEnabled&&eC(r?.name)),l=a(()=>!!(e.isOpen&&!s.value&&e.showCoachmark&&c.value&&!i(`ask-mode-coachmark`)));async function u(){await o(`ask-mode-coachmark`)}return{isBuildMode:s,canToggleModes:c,shouldShowCoachmark:l,onDismissCoachmark:u}}var nC=g({__name:`HubSwitcher`,props:{isBuildMode:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:[`toggle`],setup(e,{emit:t}){let n=e,r=t,i=K(),o=a(()=>[{label:i.baseText(`aiAssistant.tabs.ask`),value:!1},{label:i.baseText(`aiAssistant.tabs.build`),value:!0}]);function s(e){r(`toggle`,e)}return(e,t)=>(M(),y(u(He),{content:u(i).baseText(`aiAssistant.tabs.builder.disabled.tooltip`),disabled:!n.disabled},{default:k(()=>[m(u(Nt),{size:`small`,"model-value":n.isBuildMode,options:o.value,disabled:n.disabled,"onUpdate:modelValue":s},null,8,[`model-value`,`options`,`disabled`])]),_:1},8,[`content`,`disabled`]))}}),rC=X(g({__name:`AssistantsHub`,setup(e){let t=Qi(),n=lc(),r=uc(),i=la(),{isBuildMode:o,canToggleModes:s,shouldShowCoachmark:c,onDismissCoachmark:l}=tC(),p=d(!1),h=a(()=>c.value&&p.value);T(()=>r.isOpen,e=>{e||(p.value=!1)});let g=d(),_=d(),v=a(()=>r.width);function b(e){r.updateWidth(e.width)}function x(e){Zs().callDebounced(b,{debounceTime:10,trailing:!0},e)}async function S(){let e=r.isOpen,n=!o.value,i=n?`builder`:`assistant`;e?(n&&t.chatMessages.length===0&&(await t.fetchBuilderCredits(),await t.loadSessions()),r.switchMode(i)):n?await r.open({mode:`builder`}):await r.open({mode:`assistant`})}function w(){r.close()}function E(){p.value=!0,o.value?g.value?.focusInput():_.value?.focusInput()}let D=n.$onAction(({name:e})=>{[`initErrorHelper`,`initCredHelp`].includes(e)&&r.switchMode(`assistant`)}),A=t.$onAction(({name:e})=>{[`sendChatMessage`].includes(e)&&r.switchMode(`builder`)});return C(()=>{s.value||(t.isAIBuilderEnabled?r.switchMode(`builder`):i.isAiAssistantEnabled&&r.switchMode(`assistant`))}),f(()=>{D(),A()}),(e,t)=>(M(),y(md,{onAfterEnter:E},{default:k(()=>[ce(m(u(Fe),{"supported-directions":[`left`],width:v.value,"min-width":u(r).MIN_CHAT_WIDTH,"max-width":u(r).MAX_CHAT_WIDTH,class:U(e.$style.resizeWrapper),"data-test-id":`ask-assistant-sidebar`,onResize:x},{default:k(()=>[W(`div`,{style:O({width:`${v.value}px`}),class:U(e.$style.wrapper)},[W(`div`,{class:U(e.$style.assistantContent)},[u(o)?(M(),y(KS,{key:0,ref_key:`askAssistantBuildRef`,ref:g,onClose:w},te({_:2},[u(s)?{name:`header`,fn:k(()=>[m(nC,{"is-build-mode":u(o),onToggle:S},null,8,[`is-build-mode`])]),key:`0`}:void 0]),1536)):(M(),y(JS,{key:1,ref_key:`askAssistantChatRef`,ref:_,onClose:w},te({_:2},[u(s)?{name:`header`,fn:k(()=>[m($S,{visible:h.value,onDismiss:u(l)},{default:k(()=>[m(nC,{"is-build-mode":u(o),onToggle:S},null,8,[`is-build-mode`])]),_:1},8,[`visible`,`onDismiss`])]),key:`0`}:void 0]),1536))],2)],6)]),_:1},8,[`width`,`min-width`,`max-width`,`class`]),[[ie,u(r).isOpen]])]),_:1}))}}),[[`__cssModules`,{$style:{resizeWrapper:`_resizeWrapper_nk2fr_125`,wrapper:`_wrapper_nk2fr_129`,assistantContent:`_assistantContent_nk2fr_135`}}]]),iC=g({__name:`AppChatPanel`,props:{layoutRef:{}},setup(e){let t=e,n=uc(),r=Vi(),i=a(()=>n.width),o=async()=>{if(await l(),t.layoutRef){let{width:e,height:n}=t.layoutRef.getBoundingClientRect();r.appGridDimensions={width:e,height:n}}};return C(async()=>{window.addEventListener(`resize`,o),await o()}),f(()=>{window.removeEventListener(`resize`,o)}),T(i,async()=>{await o()}),(e,t)=>(M(),y(rC))}}),aC=`.el-overlay`;function oC(e){let t=zn(),n=qt(),r=Qr(),i=Vi(),{isCtrlKeyPressed:a}=_t(),o=async()=>{let e=r.popUndoableToUndo();if(!e)return;let t=Date.now();if(e instanceof si){r.bulkInProgress=!0;let n=e.commands,i=[];for(let e=n.length-1;e>=0;e--)await n[e].revert(),i.push(n[e].getReverseCommand(t));r.pushUndoableToRedo(new si(i)),await l(),r.bulkInProgress=!1}e instanceof ii&&(await e.revert(),r.pushUndoableToRedo(e.getReverseCommand(t)),i.markStateDirty()),c(e,`undo`)},s=async()=>{let e=r.popUndoableToRedo();if(!e)return;let t=Date.now();if(e instanceof si){r.bulkInProgress=!0;let n=e.commands,i=[];for(let e=n.length-1;e>=0;e--)await n[e].revert(),i.push(n[e].getReverseCommand(t));r.pushBulkCommandToUndo(new si(i),!1),await l(),r.bulkInProgress=!1}e instanceof ii&&(await e.revert(),r.pushCommandToUndo(e.getReverseCommand(t),!1),i.markStateDirty()),c(e,`redo`)};function c(e,n){e instanceof ii?t.track(`User hit ${n}`,{commands_length:1,commands:[e.name]}):e instanceof si&&t.track(`User hit ${n}`,{commands_length:e.commands.length,commands:e.commands.map(e=>e.name)})}function u(){let e=n.activeNode;e&&t?.track(`User hit undo in NDV`,{node_type:e.type})}function d(){return document.querySelector(`${aC}:not([style*="display: none"])`)!==null}function f(t){let r=In(e),c=n.isNDVOpen,l=i.isAnyModalOpen||d(),f=a(t)&&t.key.toLowerCase()===`z`;if(!(t.repeat||r!==ds.WORKFLOW||t.target instanceof HTMLElement&&Jl(t.target))){if(c||l){c&&f&&!t.shiftKey&&u();return}f&&(t.preventDefault(),t.shiftKey?s():o())}}return C(()=>{document.addEventListener(`keydown`,f)}),v(()=>{document.removeEventListener(`keydown`,f)}),{undo:o,redo:s}}var sC=1e4,cC=5e3;function lC(){let e=Di(),t=la(),n=d(!1);async function r(){if(!t.endpointHealth)return!0;let e=new AbortController,n=setTimeout(()=>e.abort(),cC);try{return(await fetch(t.endpointHealth,{cache:`no-store`,signal:e.signal})).ok}catch{return!1}finally{clearTimeout(n)}}async function i(){if(!n.value){n.value=!0;try{let t=await r();e.setOnline(t)}finally{n.value=!1}}}let{startHeartbeat:a,stopHeartbeat:o}=_u({interval:sC,onHeartbeat:()=>{i()}});return C(()=>{i(),a()}),v(()=>{o()}),{isOnline:e.isOnline}}function uC(){let e=d(!1),t=Ws(),n=la(),r=Ji(),i=vn(),o=zn(),s=Te(),c=a(()=>r.currentUserId??``),l=a(()=>{let e=s.meta;return e?.telemetry?!e.telemetry.disabled:!0}),u=a(()=>n.telemetry),f=a(()=>!!u.value?.enabled);function p(){e.value||!l.value||!f.value||(o.init(u.value,{instanceId:t.instanceId,userId:c.value,projectId:i.personalProject?.id,versionCli:t.versionCli}),e.value=!0)}T(u,()=>{p()}),T(l,e=>{e&&p()}),C(()=>{p()})}function dC(){let e=Te(),t=Vi(),n=et(),r=e=>{t.modalsById[e]?.open&&t.closeModal(e)},i=(e,n=!1)=>{let r=e===`push`?un:Wn,i=n&&t.modalsById[r]?.data?.eventBus?t.modalsById[r].data:{eventBus:et()};t.openModalWithData({name:r,data:i})},a=(e,r,i)=>{let a=e&&i,o=t.modalsById[vo]?.open;a&&!o?t.openModalWithData({name:vo,data:{eventBus:n,workflowId:e,workflowStatus:r,direction:i}}):!a&&o&&t.closeModal(vo)},o=(e,n,a)=>{if(e&&!n){let n=e===`push`?un:Wn;t.modalsById[n]?.open||i(e);return}if(a&&!n&&!e){let e=a===`push`?un:Wn;t.modalsById[e]?.open||i(a,!0);return}!e&&!n&&(r(un),r(Wn))},s=()=>{let t=typeof e.query.diff==`string`?e.query.diff:void 0,n=t&&ao(e.query.workflowStatus)?e.query.workflowStatus:void 0,r=typeof e.query.direction==`string`&&(e.query.direction===`push`||e.query.direction===`pull`)?e.query.direction:void 0,i=typeof e.query.sourceControl==`string`&&(e.query.sourceControl===`push`||e.query.sourceControl===`pull`)?e.query.sourceControl:void 0;a(t,n,r),o(i,t,r)};return T(()=>[e.query.diff,e.query.direction,e.query.sourceControl],s,{immediate:!0}),s(),{workflowDiffEventBus:n}}function fC(e,t){let n=document.documentElement.style.getPropertyValue(e),r=fe(e);T(()=>x(t),e=>{r.value=e},{immediate:!0}),f(()=>{document.documentElement.style.setProperty(e,n??null)})}var pC=42;function mC(){let e=lc(),t=qt(),n=Zl(),r=a(()=>!0),i=a(()=>t.isNDVOpen&&!r.value?48:16);return{askAiFloatingButtonBottomOffset:a(()=>`${i.value}px`),toastBottomOffset:a(()=>`${(t.isNDVOpen?0:n.height)+(e.isFloatingButtonShown?pC+i.value:0)}px`)}}var hC=[`id`],gC=X(g({__name:`App`,setup(e){let t=Te(),n=Ws(),r=la(),i=qt(),{setAppZIndexes:o}=Hr(),{toastBottomOffset:s,askAiFloatingButtonBottomOffset:l}=mC();oC(t),dC(),uC(),lC();let f=d(!0),p=a(()=>n.defaultLocale),h=a(()=>t.name===$.DEMO),g=d(!1);mu({ndv_source:a(()=>i.lastSetActiveNodeSource)}),C(async()=>{o(),_(),f.value=!1});let _=()=>{r.isHiringBannerEnabled&&!h.value&&console.log(ko)};T(t,e=>{g.value=e.matched.some(e=>e.components?.footer!==void 0)}),T(p,async e=>{ye(e),Ls.defaults.headers.common[`Accept-Language`]=e,Me(e)},{immediate:!0});let v=d(null),b=e=>{v.value=e};return fC(`--toast--offset`,s),fC(`--ask-assistant--floating-button--margin-bottom`,l),(e,t)=>{let n=B(`RouterView`);return f.value?(M(),y(hd,{key:0})):(M(),y(La,{key:1,id:`n8n-app`,class:U(e.$style.app)},{banners:k(()=>[m(Jd)]),aside:k(()=>[v.value?(M(),y(iC,{key:0,"layout-ref":v.value},null,8,[`layout-ref`])):c(``,!0)]),default:k(()=>[m(gS,{onMounted:b},{default:k(()=>[m(n)]),_:1}),m(Vx),m(mS),W(`div`,{id:u(po)},null,8,hC)]),_:1},8,[`class`]))}}}),[[`__cssModules`,{$style:{app:`_app_1lj2z_125`}}]]);n(((e,t)=>{var n=function(e){var t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i,a=typeof Symbol==`function`?Symbol:{},o=a.iterator||`@@iterator`,s=a.asyncIterator||`@@asyncIterator`,c=a.toStringTag||`@@toStringTag`;function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},``)}catch{l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype);return r(o,`_invoke`,{value:E(e,n,new A(i||[]))}),o}e.wrap=u;function d(e,t,n){try{return{type:`normal`,arg:e.call(t,n)}}catch(e){return{type:`throw`,arg:e}}}var f=`suspendedStart`,p=`suspendedYield`,m=`executing`,h=`completed`,g={};function _(){}function v(){}function y(){}var b={};l(b,o,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(j([])));S&&S!==t&&n.call(S,o)&&(b=S);var C=y.prototype=_.prototype=Object.create(b);v.prototype=y,r(C,`constructor`,{value:y,configurable:!0}),r(y,`constructor`,{value:v,configurable:!0}),v.displayName=l(y,c,`GeneratorFunction`);function w(e){[`next`,`throw`,`return`].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}e.isGeneratorFunction=function(e){var t=typeof e==`function`&&e.constructor;return t?t===v||(t.displayName||t.name)===`GeneratorFunction`:!1},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,`GeneratorFunction`)),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}};function T(e,t){function i(r,a,o,s){var c=d(e[r],e,a);if(c.type===`throw`)s(c.arg);else{var l=c.arg,u=l.value;return u&&typeof u==`object`&&n.call(u,`__await`)?t.resolve(u.__await).then(function(e){i(`next`,e,o,s)},function(e){i(`throw`,e,o,s)}):t.resolve(u).then(function(e){l.value=e,o(l)},function(e){return i(`throw`,e,o,s)})}}var a;function o(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return a=a?a.then(r,r):r()}r(this,`_invoke`,{value:o})}w(T.prototype),l(T.prototype,s,function(){return this}),e.AsyncIterator=T,e.async=function(t,n,r,i,a){a===void 0&&(a=Promise);var o=new T(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})};function E(e,t,n){var r=f;return function(i,a){if(r===m)throw Error(`Generator is already running`);if(r===h){if(i===`throw`)throw a;return M()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=D(o,n);if(s){if(s===g)continue;return s}}if(n.method===`next`)n.sent=n._sent=n.arg;else if(n.method===`throw`){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else n.method===`return`&&n.abrupt(`return`,n.arg);r=m;var c=d(e,t,n);if(c.type===`normal`){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}else c.type===`throw`&&(r=h,n.method=`throw`,n.arg=c.arg)}}}function D(e,t){var n=t.method,r=e.iterator[n];if(r===i)return t.delegate=null,n===`throw`&&e.iterator.return&&(t.method=`return`,t.arg=i,D(e,t),t.method===`throw`)||n!==`return`&&(t.method=`throw`,t.arg=TypeError(`The iterator does not provide a '`+n+`' method`)),g;var a=d(r,e.iterator,t.arg);if(a.type===`throw`)return t.method=`throw`,t.arg=a.arg,t.delegate=null,g;var o=a.arg;if(!o)return t.method=`throw`,t.arg=TypeError(`iterator result is not an object`),t.delegate=null,g;if(o.done)t[e.resultName]=o.value,t.next=e.nextLoc,t.method!==`return`&&(t.method=`next`,t.arg=i);else return o;return t.delegate=null,g}w(C),l(C,c,`Generator`),l(C,o,function(){return this}),l(C,`toString`,function(){return`[object Generator]`});function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type=`normal`,delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:`root`}],e.forEach(O,this),this.reset(!0)}e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}};function j(e){if(e!=null){var t=e[o];if(t)return t.call(e);if(typeof e.next==`function`)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=i,t.done=!0,t};return a.next=a}}throw TypeError(typeof e+` is not iterable`)}e.values=j;function M(){return{value:i,done:!0}}return A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method=`next`,this.arg=i,this.tryEntries.forEach(k),!e)for(var t in this)t.charAt(0)===`t`&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(e.type===`throw`)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type=`throw`,s.arg=e,t.next=n,r&&(t.method=`next`,t.arg=i),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if(o.tryLoc===`root`)return r(`end`);if(o.tryLoc<=this.prev){var c=n.call(o,`catchLoc`),l=n.call(o,`finallyLoc`);if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else if(l){if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else throw Error(`try statement without catch or finally`)}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,`finallyLoc`)&&this.prev<i.finallyLoc){var a=i;break}}a&&(e===`break`||e===`continue`)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method=`next`,this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if(e.type===`throw`)throw e.arg;return e.type===`break`||e.type===`continue`?this.next=e.arg:e.type===`return`?(this.rval=this.arg=e.arg,this.method=`return`,this.next=`end`):e.type===`normal`&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(r.type===`throw`){var i=r.arg;k(n)}return i}}throw Error(`illegal catch attempt`)},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},this.method===`next`&&(this.arg=i),g}},e}(typeof t==`object`?t.exports:{});try{regeneratorRuntime=n}catch{typeof globalThis==`object`?globalThis.regeneratorRuntime=n:Function(`r`,`regeneratorRuntime = r`)(n)}}))();const _C={install(e){let t=hr();e.use(St,{}),e.use(ir),e.config.globalProperties.$loading=ir.service,e.config.globalProperties.$msgbox=Mr,e.config.globalProperties.$alert=t.alert,e.config.globalProperties.$confirm=t.confirm,e.config.globalProperties.$prompt=t.prompt,e.config.globalProperties.$message=t.message}};function vC(e){return e.type.indexOf(`mouse`)===-1?e.touches[0].clientX:e.clientX}function yC(e){return e.type.indexOf(`mouse`)===-1?e.touches[0].clientY:e.clientY}var bC=(function(){var e=!1;try{var t=Object.defineProperty({},`passive`,{get:function(){e=!0}});window.addEventListener(`test`,null,t)}catch{}return e})(),xC={install:function(e,t){var n=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:``,dragFrequency:100,rollOverFrequency:100},t);function r(e){var t=this.$$touchObj,n=e.type.indexOf(`touch`)>=0,r=e.type.indexOf(`mouse`)>=0,i=this;n&&(t.lastTouchStartTime=e.timeStamp),!(r&&t.lastTouchStartTime&&e.timeStamp-t.lastTouchStartTime<350)&&(t.touchStarted||(d(this),t.touchStarted=!0,t.touchMoved=!1,t.swipeOutBounded=!1,t.startX=vC(e),t.startY=yC(e),t.currentX=0,t.currentY=0,t.touchStartTime=e.timeStamp,t.hasSwipe=l(this,`swipe`)||l(this,`swipe.left`)||l(this,`swipe.right`)||l(this,`swipe.top`)||l(this,`swipe.bottom`),l(this,`hold`)&&(t.touchHoldTimer=setTimeout(function(){t.touchHoldTimer=null,u(e,i,`hold`)},t.options.touchHoldTolerance)),u(e,this,`press`)))}function i(e){var t=this.$$touchObj,n=vC(e),r=yC(e),i=t.currentX!=n||t.currentY!=r;if(t.currentX=n,t.currentY=r,t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var a=t.options.swipeTolerance;t.swipeOutBounded=Math.abs(t.startX-t.currentX)>a&&Math.abs(t.startY-t.currentY)>a}}else{var o=t.options.tapTolerance;t.touchMoved=Math.abs(t.startX-t.currentX)>o||Math.abs(t.startY-t.currentY)>o,t.touchMoved&&(p(t),u(e,this,`drag.once`))}if(l(this,`rollover`)&&i){var s=e.timeStamp,c=t.options.rollOverFrequency;(t.touchRollTime==null||s>t.touchRollTime+c)&&(t.touchRollTime=s,u(e,this,`rollover`))}if(l(this,`drag`)&&t.touchStarted&&t.touchMoved&&i){var s=e.timeStamp,c=t.options.dragFrequency;(t.touchDragTime==null||s>t.touchDragTime+c)&&(t.touchDragTime=s,u(e,this,`drag`))}}function a(){var e=this.$$touchObj;p(e),f(this),e.touchStarted=e.touchMoved=!1,e.startX=e.startY=0}function o(e){var t=this.$$touchObj,n=e.type.indexOf(`touch`)>=0,r=e.type.indexOf(`mouse`)>=0;n&&(t.lastTouchEndTime=e.timeStamp);var i=n&&!t.touchHoldTimer;if(p(t),t.touchStarted=!1,f(this),!(r&&t.lastTouchEndTime&&e.timeStamp-t.lastTouchEndTime<350))if(u(e,this,`release`),t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var a=t.options.swipeTolerance,o,s=Math.abs(t.startY-t.currentY),c=Math.abs(t.startX-t.currentX);(s>a||c>a)&&(o=s>a?t.startY>t.currentY?`top`:`bottom`:t.startX>t.currentX?`left`:`right`,l(this,`swipe.`+o)?u(e,this,`swipe.`+o,o):u(e,this,`swipe`,o))}}else if(l(this,`longtap`)&&e.timeStamp-t.touchStartTime>t.options.longTapTimeInterval)e.cancelable&&e.preventDefault(),u(e,this,`longtap`);else if(l(this,`hold`)&&i){e.cancelable&&e.preventDefault();return}else u(e,this,`tap`)}function s(){d(this)}function c(){f(this)}function l(e,t){var n=e.$$touchObj.callbacks[t];return n!=null&&n.length>0}function u(e,t,n,r){var i=t.$$touchObj.callbacks[n];if(i==null||i.length===0)return null;for(var a=0;a<i.length;a++){var o=i[a];o.modifiers.stop&&e.stopPropagation(),o.modifiers.prevent&&e.preventDefault(),!(o.modifiers.self&&e.target!==e.currentTarget)&&typeof o.value==`function`&&(r?o.value(r,e):o.value(e))}}function d(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.add(t)}function f(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.remove(t)}function p(e){e.touchHoldTimer&&=(clearTimeout(e.touchHoldTimer),null)}function m(e,t){var r=e.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:n};return t&&(r.options=Object.assign({},r.options,t)),e.$$touchObj=r,e.$$touchObj}e.directive(`touch`,{beforeMount:function(e,t){var n=m(e),l=bC?{passive:!0}:!1,u=t.arg||`tap`;switch(u){case`swipe`:var d=t.modifiers;if(d.left||d.right||d.top||d.bottom){for(var f in t.modifiers)if([`left`,`right`,`top`,`bottom`].indexOf(f)>=0){var p=`swipe.`+f;n.callbacks[p]=n.callbacks[p]||[],n.callbacks[p].push(t)}}else n.callbacks.swipe=n.callbacks.swipe||[],n.callbacks.swipe.push(t);break;case`press`:case`drag`:t.modifiers.disablePassive&&(l=!1);default:n.callbacks[u]=n.callbacks[u]||[],n.callbacks[u].push(t)}n.hasBindTouchEvents||=(e.addEventListener(`touchstart`,r,l),e.addEventListener(`touchmove`,i,l),e.addEventListener(`touchcancel`,a),e.addEventListener(`touchend`,o),n.options.disableClick||(e.addEventListener(`mousedown`,r),e.addEventListener(`mousemove`,i),e.addEventListener(`mouseup`,o),e.addEventListener(`mouseenter`,s),e.addEventListener(`mouseleave`,c)),!0)},unmounted:function(e){e.removeEventListener(`touchstart`,r),e.removeEventListener(`touchmove`,i),e.removeEventListener(`touchcancel`,a),e.removeEventListener(`touchend`,o),e.$$touchObj&&!e.$$touchObj.options.disableClick&&(e.removeEventListener(`mousedown`,r),e.removeEventListener(`mousemove`,i),e.removeEventListener(`mouseup`,o),e.removeEventListener(`mouseenter`,s),e.removeEventListener(`mouseleave`,c)),delete e.$$touchObj}}),e.directive(`touch-class`,{beforeMount:function(e,t){m(e,{touchClass:t.value})}}),e.directive(`touch-options`,{beforeMount:function(e,t){m(e,t.value)}})}};const SC={install(e){e.use(xC)}},CC={install:()=>{bd.register(Cd,wd,xd,Sd,_d,vd,yd,Td,gd)}};var wC=[{instanceof:Bs},{instanceof:zs,message:/ECONNREFUSED/},{instanceof:zs,message:`Can't connect to n8n.`},{instanceof:zs,message:`Unauthorized`},{instanceof:RangeError,message:/Position \d+ is out of range for changeset of length \d+/},{instanceof:RangeError,message:/Invalid change range \d+ to \d+/},{instanceof:RangeError,message:/Selection points outside of document$/},{instanceof:Error,message:/ResizeObserver/}];function TC(e,{originalException:t}){return!t||wC.some(e=>t instanceof e.instanceof?`message`in e?e.message instanceof RegExp?e.message.test(t.message??``):t.message===e.message:!0:!1)?null:e}const EC={install:e=>{let t=Vs(`sentry`);if(!t?.dsn)return;let{dsn:n,release:r,environment:i,serverName:a}=t;Hg({app:e,dsn:n,release:r,environment:i,integrations:[Xp({levels:[`error`]}),mm({prefix:``,root:window.location.origin+`/`})],beforeSend:TC}),a&&(Xc(`server_name`,a),Cl({id:a}))}};var DC=Ns(),OC=I(gC);OC.use(EC),Fu(Iu),OC.use(lr),OC.use(Hs),OC.use(_C),OC.use(SC),OC.use(DC),OC.use(Iu),OC.use(he),OC.use(CC),OC.mount(`#app`);
//# sourceMappingURL=index-BUJUkpkJ.js.map