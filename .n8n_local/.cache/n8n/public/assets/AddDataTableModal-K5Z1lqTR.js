(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`359600fe-7f30-4221-9040-137e130c0ef0`,e._sentryDebugIdIdentifier=`sentry-dbid-359600fe-7f30-4221-9040-137e130c0ef0`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,J as s,Jt as c,M as l,P as u,T as d,Vt as f,W as p,Z as m,_ as h,_t as g,an as _,at as v,bn as y,bt as b,ct as x,et as S,h as C,it as w,j as T,k as E,m as D,mn as O,nn as k,nt as A,r as j,tn as M,un as N,vn as P,w as F,z as I,zt as L}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{yt as ee}from"./_MapCache-DjbOQyB7.js";import{$r as R,Bn as te,Ci as ne,Cr as re,Dr as z,Er as ie,Fr as B,Gn as ae,Hi as V,Hn as oe,Ir as H,Jr as se,Kn as ce,Lr as le,Mn as U,Rn as ue,Sr as W,Tr as de,Ui as fe,Vi as pe,Vr as me,Xn as he,Yn as ge,Yr as _e,Zr as ve,ai as ye,ar as be,en as G,fn as K,ft as xe,gr as Se,hn as Ce,hr as we,ir as Te,ji as Ee,jn as q,jr as De,nn as J,ot as Oe,pn as ke,pt as Ae,rn as Y,rr as je,st as Me,wi as Ne,wn as Pe,wr as Fe,xr as Ie,zn as Le}from"./src-CppJvwzX.js";import{t as Re}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{a as ze,c as Be,i as Ve,n as He,o as Ue,r as We,s as X,t as Ge}from"./_initCloneObject-CdQbDHKp.js";import{Lt as Ke,r as qe,yr as Je}from"./users.store-pCkD7Zo0.js";import{n as Ye,t as Xe}from"./radio-CPckkBdz.js";import{Ir as Ze,ei as Qe,na as $e,pi as et}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import{t as tt}from"./dataTable.store-dy4dvFXe.js";import{t as nt}from"./Modal-DQeDdfPI.js";function rt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var it=rt;function at(e,t){return e&&X(t,De(t),e)}var ot=at;function st(e,t){return e&&X(t,Ue(t),e)}var ct=st;function lt(e,t){return X(e,Fe(e),t)}var ut=lt,dt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)z(t,Fe(e)),e=ze(e);return t}:de;function ft(e,t){return X(e,dt(e),t)}var pt=ft;function mt(e){return re(e,Ue,dt)}var ht=mt,gt=Object.prototype.hasOwnProperty;function _t(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&gt.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}var vt=_t;function yt(e,t){var n=t?We(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var bt=yt,xt=/\w*$/;function St(e){var t=new e.constructor(e.source,xt.exec(e));return t.lastIndex=e.lastIndex,t}var Ct=St,wt=R?R.prototype:void 0,Tt=wt?wt.valueOf:void 0;function Et(e){return Tt?Object(Tt.call(e)):{}}var Dt=Et,Ot=`[object Boolean]`,kt=`[object Date]`,At=`[object Map]`,jt=`[object Number]`,Mt=`[object RegExp]`,Nt=`[object Set]`,Pt=`[object String]`,Ft=`[object Symbol]`,It=`[object ArrayBuffer]`,Lt=`[object DataView]`,Rt=`[object Float32Array]`,zt=`[object Float64Array]`,Bt=`[object Int8Array]`,Vt=`[object Int16Array]`,Ht=`[object Int32Array]`,Ut=`[object Uint8Array]`,Wt=`[object Uint8ClampedArray]`,Gt=`[object Uint16Array]`,Kt=`[object Uint32Array]`;function qt(e,t,n){var r=e.constructor;switch(t){case It:return We(e);case Ot:case kt:return new r(+e);case Lt:return bt(e,n);case Rt:case zt:case Bt:case Vt:case Ht:case Ut:case Wt:case Gt:case Kt:return He(e,n);case At:return new r;case jt:case Pt:return new r(e);case Mt:return Ct(e);case Nt:return new r;case Ft:return Dt(e)}}var Jt=qt,Yt=`[object Map]`;function Xt(e){return ve(e)&&Ie(e)==Yt}var Zt=Xt,Qt=B&&B.isMap,$t=Qt?H(Qt):Zt,en=`[object Set]`;function tn(e){return ve(e)&&Ie(e)==en}var nn=tn,rn=B&&B.isSet,an=rn?H(rn):nn,on=1,sn=2,cn=4,ln=`[object Arguments]`,un=`[object Array]`,dn=`[object Boolean]`,fn=`[object Date]`,pn=`[object Error]`,mn=`[object Function]`,hn=`[object GeneratorFunction]`,gn=`[object Map]`,_n=`[object Number]`,vn=`[object Object]`,yn=`[object RegExp]`,bn=`[object Set]`,xn=`[object String]`,Sn=`[object Symbol]`,Cn=`[object WeakMap]`,wn=`[object ArrayBuffer]`,Tn=`[object DataView]`,En=`[object Float32Array]`,Dn=`[object Float64Array]`,On=`[object Int8Array]`,kn=`[object Int16Array]`,An=`[object Int32Array]`,jn=`[object Uint8Array]`,Mn=`[object Uint8ClampedArray]`,Nn=`[object Uint16Array]`,Pn=`[object Uint32Array]`,Z={};Z[ln]=Z[un]=Z[wn]=Z[Tn]=Z[dn]=Z[fn]=Z[En]=Z[Dn]=Z[On]=Z[kn]=Z[An]=Z[gn]=Z[_n]=Z[vn]=Z[yn]=Z[bn]=Z[xn]=Z[Sn]=Z[jn]=Z[Mn]=Z[Nn]=Z[Pn]=!0,Z[pn]=Z[mn]=Z[Cn]=!1;function Q(e,t,n,r,i,a){var o,s=t&on,c=t&sn,l=t&cn;if(n&&(o=i?n(e,r,i,a):n(e)),o!==void 0)return o;if(!se(e))return e;var u=_e(e);if(u){if(o=vt(e),!s)return Be(e,o)}else{var d=Ie(e),f=d==mn||d==hn;if(le(e))return Ve(e,s);if(d==vn||d==ln||f&&!i){if(o=c||f?{}:Ge(e),!s)return c?pt(e,ct(o,e)):ut(e,ot(o,e))}else{if(!Z[d])return i?e:{};o=Jt(e,d,s)}}a||=new ie;var p=a.get(e);if(p)return p;a.set(e,o),an(e)?e.forEach(function(r){o.add(Q(r,t,n,r,e,a))}):$t(e)&&e.forEach(function(r,i){o.set(i,Q(r,t,n,i,e,a))});var m=u?void 0:(l?c?ht:W:c?Ue:De)(e);return it(m||e,function(r,i){m&&(i=r,r=e[i]),me(o,i,Q(r,t,n,i,e,a))}),o}var Fn=Q,In=1,Ln=4;function Rn(e){return Fn(e,In|Ln)}var zn=Rn,Bn=q({type:{type:String,default:`line`,values:[`line`,`circle`,`dashboard`]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:``,values:[``,`success`,`exception`,`warning`]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:U(String),default:`round`},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:U([String,Array,Function]),default:``},striped:Boolean,stripedFlow:Boolean,format:{type:U(Function),default:e=>`${e}%`}});M();var Vn=[`aria-valuenow`],Hn={viewBox:`0 0 100 100`},Un=[`d`,`stroke`,`stroke-linecap`,`stroke-width`],Wn=[`d`,`stroke`,`opacity`,`stroke-linecap`,`stroke-width`],Gn={key:0},Kn=Pe(Y(u({...u({name:`ElProgress`}),props:Bn,setup(e){let o=e,s={success:`#13ce66`,exception:`#ff4949`,warning:`#e6a23c`,default:`#20a0ff`},c=K(`progress`),l=t(()=>({width:`${o.percentage}%`,animationDuration:`${o.duration}s`,backgroundColor:j(o.percentage)})),u=t(()=>(o.strokeWidth/o.width*100).toFixed(1)),f=t(()=>[`circle`,`dashboard`].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(u.value)/2}`,10):0),p=t(()=>{let e=f.value,t=o.type===`dashboard`;return`
          M 50 50
          m 0 ${t?``:`-`}${e}
          a ${e} ${e} 0 1 1 0 ${t?`-`:``}${e*2}
          a ${e} ${e} 0 1 1 0 ${t?``:`-`}${e*2}
          `}),m=t(()=>2*Math.PI*f.value),h=t(()=>o.type===`dashboard`?.75:1),g=t(()=>`${-1*m.value*(1-h.value)/2}px`),C=t(()=>({strokeDasharray:`${m.value*h.value}px, ${m.value}px`,strokeDashoffset:g.value})),w=t(()=>({strokeDasharray:`${m.value*h.value*(o.percentage/100)}px, ${m.value}px`,strokeDashoffset:g.value,transition:`stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s`})),T=t(()=>{let e;return e=o.color?j(o.percentage):s[o.status]||s.default,e}),E=t(()=>o.status===`warning`?ge:o.type===`line`?o.status===`success`?Le:te:o.status===`success`?ue:oe),D=t(()=>o.type===`line`?12+o.strokeWidth*.4:o.width*.111111+2),k=t(()=>o.format(o.percentage));function A(e){let t=100/e.length;return e.map((e,n)=>O(e)?{color:e,percentage:(n+1)*t}:e).sort((e,t)=>e.percentage-t.percentage)}let j=e=>{let{color:t}=o;if(_(t))return t(e);if(O(t))return t;{let n=A(t);for(let t of n)if(t.percentage>e)return t.color;return n[n.length-1]?.color}};return(e,t)=>(S(),r(`div`,{class:P([a(c).b(),a(c).m(e.type),a(c).is(e.status),{[a(c).m(`without-text`)]:!e.showText,[a(c).m(`text-inside`)]:e.textInside}]),role:`progressbar`,"aria-valuenow":e.percentage,"aria-valuemin":`0`,"aria-valuemax":`100`},[e.type===`line`?(S(),r(`div`,{key:0,class:P(a(c).b(`bar`))},[F(`div`,{class:P(a(c).be(`bar`,`outer`)),style:y({height:`${e.strokeWidth}px`})},[F(`div`,{class:P([a(c).be(`bar`,`inner`),{[a(c).bem(`bar`,`inner`,`indeterminate`)]:e.indeterminate},{[a(c).bem(`bar`,`inner`,`striped`)]:e.striped},{[a(c).bem(`bar`,`inner`,`striped-flow`)]:e.stripedFlow}]),style:y(a(l))},[(e.showText||e.$slots.default)&&e.textInside?(S(),r(`div`,{key:0,class:P(a(c).be(`bar`,`innerText`))},[v(e.$slots,`default`,{percentage:e.percentage},()=>[F(`span`,null,n(a(k)),1)])],2)):i(`v-if`,!0)],6)],6)],2)):(S(),r(`div`,{key:1,class:P(a(c).b(`circle`)),style:y({height:`${e.width}px`,width:`${e.width}px`})},[(S(),r(`svg`,Hn,[F(`path`,{class:P(a(c).be(`circle`,`track`)),d:a(p),stroke:`var(${a(c).cssVarName(`fill-color-light`)}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":a(u),fill:`none`,style:y(a(C))},null,14,Un),F(`path`,{class:P(a(c).be(`circle`,`path`)),d:a(p),stroke:a(T),fill:`none`,opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":a(u),style:y(a(w))},null,14,Wn)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(S(),r(`div`,{key:2,class:P(a(c).e(`text`)),style:y({fontSize:`${a(D)}px`})},[v(e.$slots,`default`,{percentage:e.percentage},()=>[e.status?(S(),d(a(J),{key:1},{default:b(()=>[(S(),d(x(a(E))))]),_:1})):(S(),r(`span`,Gn,n(a(k)),1))])],6)):i(`v-if`,!0)],10,Vn))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue`]])),qn=Symbol(`uploadContextKey`);M();var Jn=`ElUpload`,Yn=class extends Error{constructor(e,t,n,r){super(e),this.name=`UploadAjaxError`,this.status=t,this.method=n,this.url=r}};function Xn(e,t,n){let r;return r=n.response?`${n.response.error||n.response}`:n.responseText?`${n.responseText}`:`fail to ${t.method} ${e} ${n.status}`,new Yn(r,n.status,t.method,e)}function Zn(e){let t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}var Qn=e=>{typeof XMLHttpRequest>`u`&&Te(Jn,`XMLHttpRequest is undefined`);let t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener(`progress`,t=>{let n=t;n.percent=t.total>0?t.loaded/t.total*100:0,e.onProgress(n)});let r=new FormData;if(e.data)for(let[t,n]of Object.entries(e.data))k(n)&&n.length?r.append(t,...n):r.append(t,n);r.append(e.filename,e.file,e.file.name),t.addEventListener(`error`,()=>{e.onError(Xn(n,e,t))}),t.addEventListener(`load`,()=>{if(t.status<200||t.status>=300)return e.onError(Xn(n,e,t));e.onSuccess(Zn(t))}),t.open(e.method,n,!0),e.withCredentials&&`withCredentials`in t&&(t.withCredentials=!0);let i=e.headers||{};if(i instanceof Headers)i.forEach((e,n)=>t.setRequestHeader(n,e));else for(let[e,n]of Object.entries(i))we(n)||t.setRequestHeader(e,String(n));return t.send(r),t};M();var $n=[`text`,`picture`,`picture-card`],er=1,$=()=>Date.now()+ er++,tr=q({action:{type:String,default:`#`},headers:{type:U(Object)},method:{type:String,default:`post`},data:{type:U([Object,Function,Promise]),default:()=>Ce({})},multiple:{type:Boolean,default:!1},name:{type:String,default:`file`},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:``},fileList:{type:U(Array),default:()=>Ce([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:$n,default:`text`},httpRequest:{type:U(Function),default:Qn},disabled:Boolean,limit:Number}),nr=q({...tr,beforeUpload:{type:U(Function),default:c},beforeRemove:{type:U(Function)},onRemove:{type:U(Function),default:c},onChange:{type:U(Function),default:c},onPreview:{type:U(Function),default:c},onSuccess:{type:U(Function),default:c},onProgress:{type:U(Function),default:c},onError:{type:U(Function),default:c},onExceed:{type:U(Function),default:c}});M();var rr=q({files:{type:U(Array),default:()=>Ce([])},disabled:{type:Boolean,default:!1},handlePreview:{type:U(Function),default:c},listType:{type:String,values:$n,default:`text`}}),ir={remove:e=>!!e},ar=[`onKeydown`],or=[`src`],sr=[`onClick`],cr=[`title`],lr=[`onClick`],ur=[`onClick`],dr=Y(u({...u({name:`ElUploadList`}),props:rr,emits:ir,setup(e,{emit:s}){let c=e,{t:u}=ke(),f=K(`upload`),p=K(`icon`),m=K(`list`),g=G(),_=o(!1),x=t(()=>[f.b(`list`),f.bm(`list`,c.listType),f.is(`disabled`,c.disabled)]),T=e=>{s(`remove`,e)};return(e,t)=>(S(),d(j,{tag:`ul`,class:P(a(x)),name:a(m).b()},{default:b(()=>[(S(!0),r(h,null,w(e.files,o=>(S(),r(`li`,{key:o.uid||o.name,class:P([a(f).be(`list`,`item`),a(f).is(o.status),{focusing:_.value}]),tabindex:`0`,onKeydown:D(e=>!a(g)&&T(o),[`delete`]),onFocus:t[0]||=e=>_.value=!0,onBlur:t[1]||=e=>_.value=!1,onClick:t[2]||=e=>_.value=!1},[v(e.$slots,`default`,{file:o},()=>[e.listType===`picture`||o.status!==`uploading`&&e.listType===`picture-card`?(S(),r(`img`,{key:0,class:P(a(f).be(`list`,`item-thumbnail`)),src:o.url,alt:``},null,10,or)):i(`v-if`,!0),o.status===`uploading`||e.listType!==`picture-card`?(S(),r(`div`,{key:1,class:P(a(f).be(`list`,`item-info`))},[F(`a`,{class:P(a(f).be(`list`,`item-name`)),onClick:C(t=>e.handlePreview(o),[`prevent`])},[l(a(J),{class:P(a(p).m(`document`))},{default:b(()=>[l(a(ce))]),_:1},8,[`class`]),F(`span`,{class:P(a(f).be(`list`,`item-file-name`)),title:o.name},n(o.name),11,cr)],10,sr),o.status===`uploading`?(S(),d(a(Kn),{key:0,type:e.listType===`picture-card`?`circle`:`line`,"stroke-width":e.listType===`picture-card`?6:2,percentage:Number(o.percentage),style:y(e.listType===`picture-card`?``:`margin-top: 0.5rem`)},null,8,[`type`,`stroke-width`,`percentage`,`style`])):i(`v-if`,!0)],2)):i(`v-if`,!0),F(`label`,{class:P(a(f).be(`list`,`item-status-label`))},[e.listType===`text`?(S(),d(a(J),{key:0,class:P([a(p).m(`upload-success`),a(p).m(`circle-check`)])},{default:b(()=>[l(a(Le))]),_:1},8,[`class`])):[`picture-card`,`picture`].includes(e.listType)?(S(),d(a(J),{key:1,class:P([a(p).m(`upload-success`),a(p).m(`check`)])},{default:b(()=>[l(a(ue))]),_:1},8,[`class`])):i(`v-if`,!0)],2),a(g)?i(`v-if`,!0):(S(),d(a(J),{key:2,class:P(a(p).m(`close`)),onClick:e=>T(o)},{default:b(()=>[l(a(oe))]),_:2},1032,[`class`,`onClick`])),i(` Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn`),i(` This is a bug which needs to be fixed `),i(` TODO: Fix the incorrect navigation interaction `),a(g)?i(`v-if`,!0):(S(),r(`i`,{key:3,class:P(a(p).m(`close-tip`))},n(a(u)(`el.upload.deleteTip`)),3)),e.listType===`picture-card`?(S(),r(`span`,{key:4,class:P(a(f).be(`list`,`item-actions`))},[F(`span`,{class:P(a(f).be(`list`,`item-preview`)),onClick:t=>e.handlePreview(o)},[l(a(J),{class:P(a(p).m(`zoom-in`))},{default:b(()=>[l(a(he))]),_:1},8,[`class`])],10,lr),a(g)?i(`v-if`,!0):(S(),r(`span`,{key:0,class:P(a(f).be(`list`,`item-delete`)),onClick:e=>T(o)},[l(a(J),{class:P(a(p).m(`delete`))},{default:b(()=>[l(a(ae))]),_:1},8,[`class`])],10,ur))],2)):i(`v-if`,!0)])],42,ar))),128)),v(e.$slots,`append`)]),_:3},8,[`class`,`name`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue`]]);M();var fr=q({disabled:{type:Boolean,default:!1}}),pr={file:e=>k(e)},mr=[`onDrop`,`onDragover`],hr=`ElUploadDrag`,gr=Y(u({...u({name:hr}),props:fr,emits:pr,setup(e,{emit:t}){let n=I(qn);n||Te(hr,`usage: <el-upload><el-upload-dragger /></el-upload>`);let i=K(`upload`),s=o(!1),c=G(),l=e=>{if(c.value)return;s.value=!1,e.stopPropagation();let r=Array.from(e.dataTransfer.files),i=n.accept.value;if(!i){t(`file`,r);return}t(`file`,r.filter(e=>{let{type:t,name:n}=e,r=n.includes(`.`)?`.${n.split(`.`).pop()}`:``,a=t.replace(/\/.*$/,``);return i.split(`,`).map(e=>e.trim()).filter(e=>e).some(e=>e.startsWith(`.`)?r===e:/\/\*$/.test(e)?a===e.replace(/\/\*$/,``):/^[^/]+\/[^/]+$/.test(e)?t===e:!1)}))},u=()=>{c.value||(s.value=!0)};return(e,t)=>(S(),r(`div`,{class:P([a(i).b(`dragger`),a(i).is(`dragover`,s.value)]),onDrop:C(l,[`prevent`]),onDragover:C(u,[`prevent`]),onDragleave:t[0]||=C(e=>s.value=!1,[`prevent`])},[v(e.$slots,`default`)],42,mr))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue`]]);M();var _r=q({...tr,beforeUpload:{type:U(Function),default:c},onRemove:{type:U(Function),default:c},onStart:{type:U(Function),default:c},onSuccess:{type:U(Function),default:c},onProgress:{type:U(Function),default:c},onError:{type:U(Function),default:c},onExceed:{type:U(Function),default:c}});M();var vr=[`onKeydown`],yr=[`name`,`multiple`,`accept`],br=Y(u({...u({name:`ElUploadContent`,inheritAttrs:!1}),props:_r,setup(e,{expose:t}){let n=e,i=K(`upload`),o=G(),s=L({}),c=L(),l=e=>{if(e.length===0)return;let{autoUpload:t,limit:r,fileList:i,multiple:a,onStart:o,onExceed:s}=n;if(r&&i.length+e.length>r){s(e,i);return}a||(e=e.slice(0,1));for(let n of e){let e=n;e.uid=$(),o(e),t&&u(e)}},u=async e=>{if(c.value.value=``,!n.beforeUpload)return p(e);let t,r={};try{let i=n.data,a=n.beforeUpload(e);r=N(n.data)?zn(n.data):n.data,t=await a,N(n.data)&&Se(i,r)&&(r=zn(n.data))}catch{t=!1}if(t===!1){n.onRemove(e);return}let i=e;t instanceof Blob&&(i=t instanceof File?t:new File([t],e.name,{type:e.type})),p(Object.assign(i,{uid:e.uid}),r)},f=async(e,t)=>_(e)?e(t):e,p=async(e,t)=>{let{headers:r,data:i,method:a,withCredentials:o,name:c,action:l,onProgress:u,onSuccess:d,onError:p,httpRequest:m}=n;try{t=await f(t??i,e)}catch{n.onRemove(e);return}let{uid:h}=e,g={headers:r||{},withCredentials:o,file:e,data:t,method:a,filename:c,action:l,onProgress:t=>{u(t,e)},onSuccess:t=>{d(t,e),delete s.value[h]},onError:t=>{p(t,e),delete s.value[h]}},_=m(g);s.value[h]=_,_ instanceof Promise&&_.then(g.onSuccess,g.onError)},m=e=>{let t=e.target.files;t&&l(Array.from(t))},h=()=>{o.value||(c.value.value=``,c.value.click())},g=()=>{h()};return t({abort:e=>{be(s.value).filter(e?([t])=>String(e.uid)===t:()=>!0).forEach(([e,t])=>{t instanceof XMLHttpRequest&&t.abort(),delete s.value[e]})},upload:u}),(e,t)=>(S(),r(`div`,{class:P([a(i).b(),a(i).m(e.listType),a(i).is(`drag`,e.drag)]),tabindex:`0`,onClick:h,onKeydown:D(C(g,[`self`]),[`enter`,`space`])},[e.drag?(S(),d(gr,{key:0,disabled:a(o),onFile:l},{default:b(()=>[v(e.$slots,`default`)]),_:3},8,[`disabled`])):v(e.$slots,`default`,{key:1}),F(`input`,{ref_key:`inputRef`,ref:c,class:P(a(i).e(`input`)),name:e.name,multiple:e.multiple,accept:e.accept,type:`file`,onChange:m,onClick:t[0]||=C(()=>{},[`stop`])},null,42,yr)],42,vr))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue`]]),xr=`ElUpload`,Sr=e=>{e.url?.startsWith(`blob:`)&&URL.revokeObjectURL(e.url)},Cr=(e,t)=>{let n=ye(e,`fileList`,void 0,{passive:!0}),r=e=>n.value.find(t=>t.uid===e.uid);function i(e){var n;(n=t.value)==null||n.abort(e)}function a(e=[`ready`,`uploading`,`success`,`fail`]){n.value=n.value.filter(t=>!e.includes(t.status))}let o=(t,i)=>{let a=r(i);a&&(console.error(t),a.status=`fail`,n.value.splice(n.value.indexOf(a),1),e.onError(t,a,n.value),e.onChange(a,n.value))},s=(t,i)=>{let a=r(i);a&&(e.onProgress(t,a,n.value),a.status=`uploading`,a.percentage=Math.round(t.percent))},c=(t,i)=>{let a=r(i);a&&(a.status=`success`,a.response=t,e.onSuccess(t,a,n.value),e.onChange(a,n.value))},l=t=>{we(t.uid)&&(t.uid=$());let r={name:t.name,percentage:0,status:`ready`,size:t.size,raw:t,uid:t.uid};if(e.listType===`picture-card`||e.listType===`picture`)try{r.url=URL.createObjectURL(t)}catch(t){je(xr,t.message),e.onError(t,r,n.value)}n.value=[...n.value,r],e.onChange(r,n.value)},u=async t=>{let a=t instanceof File?r(t):t;a||Te(xr,`file to be removed not found`);let o=t=>{i(t);let r=n.value;r.splice(r.indexOf(t),1),e.onRemove(t,r),Sr(t)};e.beforeRemove?await e.beforeRemove(a,n.value)!==!1&&o(a):o(a)};function d(){n.value.filter(({status:e})=>e===`ready`).forEach(({raw:e})=>e&&t.value?.upload(e))}return g(()=>e.listType,t=>{t!==`picture-card`&&t!==`picture`||(n.value=n.value.map(t=>{let{raw:r,url:i}=t;if(!i&&r)try{t.url=URL.createObjectURL(r)}catch(r){e.onError(r,t,n.value)}return t}))}),g(n,e=>{for(let t of e)t.uid||=$(),t.status||=`success`},{immediate:!0,deep:!0}),{uploadFiles:n,abort:i,clearFiles:a,handleError:o,handleProgress:s,handleStart:l,handleSuccess:c,handleRemove:u,submit:d,revokeFileObjectURL:Sr}},wr=Pe(Y(u({...u({name:`ElUpload`}),props:nr,setup(e,{expose:n}){let o=e,c=G(),u=L(),{abort:m,submit:h,clearFiles:g,uploadFiles:_,handleStart:y,handleError:x,handleRemove:C,handleSuccess:w,handleProgress:T,revokeFileObjectURL:D}=Cr(o,u),O=t(()=>o.listType===`picture-card`),k=t(()=>({...o,fileList:_.value,onStart:y,onProgress:T,onSuccess:w,onError:x,onRemove:C}));return s(()=>{_.value.forEach(D)}),A(qn,{accept:f(o,`accept`)}),n({abort:m,submit:h,clearFiles:g,handleStart:y,handleRemove:C}),(e,t)=>(S(),r(`div`,null,[a(O)&&e.showFileList?(S(),d(dr,{key:0,disabled:a(c),"list-type":e.listType,files:a(_),"handle-preview":e.onPreview,onRemove:a(C)},E({append:b(()=>[l(br,p({ref_key:`uploadRef`,ref:u},a(k)),{default:b(()=>[e.$slots.trigger?v(e.$slots,`trigger`,{key:0}):i(`v-if`,!0),!e.$slots.trigger&&e.$slots.default?v(e.$slots,`default`,{key:1}):i(`v-if`,!0)]),_:3},16)]),_:2},[e.$slots.file?{name:`default`,fn:b(({file:t})=>[v(e.$slots,`file`,{file:t})])}:void 0]),1032,[`disabled`,`list-type`,`files`,`handle-preview`,`onRemove`])):i(`v-if`,!0),!a(O)||a(O)&&!e.showFileList?(S(),d(br,p({key:1,ref_key:`uploadRef`,ref:u},a(k)),{default:b(()=>[e.$slots.trigger?v(e.$slots,`trigger`,{key:0}):i(`v-if`,!0),!e.$slots.trigger&&e.$slots.default?v(e.$slots,`default`,{key:1}):i(`v-if`,!0)]),_:3},16)):i(`v-if`,!0),e.$slots.trigger?v(e.$slots,`default`,{key:2}):i(`v-if`,!0),v(e.$slots,`tip`),!a(O)&&e.showFileList?(S(),d(dr,{key:3,disabled:a(c),"list-type":e.listType,files:a(_),"handle-preview":e.onPreview,onRemove:a(C)},E({_:2},[e.$slots.file?{name:`default`,fn:b(({file:t})=>[v(e.$slots,`file`,{file:t})])}:void 0]),1032,[`disabled`,`list-type`,`files`,`handle-preview`,`onRemove`])):i(`v-if`,!0)]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue`]])),Tr=Re(u({__name:`AddDataTableModal`,props:{modalName:{}},setup(e){let s=e,c=tt(),u=qe(),f=ne(),p=Ne(),g=ee(),_=Je(),v=Ke(),y=o(`select`),x=o(``),C=o(null),E=o(null),O=o(null),k=o(``),A=o([]),j=o(0),M=o(0),N=o(!1),I=o(!0),L=o(!1),R=[{label:`String`,value:`string`},{label:`Number`,value:`number`},{label:`Boolean`,value:`boolean`},{label:`Datetime`,value:`date`}],te=e=>R.some(t=>t.value===e),re=e=>!e||e.length===0?R:R.filter(t=>e.includes(t.value)),z=e=>{if($e.includes(e))return g.baseText(`dataTable.import.systemColumnName`,{interpolate:{columnName:e}});if(!et.safeParse(e).success)return g.baseText(`dataTable.import.invalidColumnName`)},ie=t(()=>y.value===`import`?A.value.some(e=>e.error!==void 0):!1),B=t(()=>{if(y.value!==`import`)return!1;let e=A.value.map(e=>e.name.toLowerCase());return e.length!==new Set(e).size}),ae=t(()=>y.value===`import`?`Set data table columns`:g.baseText(`dataTable.add.title`)),oe=t(()=>y.value===`import`?!x.value||!O.value||ie.value||B.value:!0);m(()=>{setTimeout(()=>{C.value?.focus(),C.value?.select()},0)});let H=o(`scratch`),se=async()=>{if(!(!H.value||!x.value||N.value)){if(H.value===`scratch`)await W();else if(H.value===`import`){if(!E.value)return;await ue()}}},ce=e=>{let t=A.value[e];t&&(t.error=z(t.name),A.value.some((n,r)=>r!==e&&n.name.toLowerCase()===t.name.toLowerCase())&&!t.error&&(t.error=g.baseText(`dataTable.import.duplicateColumnName`)),A.value.forEach((t,n)=>{if(n!==e){let e=A.value.some((e,r)=>r!==n&&e.name.toLowerCase()===t.name.toLowerCase()),r=z(t.name);e&&!r?t.error=g.baseText(`dataTable.import.duplicateColumnName`):t.error=r}}))},le=(e=!1)=>{e&&(x.value=``),E.value=null,O.value=null,k.value=``,A.value=[],j.value=0,M.value=0,H.value=`scratch`,y.value=`select`},U=e=>{e.raw&&(E.value=e.raw)},ue=async()=>{if(E.value){N.value=!0,y.value=`import`;try{let e=await c.uploadCsvFile(E.value,I.value);O.value=e.id,k.value=e.originalName,j.value=e.rowCount,M.value=e.columnCount,A.value=e.columns.map(e=>{let t=(e.compatibleTypes||[e.type]).filter(te),n=e.name.replace(/\s+/g,`_`);return{name:n,type:te(e.type)?e.type:`string`,compatibleTypes:t,typeOptions:re(t),error:z(n)}}),x.value||=E.value.name.replace(/\.csv$/i,``)}catch(e){_.showError(e,g.baseText(`dataTable.upload.error`)),le()}finally{N.value=!1}}},W=async()=>{N.value=!0;try{let e;H.value===`scratch`?e=await c.createDataTable(x.value,f.params.projectId):y.value===`import`&&O.value&&(e=await c.createDataTable(x.value,f.params.projectId,A.value.map(e=>({name:e.name,type:e.type})),O.value,I.value)),e&&(v.track(`User created data table`,{data_table_id:e.id,data_table_project_id:e.project?.id,creation_mode:H.value}),le(!0),u.closeModal(s.modalName),p.push({name:Ze,params:{id:e.id}}))}catch(e){_.showError(e,g.baseText(`dataTable.add.error`))}finally{N.value=!1}},de=()=>{y.value=`select`},me=()=>{p.replace({name:Qe})};return(e,t)=>(S(),d(nt,{name:s.modalName,center:!0,width:y.value===`import`?`700px`:`540px`,"min-height":y.value===`import`?`600px`:void 0,"before-close":me},{header:b(()=>[F(`div`,{class:P(e.$style.header)},[F(`h2`,null,n(ae.value),1)],2)]),content:b(()=>[y.value===`select`?(S(),r(`div`,{key:0,class:P(e.$style.selectionContent)},[l(a(Oe),{label:a(g).baseText(`dataTable.add.input.name.label`),required:!0,"input-name":`dataTableNameSelect`},{default:b(()=>[l(a(Ee),{ref_key:`inputRef`,ref:C,modelValue:x.value,"onUpdate:modelValue":t[0]||=e=>x.value=e,type:`text`,placeholder:a(g).baseText(`dataTable.add.input.name.placeholder`),"data-test-id":`data-table-name-input-select`,name:`dataTableNameSelect`,onKeydown:D(se,[`enter`])},null,8,[`modelValue`,`placeholder`])]),_:1},8,[`label`]),l(a(Ye),{modelValue:H.value,"onUpdate:modelValue":t[1]||=e=>H.value=e,class:P(e.$style.radioGroup)},{default:b(()=>[l(a(Xe),{label:`scratch`,"data-test-id":`create-from-scratch-option`},{default:b(()=>[T(n(a(g).baseText(`dataTable.add.fromScratch`)),1)]),_:1}),l(a(Xe),{label:`import`,"data-test-id":`import-csv-option`},{default:b(()=>[T(n(a(g).baseText(`dataTable.add.importCsv`)),1)]),_:1})]),_:1},8,[`modelValue`,`class`]),H.value===`import`?(S(),r(`div`,{key:0,class:P(e.$style.uploadSection)},[l(a(wr),{class:P(e.$style.uploadDemo),drag:``,"auto-upload":!1,"show-file-list":!1,accept:`.csv`,"on-change":U,onMouseenter:t[2]||=e=>L.value=!0,onMouseleave:t[3]||=e=>L.value=!1},{default:b(()=>[l(a(fe),{icon:`file`,size:24,color:L.value?`text-dark`:`text-light`,class:P(e.$style.uploadIcon)},null,8,[`color`,`class`]),E.value?(S(),d(a(pe),{key:0,color:L.value?`text-dark`:`text-light`},{default:b(()=>[T(n(E.value?.name),1)]),_:1},8,[`color`])):(S(),d(a(pe),{key:1,size:`medium`,color:L.value?`text-dark`:`text-light`},{default:b(()=>[T(n(a(g).baseText(`dataTable.upload.dropOrClick`)),1)]),_:1},8,[`color`]))]),_:1},8,[`class`]),l(a(Me),{modelValue:I.value,"onUpdate:modelValue":t[4]||=e=>I.value=e,label:a(g).baseText(`dataTable.upload.hasHeaders`),"data-test-id":`has-headers-checkbox`},null,8,[`modelValue`,`label`])],2)):i(``,!0)],2)):y.value===`import`?(S(),r(`div`,{key:1,class:P(e.$style.content)},[N.value?(S(),r(`div`,{key:0,class:P(e.$style.uploadingMessage)},n(a(g).baseText(`dataTable.upload.uploading`)),3)):O.value?O.value&&A.value.length>0?(S(),r(`div`,{key:2,class:P(e.$style.importContent)},[F(`div`,{class:P(e.$style.successNotice)},n(a(g).baseText(`dataTable.upload.success`,{adjustToNumber:j.value,interpolate:{fileName:k.value,columnCount:M.value,rowCount:j.value}})),3),F(`div`,{class:P(e.$style.columnHeaders)},[F(`div`,{class:P(e.$style.columnHeaderLabel)},n(a(g).baseText(`dataTable.import.columnName`)),3),F(`div`,{class:P(e.$style.columnHeaderLabel)},n(a(g).baseText(`dataTable.import.columnType`)),3)],2),F(`div`,{class:P(e.$style.columnsContainer)},[(S(!0),r(h,null,w(A.value,(t,o)=>(S(),r(`div`,{key:o,class:P(e.$style.columnItem)},[F(`div`,{class:P(e.$style.columnInputWrapper)},[l(a(Ee),{modelValue:t.name,"onUpdate:modelValue":[e=>t.name=e,e=>ce(o)],placeholder:a(g).baseText(`dataTable.import.columnNamePlaceholder`),"data-test-id":`column-name-${o}`,class:P({[e.$style.inputError]:t.error})},null,8,[`modelValue`,`onUpdate:modelValue`,`placeholder`,`data-test-id`,`class`]),t.error?(S(),r(`div`,{key:0,class:P(e.$style.columnErrorMessage)},n(t.error),3)):i(``,!0)],2),F(`div`,{class:P(e.$style.columnTypeWrapper)},[l(a(xe),{modelValue:t.type,"onUpdate:modelValue":e=>t.type=e,disabled:t.typeOptions.length===1,"data-test-id":`column-type-${o}`},{default:b(()=>[(S(!0),r(h,null,w(t.typeOptions,e=>(S(),d(a(Ae),{key:e.value,value:e.value,label:e.label},null,8,[`value`,`label`]))),128))]),_:2},1032,[`modelValue`,`onUpdate:modelValue`,`disabled`,`data-test-id`])],2)],2))),128))],2)],2)):i(``,!0):(S(),r(`div`,{key:1,class:P(e.$style.uploadingMessage)},n(a(g).baseText(`dataTable.upload.selectFile`)),3))],2)):i(``,!0)]),footer:b(()=>[F(`div`,{class:P(e.$style.footer)},[y.value===`select`?(S(),d(a(V),{key:0,variant:`subtle`,size:`large`,label:a(g).baseText(`generic.cancel`),"data-test-id":`cancel-select-button`,onClick:me},null,8,[`label`])):i(``,!0),y.value===`select`?(S(),d(a(V),{key:1,loading:N.value,size:`large`,disabled:!x.value||!H.value||H.value===`import`&&!E.value,label:a(g).baseText(`generic.create`),"data-test-id":`proceed-from-select-button`,onClick:se},null,8,[`loading`,`disabled`,`label`])):i(``,!0),y.value===`import`?(S(),d(a(V),{key:2,variant:`subtle`,size:`large`,label:a(g).baseText(`generic.back`),"data-test-id":`back-button`,onClick:de},null,8,[`label`])):i(``,!0),y.value===`import`?(S(),d(a(V),{key:3,loading:N.value,size:`large`,disabled:oe.value,label:a(g).baseText(`generic.create`),"data-test-id":`confirm-add-data-table-button`,onClick:W},null,8,[`loading`,`disabled`,`label`])):i(``,!0)],2)]),_:1},8,[`name`,`width`,`min-height`]))}}),[[`__cssModules`,{$style:{header:`_header_1ypw9_125`,content:`_content_1ypw9_129`,selectionContent:`_selectionContent_1ypw9_134`,radioGroup:`_radioGroup_1ypw9_140`,uploadSection:`_uploadSection_1ypw9_172`,uploadingMessage:`_uploadingMessage_1ypw9_178`,importContent:`_importContent_1ypw9_184`,successNotice:`_successNotice_1ypw9_190`,columnHeaders:`_columnHeaders_1ypw9_199`,columnHeaderLabel:`_columnHeaderLabel_1ypw9_206`,columnsContainer:`_columnsContainer_1ypw9_212`,columnItem:`_columnItem_1ypw9_221`,columnInputWrapper:`_columnInputWrapper_1ypw9_228`,columnTypeWrapper:`_columnTypeWrapper_1ypw9_234`,inputError:`_inputError_1ypw9_239`,columnErrorMessage:`_columnErrorMessage_1ypw9_246`,footer:`_footer_1ypw9_252`,fileSelectedContainer:`_fileSelectedContainer_1ypw9_259`,uploadDemo:`_uploadDemo_1ypw9_266`,uploadIcon:`_uploadIcon_1ypw9_292`,fileName:`_fileName_1ypw9_296`}}]]);export{Tr as default};
//# sourceMappingURL=AddDataTableModal-K5Z1lqTR.js.map