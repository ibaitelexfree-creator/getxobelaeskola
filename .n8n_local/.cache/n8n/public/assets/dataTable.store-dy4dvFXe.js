(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`8e7fceff-7712-4ab8-9b0e-09d98ed94e8b`,e._sentryDebugIdIdentifier=`sentry-dbid-8e7fceff-7712-4ab8-9b0e-09d98ed94e8b`)})()}catch{}import{C as e,It as t}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{$t as n,Gt as r,Jt as i,Qt as a,Xt as o,Yt as s,Zt as c,an as l,cn as u,en as d,in as f,nn as p,on as m,rn as h,sn as g,tn as _,ur as v,ws as y}from"./users.store-pCkD7Zo0.js";import{Br as b,qo as x}from"./constants-D1jZwsUK.js";import{j as S,r as C}from"./_baseOrderBy-El3qbNHQ.js";const w=(e,t,n)=>e.map(e=>e.index===t?{...e,index:n}:t<n&&e.index>t&&e.index<=n?{...e,index:e.index-1}:t>n&&e.index>=n&&e.index<t?{...e,index:e.index+1}:e),T=S(b,()=>{let b=C(),S=r(),T=y(),E=t([]),D=t(0),O=t(0),k=t(`ok`),A=t({}),j=e(()=>x(S.currentProject?.scopes??S.personalProject?.scopes)),M=e=>Number((e/1024/1024).toFixed(2)),N=e(()=>Math.floor(T.settings?.dataTables?.maxSize/1024/1024)),P=e(()=>{let e={};for(let[t,n]of Object.entries(A.value))e[t]=M(n);return e}),F=e(()=>v([`rbac`],{rbac:{scope:`dataTable:list`}})),I=async(e,t,n)=>{let r=await _(b.restApiContext,e,{skip:(t-1)*n,take:n});E.value=r.data,D.value=r.count},L=async(e,t,n,r,i=!0)=>{let a=await s(b.restApiContext,e,t,n,r,i);if(!a.project&&t){let e=await S.fetchProject(t);e&&(a.project=e)}return E.value.push(a),D.value+=1,a},R=async(e,t=!0)=>await u(b.restApiContext,e,t),z=async(e,t)=>{let n=await o(b.restApiContext,e,t);return n&&(E.value=E.value.filter(t=>t.id!==e),--D.value),n},B=async(e,t,n)=>{let r=await c(b.restApiContext,e,t,n);if(r){let t=E.value.findIndex(t=>t.id===e);t!==-1&&(E.value[t].columns=E.value[t].columns.filter(e=>e.id!==n))}return r},V=async(e,t,n)=>{let r=await m(b.restApiContext,e,t,n);if(r){let n=E.value.findIndex(t=>t.id===e);n!==-1&&(E.value[n]={...E.value[n],name:t})}return r},H=async(e,t)=>{let n=await _(b.restApiContext,t,void 0,{projectId:t,id:e});return n.data.length>0?(E.value=n.data,n.data[0]):null},U=async(e,t)=>E.value.find(t=>t.id===e)||await H(e,t),W=async(e,t,n)=>{let r=await i(b.restApiContext,e,t,n);if(r){let t=E.value.findIndex(t=>t.id===e);t!==-1&&E.value[t].columns.push(r)}return r},G=async(e,t,n,r)=>{let i=await f(b.restApiContext,e,t,n,r);if(i){let t=E.value.findIndex(t=>t.id===e),i=E.value[t].columns.findIndex(e=>e.id===n);E.value[t].columns=w(E.value[t].columns,i,r)}return i},K=async(e,t,n,r)=>{await l(b.restApiContext,e,t,n,r);let i=E.value.findIndex(t=>t.id===e);if(i===-1)return;let a=E.value[i].columns.find(e=>e.id===n);a&&(a.name=r)},q=async(e,t,n,r,i,a,o)=>await p(b.restApiContext,e,t,{skip:(n-1)*r,take:r,sortBy:i,filter:a,search:o}),J=async(e,t)=>(await h(b.restApiContext,e,{},t))[0],Y=async(e,t,n,r)=>await g(b.restApiContext,e,n,r,t),X=async(e,t,n)=>await a(b.restApiContext,e,n,t),Z=async()=>{let e=await d(b.restApiContext);O.value=M(e.totalBytes),k.value=e.quotaStatus;let t={};for(let[n,r]of Object.entries(e.dataTables))t[n]=r.sizeBytes;return A.value=t,e},Q=e=>new Blob([`ï»¿`+e],{type:`text/csv;charset=utf-8;`}),$=(e,t)=>{let n=URL.createObjectURL(e),r=document.createElement(`a`);r.href=n,r.download=t,r.style.display=`none`,document.body.appendChild(r);try{r.click()}finally{document.body.contains(r)&&document.body.removeChild(r),URL.revokeObjectURL(n)}};return{dataTables:E,totalCount:D,fetchDataTables:I,fetchDataTableSize:Z,dataTableSize:e(()=>O.value),dataTableSizeLimitState:e(()=>k.value),dataTableSizes:P,maxSizeMB:N,createDataTable:L,uploadCsvFile:R,deleteDataTable:z,updateDataTable:V,fetchDataTableDetails:H,fetchOrFindDataTable:U,addDataTableColumn:W,deleteDataTableColumn:B,moveDataTableColumn:G,renameDataTableColumn:K,fetchDataTableContent:q,insertEmptyRow:J,updateRow:Y,deleteRows:X,downloadDataTableCsv:async(e,t,r=!0)=>{let{csvContent:i,filename:a}=await n(b.restApiContext,e,t,r);$(Q(i),a)},projectPermissions:j,canViewDataTables:F}});export{w as n,T as t};
//# sourceMappingURL=dataTable.store-dy4dvFXe.js.map