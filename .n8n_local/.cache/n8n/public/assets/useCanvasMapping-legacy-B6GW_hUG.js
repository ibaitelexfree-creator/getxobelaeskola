!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./users.store-legacy-B-bVJKl3.js","./ParameterInputList-legacy-B-cVfigK.js","./constants-legacy-DVkAm8xO.js","./assistant.store-legacy-5vR0xJ8p.js","./chatPanel.store-legacy-BsXu4GbL.js","./usePinnedData-legacy-B5CI71uf.js","./nodeIcon-legacy-KJSlWBN7.js","./canvas.utils-legacy-BQnUeqx3.js","./nodeCreator.store-legacy-i0crt2uh.js","./useCanvasOperations-legacy-CEMGNuuE.js","./useDynamicCredentials-legacy-DtgrzjN_.js","./NodeIcon-legacy-DOI-M5xN.js","./useTelemetryContext-legacy-g7p6wUAa.js","./useRunWorkflow-legacy-4stFR283.js","./collaboration.store-legacy-COoId2Xe.js","./NodeSettings-legacy-lAEmS_aB.js","./KeyboardShortcutTooltip-legacy-C9k84nly.js","./useKeybindings-legacy-Ba2t_Uzp.js","./injectStrict-legacy-BDpFN7qf.js"],(function(e,t){var n,o,a,i,r,s,l,u,c,d,h,p,v,f,g,_,m,y,b,w,x,k,E,N,z,C,T,M,I,O,S,$,A,B,j,D,R,L,P,V,H,q,W,F,Y,X,U,G,K,Z,Q,J,ee,te,ne,oe,ae,ie,re,se,le,ue,ce,de,he,pe,ve,fe,ge,_e,me,ye,be,we,xe,ke,Ee,Ne,ze,Ce,Te,Me,Ie,Oe,Se,$e,Ae,Be,je,De,Re,Le,Pe,Ve,He,qe,We,Fe,Ye,Xe,Ue,Ge,Ke,Ze,Qe,Je,et,tt,nt,ot,at,it,rt,st,lt,ut,ct,dt,ht,pt,vt,ft,gt,_t,mt,yt,bt,wt,xt,kt,Et,Nt,zt,Ct,Tt,Mt,It,Ot,St,$t,At,Bt,jt,Dt,Rt,Lt,Pt,Vt,Ht,qt,Wt,Ft,Yt,Xt,Ut,Gt,Kt,Zt,Qt,Jt,en,tn,nn,on,an,rn,sn,ln,un,cn,dn,hn,pn,vn,fn,gn,_n,mn,yn,bn,wn,xn,kn,En,Nn,zn,Cn,Tn,Mn,In,On,Sn,$n,An,Bn,jn,Dn,Rn,Ln,Pn,Vn,Hn,qn,Wn,Fn,Yn,Xn,Un,Gn,Kn,Zn,Qn,Jn,eo,to,no,oo,ao,io,ro,so,lo,uo,co,ho,po,vo,fo,go,_o,mo,yo,bo,wo,xo,ko,Eo,No,zo,Co,To,Mo,Io,Oo,So,$o,Ao,Bo,jo,Do,Ro,Lo,Po,Vo,Ho,qo,Wo,Fo,Yo,Xo,Uo,Go,Ko,Zo,Qo,Jo,ea,ta,na,oa,aa,ia,ra,sa,la,ua,ca,da,ha,pa,va,fa,ga,_a,ma,ya,ba,wa,xa,ka,Ea,Na,za,Ca,Ta,Ma,Ia,Oa,Sa,$a,Aa,Ba,ja,Da,Ra,La,Pa,Va,Ha,qa,Wa,Fa,Ya,Xa,Ua,Ga,Ka,Za,Qa,Ja,ei,ti,ni,oi,ai,ii,ri,si,li,ui,ci,di,hi,pi,vi,fi,gi,_i,mi,yi,bi,wi,xi,ki,Ei,Ni,zi,Ci,Ti,Mi,Ii,Oi,Si,$i,Ai,Bi,ji,Di,Ri,Li,Pi,Vi,Hi,qi,Wi,Fi,Yi,Xi,Ui,Gi,Ki,Zi,Qi,Ji,er,tr,nr,or,ar,ir,rr,sr,lr,ur,cr,dr,hr,pr,vr,fr,gr,_r,mr,yr;function br(e){const t=Je(),n=me(),o=nt(),i=rt(),r=Kt(),s=fe(),l=J(),u=a((()=>o.workflowObject)),c=a((()=>xt(o.workflow.scopes).workflow)),d=a((()=>i.preferences.branchReadOnly||t.isReadOnlyView||!c.value.update||o.workflow.isArchived||r.shouldBeReadOnly)),h=a((()=>{if(1!==p.value.length)return!1;const e=p.value[0];return!!ht(e)&&!!_t(e)})),p=a((()=>e.value.map((e=>o.getNodeById(e))).filter(Ve))),v=e=>{const t=n.getNodeType(e.type,e.typeVersion);return!!t&&!ft.includes(t.name)&&(e=>{const t=o.allNodes.filter((t=>t.type===e.name));return void 0===e.maxNodes||t.length<e.maxNodes})(t)},f=e=>{const t=u.value.getNode(e.name),o=n.getNodeType(t.type,t.typeVersion);return yt(u.value,t,o)};return a((()=>{const e=p.value,t=e.every((e=>e.type===wt)),n={adjustToNumber:e.length,interpolate:{subject:t?l.baseText("contextMenu.sticky",{adjustToNumber:e.length}):l.baseText("contextMenu.node",{adjustToNumber:e.length})}},a=[{id:"select_all",divided:!0,label:l.baseText("contextMenu.selectAll"),shortcut:{metaKey:!0,keys:["A"]},disabled:e.length===o.allNodes.length},{id:"deselect_all",label:l.baseText("contextMenu.deselectAll"),disabled:0===e.length}],i=[{id:"extract_sub_workflow",divided:!0,label:l.baseText("contextMenu.extract",{adjustToNumber:e.length}),shortcut:{altKey:!0,keys:["X"]},disabled:d.value}],r=[!t&&s.isFeatureEnabled&&{id:"focus_ai_on_selected",divided:!0,label:l.baseText("contextMenu.focusAiOnSelected",{adjustToNumber:e.length,interpolate:{count:e.length}}),shortcut:{altKey:!0,keys:["I"]},disabled:d.value}].filter(Boolean),u=[{id:"tidy_up",divided:!0,label:l.baseText(e.length<2?"contextMenu.tidyUpWorkflow":"contextMenu.tidyUpSelection"),shortcut:{shiftKey:!0,altKey:!0,keys:["T"]},disabled:d.value}];if(0===e.length)return[{id:"add_node",shortcut:{keys:["Tab"]},label:l.baseText("contextMenu.addNode"),disabled:d.value},{id:"add_sticky",shortcut:{shiftKey:!0,keys:["s"]},label:l.baseText("contextMenu.addSticky"),disabled:d.value},...u,...a];{const s=[!t&&{id:"toggle_activation",label:e.every((e=>e.disabled))?l.baseText("contextMenu.activate",n):l.baseText("contextMenu.deactivate",n),shortcut:{keys:["D"]},disabled:d.value},!t&&{id:"toggle_pin",label:e.every((e=>(e=>!!o.pinDataByNodeName(e.name))(e)))?l.baseText("contextMenu.unpin",n):l.baseText("contextMenu.pin",n),shortcut:{keys:["p"]},disabled:d.value||!e.every((e=>$t(e).canPinNode(!0)))},{id:"copy",label:l.baseText("contextMenu.copy",n),shortcut:{metaKey:!0,keys:["C"]}},{id:"duplicate",label:l.baseText("contextMenu.duplicate",n),shortcut:{metaKey:!0,keys:["D"]},disabled:d.value||!e.every(v)},...u,...i,...r,...a,{id:"delete",divided:!0,label:l.baseText("contextMenu.delete",n),shortcut:{keys:["Del"]},disabled:d.value}].filter(Boolean);if(1===e.length){const n=[];if("n8n-nodes-base.webhook"===(c=e[0]).type||c.webhookId&&c.type.toLocaleLowerCase().includes("trigger")&&f(c)){const t=gt.includes(e[0].type),a=o.workflow.active;t||n.push({divided:!0,id:"copy_test_url",label:l.baseText("contextMenu.copyTestUrl"),shortcut:{shiftKey:!0,altKey:!0,keys:["U"]},disabled:!1}),a&&n.push({divided:t,id:"copy_production_url",label:l.baseText("contextMenu.copyProductionUrl"),shortcut:{altKey:!0,keys:["U"]},disabled:!1})}const a=t?[{id:"open",label:l.baseText("contextMenu.editSticky"),shortcut:{keys:["↵"]},disabled:d.value},{id:"change_color",label:l.baseText("contextMenu.changeColor"),disabled:d.value}]:[{id:"open",label:l.baseText("contextMenu.open"),shortcut:{keys:["↵"]}},{id:"execute",label:l.baseText("contextMenu.test"),disabled:d.value||!f(e[0])},...n,{divided:!!n.length,id:"rename",label:l.baseText("contextMenu.rename"),shortcut:{keys:["Space"]},disabled:d.value},{id:"replace",label:l.baseText("contextMenu.replace"),shortcut:{keys:["R"]},disabled:d.value}];ht(e[0])&&a.push({id:"open_sub_workflow",label:l.baseText("contextMenu.openSubworkflow"),shortcut:{shiftKey:!0,metaKey:!0,keys:["O"]},disabled:!h.value}),s.unshift(...a)}return s}var c}))}function wr(e,t){const{findNode:n,findEdge:o,getSelectedNodes:a,edges:i,nodes:r}=Ye(e);function s(e,t){const n=e.y-t.y;return 0===n?e.x-t.x:n}function l(e,t){const n=i.value.some((t=>t.target===e.id)),o=i.value.some((e=>e.target===t.id));return!n&&o?-1:n&&!o?1:s(e.position,t.position)}function u(e,t){return s(c(e),c(t))}function c(e){return{x:e.targetX,y:e.targetY}}function d(e){return e.dimensions&&"number"==typeof e.dimensions.width&&"number"==typeof e.dimensions.height&&e.dimensions.width>0&&e.dimensions.height>0?{width:e.dimensions.width,height:e.dimensions.height}:e.data&&e.data.render?Ue(e.data.render.type===qe.Default&&!0===e.data.render.options.configuration,e.data.render.type===qe.Default&&!0===e.data.render.options.configurable,e.data.inputs.filter((e=>"main"===e.type)).length||1,e.data.outputs.filter((e=>"main"===e.type)).length||1,e.data.inputs.filter((e=>"main"!==e.type)).length+e.data.outputs.filter((e=>"main"!==e.type)).length,t.value):{width:Ce[0],height:Ce[1]}}function h(e){const{minX:t,minY:n,maxX:o,maxY:a}=e.reduce(((e,t)=>{const{x:n,y:o,width:a,height:i}=t;return{minX:Math.min(e.minX,n),maxX:Math.max(e.maxX,n+a),minY:Math.min(e.minY,o),maxY:Math.max(e.maxY,o+i)}}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return{x:t,y:n,width:o-t,height:a-n}}function p(e){const{width:t,height:n}=d(e);return{x:e.position.x,y:e.position.y,width:t,height:n}}function v(e){return h(e.nodes().map((t=>{return{x:(n=e.node(t)).x-n.width/2,y:n.y-n.height/2,width:n.width,height:n.height};var n})))}function f(e,t){return e.x+e.width/2-t.width/2}function g(e){return e.render.type===qe.Default&&e.render.options.configurable&&!e.render.options.configuration}function _({graph:e,root:t,nodeById:n}){return e.predecessors(t.id).map((e=>n[e])).filter((e=>function(e){return e.render.type===qe.Default&&e.render.options.configuration}(e.data))).flatMap((t=>[t.id,..._({graph:e,root:t.data,nodeById:n})]))}return{layout:function(e){const{nodes:t,edges:s}=function(e){return"selection"===e?{nodes:a.value,edges:i.value}:{nodes:r.value,edges:i.value}}(e),c=t.filter((e=>e.data.type!==wt)).map((e=>n(e.id))).filter(Ve),m=function(e){return h(e.map(p))}(c),y=function({nodes:e,edges:t}){const a=new vo.default.graphlib.Graph;a.setDefaultEdgeLabel((()=>({})));const i=e.map((e=>n(e.id))).filter(Ve).sort(l),r=new Set(e.map((e=>e.id)));return i.forEach((e=>{const{width:t,height:n}=d(e),{x:o,y:i}=e.position;a.setNode(e.id,{width:t,height:n,x:o,y:i})})),t.map((e=>o(e.id))).filter(Ve).filter((e=>r.has(e.source)&&r.has(e.target))).sort(u).forEach((e=>a.setEdge(e.source,e.target))),a}({nodes:c,edges:s}),b=c.reduce(((e,t)=>(e[t.id]=t,e)),{}),w=vo.default.graphlib.alg.components(y).map((e=>{const t=function({nodeIds:e,parent:t}){const n=new vo.default.graphlib.Graph;n.setGraph({rankdir:"LR",edgesep:go,nodesep:go,ranksep:fo}),n.setDefaultEdgeLabel((()=>({})));const o=new Set(e);return t.nodes().filter((e=>o.has(e))).forEach((e=>{n.setNode(e,t.node(e))})),t.edges().filter((e=>o.has(e.v)&&o.has(e.w))).forEach((e=>n.setEdge(e.v,e.w,t.edge(e)))),n}({nodeIds:e,parent:y}),n=t.nodes().map((e=>b[e].data)).filter(g).map((e=>{const n=_({graph:t,nodeById:b,root:e}),o=function({parent:e,nodeIds:t}){const n=new vo.default.graphlib.Graph;n.setGraph({rankdir:"TB",edgesep:mo,nodesep:mo,ranksep:yo}),n.setDefaultEdgeLabel((()=>({})));const o=new Set(t);return e.nodes().filter((e=>o.has(e))).forEach((t=>{n.setNode(t,e.node(t))})),e.edges().filter((e=>o.has(e.v)&&o.has(e.w))).forEach((e=>n.setEdge(e.w,e.v))),n}({parent:t,nodeIds:n.concat(e.id)});n.forEach((e=>t.removeNode(e)));const a=t.edges().filter((t=>t.v===e.id||t.w===e.id));vo.default.layout(o,{disableOptimalOrderHeuristic:!0});const i=v(o);return t.setNode(e.id,{width:i.width,height:i.height}),a.forEach((e=>t.setEdge(e))),{graph:o,boundingBox:i,aiParentNode:e}}));return vo.default.layout(t,{disableOptimalOrderHeuristic:!0}),{graph:t,aiGraphs:n,boundingBox:v(t)}})),x=function({nodes:e}){const t=new vo.default.graphlib.Graph;return t.setGraph({rankdir:"TB",align:"UL",edgesep:_o,nodesep:_o,ranksep:_o}),t.setDefaultEdgeLabel((()=>({}))),e.forEach((({id:e,box:{x:n,y:o,width:a,height:i}})=>t.setNode(e,{x:n,y:o,width:a,height:i}))),e.forEach(((n,o)=>{e[o+1]&&t.setEdge(n.id,e[o+1].id)})),t}({nodes:w.map((({boundingBox:e},t)=>({box:e,id:t.toString()})))});vo.default.layout(x,{disableOptimalOrderHeuristic:!0});const k=w.flatMap((({graph:e,aiGraphs:t},n)=>{const o=x.node(n.toString()),a=new Set(t.map((({aiParentNode:e})=>e.id))),i=0,r=o.y-o.height/2;return e.nodes().flatMap((n=>{const{x:o,y:s,width:l,height:u}=e.node(n),c={id:n,boundingBox:{x:o+i-l/2,y:s+r-u/2,width:l,height:u}};if(a.has(n)){const e=t.find((({aiParentNode:e})=>e.id===n));if(!e)return[];const o=c.boundingBox,a={x:o.x,y:o.y};return e.graph.nodes().map((t=>{const n=e.graph.node(t);return{id:t,boundingBox:{x:n.x+a.x-n.width/2,y:n.y+a.y-n.height/2,width:n.width,height:n.height}}}))}return c}))})).reduce(((e,t)=>(e[t.id]=t.boundingBox,e)),{});w.flatMap((({aiGraphs:e})=>e)).forEach((({graph:e})=>{const t=e.nodes(),n=h(t.map((e=>k[e])).filter(Ve)),o=n.height/2-Ce[0]/2;if(n.y+=o,!Object.entries(k).filter((([t])=>!e.hasNode(t))).some((([,e])=>function(e,t,n=0){const o=t.x-n,a=t.y-n,i=t.width+2*n,r=t.height+2*n;return!(o+i<e.x||o>e.x+e.width||a+r<e.y||a>e.y+e.height)}(n,e,go))))for(const a of t)k[a].y+=o}));const E=Object.entries(k).map((([e,t])=>({id:e,boundingBox:t}))),N=h(E.map((e=>e.boundingBox))),z=N.x-m.x,C=N.y-m.y,T=t.filter((e=>e.data.type===wt)).map((e=>n(e.id))).filter(Ve).map((e=>{const t=p(e),n=c.filter((t=>function(e,t){const n=t.x+t.width,o=t.y+t.height,a=e.x+e.width,i=e.y+e.height;return t.x>=e.x&&t.y>=e.y&&n<=a&&o<=i}(p(e),p(t))));if(0===n.length)return null;const o=h(E.filter((e=>n.some((t=>t.id===e.id)))).map((({boundingBox:e})=>e)));return{id:e.id,boundingBox:{x:f(o,t),y:o.y+o.height-t.height+bo,height:t.height,width:t.width}}})).filter(Ve);return{boundingBox:N,nodes:E.concat(T).map((({id:e,boundingBox:t})=>({id:e,x:t.x-z,y:t.y-C})))}}}}function xr(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new kr(o)}function kr(e){this._=e}function Er(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Nr(e,t){for(var n,o=0,a=e.length;o<a;++o)if((n=e[o]).name===t)return n.value}function zr(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=wo,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}function Cr(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ko.hasOwnProperty(t)?{space:ko[t],local:e}:e}function Tr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xo&&t.documentElement.namespaceURI===xo?t.createElement(e):t.createElementNS(n,e)}}function Mr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ir(e){var t=Cr(e);return(t.local?Mr:Tr)(t)}function Or(){}function Sr(e){return null==e?Or:function(){return this.querySelector(e)}}function $r(e){"function"!=typeof e&&(e=Sr(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r,s=t[a],l=s.length,u=o[a]=new Array(l),c=0;c<l;++c)(i=s[c])&&(r=e.call(i,i.__data__,c,s))&&("__data__"in i&&(r.__data__=i.__data__),u[c]=r);return new vl(o,this._parents)}function Ar(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Br(){return[]}function jr(e){return null==e?Br:function(){return this.querySelectorAll(e)}}function Dr(e){e="function"==typeof e?function(e){return function(){return Ar(e.apply(this,arguments))}}(e):jr(e);for(var t=this._groups,n=t.length,o=[],a=[],i=0;i<n;++i)for(var r,s=t[i],l=s.length,u=0;u<l;++u)(r=s[u])&&(o.push(e.call(r,r.__data__,u,s)),a.push(r));return new vl(o,a)}function Rr(e){return function(){return this.matches(e)}}function Lr(e){return function(t){return t.matches(e)}}function Pr(){return this.firstElementChild}function Vr(e){return this.select(null==e?Pr:function(e){return function(){return Eo.call(this.children,e)}}("function"==typeof e?e:Lr(e)))}function Hr(){return Array.from(this.children)}function qr(e){return this.selectAll(null==e?Hr:function(e){return function(){return No.call(this.children,e)}}("function"==typeof e?e:Lr(e)))}function Wr(e){"function"!=typeof e&&(e=Rr(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r=t[a],s=r.length,l=o[a]=[],u=0;u<s;++u)(i=r[u])&&e.call(i,i.__data__,u,r)&&l.push(i);return new vl(o,this._parents)}function Fr(e){return new Array(e.length)}function Yr(){return new vl(this._enter||this._groups.map(Fr),this._parents)}function Xr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Ur(e){return function(){return e}}function Gr(e,t,n,o,a,i){for(var r,s=0,l=t.length,u=i.length;s<u;++s)(r=t[s])?(r.__data__=i[s],o[s]=r):n[s]=new Xr(e,i[s]);for(;s<l;++s)(r=t[s])&&(a[s]=r)}function Kr(e,t,n,o,a,i,r){var s,l,u,c=new Map,d=t.length,h=i.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=u=r.call(l,l.__data__,s,t)+"",c.has(u)?a[s]=l:c.set(u,l));for(s=0;s<h;++s)u=r.call(e,i[s],s,i)+"",(l=c.get(u))?(o[s]=l,l.__data__=i[s],c.delete(u)):n[s]=new Xr(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(p[s])===l&&(a[s]=l)}function Zr(e){return e.__data__}function Qr(e,t){if(!arguments.length)return Array.from(this,Zr);var n=t?Kr:Gr,o=this._parents,a=this._groups;"function"!=typeof e&&(e=Ur(e));for(var i=a.length,r=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=a[u],h=d.length,p=Jr(e.call(c,c&&c.__data__,u,o)),v=p.length,f=s[u]=new Array(v),g=r[u]=new Array(v);n(c,d,f,g,l[u]=new Array(h),p,t);for(var _,m,y=0,b=0;y<v;++y)if(_=f[y]){for(y>=b&&(b=y+1);!(m=g[b])&&++b<v;);_._next=m||null}}return(r=new vl(r,o))._enter=s,r._exit=l,r}function Jr(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function es(){return new vl(this._exit||this._groups.map(Fr),this._parents)}function ts(e,t,n){var o=this.enter(),a=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),o&&a?o.merge(a).order():a}function ns(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,i=o.length,r=Math.min(a,i),s=new Array(a),l=0;l<r;++l)for(var u,c=n[l],d=o[l],h=c.length,p=s[l]=new Array(h),v=0;v<h;++v)(u=c[v]||d[v])&&(p[v]=u);for(;l<a;++l)s[l]=n[l];return new vl(s,this._parents)}function os(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,a=e[t],i=a.length-1,r=a[i];--i>=0;)(o=a[i])&&(r&&4^o.compareDocumentPosition(r)&&r.parentNode.insertBefore(o,r),r=o);return this}function as(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=is);for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i){for(var r,s=n[i],l=s.length,u=a[i]=new Array(l),c=0;c<l;++c)(r=s[c])&&(u[c]=r);u.sort(t)}return new vl(a,this._parents).order()}function is(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ss(){return Array.from(this)}function ls(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,i=o.length;a<i;++a){var r=o[a];if(r)return r}return null}function us(){let e=0;for(const t of this)++e;return e}function cs(){return!this.node()}function ds(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a,i=t[n],r=0,s=i.length;r<s;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function hs(e){return function(){this.removeAttribute(e)}}function ps(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vs(e,t){return function(){this.setAttribute(e,t)}}function fs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gs(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function _s(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ms(e,t){var n=Cr(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?ps:hs:"function"==typeof t?n.local?_s:gs:n.local?fs:vs)(n,t))}function ys(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bs(e){return function(){this.style.removeProperty(e)}}function ws(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xs(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ks(e,t,n){return arguments.length>1?this.each((null==t?bs:"function"==typeof t?xs:ws)(e,t,null==n?"":n)):Es(this.node(),e)}function Es(e,t){return e.style.getPropertyValue(t)||ys(e).getComputedStyle(e,null).getPropertyValue(t)}function Ns(e){return function(){delete this[e]}}function zs(e,t){return function(){this[e]=t}}function Cs(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ts(e,t){return arguments.length>1?this.each((null==t?Ns:"function"==typeof t?Cs:zs)(e,t)):this.node()[e]}function Ms(e){return e.trim().split(/^|\s+/)}function Is(e){return e.classList||new Os(e)}function Os(e){this._node=e,this._names=Ms(e.getAttribute("class")||"")}function Ss(e,t){for(var n=Is(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function $s(e,t){for(var n=Is(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function As(e){return function(){Ss(this,e)}}function Bs(e){return function(){$s(this,e)}}function js(e,t){return function(){(t.apply(this,arguments)?Ss:$s)(this,e)}}function Ds(e,t){var n=Ms(e+"");if(arguments.length<2){for(var o=Is(this.node()),a=-1,i=n.length;++a<i;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?js:t?As:Bs)(n,t))}function Rs(){this.textContent=""}function Ls(e){return function(){this.textContent=e}}function Ps(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Vs(e){return arguments.length?this.each(null==e?Rs:("function"==typeof e?Ps:Ls)(e)):this.node().textContent}function Hs(){this.innerHTML=""}function qs(e){return function(){this.innerHTML=e}}function Ws(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Fs(e){return arguments.length?this.each(null==e?Hs:("function"==typeof e?Ws:qs)(e)):this.node().innerHTML}function Ys(){this.nextSibling&&this.parentNode.appendChild(this)}function Xs(){return this.each(Ys)}function Us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gs(){return this.each(Us)}function Ks(e){var t="function"==typeof e?e:Ir(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function Zs(){return null}function Qs(e,t){var n="function"==typeof e?e:Ir(e),o=null==t?Zs:"function"==typeof t?t:Sr(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function Js(){var e=this.parentNode;e&&e.removeChild(this)}function el(){return this.each(Js)}function tl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ol(e){return this.select(e?nl:tl)}function al(e){return arguments.length?this.property("__data__",e):this.node().__data__}function il(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function rl(e){return function(){var t=this.__on;if(t){for(var n,o=0,a=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function sl(e,t,n){return function(){var o,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var r=0,s=a.length;r<s;++r)if((o=a[r]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(o):this.__on=[o]}}function ll(e,t,n){var o,a,i=il(e+""),r=i.length;if(!(arguments.length<2)){for(s=t?sl:rl,o=0;o<r;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(o=0,l=s[u];o<r;++o)if((a=i[o]).type===l.type&&a.name===l.name)return l.value}function ul(e,t,n){var o=ys(e),a=o.CustomEvent;"function"==typeof a?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function cl(e,t){return function(){return ul(this,e,t)}}function dl(e,t){return function(){return ul(this,e,t.apply(this,arguments))}}function hl(e,t){return this.each(("function"==typeof t?dl:cl)(e,t))}function*pl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,a=e[t],i=0,r=a.length;i<r;++i)(o=a[i])&&(yield o)}function vl(e,t){this._groups=e,this._parents=t}function fl(){return new vl([[document.documentElement]],zo)}function gl(){return this}function _l(e){return"string"==typeof e?new vl([[document.querySelector(e)]],[document.documentElement]):new vl([[e]],zo)}function ml(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}function yl(e){e.preventDefault(),e.stopImmediatePropagation()}function bl(e){var t=e.document.documentElement,n=_l(e).on("dragstart.drag",yl,Co);"onselectstart"in t?n.on("selectstart.drag",yl,Co):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wl(e,t){var n=e.document.documentElement,o=_l(e).on("dragstart.drag",null);t&&(o.on("click.drag",yl,Co),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function kl(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function El(){}function Nl(){return this.rgb().formatHex()}function zl(){return this.rgb().formatHex8()}function Cl(){return Hl(this).formatHsl()}function Tl(){return this.rgb().formatRgb()}function Ml(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$o.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Il(t):3===n?new Al(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ol(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ol(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ao.exec(e))?new Al(t[1],t[2],t[3],1):(t=Bo.exec(e))?new Al(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jo.exec(e))?Ol(t[1],t[2],t[3],t[4]):(t=Do.exec(e))?Ol(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ro.exec(e))?Vl(t[1],t[2]/100,t[3]/100,1):(t=Lo.exec(e))?Vl(t[1],t[2]/100,t[3]/100,t[4]):Po.hasOwnProperty(e)?Il(Po[e]):"transparent"===e?new Al(NaN,NaN,NaN,0):null}function Il(e){return new Al(e>>16&255,e>>8&255,255&e,1)}function Ol(e,t,n,o){return o<=0&&(e=t=n=NaN),new Al(e,t,n,o)}function Sl(e){return e instanceof El||(e=Ml(e)),e?new Al((e=e.rgb()).r,e.g,e.b,e.opacity):new Al}function $l(e,t,n,o){return 1===arguments.length?Sl(e):new Al(e,t,n,null==o?1:o)}function Al(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function Bl(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}`}function jl(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}${Pl(255*(isNaN(this.opacity)?1:this.opacity))}`}function Dl(){const e=Rl(this.opacity);return`${1===e?"rgb(":"rgba("}${Ll(this.r)}, ${Ll(this.g)}, ${Ll(this.b)}${1===e?")":`, ${e})`}`}function Rl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pl(e){return((e=Ll(e))<16?"0":"")+e.toString(16)}function Vl(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wl(e,t,n,o)}function Hl(e){if(e instanceof Wl)return new Wl(e.h,e.s,e.l,e.opacity);if(e instanceof El||(e=Ml(e)),!e)return new Wl;if(e instanceof Wl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),i=Math.max(t,n,o),r=NaN,s=i-a,l=(i+a)/2;return s?(r=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=l<.5?i+a:2-i-a,r*=60):s=l>0&&l<1?0:r,new Wl(r,s,l,e.opacity)}function ql(e,t,n,o){return 1===arguments.length?Hl(e):new Wl(e,t,n,null==o?1:o)}function Wl(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Fl(e){return(e=(e||0)%360)<0?e+360:e}function Yl(e){return Math.max(0,Math.min(1,e||0))}function Xl(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ul(e){return 1==(e=+e)?Gl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Vo(isNaN(t)?n:t)}}function Gl(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Vo(isNaN(e)?t:e)}function Kl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Zl(e,t){var n,o,a,i=qo.lastIndex=Wo.lastIndex=0,r=-1,s=[],l=[];for(e+="",t+="";(n=qo.exec(e))&&(o=Wo.exec(t));)(a=o.index)>i&&(a=t.slice(i,a),s[r]?s[r]+=a:s[++r]=a),(n=n[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,l.push({i:r,x:Kl(n,o)})),i=Wo.lastIndex;return i<t.length&&(a=t.slice(i),s[r]?s[r]+=a:s[++r]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}function Ql(e,t,n,o,a,i){var r,s,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Fo,skewX:Math.atan(l)*Fo,scaleX:r,scaleY:s}}function Jl(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yo:Ql(t.a,t.b,t.c,t.d,t.e,t.f)}function eu(e){return null==e?Yo:(Xo||(Xo=document.createElementNS("http://www.w3.org/2000/svg","g")),Xo.setAttribute("transform",e),(e=Xo.transform.baseVal.consolidate())?Ql((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Yo)}function tu(e,t,n,o){function a(e){return e.length?e.pop()+" ":""}return function(i,r){var s=[],l=[];return i=e(i),r=e(r),function(e,o,a,i,r,s){if(e!==a||o!==i){var l=r.push("translate(",null,t,null,n);s.push({i:l-4,x:Kl(e,a)},{i:l-2,x:Kl(o,i)})}else(a||i)&&r.push("translate("+a+t+i+n)}(i.translateX,i.translateY,r.translateX,r.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,o)-2,x:Kl(e,t)})):t&&n.push(a(n)+"rotate("+t+o)}(i.rotate,r.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,o)-2,x:Kl(e,t)}):t&&n.push(a(n)+"skewX("+t+o)}(i.skewX,r.skewX,s,l),function(e,t,n,o,i,r){if(e!==n||t!==o){var s=i.push(a(i)+"scale(",null,",",null,")");r.push({i:s-4,x:Kl(e,n)},{i:s-2,x:Kl(t,o)})}else 1===n&&1===o||i.push(a(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,r.scaleX,r.scaleY,s,l),i=r=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}function nu(e){return((e=Math.exp(e))+1/e)/2}function ou(){return aa||(sa(au),aa=ra.now()+ia)}function au(){aa=0}function iu(){this._call=this._time=this._next=null}function ru(e,t,n){var o=new iu;return o.restart(e,t,n),o}function su(){aa=(oa=ra.now())+ia,Zo=Qo=0;try{!function(){ou(),++Zo;for(var e,t=ta;t;)(e=aa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Zo}()}finally{Zo=0,function(){for(var e,t,n=ta,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ta=t);na=e,uu(o)}(),aa=0}}function lu(){var e=ra.now(),t=e-oa;t>ea&&(ia-=t,oa=e)}function uu(e){Zo||(Qo&&(Qo=clearTimeout(Qo)),e-aa>24?(e<1/0&&(Qo=setTimeout(su,e-ra.now()-ia)),Jo&&(Jo=clearInterval(Jo))):(Jo||(oa=ra.now(),Jo=setInterval(lu,ea)),Zo=1,sa(su)))}function cu(e,t,n){var o=new iu;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}function du(e,t,n,o,a,i){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};!function(e,t,n){var o,a=e.__transition;function i(e){n.state=da,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(i){var u,c,d,h;if(n.state!==da)return l();for(u in a)if((h=a[u]).name===n.name){if(h.state===pa)return cu(r);h.state===va?(h.state=ga,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete a[u]):+u<t&&(h.state=ga,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete a[u])}if(cu((function(){n.state===pa&&(n.state=va,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=ha,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ha){for(n.state=pa,o=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function s(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=fa,1),i=-1,r=o.length;++i<r;)o[i].call(e,a);n.state===fa&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=ga,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=ru(i,0,n.time)}(e,n,{name:t,index:o,group:a,on:la,tween:ua,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ca})}function hu(e,t){var n=vu(e,t);if(n.state>ca)throw new Error("too late; already scheduled");return n}function pu(e,t){var n=vu(e,t);if(n.state>pa)throw new Error("too late; already running");return n}function vu(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fu(e,t){var n,o,a,i=e.__transition,r=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(o=n.state>ha&&n.state<fa,n.state=ga,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):r=!1;r&&delete e.__transition}}function gu(e){return this.each((function(){fu(this,e)}))}function _u(e,t){var n,o;return function(){var a=pu(this,e),i=a.tween;if(i!==n)for(var r=0,s=(o=n=i).length;r<s;++r)if(o[r].name===t){(o=o.slice()).splice(r,1);break}a.tween=o}}function mu(e,t,n){var o,a;if("function"!=typeof n)throw new Error;return function(){var i=pu(this,e),r=i.tween;if(r!==o){a=(o=r).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}i.tween=a}}function yu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,a=vu(this.node(),n).tween,i=0,r=a.length;i<r;++i)if((o=a[i]).name===e)return o.value;return null}return this.each((null==t?_u:mu)(n,e,t))}function bu(e,t,n){var o=e._id;return e.each((function(){var e=pu(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return vu(e,o).value[t]}}function wu(e,t){var n;return("number"==typeof t?Kl:t instanceof Ml?Ho:(n=Ml(t))?(t=n,Ho):Zl)(e,t)}function xu(e){return function(){this.removeAttribute(e)}}function ku(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Eu(e,t,n){var o,a,i=n+"";return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function Nu(e,t,n){var o,a,i=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function zu(e,t,n){var o,a,i;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttribute(e))===(s=l+"")?null:r===o&&s===a?i:(a=s,i=t(o=r,l));this.removeAttribute(e)}}function Cu(e,t,n){var o,a,i;return function(){var r,s,l=n(this);if(null!=l)return(r=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:r===o&&s===a?i:(a=s,i=t(o=r,l));this.removeAttributeNS(e.space,e.local)}}function Tu(e,t){var n=Cr(e),o="transform"===n?Go:wu;return this.attrTween(e,"function"==typeof t?(n.local?Cu:zu)(n,o,bu(this,"attr."+e,t)):null==t?(n.local?ku:xu)(n):(n.local?Nu:Eu)(n,o,t))}function Mu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Iu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ou(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Iu(e,a)),n}return a._value=t,a}function Su(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Mu(e,a)),n}return a._value=t,a}function $u(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Cr(e);return this.tween(n,(o.local?Ou:Su)(o,t))}function Au(e,t){return function(){hu(this,e).delay=+t.apply(this,arguments)}}function Bu(e,t){return t=+t,function(){hu(this,e).delay=t}}function ju(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Au:Bu)(t,e)):vu(this.node(),t).delay}function Du(e,t){return function(){pu(this,e).duration=+t.apply(this,arguments)}}function Ru(e,t){return t=+t,function(){pu(this,e).duration=t}}function Lu(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Du:Ru)(t,e)):vu(this.node(),t).duration}function Pu(e,t){if("function"!=typeof t)throw new Error;return function(){pu(this,e).ease=t}}function Vu(e){var t=this._id;return arguments.length?this.each(Pu(t,e)):vu(this.node(),t).ease}function Hu(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;pu(this,e).ease=n}}(this._id,e))}function qu(e){"function"!=typeof e&&(e=Rr(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r=t[a],s=r.length,l=o[a]=[],u=0;u<s;++u)(i=r[u])&&e.call(i,i.__data__,u,r)&&l.push(i);return new lc(o,this._parents,this._name,this._id)}function Wu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,i=Math.min(o,a),r=new Array(o),s=0;s<i;++s)for(var l,u=t[s],c=n[s],d=u.length,h=r[s]=new Array(d),p=0;p<d;++p)(l=u[p]||c[p])&&(h[p]=l);for(;s<o;++s)r[s]=t[s];return new lc(r,this._parents,this._name,this._id)}function Fu(e,t,n){var o,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?hu:pu;return function(){var r=i(this,e),s=r.on;s!==o&&(a=(o=s).copy()).on(t,n),r.on=a}}function Yu(e,t){var n=this._id;return arguments.length<2?vu(this.node(),n).on.on(e):this.each(Fu(n,e,t))}function Xu(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e}function Uu(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Sr(e));for(var o=this._groups,a=o.length,i=new Array(a),r=0;r<a;++r)for(var s,l,u=o[r],c=u.length,d=i[r]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,du(d[h],t,n,h,d,vu(s,n)));return new lc(i,this._parents,t,n)}function Gu(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=jr(e));for(var o=this._groups,a=o.length,i=[],r=[],s=0;s<a;++s)for(var l,u=o[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,p=e.call(l,l.__data__,d,u),v=vu(l,n),f=0,g=p.length;f<g;++f)(h=p[f])&&du(h,t,n,f,p,v);i.push(p),r.push(l)}return new lc(i,r,t,n)}function Ku(){return new _a(this._groups,this._parents)}function Zu(e){return function(){this.style.removeProperty(e)}}function Qu(e,t,n){var o="transform"==(e+="")?Uo:wu;return null==t?this.styleTween(e,function(e,t){var n,o,a;return function(){var i=Es(this,e),r=(this.style.removeProperty(e),Es(this,e));return i===r?null:i===n&&r===o?a:a=t(n=i,o=r)}}(e,o)).on("end.style."+e,Zu(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,a,i;return function(){var r=Es(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Es(this,e)),r===l?null:r===o&&l===a?i:(a=l,i=t(o=r,s))}}(e,o,bu(this,"style."+e,t))).each(function(e,t){var n,o,a,i,r="style."+t,s="end."+r;return function(){var l=pu(this,e),u=l.on,c=null==l.value[r]?i||(i=Zu(t)):void 0;u===n&&a===c||(o=(n=u).copy()).on(s,a=c),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,a,i=n+"";return function(){var r=Es(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}(e,o,t),n).on("end.style."+e,null)}function Ju(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function ec(e,t,n){var o,a;function i(){var i=t.apply(this,arguments);return i!==a&&(o=(a=i)&&Ju(e,i,n)),o}return i._value=t,i}function tc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,ec(e,t,null==n?"":n))}function nc(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(bu(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))}function oc(e){return function(t){this.textContent=e.call(this,t)}}function ac(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&oc(o)),t}return o._value=e,o}function ic(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,ac(e))}function rc(){for(var e=this._name,t=this._id,n=uc(),o=this._groups,a=o.length,i=0;i<a;++i)for(var r,s=o[i],l=s.length,u=0;u<l;++u)if(r=s[u]){var c=vu(r,t);du(r,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new lc(o,this._parents,e,n)}function sc(){var e,t,n=this,o=n._id,a=n.size();return new Promise((function(i,r){var s={value:r},l={value:function(){0==--a&&i()}};n.each((function(){var n=pu(this,o),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===a&&i()}))}function lc(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function uc(){return++ma}function cc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function dc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hc(e){var t,n;e instanceof lc?(t=e._id,e=e._name):(t=uc(),(n=ba).time=ou(),e=null==e?null:e+"");for(var o=this._groups,a=o.length,i=0;i<a;++i)for(var r,s=o[i],l=s.length,u=0;u<l;++u)(r=s[u])&&du(r,e,t,u,s,n||dc(r,t));return new lc(o,this._parents,e,t)}function pc(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function vc(e,t,n){this.k=e,this.x=t,this.y=n}function fc(e){e.stopImmediatePropagation()}function gc(e){e.preventDefault(),e.stopImmediatePropagation()}function _c(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function mc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function yc(){return this.__zoom||xa}function bc(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wc(){return navigator.maxTouchPoints||"ontouchstart"in this}function xc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r))}function kc(e,{connectionType:t=Nt.Main}={}){const{targetX:n,targetY:o,sourceX:a,sourceY:i,sourcePosition:r,targetPosition:s}=e,l=i===o;if(!Ba(a,n)||t!==Nt.Main){const t=De(e);return{segments:[t],labelPosition:[t[1],t[2]],isConnectorStraight:l}}const u=(a+n)/2,c=i+Sa;return{segments:[at({sourceX:a,sourceY:i,targetX:u,targetY:c,sourcePosition:r,targetPosition:Se.Right,borderRadius:Aa,offset:$a}),at({sourceX:u,sourceY:c,targetX:n,targetY:o,sourcePosition:Se.Left,targetPosition:s,borderRadius:Aa,offset:$a})],labelPosition:[u,c],isConnectorStraight:l}}function Ec(){return en(mt)}function Nc(e,t){return I(),r("svg",Da,[...t[0]||(t[0]=[q("path",{fill:"currentColor",d:"M1.6.13c-.18-.17-.47-.18-.62 0L.56.57.14.98c-.2.15-.18.44 0 .62l3.63 3.6c.1.1.1.27 0 .37-.2.2-.53.52-.93.94-.56.57-.12 1.62.22 2.11.05.07.12.1.2.1.05-.01.1-.04.15-.08l5.23-5.22c.1-.1.1-.26-.02-.34-.5-.34-1.55-.78-2.12-.22-.42.4-.75.73-.94.93-.1.1-.27.1-.37 0L1.6.13ZM9.5 3.9c.07-.09.2-.1.3-.04l6.07 3.44c.15.08.18.29.05.4l-1.21 1.22a.26.26 0 0 1-.26.07l-2.18-.64a.26.26 0 0 0-.32.33l.76 2.02c.04.1.01.2-.06.27L7.7 15.92a.26.26 0 0 1-.41-.05L3.83 9.8a.26.26 0 0 1 .04-.3l5.62-5.6Z"},null,-1)])])}function zc(e,t,n,o,a,i){return I(),r("button",La,[E(e.$slots,"default")])}function Cc(e,t){return I(),r("svg",Va,Ha)}function Tc(e,t){return I(),r("svg",Wa,Fa)}function Mc(e,t){return I(),r("svg",Xa,Ua)}function Ic(e,t){return I(),r("svg",Ka,Za)}function Oc(e,t){return I(),r("svg",Ja,ei)}function Sc(e){function t(e,t,n,o=.2,a=2.2){if(e>=1)return t;if(e<=o)return n;{const i=(1-e)/(1-o);return t+Math.pow(i,a)*(n-t)}}return{calculateZoomAdjustedValue:t,calculateEdgeLightness:function(n=d(!1)){return a((()=>{const o=e.value.zoom;let a=t(o,.84,.6),i=t(o,.42,.66);return n.value&&(a=Math.max(0,a-.3),i=Math.min(1,i+.2)),{light:a.toFixed(3),dark:i.toFixed(3)}}))},calculateHandleLightness:function(){return a((()=>{const n=e.value.zoom,o=t(n,.68,.3),a=t(n,.5,.7);return{light:o.toFixed(3),dark:a.toFixed(3)}}))},calculateNodeBorderOpacity:function(){return a((()=>{const n=e.value.zoom,o=t(n,.1,.7),a=t(n,.2,.7);return{light:o.toFixed(3),dark:a.toFixed(3)}}))}}}function $c(){const e=X(It),t=a((()=>e?.data.value??{id:"",name:"",subtitle:"",type:"",typeVersion:1,disabled:!1,inputs:[],outputs:[],connections:{[Ge.Input]:{},[Ge.Output]:{}},issues:{execution:[],validation:[],visible:!1},pinnedData:{count:0,visible:!1},execution:{running:!1},runData:{iterations:0,outputMap:{},visible:!1},render:{type:qe.Default,options:{}}})),n=a((()=>e?.id.value??"")),o=a((()=>e?.label.value??"")),i=a((()=>t.value.subtitle)),r=a((()=>t.value.name)),s=a((()=>t.value.inputs)),l=a((()=>t.value.outputs)),u=a((()=>t.value.connections)),c=a((()=>t.value.disabled)),d=a((()=>e?.readOnly.value)),h=a((()=>e?.selected.value)),p=a((()=>t.value.pinnedData.count)),v=a((()=>t.value.pinnedData.count>0)),f=a((()=>[...t.value.issues.execution,...t.value.issues.validation])),g=a((()=>t.value.issues.execution??[])),_=a((()=>t.value.issues.validation??[])),m=a((()=>t.value.issues.visible)),y=a((()=>t.value.issues.execution.length>0)),b=a((()=>t.value.issues.validation.length>0)),w=a((()=>t.value.execution.status)),x=a((()=>t.value.execution.waiting)),k=a((()=>t.value.execution.waitingForNext)),E=a((()=>t.value.execution.running)),N=a((()=>t.value.runData.outputMap));return{node:e,id:n,name:r,label:o,subtitle:i,inputs:s,outputs:l,connections:u,isDisabled:c,isReadOnly:d,isSelected:h,pinnedDataCount:p,hasPinnedData:v,runDataIterations:a((()=>t.value.runData.iterations)),runDataOutputMap:N,hasRunData:a((()=>t.value.runData.visible)),issues:f,executionErrors:g,validationErrors:_,hasIssues:m,hasExecutionErrors:y,hasValidationErrors:b,executionStatus:w,executionWaiting:x,executionWaitingForNext:k,executionRunning:E,render:a((()=>t.value.render)),eventBus:a((()=>e?.eventBus.value)),isNotInstalledCommunityNode:a((()=>vt(t.value.type)&&!me().getIsNodeInstalled(t.value.type)))}}function Ac({inputs:e,outputs:t,connections:n}){const o=a((()=>u(e).filter((e=>e.type===Nt.Main)))),i=a((()=>u(e).filter((e=>e.type!==Nt.Main)))),r=a((()=>i.value.filter((e=>e.required)))),s=a((()=>u(n)[Ge.Input][Nt.Main]??[])),l=a((()=>u(t).filter((e=>e.type===Nt.Main)))),c=a((()=>u(t).filter((e=>e.type!==Nt.Main)))),d=a((()=>u(n)[Ge.Output][Nt.Main]??[]));return{mainInputs:o,nonMainInputs:i,requiredNonMainInputs:r,mainInputConnections:s,mainOutputs:l,nonMainOutputs:c,mainOutputConnections:d,isValidConnection:function(e){const{type:t,mode:n}=Bt(e.sourceHandle),{type:o,mode:a}=Bt(e.targetHandle);return!(n===a)&&t===o}}}function Bc(e){const t=Ne(),n=nt(),o=a((()=>n.workflowObject));return a((()=>{if(!e.value)return;const a=n.workflowExecutionData,i=e.value.name;return{localResolve:!0,envVars:t.variablesAsObject,workflow:o.value,execution:a,nodeName:i,additionalKeys:{},inputNode:function(){const e=(a?.data?.resultData.runData[i]??[])[0]?.source[0];if(e)return{name:e.previousNode,branchIndex:e.previousNodeOutput??0,runIndex:e.previousNodeRun??0};const t=o.value.getParentNodesByDepth(i,1);return t.length>0?{name:t[0].name,branchIndex:t[0].indicies[0]??0,runIndex:0}:void 0}(),connections:n.connectionsBySourceNode}}))}function jc(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ji.hasOwnProperty(t)?{space:ji[t],local:e}:e}function Dc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bi&&t.documentElement.namespaceURI===Bi?t.createElement(e):t.createElementNS(n,e)}}function Rc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lc(e){var t=jc(e);return(t.local?Rc:Dc)(t)}function Pc(){}function Vc(e){return null==e?Pc:function(){return this.querySelector(e)}}function Hc(e){"function"!=typeof e&&(e=Vc(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i,r,s=t[a],l=s.length,u=o[a]=new Array(l),c=0;c<l;++c)(i=s[c])&&(r=e.call(i,i.__data__,c,s))&&("__data__"in i&&(r.__data__=i.__data__),u[c]=r);return new wh(o,this._parents)}function qc(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Wc(){return[]}function Fc(e){var t;e="function"==typeof e?function(e){return function(){return qc(e.apply(this,arguments))}}(e):null==(t=e)?Wc:function(){return this.querySelectorAll(t)};for(var n=this._groups,o=n.length,a=[],i=[],r=0;r<o;++r)for(var s,l=n[r],u=l.length,c=0;c<u;++c)(s=l[c])&&(a.push(e.call(s,s.__data__,c,l)),i.push(s));return new wh(a,i)}function Yc(e){return function(t){return t.matches(e)}}function Xc(){return this.firstElementChild}function Uc(e){return this.select(null==e?Xc:function(e){return function(){return Di.call(this.children,e)}}("function"==typeof e?e:Yc(e)))}function Gc(){return Array.from(this.children)}function Kc(e){return this.selectAll(null==e?Gc:function(e){return function(){return Ri.call(this.children,e)}}("function"==typeof e?e:Yc(e)))}function Zc(e){var t;"function"!=typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i)for(var r,s=n[i],l=s.length,u=a[i]=[],c=0;c<l;++c)(r=s[c])&&e.call(r,r.__data__,c,s)&&u.push(r);return new wh(a,this._parents)}function Qc(e){return new Array(e.length)}function Jc(){return new wh(this._enter||this._groups.map(Qc),this._parents)}function ed(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function td(e){return function(){return e}}function nd(e,t,n,o,a,i){for(var r,s=0,l=t.length,u=i.length;s<u;++s)(r=t[s])?(r.__data__=i[s],o[s]=r):n[s]=new ed(e,i[s]);for(;s<l;++s)(r=t[s])&&(a[s]=r)}function od(e,t,n,o,a,i,r){var s,l,u,c=new Map,d=t.length,h=i.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=u=r.call(l,l.__data__,s,t)+"",c.has(u)?a[s]=l:c.set(u,l));for(s=0;s<h;++s)u=r.call(e,i[s],s,i)+"",(l=c.get(u))?(o[s]=l,l.__data__=i[s],c.delete(u)):n[s]=new ed(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(p[s])===l&&(a[s]=l)}function ad(e){return e.__data__}function id(e,t){if(!arguments.length)return Array.from(this,ad);var n=t?od:nd,o=this._parents,a=this._groups;"function"!=typeof e&&(e=td(e));for(var i=a.length,r=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=a[u],h=d.length,p=rd(e.call(c,c&&c.__data__,u,o)),v=p.length,f=s[u]=new Array(v),g=r[u]=new Array(v);n(c,d,f,g,l[u]=new Array(h),p,t);for(var _,m,y=0,b=0;y<v;++y)if(_=f[y]){for(y>=b&&(b=y+1);!(m=g[b])&&++b<v;);_._next=m||null}}return(r=new wh(r,o))._enter=s,r._exit=l,r}function rd(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function sd(){return new wh(this._exit||this._groups.map(Qc),this._parents)}function ld(e,t,n){var o=this.enter(),a=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),o&&a?o.merge(a).order():a}function ud(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,i=o.length,r=Math.min(a,i),s=new Array(a),l=0;l<r;++l)for(var u,c=n[l],d=o[l],h=c.length,p=s[l]=new Array(h),v=0;v<h;++v)(u=c[v]||d[v])&&(p[v]=u);for(;l<a;++l)s[l]=n[l];return new wh(s,this._parents)}function cd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,a=e[t],i=a.length-1,r=a[i];--i>=0;)(o=a[i])&&(r&&4^o.compareDocumentPosition(r)&&r.parentNode.insertBefore(o,r),r=o);return this}function dd(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=hd);for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i){for(var r,s=n[i],l=s.length,u=a[i]=new Array(l),c=0;c<l;++c)(r=s[c])&&(u[c]=r);u.sort(t)}return new wh(a,this._parents).order()}function hd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vd(){return Array.from(this)}function fd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,i=o.length;a<i;++a){var r=o[a];if(r)return r}return null}function gd(){let e=0;for(const t of this)++e;return e}function _d(){return!this.node()}function md(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a,i=t[n],r=0,s=i.length;r<s;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function yd(e){return function(){this.removeAttribute(e)}}function bd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wd(e,t){return function(){this.setAttribute(e,t)}}function xd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ed(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nd(e,t){var n=jc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?bd:yd:"function"==typeof t?n.local?Ed:kd:n.local?xd:wd)(n,t))}function zd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Cd(e){return function(){this.style.removeProperty(e)}}function Td(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Md(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Id(e,t,n){return arguments.length>1?this.each((null==t?Cd:"function"==typeof t?Md:Td)(e,t,null==n?"":n)):Od(this.node(),e)}function Od(e,t){return e.style.getPropertyValue(t)||zd(e).getComputedStyle(e,null).getPropertyValue(t)}function Sd(e){return function(){delete this[e]}}function $d(e,t){return function(){this[e]=t}}function Ad(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Bd(e,t){return arguments.length>1?this.each((null==t?Sd:"function"==typeof t?Ad:$d)(e,t)):this.node()[e]}function jd(e){return e.trim().split(/^|\s+/)}function Dd(e){return e.classList||new Rd(e)}function Rd(e){this._node=e,this._names=jd(e.getAttribute("class")||"")}function Ld(e,t){for(var n=Dd(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Pd(e,t){for(var n=Dd(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Vd(e){return function(){Ld(this,e)}}function Hd(e){return function(){Pd(this,e)}}function qd(e,t){return function(){(t.apply(this,arguments)?Ld:Pd)(this,e)}}function Wd(e,t){var n=jd(e+"");if(arguments.length<2){for(var o=Dd(this.node()),a=-1,i=n.length;++a<i;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?qd:t?Vd:Hd)(n,t))}function Fd(){this.textContent=""}function Yd(e){return function(){this.textContent=e}}function Xd(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Ud(e){return arguments.length?this.each(null==e?Fd:("function"==typeof e?Xd:Yd)(e)):this.node().textContent}function Gd(){this.innerHTML=""}function Kd(e){return function(){this.innerHTML=e}}function Zd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Qd(e){return arguments.length?this.each(null==e?Gd:("function"==typeof e?Zd:Kd)(e)):this.node().innerHTML}function Jd(){this.nextSibling&&this.parentNode.appendChild(this)}function eh(){return this.each(Jd)}function th(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nh(){return this.each(th)}function oh(e){var t="function"==typeof e?e:Lc(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function ah(){return null}function ih(e,t){var n="function"==typeof e?e:Lc(e),o=null==t?ah:"function"==typeof t?t:Vc(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function rh(){var e=this.parentNode;e&&e.removeChild(this)}function sh(){return this.each(rh)}function lh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ch(e){return this.select(e?uh:lh)}function dh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hh(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ph(e){return function(){var t=this.__on;if(t){for(var n,o=0,a=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function vh(e,t,n){return function(){var o,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var r=0,s=a.length;r<s;++r)if((o=a[r]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(o):this.__on=[o]}}function fh(e,t,n){var o,a,i=hh(e+""),r=i.length;if(!(arguments.length<2)){for(s=t?vh:ph,o=0;o<r;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(o=0,l=s[u];o<r;++o)if((a=i[o]).type===l.type&&a.name===l.name)return l.value}function gh(e,t,n){var o=zd(e),a=o.CustomEvent;"function"==typeof a?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function _h(e,t){return function(){return gh(this,e,t)}}function mh(e,t){return function(){return gh(this,e,t.apply(this,arguments))}}function yh(e,t){return this.each(("function"==typeof t?mh:_h)(e,t))}function*bh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,a=e[t],i=0,r=a.length;i<r;++i)(o=a[i])&&(yield o)}function wh(e,t){this._groups=e,this._parents=t}function xh(){return this}function kh(e){return"string"==typeof e?new wh([[document.querySelector(e)]],[document.documentElement]):new wh([[e]],Li)}function Eh(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}function Nh(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new zh(o)}function zh(e){this._=e}function Ch(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Th(e,t){for(var n,o=0,a=e.length;o<a;++o)if((n=e[o]).name===t)return n.value}function Mh(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Pi,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}function Ih(e){e.stopImmediatePropagation()}function Oh(e){e.preventDefault(),e.stopImmediatePropagation()}function Sh(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:i,x:r,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function $h(e){return!e.ctrlKey&&!e.button}function Ah(){return this.parentNode}function Bh(e,t){return null==t?{x:e.x,y:e.y}:t}function jh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dh(){var e,t,n,o,a=$h,i=Ah,r=Bh,s=jh,l={},u=Nh("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",g).on("touchmove.drag",_,Vi).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(r,s){if(!o&&a.call(this,r,s)){var l,u,c,d=y(this,i.call(this,r,s),r,s,"mouse");d&&(kh(r.view).on("mousemove.drag",v,Hi).on("mouseup.drag",f,Hi),l=r.view,u=l.document.documentElement,c=kh(l).on("dragstart.drag",Oh,Hi),"onselectstart"in u?c.on("selectstart.drag",Oh,Hi):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none"),Ih(r),n=!1,e=r.clientX,t=r.clientY,d("start",r))}}function v(o){if(Oh(o),!n){var a=o.clientX-e,i=o.clientY-t;n=a*a+i*i>d}l.mouse("drag",o)}function f(e){var t,o,a,i;kh(e.view).on("mousemove.drag mouseup.drag",null),t=e.view,o=n,a=t.document.documentElement,i=kh(t).on("dragstart.drag",null),o&&(i.on("click.drag",Oh,Hi),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in a?i.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect),Oh(e),l.mouse("end",e)}function g(e,t){if(a.call(this,e,t)){var n,o,r=e.changedTouches,s=i.call(this,e,t),l=r.length;for(n=0;n<l;++n)(o=y(this,s,e,t,r[n].identifier,r[n]))&&(Ih(e),o("start",e,r[n]))}}function _(e){var t,n,o=e.changedTouches,a=o.length;for(t=0;t<a;++t)(n=l[o[t].identifier])&&(Oh(e),n("drag",e,o[t]))}function m(e){var t,n,a=e.changedTouches,i=a.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=l[a[t].identifier])&&(Ih(e),n("end",e,a[t]))}function y(e,t,n,o,a,i){var s,d,p,v=u.copy(),f=Eh(i||n,t);if(null!=(p=r.call(e,new Sh("beforestart",{sourceEvent:n,target:h,identifier:a,active:c,x:f[0],y:f[1],dx:0,dy:0,dispatch:v}),o)))return s=p.x-f[0]||0,d=p.y-f[1]||0,function n(i,r,u){var g,_=f;switch(i){case"start":l[a]=n,g=c++;break;case"end":delete l[a],--c;case"drag":f=Eh(u||r,t),g=c}v.call(i,e,new Sh(i,{sourceEvent:r,subject:p,target:h,identifier:a,active:g,x:f[0]+s,y:f[1]+d,dx:f[0]-_[0],dy:f[1]-_[1],dispatch:v}),o)}}return h.filter=function(e){return arguments.length?(a="function"==typeof e?e:qi(!!e),h):a},h.container=function(e){return arguments.length?(i="function"==typeof e?e:qi(e),h):i},h.subject=function(e){return arguments.length?(r="function"==typeof e?e:qi(e),h):r},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:qi(!!e),h):s},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}function Rh(){const e=X(Ct);return{label:a((()=>e?.label.value??"")),isConnected:a((()=>e?.isConnected.value??!1)),isConnecting:a((()=>e?.isConnecting.value??!1)),isReadOnly:a((()=>e?.isReadOnly.value)),isRequired:a((()=>e?.isRequired.value)),maxConnections:a((()=>e?.maxConnections.value)),type:a((()=>e?.type.value??Nt.Main)),mode:a((()=>e?.mode.value??Ge.Input)),index:a((()=>e?.index.value??0)),runData:a((()=>e?.runData.value))}}return e({i:Bc,s:br,t:function({nodes:e,connections:t,workflowObject:n}){const o=J(),i=nt(),r=Oe(),s=me(),l=xe(),{dirtinessByName:u}=Ut(),c=a((()=>e.value.reduce(((e,t)=>{switch(t.type){case`${qe.StickyNote}`:e[t.id]=function(e){return{type:qe.StickyNote,options:{width:e.parameters.width,height:e.parameters.height,color:e.parameters.color,content:e.parameters.content}}}(t);break;case`${qe.AddNodes}`:e[t.id]={type:qe.AddNodes,options:{}};break;case`${qe.ChoicePrompt}`:e[t.id]={type:qe.ChoicePrompt,options:{}};break;default:e[t.id]=function(e){const t=h.value[e.id],o=At($.value[e.id]??t??e.type,e);return{type:qe.Default,options:{trigger:p.value[e.id],configuration:s.isConfigNode(n.value,e,e.type),configurable:s.isConfigurableNode(n.value,e,e.type,e.typeVersion),inputs:{labelSize:_.value[e.id]},outputs:{labelSize:m.value[e.id]},tooltip:w.value[e.id],dirtiness:u.value[e.name],icon:o}}}(t)}return e}),{})??{})),h=a((()=>e.value.reduce(((e,t)=>(e[t.id]=s.getNodeType(t.type,t.typeVersion)??s.communityNodeType(t.type)?.nodeDescription??null,e)),{}))),p=a((()=>e.value.reduce(((e,t)=>(e[t.id]=s.isTriggerNode(t.type),e)),{}))),v=a((()=>e.value.reduce(((e,t)=>{try{const o=h.value[t.id];if(!o)return e;const a=l.getNodeSubtitle(t,o,n.value)??"";if(a.includes("__CUSTOM_API_CALL__"))return e;e[t.id]=a}catch(o){}return e}),{}))),f=a((()=>e.value.reduce(((e,t)=>{const o=h.value[t.id],a=n.value.getNode(t.name);return e[t.id]=a&&o?Lt(zt(n.value,a,o),o.inputNames??[]):[],e}),{})));function g(e){const t=e.reduce(((e,t)=>(t.type===Nt.Main&&e.push(function(e=""){return e.length<=2?0:e.length<=6?1:2}(t.label??"")),e)),[0]);return["small","medium","large"][Math.max(...t)]}const _=a((()=>e.value.reduce(((e,t)=>(e[t.id]=g(f.value[t.id]),e)),{}))),m=a((()=>e.value.reduce(((e,t)=>(e[t.id]=g(y.value[t.id]),e)),{}))),y=a((()=>e.value.reduce(((e,t)=>{const o=h.value[t.id],a=n.value.getNode(t.name);return e[t.id]=a&&o?Lt(bt(n.value,a,o),o.outputNames??[]):[],e}),{}))),b=a((()=>e.value.reduce(((e,t)=>(e[t.id]=i.pinDataByNodeName(t.name),e)),{}))),w=a((()=>{if(!i.isWorkflowRunning)return{};const t=e.value.filter((e=>p.value[e.id]&&!e.disabled)).length,n=i.getWorkflowExecution?.triggerNode;return void 0===n&&1!==t?{}:e.value.reduce(((e,t)=>{const a=h.value[t.id];if(a&&p.value[t.id]){if(t.disabled||void 0!==n&&n!==t.name||!["new","unknown","waiting"].includes(E.value[t.id])||b.value[t.id])return e;if("string"==typeof a.eventTriggerDescription){const n=o.shortNodeType(a.name),{eventTriggerDescription:i}=a;e[t.id]=o.nodeText(a.name).eventTriggerDescription(n,i??"")}else e[t.id]=o.baseText("node.waitingForYouToCreateAnEventIn",{interpolate:{nodeType:a?Me(a):""}})}return e}),{})})),x=a((()=>e.value.reduce(((e,t)=>(e[t.id]=r.executingNode.isNodeExecuting(t.name),e)),{}))),k=a((()=>e.value.reduce(((e,t)=>(e[t.id]=t.name===r.executingNode.lastAddedExecutingNode&&0===r.executingNode.executingNode.length&&i.isWorkflowRunning,e)),{}))),E=a((()=>e.value.reduce(((e,t)=>{const n=i.getWorkflowRunData?.[t.name]??[];let o=n.at(-1)?.executionStatus;return n.length>1&&"canceled"===o&&(o=n.at(-2)?.executionStatus),e[t.id]=o??"new",e}),{}))),N=a((()=>e.value.reduce(((e,t)=>(e[t.id]=i.getWorkflowResultDataByNodeName(t.name),e)),{}))),z=a((()=>new Map(e.value.map((e=>[e.name,e]))))),C=d({});Z((()=>i.workflowExecutionResultDataLastUpdate),(()=>{C.value=Object.keys(N.value).reduce(((e,t)=>{e[t]={};const n={iterations:0,total:0};for(const o of N.value[t]??[]){const a=o.data??{};for(const i of Object.keys(a)){const r=a[i]??{};e[t][i]=e[t][i]??{};for(const a of Object.keys(r)){const s=r[parseInt(a,10)]??[];e[t][i][a]=e[t][i][a]??{...n,...i!==Nt.Main?{byTarget:{}}:{}};let l=s.length;if(i!==Nt.Main&&s.length>0){const e=s[0];e?.json&&"object"==typeof e.json&&"response"in e.json&&Array.isArray(e.json.response)&&(l=e.json.response.length)}if("canceled"!==o.executionStatus&&(e[t][i][a].iterations+=1),e[t][i][a].total+=l,i!==Nt.Main){const n=o.source?.[0]?.previousNode;if(n){const r=z.value.get(n);if(r){const n=r.id,s=e[t][i][a];s.byTarget&&(s.byTarget[n]||(s.byTarget[n]={total:0,iterations:0}),"canceled"!==o.executionStatus&&(s.byTarget[n].iterations+=1),s.byTarget[n].total+=l)}}}}}}return e}),{})}),{throttle:500,immediate:!0});const T=a((()=>e.value.reduce(((e,t)=>{const n=[],o=i.getWorkflowRunData?.[t.name];return o&&o.forEach((e=>{if(e?.error){const{message:t,description:o}=e.error,a=`${t}${o?` (${o})`:""}`;n.push($e(a))}})),e[t.id]=n,e}),{}))),M=a((()=>e.value.reduce(((e,t)=>{const n=[];return void 0!==t?.issues&&n.push(...l.nodeIssuesToString(t.issues,t)),e[t.id]=n,e}),{}))),I=a((()=>e.value.reduce(((e,t)=>{const n=T.value[t.id]?.length>0,o=M.value[t.id]?.length>0;if(["crashed","error"].includes(E.value[t.id]))e[t.id]=!0;else if(b.value[t.id])e[t.id]=!1;else if(o)e[t.id]=!0;else if(n)e[t.id]=!0;else{const n=i.getWorkflowRunData?.[t.name]??[];e[t.id]=Boolean(n.at(-1)?.error)}return e}),{}))),O=a((()=>e.value.reduce(((e,t)=>{const n=i.getWorkflowExecution,a=n?.data?.resultData?.lastNodeExecuted;if(n&&a&&"waitTill"in n&&t.name===n.data?.resultData?.lastNodeExecuted&&n?.waitTill&&!n?.finished){if(t&&"n8n-nodes-base.wait"===t.type&&["webhook","form"].includes(t.parameters.resume))return e[t.id]="webhook"===t.parameters.resume?o.baseText("node.theNodeIsWaitingWebhookCall"):o.baseText("node.theNodeIsWaitingFormCall"),e;if("sendAndWait"===t?.parameters.operation)return e[t.id]=o.baseText("node.theNodeIsWaitingUserInput"),e;if("n8n-nodes-base.form"===t?.type)return e[t.id]=o.baseText("node.theNodeIsWaitingFormCall"),e;const a=new Date(n.waitTill);if(a.getTime()===ct.getTime())return e[t.id]=o.baseText("node.theNodeIsWaitingIndefinitelyForAnIncomingWebhookCall"),e;e[t.id]=o.baseText("node.nodeIsWaitingTill",{interpolate:{date:a.toLocaleDateString(),time:a.toLocaleTimeString()}})}return e}),{}))),S=a((()=>{const t=e.value.reduce(((e,t)=>{if("n8n-nodes-base.stickyNote"===t.type){const n=t.position[0],o=t.position[1],a=t.parameters.width,i=t.parameters.height;e.push({id:t.id,x:n,y:o,width:a,height:i,area:a*i,zIndex:-100})}return e}),[]).sort(((e,t)=>t.area-e.area));t.forEach(((e,t)=>{e.zIndex=-100+t}));for(let e=0;e<t.length;e++){const n=t[e];for(let o=e+1;o<t.length;o++){const e=t[o];Pt(n,e)&&(n.area<e.area&&n.zIndex<=e.zIndex?n.zIndex=e.zIndex+1:e.area<n.area&&e.zIndex<=n.zIndex&&(e.zIndex=n.zIndex+1))}}return t.reduce(((e,t)=>(e[t.id]={style:{zIndex:t.zIndex}},e)),{})})),$=a((()=>e.value.reduce(((e,t)=>{if(["n8n-nodes-base.simulate","n8n-nodes-base.simulateTrigger"].includes(t.type)){const o=t.parameters?.icon,a=n.value.expression.getSimpleParameterValue(t,o,"internal",{});a&&"string"==typeof a&&(e[t.id]=s.getNodeType(a))}return e}),{}))),A=a((()=>{const n=t.value,o=kt(n);return[...e.value.map((e=>{const t=n[e.name]??{},a=o[e.name]??{},i={id:e.id,name:e.name,subtitle:v.value[e.id]??"",type:e.type,typeVersion:e.typeVersion,disabled:e.disabled,inputs:f.value[e.id]??[],outputs:y.value[e.id]??[],connections:{[Ge.Input]:a,[Ge.Output]:t},issues:{execution:T.value[e.id],validation:M.value[e.id],visible:I.value[e.id]},pinnedData:{count:b.value[e.id]?.length??0,visible:!!b.value[e.id]},execution:{status:E.value[e.id],waiting:O.value[e.id],waitingForNext:k.value[e.id],running:x.value[e.id]},runData:{outputMap:C.value[e.id],iterations:(r=N.value[e.id],r?r.filter((e=>"canceled"!==e.executionStatus)):null)?.length??0,visible:!!N.value[e.id]},render:c.value[e.id]??{type:"default",options:{}}};var r;return{id:e.id,label:e.name,type:"canvas-node",position:{x:e.position[0],y:e.position[1]},data:i,...S.value[e.id],draggable:e.draggable}}))]})),B=a((()=>Dt(t.value??[],e.value??[]).map((e=>{const t=function(e){const t=z.value.get(e.data?.source.node??"");if(!t)return"";if(b.value[t.id]){const e=b.value[t.id]?.length??0;return e>0?o.baseText("ndv.output.items",{adjustToNumber:e,interpolate:{count:String(e)}}):""}if(N.value[t.id]){const{type:n,index:a}=Bt(e.sourceHandle),i=C.value[t.id]?.[n]?.[a],r=n===Nt.Main,s=N.value[e.target];if(!r&&i?.byTarget){const t=e.target,n=i.byTarget[t];return n&&n.total>0&&s?o.baseText(n.iterations>1?"ndv.output.itemsTotal":"ndv.output.items",{adjustToNumber:n.total,interpolate:{count:String(n.total)}}):""}const l=i?.total??0,u=(i?.iterations??1)>1;return l>0&&(r||s)?o.baseText(u?"ndv.output.itemsTotal":"ndv.output.items",{adjustToNumber:l,interpolate:{count:String(l)}}):""}return""}(e),n=function(e){const{type:t,index:n}=Bt(e.sourceHandle),o=C.value[e.source]?.[t]?.[n]?.total??0,a=N.value[e.source]??[];let i,r=a[a.length-1];if("canceled"===r?.executionStatus&&a.length>1&&(r=a[a.length-2]),x.value[e.source]&&0===o)i="running";else if(b.value[e.source]&&N.value[e.source])i="pinned";else if(I.value[e.source])i="error";else if(o>0&&"canceled"!==r?.executionStatus){const n=t===Nt.Main,o=N.value[e.target];(n||o)&&(i="success")}const s=[...f.value[e.source],...f.value[e.target]].filter((e=>e.type===t)).reduce(((e,t)=>void 0===t.maxConnections?e:Math.min(e??1/0,t.maxConnections)),void 0);return{...e.data,...s?{maxConnections:s}:{},status:i}}(e);return{...e,data:n,type:"canvas-edge",label:t,markerEnd:Ie.ArrowClosed}}))));return{additionalNodePropertiesById:S,nodeExecutionRunDataOutputMapById:C,nodeExecutionWaitingForNextById:k,nodeHasIssuesById:I,connections:B,nodes:A}}}),{setters:[function(e){n=e.o,o=e.t},function(e){a=e.C,i=e.Cn,r=e.D,s=e.E,l=e.G,u=e.Gt,c=e.I,d=e.It,h=e.J,p=e.L,v=e.M,f=e.P,g=e.Q,_=e.T,m=e.U,y=e.Vt,b=e.W,w=e.Z,x=e._,k=e._t,E=e.at,N=e.b,z=e.bn,C=e.bt,T=e.c,M=e.ct,I=e.et,O=e.ft,S=e.h,$=e.it,A=e.j,B=e.k,j=e.n,D=e.nt,R=e.p,L=e.pt,P=e.ut,V=e.vn,H=e.vt,q=e.w,W=e.xt,F=e.y,Y=e.yn,X=e.z},function(e){U=e._,G=e.lt,K=e.st,Z=e.ut,Q=e.y,J=e.yt},function(e){ee=e.Ci,te=e.Dt,ne=e.Hi,oe=e.Mi,ae=e.Oi,ie=e.P,re=e.Ui,se=e.V,le=e.Vi,ue=e._t,ce=e.gi,de=e.kt,he=e.wi},function(e){pe=e.t},function(e){ve=e.$n,fe=e.Ar,ge=e.Bn,_e=e.Bt,me=e.C,e.Cn,e.Dn,ye=e.Fn,be=e.Gn,we=e.Hn,xe=e.It,ke=e.Jn,Ee=e.Kn,Ne=e.Pt,ze=e.Qn,Ce=e.Tn,Te=e.Un,Me=e.Vi,Ie=e.Vn,Oe=e.Vt,Se=e.Wn,$e=e.Xc,Ae=e.Xn,Be=e.Yc,je=e.Yn,De=e.Zn,Re=e.ai,Le=e.ar,Pe=e.br,Ve=e.ca,He=e.cr,qe=e.di,We=e.er,Fe=e.ga,Ye=e.ir,Xe=e.jr,Ue=e.kn,Ge=e.li,Ke=e.nr,Ze=e.or,Qe=e.qn,Je=e.r,et=e.rr,tt=e.rt,nt=e.s,ot=e.sr,at=e.tr,it=e.ui,rt=e.wr,st=e.ws,lt=e.xn},function(e){ut=e.j},function(e){e.Ao,e.Gt,e.I,ct=e.Mo,e.No,e.Nt,dt=e.Po,e.Pt,ht=e.Sa,e.Sr,pt=e.Tt,vt=e.Ua,ft=e.Un,e.Xc,gt=e.Zn,_t=e._a,mt=e._c,yt=e.ba,bt=e.da,e.hn,wt=e.hr,e.lr,xt=e.qo,kt=e.ra,Et=e.rs,Nt=e.so,zt=e.ua,e.ur,Ct=e.vc,Tt=e.xa,Mt=e.xc,It=e.yc},function(e){Ot=e.t},function(e){St=e.t},function(e){$t=e.t},function(e){At=e.t},function(e){Bt=e.c,jt=e.n,Dt=e.o,Rt=e.r,Lt=e.s,Pt=e.t},function(e){Vt=e.t},function(e){Ht=e.a,qt=e.i,Wt=e.t},function(e){Ft=e.t},function(e){Yt=e.t},function(e){Xt=e.t},function(e){Ut=e.r,Gt=e.t},function(e){Kt=e.t},function(e){Zt=e.t},function(e){Qt=e.t},function(e){Jt=e.t},function(e){en=e.t}],execute:function(){(tn=document.createElement("style")).textContent='path[data-v-c74a9681]{stroke:var(--canvas--read-only-line--color)}._contextMenu_ia9tx_125{position:fixed}._activator_ia9tx_129{pointer-events:none;opacity:0}._edge_qsnhv_125{opacity:0;transition-property:stroke,opacity;transition-duration:.3s;transition-timing-function:ease}._edge_qsnhv_125._visible_qsnhv_131{opacity:1}._iconButton_yqho8_125{padding-left:0;padding-right:0}._iconButton_yqho8_125 svg{width:16px;height:16px}._tooltipContainer_yuv67_125{position:relative}._content_yuv67_129{white-space:nowrap}._canvasEdgeToolbar_1asvk_125{justify-content:center;align-items:center;gap:var(--spacing--2xs);pointer-events:all;padding:var(--spacing--2xs);transform:scale(var(--canvas-zoom-compensation-factor,1));display:flex}.canvas-edge-toolbar-button{--button--color--text:var(--lightningcss-light,var(--color--neutral-700))var(--lightningcss-dark,var(--color--neutral-250));--button--color--text--hover:var(--lightningcss-light,var(--color--neutral-850))var(--lightningcss-dark,var(--color--neutral-150));--button--color--background:var(--lightningcss-light,var(--color--neutral-200))var(--lightningcss-dark,var(--color--neutral-850));--button--color--background--hover:var(--lightningcss-light,var(--color--neutral-250))var(--lightningcss-dark,var(--color--neutral-800));border-width:0}._edge_1yu3o_125{stroke-linecap:square;transition:fill .3s;stroke:var(--canvas-edge--color,var(--lightningcss-light,oklch(var(--canvas-edge--color--lightness--light)0 0))var(--lightningcss-dark,oklch(var(--canvas-edge--color--lightness--dark)0 0)))!important;stroke-width:calc(2*var(--canvas-zoom-compensation-factor,1))!important}._edgeLabelWrapper_1yu3o_133{transform:translateY(calc(var(--spacing--xs)*-1));--label-translate-y:0;position:absolute}._edgeLabelWrapper_1yu3o_133._straight_1yu3o_139{--label-translate-y:-100%}._edgeLabel_1yu3o_133{transform:scale(var(--canvas-zoom-compensation-factor,1))translate(0,var(--label-translate-y));color:var(--canvas--label--color);font-size:var(--font-size--xs);background-color:var(--canvas--label--color--background)}._status_v9j1u_125{align-items:center;gap:var(--spacing--5xs);font-weight:var(--font-weight--bold);display:flex}._runData_v9j1u_132{color:var(--color--success)}._waiting_v9j1u_136,._pinnedData_v9j1u_140{color:var(--color--secondary)}._running_v9j1u_144{color:hsl(var(--color--primary--h),var(--color--primary--s),var(--color--primary--l))}._running_v9j1u_144._absoluteSpinner_v9j1u_147{width:100%;height:100%;color:hsla(var(--color--primary--h),var(--color--primary--s),var(--color--primary--l),.7);padding:var(--canvas-node--status-icons--margin);justify-content:center;align-items:center;font-size:3.75em;display:flex;position:absolute;top:0;left:0}._running_v9j1u_144._spinnerScrim_v9j1u_160{z-index:10;border-radius:var(--radius--lg);background-color:rgba(255,255,255,.82)}._issues_v9j1u_166{color:var(--color--danger);cursor:default}._count_v9j1u_171{font-size:var(--font-size--sm)}._warning_v9j1u_175{color:var(--color--warning)}._disabled_v9j1u_179{color:var(--color--foreground--shade-2)}._popover_18eco_125{min-width:240px;margin-bottom:calc(-1*var(--spacing--2xs));margin-left:calc(-1*var(--spacing--5xs))}._content_18eco_131{gap:var(--spacing--2xs);flex-direction:row;width:fit-content;display:flex}._color_18eco_138{border-style:solid;border-width:1px;border-color:var(--color--foreground--shade-2);background:var(--sticky--color--background);border-radius:50%;width:20px;height:20px}._color_18eco_138:hover{cursor:pointer}._color_18eco_138._selected_18eco_150{box-shadow:0 0 0 1px var(--sticky--color--background)}._color_18eco_138._sticky-color-1_18eco_153{--sticky--color--background:var(--sticky--color--background--variant-1)}._color_18eco_138._sticky-color-2_18eco_156{--sticky--color--background:var(--sticky--color--background--variant-2)}._color_18eco_138._sticky-color-3_18eco_159{--sticky--color--background:var(--sticky--color--background--variant-3)}._color_18eco_138._sticky-color-4_18eco_162{--sticky--color--background:var(--sticky--color--background--variant-4)}._color_18eco_138._sticky-color-5_18eco_165{--sticky--color--background:var(--sticky--color--background--variant-5)}._color_18eco_138._sticky-color-6_18eco_168{--sticky--color--background:var(--sticky--color--background--variant-6)}._color_18eco_138._sticky-color-7_18eco_171{--sticky--color--background:var(--sticky--color--background--variant-7)}._option_18eco_175{padding:var(--spacing--3xs);color:var(--color--text--tint-1);display:inline-block}._option_18eco_175 svg{width:var(--font-size--sm)!important}._option_18eco_175:hover{color:var(--color--primary)}._customColorButton_18eco_187{background:conic-gradient(red,#ff0,#0f0,#0ff,#00f,#f0f,red);position:relative}._customColorButton_18eco_187:hover{cursor:pointer}._plusIcon_18eco_195{color:#fff;filter:drop-shadow(0 1px 2px rgba(0,0,0,.3));position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}._hiddenColorInput_18eco_204{opacity:0;pointer-events:none;width:0;height:0;position:absolute}._canvasNodeToolbar_bw5fp_125{padding-bottom:var(--spacing--xs);cursor:default;pointer-events:none;justify-content:center;width:100%;display:flex}._canvasNodeToolbar_bw5fp_125._isExperimentalNdvActive_bw5fp_133{padding-bottom:var(--spacing--3xs);zoom:var(--canvas-zoom-compensation-factor,1);margin-bottom:var(--spacing--2xs);justify-content:space-between;align-items:center}._canvasNodeToolbarItems_bw5fp_142{background-color:var(--canvas--color--background);border-radius:var(--radius);pointer-events:auto;justify-content:center;align-items:center;display:flex}._canvasNodeToolbarItems_bw5fp_142 .button{--button--color--text:var(--color--text--tint-1)}._forceVisible_bw5fp_154{opacity:1!important}._statusIcons_bw5fp_158:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){margin-right:var(--spacing--3xs)}._statusIcons_bw5fp_158:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){margin-right:var(--spacing--3xs)}._statusIcons_bw5fp_158:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){margin-left:var(--spacing--3xs)}._statusIcons_bw5fp_158:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){margin-left:var(--spacing--3xs)}._settingsIcons_xulzx_125{top:var(--canvas-node--status-icons--margin);right:var(--canvas-node--status-icons--margin);flex-direction:row;gap:1px;display:flex;position:absolute}._tooltipHeader_xulzx_134{gap:2px;display:flex}._tooltipTitle_xulzx_139{font-weight:600;font-size:inherit;line-height:inherit}._icon_xulzx_145{width:var(--spacing--md);height:var(--spacing--md);place-items:center;display:grid}._actions_1x1ab_125{color:var(--color--text);align-items:center;display:flex}._actions_1x1ab_125>button{color:var(--color--text--tint-1)}._component_8xduy_125{--canvas-node--border-color:var(--color--text--tint-2);--embedded-ndv--max-height--expanded:min(calc(var(--canvas-node--height)*2),var(--input--max-height--focus),300px);justify-content:stretch;overflow:hidden;border-radius:var(--radius)!important;border-width:1px!important;align-items:flex-start!important}._component_8xduy_125._expanded_8xduy_138{user-select:text;cursor:auto;height:auto;max-height:var(--embedded-ndv--max-height--expanded);min-height:var(--spacing--3xl)}.selected ._component_8xduy_125._expanded_8xduy_138{max-height:var(--input--max-height--focus)}._component_8xduy_125._collapsed_8xduy_148{height:var(--spacing--2xl);overflow:hidden}:root .vue-flow__node:has(._component_8xduy_125){z-index:10}.selected :root .vue-flow__node:has(._component_8xduy_125){z-index:11}._collapsedContent_8xduy_160,._settingsView_8xduy_161{z-index:1000;width:100%;height:auto;max-height:calc(var(--embedded-ndv--max-height--expanded) - var(--border-width)*2);min-height:var(--spacing--2xl)}.selected ._collapsedContent_8xduy_160,.selected ._settingsView_8xduy_161{max-height:calc(var(--input--max-height--focus) - var(--border-width)*2)}._collapsedContent_8xduy_160{align-items:center;gap:var(--spacing--4xs);height:100%;padding:var(--spacing--2xs)var(--spacing--4xs)var(--spacing--2xs)var(--spacing--2xs);background-color:#fff;background-color:var(--color--background--light-3);cursor:pointer;display:flex}._disabled_8xduy_183 ._collapsedContent_8xduy_160{background-color:var(--color--foreground--tint-1)}._collapsedContent_8xduy_160>*{zoom:var(--canvas-zoom-compensation-factor,1);flex-grow:0;flex-shrink:0}._collapsedNodeName_8xduy_193{gap:var(--spacing--5xs);flex-direction:column;flex-grow:1;width:0;display:flex}._collapsedNodeName_8xduy_193>*{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}._settingsView_8xduy_161>*{zoom:var(--canvas-zoom-compensation-factor,1)}._tooltipTrigger_r3vzo_125{width:100%;height:100%;position:absolute;top:0;left:0}._content_r3vzo_133{white-space:nowrap}._disabledStrikeThrough_l3m1g_125{border:1px solid var(--color--foreground--shade-1);top:calc(var(--canvas-node--height)/2 - 1px);pointer-events:none;width:calc(100% + 12px);position:absolute;left:-4px}._success_l3m1g_134{border-color:var(--color--success--tint-1)}._warning_l3m1g_138{border-color:var(--color--warning--tint-1)}._node_139nt_125{--canvas-node--border-width:1.5px;--trigger-node--radius:36px;--canvas-node--status-icons--margin:var(--spacing--3xs);--node--icon--color:var(--color--foreground--shade-1);height:var(--canvas-node--height);width:var(--canvas-node--width);background:var(--canvas-node--color--background,var(--node--color--background));border:var(--canvas-node--border-width)solid var(--canvas-node--border-color,var(--lightningcss-light,oklch(from var(--color--neutral-black)l c h/var(--canvas-node--border--opacity-light,.1)))var(--lightningcss-dark,oklch(from var(--color--neutral-white)l c h/var(--canvas-node--border--opacity-dark,.15))));border-radius:var(--radius--lg);background-clip:padding-box;justify-content:center;align-items:center;display:flex;position:relative}._node_139nt_125._trigger_139nt_148,._node_139nt_125._trigger_139nt_148._running_139nt_151:after,._node_139nt_125._trigger_139nt_148._waiting_139nt_151:after{border-radius:var(--trigger-node--radius)var(--radius--lg)var(--radius--lg)var(--trigger-node--radius)}._node_139nt_125._configuration_139nt_154,._node_139nt_125._configuration_139nt_154._running_139nt_151:after,._node_139nt_125._configuration_139nt_154._waiting_139nt_151:after{border-radius:calc(var(--canvas-node--height)/2)}._node_139nt_125._configuration_139nt_154 ._statusIcons_139nt_160{right:unset}._node_139nt_125._configurable_139nt_163 ._icon_139nt_163{margin-left:calc(40px - (var(--node--icon--size))/2 - var(--canvas-node--border-width))}._node_139nt_125._configurable_139nt_163 ._description_139nt_166{top:unset;margin-top:0;margin-left:var(--spacing--sm);margin-right:var(--spacing--sm);width:auto;min-width:unset;text-overflow:ellipsis;flex-grow:1;flex-shrink:1;position:relative;overflow:hidden}._node_139nt_125._configurable_139nt_163 ._label_139nt_179,._node_139nt_125._configurable_139nt_163 ._subtitle_139nt_182{text-align:left}._node_139nt_125._configurable_139nt_163._configuration_139nt_154 ._icon_139nt_163{margin-left:calc((var(--canvas-node--height) - var(--node--icon--size) - 4px)/2)}._node_139nt_125._configurable_139nt_163._configuration_139nt_154 ._statusIcons_139nt_160{margin-right:var(--spacing--2xs);position:static}._node_139nt_125._configurable_139nt_163._configuration_139nt_154 ._description_139nt_166{margin-right:var(--spacing--xs)}._node_139nt_125._selected_139nt_195{box-shadow:0 0 0 calc(6px*var(--canvas-zoom-compensation-factor,1))var(--canvas--color--selected-transparent)}._node_139nt_125._success_139nt_199{--canvas-node--border-width:2px;--canvas-node--border-color:var(--color-canvas-node-success-border-color,var(--color--success))}._node_139nt_125._warning_139nt_206{--canvas-node--border-width:2px;--canvas-node--border-color:var(--color--warning)}._node_139nt_125._error_139nt_210{--canvas-node--border-color:var(--canvas-node--border-color--error,var(--color--danger))}._node_139nt_125._pinned_139nt_213{--canvas-node--border-width:2px;--canvas-node--border-color:var(--color-canvas-node-pinned-border-color,var(--node--border-color--pinned))}._node_139nt_125._disabled_139nt_220{--canvas-node--border-color:var(--color-canvas-node-disabled-border-color,var(--color--foreground))}._node_139nt_125._running_139nt_151{--canvas-node--border-color:var(--color-canvas-node-running-border-color,var(--node--border-color--running));border-color:transparent}._node_139nt_125._waiting_139nt_151{--canvas-node--border-color:transparent}._running_139nt_151:after,._waiting_139nt_151:after{content:"";z-index:-1;background:conic-gradient(from var(--node--gradient-angle),#ff6d5a,#ff6d5a 20%,rgba(255,109,90,.2) 35%,rgba(255,109,90,.2) 65%,#ff6d5a 90%,#ff6d5a);border-radius:10px;position:absolute;top:-3px;bottom:-3px;left:-3px;right:-3px}._running_139nt_151:after{animation:1.5s linear infinite _border-rotate_139nt_1}._waiting_139nt_151:after{animation:4.5s linear infinite _border-rotate_139nt_1}@property --node--gradient-angle{syntax:"<angle>";inherits:false;initial-value:0deg}@keyframes _border-rotate_139nt_1{0%{--node--gradient-angle:0deg}to{--node--gradient-angle:360deg}}._description_139nt_166{width:100%;min-width:calc(var(--canvas-node--width)*2);margin-top:var(--spacing--2xs);gap:var(--spacing--4xs);pointer-events:none;flex-direction:column;display:flex;position:absolute;top:100%}._label_139nt_179,._disabledLabel_139nt_283{font-size:var(--font-size--md);text-align:center;text-overflow:ellipsis;-webkit-line-clamp:2;overflow-wrap:anywhere;font-weight:var(--font-weight--medium);line-height:var(--line-height--sm);-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._subtitle_139nt_182{text-align:center;width:100%;color:var(--color--text--tint-1);font-size:var(--font-size--xs);white-space:nowrap;text-overflow:ellipsis;line-height:var(--line-height--sm);font-weight:var(--font-weight--regular);overflow:hidden}._statusIcons_139nt_160{bottom:var(--canvas-node--status-icons--margin);right:var(--canvas-node--status-icons--margin);position:absolute}._icon_139nt_163{flex-grow:0;flex-shrink:0}._sticky_1k3w0_125{position:relative}._sticky_1k3w0_125._selected_1k3w0_132{box-shadow:0 0 0 4px var(--canvas--color--selected)}._addNodes_1ik7n_125{flex-direction:column;justify-content:center;align-items:center;width:100px;height:100px;display:flex}._addNodes_1ik7n_125:hover ._button_1ik7n_133 svg path{fill:var(--color--primary)}._button_1ik7n_133{background:var(--color--foreground--tint-2);border:2px dashed var(--color--foreground--shade-2);cursor:pointer;border-radius:8px;min-width:100px;min-height:100px;padding:0}._label_1ik7n_147{width:max-content;font-weight:var(--font-weight--medium);font-size:var(--font-size--md);line-height:var(--line-height--xl);color:var(--color--text--shade-1);margin-top:var(--spacing--2xs);flex-direction:column;display:flex}._choicePrompt_5k7m7_125{justify-content:center;align-items:flex-start;gap:var(--spacing--lg);flex-direction:row;display:flex}._option_5k7m7_133{flex-direction:column;align-items:center;width:100px;display:flex}._button_5k7m7_140{background:var(--color--foreground--tint-2);border:2px dashed var(--color--foreground--shade-2);border-radius:var(--radius--lg);cursor:pointer;min-width:100px;min-height:100px;padding:0}._selectedButtonHighlight_5k7m7_150{border-radius:var(--radius--lg)}._selectedButtonHighlight_5k7m7_150._highlighted_5k7m7_153{box-shadow:0 0 0 7px var(--canvas--color--selected)}._label_5k7m7_157{width:max-content;font-weight:var(--font-weight--medium);font-size:var(--font-size--md);line-height:var(--line-height--xl);color:var(--color--text--shade-1);margin-top:var(--spacing--2xs);text-align:center;flex-direction:column;display:flex}._orDivider_5k7m7_169{height:100px;margin-bottom:calc(var(--line-height--xl)*1em + var(--spacing--2xs));justify-content:center;align-items:center;display:flex}._orText_5k7m7_177{font-size:var(--font-size--md);color:var(--color--text);font-weight:var(--font-weight--regular);padding:0 var(--spacing--xs)}._wrapper_1jh0f_125{z-index:2;margin:-4px;padding:4px;position:relative}._wrapper_1jh0f_125._output_1jh0f_131{cursor:crosshair}._dot_1jh0f_135{width:var(--handle--indicator--width);height:var(--handle--indicator--height);background:var(--lightningcss-light,var(--color--neutral-white))var(--lightningcss-dark,var(--color--neutral-850));border:1px solid var(--lightningcss-light,oklch(var(--handle--border--lightness--light,.68)0 0))var(--lightningcss-dark,oklch(var(--handle--border--lightness--dark,.5)0 0));border-radius:50%;transition:transform .2s,background .2s,border-width .1s}._wrapper_1jh0f_125._output_1jh0f_131:hover ._dot_1jh0f_135{border:1.5px solid var(--lightningcss-light,var(--color--neutral-300))var(--lightningcss-dark,var(--color--neutral-300));background:var(--lightningcss-light,var(--color--neutral-100))var(--lightningcss-dark,var(--color--neutral-700));transform:scale(1.5)}._handle_1rqcc_125{flex-direction:column;justify-content:center;align-items:center;display:flex}._label_1rqcc_132{top:50%;left:calc(var(--spacing--xs)*-1);transform:translate(0,-50%)scale(var(--canvas-zoom-compensation-factor,1))translate(-100%,0);transform-origin:0;font-size:var(--font-size--2xs);color:var(--color--foreground--shade-2);background:var(--canvas--label--color--background);z-index:1;text-align:center;white-space:nowrap;position:absolute}._required_1rqcc_147 ._label_1rqcc_132:after{content:"*";color:var(--color--danger)}._container_276y9_125{position:relative}._container_276y9_125._bottom_276y9_128:before{content:"";pointer-events:auto;width:200%;height:120%;transform:translate(-50%,-50%)scale(var(--canvas-zoom-compensation-factor,1));position:absolute;top:50%;left:50%}._wrapper_276y9_140{transform:scale(var(--canvas-zoom-compensation-factor,1));position:relative}._wrapper_276y9_140._right_276y9_145{transform-origin:0}._wrapper_276y9_140._bottom_276y9_128{transform-origin:top}._wrapper_276y9_140 ._line_276y9_151{stroke:var(--lightningcss-light,oklch(var(--canvas-handle-plus-line--color--lightness--light)0 0))var(--lightningcss-dark,oklch(var(--canvas-handle-plus-line--color--lightness--dark)0 0))}._wrapper_276y9_140._success_276y9_154 ._line_276y9_151{stroke:var(--color--success)}._wrapper_276y9_140 ._plus_276y9_157{color:var(--lightningcss-light,var(--color--neutral-700))var(--lightningcss-dark,var(--color--neutral-250))}._wrapper_276y9_140 ._plus_276y9_157:hover{cursor:pointer;color:var(--lightningcss-light,var(--color--neutral-850))var(--lightningcss-dark,var(--color--neutral-150))}._wrapper_276y9_140 ._plus_276y9_157:hover path{fill:var(--lightningcss-light,var(--color--neutral-250))var(--lightningcss-dark,var(--color--neutral-800))}._wrapper_276y9_140 ._plus_276y9_157:hover rect{stroke:var(--lightningcss-light,var(--color--neutral-250))var(--lightningcss-dark,var(--color--neutral-800));fill:var(--lightningcss-light,var(--color--neutral-250))var(--lightningcss-dark,var(--color--neutral-800))}._handle_4le4q_125{flex-direction:row;justify-content:center;align-items:center;display:flex}._handle_4le4q_125._connected_4le4q_131 ._label_4le4q_131{max-width:96px}._label_4le4q_131{background:var(--canvas--label--color--background);z-index:1;max-width:calc(100% - var(--spacing--md) - 24px);white-space:nowrap;text-overflow:ellipsis;position:absolute;overflow:hidden}._required_4le4q_145 ._label_4le4q_131:after{content:"*";color:var(--color--danger)}._outputLabel_4le4q_150{top:50%;left:var(--spacing--md);transform:translate(0,-50%)scale(var(--canvas-zoom-compensation-factor,1));transform-origin:0;font-size:var(--font-size--2xs);color:var(--canvas--label--color)}._runDataLabel_4le4q_160{top:50%;left:calc(50%*var(--canvas-zoom-compensation-factor,1));transform:translate(-50%,-50%)scale(var(--canvas-zoom-compensation-factor,1))translate(0,-100%);font-size:var(--font-size--xs);color:var(--color--text);position:absolute}.canvas-node-handle-main-output-enter-active,.canvas-node-handle-main-output-leave-active{transform-origin:0;transition-property:transform,opacity;transition-duration:.2s;transition-timing-function:ease}.canvas-node-handle-main-output-enter-from,.canvas-node-handle-main-output-leave-to{opacity:0;transform:scale(0)}._wrapper_149eq_125{margin:-4px;padding:4px;position:relative}._diamond_149eq_131{width:var(--handle--indicator--width);height:var(--handle--indicator--height);background:var(--lightningcss-light,var(--color--neutral-white))var(--lightningcss-dark,var(--color--neutral-850));border:1px solid var(--lightningcss-light,oklch(var(--handle--border--lightness--light,.68)0 0))var(--lightningcss-dark,oklch(var(--handle--border--lightness--dark,.5)0 0));transition:transform .2s,background .2s,border-width .1s;transform:rotate(45deg)scale(.8)}._wrapper_149eq_125:hover ._diamond_149eq_131{border:1.5px solid var(--lightningcss-light,var(--color--neutral-300))var(--lightningcss-dark,var(--color--neutral-300));background:var(--lightningcss-light,var(--color--neutral-100))var(--lightningcss-dark,var(--color--neutral-700));transform:rotate(45deg)scale(1.2)}._handle_1i9b3_125{flex-direction:column;justify-content:center;align-items:center;display:flex}._label_1i9b3_132{top:var(--spacing--lg);transform:translate(-50%,0)scale(var(--canvas-zoom-compensation-factor,1));font-size:var(--font-size--2xs);color:var(--canvas--label--color);background:var(--canvas--label--color--background);z-index:1;text-align:center;white-space:nowrap;position:absolute;left:50%}._required_1i9b3_146 ._label_1i9b3_132:after{content:"*";color:var(--color--danger)}.canvas-node-handle-non-main-input-enter-active,.canvas-node-handle-non-main-input-leave-active{transform-origin:50% 0;transition-property:transform,opacity;transition-duration:.2s;transition-timing-function:ease}.canvas-node-handle-non-main-input-enter-from,.canvas-node-handle-non-main-input-leave-to{opacity:0;transform:scale(0)}._handle_1utsl_125{flex-direction:row;justify-content:center;align-items:center;display:flex}._label_1utsl_132{top:calc(-1*var(--spacing--lg));transform:translate(-50%,0)scale(var(--canvas-zoom-compensation-factor,1));font-size:var(--font-size--2xs);color:var(--canvas--label--color);background:var(--canvas--label--color--background);z-index:0;white-space:nowrap;position:absolute;left:50%}._required_1utsl_145 ._label_1utsl_132:after{content:"*";color:var(--color--danger)}.vue-flow__handle._handle_pg5br_125{--handle--indicator--width:calc(16px*var(--canvas-zoom-compensation-factor,1));--handle--indicator--height:calc(16px*var(--canvas-zoom-compensation-factor,1));width:var(--handle--indicator--width);height:var(--handle--indicator--height);z-index:1;background:0 0;border:0;border-radius:0;justify-content:center;align-items:center;display:inline-flex}.vue-flow__handle._handle_pg5br_125._inputs_pg5br_140._main_pg5br_140{cursor:default}._renderType_pg5br_144._top_pg5br_144{margin-bottom:calc(-1*var(--handle--indicator--height));transform:translateY(-50%)}._renderType_pg5br_144._right_pg5br_148{margin-left:calc(-1*var(--handle--indicator--width));transform:translate(50%)}._renderType_pg5br_144._left_pg5br_152{margin-right:calc(-1*var(--handle--indicator--width));transform:translate(-50%)}._renderType_pg5br_144._bottom_pg5br_156{margin-top:calc(-1*var(--handle--indicator--height));transform:translateY(50%)}._container_zea8x_125{z-index:-1;pointer-events:none;align-items:center;height:100%;display:flex;position:absolute;top:0;right:100%}._container_zea8x_125>div{align-items:center;display:flex;position:relative}._container_zea8x_125 button{margin-right:var(--spacing--sm);opacity:0;translate:-12px;transform:scale(var(--canvas-zoom-compensation-factor,1));transform-origin:100%;transition:translate .1s ease-in,opacity .1s ease-in}._container_zea8x_125._interactive_zea8x_149._hovered_zea8x_149 button{opacity:1;pointer-events:all;translate:0}._container_zea8x_125._isExperimentalNdvActive_zea8x_154{height:var(--spacing--2xl)}._bolt_zea8x_158{color:var(--color--primary);padding:var(--spacing--sm);opacity:1;transition:translate .1s ease-in,opacity .1s ease-in;position:absolute;right:0;translate:0}._container_zea8x_125._interactive_zea8x_149._hovered_zea8x_149 ._bolt_zea8x_158{opacity:0;translate:-12px}._canvasNode_35bs3_125 ._canvasNodeToolbarItems_35bs3_125{opacity:0;transition:opacity .1s ease-in}._canvasNode_35bs3_125:focus-within ._canvasNodeToolbarItems_35bs3_125,._canvasNode_35bs3_125._showToolbar_35bs3_129 ._canvasNodeToolbarItems_35bs3_125{opacity:1}._canvasNode_35bs3_125:hover:not(:has(>._trigger_35bs3_129:hover)) ._canvasNodeToolbarItems_35bs3_125{opacity:1}._canvasNodeToolbar_35bs3_125{z-index:1;position:absolute;bottom:100%;left:50%;transform:translate(-50%)}._canvas_wikel_125{opacity:0;width:100%;height:100%;transition:opacity .3s}._canvas_wikel_125._ready_wikel_131{opacity:1}._canvas_wikel_125._isExperimentalNdvActive_wikel_134{--canvas-zoom-compensation-factor:.5}.minimap-enter-active[data-v-b4ad6171],.minimap-leave-active[data-v-b4ad6171]{transition:opacity .3s}.minimap-enter-from[data-v-b4ad6171],.minimap-leave-to[data-v-b4ad6171]{opacity:0}\n/*$vite$:1*/',document.head.appendChild(tn);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(Z=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[Z]="7bcb3025-a628-4172-8339-69039a5a70cf",t._sentryDebugIdIdentifier="sentry-dbid-7bcb3025-a628-4172-8339-69039a5a70cf")}catch(t){}var t,Z;nn=["id","x","y","width","height","patternTransform"],on=["d","stroke-width"],an=pe(f({__name:"CanvasBackgroundStripedPattern",props:{id:{},x:{},y:{},zoom:{}},setup(e){const t=e,n=a((()=>20*t.zoom||1)),o=a((()=>n.value/2));return(t,a)=>(I(),r("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x%n.value,y:e.y%n.value,width:n.value,height:n.value,patternTransform:`rotate(135) translate(-${o.value},-${o.value})`},[q("path",{d:`M0 ${n.value/2} H${n.value}`,"stroke-width":n.value/2},null,8,on)],8,nn))}}),[["__scopeId","data-v-c74a9681"]]),sn=function({dimensions:e,size:t,color:n}){return p("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},ln=function({radius:e,color:t}){return p("circle",{cx:e,cy:e,r:e,fill:t})},(rn=(e=>(e.Lines="lines",e.Dots="dots",e))(rn||{})).Lines,rn.Dots,un={[rn.Dots]:"#81818a",[rn.Lines]:"#eee"},cn=["id","x","y","width","height","patternTransform"],dn={key:2,height:"100",width:"100"},hn=["fill"],pn=["x","y","fill"],vn=f({name:"Background",compatConfig:{MODE:3},props:{id:{},variant:{default:()=>rn.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Ye(),o=a((()=>{const t=n.value.zoom,[o,a]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],i=[o*t||1,a*t||1],r=e.size*t,[s,l]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset];return{scaledGap:i,offset:[s*t||1+i[0]/2,l*t||1+i[1]/2],size:r}})),i=y((()=>`pattern-${t}${e.id?`-${e.id}`:""}`)),l=y((()=>e.color||e.patternColor||un[e.variant||rn.Dots]));return(e,t)=>(I(),r("svg",{class:"vue-flow__background vue-flow__container",style:z({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[E(e.$slots,"pattern-container",{id:i.value},(()=>[q("pattern",{id:i.value,x:u(n).x%o.value.scaledGap[0],y:u(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[E(e.$slots,"pattern",{},(()=>[e.variant===u(rn).Lines?(I(),_(u(sn),{key:0,size:e.lineWidth,color:l.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):e.variant===u(rn).Dots?(I(),_(u(ln),{key:1,color:l.value,radius:o.value.size/2},null,8,["color","radius"])):s("",!0),e.bgColor?(I(),r("svg",dn,[q("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,hn)])):s("",!0)]))],8,cn)])),q("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,pn),E(e.$slots,"default",{id:i.value})],4))}}),fn=f({__name:"CanvasBackground",props:{striped:{type:Boolean},viewport:{}},setup:e=>(t,n)=>(I(),_(u(vn),{"data-test-id":"canvas-background","pattern-color":"var(--canvas--dot--color)",gap:u(16)},B({_:2},[e.striped?{name:"pattern-container",fn:C((t=>[v(an,{id:t.id,"data-test-id":"canvas-background-striped-pattern",x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom},null,8,["id","x","y","zoom"])])),key:"0"}:void 0]),1032,["gap"]))}),e("c",gn=fn),_n=d([0,0]),mn=d(),yn=()=>{const e=Je(),t=a((()=>void 0!==mn.value)),n=a((()=>{if(!mn.value)return[];const e=mn.value;return"canvas"===e.source?e.nodeIds:[e.nodeId]})),o=()=>{mn.value=void 0,_n.value=[0,0]},i=br(n);return k((()=>e.nodeViewOffsetPosition),o),{isOpen:t,position:_n,target:mn,actions:a((()=>t.value?i.value:[])),targetNodeIds:n,open:(e,n)=>{e.stopPropagation(),t.value&&n.source===mn.value?.source&&n.nodeId===mn.value?.nodeId?o():(e.preventDefault(),mn.value=n,_n.value=ye(e))},close:o}},bn=pe(f({__name:"ContextMenu",emits:["action"],setup(e,{emit:t}){const n=yn(),{position:o,isOpen:a,actions:i,target:r}=n,l=d(),c=t,{APP_Z_INDEXES:h}=Pe();function p(e){c("action",e,n.targetNodeIds.value)}function f(e){e||n.close()}return k(a,(()=>{a?l.value?.open():l.value?.close()}),{flush:"post"}),(e,t)=>u(a)?(I(),_(N,{key:0,to:"body"},[q("div",{class:V(e.$style.contextMenu),style:z({left:`${u(o)[0]}px`,top:`${u(o)[1]}px`,zIndex:u(h).CONTEXT_MENU})},[v(u(te),{ref_key:"dropdown",ref:l,items:u(i),placement:"bottom-start","data-test-id":"context-menu","hide-arrow":"node-button"!==u(r)?.source,teleported:!1,onSelect:p,onVisibleChange:f},{activator:C((()=>[q("div",{class:V(e.$style.activator)},null,2)])),_:1},8,["items","hide-arrow"])],6)])):s("",!0)}}),[["__cssModules",{$style:{contextMenu:"_contextMenu_ia9tx_125",activator:"_activator_ia9tx_129"}}]]),wn=o(((e,t)=>{var n="\0";function o(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function i(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var r=a;a=i,i=r}return a+""+i+""+(void 0===o?"\0":o)}function r(e,t){return i(e,t.v,t.w,t.name)}t.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!Object.hasOwn(e,"directed")||e.directed,this._isMultigraph=!!Object.hasOwn(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.hasOwn(e,"compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children[n]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._in[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._out[t]).length))}setNodes(e,t){var n=arguments,o=this;return e.forEach((function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this}setNode(e,t){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=n,this._children[e]={},this._children[n][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var t=this;if(Object.hasOwn(this._nodes,e)){var n=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(void 0===t)t=n;else{for(var o=t+="";void 0!==o;o=this.parent(o))if(o===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==n)return t}}children(e=n){if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else{if(e===n)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const o=new Set(t);for(var n of this.successors(e))o.add(n);return Array.from(o.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Object.entries(this._nodes).forEach((function([n,o]){e(n)&&t.setNode(n,o)})),Object.values(this._edgeObjs).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};function a(e){var i=n.parent(e);return void 0===i||t.hasNode(i)?(o[e]=i,i):i in o?o[i]:a(i)}return this._isCompound&&t.nodes().forEach((e=>t.setParent(e,a(e)))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var n=this,o=arguments;return e.reduce((function(e,a){return o.length>1?n.setEdge(e,a,t):n.setEdge(e,a),a})),this}setEdge(){var e,t,n,a,r=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,t=s.w,n=s.name,2===arguments.length&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,void 0!==n&&(n=""+n);var l=i(this._isDirected,e,t,n);if(Object.hasOwn(this._edgeLabels,l))return r&&(this._edgeLabels[l]=a),this;if(void 0!==n&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[l]=r?a:this._defaultEdgeLabelFn(e,t,n);var u=function(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var r=a;a=i,i=r}var s={v:a,w:i};return o&&(s.name=o),s}(this._isDirected,e,t,n);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[l]=u,o(this._preds[t],e),o(this._sucs[e],t),this._in[t][l]=u,this._out[e][l]=u,this._edgeCount++,this}edge(e,t,n){var o=1===arguments.length?r(this._isDirected,arguments[0]):i(this._isDirected,e,t,n);return this._edgeLabels[o]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,n){var o=1===arguments.length?r(this._isDirected,arguments[0]):i(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,o)}removeEdge(e,t,n){var o=1===arguments.length?r(this._isDirected,arguments[0]):i(this._isDirected,e,t,n),s=this._edgeObjs[o];return s&&(e=s.v,t=s.w,delete this._edgeLabels[o],delete this._edgeObjs[o],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this}inEdges(e,t){var n=this._in[e];if(n){var o=Object.values(n);return t?o.filter((e=>e.v===t)):o}}outEdges(e,t){var n=this._out[e];if(n){var o=Object.values(n);return t?o.filter((e=>e.w===t)):o}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}})),xn=o(((e,t)=>{t.exports="2.2.4"})),kn=o(((e,t)=>{t.exports={Graph:wn(),version:xn()}})),En=o(((e,t)=>{var n=wn();function o(e){return e.nodes().map((function(t){var n=e.node(t),o=e.parent(t),a={v:t};return void 0!==n&&(a.value=n),void 0!==o&&(a.parent=o),a}))}function a(e){return e.edges().map((function(t){var n=e.edge(t),o={v:t.v,w:t.w};return void 0!==t.name&&(o.name=t.name),void 0!==n&&(o.value=n),o}))}t.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o(e),edges:a(e)};return void 0!==e.graph()&&(t.value=structuredClone(e.graph())),t},read:function(e){var t=new n(e.options).setGraph(e.value);return e.nodes.forEach((function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),e.edges.forEach((function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}})),Nn=o(((e,t)=>{t.exports=function(e){var t,n={},o=[];function a(o){Object.hasOwn(n,o)||(n[o]=!0,t.push(o),e.successors(o).forEach(a),e.predecessors(o).forEach(a))}return e.nodes().forEach((function(e){t=[],a(e),t.length&&o.push(t)})),o}})),zn=o(((e,t)=>{t.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map((function(e){return e.key}))}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key}add(e,t){var n=this._keyIndices;if(e=String(e),!Object.hasOwn(n,e)){var o=this._arr,a=o.length;return n[e]=a,o.push({key:e,priority:t}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)}_heapify(e){var t=this._arr,n=2*e,o=n+1,a=e;n<t.length&&(a=t[n].priority<t[a].priority?n:a,o<t.length&&(a=t[o].priority<t[a].priority?o:a),a!==e&&(this._swap(e,a),this._heapify(a)))}_decrease(e){for(var t,n=this._arr,o=n[e].priority;0!==e&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t}_swap(e,t){var n=this._arr,o=this._keyIndices,a=n[e],i=n[t];n[e]=i,n[t]=a,o[i.key]=e,o[a.key]=t}}})),Cn=o(((e,t)=>{var n=zn();t.exports=function(e,t,a,i){return function(e,t,o,a){var i,r,s={},l=new n,u=function(e){var t=e.v!==i?e.v:e.w,n=s[t],a=o(e),u=r.distance+a;if(a<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+a);u<n.distance&&(n.distance=u,n.predecessor=i,l.decrease(t,u))};for(e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},l.add(e,n)}));l.size()>0&&(i=l.removeMin(),(r=s[i]).distance!==Number.POSITIVE_INFINITY);)a(i).forEach(u);return s}(e,String(t),a||o,i||function(t){return e.outEdges(t)})};var o=()=>1})),Tn=o(((e,t)=>{var n=Cn();t.exports=function(e,t,o){return e.nodes().reduce((function(a,i){return a[i]=n(e,i,t,o),a}),{})}})),Mn=o(((e,t)=>{t.exports=function(e){var t=0,n=[],o={},a=[];function i(r){var s=o[r]={onStack:!0,lowlink:t,index:t++};if(n.push(r),e.successors(r).forEach((function(e){Object.hasOwn(o,e)?o[e].onStack&&(s.lowlink=Math.min(s.lowlink,o[e].index)):(i(e),s.lowlink=Math.min(s.lowlink,o[e].lowlink))})),s.lowlink===s.index){var l,u=[];do{l=n.pop(),o[l].onStack=!1,u.push(l)}while(r!==l);a.push(u)}}return e.nodes().forEach((function(e){Object.hasOwn(o,e)||i(e)})),a}})),In=o(((e,t)=>{var n=Mn();t.exports=function(e){return n(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}})),On=o(((e,t)=>{t.exports=function(e,t,o){return function(e,t,n){var o={},a=e.nodes();return a.forEach((function(e){o[e]={},o[e][e]={distance:0},a.forEach((function(t){e!==t&&(o[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var a=n.v===e?n.w:n.v,i=t(n);o[e][a]={distance:i,predecessor:e}}))})),a.forEach((function(e){var t=o[e];a.forEach((function(n){var i=o[n];a.forEach((function(n){var o=i[e],a=t[n],r=i[n],s=o.distance+a.distance;s<r.distance&&(r.distance=s,r.predecessor=a.predecessor)}))}))})),o}(e,t||n,o||function(t){return e.outEdges(t)})};var n=()=>1})),Sn=o(((e,t)=>{function n(e){var t={},n={},a=[];if(e.sinks().forEach((function i(r){if(Object.hasOwn(n,r))throw new o;Object.hasOwn(t,r)||(n[r]=!0,t[r]=!0,e.predecessors(r).forEach(i),delete n[r],a.push(r))})),Object.keys(t).length!==e.nodeCount())throw new o;return a}var o=class extends Error{constructor(){super(...arguments)}};t.exports=n,n.CycleException=o})),$n=o(((e,n)=>{var o=Sn();n.exports=function(e){try{o(e)}catch(t){if(t instanceof o.CycleException)return!1;throw t}return!0}})),An=o(((e,t)=>{function n(e,t,n,o){for(var i=[[e,!1]];i.length>0;){var r=i.pop();r[1]?o.push(r[0]):Object.hasOwn(n,r[0])||(n[r[0]]=!0,i.push([r[0],!0]),a(t(r[0]),(e=>i.push([e,!1]))))}}function o(e,t,n,o){for(var i=[e];i.length>0;){var r=i.pop();Object.hasOwn(n,r)||(n[r]=!0,o.push(r),a(t(r),(e=>i.push(e))))}}function a(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}t.exports=function(e,t,a){Array.isArray(t)||(t=[t]);var i=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),r="post"===a?n:o,s=[],l={};return t.forEach((t=>{if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);r(t,i,l,s)})),s}})),Bn=o(((e,t)=>{var n=An();t.exports=function(e,t){return n(e,t,"post")}})),jn=o(((e,t)=>{var n=An();t.exports=function(e,t){return n(e,t,"pre")}})),Dn=o(((e,t)=>{var n=wn(),o=zn();t.exports=function(e,t){var a,i=new n,r={},s=new o;function l(e){var n=e.v===a?e.w:e.v,o=s.priority(n);if(void 0!==o){var i=t(e);i<o&&(r[n]=a,s.decrease(n,i))}}if(0===e.nodeCount())return i;e.nodes().forEach((function(e){s.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),s.decrease(e.nodes()[0],0);for(var u=!1;s.size()>0;){if(a=s.removeMin(),Object.hasOwn(r,a))i.setEdge(a,r[a]);else{if(u)throw new Error("Input graph is not connected: "+e);u=!0}e.nodeEdges(a).forEach(l)}return i}})),Rn=o(((e,t)=>{t.exports={components:Nn(),dijkstra:Cn(),dijkstraAll:Tn(),findCycles:In(),floydWarshall:On(),isAcyclic:$n(),postorder:Bn(),preorder:jn(),prim:Dn(),tarjan:Mn(),topsort:Sn()}})),Ln=o(((e,t)=>{var n=kn();t.exports={Graph:n.Graph,json:En(),alg:Rn(),version:n.version}})),Pn=o(((e,t)=>{function n(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return n(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&n(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,n=t._prev;for(;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}}})),Vn=o(((e,t)=>{var n=Ln().Graph,o=Pn();t.exports=function(e,t){if(e.nodeCount()<=1)return[];let s=function(e,t){let a=new n,i=0,s=0;e.nodes().forEach((e=>{a.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((e=>{let n=a.edge(e.v,e.w)||0,o=t(e),r=n+o;a.setEdge(e.v,e.w,r),s=Math.max(s,a.node(e.v).out+=o),i=Math.max(i,a.node(e.w).in+=o)}));let l=function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(s+i+3).map((()=>new o)),u=i+1;return a.nodes().forEach((e=>{r(l,u,a.node(e))})),{graph:a,buckets:l,zeroIdx:u}}(e,t||a);return function(e,t,n){let o,a=[],r=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;o=s.dequeue();)i(e,t,n,o);for(;o=r.dequeue();)i(e,t,n,o);if(e.nodeCount())for(let r=t.length-2;r>0;--r)if(o=t[r].dequeue(),o){a=a.concat(i(e,t,n,o,!0));break}}return a}(s.graph,s.buckets,s.zeroIdx).flatMap((t=>e.outEdges(t.v,t.w)))};var a=()=>1;function i(e,t,n,o,a){let i=a?[]:void 0;return e.inEdges(o.v).forEach((o=>{let s=e.edge(o),l=e.node(o.v);a&&i.push({v:o.v,w:o.w}),l.out-=s,r(t,n,l)})),e.outEdges(o.v).forEach((o=>{let a=e.edge(o),i=o.w,s=e.node(i);s.in-=a,r(t,n,s)})),e.removeNode(o.v),i}function r(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}})),Hn=o(((e,t)=>{var n=Ln().Graph;function o(e,t,n,o){let a;do{a=l(o)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}t.exports={addBorderNode:function(e,t,n,a){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=a),o(e,"border",i,t)},addDummyNode:o,applyWithChunking:i,asNonCompoundGraph:function(e){let t=new n({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((n=>{e.children(n).length||t.setNode(n,e.node(n))})),e.edges().forEach((n=>{t.setEdge(n,e.edge(n))})),t},buildLayerMatrix:function(e){let t=u(r(e)+1).map((()=>[]));return e.nodes().forEach((n=>{let o=e.node(n),a=o.rank;void 0!==a&&(t[a][o.order]=n)})),t},intersectRect:function(e,t){let n,o,a=e.x,i=e.y,r=t.x-a,s=t.y-i,l=e.width/2,u=e.height/2;if(!r&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(r)*u?(s<0&&(u=-u),n=u*r/s,o=u):(r<0&&(l=-l),n=l,o=l*s/r),{x:a+n,y:i+o}},mapValues:function(e,t){let n=t;return"string"==typeof t&&(n=e=>e[t]),Object.entries(e).reduce(((e,[t,o])=>(e[t]=n(o,t),e)),{})},maxRank:r,normalizeRanks:function(e){let t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n})),n=i(Math.min,t);e.nodes().forEach((t=>{let o=e.node(t);Object.hasOwn(o,"rank")&&(o.rank-=n)}))},notime:function(e,t){return t()},partition:function(e,t){let n={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?n.lhs.push(e):n.rhs.push(e)})),n},pick:function(e,t){const n={};for(const o of t)void 0!==e[o]&&(n[o]=e[o]);return n},predecessorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.inEdges(t).forEach((t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return c(e.nodes(),t)},range:u,removeEmptyRanks:function(e){let t=e.nodes().map((t=>e.node(t).rank)),n=i(Math.min,t),o=[];e.nodes().forEach((t=>{let a=e.node(t).rank-n;o[a]||(o[a]=[]),o[a].push(t)}));let a=0,r=e.graph().nodeRankFactor;Array.from(o).forEach(((t,n)=>{void 0===t&&n%r!=0?--a:void 0!==t&&a&&t.forEach((t=>e.node(t).rank+=a))}))},simplify:function(e){let t=(new n).setGraph(e.graph());return e.nodes().forEach((n=>t.setNode(n,e.node(n)))),e.edges().forEach((n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},a=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+a.weight,minlen:Math.max(o.minlen,a.minlen)})})),t},successorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.outEdges(t).forEach((t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return c(e.nodes(),t)},time:function(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:l,zipObject:c};var a=65535;function i(e,t){if(t.length>a){const n=function(e,t=a){const n=[];for(let o=0;o<e.length;o+=t){const a=e.slice(o,o+t);n.push(a)}return n}(t);return e.apply(null,n.map((t=>e.apply(null,t))))}return e.apply(null,t)}function r(e){const t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MIN_VALUE:n}));return i(Math.max,t)}var s=0;function l(e){var t=++s;return toString(e)+t}function u(e,t,n=1){null==t&&(t=e,e=0);let o=e=>e<t;n<0&&(o=e=>t<e);const a=[];for(let i=e;o(i);i+=n)a.push(i);return a}function c(e,t){return e.reduce(((e,n,o)=>(e[n]=t[o],e)),{})}})),qn=o(((e,t)=>{var n=Vn(),o=Hn().uniqueId;t.exports={run:function(e){var t;("greedy"===e.graph().acyclicer?n(e,(t=e,e=>t.edge(e).weight)):function(e){let t=[],n={},o={};function a(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach((e=>{Object.hasOwn(n,e.w)?t.push(e):a(e.w)})),delete n[i])}return e.nodes().forEach(a),t}(e)).forEach((t=>{let n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o("rev"))}))},undo:function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}}))}}})),Wn=o(((e,t)=>{var n=Hn();t.exports={run:function(e){e.graph().dummyChains=[],e.edges().forEach((t=>function(e,t){let o,a,i,r=t.v,s=e.node(r).rank,l=t.w,u=e.node(l).rank,c=t.name,d=e.edge(t),h=d.labelRank;if(u!==s+1){for(e.removeEdge(t),i=0,++s;s<u;++i,++s)d.points=[],a={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},o=n.addDummyNode(e,"edge",a,"_d"),s===h&&(a.width=d.width,a.height=d.height,a.dummy="edge-label",a.labelpos=d.labelpos),e.setEdge(r,o,{weight:d.weight},c),0===i&&e.graph().dummyChains.push(o),r=o;e.setEdge(r,l,{weight:d.weight},c)}}(e,t)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let n,o=e.node(t),a=o.edgeLabel;for(e.setEdge(o.edgeObj,a);o.dummy;)n=e.successors(t)[0],e.removeNode(t),a.points.push({x:o.x,y:o.y}),"edge-label"===o.dummy&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),t=n,o=e.node(t)}))}}})),Fn=o(((e,t)=>{var{applyWithChunking:n}=Hn();t.exports={longestPath:function(e){var t={};e.sources().forEach((function o(a){var i=e.node(a);if(Object.hasOwn(t,a))return i.rank;t[a]=!0;let r=e.outEdges(a).map((t=>null==t?Number.POSITIVE_INFINITY:o(t.w)-e.edge(t).minlen));var s=n(Math.min,r);return s===Number.POSITIVE_INFINITY&&(s=0),i.rank=s}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}})),Yn=o(((e,t)=>{var n=Ln().Graph,o=Fn().slack;function a(e,t){return e.nodes().forEach((function n(a){t.nodeEdges(a).forEach((i=>{var r=i.v,s=a===r?i.w:r;e.hasNode(s)||o(t,i)||(e.setNode(s,{}),e.setEdge(a,s,{}),n(s))}))})),e.nodeCount()}function i(e,t){return t.edges().reduce(((n,a)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(a.v)!==e.hasNode(a.w)&&(i=o(t,a)),i<n[0]?[i,a]:n}),[Number.POSITIVE_INFINITY,null])[1]}function r(e,t,n){e.nodes().forEach((e=>t.node(e).rank+=n))}t.exports=function(e){var t,s,l=new n({directed:!1}),u=e.nodes()[0],c=e.nodeCount();for(l.setNode(u,{});a(l,e)<c;)t=i(l,e),s=l.hasNode(t.v)?o(e,t):-o(e,t),r(l,e,s);return l}})),Xn=o(((e,t)=>{var n=Yn(),o=Fn().slack,a=Fn().longestPath,i=Ln().alg.preorder,r=Ln().alg.postorder,s=Hn().simplify;function l(e){e=s(e),a(e);var t,o=n(e);for(d(o),u(o,e);t=p(o);)f(o,e,t,v(o,e,t))}function u(e,t){var n=r(e,e.nodes());(n=n.slice(0,n.length-1)).forEach((n=>function(e,t,n){var o=e.node(n).parent;e.edge(n,o).cutvalue=c(e,t,n)}(e,t,n)))}function c(e,t,n){var o=e.node(n).parent,a=!0,i=t.edge(n,o),r=0;return i||(a=!1,i=t.edge(o,n)),r=i.weight,t.nodeEdges(n).forEach((i=>{var s,l,u=i.v===n,c=u?i.w:i.v;if(c!==o){var d=u===a,h=t.edge(i).weight;if(r+=d?h:-h,s=n,l=c,e.hasEdge(s,l)){var p=e.edge(n,c).cutvalue;r+=d?-p:p}}})),r}function d(e,t){arguments.length<2&&(t=e.nodes()[0]),h(e,{},1,t)}function h(e,t,n,o,a){var i=n,r=e.node(o);return t[o]=!0,e.neighbors(o).forEach((a=>{Object.hasOwn(t,a)||(n=h(e,t,n,a,o))})),r.low=i,r.lim=n++,a?r.parent=a:delete r.parent,n}function p(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function v(e,t,n){var a=n.v,i=n.w;t.hasEdge(a,i)||(a=n.w,i=n.v);var r=e.node(a),s=e.node(i),l=r,u=!1;return r.lim>s.lim&&(l=s,u=!0),t.edges().filter((t=>u===g(0,e.node(t.v),l)&&u!==g(0,e.node(t.w),l))).reduce(((e,n)=>o(t,n)<o(t,e)?n:e))}function f(e,t,n,o){var a=n.v,r=n.w;e.removeEdge(a,r),e.setEdge(o.v,o.w,{}),d(e),u(e,t),function(e,t){var n=i(e,e.nodes().find((e=>!t.node(e).parent)));(n=n.slice(1)).forEach((n=>{var o=e.node(n).parent,a=t.edge(n,o),i=!1;a||(a=t.edge(o,n),i=!0),t.node(n).rank=t.node(o).rank+(i?a.minlen:-a.minlen)}))}(e,t)}function g(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=u,l.calcCutValue=c,l.leaveEdge=p,l.enterEdge=v,l.exchangeEdges=f})),Un=o(((e,t)=>{var n=Fn().longestPath,o=Yn(),a=Xn();t.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:r(e);break;case"tight-tree":!function(e){n(e),o(e)}(e);break;case"longest-path":i(e)}};var i=n;function r(e){a(e)}})),Gn=o(((e,t)=>{t.exports=function(e){let t=function(e){let t={},n=0;function o(a){let i=n;e.children(a).forEach(o),t[a]={low:i,lim:n++}}return e.children().forEach(o),t}(e);e.graph().dummyChains.forEach((n=>{let o=e.node(n),a=o.edgeObj,i=function(e,t,n,o){let a,i,r=[],s=[],l=Math.min(t[n].low,t[o].low),u=Math.max(t[n].lim,t[o].lim);a=n;do{a=e.parent(a),r.push(a)}while(a&&(t[a].low>l||u>t[a].lim));for(i=a,a=o;(a=e.parent(a))!==i;)s.push(a);return{path:r.concat(s.reverse()),lca:i}}(e,t,a.v,a.w),r=i.path,s=i.lca,l=0,u=r[l],c=!0;for(;n!==a.w;){if(o=e.node(n),c){for(;(u=r[l])!==s&&e.node(u).maxRank<o.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<r.length-1&&e.node(u=r[l+1]).minRank<=o.rank;)l++;u=r[l]}e.setParent(n,u),n=e.successors(n)[0]}}))}})),Kn=o(((e,t)=>{var n=Hn();function o(e,t,a,i,r,s,l){let u=e.children(l);if(!u.length)return void(l!==t&&e.setEdge(t,l,{weight:0,minlen:a}));let c=n.addBorderNode(e,"_bt"),d=n.addBorderNode(e,"_bb"),h=e.node(l);e.setParent(c,l),h.borderTop=c,e.setParent(d,l),h.borderBottom=d,u.forEach((n=>{o(e,t,a,i,r,s,n);let u=e.node(n),h=u.borderTop?u.borderTop:n,p=u.borderBottom?u.borderBottom:n,v=u.borderTop?i:2*i,f=h!==p?1:r-s[l]+1;e.setEdge(c,h,{weight:v,minlen:f,nestingEdge:!0}),e.setEdge(p,d,{weight:v,minlen:f,nestingEdge:!0})})),e.parent(l)||e.setEdge(t,c,{weight:0,minlen:r+s[l]})}t.exports={run:function(e){let t=n.addDummyNode(e,"root",{},"_root"),a=function(e){var t={};function n(o,a){var i=e.children(o);i&&i.length&&i.forEach((e=>n(e,a+1))),t[o]=a}return e.children().forEach((e=>n(e,1))),t}(e),i=Object.values(a),r=n.applyWithChunking(Math.max,i)-1,s=2*r+1;e.graph().nestingRoot=t,e.edges().forEach((t=>e.edge(t).minlen*=s));let l=function(e){return e.edges().reduce(((t,n)=>t+e.edge(n).weight),0)}(e)+1;e.children().forEach((n=>o(e,t,s,l,r,a,n))),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}}})),Zn=o(((e,t)=>{var n=Hn();function o(e,t,o,a,i,r){let s={width:0,height:0,rank:r,borderType:t},l=i[t][r-1],u=n.addDummyNode(e,"border",s,o);i[t][r]=u,e.setParent(u,a),l&&e.setEdge(l,u,{weight:1})}t.exports=function(e){e.children().forEach((function t(n){let a=e.children(n),i=e.node(n);if(a.length&&a.forEach(t),Object.hasOwn(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(let t=i.minRank,a=i.maxRank+1;t<a;++t)o(e,"borderLeft","_bl",n,i,t),o(e,"borderRight","_br",n,i,t)}}))}})),Qn=o(((e,t)=>{function n(e){e.nodes().forEach((t=>o(e.node(t)))),e.edges().forEach((t=>o(e.edge(t))))}function o(e){let t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function i(e){let t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){let t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||n(e)},undo:function(e){let t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){e.nodes().forEach((t=>a(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);n.points.forEach(a),Object.hasOwn(n,"y")&&a(n)}))}(e),"lr"!==t&&"rl"!==t||(function(e){e.nodes().forEach((t=>i(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);n.points.forEach(i),Object.hasOwn(n,"x")&&i(n)}))}(e),n(e))}}})),Jn=o(((e,t)=>{var n=Hn();t.exports=function(e){let t={},o=e.nodes().filter((t=>!e.children(t).length)),a=o.map((t=>e.node(t).rank)),i=n.applyWithChunking(Math.max,a),r=n.range(i+1).map((()=>[]));return o.sort(((t,n)=>e.node(t).rank-e.node(n).rank)).forEach((function n(o){t[o]||(t[o]=!0,r[e.node(o).rank].push(o),e.successors(o).forEach(n))})),r}})),eo=o(((e,t)=>{var n=Hn().zipObject;function o(e,t,o){let a=n(o,o.map(((e,t)=>t))),i=t.flatMap((t=>e.outEdges(t).map((t=>({pos:a[t.w],weight:e.edge(t).weight}))).sort(((e,t)=>e.pos-t.pos)))),r=1;for(;r<o.length;)r<<=1;let s=2*r-1;r-=1;let l=new Array(s).fill(0),u=0;return i.forEach((e=>{let t=e.pos+r;l[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=l[t+1]),t=t-1>>1,l[t]+=e.weight;u+=e.weight*n})),u}t.exports=function(e,t){let n=0;for(let a=1;a<t.length;++a)n+=o(e,t[a-1],t[a]);return n}})),to=o(((e,t)=>{t.exports=function(e,t=[]){return t.map((t=>{let n=e.inEdges(t);if(n.length){let o=n.reduce(((t,n)=>{let o=e.edge(n),a=e.node(n.v);return{sum:t.sum+o.weight*a.order,weight:t.weight+o.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}})),no=o(((e,t)=>{var n=Hn();t.exports=function(e,t){let o={};return e.forEach(((e,t)=>{let n=o[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),t.edges().forEach((e=>{let t=o[e.v],n=o[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(o[e.w]))})),function(e){let t=[];function o(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function a(t){return n=>{n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){let n=e.pop();t.push(n),n.in.reverse().forEach(o(n)),n.out.forEach(a(n))}return t.filter((e=>!e.merged)).map((e=>n.pick(e,["vs","i","barycenter","weight"])))}(Object.values(o).filter((e=>!e.indegree)))}})),oo=o(((e,t)=>{var n=Hn();function o(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}t.exports=function(e,t){let a=n.partition(e,(e=>Object.hasOwn(e,"barycenter"))),i=a.lhs,r=a.rhs.sort(((e,t)=>t.i-e.i)),s=[],l=0,u=0,c=0;var d;i.sort((d=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i)),c=o(s,r,c),i.forEach((e=>{c+=e.vs.length,s.push(e.vs),l+=e.barycenter*e.weight,u+=e.weight,c=o(s,r,c)}));let h={vs:s.flat(!0)};return u&&(h.barycenter=l/u,h.weight=u),h}})),ao=o(((e,t)=>{var n=to(),o=no(),a=oo();t.exports=function e(t,i,r,s){let l=t.children(i),u=t.node(i),c=u?u.borderLeft:void 0,d=u?u.borderRight:void 0,h={};c&&(l=l.filter((e=>e!==c&&e!==d)));let p=n(t,l);p.forEach((n=>{if(t.children(n.v).length){let i=e(t,n.v,r,s);h[n.v]=i,Object.hasOwn(i,"barycenter")&&(a=i,void 0!==(o=n).barycenter?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight))}var o,a}));let v=o(p,r);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(v,h);let f=a(v,s);if(c&&(f.vs=[c,f.vs,d].flat(!0),t.predecessors(c).length)){let e=t.node(t.predecessors(c)[0]),n=t.node(t.predecessors(d)[0]);Object.hasOwn(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+e.order+n.order)/(f.weight+2),f.weight+=2}return f}})),io=o(((e,t)=>{var n=Ln().Graph,o=Hn();t.exports=function(e,t,a){let i=function(e){for(var t;e.hasNode(t=o.uniqueId("_root")););return t}(e),r=new n({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((t=>e.node(t)));return e.nodes().forEach((n=>{let o=e.node(n),s=e.parent(n);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(r.setNode(n),r.setParent(n,s||i),e[a](n).forEach((t=>{let o=t.v===n?t.w:t.v,a=r.edge(o,n),i=void 0!==a?a.weight:0;r.setEdge(o,n,{weight:e.edge(t).weight+i})})),Object.hasOwn(o,"minRank")&&r.setNode(n,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))})),r}})),ro=o(((e,t)=>{t.exports=function(e,t,n){let o,a={};n.forEach((n=>{let i,r,s=e.parent(n);for(;s;){if(i=e.parent(s),i?(r=a[i],a[i]=s):(r=o,o=s),r&&r!==s)return void t.setEdge(r,s);s=i}}))}})),so=o(((e,t)=>{var n=Jn(),o=eo(),a=ao(),i=io(),r=ro(),s=Ln().Graph,l=Hn();function u(e,t,n){return t.map((function(t){return i(e,t,n)}))}function c(e,t){let n=new s;e.forEach((function(e){let o=e.graph().root,i=a(e,o,n,t);i.vs.forEach(((t,n)=>e.node(t).order=n)),r(e,n,i.vs)}))}function d(e,t){Object.values(t).forEach((t=>t.forEach(((t,n)=>e.node(t).order=n))))}t.exports=function e(t,a){if(a&&"function"==typeof a.customOrder)return void a.customOrder(t,e);let i=l.maxRank(t),r=u(t,l.range(1,i+1),"inEdges"),s=u(t,l.range(i-1,-1,-1),"outEdges"),h=n(t);if(d(t,h),a&&a.disableOptimalOrderHeuristic)return;let p,v=Number.POSITIVE_INFINITY;for(let n=0,u=0;u<4;++n,++u){c(n%2?r:s,n%4>=2),h=l.buildLayerMatrix(t);let e=o(t,h);e<v&&(u=0,p=Object.assign({},h),v=e)}d(t,p)}})),lo=o(((e,t)=>{var n=Ln().Graph,o=Hn();function a(e,t){let n={};return t.length&&t.reduce((function(t,o){let a=0,i=0,s=t.length,l=o[o.length-1];return o.forEach(((t,u)=>{let c=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),d=c?e.node(c).order:s;(c||t===l)&&(o.slice(i,u+1).forEach((t=>{e.predecessors(t).forEach((o=>{let i=e.node(o),s=i.order;!(s<a||d<s)||i.dummy&&e.node(t).dummy||r(n,o,t)}))})),i=u+1,a=d)})),o})),n}function i(e,t){let n={};function a(t,a,i,s,l){let u;o.range(a,i).forEach((o=>{u=t[o],e.node(u).dummy&&e.predecessors(u).forEach((t=>{let o=e.node(t);o.dummy&&(o.order<s||o.order>l)&&r(n,t,u)}))}))}return t.length&&t.reduce((function(t,n){let o,i=-1,r=0;return n.forEach(((s,l)=>{if("border"===e.node(s).dummy){let t=e.predecessors(s);t.length&&(o=e.node(t[0]).order,a(n,r,l,i,o),r=l,i=o)}a(n,r,n.length,o,t.length)})),n})),n}function r(e,t,n){if(t>n){let e=t;t=n,n=e}let o=e[t];o||(e[t]=o={}),o[n]=!0}function s(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&Object.hasOwn(e[t],n)}function l(e,t,n,o){let a={},i={},r={};return t.forEach((e=>{e.forEach(((e,t)=>{a[e]=e,i[e]=e,r[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let l=o(e);if(l.length){l=l.sort(((e,t)=>r[e]-r[t]));let o=(l.length-1)/2;for(let u=Math.floor(o),c=Math.ceil(o);u<=c;++u){let o=l[u];i[e]===e&&t<r[o]&&!s(n,e,o)&&(i[o]=e,i[e]=a[e]=a[o],t=r[o])}}}))})),{root:a,align:i}}function u(e,t,o,a,i){let r={},s=function(e,t,o,a){let i=new n,r=e.graph(),s=function(e,t,n){return(o,a,i)=>{let r,s=o.node(a),l=o.node(i),u=0;if(u+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":r=-s.width/2;break;case"r":r=s.width/2}if(r&&(u+=n?r:-r),r=0,u+=(s.dummy?t:e)/2,u+=(l.dummy?t:e)/2,u+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":r=l.width/2;break;case"r":r=-l.width/2}return r&&(u+=n?r:-r),r=0,u}}(r.nodesep,r.edgesep,a);return t.forEach((t=>{let n;t.forEach((t=>{let a=o[t];if(i.setNode(a),n){var r=o[n],l=i.edge(r,a);i.setEdge(r,a,Math.max(s(e,t,n),l||0))}n=t}))})),i}(e,t,o,i),l=i?"borderLeft":"borderRight";function u(e,t){let n=s.nodes(),o=n.pop(),a={};for(;o;)a[o]?e(o):(a[o]=!0,n.push(o),n=n.concat(t(o))),o=n.pop()}return u((function(e){r[e]=s.inEdges(e).reduce(((e,t)=>Math.max(e,r[t.v]+s.edge(t))),0)}),s.predecessors.bind(s)),u((function(t){let n=s.outEdges(t).reduce(((e,t)=>Math.min(e,r[t.w]-s.edge(t))),Number.POSITIVE_INFINITY),o=e.node(t);n!==Number.POSITIVE_INFINITY&&o.borderType!==l&&(r[t]=Math.max(r[t],n))}),s.successors.bind(s)),Object.keys(a).forEach((e=>r[e]=r[o[e]])),r}function c(e,t){return Object.values(t).reduce(((t,n)=>{let o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(n).forEach((([t,n])=>{let i=function(e,t){return e.node(t).width}(e,t)/2;o=Math.max(n+i,o),a=Math.min(n-i,a)}));const i=o-a;return i<t[0]&&(t=[i,n]),t}),[Number.POSITIVE_INFINITY,null])[1]}function d(e,t){let n=Object.values(t),a=o.applyWithChunking(Math.min,n),i=o.applyWithChunking(Math.max,n);["u","d"].forEach((n=>{["l","r"].forEach((r=>{let s=n+r,l=e[s];if(l===t)return;let u=Object.values(l),c=a-o.applyWithChunking(Math.min,u);"l"!==r&&(c=i-o.applyWithChunking(Math.max,u)),c&&(e[s]=o.mapValues(l,(e=>e+c)))}))}))}function h(e,t){return o.mapValues(e.ul,((n,o)=>{if(t)return e[t.toLowerCase()][o];{let t=Object.values(e).map((e=>e[o])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}t.exports={positionX:function(e){let t,n=o.buildLayerMatrix(e),r=Object.assign(a(e,n),i(e,n)),s={};return["u","d"].forEach((a=>{t="u"===a?n:Object.values(n).reverse(),["l","r"].forEach((n=>{"r"===n&&(t=t.map((e=>Object.values(e).reverse())));let i=("u"===a?e.predecessors:e.successors).bind(e),c=l(0,t,r,i),d=u(e,t,c.root,c.align,"r"===n);"r"===n&&(d=o.mapValues(d,(e=>-e))),s[a+n]=d}))})),d(s,c(e,s)),h(s,e.graph().align)},findType1Conflicts:a,findType2Conflicts:i,addConflict:r,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:c,balance:h}})),uo=o(((e,t)=>{var n=Hn(),o=lo().positionX;t.exports=function(e){(function(e){let t=n.buildLayerMatrix(e),o=e.graph().ranksep,a=0;t.forEach((t=>{const n=t.reduce(((t,n)=>{const o=e.node(n).height;return t>o?t:o}),0);t.forEach((t=>e.node(t).y=a+n/2)),a+=n+o}))})(e=n.asNonCompoundGraph(e)),Object.entries(o(e)).forEach((([t,n])=>e.node(t).x=n))}})),co=o(((e,t)=>{var n=qn(),o=Wn(),a=Un(),i=Hn().normalizeRanks,r=Gn(),s=Hn().removeEmptyRanks,l=Kn(),u=Zn(),c=Qn(),d=so(),h=uo(),p=Hn(),v=Ln().Graph;t.exports=function(e,t){let N=t&&t.debugTiming?p.time:p.notime;N("layout",(()=>{let z=N("  buildLayoutGraph",(()=>function(e){let t=new v({multigraph:!0,compound:!0}),n=E(e.graph());return t.setGraph(Object.assign({},g,k(n,f),p.pick(n,_))),e.nodes().forEach((n=>{const o=k(E(e.node(n)),m);Object.keys(y).forEach((e=>{void 0===o[e]&&(o[e]=y[e])})),t.setNode(n,o),t.setParent(n,e.parent(n))})),e.edges().forEach((n=>{let o=E(e.edge(n));t.setEdge(n,Object.assign({},w,k(o,b),p.pick(o,x)))})),t}(e)));N("  runLayout",(()=>function(e,t,v){t("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((n=>{let o=e.edge(n);o.minlen*=2,"c"!==o.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?o.width+=o.labeloffset:o.height+=o.labeloffset)}))}(e))),t("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e))),t("    acyclic",(()=>n.run(e))),t("    nestingGraph.run",(()=>l.run(e))),t("    rank",(()=>a(p.asNonCompoundGraph(e)))),t("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.width&&n.height){let n=e.node(t.v),o={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};p.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e))),t("    removeEmptyRanks",(()=>s(e))),t("    nestingGraph.cleanup",(()=>l.cleanup(e))),t("    normalizeRanks",(()=>i(e))),t("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))})),e.graph().maxRank=t}(e))),t("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e))),t("    normalize.run",(()=>o.run(e))),t("    parentDummyChains",(()=>r(e))),t("    addBorderSegments",(()=>u(e))),t("    order",(()=>d(e,v))),t("    insertSelfEdges",(()=>function(e){p.buildLayerMatrix(e).forEach((t=>{var n=0;t.forEach(((t,o)=>{var a=e.node(t);a.order=o+n,(a.selfEdges||[]).forEach((t=>{p.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e))),t("    adjustCoordinateSystem",(()=>c.adjust(e))),t("    position",(()=>h(e))),t("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var n=e.node(t);if("selfedge"===n.dummy){var o=e.node(n.e.v),a=o.x+o.width/2,i=o.y,r=n.x-a,s=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:a+2*r/3,y:i-s},{x:a+5*r/6,y:i-s},{x:a+r,y:i},{x:a+5*r/6,y:i+s},{x:a+2*r/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}}))}(e))),t("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),a=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),r=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(r.x-i.x),n.height=Math.abs(a.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(e))),t("    normalize.undo",(()=>o.undo(e))),t("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e))),t("    undoCoordinateSystem",(()=>c.undo(e))),t("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,a=0,i=e.graph(),r=i.marginx||0,s=i.marginy||0;function l(e){let i=e.x,r=e.y,s=e.width,l=e.height;t=Math.min(t,i-s/2),n=Math.max(n,i+s/2),o=Math.min(o,r-l/2),a=Math.max(a,r+l/2)}e.nodes().forEach((t=>l(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);Object.hasOwn(n,"x")&&l(n)})),t-=r,o-=s,e.nodes().forEach((n=>{let a=e.node(n);a.x-=t,a.y-=o})),e.edges().forEach((n=>{let a=e.edge(n);a.points.forEach((e=>{e.x-=t,e.y-=o})),Object.hasOwn(a,"x")&&(a.x-=t),Object.hasOwn(a,"y")&&(a.y-=o)})),i.width=n-t+r,i.height=a-o+s}(e))),t("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let n,o,a=e.edge(t),i=e.node(t.v),r=e.node(t.w);a.points?(n=a.points[0],o=a.points[a.points.length-1]):(a.points=[],n=r,o=i),a.points.unshift(p.intersectRect(i,n)),a.points.push(p.intersectRect(r,o))}))}(e))),t("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);n.reversed&&n.points.reverse()}))}(e))),t("    acyclic.undo",(()=>n.undo(e)))}(z,N,t))),N("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((n=>{let o=e.node(n),a=t.node(n);o&&(o.x=a.x,o.y=a.y,o.rank=a.rank,t.children(n).length&&(o.width=a.width,o.height=a.height))})),e.edges().forEach((n=>{let o=e.edge(n),a=t.edge(n);o.points=a.points,Object.hasOwn(a,"x")&&(o.x=a.x,o.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,z)))}))};var f=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],m=["width","height"],y={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},x=["labelpos"];function k(e,t){return p.mapValues(p.pick(e,t),Number)}function E(e){var t={};return e&&Object.entries(e).forEach((([e,n])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=n})),t}})),ho=o(((e,t)=>{var n=Hn(),o=Ln().Graph;t.exports={debugOrdering:function(e){let t=n.buildLayerMatrix(e),a=new o({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach((t=>{a.setNode(t,{label:t}),a.setParent(t,"layer"+e.node(t).rank)})),e.edges().forEach((e=>a.setEdge(e.v,e.w,{},e.name))),t.forEach(((e,t)=>{let n="layer"+t;a.setNode(n,{rank:"same"}),e.reduce(((e,t)=>(a.setEdge(e,t,{style:"invis"}),t)))})),a}}})),po=o(((e,t)=>{t.exports="1.1.4"})),vo=n(o(((e,t)=>{t.exports={graphlib:Ln(),layout:co(),debug:ho(),util:{time:Hn().time,notime:Hn().notime},version:po()}}))(),1),fo=128,go=96,_o=128,mo=48,yo=128,bo=64,wo={value:()=>{}},kr.prototype=xr.prototype={constructor:kr,on:function(e,t){var n,o=this._,a=Er(e+"",o),i=-1,r=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<r;)if(n=(e=a[i]).type)o[n]=zr(o[n],e.name,t);else if(null==t)for(n in o)o[n]=zr(o[n],e.name,null);return this}for(;++i<r;)if((n=(e=a[i]).type)&&(n=Nr(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new kr(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,i=o.length;a<i;++a)o[a].value.apply(t,n)}},ko={svg:"http://www.w3.org/2000/svg",xhtml:xo="http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Eo=Array.prototype.find,No=Array.prototype.filter,Xr.prototype={constructor:Xr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Os.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},zo=[null],vl.prototype=fl.prototype={constructor:vl,select:$r,selectAll:Dr,selectChild:Vr,selectChildren:qr,filter:Wr,data:Qr,enter:Yr,exit:es,join:ts,merge:ns,selection:gl,order:os,sort:as,call:rs,nodes:ss,node:ls,size:us,empty:cs,each:ds,attr:ms,style:ks,property:Ts,classed:Ds,text:Vs,html:Fs,raise:Xs,lower:Gs,append:Ks,insert:Qs,remove:el,clone:ol,datum:al,on:ll,dispatch:hl,[Symbol.iterator]:pl},Co={capture:!0,passive:!1},Mo=1/(To=.7),Io="\\s*([+-]?\\d+)\\s*",Oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$o=/^#([0-9a-f]{3,8})$/,Ao=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),Bo=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),jo=new RegExp(`^rgba\\(${Io},${Io},${Io},${Oo}\\)$`),Do=new RegExp(`^rgba\\(${So},${So},${So},${Oo}\\)$`),Ro=new RegExp(`^hsl\\(${Oo},${So},${So}\\)$`),Lo=new RegExp(`^hsla\\(${Oo},${So},${So},${Oo}\\)$`),Po={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xl(El,Ml,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nl,formatHex:Nl,formatHex8:zl,formatHsl:Cl,formatRgb:Tl,toString:Tl}),xl(Al,$l,kl(El,{brighter(e){return e=null==e?Mo:Math.pow(Mo,e),new Al(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?To:Math.pow(To,e),new Al(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Al(Ll(this.r),Ll(this.g),Ll(this.b),Rl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bl,formatHex:Bl,formatHex8:jl,formatRgb:Dl,toString:Dl})),xl(Wl,ql,kl(El,{brighter(e){return e=null==e?Mo:Math.pow(Mo,e),new Wl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?To:Math.pow(To,e),new Wl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new Al(Xl(e>=240?e-240:e+120,a,o),Xl(e,a,o),Xl(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Wl(Fl(this.h),Yl(this.s),Yl(this.l),Rl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rl(this.opacity);return`${1===e?"hsl(":"hsla("}${Fl(this.h)}, ${100*Yl(this.s)}%, ${100*Yl(this.l)}%${1===e?")":`, ${e})`}`}})),Vo=e=>()=>e,Ho=function e(t){var n=Ul(t);function o(e,t){var o=n((e=$l(e)).r,(t=$l(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),r=Gl(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=a(t),e.b=i(t),e.opacity=r(t),e+""}}return o.gamma=e,o}(1),qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wo=new RegExp(qo.source,"g"),Fo=180/Math.PI,Yo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Uo=tu(Jl,"px, ","px)","deg)"),Go=tu(eu,", ",")",")"),Ko=function e(t,n,o){function a(e,a){var i,r,s=e[0],l=e[1],u=e[2],c=a[0],d=a[1],h=a[2],p=c-s,v=d-l,f=p*p+v*v;if(f<1e-12)r=Math.log(h/u)/t,i=function(e){return[s+e*p,l+e*v,u*Math.exp(t*e*r)]};else{var g=Math.sqrt(f),_=(h*h-u*u+o*f)/(2*u*n*g),m=(h*h-u*u-o*f)/(2*h*n*g),y=Math.log(Math.sqrt(_*_+1)-_);r=(Math.log(Math.sqrt(m*m+1)-m)-y)/t,i=function(e){var o,a=e*r,i=nu(y),c=u/(n*g)*(i*(o=t*a+y,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[s+c*p,l+c*v,u*i/nu(t*a+y)]}}return i.duration=1e3*r*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},a}(Math.SQRT2,2,4),Zo=0,Qo=0,Jo=0,ea=1e3,oa=0,aa=0,ia=0,ra="object"==typeof performance&&performance.now?performance:Date,sa="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},iu.prototype=ru.prototype={constructor:iu,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ou():+n)+(null==t?0:+t),this._next||na===this||(na?na._next=this:ta=this,na=this),this._call=e,this._time=n,uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,uu())}},la=xr("start","end","cancel","interrupt"),ua=[],ca=0,da=1,ha=2,pa=3,va=4,fa=5,ga=6,_a=fl.prototype.constructor,ma=0,ya=fl.prototype,lc.prototype={constructor:lc,select:Uu,selectAll:Gu,selectChild:ya.selectChild,selectChildren:ya.selectChildren,filter:qu,merge:Wu,selection:Ku,transition:rc,call:ya.call,nodes:ya.nodes,node:ya.node,size:ya.size,empty:ya.empty,each:ya.each,on:Yu,attr:Tu,attrTween:$u,style:Qu,styleTween:tc,text:nc,textTween:ic,remove:Xu,tween:yu,delay:ju,duration:Lu,ease:Vu,easeVarying:Hu,end:sc,[Symbol.iterator]:ya[Symbol.iterator]},ba={time:null,delay:0,duration:250,ease:cc},fl.prototype.interrupt=gu,fl.prototype.transition=hc,wa=e=>()=>e,vc.prototype={constructor:vc,scale:function(e){return 1===e?this:new vc(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new vc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},xa=new vc(1,0,0),vc.prototype,ka=Symbol("MiniMapSlots"),Ea=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],Na=f({name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=X(ka),a=P(),i=y((()=>a.style??{}));function l(e){t("click",e)}function c(e){t("dblclick",e)}function d(e){t("mouseenter",e)}function h(e){t("mousemove",e)}function p(e){t("mouseleave",e)}return(e,t)=>e.hidden||0===e.dimensions.width||0===e.dimensions.height?s("",!0):(I(),r(x,{key:0},[u(o)[`node-${n.type}`]?(I(),_(M(u(o)[`node-${n.type}`]),Y(b({key:0},{...n,...e.$attrs})),null,16)):(I(),r("rect",b({key:1,id:e.id},e.$attrs,{class:["vue-flow__minimap-node",{selected:e.selected,dragging:e.dragging}],x:e.position.x,y:e.position.y,rx:e.borderRadius,ry:e.borderRadius,width:e.dimensions.width,height:e.dimensions.height,fill:e.color||i.value.background||i.value.backgroundColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth,"shape-rendering":e.shapeRendering,onClick:l,onDblclick:c,onMouseenter:d,onMousemove:h,onMouseleave:p}),null,16,Ea))],64))}}),za=["width","height","viewBox","aria-labelledby"],Ca=["id"],Ta=["d","fill","stroke","stroke-width"],Ma=f({name:"MiniMap",compatConfig:{MODE:3},props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=L(),o=P(),{id:l,edges:c,viewport:h,translateExtent:p,dimensions:v,emits:f,d3Selection:g,d3Zoom:m,getNodesInitialized:b}=Ye(),w=d();D(ka,n);const k=y((()=>{var t;return e.width??(null==(t=o.style)?void 0:t.width)??200})),E=y((()=>{var t;return e.height??(null==(t=o.style)?void 0:t.height)??150})),N="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision",T=a((()=>"string"==typeof e.nodeColor?()=>e.nodeColor:e.nodeColor)),M=a((()=>"string"==typeof e.nodeStrokeColor?()=>e.nodeStrokeColor:e.nodeStrokeColor)),O=a((()=>"string"==typeof e.nodeClassName?()=>e.nodeClassName:"function"==typeof e.nodeClassName?e.nodeClassName:()=>"")),S=a((()=>We(b.value.filter((e=>!e.hidden))))),A=a((()=>({x:-h.value.x/h.value.zoom,y:-h.value.y/h.value.zoom,width:v.value.width/h.value.zoom,height:v.value.height/h.value.zoom}))),B=a((()=>b.value&&b.value.length?ze(S.value,A.value):A.value)),j=a((()=>{const e=B.value.width/k.value,t=B.value.height/E.value;return Math.max(e,t)})),R=a((()=>{const t=j.value*k.value,n=j.value*E.value,o=e.offsetScale*j.value;return{offset:o,x:B.value.x-(t-B.value.width)/2-o,y:B.value.y-(n-B.value.height)/2-o,width:t+2*o,height:n+2*o}})),W=a((()=>R.value.x&&R.value.y?`\n    M${R.value.x-R.value.offset},${R.value.y-R.value.offset}\n    h${R.value.width+2*R.value.offset}\n    v${R.value.height+2*R.value.offset}\n    h${-R.value.width-2*R.value.offset}z\n    M${A.value.x+e.maskBorderRadius},${A.value.y}\n    h${A.value.width-2*e.maskBorderRadius}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}\n    v${A.value.height-2*e.maskBorderRadius}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}\n    h${-(A.value.width-2*e.maskBorderRadius)}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}\n    v${-(A.value.height-2*e.maskBorderRadius)}\n    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`:""));function F(e){const[n,o]=ml(e);t("click",{event:e,position:{x:n,y:o}})}return H((t=>{if(w.value){const n=_l(w.value),o=t=>{if("wheel"!==t.sourceEvent.type||!g.value||!m.value)return;const n=t.sourceEvent.ctrlKey&&Ke()?10:1,o=-t.sourceEvent.deltaY*(1===t.sourceEvent.deltaMode?.05:t.sourceEvent.deltaMode?1:.002)*e.zoomStep,a=h.value.zoom*2**(o*n);m.value.scaleTo(g.value,a)},a=t=>{if("mousemove"!==t.sourceEvent.type||!g.value||!m.value)return;const n=j.value*Math.max(1,h.value.zoom)*(e.inversePan?-1:1),o={x:h.value.x-t.sourceEvent.movementX*n,y:h.value.y-t.sourceEvent.movementY*n},a=[[0,0],[v.value.width,v.value.height]],i=xa.translate(o.x,o.y).scale(h.value.zoom),r=m.value.constrain()(i,a,p.value);m.value.transform(g.value,r)},i=function(){var e,t,n,o=_c,a=mc,i=xc,r=bc,s=wc,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ko,h=xr("start","zoom","end"),p=500,v=0,f=10;function g(e){e.property("__zoom",yc).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",N).filter(s).on("touchstart.zoom",z).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new vc(t,e.x,e.y)}function m(e,t,n){var o=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return o===e.x&&a===e.y?e:new vc(e.k,o,a)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",(function(){w(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,r=w(e,i).event(o),s=a.apply(e,i),l=null==n?y(s):"function"==typeof n?n.apply(e,i):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,i):t,p=d(c.invert(l).concat(u/c.k),h.invert(l).concat(u/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=u/t[2];e=new vc(n,l[0]-t[0]*n,l[1]-t[1]*n)}r.zoom(null,e)}}))}function w(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=a.apply(e,t),this.taps=0}function k(e,...t){if(o.apply(this,arguments)){var n=w(this,t).event(e),a=this.__zoom,s=Math.max(l[0],Math.min(l[1],a.k*Math.pow(2,r.apply(this,arguments)))),c=ml(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=a.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(a.k===s)return;n.mouse=[c,a.invert(c)],fu(this),n.start()}gc(e),n.wheel=setTimeout(d,150),n.zoom("mouse",i(m(_(a,s),n.mouse[0],n.mouse[1]),n.extent,u))}function d(){n.wheel=null,n.end()}}function E(e,...t){if(!n&&o.apply(this,arguments)){var a=e.currentTarget,r=w(this,t,!0).event(e),s=_l(e.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",p,!0),l=ml(e,a),c=e.clientX,d=e.clientY;bl(e.view),fc(e),r.mouse=[l,this.__zoom.invert(l)],fu(this),r.start()}function h(e){if(gc(e),!r.moved){var t=e.clientX-c,n=e.clientY-d;r.moved=t*t+n*n>v}r.event(e).zoom("mouse",i(m(r.that.__zoom,r.mouse[0]=ml(e,a),r.mouse[1]),r.extent,u))}function p(e){s.on("mousemove.zoom mouseup.zoom",null),wl(e.view,r.moved),gc(e),r.event(e).end()}}function N(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,r=ml(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(r),l=n.k*(e.shiftKey?.5:2),d=i(m(_(n,l),r,s),a.apply(this,t),u);gc(e),c>0?_l(this).transition().duration(c).call(b,d,r,e):_l(this).call(g.transform,d,r,e)}}function z(n,...a){if(o.apply(this,arguments)){var i,r,s,l,u=n.touches,c=u.length,d=w(this,a,n.changedTouches.length===c).event(n);for(fc(n),r=0;r<c;++r)l=[l=ml(s=u[r],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),p)),fu(this),d.start())}}function C(e,...t){if(this.__zooming){var n,o,a,r,s=w(this,t).event(e),l=e.changedTouches,c=l.length;for(gc(e),n=0;n<c;++n)a=ml(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=a:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=a);if(o=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],p=s.touch1[0],v=s.touch1[1],f=(f=p[0]-d[0])*f+(f=p[1]-d[1])*f,g=(g=v[0]-h[0])*g+(g=v[1]-h[1])*g;o=_(o,Math.sqrt(f/g)),a=[(d[0]+p[0])/2,(d[1]+p[1])/2],r=[(h[0]+v[0])/2,(h[1]+v[1])/2]}else{if(!s.touch0)return;a=s.touch0[0],r=s.touch0[1]}s.zoom("touch",i(m(o,a,r),s.extent,u))}}function T(e,...o){if(this.__zooming){var a,i,r=w(this,o).event(e),s=e.changedTouches,l=s.length;for(fc(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),a=0;a<l;++a)i=s[a],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(i=ml(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<f)){var u=_l(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(e,t,n,o){var a=e.selection?e.selection():e;a.property("__zoom",yc),e!==a?b(e,t,n,o):a.interrupt().each((function(){w(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,o){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},g.scaleTo=function(e,t,n,o){g.transform(e,(function(){var e=a.apply(this,arguments),o=this.__zoom,r=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(r),l="function"==typeof t?t.apply(this,arguments):t;return i(m(_(o,l),r,s),e,u)}),n,o)},g.translateBy=function(e,t,n,o){g.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),u)}),null,o)},g.translateTo=function(e,t,n,o,r){g.transform(e,(function(){var e=a.apply(this,arguments),r=this.__zoom,s=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return i(xa.translate(s[0],s[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)}),o,r)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=_l(this.that).datum();h.call(e,this.that,new pc(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(r="function"==typeof e?e:wa(+e),g):r},g.filter=function(e){return arguments.length?(o="function"==typeof e?e:wa(!!e),g):o},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:wa(!!e),g):s},g.extent=function(e){return arguments.length?(a="function"==typeof e?e:wa([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):a},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(c=+e,g):c},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,g):Math.sqrt(v)},g.tapDistance=function(e){return arguments.length?(f=+e,g):f},g}().wheelDelta((t=>Le(t)*(e.zoomStep/10))).on("zoom",e.pannable?a:()=>{}).on("zoom.wheel",e.zoomable?o:()=>{});n.call(i),t((()=>{n.on("zoom",null)}))}}),{flush:"post"}),(e,n)=>(I(),_(u(be),{position:e.position,class:V(["vue-flow__minimap",{pannable:e.pannable,zoomable:e.zoomable}])},{default:C((()=>[(I(),r("svg",{ref_key:"el",ref:w,width:k.value,height:E.value,viewBox:[R.value.x,R.value.y,R.value.width,R.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${u(l)}`,onClick:F},[e.ariaLabel?(I(),r("title",{key:0,id:`vue-flow__minimap-${u(l)}`},i(e.ariaLabel),9,Ca)):s("",!0),(I(!0),r(x,null,$(u(b),(n=>(I(),_(Na,{id:n.id,key:n.id,f:"",position:n.computedPosition,dimensions:n.dimensions,selected:n.selected,dragging:n.dragging,style:z(n.style),class:V(O.value(n)),color:T.value(n),"border-radius":e.nodeBorderRadius,"stroke-color":M.value(n),"stroke-width":e.nodeStrokeWidth,"shape-rendering":u(N),type:n.type,hidden:n.hidden,onClick:e=>function(e,n){const o={event:e,node:n,connectedEdges:ve([n],c.value)};f.miniMapNodeClick(o),t("nodeClick",o)}(e,n),onDblclick:e=>function(e,n){const o={event:e,node:n,connectedEdges:ve([n],c.value)};f.miniMapNodeDoubleClick(o),t("nodeDblclick",o)}(e,n),onMouseenter:e=>function(e,n){const o={event:e,node:n,connectedEdges:ve([n],c.value)};f.miniMapNodeMouseEnter(o),t("nodeMouseenter",o)}(e,n),onMousemove:e=>function(e,n){const o={event:e,node:n,connectedEdges:ve([n],c.value)};f.miniMapNodeMouseMove(o),t("nodeMousemove",o)}(e,n),onMouseleave:e=>function(e,n){const o={event:e,node:n,connectedEdges:ve([n],c.value)};f.miniMapNodeMouseLeave(o),t("nodeMouseleave",o)}(e,n)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"])))),128)),q("path",{class:"vue-flow__minimap-mask",d:W.value,fill:e.maskColor,stroke:e.maskStrokeColor,"stroke-width":e.maskStrokeWidth,"fill-rule":"evenodd"},null,8,Ta)],8,za))])),_:1},8,["position","class"]))}}),Ia=["id"],Oa=f({__name:"CanvasArrowHeadMarker",props:{id:{}},setup:e=>(t,n)=>(I(),r("svg",null,[q("defs",null,[q("marker",{id:e.id,viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:"12.5",markerHeight:"12.5",markerUnits:"strokeWidth",orient:"auto-start-reverse"},[...n[0]||(n[0]=[q("polyline",{"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4","stroke-width":"2",stroke:"context-stroke",fill:"context-stroke"},null,-1)])],8,Ia)])]))}),Sa=130,$a=40,Aa=16,Ba=(e,t)=>e-20>t,ja=pe(f({__name:"CanvasConnectionLine",props:{sourceX:{},sourceY:{},sourcePosition:{},targetX:{},targetY:{},targetPosition:{},sourceNode:{},sourceHandle:{},targetNode:{},targetHandle:{},markerStart:{},markerEnd:{},connectionStatus:{}},setup(e){const t=e,n=T(),{connectingHandle:o}=Ec(),i=a((()=>Bt(o.value?.handleId).type)),s=a((()=>({[n.edge]:!0,[n.visible]:p.value}))),l=a((()=>({...i.value===Nt.Main?{}:{strokeDasharray:"5,6"},strokeWidth:2,stroke:"var(--color--foreground--shade-2)"}))),c=a((()=>kc(t,{connectionType:i.value}))),h=a((()=>c.value.segments)),p=d(!1);return w((()=>{setTimeout((()=>{p.value=!0}),300)})),(t,n)=>(I(!0),r(x,null,$(h.value,(t=>(I(),_(u(ke),{key:t[0],class:V(s.value),style:z(l.value),path:t[0],"marker-end":e.markerEnd},null,8,["class","style","path","marker-end"])))),128))}}),[["__cssModules",{$style:{edge:"_edge_qsnhv_125",visible:"_visible_qsnhv_131"}}]]),Da={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},Ra=pe({},[["render",Nc]]),La={type:"button",class:"vue-flow__controls-button"},Pa=((e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n})({name:"ControlButton",compatConfig:{MODE:3}},[["render",zc]]),Va={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ha=[q("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1)],qa={render:Cc},Wa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Fa=[q("path",{d:"M0 0h32v4.2H0z"},null,-1)],Ya={render:Tc},Xa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ua=[q("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1)],Ga={render:Mc},Ka={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Za=[q("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1)],Qa={render:Ic},Ja={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ei=[q("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1)],ti={render:Oc},ni=f({name:"Controls",compatConfig:{MODE:3},props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Te.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:a,setInteractive:i,zoomIn:l,zoomOut:c,fitView:d,viewport:h,minZoom:p,maxZoom:f}=Ye(),g=y((()=>n.value||o.value||a.value)),m=y((()=>h.value.zoom<=p.value)),b=y((()=>h.value.zoom>=f.value));function w(){l(),t("zoomIn")}function k(){c(),t("zoomOut")}function N(){d(e.fitViewParams),t("fitView")}function z(){i(!g.value),t("interactionChange",!g.value)}return(e,t)=>(I(),_(u(be),{class:"vue-flow__controls",position:e.position},{default:C((()=>[E(e.$slots,"top"),e.showZoom?(I(),r(x,{key:0},[E(e.$slots,"control-zoom-in",{},(()=>[v(Pa,{class:"vue-flow__controls-zoomin",disabled:b.value,onClick:w},{default:C((()=>[E(e.$slots,"icon-zoom-in",{},(()=>[(I(),_(M(u(qa))))]))])),_:3},8,["disabled"])])),E(e.$slots,"control-zoom-out",{},(()=>[v(Pa,{class:"vue-flow__controls-zoomout",disabled:m.value,onClick:k},{default:C((()=>[E(e.$slots,"icon-zoom-out",{},(()=>[(I(),_(M(u(Ya))))]))])),_:3},8,["disabled"])]))],64)):s("",!0),e.showFitView?E(e.$slots,"control-fit-view",{key:1},(()=>[v(Pa,{class:"vue-flow__controls-fitview",onClick:N},{default:C((()=>[E(e.$slots,"icon-fit-view",{},(()=>[(I(),_(M(u(Ga))))]))])),_:3})])):s("",!0),e.showInteractive?E(e.$slots,"control-interactive",{key:2},(()=>[e.showInteractive?(I(),_(Pa,{key:0,class:"vue-flow__controls-interactive",onClick:z},{default:C((()=>[g.value?E(e.$slots,"icon-unlock",{key:0},(()=>[(I(),_(M(u(ti))))])):s("",!0),g.value?s("",!0):E(e.$slots,"icon-lock",{key:1},(()=>[(I(),_(M(u(Qa))))]))])),_:3})):s("",!0)])):s("",!0),E(e.$slots,"default")])),_:3},8,["position"]))}}),oi=f({__name:"CanvasControlButtons",props:{zoom:{default:1},readOnly:{type:Boolean,default:!1}},emits:["reset-zoom","zoom-in","zoom-out","zoom-to-fit","tidy-up","toggle-zoom-mode"],setup(e,{emit:t}){const n=e,o=t,i=J(),r=qt(),l=a((()=>r.isActive(n.zoom))),c=a((()=>r.isZoomedViewEnabled)),d=a((()=>!c.value&&1!==n.zoom));function h(){o("reset-zoom")}function p(){o("zoom-in")}function f(){o("zoom-out")}function g(){o("zoom-to-fit")}function m(){o("tidy-up")}return(t,n)=>(I(),_(u(ni),{"show-zoom":!1,"show-fit-view":!1},{default:C((()=>[v(Qt,{label:u(i).baseText("nodeView.zoomToFit"),shortcut:{keys:["1"]}},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"maximize","data-test-id":"zoom-to-fit",onClick:g})])),_:1},8,["label"]),v(Qt,{label:u(i).baseText("nodeView.zoomIn"),shortcut:{keys:["+"]}},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"zoom-in","data-test-id":"zoom-in-button",onClick:p})])),_:1},8,["label"]),v(Qt,{label:u(i).baseText("nodeView.zoomOut"),shortcut:{keys:["-"]}},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"zoom-out","data-test-id":"zoom-out-button",onClick:f})])),_:1},8,["label"]),c.value?(I(),_(Qt,{key:0,label:u(i).baseText(l.value?"nodeView.leaveZoomMode":"nodeView.enterZoomMode"),shortcut:{keys:["Z"]}},{default:C((()=>[v(u(oe),{variant:"subtle",iconOnly:"",size:"large",class:V(t.$style.iconButton),icon:l.value?"undo-2":"crosshair",onClick:n[0]||(n[0]=e=>o("toggle-zoom-mode"))},null,8,["class","icon"])])),_:1},8,["label"])):s("",!0),d.value?(I(),_(Qt,{key:1,label:u(i).baseText("nodeView.resetZoom"),shortcut:{keys:["0"]}},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"undo-2","data-test-id":"reset-zoom-button",onClick:h})])),_:1},8,["label"])):s("",!0),e.readOnly?s("",!0):(I(),_(Qt,{key:2,label:u(i).baseText("nodeView.tidyUp"),shortcut:{shiftKey:!0,altKey:!0,keys:["T"]}},{default:C((()=>[v(u(ne),{variant:"subtle",iconOnly:"",size:"large","data-test-id":"tidy-up-button",class:V(t.$style.iconButton),onClick:m},{default:C((()=>[v(Ra)])),_:1},8,["class"])])),_:1},8,["label"])),l.value?(I(),_(u(ae),{key:3,placement:"top",content:u(i).baseText("nodeView.expandAllNodes")},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"maximize-2",onClick:u(r).expandAllNodes},null,8,["onClick"])])),_:1},8,["content"])):s("",!0),l.value?(I(),_(u(ae),{key:4,placement:"top",content:u(i).baseText("nodeView.collapseAllNodes")},{default:C((()=>[v(u(oe),{variant:"subtle",size:"large",icon:"minimize-2",onClick:u(r).collapseAllNodes},null,8,["onClick"])])),_:1},8,["content"])):s("",!0)])),_:1}))}}),ai=pe(oi,[["__cssModules",{$style:{iconButton:"_iconButton_yqho8_125"}}]]),ii=pe(f({__name:"CanvasEdgeTooltip",props:{content:{}},setup(e){const t=T();return(n,o)=>(I(),r("div",{class:V(u(t).tooltipContainer)},[v(u(ae),{content:e.content,placement:"top",teleported:!1,offset:8,"content-class":u(t).content},{default:C((()=>[E(n.$slots,"default")])),_:3},8,["content","content-class"])],2))}}),[["__cssModules",{$style:{tooltipContainer:"_tooltipContainer_yuv67_125",content:"_content_yuv67_129"}}]]),ri=pe(f({__name:"CanvasEdgeToolbar",props:{type:{},targetNode:{},sourceNode:{}},emits:["add","delete"],setup(e,{emit:t}){const n=t,o=e,i=T(),l=J(),c=a((()=>({[i.canvasEdgeToolbar]:!0}))),d=a((()=>{const e=o.type===Nt.Main,t=o.type===Nt.AiTool&&("@n8n/n8n-nodes-langchain.agent"===o.targetNode.data.type||"@n8n/n8n-nodes-langchain.agentTool"===o.targetNode.data.type)&&!Tt(o.sourceNode.data.type);return e||t}));function h(){n("add")}function p(){n("delete")}return(t,n)=>(I(),r("div",{class:V(c.value),"data-test-id":"canvas-edge-toolbar"},[d.value?(I(),_(ii,{key:0,content:e.type===u(Nt).AiTool?u(l).baseText("node.add-human-review-step"):u(l).baseText("node.add")},{default:C((()=>[v(u(oe),{variant:"subtle",class:"canvas-edge-toolbar-button","data-test-id":"add-connection-button",size:"small","icon-size":"medium",icon:"plus",onClick:h})])),_:1},8,["content"])):s("",!0),v(ii,{content:u(l).baseText("node.delete")},{default:C((()=>[v(u(oe),{variant:"subtle","data-test-id":"delete-connection-button",class:"canvas-edge-toolbar-button",size:"small","icon-size":"medium",icon:"trash-2",onClick:p})])),_:1},8,["content"])],2))}}),[["__cssModules",{$style:{canvasEdgeToolbar:"_canvasEdgeToolbar_1asvk_125"}}]]),si=["data-source-node-name","data-target-node-name"],li=["data-source-node-name","data-target-node-name","data-edge-status"],ui=f({__name:"CanvasEdge",props:{id:{},sourceNode:{},targetNode:{},source:{},target:{},type:{},label:{type:[String,Object,Function]},style:{},selected:{type:Boolean},sourcePosition:{},targetPosition:{},sourceHandleId:{},targetHandleId:{},animated:{type:Boolean},updatable:{type:Boolean},markerStart:{},markerEnd:{},curvature:{},interactionWidth:{},data:{},events:{},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{},sourceX:{},sourceY:{},targetX:{},targetY:{},readOnly:{type:Boolean},hovered:{type:Boolean},bringToFront:{type:Boolean}},emits:["add","delete","update:label:hovered"],setup(e,{emit:t}){const n=t,o=e,s=y(o,"data"),l=T(),{viewport:h}=Ec(),{calculateEdgeLightness:p}=Sc(h),f=a((()=>Re(o.data.source.type)?o.data.source.type:Nt.Main)),g=d(o.hovered),m=d(null);k((()=>o.hovered),(e=>{e?(m.value&&clearTimeout(m.value),g.value=!0):m.value=setTimeout((()=>{g.value=!1}),600)}),{immediate:!0});const w=a((()=>g.value&&!o.readOnly)),N=a((()=>s.value.source.type===Nt.Main)),M=a((()=>o.data.status)),O=a((()=>({...o.style,...N.value?{}:{strokeDasharray:"5,6"}}))),S=a((()=>({[l.edge]:!0,hovered:g.value,"bring-to-front":o.bringToFront}))),A=a((()=>({transform:`translate(-50%, -50%) translate(${R.value[0]}px, ${R.value[1]}px)`,...g.value&&o.bringToFront?{zIndex:1}:{}}))),B=a((()=>({[l.edgeLabelWrapper]:!0,"vue-flow__edge-label":!0,selected:o.selected,[l.straight]:j.value.isConnectorStraight}))),j=a((()=>kc(o,{connectionType:f.value}))),D=a((()=>j.value.segments)),R=a((()=>j.value.labelPosition)),L=a((()=>({source:o.source,target:o.target,sourceHandle:o.sourceHandleId,targetHandle:o.targetHandleId}))),P=a((()=>"success"===M.value?"var(--color--success)":"pinned"===M.value?"var(--color--secondary)":void 0)),H=a((()=>"success"===M.value||"pinned"===M.value)),W=p(a((()=>!H.value&&g.value))),F=a((()=>{const e={"--canvas-edge--color--lightness--light":W.value.light,"--canvas-edge--color--lightness--dark":W.value.dark};return P.value&&(e["--canvas-edge--color"]=P.value),e}));function X(){n("add",L.value)}function U(){n("delete",L.value)}function G(){n("update:label:hovered",!0)}function K(){n("update:label:hovered",!1)}return(t,n)=>(I(),r(x,null,[q("g",b({"data-test-id":"edge","data-source-node-name":s.value.source?.node,"data-target-node-name":s.value.target?.node,style:F.value},t.$attrs),[E(t.$slots,"highlight",Y(c({segments:D.value}))),(I(!0),r(x,null,$(D.value,((t,n)=>(I(),_(u(ke),{id:`${e.id}-${n}`,key:t[0],class:V(S.value),style:z(O.value),path:t[0],"marker-end":N.value?e.markerEnd:void 0,"interaction-width":40},null,8,["id","class","style","path","marker-end"])))),128))],16,si),v(u(Qe),null,{default:C((()=>[q("div",{"data-test-id":"edge-label","data-source-node-name":s.value.source?.node,"data-target-node-name":s.value.target?.node,"data-edge-status":M.value,style:z(A.value),class:V(B.value),onMouseenter:G,onMouseleave:K},[w.value?(I(),_(ri,{key:0,type:f.value,"target-node":e.targetNode,"source-node":e.sourceNode,onAdd:X,onDelete:U},null,8,["type","target-node","source-node"])):(I(),r("div",{key:1,class:V(u(l).edgeLabel)},i(e.label),3))],46,li)])),_:1})],64))}}),e("o",ci=pe(ui,[["__cssModules",{$style:{edge:"_edge_1yu3o_125",edgeLabelWrapper:"_edgeLabelWrapper_1yu3o_133",straight:"_straight_1yu3o_139",edgeLabel:"_edgeLabel_1yu3o_133"}}]])),di={key:4},hi={key:6},pi=f({__name:"CanvasNodeStatusIcons",props:{size:{default:"large"},spinnerScrim:{type:Boolean,default:!1},spinnerLayout:{default:"absolute"}},setup(e){const t=xe(),n=J(),o=T(),{hasPinnedData:l,executionErrors:c,validationErrors:d,hasExecutionErrors:h,hasValidationErrors:p,executionStatus:f,hasRunData:g,runDataIterations:_,isDisabled:m,render:y,isNotInstalledCommunityNode:b}=$c(),w=ee(),x=a((()=>!1)),k=a((()=>w.name===Et.DEMO)),E=a((()=>y.value.type===qe.Default?y.value.options.dirtiness:void 0)),N=a((()=>[o.status,e.spinnerScrim?o.spinnerScrim:"","absolute"===e.spinnerLayout?o.absoluteSpinner:""])),z=a((()=>{const e=c.value.reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{});return Object.entries(e).map((([e,t])=>t>1?`${e} (x${t})`:e))}));return(a,c)=>u(b)&&!k.value?(I(),r("div",{key:0,class:V([...N.value,u(o).issues]),"data-test-id":"node-not-installed"},[v(u(ae),{"show-after":500,placement:"bottom"},{content:C((()=>[A(i(u(n).baseText("node.install-to-use")),1)])),default:C((()=>[v(u(re),{icon:"hard-drive-download",size:e.size},null,8,["size"])])),_:1})],2)):u(m)?(I(),r("div",{key:1,class:V([...N.value,u(o).disabled])},[v(u(re),{icon:"power",size:e.size},null,8,["size"])],2)):u(h)&&!x.value?(I(),r("div",{key:2,class:V([...N.value,u(o).issues]),"data-test-id":"node-issues"},[v(u(ae),{"show-after":500,placement:"bottom"},{content:C((()=>[v(ut,{title:`${u(n).baseText("node.issues")}:`,items:z.value},null,8,["title","items"])])),default:C((()=>[v(u(re),{icon:"node-execution-error",size:e.size},null,8,["size"])])),_:1})],2)):u(p)&&!x.value?(I(),r("div",{key:3,class:V([...N.value,u(o).issues]),"data-test-id":"node-issues"},[v(u(ae),{"show-after":500,placement:"bottom"},{content:C((()=>[v(ut,{title:`${u(n).baseText("node.issues")}:`,items:u(d)},null,8,["title","items"])])),default:C((()=>[v(u(re),{icon:"node-validation-error",size:e.size},null,8,["size"])])),_:1})],2)):"unknown"===u(f)?(I(),r("div",di)):u(l)&&!u(t).isProductionExecutionPreview.value?(I(),r("div",{key:5,"data-test-id":"canvas-node-status-pinned",class:V([...N.value,u(o).pinnedData])},[v(u(re),{icon:"node-pin",size:e.size},null,8,["size"])],2)):void 0!==E.value?(I(),r("div",hi,[v(u(ae),{"show-after":500,placement:"bottom"},{content:C((()=>[A(i(u(n).baseText(E.value===u(it).PARAMETERS_UPDATED?"node.dirty":"node.subjectToChange")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-warning",class:V([...N.value,u(o).warning])},[v(u(re),{icon:"node-dirty",size:e.size},null,8,["size"]),u(_)>1?(I(),r("span",{key:0,class:V(u(o).count)},i(u(_)),3)):s("",!0)],2)])),_:1})])):u(g)&&"success"===u(f)?(I(),r("div",{key:7,"data-test-id":"canvas-node-status-success",class:V([...N.value,u(o).runData])},[v(u(re),{icon:"node-success",size:e.size},null,8,["size"]),u(_)>1?(I(),r("span",{key:0,class:V(u(o).count)},i(u(_)),3)):s("",!0)],2)):s("",!0)}}),vi=pe(pi,[["__cssModules",{$style:{status:"_status_v9j1u_125",runData:"_runData_v9j1u_132",waiting:"_waiting_v9j1u_136",pinnedData:"_pinnedData_v9j1u_140",running:"_running_v9j1u_144",absoluteSpinner:"_absoluteSpinner_v9j1u_147",spinnerScrim:"_spinnerScrim_v9j1u_160",issues:"_issues_v9j1u_166",count:"_count_v9j1u_171",warning:"_warning_v9j1u_175",disabled:"_disabled_v9j1u_179"}}]]),fi=["title"],gi=["onClick"],_i=["title"],mi=f({__name:"CanvasNodeStickyColorSelector",props:{visible:{type:Boolean},visibleModifiers:{}},emits:m(["update"],["update:visible"]),setup(e,{emit:t}){const n=t,o=J(),{render:i,eventBus:s}=$c(),l=a((()=>i.value.options)),c=d(null),p=a((()=>Array.from({length:7}).map(((e,t)=>t+1)))),f=O(e,"visible"),g=d(null);function _(){f.value=!1}function m(){f.value=!0}function y(){g.value?.click()}function b(e){const t=e.target;n("update",t.value.toUpperCase()),_()}function k(){c.value&&(clearTimeout(c.value),c.value=null)}function E(){c.value=setTimeout((()=>{_()}),1e3)}return w((()=>{s.value?.on("update:sticky:color",m)})),h((()=>{s.value?.off("update:sticky:color",m)})),(e,t)=>(I(),r("div",null,[v(u(se),{open:f.value,"onUpdate:open":t[0]||(t[0]=e=>f.value=e),side:"top",width:"240px","content-class":e.$style.popover,"enable-scrolling":!1,onBeforeEnter:k,onAfterLeave:E},{trigger:C((()=>[q("div",{class:V(e.$style.option),"data-test-id":"change-sticky-color",title:u(o).baseText("node.changeColor")},[v(u(re),{size:"small",icon:"palette"})],10,fi)])),content:C((()=>[q("div",{class:V(e.$style.content)},[(I(!0),r(x,null,$(p.value,(t=>(I(),r("div",{key:t,"data-test-id":"color",class:V([e.$style.color,e.$style[`sticky-color-${t}`],l.value.color===t?e.$style.selected:""]),onClick:e=>(n("update",t),void _())},null,10,gi)))),128)),q("div",{"data-test-id":"custom-color",class:V([e.$style.color,e.$style.customColorButton,"string"==typeof l.value.color?e.$style.selected:""]),style:z("string"==typeof l.value.color?{backgroundColor:l.value.color}:{}),title:u(o).baseText("node.customColor"),onClick:S(y,["stop"])},[v(u(re),{icon:"plus",size:"xsmall",class:V(e.$style.plusIcon)},null,8,["class"])],14,_i)],2)])),_:1},8,["open","content-class"]),q("input",{ref_key:"colorInputRef",ref:g,type:"color",class:V(e.$style.hiddenColorInput),"data-test-id":"native-color-input",onChange:b},null,34)]))}}),yi=pe(mi,[["__cssModules",{$style:{popover:"_popover_18eco_125",content:"_content_18eco_131",color:"_color_18eco_138",selected:"_selected_18eco_150","sticky-color-1":"_sticky-color-1_18eco_153","sticky-color-2":"_sticky-color-2_18eco_156","sticky-color-3":"_sticky-color-3_18eco_159","sticky-color-4":"_sticky-color-4_18eco_162","sticky-color-5":"_sticky-color-5_18eco_165","sticky-color-6":"_sticky-color-6_18eco_168","sticky-color-7":"_sticky-color-7_18eco_171",option:"_option_18eco_175",customColorButton:"_customColorButton_18eco_187",plusIcon:"_plusIcon_18eco_195",hiddenColorInput:"_hiddenColorInput_18eco_204"}}]]),bi=f({__name:"CanvasNodeToolbar",props:{readOnly:{type:Boolean},showStatusIcons:{type:Boolean},itemsClass:{}},emits:["delete","toggle","run","update","open:contextmenu","focus","add:ai"],setup(e,{emit:t}){const n=t,o=e,i=T(),l=J(),{isExecuting:c,isExperimentalNdvActive:h}=Ec(),{isDisabled:p,render:f,name:g}=$c(),m=nt(),y=me(),b=qt(),w=fe(),x=a((()=>g.value?m.getNodeByName(g.value):null)),k=a((()=>!!x.value&&y.isToolNode(x.value.type))),E=a((()=>p.value?l.baseText("node.enable"):l.baseText("node.disable"))),N=d(!1),z=d(!1),M=a((()=>({[i.canvasNodeToolbar]:!0,[i.readOnly]:o.readOnly,[i.forceVisible]:z.value||N.value,[i.isExperimentalNdvActive]:h.value}))),O=a((()=>!o.readOnly&&f.value.type===qe.Default&&"configuration"in f.value.options&&(!f.value.options.configuration||k.value))),$=a((()=>!o.readOnly&&f.value.type===qe.Default)),A=a((()=>!o.readOnly)),B=a((()=>b.isZoomedViewEnabled)),j=a((()=>!o.readOnly&&w.isFeatureEnabled)),D=a((()=>!o.readOnly&&f.value.type===qe.StickyNote));function R(){n("run")}function L(){n("toggle")}function P(){n("delete")}function H(e){n("update",{color:e})}function W(e){n("open:contextmenu",e)}function F(){z.value=!0}function Y(){z.value=!1}function X(){x.value&&n("focus",x.value.id)}function U(){x.value&&n("add:ai",x.value.id)}return(t,n)=>(I(),r("div",{"data-test-id":"canvas-node-toolbar",class:V(M.value),onMouseenter:F,onMouseleave:Y,onMousedown:n[1]||(n[1]=S((()=>{}),["stop"])),onClick:n[2]||(n[2]=S((()=>{}),["stop"]))},[q("div",{class:V([u(i).canvasNodeToolbarItems,e.itemsClass])},[O.value?(I(),_(u(ae),{key:0,placement:"top",disabled:!u(p),content:u(l).baseText("ndv.execute.deactivated")},{default:C((()=>[v(u(oe),{variant:"ghost","data-test-id":"execute-node-button",size:"small",icon:"node-play",disabled:u(c)||u(p),title:u(l).baseText("node.testStep"),onClick:S(R,["stop"])},null,8,["disabled","title"])])),_:1},8,["disabled","content"])):s("",!0),$.value?(I(),_(u(oe),{key:1,variant:"ghost","data-test-id":"disable-node-button",size:"small",icon:"node-power",title:E.value,onClick:S(L,["stop"])},null,8,["title"])):s("",!0),A.value?(I(),_(u(oe),{key:2,variant:"ghost","data-test-id":"delete-node-button",size:"small",icon:"node-trash",title:u(l).baseText("node.delete"),onClick:S(P,["stop"])},null,8,["title"])):s("",!0),B.value?(I(),_(u(oe),{key:3,variant:"ghost",size:"small",icon:"crosshair",onClick:S(X,["stop"])})):s("",!0),D.value?(I(),_(yi,{key:4,visible:N.value,"onUpdate:visible":n[0]||(n[0]=e=>N.value=e),onUpdate:H},null,8,["visible"])):s("",!0),j.value?(I(),_(u(ae),{key:5,placement:"top",content:u(l).baseText("node.addToAi")},{default:C((()=>[v(u(oe),{"data-test-id":"add-to-ai-button",variant:"ghost",size:"small",text:"",icon:"sparkles",onClick:S(U,["stop"])})])),_:1},8,["content"])):s("",!0),v(u(oe),{variant:"ghost","data-test-id":"overflow-node-button",size:"small",icon:"node-ellipsis",onClick:S(W,["stop"])})],2),e.showStatusIcons?(I(),_(vi,{key:0,class:V(u(i).statusIcons),"spinner-layout":"static"},null,8,["class"])):s("",!0)],34))}}),wi=pe(bi,[["__cssModules",{$style:{canvasNodeToolbar:"_canvasNodeToolbar_bw5fp_125",isExperimentalNdvActive:"_isExperimentalNdvActive_bw5fp_133",canvasNodeToolbarItems:"_canvasNodeToolbarItems_bw5fp_142",forceVisible:"_forceVisible_bw5fp_154",statusIcons:"_statusIcons_bw5fp_158"}}]]),xi="small",ki=pe(f({__name:"CanvasNodeSettingsIcons",setup(e){const{name:t}=$c(),n=J(),o=nt(),l=tt(),{isEnabled:c}=Ft(),d=a((()=>o.workflowObject.getNode(t.value))),h=a((()=>{const e=d.value?.credentials;return!!e&&Object.values(e).some((e=>!!e?.id&&!0===l.getCredentialById(e.id)?.isResolvable))})),p=a((()=>{const e=d.value?.parameters?.contextEstablishmentHooks;if("object"!=typeof e||null===e||!("hooks"in e))return!1;const t=e.hooks;return Array.isArray(t)&&t.length>0})),f=a((()=>h.value||p.value));return(e,t)=>(I(),r("div",{class:V(e.$style.settingsIcons)},[d.value?.alwaysOutputData?(I(),_(u(ae),{key:0},{content:C((()=>[q("div",{class:V(e.$style.tooltipHeader)},[v(u(re),{icon:"always-output-data",size:xi}),q("strong",{class:V(e.$style.tooltipTitle)},i(u(n).baseText("nodeSettings.alwaysOutputData.displayName")),3)],2),q("div",null,i(u(n).baseText("node.settings.alwaysOutputData")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-always-output-data",class:V(e.$style.icon)},[v(u(re),{icon:"always-output-data",size:xi})],2)])),_:1})):s("",!0),d.value?.executeOnce?(I(),_(u(ae),{key:1},{content:C((()=>[q("div",{class:V(e.$style.tooltipHeader)},[v(u(re),{icon:"execute-once",size:xi}),q("strong",{class:V(e.$style.tooltipTitle)},i(u(n).baseText("nodeSettings.executeOnce.displayName")),3)],2),q("div",null,i(u(n).baseText("node.settings.executeOnce")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-execute-once",class:V(e.$style.icon)},[v(u(re),{icon:"execute-once",size:xi})],2)])),_:1})):s("",!0),d.value?.retryOnFail?(I(),_(u(ae),{key:2},{content:C((()=>[q("div",{class:V(e.$style.tooltipHeader)},[v(u(re),{icon:"retry-on-fail",size:xi}),q("strong",{class:V(e.$style.tooltipTitle)},i(u(n).baseText("nodeSettings.retryOnFail.displayName")),3)],2),q("div",null,i(u(n).baseText("node.settings.retriesOnFailure")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-retry-on-fail",class:V(e.$style.icon)},[v(u(re),{icon:"retry-on-fail",size:xi})],2)])),_:1})):s("",!0),"continueRegularOutput"===d.value?.onError||"continueErrorOutput"===d.value?.onError?(I(),_(u(ae),{key:3},{content:C((()=>[q("div",{class:V(e.$style.tooltipHeader)},[v(u(re),{icon:"continue-on-error",size:xi}),q("strong",{class:V(e.$style.tooltipTitle)},i(u(n).baseText("node.settings.continuesOnError.title")),3)],2),q("div",null,i(u(n).baseText("node.settings.continuesOnError")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-continue-on-error",class:V(e.$style.icon)},[v(u(re),{icon:"continue-on-error",size:xi})],2)])),_:1})):s("",!0),u(c)&&f.value?(I(),_(u(ae),{key:4},{content:C((()=>[q("div",{class:V(e.$style.tooltipHeader)},[v(u(re),{icon:"key-round",size:xi}),q("strong",{class:V(e.$style.tooltipTitle)},i(u(n).baseText("nodeSettings.dynamicCredentials.displayName")),3)],2),q("div",null,i(u(n).baseText(p.value?"node.settings.contextEstablishmentHooks":"node.settings.dynamicCredentials")),1)])),default:C((()=>[q("div",{"data-test-id":"canvas-node-status-dynamic-credentials",class:V(e.$style.icon)},[v(u(re),{icon:"key-round",size:xi})],2)])),_:1})):s("",!0)],2))}}),[["__cssModules",{$style:{settingsIcons:"_settingsIcons_xulzx_125",tooltipHeader:"_tooltipHeader_xulzx_134",tooltipTitle:"_tooltipTitle_xulzx_139",icon:"_icon_xulzx_145"}}]]),Ei=f({__name:"ExperimentalCanvasNodeSettings",props:{nodeId:{},isReadOnly:{type:Boolean},subTitle:{},isEmbeddedInCanvas:{type:Boolean}},emits:["dblclickHeader"],setup(e,{emit:t}){const n=t,o=nt(),i=Je(),{renameNode:r}=Wt(),s=xe(),l=_e(),c=a((()=>o.getNodeById(e.nodeId))),d=a((()=>s.getForeignCredentialsIfSharingEnabled(c.value?.credentials))),h=a((()=>i.isActionActive.workflowRunning)),p=a((()=>o.executionWaitingForWebhook)),v=a((()=>h.value||p.value));function f(e){"name"===e.name&&e.oldValue&&r(e.oldValue,e.value)}function g(e){e.ctrlKey||e.currentTarget instanceof HTMLElement&&e.currentTarget.scrollHeight<=e.currentTarget.offsetHeight||Math.abs(e.deltaX)>=Math.abs(e.deltaY)||e.stopImmediatePropagation()}return(t,o)=>(I(),_(Zt,{dragging:!1,"active-node":c.value,"push-ref":u(l).pushRef,"foreign-credentials":d.value,"read-only":e.isReadOnly,"block-u-i":v.value,executable:!e.isReadOnly,"is-embedded-in-canvas":e.isEmbeddedInCanvas,"sub-title":e.subTitle,"extra-tabs-class-name":"nodrag","extra-parameter-wrapper-class-name":"nodrag","is-ndv-v2":"","hide-execute":"","hide-docs":!1,"hide-sub-connections":"",onValueChanged:f,onCaptureWheelBody:g,onDblclickHeader:o[0]||(o[0]=e=>n("dblclickHeader",e))},{actions:C((()=>[E(t.$slots,"actions")])),_:3},8,["active-node","push-ref","foreign-credentials","read-only","block-u-i","executable","is-embedded-in-canvas","sub-title"]))}}),e("a",Ni=Ei),zi=f({__name:"ExperimentalEmbeddedNdvActions",props:{isExpanded:{type:Boolean}},emits:["openNdv","toggleExpand"],setup(e,{emit:t}){const n=t;return(t,o)=>(I(),r("div",{class:V(t.$style.actions)},[v(u(oe),{variant:"ghost",icon:"expand",size:"xsmall","icon-size":"small","aria-label":"Open...",onClick:o[0]||(o[0]=S((e=>n("openNdv")),["stop"]))}),v(u(oe),{variant:"ghost",icon:e.isExpanded?"chevron-down":"chevron-up",size:"xsmall","icon-size":"medium","aria-label":"Toggle expand",onClick:o[1]||(o[1]=S((e=>n("toggleExpand")),["stop"]))},null,8,["icon"])],2))}}),Ci=pe(zi,[["__cssModules",{$style:{actions:"_actions_1x1ab_125"}}]]),Ti=f({__name:"ExperimentalEmbeddedNodeDetails",props:{nodeId:{},isReadOnly:{type:Boolean}},setup(e){const t=J(),n=_e(),o=qt(),s=a((()=>!o.collapsedNodes[e.nodeId])),l=me(),c=nt();Xt({view_shown:"zoomed_view"});const h=a((()=>c.getNodeById(e.nodeId)??null)),p=a((()=>h.value?l.getNodeType(h.value.type,h.value.typeVersion):null)),f=Ye(),{isPaneMoving:g}=Ec(),m=a((()=>f.isNodeIntersecting({id:e.nodeId},{x:-f.viewport.value.x/f.viewport.value.zoom,y:-f.viewport.value.y/f.viewport.value.zoom,width:f.dimensions.value.width/f.viewport.value.zoom,height:f.dimensions.value.height/f.viewport.value.zoom}))),y=d(m.value),b=a((()=>h.value&&p.value?function(e,t,n,o){if(e.disabled)return`(${o.baseText("node.disabled")})`;const a=t.displayName??"";if(!n)return a;const i=e.parameters.operation,r=i&&t.properties.find((e=>"operation"===e.name))?.options?.find((e=>"value"in e&&e.value===i))?.name;return r?`${a}: ${r}`:a}(h.value,p.value,!s.value,t):void 0)),w=a((()=>.8*f.dimensions.value.height)),k=Bc(h);function E(){o.setNodeExpanded(e.nodeId)}function N(){h.value&&n.setActiveNodeName(h.value.name,"canvas_zoomed_view")}return D(Mt,k),G(m,(e=>{y.value=y.value||e})),(t,n)=>(I(),r("div",{class:V([t.$style.component,s.value?t.$style.expanded:t.$style.collapsed,h.value?.disabled?t.$style.disabled:""]),style:z({"--input--max-height--focus":w.value/u(o).maxCanvasZoom+"px",pointerEvents:u(g)?"none":"auto"})},[h.value&&y.value?s.value?(I(),_(Ni,{key:1,tabindex:"-1","node-id":e.nodeId,class:V(t.$style.settingsView),"is-read-only":e.isReadOnly,"sub-title":b.value,"input-node-name":u(k)?.inputNode?.name,"is-embedded-in-canvas":"",onDblclickHeader:N},{actions:C((()=>[v(Ci,{"is-expanded":s.value,onOpenNdv:N,onToggleExpand:E},null,8,["is-expanded"])])),_:1},8,["node-id","class","is-read-only","sub-title","input-node-name"])):(I(),r("div",{key:2,role:"button",class:V(t.$style.collapsedContent),onClick:E},[v(Yt,{"node-type":p.value,size:18},null,8,["node-type"]),q("div",{class:V(t.$style.collapsedNodeName)},[v(u(le),{bold:""},{default:C((()=>[A(i(h.value.name),1)])),_:1}),v(u(le),{bold:"",size:"small",color:"text-light"},{default:C((()=>[A(i(b.value),1)])),_:1})],2),v(Ci,{"is-expanded":s.value,onOpenNdv:N,onToggleExpand:E},null,8,["is-expanded"])],2)):(I(),r(x,{key:0},[],64))],6))}}),Mi=pe(Ti,[["__cssModules",{$style:{component:"_component_8xduy_125",expanded:"_expanded_8xduy_138",collapsed:"_collapsed_8xduy_148",collapsedContent:"_collapsedContent_8xduy_160",settingsView:"_settingsView_8xduy_161",disabled:"_disabled_8xduy_183",collapsedNodeName:"_collapsedNodeName_8xduy_193"}}]]),Ii=f({__name:"CanvasNodeTooltip",props:{visible:{type:Boolean}},setup(e){const{render:t}=$c(),n=a((()=>t.value.options));return(t,o)=>(I(),_(u(ae),{placement:"top","show-after":500,visible:e.visible,teleported:!1,"content-class":t.$style.content,"avoid-collisions":!1},{content:C((()=>[A(i(n.value.tooltip),1)])),default:C((()=>[q("div",{class:V(t.$style.tooltipTrigger)},null,2)])),_:1},8,["visible","content-class"]))}}),Oi=pe(Ii,[["__cssModules",{$style:{tooltipTrigger:"_tooltipTrigger_r3vzo_125",content:"_content_r3vzo_133"}}]]),Si=pe(f({__name:"CanvasNodeDisabledStrikeThrough",setup(e){const t=T(),{hasRunData:n,render:o}=$c(),i=a((()=>({[t.disabledStrikeThrough]:!0,[t.success]:n.value,[t.warning]:o.value.type===qe.Default&&void 0!==o.value.options.dirtiness})));return(e,t)=>(I(),r("div",{class:V(i.value)},null,2))}}),[["__cssModules",{$style:{disabledStrikeThrough:"_disabledStrikeThrough_l3m1g_125",success:"_success_l3m1g_134",warning:"_warning_l3m1g_138"}}]]),$i=["data-test-id"],Ai=pe(f({__name:"CanvasNodeDefault",emits:["open:contextmenu","activate"],setup(e,{emit:t}){const n=T(),o=J(),l=t,{initialized:c,viewport:h,isExperimentalNdvActive:p}=Ec(),{calculateNodeBorderOpacity:f}=Sc(h),g=ee(),{id:m,label:y,subtitle:b,inputs:w,outputs:x,connections:E,isDisabled:N,isReadOnly:C,isSelected:M,hasPinnedData:O,executionStatus:$,executionWaiting:A,executionWaitingForNext:B,executionRunning:j,hasRunData:D,hasExecutionErrors:R,render:L,isNotInstalledCommunityNode:P}=$c(),{mainOutputs:H,mainOutputConnections:W,mainInputs:F,mainInputConnections:Y,nonMainInputs:X}=Ac({inputs:w,outputs:x,connections:E}),U=xe(),G=a((()=>L.value.options)),K=a((()=>g.name===Et.DEMO)),Z=a((()=>({[n.node]:!0,[n.selected]:M.value,[n.disabled]:N.value||P.value&&!K.value,[n.success]:D.value&&"success"===$.value,[n.error]:R.value,[n.pinned]:O.value,[n.waiting]:A.value||"waiting"===$.value,[n.running]:j.value||B.value,[n.configurable]:G.value.configurable,[n.configuration]:G.value.configuration,[n.trigger]:G.value.trigger,[n.warning]:void 0!==G.value.dirtiness,waiting:A.value||"waiting"===$.value,running:j.value||B.value}))),Q=a((()=>G.value.configuration?30:40)),te=a((()=>Ue(G.value.configuration??!1,G.value.configurable??!1,F.value.length,H.value.length,X.value.length,p.value))),ne=f(),oe=a((()=>({"--canvas-node--width":`${te.value.width}px`,"--canvas-node--height":`${te.value.height}px`,"--node--icon--size":`${Q.value}px`,"--canvas-node--border--opacity-light":ne.value.light,"--canvas-node--border--opacity-dark":ne.value.dark}))),ae=a((()=>{let e="default";return G.value.configurable?e="configurable":G.value.configuration?e="configuration":G.value.trigger&&(e="trigger"),`canvas-${e}-node`})),ie=a((()=>{const e=1===F.value.length&&Y.value.length<=1,t=1===H.value.length&&W.value.length<=1;return N.value&&e&&t})),re=a((()=>G.value.icon)),se=d(!1);function le(e){l("open:contextmenu",e)}function ue(e){l("activate",m.value,e)}return k(c,(()=>{c.value&&(se.value=!0)})),k(h,(()=>{se.value=!1,setTimeout((()=>{se.value=!0}),0)})),(e,t)=>u(p)?(I(),_(Mi,{key:0,"node-id":u(m),class:V(Z.value),style:z(oe.value),"is-read-only":u(C),"is-configurable":G.value.configurable??!1},null,8,["node-id","class","style","is-read-only","is-configurable"])):(I(),r("div",{key:1,class:V(Z.value),style:z(oe.value),"data-test-id":ae.value,onContextmenu:le,onDblclick:S(ue,["stop"])},[G.value.tooltip?(I(),_(Oi,{key:0,visible:se.value},null,8,["visible"])):s("",!0),v(Yt,{"icon-source":re.value,size:Q.value,shrink:!1,disabled:u(N),class:V(u(n).icon)},null,8,["icon-source","size","disabled","class"]),G.value.configuration||u(N)||u(O)&&!u(U).isProductionExecutionPreview.value?s("",!0):(I(),_(ki,{key:1})),ie.value?(I(),_(Si,{key:2})):s("",!0),q("div",{class:V(u(n).description)},[u(y)?(I(),r("div",{key:0,class:V(u(n).label)},i(u(y)),3)):s("",!0),u(N)?(I(),r("div",{key:1,class:V(u(n).disabledLabel)}," ("+i(u(o).baseText("node.disabled"))+") ",3)):s("",!0),u(b)&&!u(P)?(I(),r("div",{key:2,class:V(u(n).subtitle)},i(u(b)),3)):s("",!0)],2),u(N)?s("",!0):(I(),_(vi,{key:3,class:V(u(n).statusIcons)},null,8,["class"]))],46,$i))}}),[["__cssModules",{$style:{node:"_node_139nt_125",trigger:"_trigger_139nt_148",running:"_running_139nt_151",waiting:"_waiting_139nt_151",configuration:"_configuration_139nt_154",statusIcons:"_statusIcons_139nt_160",configurable:"_configurable_139nt_163",icon:"_icon_139nt_163",description:"_description_139nt_166",label:"_label_139nt_179",subtitle:"_subtitle_139nt_182",selected:"_selected_139nt_195",success:"_success_139nt_199",warning:"_warning_139nt_206",error:"_error_139nt_210",pinned:"_pinned_139nt_213",disabled:"_disabled_139nt_220","border-rotate":"_border-rotate_139nt_1",disabledLabel:"_disabledLabel_139nt_283"}}]]),ji={svg:"http://www.w3.org/2000/svg",xhtml:Bi="http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Di=Array.prototype.find,Ri=Array.prototype.filter,ed.prototype={constructor:ed,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Rd.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},Li=[null],wh.prototype={constructor:wh,select:Hc,selectAll:Fc,selectChild:Uc,selectChildren:Kc,filter:Zc,data:id,enter:Jc,exit:sd,join:ld,merge:ud,selection:xh,order:cd,sort:dd,call:pd,nodes:vd,node:fd,size:gd,empty:_d,each:md,attr:Nd,style:Id,property:Bd,classed:Wd,text:Ud,html:Qd,raise:eh,lower:nh,append:oh,insert:ih,remove:sh,clone:ch,datum:dh,on:fh,dispatch:yh,[Symbol.iterator]:bh},Pi={value:()=>{}},zh.prototype=Nh.prototype={constructor:zh,on:function(e,t){var n,o=this._,a=Ch(e+"",o),i=-1,r=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<r;)if(n=(e=a[i]).type)o[n]=Mh(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Mh(o[n],e.name,null);return this}for(;++i<r;)if((n=(e=a[i]).type)&&(n=Th(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,i=o.length;a<i;++a)o[a].value.apply(t,n)}},Vi={passive:!1},Hi={capture:!0,passive:!1},qi=e=>()=>e,Sh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},Fi={[(Wi=(e=>(e.Line="line",e.Handle="handle",e))(Wi||{})).Line]:"right",[Wi.Handle]:"bottom-right"},Yi={[Wi.Line]:"borderColor",[Wi.Handle]:"backgroundColor"},Xi=f({name:"ResizeControl",compatConfig:{MODE:3},props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1},autoScale:{type:Boolean,default:!0},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,o={width:0,height:0,x:0,y:0},i={...o,pointerX:0,pointerY:0,aspectRatio:1},{findNode:s,emits:l,viewport:c,noDragClassName:h}=Ye(),p=et(),v=d();let f=i,g=o;const _=y((()=>n.position??Fi[n.variant])),m=a((()=>_.value.split("-"))),b=y((()=>n.color?{[Yi[n.variant]]:n.color}:{}));return H((e=>{if(!v.value||!n.nodeId)return;const o=kh(v.value),a=_.value.includes("right")||_.value.includes("left"),i=_.value.includes("bottom")||_.value.includes("top"),r=_.value.includes("left"),u=_.value.includes("top"),c=Dh().on("start",(e=>{const o=s(n.nodeId),{xSnapped:a,ySnapped:i}=p(e);g={width:(null==o?void 0:o.dimensions.width)??0,height:(null==o?void 0:o.dimensions.height)??0,x:(null==o?void 0:o.position.x)??0,y:(null==o?void 0:o.position.y)??0},f={...g,pointerX:a,pointerY:i,aspectRatio:g.width/g.height},t("resizeStart",{event:e,params:g})})).on("drag",(e=>{var o;const{xSnapped:c,ySnapped:d}=p(e),h=s(n.nodeId);if(h){const s=[],{pointerX:p,pointerY:v,width:_,height:m,x:y,y:b,aspectRatio:w}=f,{x:x,y:k,width:E,height:N}=g,z=Math.floor(a?c-p:0),C=Math.floor(i?d-v:0);let T=Ae(_+(r?-z:z),n.minWidth,n.maxWidth),M=Ae(m+(u?-C:C),n.minHeight,n.maxHeight);if(n.keepAspectRatio){const e=T/M;let t=w;"number"==typeof n.keepAspectRatio&&e!==n.keepAspectRatio&&(t=n.keepAspectRatio);const o=a&&i;T=e<=t&&o||i&&!a?M*t:T,M=e>t&&o||a&&!i?T/t:M,T>=n.maxWidth?(T=n.maxWidth,M=n.maxWidth/t):T<=n.minWidth&&(T=n.minWidth,M=n.minWidth/t),M>=n.maxHeight?(M=n.maxHeight,T=n.maxHeight*t):M<=n.minHeight&&(M=n.minHeight,T=n.minHeight*t)}const I=T!==E,O=M!==N;if(r||u){const e=r?y-(T-_):y,t=u?b-(M-m):b,n=e!==x&&I,o=t!==k&&O;if(n||o){const a={id:h.id,type:"position",from:h.position,position:{x:n?e:x,y:o?t:k}};s.push(a),g.x=a.position.x,g.y=a.position.y}}if(n.nodeId&&(I||O)){const e={id:n.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:T,height:M}};s.push(e),g.width=T,g.height=M}if(0===s.length)return;const S=function({width:e,prevWidth:t,height:n,prevHeight:o,invertX:a,invertY:i}){const r=e-t,s=n-o,l=[r>0?1:r<0?-1:0,s>0?1:s<0?-1:0];return r&&a&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:g.width,prevWidth:E,height:g.height,prevHeight:N,invertX:r,invertY:u}),$={...g,direction:S};if(!1===(null==(o=n.shouldResize)?void 0:o.call(n,e,$)))return;t("resize",{event:e,params:$}),l.nodesChange(s)}})).on("end",(e=>{if(n.nodeId){const o={id:n.nodeId,type:"dimensions",resizing:!1};t("resizeEnd",{event:e,params:g}),l.nodesChange([o])}}));o.call(c),e((()=>{o.on(".drag",null)}))})),(e,t)=>(I(),r("div",{ref_key:"resizeControlRef",ref:v,class:V(["vue-flow__resize-control",[...m.value,e.variant,u(h)]]),style:z({...b.value,scale:e.variant===u(Wi).Handle?`${Math.max(1/u(c).zoom,1)}`:void 0})},[E(e.$slots,"default")],6))}}),Ui=f({name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]},autoScale:{type:Boolean,default:!0}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,{findNode:o,emits:i}=Ye(),l=["top-left","top-right","bottom-left","bottom-right"],c=["top","right","bottom","left"],d=X(we,null),h=y((()=>"string"==typeof n.nodeId?n.nodeId:d)),p=a((()=>o(h.value)));return k([()=>n.minWidth,()=>n.minHeight,()=>n.maxWidth,()=>n.maxHeight,()=>{var e;return!!(null==(e=p.value)?void 0:e.dimensions.width)&&!!p.value.dimensions.height}],(([e,t,n,o,a])=>{const r=p.value;if(r&&a){const a={id:r.id,type:"dimensions",updateStyle:!0,dimensions:{width:r.dimensions.width,height:r.dimensions.height}};e&&r.dimensions.width<e&&(a.dimensions.width=e),t&&r.dimensions.height<t&&(a.dimensions.height=t),n&&r.dimensions.width>n&&(a.dimensions.width=n),o&&r.dimensions.height>o&&(a.dimensions.height=o),a.dimensions.width===r.dimensions.width&&a.dimensions.height===r.dimensions.height||i.nodesChange([a])}}),{flush:"post",immediate:!0}),(e,n)=>e.isVisible?(I(),r(x,{key:0},[(I(),r(x,null,$(c,(o=>v(Xi,{key:o,class:V(e.lineClassName),style:z(e.lineStyle),"node-id":h.value,position:o,variant:u(Wi).Line,color:e.color,"min-width":e.minWidth,"min-height":e.minHeight,"max-width":e.maxWidth,"max-height":e.maxHeight,"should-resize":e.shouldResize,"keep-aspect-ratio":e.keepAspectRatio,"auto-scale":e.autoScale,onResizeStart:n[0]||(n[0]=e=>t("resizeStart",e)),onResize:n[1]||(n[1]=e=>t("resize",e)),onResizeEnd:n[2]||(n[2]=e=>t("resizeEnd",e))},null,8,["class","style","node-id","position","variant","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio","auto-scale"]))),64)),(I(),r(x,null,$(l,(o=>v(Xi,{key:o,class:V(e.handleClassName),style:z(e.handleStyle),"node-id":h.value,position:o,color:e.color,"min-width":e.minWidth,"min-height":e.minHeight,"max-width":e.maxWidth,"max-height":e.maxHeight,"should-resize":e.shouldResize,"keep-aspect-ratio":e.keepAspectRatio,"auto-scale":e.autoScale,onResizeStart:n[3]||(n[3]=e=>t("resizeStart",e)),onResize:n[4]||(n[4]=e=>t("resize",e)),onResizeEnd:n[5]||(n[5]=e=>t("resizeEnd",e))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio","auto-scale"]))),64))],64)):s("",!0)}}),Gi=pe(f({inheritAttrs:!1,__name:"CanvasNodeStickyNote",emits:["update","move","activate","deactivate","open:contextmenu"],setup(e,{emit:t}){const n=t,o=T(),{id:i,isSelected:s,isReadOnly:l,render:c,eventBus:p}=$c(),f=a((()=>c.value.options)),g=a((()=>({[o.sticky]:!0,[o.selected]:s.value,"sticky--active":m.value})));function _(e){n("move",{x:e.params.x,y:e.params.y}),n("update",{...e.params.width?{width:e.params.width}:{},...e.params.height?{height:e.params.height}:{}})}const m=d(!1);function y(e){n("update",{content:e})}function k(e){m.value!==e&&(m.value=e,n(e?"activate":"deactivate",i.value))}function E(){k(!0)}function N(e){n("open:contextmenu",e)}return w((()=>{p.value?.on("update:node:activated",E)})),h((()=>{p.value?.off("update:node:activated",E)})),(e,t)=>(I(),r(x,null,[v(u(Ui),{"min-height":80,"min-width":150,height:f.value.height,width:f.value.width,"is-visible":!u(l),onResize:_},null,8,["height","width","is-visible"]),v(u(ie),b(e.$attrs,{id:u(i),class:g.value,"data-test-id":"sticky",height:f.value.height,width:f.value.width,"model-value":f.value.content,"background-color":f.value.color,"edit-mode":m.value,"read-only":u(l),onEdit:k,onDblclick:S(E,["stop"]),"onUpdate:modelValue":y,onContextmenu:N}),null,16,["id","class","height","width","model-value","background-color","edit-mode","read-only"])],64))}}),[["__cssModules",{$style:{sticky:"_sticky_1k3w0_125",selected:"_selected_1k3w0_132"}}]]),Ki=pe(f({__name:"CanvasNodeAddNodes",setup(e){const t=Vt(),n=J(),o=st(),l=lt(),c=he(),p=d(!1),f=a((()=>ot()&&o.isTemplatesEnabled));function g(){p.value=!0}function m(){p.value=!1}function y(){t.openNodeCreatorForTriggerNodes(pt.TRIGGER_PLACEHOLDER_BUTTON)}async function b(){He(Ze.emptyWorkflowLink),l.hasCustomTemplatesHost?await c.push({name:Et.TEMPLATES}):window.open(l.websiteTemplateRepositoryURL,"_blank")}return w((()=>{Fe.on("runWorkflowButton:mouseenter",g),Fe.on("runWorkflowButton:mouseleave",m)})),h((()=>{Fe.off("runWorkflowButton:mouseenter",g),Fe.off("runWorkflowButton:mouseleave",m)})),(e,o)=>(I(),r("div",{ref:"container",class:V(e.$style.addNodes),"data-test-id":"canvas-add-button"},[v(u(ae),{placement:"top",visible:p.value,disabled:u(t).showScrim,"show-after":700},{content:C((()=>[A(i(u(n).baseText("nodeView.canvasAddButton.addATriggerNodeBeforeExecuting")),1)])),default:C((()=>[q("button",{class:V(e.$style.button),"data-test-id":"canvas-plus-button",onClick:S(y,["stop"])},[v(u(re),{icon:"plus",color:"foreground-xdark",size:40})],2)])),_:1},8,["visible","disabled"]),q("p",{class:V(e.$style.label)},[A(i(u(n).baseText("nodeView.canvasAddButton.addFirstStep"))+" ",1),f.value?(I(),_(u(ce),{key:0,underline:!0,size:"small","data-test-id":"canvas-template-link",onClick:b},{default:C((()=>[A(i(u(n).baseText("nodeView.templateLink")),1)])),_:1})):s("",!0)],2)],2))}}),[["__cssModules",{$style:{addNodes:"_addNodes_1ik7n_125",button:"_button_1ik7n_133",label:"_label_1ik7n_147"}}]]),Zi=pe(f({__name:"CanvasNodeChoicePrompt",setup(e){const t=Vt(),n=St(),o=J(),l=st(),c=lt(),d=he(),h=Ot(),p=a((()=>n.isOpen&&n.isBuilderModeActive)),f=a((()=>ot()&&l.isTemplatesEnabled)),g=()=>{t.isCreateNodeActive?t.isCreateNodeActive=!1:t.openNodeCreatorForTriggerNodes(pt.TRIGGER_PLACEHOLDER_BUTTON)};async function m(){h.trackUserOpenedAssistant({source:"build_with_ai",task:"placeholder",has_existing_session:!h.isSessionEnded}),await n.toggle({mode:"builder"})}async function y(){He(Ze.emptyWorkflowLink),c.hasCustomTemplatesHost?await d.push({name:Et.TEMPLATES}):window.open(c.websiteTemplateRepositoryURL,"_blank")}return(e,n)=>(I(),r("div",{class:V(e.$style.choicePrompt),"data-test-id":"canvas-choice-prompt",onClick:n[0]||(n[0]=S((()=>{}),["stop"])),onMousedown:n[1]||(n[1]=S((()=>{}),["stop"]))},[q("div",{class:V(e.$style.option)},[q("div",{class:V([e.$style.selectedButtonHighlight,{[e.$style.highlighted]:u(t).isCreateNodeActive}])},[q("button",{class:V(e.$style.button),"data-test-id":"canvas-add-first-step-button",onMousedown:S(g,["stop","prevent"])},[v(u(re),{icon:"plus",color:"foreground-xdark",size:40})],34)],2),q("p",{class:V(e.$style.label)},[A(i(u(o).baseText("nodeView.canvasAddButton.addFirstStep"))+" ",1),f.value?(I(),_(u(ce),{key:0,underline:!0,size:"small","data-test-id":"canvas-template-link",onClick:y},{default:C((()=>[A(i(u(o).baseText("nodeView.templateLink")),1)])),_:1})):s("",!0)],2)],2),q("div",{class:V(e.$style.orDivider)},[q("span",{class:V(e.$style.orText)},i(u(o).baseText("generic.or")),3)],2),q("div",{class:V(e.$style.option)},[q("div",{class:V([e.$style.selectedButtonHighlight,{[e.$style.highlighted]:p.value}])},[q("button",{class:V([e.$style.button]),"data-test-id":"canvas-build-with-ai-button",onMousedown:S(m,["stop","prevent"])},[v(u(re),{icon:"wand-sparkles",color:"foreground-xdark",size:40})],34)],2),q("p",{class:V(e.$style.label)},i(u(o).baseText("aiAssistant.builder.canvasPrompt.buildWithAI")),3)],2)],34))}}),[["__cssModules",{$style:{choicePrompt:"_choicePrompt_5k7m7_125",option:"_option_5k7m7_133",button:"_button_5k7m7_140",selectedButtonHighlight:"_selectedButtonHighlight_5k7m7_150",highlighted:"_highlighted_5k7m7_153",label:"_label_5k7m7_157",orDivider:"_orDivider_5k7m7_169",orText:"_orText_5k7m7_177"}}]]),Qi=f({__name:"CanvasNodeRenderer",setup(e){const t=X(It),n=()=>{const e=t?.data.value.render.type??qe.Default;let n;switch(e){case qe.StickyNote:n=Gi;break;case qe.AddNodes:n=Ki;break;case qe.ChoicePrompt:n=Zi;break;default:n=Ai}return p(n,{"data-canvas-node-render-type":e})};return(e,t)=>(I(),_(n))}}),Ji=pe(f({__name:"CanvasHandleDot",props:{handleClasses:{default:void 0}},setup(e){const t=e,n=a((()=>"source"===t.handleClasses));return(t,o)=>(I(),r("div",{class:V([t.$style.wrapper,{[t.$style.output]:n.value}])},[q("div",{class:V([t.$style.dot,e.handleClasses])},null,2)],2))}}),[["__cssModules",{$style:{wrapper:"_wrapper_1jh0f_125",output:"_output_1jh0f_131",dot:"_dot_1jh0f_135"}}]]),er=pe(f({__name:"CanvasHandleMainInput",setup(e){const t=T(),{label:n,isRequired:o}=Rh(),{viewport:s}=Ec(),{calculateHandleLightness:l}=Sc(s),c=a((()=>({"canvas-node-handle-main-input":!0,[t.handle]:!0,[t.required]:o.value}))),d=l(),h=a((()=>({"--handle--border--lightness--light":d.value.light,"--handle--border--lightness--dark":d.value.dark})));return(e,o)=>(I(),r("div",{class:V(c.value)},[q("div",{class:V([u(t).label])},i(u(n)),3),v(Ji,{"handle-classes":"target",style:z(h.value)},null,8,["style"])],2))}}),[["__cssModules",{$style:{handle:"_handle_1rqcc_125",label:"_label_1rqcc_132",required:"_required_1rqcc_147"}}]]),tr=["viewBox"],nr=["x1","y1","x2","y2"],or=["transform"],ar=pe(f({__name:"CanvasHandlePlus",props:{position:{default:"right"},handleClasses:{default:void 0},plusSize:{default:24},lineSize:{default:46},type:{default:"default"}},emits:["click:plus"],setup(e,{emit:t}){const n=e,{viewport:o}=Ec(),{calculateEdgeLightness:i}=Sc(o),s=i(),l=t,u=T(),c=a((()=>["canvas-handle-plus",u.container,u[n.position],n.handleClasses])),d=a((()=>{switch(n.position){case"bottom":case"top":return{width:n.plusSize,height:n.lineSize+n.plusSize};default:return{width:n.lineSize+n.plusSize,height:n.plusSize}}})),h=a((()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,"--canvas-handle-plus-line--color--lightness--light":s.value.light,"--canvas-handle-plus-line--color--lightness--dark":s.value.dark}))),p=a((()=>{switch(n.position){case"top":return[[d.value.width/2,d.value.height-n.lineSize+1],[d.value.width/2,d.value.height]];case"bottom":return[[d.value.width/2,0],[d.value.width/2,n.lineSize+1]];case"left":return[[d.value.width-n.lineSize-1,d.value.height/2],[d.value.width,d.value.height/2]];default:return[[0,d.value.height/2],[n.lineSize+1,d.value.height/2]]}})),v=a((()=>{switch(n.position){case"bottom":return[0,d.value.height-n.plusSize];case"top":case"left":return[0,0];default:return[d.value.width-n.plusSize,0]}}));function f(e){l("click:plus",e)}return(t,n)=>(I(),r("div",{class:V(c.value),"data-test-id":"canvas-handle-plus-wrapper"},[(I(),r("svg",{class:V([t.$style.wrapper,t.$style[e.position],t.$style[e.type]]),style:z(h.value),viewBox:`0 0 ${d.value.width} ${d.value.height}`},[q("line",{class:V([e.handleClasses,t.$style.line]),x1:p.value[0][0],y1:p.value[0][1],x2:p.value[1][0],y2:p.value[1][1],"stroke-width":"2"},null,10,nr),q("g",{"data-test-id":"canvas-handle-plus",class:V([t.$style.plus,e.handleClasses,"clickable"]),transform:`translate(${v.value[0]}, ${v.value[1]})`,onClick:S(f,["stop"])},[q("rect",{class:V([e.handleClasses,"clickable"]),x:"2",y:"2",width:"20",height:"20",stroke:"light-dark(var(--color--neutral-200), var(--color--neutral-850))","stroke-width":"2",rx:"4",fill:"light-dark(var(--color--neutral-200), var(--color--neutral-850))"},null,2),n[0]||(n[0]=q("path",{stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h8m-4-4v8",class:"source clickable"},null,-1))],10,or)],14,tr))],2))}}),[["__cssModules",{$style:{container:"_container_276y9_125",bottom:"_bottom_276y9_128",wrapper:"_wrapper_276y9_140",right:"_right_276y9_145",line:"_line_276y9_151",success:"_success_276y9_154",plus:"_plus_276y9_157"}}]]),ir="source",rr=pe(f({__name:"CanvasHandleMainOutput",emits:["add"],setup(e,{emit:t}){const n=t,o=T(),l=J(),{render:c}=$c(),{label:h,isConnected:p,isConnecting:f,isReadOnly:g,isRequired:m,runData:y}=Rh(),{viewport:b}=Ec(),{calculateHandleLightness:w}=Sc(b),x=a((()=>({"canvas-node-handle-main-output":!0,[o.handle]:!0,[o.connected]:p.value,[o.required]:m.value}))),k=d(!1),E=a((()=>c.value.options)),N=a((()=>y.value?.total??0)),M=a((()=>!p.value&&y.value&&y.value.total>0?l.baseText("ndv.output.items",{adjustToNumber:y.value.total,interpolate:{count:String(y.value.total)}}):"")),O=a((()=>!f.value||k.value)),S=a((()=>N.value>0?"success":"default")),$=a((()=>({small:46,medium:66,large:80}[(N.value>0?"large":E.value.outputs?.labelSize)??"small"]))),A=a((()=>({[o.label]:!0,[o.outputLabel]:!0}))),B=a((()=>({[o.label]:!0,[o.runDataLabel]:!0}))),D=w(),L=a((()=>({"--handle--border--lightness--light":D.value.light,"--handle--border--lightness--dark":D.value.dark})));function P(){k.value=!0}function H(){k.value=!1}function q(){n("add")}return(e,t)=>(I(),r("div",{class:V(x.value)},[u(h)?(I(),r("div",{key:0,class:V(A.value)},i(u(h)),3)):s("",!0),u(y)?(I(),r("div",{key:1,class:V(B.value)},i(M.value),3)):s("",!0),v(Ji,{"handle-classes":ir,style:z(L.value)},null,8,["style"]),v(j,{name:"canvas-node-handle-main-output"},{default:C((()=>[u(p)||u(g)?s("",!0):W((I(),_(ar,{key:0,"data-plus-type":S.value,"line-size":$.value,"handle-classes":ir,type:S.value,onMouseenter:P,onMouseleave:H,"onClick:plus":q},null,8,["data-plus-type","line-size","type"])),[[R,O.value]])])),_:1})],2))}}),[["__cssModules",{$style:{handle:"_handle_4le4q_125",connected:"_connected_4le4q_131",label:"_label_4le4q_131",required:"_required_4le4q_145",outputLabel:"_outputLabel_4le4q_150",runDataLabel:"_runDataLabel_4le4q_160"}}]]),sr=pe(f({__name:"CanvasHandleDiamond",props:{handleClasses:{default:void 0}},setup:e=>(t,n)=>(I(),r("div",{class:V(t.$style.wrapper)},[q("div",{class:V([t.$style.diamond,e.handleClasses])},null,2)],2))}),[["__cssModules",{$style:{wrapper:"_wrapper_149eq_125",diamond:"_diamond_149eq_131"}}]]),lr="target",ur=pe(f({__name:"CanvasHandleNonMainInput",emits:["add"],setup(e,{emit:t}){const n=t,o=T(),{label:l,isConnected:c,isConnecting:h,isRequired:p,maxConnections:f}=Rh(),{viewport:g}=Ec(),{calculateHandleLightness:m}=Sc(g),y=a((()=>({"canvas-node-handle-non-main-input":!0,[o.handle]:!0,[o.required]:p.value}))),b=a((()=>!c.value||!f.value||f.value>1)),w=d(!1),x=a((()=>!h.value||w.value||!f.value||f.value>1)),k=m(),E=a((()=>({"--handle--border--lightness--light":k.value.light,"--handle--border--lightness--dark":k.value.dark})));function N(){w.value=!0}function M(){w.value=!1}function O(){n("add")}return(e,t)=>(I(),r("div",{class:V(y.value)},[q("div",{class:V([u(o).label])},i(u(l)),3),v(sr,{"handle-classes":lr,style:z(E.value)},null,8,["style"]),v(j,{name:"canvas-node-handle-non-main-input"},{default:C((()=>[b.value?W((I(),_(ar,{key:0,"handle-classes":lr,type:"secondary",position:"bottom",onMouseenter:N,onMouseleave:M,"onClick:plus":O},null,512)),[[R,x.value]]):s("",!0)])),_:1})],2))}}),[["__cssModules",{$style:{handle:"_handle_1i9b3_125",label:"_label_1i9b3_132",required:"_required_1i9b3_146"}}]]),cr=pe(f({__name:"CanvasHandleNonMainOutput",setup(e){const t=T(),{label:n,isRequired:o}=Rh(),{viewport:s}=Ec(),{calculateHandleLightness:l}=Sc(s),c=a((()=>({"canvas-node-handle-non-main-output":!0,[t.handle]:!0,[t.required]:o.value}))),d=l(),h=a((()=>({"--handle--border--lightness--light":d.value.light,"--handle--border--lightness--dark":d.value.dark})));return(e,o)=>(I(),r("div",{class:V(c.value)},[q("div",{class:V(u(t).label)},i(u(n)),3),v(sr,{"handle-classes":"source",style:z(h.value)},null,8,["style"])],2))}}),[["__cssModules",{$style:{handle:"_handle_1utsl_125",label:"_label_1utsl_132",required:"_required_1utsl_145"}}]]),dr=f({inheritAttrs:!1,__name:"CanvasHandleRenderer",props:{handleId:{},connectionsCount:{},isConnecting:{type:Boolean},position:{},offset:{},node:{},type:{},index:{},required:{type:Boolean},maxConnections:{},label:{},mode:{},isReadOnly:{type:Boolean},isValidConnection:{type:Function}},emits:["add"],setup(e,{emit:t}){const n=e,o=t,i=T(),r=a((()=>n.mode===Ge.Input?"target":"source")),s=a((()=>[i.handle,i[n.type],i[n.mode]])),l=a((()=>n.maxConnections&&n.connectionsCount>=n.maxConnections)),c=a((()=>!l.value&&(n.mode===Ge.Output||n.type!==Nt.Main))),d=a((()=>!l.value&&(n.mode===Ge.Input||n.type!==Nt.Main))),h=a((()=>n.connectionsCount>0)),{runDataOutputMap:f}=$c(),g=a((()=>n.mode===Ge.Output?f.value?.[n.type]?.[n.index]:void 0)),m=a((()=>[i.renderType,i[n.position]])),w=()=>{let e;return e=n.mode===Ge.Output?n.type===Nt.Main?rr:cr:n.type===Nt.Main?er:ur,e?p(e):null};function x(){o("add",n.handleId)}const k=y(n,"label"),E=y(n,"isConnecting"),N=y(n,"isReadOnly"),M=y(n,"mode"),O=y(n,"type"),S=y(n,"index"),$=y(n,"required"),A=y(n,"maxConnections");return D(Ct,{label:k,mode:M,type:O,index:S,runData:g,isRequired:$,isConnected:h,isConnecting:E,isReadOnly:N,maxConnections:A}),(t,n)=>(I(),_(u(je),b(t.$attrs,{id:e.handleId,class:s.value,type:r.value,position:e.position,style:e.offset,"connectable-start":c.value,"connectable-end":d.value,"is-valid-connection":e.isValidConnection}),{default:C((()=>[v(w,{class:V(m.value),"is-connected":h.value,"max-connections":A.value,style:z(e.offset),label:k.value,onAdd:x},null,8,["class","is-connected","max-connections","style","label"])])),_:1},16,["id","class","type","position","style","connectable-start","connectable-end","is-valid-connection"]))}}),hr=pe(dr,[["__cssModules",{$style:{handle:"_handle_pg5br_125",inputs:"_inputs_pg5br_140",main:"_main_pg5br_140",renderType:"_renderType_pg5br_144",top:"_top_pg5br_144",right:"_right_pg5br_148",left:"_left_pg5br_152",bottom:"_bottom_pg5br_156"}}]]),pr=f({__name:"CanvasNodeTrigger",props:{name:{},type:{},hovered:{type:Boolean},disabled:{type:Boolean},readOnly:{type:Boolean},class:{},isExperimentalNdvActive:{type:Boolean}},setup(e){const t=T(),n=a((()=>({[e.class??""]:!0,[t.container]:!0,[t.interactive]:!e.disabled&&!e.readOnly,[t.hovered]:!!e.hovered,[t.isExperimentalNdvActive]:e.isExperimentalNdvActive}))),o=he(),i=J(),l=nt(),c=Ht(),{runEntireWorkflow:d}=Gt({router:o}),{startChat:h}=Wt(),p=a((()=>c.isOpen)),f=a((()=>l.isWorkflowRunning)),g=a((()=>`execute-workflow-button-${e.name}`));async function m(){l.setSelectedTriggerNodeName(e.name),await d("node",e.name)}return(t,o)=>(I(),r("div",{class:V(n.value),onClick:o[2]||(o[2]=S((()=>{}),["stop","prevent"])),onMousedown:o[3]||(o[3]=S((()=>{}),["stop","prevent"]))},[q("div",null,[q("div",{class:V(t.$style.bolt)},[v(u(re),{icon:"bolt-filled",size:"large"})],2),e.readOnly?s("",!0):(I(),r(x,{key:0},[e.type===u("@n8n/n8n-nodes-langchain.chatTrigger")?(I(),r(x,{key:0},[p.value?(I(),_(u(ne),{key:0,variant:"subtle",icon:"message-circle",size:"large",disabled:f.value,"data-test-id":g.value,label:u(i).baseText("chat.hide"),onClickCapture:o[0]||(o[0]=e=>u(c).toggleOpen(!1))},null,8,["disabled","data-test-id","label"])):(I(),_(Qt,{key:1,label:u(i).baseText("chat.open"),shortcut:{keys:["c"]}},{default:C((()=>[v(u(ne),{variant:"solid",icon:"message-circle",size:"large",disabled:f.value,"data-test-id":g.value,label:u(i).baseText("chat.open"),onClickCapture:o[1]||(o[1]=e=>u(h)("node"))},null,8,["disabled","data-test-id","label"])])),_:1},8,["label"]))],64)):(I(),_(u(ne),{key:1,variant:"solid",icon:"flask-conical",size:"large",disabled:f.value,"data-test-id":g.value,label:u(i).baseText("nodeView.runButtonText.executeWorkflow"),onClickCapture:m},null,8,["disabled","data-test-id","label"]))],64))])],34))}}),vr=pe(pr,[["__cssModules",{$style:{container:"_container_zea8x_125",interactive:"_interactive_zea8x_149",hovered:"_hovered_zea8x_149",isExperimentalNdvActive:"_isExperimentalNdvActive_zea8x_154",bolt:"_bolt_zea8x_158"}}]]),fr=n(dt(),1),gr=["data-test-id","data-node-name","data-node-type"],_r=f({__name:"CanvasNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{},readOnly:{type:Boolean},eventBus:{},hovered:{type:Boolean},nearbyHovered:{type:Boolean}},emits:["add","delete","run","select","toggle","activate","deactivate","open:contextmenu","update","update:inputs","update:outputs","move","focus","add:ai"],setup(e,{emit:t}){const n=L(),o=t,i=T(),l=e,c=yn(),{connectingHandle:p,isExperimentalNdvActive:f}=Ec(),g=d([]),m=a((()=>l.data.inputs)),N=a((()=>l.data.outputs)),z=a((()=>l.data.connections)),{mainInputs:C,nonMainInputs:M,requiredNonMainInputs:O,mainOutputs:S,nonMainOutputs:A,isValidConnection:B}=Ac({inputs:m,outputs:N,connections:z}),j=a((()=>l.data.disabled)),R=a((()=>({[i.canvasNode]:!0,[i.showToolbar]:ye.value,hovered:l.hovered,selected:l.selected,waiting:l.data.execution.waiting||"waiting"===l.data.execution.status,running:l.data.execution.running||l.data.execution.waitingForNext,...Object.fromEntries([...g.value].map((e=>[e,!0])))}))),P=a((()=>l.data.render.type)),H=a((()=>[qe.StickyNote,qe.AddNodes,qe.ChoicePrompt].includes(P.value)?void 0:"canvas-node")),q=d(ue());function W(e){e.ids.includes(l.id)&&q.value&&q.value.emit(e.action,e.payload)}const F=a((()=>Rt(M.value,O.value.length))),Y=a((()=>[...C.value.map(G),...F.value.map(K)].filter((e=>!!e)))),X=a((()=>[...S.value.map(Z),...A.value.map(Q)].filter((e=>!!e)))),U=({mode:e,position:t,offsetAxis:n})=>(o,a,i)=>{if(!o)return;const r=jt({mode:e,type:o.type,index:o.index}),s=e===Ge.Input?"target":"source",u=z.value[e][o.type]?.[o.index]?.length??0,c=p.value?.nodeId===l.id&&p.value?.handleType===s&&p.value?.handleId===r,d=t===Se.Bottom?40+3*a*16+"px":f.value&&1===i.length?24*(1+a)+"px":100/(i.length+1)*(a+1)+"%";return{...o,handleId:r,connectionsCount:u,isConnecting:c,position:t,offset:{[n]:d}}},G=U({mode:Ge.Input,position:Se.Left,offsetAxis:"top"}),K=U({mode:Ge.Input,position:Se.Bottom,offsetAxis:"left"}),Z=U({mode:Ge.Output,position:Se.Right,offsetAxis:"top"}),Q=U({mode:Ge.Output,position:Se.Top,offsetAxis:"left"});function J(e){o("add",l.id,e)}function ee(){o("delete",l.id)}function te(){o("run",l.id)}function ne(){o("toggle",l.id)}function oe(e,t){o("activate",e,t)}function ae(){o("deactivate",l.id)}function ie(e){o("open:contextmenu",l.id,e,"node-button")}function re(e){o("open:contextmenu",l.id,e,"node-right-click")}function se(e){o("update",l.id,e)}function le(e){o("move",l.id,e)}function ce(e){o("focus",e)}function de(e){o("add:ai",e)}function he({className:e,add:t=!0}){g.value=t?[...new Set([...g.value,e])]:g.value.filter((t=>t!==e))}const pe=y(l,"id"),ve=y(l,"data"),fe=y(l,"label"),ge=y(l,"selected"),_e=y(l,"readOnly");D(It,{id:pe,data:ve,label:fe,selected:ge,readOnly:_e,eventBus:q});const me=a((()=>![qe.AddNodes,qe.ChoicePrompt].includes(P.value))),ye=a((()=>{const e=c.target.value;return c.isOpen&&"node-button"===e?.source&&e.nodeId===pe.value}));return k((()=>l.selected),(e=>{o("select",l.id,e)})),k(m,((e,t)=>{(0,fr.default)(e,t)||o("update:inputs",l.id)})),k(N,((e,t)=>{(0,fr.default)(e,t)||o("update:outputs",l.id)})),w((()=>{l.eventBus?.on("nodes:action",W),q.value?.on("update:node:class",he)})),h((()=>{l.eventBus?.off("nodes:action",W),q.value?.off("update:node:class",he)})),(t,o)=>(I(),r("div",{class:V(R.value),"data-test-id":H.value,"data-node-name":ve.value.name,"data-node-type":ve.value.type},[(I(!0),r(x,null,$(X.value,(e=>(I(),_(hr,b({key:`${e.handleId}(${e.index+1}/${X.value.length})`,ref_for:!0},e,{mode:u(Ge).Output,"is-read-only":_e.value,"is-valid-connection":u(B),"data-node-name":ve.value.name,"data-test-id":"canvas-node-output-handle","data-index":e.index,"data-connection-type":e.type,onAdd:J}),null,16,["mode","is-read-only","is-valid-connection","data-node-name","data-index","data-connection-type"])))),128)),(I(!0),r(x,null,$(Y.value,(e=>(I(),_(hr,b({key:`${e.handleId}(${e.index+1}/${Y.value.length})`,ref_for:!0},e,{mode:u(Ge).Input,"is-read-only":_e.value,"is-valid-connection":u(B),"data-test-id":"canvas-node-input-handle","data-index":e.index,"data-connection-type":e.type,"data-node-name":ve.value.name,onAdd:J}),null,16,["mode","is-read-only","is-valid-connection","data-index","data-connection-type","data-node-name"])))),128)),n.toolbar?E(t.$slots,"toolbar",{key:0,inputs:u(C),outputs:u(S),data:ve.value}):me.value?(I(),_(wi,{key:1,"data-test-id":"canvas-node-toolbar","read-only":_e.value,class:V(t.$style.canvasNodeToolbar),"show-status-icons":u(f),"items-class":t.$style.canvasNodeToolbarItems,onDelete:ee,onToggle:ne,onRun:te,onUpdate:se,"onOpen:contextmenu":ie,onFocus:ce,"onAdd:ai":de},null,8,["read-only","class","show-status-icons","items-class"])):s("",!0),v(Qi,{onActivate:oe,onDeactivate:ae,onMove:le,onUpdate:se,"onOpen:contextmenu":re,onDelete:ee}),l.data.render.type===u(qe).Default&&l.data.render.options.trigger?(I(),_(vr,{key:2,name:ve.value.name,type:ve.value.type,hovered:e.nearbyHovered,disabled:j.value,"read-only":_e.value,class:V(t.$style.trigger),"is-experimental-ndv-active":u(f)},null,8,["name","type","hovered","disabled","read-only","class","is-experimental-ndv-active"])):s("",!0)],10,gr))}}),e("r",mr=pe(_r,[["__cssModules",{$style:{canvasNode:"_canvasNode_35bs3_125",canvasNodeToolbarItems:"_canvasNodeToolbarItems_35bs3_125",trigger:"_trigger_35bs3_129",showToolbar:"_showToolbar_35bs3_129",canvasNodeToolbar:"_canvasNodeToolbar_35bs3_125"}}]])),yr=f({__name:"Canvas",props:{id:{default:"canvas"},nodes:{default:()=>[]},connections:{default:()=>[]},controlsPosition:{default:Te.BottomLeft},eventBus:{default:()=>ue()},readOnly:{type:Boolean,default:!1},executing:{type:Boolean,default:!1},keyBindings:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},suppressInteraction:{type:Boolean,default:!1},hideControls:{type:Boolean,default:!1}},emits:["update:modelValue","update:node:position","update:nodes:position","update:node:activated","update:node:deactivated","update:node:enabled","update:node:selected","update:node:name","update:node:parameters","update:node:inputs","update:node:outputs","update:logs-open","update:logs:input-open","update:logs:output-open","update:has-range-selection","click:node","click:node:add","run:node","copy:production:url","copy:test:url","delete:node","replace:node","create:node","create:sticky","delete:nodes","update:nodes:enabled","copy:nodes","duplicate:nodes","update:nodes:pin","cut:nodes","delete:connection","create:connection:start","create:connection","create:connection:end","create:connection:cancelled","click:connection:add","click:pane","run:workflow","create:workflow","drag-and-drop","tidy-up","toggle:focus-panel","viewport:change","selection:end","open:sub-workflow","start-chat","extract-workflow"],setup(e,{expose:t,emit:n}){const o=T(),i=n,r=e,{isMobileDevice:h,controlKeyCode:p}=de(),f=qt(),m=fe(),x=St(),N=Xe(),z=a((()=>f.isActive(ae.value.zoom))),M=Ye(r.id),{getSelectedNodes:O,addSelectedNodes:S,removeSelectedNodes:$,viewportRef:A,fitView:L,fitBounds:P,zoomIn:H,zoomOut:q,zoomTo:X,setInteractive:G,elementsSelectable:Z,project:J,nodes:ee,onPaneReady:te,onNodesInitialized:ne,findNode:oe,viewport:ae,dimensions:ie,nodesSelectionActive:re,userSelectionRect:se,setViewport:le,setCenter:ue,onEdgeMouseLeave:ce,onEdgeMouseEnter:he,onEdgeMouseMove:pe,onNodeMouseEnter:ve,onNodeMouseLeave:_e}=M,{getIncomingNodes:me,getOutgoingNodes:be,getSiblingNodes:we,getDownstreamNodes:xe,getUpstreamNodes:ke}=function({getIncomers:e,getOutgoers:t}){function n(e){return e.sort(((e,t)=>e.position.y-t.position.y))}return{sortNodesByVerticalPosition:n,getIncomingNodes:function(t){return n(e(t))},getOutgoingNodes:function(e){return n(t(e))},getSiblingNodes:function(o){return n([...e(o).flatMap((e=>t(e.id))),...t(o).flatMap((t=>e(t.id)))].filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))===t)))},getDownstreamNodes:function e(n,o=[]){if(o.includes(n))return[];o.push(n);const a=t(n);return[...a,...a.flatMap((t=>e(t.id,o)))].filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))===t))},getUpstreamNodes:function t(n,o=[]){if(o.includes(n))return[];o.push(n);const a=e(n);return[...a,...a.flatMap((e=>t(e.id,o)))].filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))===t))}}}(M),{layout:Ne}=wr(r.id,z),ze=d(!1),Ce=a((()=>({[o.canvas]:!0,[o.ready]:!r.loading&&ze.value,[o.isExperimentalNdvActive]:z.value}))),Me=d(!!h||[" ",p]),Oe=d(!!h||[1]),Se=d(!h||"Shift"),$e=d(!1);function Ae(){Se.value=!0,Oe.value=[1],$e.value=!1}U(Me.value,(function(){Se.value=null,Oe.value=[0,1],$e.value=!0}),{dedupe:!0}),Q(Me.value,Ae),function(e,t,{dedupe:n=!0,threshold:o=300,disabled:a=!1}){const i=d(null);U(e,(()=>{u(a)||(i.value=Date.now())}),{dedupe:n}),Q(e,(()=>{!u(a)&&i.value&&Date.now()-i.value<o&&t()}))}(" ",(()=>{Ze.value&&i("update:node:name",Ze.value.id)}),{disabled:y(r,"readOnly")});const je=a((()=>!r.keyBindings));function De(e){const t=me(e)[0];t&&ct({ids:[t.id]})}function Re(e){const t=be(e)[0];t&&ct({ids:[t.id]})}function Le(e){const t=we(e),n=t[t.findIndex((t=>t.id===e))+1]??t[0];n&&ct({ids:[n.id]})}function Pe(e){const t=we(e),n=t[t.findIndex((t=>t.id===e))-1]??t[t.length-1];n&&ct({ids:[n.id]})}function He(e){ct({ids:[...xe(e).map((e=>e.id)),e]})}function Fe(e){ct({ids:[...ke(e).map((e=>e.id)),e]})}function Ue(){f.toggleZoomMode({canvasViewport:ae.value,canvasDimensions:ie.value,selectedNodes:O.value,setViewport:le,fitView:L,zoomTo:X,setCenter:ue})}Jt(a((()=>{const e={ctrl_shift_o:Bt((e=>i("open:sub-workflow",e))),ctrl_c:{disabled:()=>Be(A.value),run:At((e=>i("copy:nodes",e)))},enter:Bt((e=>rt(e))),ctrl_a:()=>S(ee.value),"shift_+|+|=|shift_Equal|Equal":async()=>await Pt(),"shift+_|-|_|shift_Minus|Minus":async()=>await Vt(),0:async()=>await Ht(),1:async()=>await Lt(),ArrowUp:Bt(Pe),ArrowDown:Bt(Le),ArrowLeft:Bt(De),ArrowRight:Bt(Re),shift_ArrowLeft:Bt(Fe),shift_ArrowRight:Bt(He),l:()=>i("update:logs-open"),i:()=>i("update:logs:input-open"),o:()=>i("update:logs:output-open"),z:Ue};return r.readOnly?e:{...e,ctrl_x:At((e=>i("cut:nodes",e))),"delete|backspace":At((e=>i("delete:nodes",e))),ctrl_d:At((e=>i("duplicate:nodes",e))),d:At((e=>i("update:nodes:enabled",e))),p:At((e=>i("update:nodes:pin",e,"keyboard-shortcut"))),f2:Bt((e=>i("update:node:name",e))),tab:()=>i("create:node","tab"),shift_s:()=>i("create:sticky"),shift_f:()=>i("toggle:focus-panel"),ctrl_alt_n:()=>i("create:workflow"),ctrl_enter:()=>i("run:workflow"),ctrl_s:()=>{},shift_alt_t:async()=>await en({source:"keyboard-shortcut"}),alt_x:At((e=>i("extract-workflow",e))),c:()=>i("start-chat"),r:Bt((e=>i("replace:node",e))),shift_alt_u:Bt((e=>i("copy:test:url",e))),alt_u:Bt((e=>i("copy:production:url",e))),alt_i:At((e=>{return t=e,void(m.isFeatureEnabled&&(m.confirmNodes(t,"context_menu"),x.open({mode:"builder"})));var t}))}})),{disabled:je});const Ge=a((()=>O.value.length>0)),Ke=a((()=>O.value.map((e=>e.id)))),Ze=d(),Qe=function(e,t,n){const o=d(),a=K((a=>{const i=t.viewportRef.value?.getBoundingClientRect();if(!i)return;const r=t.project({x:a.clientX-i.x,y:a.clientY-i.y});o.value=e.value.flatMap((e=>{if(e.data?.disabled)return[];const o=t.nodeLookup.value.get(e.id);if(!o)return[];const a=We([o]),i=n(a);if(i.x>r.x||r.x>i.x+i.width||i.y>r.y||r.y>i.y+i.height)return[];const s=a.x+a.width/2-r.x,l=a.y+a.height/2-r.y;return[{id:e.id,squareDistance:s**2+l**2}]})).toSorted(((e,t)=>e.squareDistance-t.squareDistance))[0]?.id}),200,!0,!0);return w((()=>{t.vueFlowRef.value?.addEventListener("mousemove",a)})),g((()=>{t.vueFlowRef.value?.removeEventListener("mousemove",a)})),{id:o}}(a((()=>r.nodes.filter((e=>e.data?.render.type===qe.Default&&e.data.render.options.trigger)))),M,(e=>({x:e.x-2*e.width,y:e.y-e.height,width:4*e.width,height:3*e.height})));function Je(e,t){i("click:node:add",e,t)}function et(e){i("update:nodes:position",e)}function tt(e,t){i("update:node:position",e,t)}function nt(e){et(e.nodes.map((({id:e,position:t})=>({id:e,position:t}))))}function ot({event:e,node:t}){x.isOpen&&m.isFeatureEnabled&&(m.confirmNodes([t.id],"canvas_selection"),N.focusRequested++),i("click:node",t.id,Dt(e)),e.ctrlKey||e.metaKey||O.value.length<2||ct({ids:[t.id]})}function at(e){et(e.nodes.map((({id:e,position:t})=>({id:e,position:t}))))}function it(e){1===O.value.length&&(re.value=!1),i("selection:end",Dt(e))}function rt(e,t){r.eventBus.emit("nodes:action",{ids:[e],action:"update:node:activated"}),i("update:node:activated",e,t)}function st(e){i("update:node:deactivated",e)}function lt(){$(O.value)}function ut(){i("update:node:selected",Ze.value?.id)}function ct({ids:e,panIntoView:t}){if(lt(),S(e.map(oe).filter(Ve)),t){const t=e.map(oe).filter(Ve);if(0===t.length)return;le(ge(ae.value,ie.value,t,100),{duration:200,interpolate:"linear"})}}function dt(e){i("update:node:enabled",e)}function ht(e){i("delete:node",e)}function pt(e,t){i("update:node:parameters",e,t)}function vt(e){i("update:node:inputs",e),l((()=>M.updateNodeInternals([e])))}function ft(e){i("update:node:outputs",e),l((()=>M.updateNodeInternals([e])))}function gt(e){const t=M.nodeLookup.value.get(e);t&&(S([t]),f.focusNode(t,{canvasViewport:ae.value,canvasDimensions:ie.value,setCenter:ue}))}function _t(e){m.confirmNodes([e],"context_menu"),x.open({mode:"builder"})}k(O,(e=>{Ze.value&&e.find((e=>e.id===Ze.value?.id))||(Ze.value=e[e.length-1])})),k(Ke,(e=>{x.isOpen&&m.isFeatureEnabled&&m.setUnconfirmedFromCanvasSelection(e)})),k((()=>x.isOpen),(e=>{e&&Ke.value.length>0&&m.isFeatureEnabled&&m.setUnconfirmedFromCanvasSelection(Ke.value)}));const yt=d(!1),bt=d(),wt=d();function xt(e){i("create:connection:start",e),bt.value=e,yt.value=!1}function kt(e){i("create:connection",e),wt.value=e,yt.value=!0}function Et(e){wt.value?i("create:connection:end",wt.value,e):bt.value&&i("create:connection:cancelled",bt.value,Dt(e),e),wt.value=void 0,bt.value=void 0}function zt(e){i("delete:connection",e)}function Ct(e){i("click:connection:add",e)}const Tt=d("custom-arrow-head"),Mt=d({}),It=d({});he((({edge:e})=>{It.value={[e.id]:!0},Mt.value={[e.id]:!0}})),pe(K((({edge:e,event:t})=>{e.data.source.type===Nt.AiTool&&(!e.data.maxConnections||e.data.maxConnections>1)&&(Dt(t).y-e.targetY<64?It.value={[e.id]:!1}:It.value={[e.id]:!0})}),100)),ce((({edge:e})=>{It.value={[e.id]:!1},Mt.value={[e.id]:!1}}));const Ot=d({});function $t(e){i("run:node",e)}function At(e){return()=>{Ge.value&&e(Ke.value)}}function Bt(e){return()=>{Ze.value&&e(Ze.value.id)}}ve((({node:e})=>{Ot.value={[e.id]:!0}})),_e((({node:e})=>{Ot.value={[e.id]:!1}}));const jt=d(!1);function Dt(e){const t=A.value?.getBoundingClientRect()??{left:0,top:0},[n,o]=e?ye(e):[0,0];return J({x:n-t.left,y:o-t.top})}function Rt(e){i("click:pane",Dt(e))}async function Lt(){await L({maxZoom:1,padding:.2})}async function Pt(){await H()}async function Vt(){await q()}async function Ht(){await async function(e){await X(e)}(1)}function Wt({event:e}){($e.value||e instanceof WheelEvent)&&(jt.value=!0)}function Ft(){jt.value=!1}function Yt(){i("viewport:change",ae.value,ie.value)}!function(e,t,n){const o=d();k(e,((e,t,n)=>{if(!e)return;const a=new ResizeObserver((e=>{const t=e[0];t&&(o.value=t.contentRect)}));o.value={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight},a.observe(e),n((()=>a.disconnect()))}),{immediate:!0}),k(o,(async(e,o)=>{e&&o&&await n({x:t.value.x+(e.width-o.width)/2,y:t.value.y+(e.height-o.height)/2,zoom:t.value.zoom})}))}(A,ae,le);const Xt=a((()=>r.nodes.reduce(((e,t)=>(e[t.id]=t.data,e)),{}))),Ut=yn();function Gt(e,t){Ut.open(e,{source:"canvas",nodeIds:Ke.value,...t})}function Kt({event:e}){Gt(e)}function Zt(e,t,n){"node-button"===n?Ut.open(t,{source:n,nodeId:e}):Ke.value.length>1&&Ke.value.includes(e)?Gt(t,{nodeId:e}):(ct({ids:[e]}),Ut.open(t,{source:n,nodeId:e}))}async function Qt(e,t){switch(e){case"add_node":return i("create:node","context_menu");case"add_sticky":return i("create:sticky");case"copy":return i("copy:nodes",t);case"delete":return i("delete:nodes",t);case"select_all":return S(ee.value);case"deselect_all":return lt();case"duplicate":return i("duplicate:nodes",t);case"toggle_pin":return i("update:nodes:pin",t,"context-menu");case"execute":return i("run:node",t[0]);case"copy_production_url":return i("copy:production:url",t[0]);case"copy_test_url":return i("copy:test:url",t[0]);case"toggle_activation":return i("update:nodes:enabled",t);case"open":return rt(t[0]);case"rename":return i("update:node:name",t[0]);case"replace":return i("replace:node",t[0]);case"change_color":return r.eventBus.emit("nodes:action",{ids:t,action:"update:sticky:color"});case"tidy_up":return await en({source:"context-menu"});case"extract_sub_workflow":return i("extract-workflow",t);case"open_sub_workflow":return i("open:sub-workflow",t[0]);case"focus_ai_on_selected":return m.confirmNodes(t,"context_menu"),void x.open({mode:"builder"})}}async function en(e){e.nodeIdsFilter&&e.nodeIdsFilter.length>0&&(lt(),S(e.nodeIdsFilter.map(oe).filter(Ve)));const t=O.value.length>1,n=t?"selection":"all";i("tidy-up",{result:Ne(n),target:n,source:e.source},{trackEvents:e.trackEvents,trackHistory:e.trackHistory,trackBulk:e.trackBulk}),await l(),t?await async function(e){await P(We(e),{padding:2})}(O.value):await Lt()}function tn(e){e.preventDefault()}function nn(e){i("drag-and-drop",Dt(e),e)}const on=d(null),an=d(!1);function rn(e){return`minimap-node-${e.data?.render.type.replace(/\./g,"-")??"default"}`}function sn(){on.value&&(clearTimeout(on.value),on.value=null),an.value=!0}function ln(){on.value=setTimeout((()=>{an.value=!1}),1e3)}function un(){sn()}function cn(){ln()}function dn(){Ae()}k(jt,(e=>{e?sn():ln()}));const hn=d(!1);return w((()=>{r.eventBus.on("fitView",Lt),r.eventBus.on("nodes:select",ct),r.eventBus.on("nodes:selectAll",(()=>S(ee.value))),r.eventBus.on("tidyUp",en),window.addEventListener("blur",dn)})),g((()=>{r.eventBus.off("fitView",Lt),r.eventBus.off("nodes:select",ct),r.eventBus.off("tidyUp",en),window.removeEventListener("blur",dn)})),te((async()=>{await Lt(),ze.value=!0})),ne((()=>{hn.value=!0})),k([()=>r.readOnly,()=>r.suppressInteraction],(([e,t])=>{G(!e&&!t),Z.value=!t}),{immediate:!0}),k([re,se],(([e,t])=>i("update:has-range-selection",e||(t?.width??0)>0||(t?.height??0)>0))),k([M.nodes,()=>f.nodeNameToBeFocused],(([e,t])=>{const n=t&&e.find((e=>e.data.name===t));n&&setTimeout((()=>{f.focusNode(n,{canvasViewport:ae.value,canvasDimensions:ie.value,setCenter:ue})}))})),D(mt,{connectingHandle:bt,isExecuting:y(r,"executing"),initialized:hn,viewport:ae,isExperimentalNdvActive:z,isPaneMoving:jt}),t({executeContextMenuAction:Qt}),(t,n)=>(I(),_(u(Ee),{id:e.id,nodes:e.nodes,edges:e.connections,class:V(Ce.value),"apply-changes":!1,"connection-line-options":{markerEnd:u(Ie).ArrowClosed},"connection-radius":60,"pan-on-drag":Oe.value,"pan-on-scroll":"","snap-to-grid":"","snap-grid":[u(16),u(16)],"min-zoom":0,"max-zoom":u(f).isZoomedViewEnabled?u(f).maxCanvasZoom:4,"selection-key-code":Se.value,"zoom-activation-key-code":Me.value,"pan-activation-key-code":Me.value,"disable-keyboard-a11y":!0,"delete-key-code":null,"data-test-id":"canvas",onConnectStart:xt,onConnect:kt,onConnectEnd:Et,onPaneClick:Rt,onPaneContextMenu:Gt,onMove:Wt,onMoveEnd:Ft,onNodeDragStop:nt,onNodeClick:ot,onSelectionDragStop:at,onSelectionEnd:it,onSelectionContextMenu:Kt,onDragover:tn,onDrop:nn,onViewportChange:Yt},{"node-canvas-node":C((n=>[E(t.$slots,"node",Y(c({nodeProps:n})),(()=>[v(mr,b(n,{data:Xt.value[n.id],"read-only":e.readOnly,"event-bus":e.eventBus,hovered:Ot.value[n.id],"nearby-hovered":n.id===u(Qe).id.value,onDelete:ht,onRun:$t,onSelect:ut,onToggle:dt,onActivate:rt,onDeactivate:st,"onOpen:contextmenu":Zt,onUpdate:pt,"onUpdate:inputs":vt,"onUpdate:outputs":ft,onMove:tt,onAdd:Je,onFocus:gt,"onAdd:ai":_t}),B({_:2},[t.$slots.nodeToolbar?{name:"toolbar",fn:C((e=>[E(t.$slots,"nodeToolbar",Y(c(e)),void 0,!0)])),key:"0"}:void 0]),1040,["data","read-only","event-bus","hovered","nearby-hovered"])]),!0)])),"edge-canvas-edge":C((n=>[E(t.$slots,"edge",Y(c({edgeProps:n,arrowHeadMarkerId:Tt.value})),(()=>[v(ci,b(n,{"marker-end":`url(#${Tt.value})`,"read-only":e.readOnly,hovered:Mt.value[n.id],"bring-to-front":It.value[n.id],onAdd:Ct,onDelete:zt,"onUpdate:label:hovered":e=>{return t=n.id,o=e,It.value={[t]:!0},void(Mt.value[t]=o);var t,o}}),null,16,["marker-end","read-only","hovered","bring-to-front","onUpdate:label:hovered"])]),!0)])),"connection-line":C((e=>[v(ja,Y(c(e)),null,16)])),default:C((()=>[v(Oa,{id:Tt.value},null,8,["id"]),E(t.$slots,"canvas-background",Y(c({viewport:u(ae)})),(()=>[v(gn,{viewport:u(ae),striped:e.readOnly},null,8,["viewport","striped"])]),!0),v(j,{name:"minimap"},{default:C((()=>[W(v(u(Ma),{"data-test-id":"canvas-minimap","aria-label":"n8n Minimap",height:120,width:200,position:u(Te).BottomLeft,pannable:"",zoomable:"","node-class-name":rn,"node-border-radius":16,onMouseenter:un,onMouseleave:cn},null,8,["position"]),[[R,an.value]])])),_:1}),e.hideControls?s("",!0):(I(),_(ai,{key:0,"data-test-id":"canvas-controls",class:V(u(o).canvasControls),position:e.controlsPosition,"show-interactive":!1,zoom:u(ae).zoom,"read-only":e.readOnly,"is-experimental-ndv-active":z.value,onZoomToFit:Lt,onZoomIn:Pt,onZoomOut:Vt,onResetZoom:Ht,onTidyUp:n[0]||(n[0]=e=>en({source:"canvas-button"})),onToggleZoomMode:Ue},null,8,["class","position","zoom","read-only","is-experimental-ndv-active"])),(I(),_(F,null,{default:C((()=>[v(bn,{onAction:Qt})])),_:1}))])),_:3},8,["id","nodes","edges","class","connection-line-options","pan-on-drag","snap-grid","max-zoom","selection-key-code","zoom-activation-key-code","pan-activation-key-code"]))}}),e("n",pe(yr,[["__cssModules",{$style:{canvas:"_canvas_wikel_125",ready:"_ready_wikel_131",isExperimentalNdvActive:"_isExperimentalNdvActive_wikel_134"}}],["__scopeId","data-v-b4ad6171"]]))}}}));
//# sourceMappingURL=useCanvasMapping-legacy-B6GW_hUG.js.map