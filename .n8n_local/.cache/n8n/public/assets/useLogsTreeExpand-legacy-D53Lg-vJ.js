!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./NodeIcon-legacy-DOI-M5xN.js","./useRunWorkflow-legacy-4stFR283.js","./dateFormatter-legacy-Di9U0PH-.js","./AnimatedSpinner-legacy-CrsyPpHZ.js"],(function(e,n){var t,a,o,l,r,i,s,d,c,u,g,_,v,m,p,f,y,b,x,k,h,w,z,I,D,E,T,j,B,N,C,S,$,O,R,q,L,M,A,P,U,V,H,W,F,G,J,Q,Y,K,X,Z,ee,ne,te,ae,oe,le,re,ie,se,de,ce,ue,ge,_e,ve,me,pe,fe,ye,be,xe,ke,he,we,ze,Ie,De,Ee,Te,je,Be,Ne;function Ce(e){return e.reduce(((e,n)=>{const t=n?.json?.tokenUsage??n?.json?.tokenUsageEstimate;return t?G(e,{...t,isEstimate:!!n?.json.tokenUsageEstimate}):e}),Q)}function Se(e){return Ce(Object.values(e.data??{}).flat().flat())}function $e(e,n,t,a){const o=function(e,n,t,a,o=[]){return{parent:n.parent,node:e,id:`${n.workflow.id}:${e.id}:${[...n.ancestorRunIndexes,t].join(":")}`,runIndex:t,runData:a,children:o,consumedTokens:a?Se(a):Q,workflow:n.workflow,executionId:n.executionId,execution:n.data,isSubExecution:n.isSubExecution}}(e,a,t??0,n),l=function(e,n,t,a){const o=Ue(e);if(void 0!==o){const n=a.workflows[o.workflowId],l=a.subWorkflowData[o.executionId];return n&&l?qe(void 0,{...a,parent:e,ancestorRunIndexes:[...a.ancestorRunIndexes,t??0],workflow:n,executionId:o.executionId,data:l,isSubExecution:!0}):[]}function l(a){return(a?.previousNode===n.name||Fe(e)&&"PartialExecutionToolExecutor"===a?.previousNode)&&(void 0===t||(a.previousNodeRun??0)===t)}return a.workflow.getParentNodes(n.name,"ALL_NON_MAIN",1).flatMap((n=>(a.data.resultData.runData[n]??[]).flatMap(((o,r)=>{if(!(o.source.some((e=>null!==e))?o.source.some(l):void 0===t||r===t))return[];const i=a.workflow.getNode(n);return i?$e(i,o,r,{...a,ancestorRunIndexes:[...a.ancestorRunIndexes,t??0],parent:e}):[]}))))}(o,e,t,a).sort(Ae);return void 0!==n&&!e.disabled||0!==l.length?(o.children=l,[o]):[]}function Oe(...e){return e.reduce(G,Q)}function Re(e,n){const t=e.executionId;return function e(a){return n||a.executionId===t?Oe(a.consumedTokens,...a.children.map(e)):Q}(e)}function qe(e,n){const t=n.data.resultData.runData,a=Object.entries(t).flatMap((([a,o])=>{const l=n.workflow.getNode(a);if(null===l||e&&e.rootNodeId!==l.id)return[];const r=n.workflow.getChildNodes(a,"ALL_NON_MAIN");if(0===r.length){const n=o.map(((e,n)=>({node:l,task:e,runIndex:n,nodeHasMultipleRuns:o.length>1})));return e?n.filter((n=>n.runIndex===e.rootNodeRunIndex)):n}if(r.some((e=>(t[e]??[]).length>0)))return[];const i=n.workflow.getNode(r[0]);return null===i?[]:[{node:i,nodeHasMultipleRuns:!1}]})),o=new Set;return a.filter((e=>void 0!==e.task||!o.has(e.node.id)&&(o.add(e.node.id),!0))).flatMap((({node:e,runIndex:t,task:a,nodeHasMultipleRuns:o})=>$e(e,a,o?t:void 0,n))).sort(Ae)}function Le(e,n){for(const t of n){if(e(t))return t;const n=Le(e,t.children);if(n)return n}}function Me(e,n,t=[]){for(const a of e)t.push(a),n[a.id]||Me(a.children,n,t);return t}function Ae(e,n){return void 0===e.runData?e.children.length>0?Ae(e.children[0],n):0:void 0===n.runData?n.children.length>0?Ae(e,n.children[0]):0:e.runData.startTime===n.runData.startTime?e.runData.executionIndex-n.runData.executionIndex:e.runData.startTime-n.runData.startTime}function Pe(e){return void 0!==Ue(e)}function Ue(e){const n=e.runData?.metadata?.subExecution;return n?{workflowId:n.workflowId,executionId:n.executionId}:le(e.runData?.error)?.subExecution}function Ve(e){return"@n8n/n8n-nodes-langchain.manualChatTrigger"===e.type&&e.typeVersion<1.1?"input":(e.type,"chatInput")}function He(e,n,t){const a=e.lastNodeExecuted;if(!a)return;const o=(0,xe.default)(e.runData,a)??[],l=o[o.length-1];let r;if((0,xe.default)(l,"error"))r="[ERROR: "+(0,xe.default)(l,"error.message")+"]";else{const e=(0,xe.default)(l,"data.main");let n;if(e&&Array.isArray(e))for(const t of e)if(t?.[0]?.json&&(n=We(t[0].json),n))break;if(n=n??t,!n)return;r=n}return{text:r,sender:"bot",id:n??Z()}}function We(e){if(!e||(0,ke.default)(e))return;const n=["output","text","response.text","message"].find((n=>(0,xe.default)(e,n)));if(!n)return JSON.stringify(e,null,2);const t=(0,xe.default)(e,n);return"object"==typeof t?"```json\n"+JSON.stringify(t,null,2)+"\n```":t?.toString()??""}function Fe(e){return void 0===e.runData}return e({_:Fe,b:function(e,n){if(!e?.data)return[];const t=function(e,n){const t=e.nodes.find(J);if(void 0===t)return;const a=Ve(t),o=(n.runData[t.name]??[])[0],l=o?.data?.[re.Main]?.[0]?.[0]?.json?.[a];return void 0!==o&&"string"==typeof l?{text:l,sender:"user",id:Z()}:void 0}(e.workflowData,e.data.resultData),a=He(e.data.resultData,e.id,n);return[...t?[t]:[],...a?[a]:[]]},c:function(e,n){return Le((n=>n.id===e),n)},d:Ce,f:function(e){let n=0,t=e;for(;void 0!==t.parent;)t=t.parent,n++;return n},g:Oe,h:Re,l:Le,m:Ve,n:function({isEnabled:e,filter:n}={}){const t=H(),a=Y(),l=F(),r=X(),i=c(),s=o((()=>"running"===a.workflowExecutionData?.status&&Object.keys(a.workflowExecutionData.data?.resultData.runData??{}).length>1?ie:0)),d=function(e,n){const t=E(e.value);return f(e,C((e=>{t.value=e}),n,!0,!0),{immediate:!0}),t}(i,s),u=o((()=>d.value?.response.workflowData)),g=c({}),_=c({}),v=c(),m=o((()=>Object.values(v.value?.nodes??{}).reduce(((e,n)=>{const t=a.getNodeById(n.id);return e[n.id]={deleted:!t,disabled:t?.disabled??!1,name:t?.name??n.name},e}),{}))),p=o((()=>[Object.values(v.value?.nodes??{}),a.workflow.nodes].some((e=>e.some(J))))),y=o((()=>{if(void 0!==e&&!e.value||!d.value||!v.value)return[];const t=function(e,n){if(!n.data)return n;const t=[...new Set(Object.keys(e).concat(Object.keys(n.data.resultData.runData))).values()],a=Object.fromEntries(t.map((t=>{const a=n.data?.resultData.runData[t]??[];return[t,a.concat((e[t]??[]).filter((e=>!a.some((n=>n.executionIndex===e.executionIndex&&n.startTime===e.startTime))&&a.every((n=>n.startTime<e.startTime)))).map((e=>({...e,executionTime:0,executionStatus:"running"}))))]})));return{...n,data:{...n.data,resultData:{...n.data.resultData,runData:a}}}}(d.value.startData,d.value.response);return function(e,n,t={},a={},o){return qe(o,{parent:void 0,ancestorRunIndexes:[],executionId:n.id,workflow:e,workflows:t,data:n.data??ee(),subWorkflowData:a,isSubExecution:!1})}(v.value,t,_.value,g.value,n?.value)}));function b(){i.value=void 0,l.setWorkflowExecutionData(null),t.updateNodesExecutionIssues(),a.fetchLastSuccessfulExecution()}return f([()=>a.workflowExecutionData?.id,()=>a.workflowExecutionData?.workflowData.id,()=>a.workflowExecutionData?.status,()=>a.workflowExecutionResultDataLastUpdate,()=>a.workflowExecutionStartedData],C((([e],[n])=>{var t;i.value=null===a.workflowExecutionData?void 0:{response:(t=a.workflowExecutionData,{...t,data:oe({...t.data,resultData:{...t.data?.resultData,runData:Object.fromEntries(Object.entries(t.data?.resultData.runData??{}).map((([e,n])=>[e,[...n]])))}})}),startData:a.workflowExecutionStartedData?.[1]??{}},e!==n&&(g.value={},_.value={})}),s,!0,!0),{immediate:!0}),f((()=>a.workflowId),(()=>{b()})),f(u,(e=>{v.value=e?new ae({...e,nodeTypes:a.getNodeTypes()}):void 0}),{immediate:!0}),{execution:o((()=>d.value?.response)),entries:y,hasChat:p,latestNodeNameById:m,resetExecutionData:b,loadSubExecution:async function(e){const n=Ue(e);if(i.value&&void 0!==n)try{const e=await a.fetchExecutionDataById(n.executionId),t=e?.data?W(e.data):void 0;if(!t||!e)throw Error("Data is missing");g.value[n.executionId]=t,_.value[n.workflowId]=new ae({...e.workflowData,nodeTypes:a.getNodeTypes()})}catch(t){r.showError(t,"Unable to load sub execution")}}}},p:function(e,n,t){const a=e.findIndex((e=>e.id===n));return-1===a?void 0:e[a+t]},s:He,t:function(e,n){const t=E({});return{flatLogEntries:o((()=>Me(e.value,t.value))),toggleExpanded:function(e,a){Pe(e)&&0===e.children.length?n(e):t.value={...t.value,[e.id]:void 0===a?!t.value[e.id]:!a}}}},u:function(e,n,t){switch(e.type){case"initial":return t?void 0:function(e){const n=Le((e=>!!e.runData?.error),e);return n||(Le((e=>"@n8n/n8n-nodes-langchain.agent"===e.node.type||"@n8n/n8n-nodes-langchain.agent"===e.parent?.node.type&&Fe(e.parent)),e)||e[e.length-1])}(n);case"none":return;case"selected":{const a=Le((n=>n.id===e.entry.id),n);if(void 0===a&&!t)for(let t=e.entry.runIndex-1;t>=0;t--){const a=Le((n=>n.workflow.id===e.entry.workflow.id&&n.node.id===e.entry.node.id&&n.runIndex===t),n);if(void 0!==a)return a}return a}}},v:function(e){return void 0!==e.parent&&e.parent.executionId===e.executionId},y:async function(e){if(!e||0===e.length)return[];const n=e.map((async e=>new Promise(((n,t)=>{const a=new FileReader;a.onload=()=>n({name:e.name,type:e.type,data:a.result}),a.onerror=()=>t(new Error(`Error reading file: ${a.error?.message??"Unknown error"}`)),a.readAsDataURL(e)}))));return await Promise.all(n)}}),{setters:[function(e){t=e.o,a=e.t},function(e){o=e.C,l=e.Cn,r=e.D,i=e.E,s=e.G,d=e.Gt,c=e.It,u=e.M,g=e.P,_=e.T,v=e.Vt,m=e.W,p=e._,f=e._t,y=e.bn,b=e.bt,x=e.et,k=e.h,h=e.it,w=e.j,z=e.mt,I=e.vn,D=e.w,E=e.zt},function(e){T=e.B,j=e.V,B=e.bt,N=e.m,C=e.st,S=e.yt},function(e){$=e.Hi,O=e.Mi,R=e.Oi,q=e.Ui,L=e.Vi,M=e.m,A=e.wi},function(e){P=e.t},function(e){U=e.$,V=e.C,H=e.It,W=e.Qi,F=e.Vt,G=e.c,J=e.d,Q=e.l,Y=e.s,K=e.u,X=e.yr,Z=e.zr},function(e){ee=e.$i,e.An,ne=e.Fo,e.Gt,te=e.Lo,ae=e.Oi,e.do,oe=e.ea,le=e.ki,re=e.so,ie=e.tl},function(e){se=e.C,de=e.O,ce=e.k,ue=e.x,ge=e.y},function(e){e.w},function(e){_e=e.t},function(e){ve=e.t},function(e){me=e.a,pe=e.i},function(e){fe=e.t}],execute:function(){(ye=document.createElement("style")).textContent='._name_iqwm2_125{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}._name_iqwm2_125 del:not(:last-child){margin-right:var(--spacing--4xs)}._container_zvanm_125{z-index:1;cursor:pointer;justify-content:stretch;align-items:center;display:flex;position:relative;overflow:hidden}._container_zvanm_125:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-right:var(--spacing--5xs)}._container_zvanm_125:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-right:var(--spacing--5xs)}._container_zvanm_125:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-left:var(--spacing--5xs)}._container_zvanm_125:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-left:var(--spacing--5xs)}._container_zvanm_125>*{text-overflow:ellipsis;white-space:nowrap;padding:var(--spacing--2xs);overflow:hidden}._background_zvanm_142{left:calc(var(--indent-depth)*32px);width:calc(100% - var(--indent-depth)*32px);border-radius:var(--radius);z-index:-1;height:100%;position:absolute;top:0}._selected_zvanm_153 ._background_zvanm_142{background-color:var(--color--foreground)}._container_zvanm_125:hover:not(._selected_zvanm_153) ._background_zvanm_142{background-color:var(--color--background--light-1)}._selected_zvanm_153:not(:hover)._error_zvanm_159 ._background_zvanm_142{background-color:var(--callout--color--background--danger)}._indent_zvanm_163{width:var(--spacing--xl);flex-grow:0;flex-shrink:0;align-self:stretch;margin-bottom:0;position:relative;overflow:hidden}._indent_zvanm_163._connectorCurved_zvanm_172:before{content:"";left:var(--spacing--sm);bottom:var(--spacing--sm);border:2px solid var(--canvas--dot--color);width:var(--spacing--lg);height:var(--spacing--lg);border-radius:var(--radius--lg);position:absolute}._indent_zvanm_163._connectorStraight_zvanm_182:after{content:"";left:var(--spacing--sm);border-left:2px solid var(--canvas--dot--color);height:100%;position:absolute;top:0}._icon_zvanm_191{margin-left:var(--row-gap-thickness);flex-grow:0;flex-shrink:0}._name_zvanm_198{flex-grow:1;flex-basis:0}._name_zvanm_198:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-left:0}._name_zvanm_198:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))){padding-left:0}._name_zvanm_198:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-right:0}._name_zvanm_198:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)){padding-right:0}._timeTook_zvanm_204{flex-grow:0;flex-shrink:0;width:20%}._timeTook_zvanm_204 ._statusTextIcon_zvanm_209{margin-right:var(--spacing--5xs);vertical-align:text-bottom}._startedAt_zvanm_214{flex-grow:0;flex-shrink:0;width:25%}._consumedTokens_zvanm_220{text-align:right;flex-grow:0;flex-shrink:0;width:15%}._compactErrorIcon_zvanm_227{flex-grow:0;flex-shrink:0;justify-content:center;align-items:center;width:26px;display:flex}._container_zvanm_125:hover ._compactErrorIcon_zvanm_227{display:none}._partialExecutionButton_zvanm_239,._openNdvButton_zvanm_240{visibility:hidden;transition:none}._container_zvanm_125._compact_zvanm_227 ._partialExecutionButton_zvanm_239,._container_zvanm_125._compact_zvanm_227 ._openNdvButton_zvanm_240{display:none}._container_zvanm_125:hover ._partialExecutionButton_zvanm_239:not(._unavailable_zvanm_250),._container_zvanm_125:hover ._openNdvButton_zvanm_240:not(._unavailable_zvanm_250){visibility:visible;display:inline-flex}._partialExecutionButton_zvanm_239,._openNdvButton_zvanm_240,._toggleButton_zvanm_258{color:var(--color--text);background:0 0;border:none;flex-grow:0;flex-shrink:0;justify-content:center;align-items:center}._partialExecutionButton_zvanm_239:hover,._openNdvButton_zvanm_240:hover,._toggleButton_zvanm_258:hover{background:0 0}._partialExecutionButton_zvanm_239:disabled,._openNdvButton_zvanm_240:disabled,._toggleButton_zvanm_258:disabled{visibility:hidden!important}._toggleButton_zvanm_258{display:inline-flex}._statusIcon_zvanm_282{color:var(--color--text--tint-1);width:26px;height:26px;padding:var(--spacing--3xs);flex-grow:0;flex-shrink:0}._statusIcon_zvanm_282._placeholder_zvanm_290{color:transparent}._tree_1j0rt_125{padding:0 var(--spacing--2xs)var(--spacing--2xs)var(--spacing--2xs);scroll-behavior:smooth}._container_1j0rt_130:not(._staticScrollBar_1j0rt_130) ._tree_1j0rt_125{scroll-padding-block:var(--spacing--3xs)}@supports not selector(::-webkit-scrollbar){._container_1j0rt_130:not(._staticScrollBar_1j0rt_130) ._tree_1j0rt_125{scrollbar-width:thin}}@supports selector(::-webkit-scrollbar){._container_1j0rt_130:not(._staticScrollBar_1j0rt_130) ._tree_1j0rt_125{padding-right:var(--spacing--5xs);scrollbar-gutter:stable}._container_1j0rt_130:not(._staticScrollBar_1j0rt_130) ._tree_1j0rt_125::-webkit-scrollbar{width:var(--spacing--4xs)}._container_1j0rt_130:not(._staticScrollBar_1j0rt_130) ._tree_1j0rt_125::-webkit-scrollbar-thumb{border-radius:var(--spacing--4xs);background:var(--color--foreground--shade-1)}}._tree_1j0rt_125 .el-icon{display:none}\n/*$vite$:1*/',document.head.appendChild(ye);try{n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(c=(new n.Error).stack)&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[c]="28c520fe-7c84-4401-b5c2-5f9e415b5310",n._sentryDebugIdIdentifier="sentry-dbid-28c520fe-7c84-4401-b5c2-5f9e415b5310")}catch(n){}var n,c;be=a(((e,n)=>{var t=te(),a=ne(),o=ce(),l=N(),r=ge(),i=de(),s=ue(),d=se(),c=Object.prototype.hasOwnProperty;n.exports=function(e){if(null==e)return!0;if(r(e)&&(l(e)||"string"==typeof e||"function"==typeof e.splice||i(e)||d(e)||o(e)))return!e.length;var n=a(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(s(e))return!t(e).length;for(var u in e)if(c.call(e,u))return!1;return!0}})),xe=t(M(),1),ke=t(be(),1),e("o",he=g({__name:"ConsumedTokensDetails",props:{consumedTokens:{}},setup(e){const n=S();return(t,a)=>(x(),r("div",null,[u(d(L),{bold:!0,size:"small"},{default:b((()=>[w(l(d(n).baseText("runData.aiContentBlock.tokens.prompt"))+" "+l(d(n).baseText("runData.aiContentBlock.tokens",{interpolate:{count:d(K)(e.consumedTokens,"prompt")}})),1)])),_:1}),a[0]||(a[0]=D("br",null,null,-1)),u(d(L),{bold:!0,size:"small"},{default:b((()=>[w(l(d(n).baseText("runData.aiContentBlock.tokens.completion"))+" "+l(d(n).baseText("runData.aiContentBlock.tokens",{interpolate:{count:d(K)(e.consumedTokens,"completion")}})),1)])),_:1})]))}})),e("a",we=g({__name:"LogsViewConsumedTokenCountText",props:{consumedTokens:{}},setup(e){const n=S();return(t,a)=>void 0!==e.consumedTokens?(x(),_(d(R),{key:0,enterable:!1},{content:b((()=>[u(he,{"consumed-tokens":e.consumedTokens},null,8,["consumed-tokens"])])),default:b((()=>[D("span",null,l(d(n).baseText("runData.aiContentBlock.tokens",{interpolate:{count:d(K)(e.consumedTokens,"total")}})),1)])),_:1})):i("",!0)}})),ze={key:0},Ie=g({__name:"LogsViewNodeName",props:{name:{},isError:{type:Boolean},isDeleted:{type:Boolean}},setup:e=>(n,t)=>(x(),_(d(L),{tag:"div",bold:!0,size:"small",class:I(n.$style.name),color:e.isError?"danger":void 0},{default:b((()=>[e.isDeleted?(x(),r("del",ze,l(e.name),1)):(x(),r(p,{key:1},[w(l(e.name),1)],64))])),_:1},8,["class","color"]))}),e("i",De=P(Ie,[["__cssModules",{$style:{name:"_name_iqwm2_125"}}]])),Ee=t(U(),1),Te=["aria-expanded","aria-selected"],je=g({__name:"LogsOverviewRow",props:{data:{},isSelected:{type:Boolean},isReadOnly:{type:Boolean},shouldShowTokenCountColumn:{type:Boolean},isCompact:{type:Boolean},latestInfo:{},expanded:{type:Boolean},canOpenNdv:{type:Boolean}},emits:["toggleExpanded","toggleSelected","triggerPartialExecution","openNdv"],setup(e,{emit:n}){const t=e,a=n,c=z("containerRef"),g=S(),v=T({interval:1e3}),m=V(),E=o((()=>m.getNodeType(t.data.node.type))),j=o((()=>"running"===t.data.runData?.executionStatus)),N=o((()=>"waiting"===t.data.runData?.executionStatus)),C=o((()=>!j.value&&!N.value)),R=o((()=>!!t.data.runData?.error)),M=o((()=>C.value?"logs.overview.body.summaryText.in":"logs.overview.body.summaryText.for")),A=o((()=>{if(void 0===t.data.runData)return"—";const e=new Date(t.data.runData.startTime);return g.baseText("logs.overview.body.started",{interpolate:{time:`${me(e,!0)}, ${pe(e)}`}})})),P=o((()=>(0,Ee.default)(t.data.runData?.executionStatus??""))),U=o((()=>t.data.runData?g.displayTimer(C.value?t.data.runData.executionTime:1e3*Math.floor((v.value-t.data.runData.startTime)/1e3),!0):void 0)),H=o((()=>t.shouldShowTokenCountColumn?Re(t.data,!1):void 0)),W=o((()=>t.data.children.length>0||Pe(t.data))),F=o((()=>{const e=[];let n=t.data;for(;void 0!==n.parent;){const a=n.parent?.children??[],o=a[a.length-1];e.unshift({straight:o?.id!==n.id,curved:n===t.data}),n=n.parent}return e}));return f((()=>t.isSelected),(e=>{s((()=>{if(e){const e=document.activeElement;"chat-input"!==e?.getAttribute("data-test-id")&&null===e?.closest('[data-test-id="canvas-chat"]')&&c.value?.focus()}}))}),{immediate:!0}),(n,o)=>(x(),r("div",{ref:"containerRef",role:"treeitem",tabindex:"-1","aria-expanded":t.data.children.length>0&&t.expanded,"aria-selected":t.isSelected,class:I({[n.$style.container]:!0,[n.$style.compact]:t.isCompact,[n.$style.error]:R.value,[n.$style.selected]:t.isSelected}),onClick:o[3]||(o[3]=k((e=>a("toggleSelected")),["stop"]))},[(x(!0),r(p,null,h(F.value,((e,t)=>(x(),r("div",{key:t,class:I({[n.$style.indent]:!0,[n.$style.connectorCurved]:e.curved,[n.$style.connectorStraight]:e.straight})},null,2)))),128)),D("div",{class:I(n.$style.background),style:y({"--indent-depth":F.value.length})},null,6),u(_e,{"node-type":E.value,size:16,class:I(n.$style.icon)},null,8,["node-type","class"]),u(De,{class:I(n.$style.name),name:e.latestInfo?.name??t.data.node.name,"is-error":R.value,"is-deleted":e.latestInfo?.deleted??!1},null,8,["class","name","is-error","is-deleted"]),e.isCompact?i("",!0):(x(),_(d(L),{key:0,tag:"div",color:"text-light",size:"small",class:I(n.$style.timeTook)},{default:b((()=>[void 0!==U.value?(x(),_(d(B),{key:0,keypath:M.value,scope:"global"},{status:b((()=>[u(d(L),{color:R.value?"danger":void 0,bold:R.value,size:"small"},{default:b((()=>[j.value?(x(),_(fe,{key:0,class:I(n.$style.statusTextIcon)},null,8,["class"])):N.value?(x(),_(d(q),{key:1,icon:"status-waiting",class:I(n.$style.statusTextIcon)},null,8,["class"])):R.value?(x(),_(d(q),{key:2,icon:"triangle-alert",class:I(n.$style.statusTextIcon)},null,8,["class"])):i("",!0),w(" "+l(P.value),1)])),_:1},8,["color","bold"])])),time:b((()=>[w(l(U.value),1)])),_:1},8,["keypath"])):(x(),r(p,{key:1},[w("—")],64))])),_:1},8,["class"])),e.isCompact?i("",!0):(x(),_(d(L),{key:1,tag:"div",color:"text-light",size:"small",class:I(n.$style.startedAt)},{default:b((()=>[w(l(A.value),1)])),_:1},8,["class"])),e.isCompact||void 0===H.value?i("",!0):(x(),_(d(L),{key:2,tag:"div",color:"text-light",size:"small",class:I(n.$style.consumedTokens)},{default:b((()=>[H.value.totalTokens>0&&(0===t.data.children.length||!t.expanded)?(x(),_(we,{key:0,"consumed-tokens":H.value},null,8,["consumed-tokens"])):i("",!0)])),_:1},8,["class"])),R.value&&e.isCompact?(x(),_(d(q),{key:3,size:"medium",color:"danger",icon:"triangle-alert",class:I(n.$style.compactErrorIcon)},null,8,["class"])):i("",!0),!e.canOpenNdv||e.isCompact&&t.latestInfo?.deleted?i("",!0):(x(),_(d(O),{key:4,variant:"subtle",size:"small",icon:"square-pen","icon-size":"medium",style:y({visibility:t.data.isSubExecution?"hidden":void 0}),disabled:t.latestInfo?.deleted,class:I(n.$style.openNdvButton),"aria-label":d(g).baseText("logs.overview.body.open"),onClick:o[0]||(o[0]=k((e=>a("openNdv")),["stop"]))},null,8,["style","disabled","class","aria-label"])),e.isCompact&&(t.isReadOnly||t.latestInfo?.deleted||t.latestInfo?.disabled)?i("",!0):(x(),_(d(O),{key:5,variant:"subtle",size:"small",icon:"play","aria-label":d(g).baseText("logs.overview.body.run"),class:I([n.$style.partialExecutionButton,F.value.length>0?n.$style.unavailable:""]),disabled:t.latestInfo?.deleted||t.latestInfo?.disabled,onClick:o[1]||(o[1]=k((e=>a("triggerPartialExecution")),["stop"]))},null,8,["aria-label","class","disabled"])),e.isCompact&&!W.value?(x(),r(p,{key:6},[j.value?(x(),_(fe,{key:0,class:I(n.$style.statusIcon)},null,8,["class"])):N.value?(x(),_(d(q),{key:1,icon:"status-waiting",class:I(n.$style.statusIcon)},null,8,["class"])):i("",!0)],64)):i("",!0),!e.isCompact||W.value?(x(),_(d($),{key:7,variant:"subtle",iconOnly:"",size:"small",icon:t.expanded?"chevron-down":"chevron-up","icon-size":"medium",style:y({visibility:W.value?void 0:"hidden"}),class:I(n.$style.toggleButton),"aria-label":d(g).baseText("logs.overview.body.toggleRow"),onClick:o[2]||(o[2]=k((e=>a("toggleExpanded")),["stop"]))},null,8,["icon","style","class","aria-label"])):i("",!0)],10,Te))}}),Be=P(je,[["__cssModules",{$style:{container:"_container_zvanm_125",background:"_background_zvanm_142",selected:"_selected_zvanm_153",error:"_error_zvanm_159",indent:"_indent_zvanm_163",connectorCurved:"_connectorCurved_zvanm_172",connectorStraight:"_connectorStraight_zvanm_182",icon:"_icon_zvanm_191",name:"_name_zvanm_198",timeTook:"_timeTook_zvanm_204",statusTextIcon:"_statusTextIcon_zvanm_209",startedAt:"_startedAt_zvanm_214",consumedTokens:"_consumedTokens_zvanm_220",compactErrorIcon:"_compactErrorIcon_zvanm_227",partialExecutionButton:"_partialExecutionButton_zvanm_239",openNdvButton:"_openNdvButton_zvanm_240",compact:"_compact_zvanm_227",unavailable:"_unavailable_zvanm_250",toggleButton:"_toggleButton_zvanm_258",statusIcon:"_statusIcon_zvanm_282",placeholder:"_placeholder_zvanm_290"}}]]),Ne=g({__name:"LogsOverviewRows",props:{selected:{},isReadOnly:{type:Boolean},isCompact:{type:Boolean},shouldShowTokenCountColumn:{type:Boolean},canOpenNdv:{type:Boolean},flatLogEntries:{},latestNodeInfo:{},execution:{}},emits:["select","openNdv","toggleExpanded"],setup(e,{emit:n}){const t=n,a=ve({router:A()}),l=o((()=>e.flatLogEntries.reduce(((e,n,t,a)=>(e[n.id]=a[t+1]?.parent?.id===n.id,e)),{}))),i=j(v((()=>e.flatLogEntries)),{itemHeight:32});return f([()=>"running"===e.execution?.status,()=>e.flatLogEntries.length],(async([n,t],[a])=>{await s((()=>{void 0===e.selected&&(n||a)&&i.scrollTo(t-1)}))}),{immediate:!0}),f((()=>e.selected?.id),(async n=>{await s((()=>{if(void 0===n)return;const t=i.list.value.some((e=>e.data.id===n))?-1:e.flatLogEntries.findIndex((e=>e.id===n));t>=0&&i.scrollTo(t)}))}),{immediate:!0}),(n,o)=>(x(),r("div",m({class:n.$style.tree},d(i).containerProps),[D("div",m({role:"tree"},d(i).wrapperProps.value),[(x(!0),r(p,null,h(d(i).list.value,(({data:n,index:o})=>(x(),_(Be,{key:o,data:n,"is-read-only":e.isReadOnly,"is-selected":n.id===e.selected?.id,"is-compact":e.isCompact,"should-show-token-count-column":e.shouldShowTokenCountColumn,"latest-info":e.latestNodeInfo[n.node.id],expanded:l.value[n.id],"can-open-ndv":e.canOpenNdv,onToggleExpanded:e=>t("toggleExpanded",n),onOpenNdv:e=>t("openNdv",n),onTriggerPartialExecution:t=>async function(n){const t=e.latestNodeInfo[n.node.id]?.name??n.node.name;t&&await a.runWorkflow({destinationNode:{nodeName:t,mode:"inclusive"}})}(n),onToggleSelected:a=>t("select",e.selected?.id===n.id?void 0:n)},null,8,["data","is-read-only","is-selected","is-compact","should-show-token-count-column","latest-info","expanded","can-open-ndv","onToggleExpanded","onOpenNdv","onTriggerPartialExecution","onToggleSelected"])))),128))],16)],16))}}),e("r",P(Ne,[["__cssModules",{$style:{tree:"_tree_1j0rt_125",container:"_container_1j0rt_130",staticScrollBar:"_staticScrollBar_1j0rt_130"}}]]))}}}));
//# sourceMappingURL=useLogsTreeExpand-legacy-D53Lg-vJ.js.map