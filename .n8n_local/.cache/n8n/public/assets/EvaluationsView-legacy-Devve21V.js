!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./table-legacy-DOFEFtje.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./dateFormatter-legacy-Di9U0PH-.js","./orderBy-legacy-BePN9Mxt.js","./AnimatedSpinner-legacy-CrsyPpHZ.js","./dist-legacy-XeDNUblt.js","./evaluation.constants-legacy-DfABV13N.js"],(function(e,t){var r,a,n,s,o,l,i,c,d,u,p,_,g,y,m,f,b,v,h,w,x,T,k,C,$,R,M,j,S,A,B,D,O,E,H,I,z,L,V,U,W,F,N,X,P,K,q,G,J,Y,Q;return{setters:[function(e){r=e.o},function(e){a=e.C,n=e.Cn,s=e.D,o=e.Gt,l=e.It,i=e.M,c=e.P,d=e.T,u=e.U,p=e._,_=e._t,g=e.bt,y=e.et,m=e.ft,f=e.it,b=e.j,v=e.k,h=e.vn,w=e.vt,x=e.w},function(e){T=e.C,k=e.bt,C=e.yt},function(e){$=e.Hi,R=e.Oi,M=e.Ui,j=e.Vi,S=e.ft,A=e.pt,B=e.wi,D=e.zi},function(e){O=e.t},function(e){},function(e){},function(e){E=e.T,H=e.yr},function(e){I=e.rs},function(e){},function(e){},function(e){z=e.t},function(e){},function(e){L=e.t},function(e){V=e.t},function(e){U=e.t},function(e){W=e.r},function(e){F=e.n,N=e.r,X=e.t}],execute:function(){(P=document.createElement("style")).textContent="._metricsChartContainer_1i2e2_125{background:var(--color--background--light-3);border-radius:var(--radius--lg);border:1px solid var(--color--foreground)}._metricsChartContainer_1i2e2_125 ._chartHeader_1i2e2_130{padding:var(--spacing--xs)var(--spacing--sm)0}._metricsChartContainer_1i2e2_125 ._chartTitle_1i2e2_133{font-size:var(--font-size--lg);font-weight:var(--font-weight--bold);color:var(--color--text)}._metricsChartContainer_1i2e2_125 ._metricSelect_1i2e2_138{max-width:15rem}._metricsChartContainer_1i2e2_125 ._chartWrapper_1i2e2_141{height:var(--metrics-chart--height,147px);width:100%;padding:var(--spacing--sm);position:relative}._container_1ulnw_125{flex-direction:column;gap:8px;display:flex}._grayText_1ulnw_131{color:var(--color--text--tint-1)}._alertText_1ulnw_135{-webkit-line-clamp:2;line-clamp:2;text-overflow:ellipsis;white-space:normal;word-break:break-word;text-transform:none;-webkit-box-orient:vertical;max-width:100%;line-height:1.25;display:-webkit-box;overflow:hidden}._alertText_1ulnw_135:first-letter{text-transform:uppercase}._warningText_1ulnw_153{color:var(--color--warning)}._errorText_1ulnw_157{color:var(--color--text--danger)}._runs_ni2ti_125{gap:var(--spacing--sm);flex-direction:column;flex:1;margin-bottom:20px;display:flex;overflow:auto}._evaluationsView_gyn02_125{width:100%}._content_gyn02_129{justify-content:center;gap:var(--spacing--md);padding-bottom:var(--spacing--md);display:flex}._header_gyn02_136{padding:var(--spacing--md)var(--spacing--lg);background-color:var(--color--background--light-2);z-index:2;justify-content:end;align-items:center;padding-bottom:8px;padding-left:27px;display:flex;position:sticky;top:0;left:0}._wrapper_gyn02_150{padding:0 var(--spacing--lg);padding-left:58px}._runOrStopTestButton_gyn02_155{white-space:nowrap}._runs_gyn02_159{width:100%;max-width:1024px}\n/*$vite$:1*/",document.head.appendChild(P);try{t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(Z=(new t.Error).stack)&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[Z]="adbac5b5-836d-44ab-bf92-4af95f6d4976",t._sentryDebugIdIdentifier="sentry-dbid-adbac5b5-836d-44ab-bf92-4af95f6d4976")}catch(t){}var t,Z;K=r(z(),1),q=O(c({__name:"MetricsChart",props:{selectedMetric:{},runs:{}},emits:["update:selectedMetric"],setup(e,{emit:t}){const r=t,n=e,l=function(){const e={primary:T("--color--primary",document.body).value,textBase:T("--color--text",document.body).value,backgroundXLight:T("--color--background--light-3",document.body).value,foregroundLight:T("--color--foreground--tint-1",document.body).value,foregroundBase:T("--color--foreground",document.body).value,foregroundDark:T("--color--foreground--shade-1",document.body).value};return{generateChartData:function(t,r){return{datasets:[{data:t,parsing:{xAxisKey:"id",yAxisKey:`metrics.${r}`},borderColor:e.primary,backgroundColor:e.backgroundXLight,borderWidth:1,pointRadius:2,pointHoverRadius:4,pointBackgroundColor:e.backgroundXLight,pointHoverBackgroundColor:e.backgroundXLight}]}},generateChartOptions:function({metric:t,data:r}){return{responsive:!0,maintainAspectRatio:!1,animation:!1,devicePixelRatio:2,interaction:{mode:"index",intersect:!1},scales:{y:{border:{display:!1},grid:{color:e.foregroundBase},ticks:{padding:8,color:e.textBase}},x:{border:{display:!1},grid:{display:!1},ticks:{color:e.textBase,callback:(e,t)=>`#${r[t].index}`}}},plugins:{tooltip:{backgroundColor:e.backgroundXLight,titleColor:e.textBase,titleFont:{weight:"600"},bodyColor:e.textBase,bodySpacing:4,padding:12,borderColor:e.foregroundBase,borderWidth:1,displayColors:!0,callbacks:{title:e=>(0,K.default)(e[0].raw.runAt,"yyyy-mm-dd HH:MM"),label:e=>`${t}: ${e.parsed.y.toFixed(2)}`,labelColor:()=>({borderColor:"rgba(29, 21, 21, 0)",backgroundColor:e.primary,borderWidth:0,borderRadius:5})}},legend:{display:!1}}}}}}(),c=a((()=>n.runs.reduce(((e,t)=>{const r=Object.keys(t.metrics??{});return[...new Set([...e,...r])]}),[]))),u=a((()=>n.runs.filter((e=>void 0!==e.metrics?.[n.selectedMetric])))),_=a((()=>l.generateChartData(u.value,n.selectedMetric))),m=a((()=>l.generateChartOptions({metric:n.selectedMetric,data:u.value})));return w((()=>{n.runs.length>0&&!n.selectedMetric&&r("update:selectedMetric",c.value[0])})),(t,a)=>(y(),s("div",{class:h(t.$style.metricsChartContainer)},[x("div",{class:h(t.$style.chartHeader)},[i(o(S),{"model-value":e.selectedMetric,class:h(t.$style.metricSelect),placeholder:"Select metric",size:"small","onUpdate:modelValue":a[0]||(a[0]=e=>r("update:selectedMetric",e))},{default:g((()=>[(y(!0),s(p,null,f(c.value,(e=>(y(),d(o(A),{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["model-value","class"])],2),x("div",{class:h(t.$style.chartWrapper)},[(y(),d(o(W),{key:e.selectedMetric,data:_.value,options:m.value,class:h(t.$style.metricsChart)},null,8,["data","options","class"]))],2)],2))}}),[["__cssModules",{$style:{metricsChartContainer:"_metricsChartContainer_1i2e2_125",chartHeader:"_chartHeader_1i2e2_130",chartTitle:"_chartTitle_1i2e2_133",metricSelect:"_metricSelect_1i2e2_138",chartWrapper:"_chartWrapper_1i2e2_141"}}]]),G={style:{display:"inline-flex",gap:"12px","text-transform":"capitalize","align-items":"center"}},J=O(c({__name:"TestRunsTable",props:{runs:{},columns:{}},emits:["rowClick"],setup(e,{emit:t}){const r=t,l=e,c=C(),u=a((()=>l.columns.map((e=>"id"===e.prop?{...e,width:100}:"runAt"===e.prop?{...e,width:150}:e)))),_=a((()=>l.runs.map((({status:e,finalResult:t,errorDetails:r,...a})=>("completed"===e&&t&&["error","warning"].includes(t)&&(e="warning"),{...a,status:e,finalResult:t,errorDetails:r})))));return(t,a)=>(y(),s("div",{class:h(t.$style.container)},[i(o(D),{size:"large",bold:!0,class:h(t.$style.runsTableHeading),color:"text-base"},{default:g((()=>[b(n(o(c).baseText("evaluation.listRuns.pastRuns.total",{adjustToNumber:e.runs.length}))+" ("+n(e.runs.length)+") ",1)])),_:1},8,["class"]),i(N,{data:_.value,columns:u.value,"default-sort":{prop:"runAt",order:"descending"},onRowClick:a[0]||(a[0]=e=>"error"!==e.status?r("rowClick",e):void 0)},{id:g((({row:e})=>[b("#"+n(e.index),1)])),status:g((({row:e})=>[x("div",G,["running"===e.status?(y(),d(o(j),{key:0,color:"secondary"},{default:g((()=>[i(U)])),_:1})):(y(),d(o(M),{key:1,icon:o(F)[e.status].icon,color:o(F)[e.status].color},null,8,["icon","color"])),"warning"===e.status?(y(),d(o(j),{key:2,color:"warning",class:h([t.$style.alertText,t.$style.warningText])},{default:g((()=>[b(n(o(c).baseText("evaluation.runDetail.error.partialCasesFailed")),1)])),_:1},8,["class"])):"error"===e.status?(y(),d(o(R),{key:3,placement:"top","show-after":300},{content:g((()=>[i(o(k),{keypath:`${o(X)(e.errorCode)}`,scope:"global"},v({_:2},[o(c).exists(`${o(X)(e.errorCode)}.description`)?{name:"description",fn:g((()=>[b(n(o(c).baseText(`${o(X)(e.errorCode)}.description`)&&". ")+" "+n(o(c).baseText(`${o(X)(e.errorCode)}.description`)),1)])),key:"0"}:void 0]),1032,["keypath"])])),default:g((()=>[i(o(j),{class:h([t.$style.alertText,t.$style.errorText])},{default:g((()=>[i(o(k),{keypath:`${o(X)(e.errorCode)}`,scope:"global"},v({_:2},[o(c).exists(`${o(X)(e.errorCode)}.description`)?{name:"description",fn:g((()=>[x("p",{class:h(t.$style.grayText)},n(o(c).baseText(`${o(X)(e.errorCode)}.description`)),3)])),key:"0"}:void 0]),1032,["keypath"])])),_:2},1032,["class"])])),_:2},1024)):(y(),s(p,{key:4},[b(n(e.status),1)],64))])])),_:1},8,["data","columns"])],2))}}),[["__cssModules",{$style:{container:"_container_1ulnw_125",grayText:"_grayText_1ulnw_131",alertText:"_alertText_1ulnw_135",warningText:"_warningText_1ulnw_153",errorText:"_errorText_1ulnw_157"}}]]),Y=O(c({__name:"RunsSection",props:u({runs:{},workflowId:{}},{selectedMetric:{required:!0},selectedMetricModifiers:{}}),emits:["update:selectedMetric"],setup(e){const t=e,r=C(),n=B(),o=m(e,"selectedMetric"),l=a((()=>[...t.runs.reduce(((e,t)=>(Object.keys(t.metrics??{}).forEach((t=>e.add(t))),e)),new Set)])),c=a((()=>l.value.map((e=>({prop:`metrics.${e}`,label:e,sortable:!0,showHeaderTooltip:!0,sortMethod:(t,r)=>(t.metrics?.[e]??0)-(r.metrics?.[e]??0),formatter:t=>void 0!==t.metrics?.[e]?t.metrics?.[e].toFixed(2):""}))))),d=a((()=>[{prop:"id",label:r.baseText("evaluation.listRuns.runNumber"),showOverflowTooltip:!0},{prop:"runAt",label:"Run at",sortable:!0,showOverflowTooltip:!0,formatter:e=>{const{date:t,time:r}=L(e.runAt);return[t,r].join(", ")},sortMethod:(e,t)=>new Date(e.runAt??e.createdAt).getTime()-new Date(t.runAt??t.createdAt).getTime()},{prop:"status",label:r.baseText("evaluation.listRuns.status"),sortable:!0},...c.value])),u=e=>{n.push({name:I.EVALUATION_RUNS_DETAIL,params:{runId:e.id}})};return(t,r)=>(y(),s("div",{class:h(t.$style.runs)},[i(q,{"selected-metric":o.value,"onUpdate:selectedMetric":r[0]||(r[0]=e=>o.value=e),runs:e.runs},null,8,["selected-metric","runs"]),i(J,{class:h(t.$style.runsTable),runs:e.runs,columns:d.value,selectable:!0,"data-test-id":"past-runs-table",onRowClick:u},null,8,["class","runs","columns"])],2))}}),[["__cssModules",{$style:{runs:"_runs_ni2ti_125"}}]]),Q=r(V(),1),e("default",O(c({__name:"EvaluationsView",props:{name:{}},setup(e){const t=e,r=C(),n=H(),c=E(),u=l(""),p=l(!1),g=a((()=>b.value.find((e=>"running"===e.status))));async function m(){try{await c.startTestRun(t.name)}catch(e){n.showError(e,r.baseText("evaluation.listRuns.error.cantStartTestRun"))}try{await c.fetchTestRuns(t.name)}catch(e){n.showError(e,r.baseText("evaluation.listRuns.error.cantFetchTestRuns"))}}async function f(){if(g.value)try{p.value=!0,await c.cancelTestRun(g.value.workflowId,g.value.id)}catch(e){n.showError(e,r.baseText("evaluation.listRuns.error.cantStopTestRun")),p.value=!1}}const b=a((()=>(0,Q.default)(Object.values(c.testRunsById??{}).filter((({workflowId:e})=>e===t.name)),(e=>new Date(e.runAt)),["asc"]).map(((e,t)=>({...e,index:t+1})))));return _(g,(e=>{e||(p.value=!1)})),(e,a)=>(y(),s("div",{class:h(e.$style.evaluationsView)},[x("div",{class:h(e.$style.header)},[g.value?(y(),d(o($),{key:0,variant:"subtle",disabled:p.value,class:h(e.$style.runOrStopTestButton),size:"small","data-test-id":"stop-test-button",label:o(r).baseText("evaluation.stopTest"),onClick:f},null,8,["disabled","class","label"])):(y(),d(o($),{key:1,variant:"solid",class:h(e.$style.runOrStopTestButton),size:"small","data-test-id":"run-test-button",label:o(r).baseText("evaluation.runTest"),onClick:m},null,8,["class","label"]))],2),x("div",{class:h(e.$style.wrapper)},[x("div",{class:h(e.$style.content)},[i(Y,{"selected-metric":u.value,"onUpdate:selectedMetric":a[0]||(a[0]=e=>u.value=e),class:h(e.$style.runs),runs:b.value,"workflow-id":t.name},null,8,["selected-metric","class","runs","workflow-id"])],2)],2)],2))}}),[["__cssModules",{$style:{evaluationsView:"_evaluationsView_gyn02_125",content:"_content_gyn02_129",header:"_header_gyn02_136",wrapper:"_wrapper_gyn02_150",runOrStopTestButton:"_runOrStopTestButton_gyn02_155",runs:"_runs_gyn02_159"}}]]))}}}));
//# sourceMappingURL=EvaluationsView-legacy-Devve21V.js.map