!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"n8n@2.9.4"}}catch(e){}}(),System.register(["./chunk-legacy-BCpDjeTS.js","./vue.runtime.esm-bundler-legacy-BquwEXRp.js","./_MapCache-legacy-BR_CVmoL.js","./src-legacy-kcwUfEuS.js","./_plugin-vue_export-helper-legacy-DtDV0xrP.js","./sanitize-html-legacy-rns0ELH_.js","./users.store-legacy-B-bVJKl3.js","./constants-legacy-DVkAm8xO.js","./merge-legacy-C4nCP5az.js","./_baseOrderBy-legacy-BnyL5wLN.js","./dateformat-legacy-BvMRGS_P.js","./useDebounce-legacy-BSzeAS4U.js","./versions.store-legacy-DyDzuHis.js","./usePageRedirectionHelper-legacy-DkG-ZaDD.js","./useClipboard-legacy-CaRHRTup.js","./folders.store-legacy-BDfX2wrH.js","./ProjectIcon-legacy-j5-RLKs-.js","./EnterpriseEdition.ee-legacy-a_97PcVf.js","./orderBy-legacy-BePN9Mxt.js","./ProjectSharing-legacy-BSYOg5eC.js","./insights.store-legacy-BeV4G8Lk.js","./insights.constants-legacy-CSuwNipZ.js","./insights.utils-legacy-BZFivQZh.js","./readyToRun.store-legacy-CKgcGLoh.js","./ResourcesListLayout-legacy-F7QQXxoV.js","./ResourceFiltersDropdown-legacy-CHaOqZQ_.js","./ProjectHeader-legacy-DGkAQnAC.js","./InsightsSummary-legacy-MuDFw8Uk.js","./pickBy-legacy-DXV3dvob.js"],(function(e,a){var t,l,s,n,o,i,r,c,d,u,b,p,v,m,y,f,g,h,j,x,_,k,T,w,C,I,E,V,S,z,D,R,U,B,P,$,A,L,O,M,q,H,F,K,W,G,N,J,Y,Z,Q,X,ee,ae,te,le,se,ne,oe,ie,re,ce,de,ue,be,pe,ve,me,ye,fe,ge,he,je,xe;return{setters:[function(e){t=e.o},function(e){l=e.C,s=e.Cn,n=e.D,o=e.E,i=e.Gt,r=e.It,c=e.M,d=e.P,u=e.T,b=e.W,p=e.Z,v=e._,m=e.bt,y=e.et,f=e.it,g=e.j,h=e.k,j=e.mt,x=e.st,_=e.vn,k=e.w,T=e.xt,w=e.yn},function(e){C=e.x,I=e.yt},function(e){E=e.At,V=e.Ci,S=e.Hi,z=e.Oi,D=e.Pi,R=e.Ui,U=e.Vi,B=e.ft,P=e.gi,$=e.ot,A=e.pt,L=e.st,O=e.wi},function(e){M=e.t},function(e){},function(e){q=e.Ft,H=e.Ga,F=e.Gt,K=e.Lt,W=e.Tr,G=e.fn,N=e.oi,J=e.r,Y=e.t,Z=e.wr,Q=e.ws,X=e.yr},function(e){e.Ss,ee=e.Yc,ae=e.qo},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){te=e.t},function(e){le=e.t},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){se=e.t},function(e){},function(e){},function(e){ne=e.r},function(e){oe=e.t},function(e){},function(e){ie=e.t},function(e){re=e.t},function(e){ce=e.t}],execute:function(){(de=document.createElement("style")).textContent='.usageSyntax[data-v-b4930937]{cursor:pointer;background:var(--variables-usage--syntax--color--background);color:var(--variables-usage--color--text);font-family:var(--font-family--monospace);font-size:var(--font-size--sm)}.scope-badge[data-v-b28a8f81]{text-transform:none;align-items:center;padding:2px;display:flex}.action-buttons[data-v-b28a8f81]{opacity:0;justify-content:end;transition:opacity .2s;display:flex}[data-v-b28a8f81] .datatable{white-space:nowrap}[data-v-b28a8f81] .datatable table tr:hover .action-buttons{opacity:1}[data-v-b28a8f81] .datatable table tr td:nth-child(2){white-space:normal}@media screen and (max-width:992px){[data-v-b28a8f81] .datatable table tr th:nth-child(3),[data-v-b28a8f81] .datatable table tr td:nth-child(3){display:none}}[data-v-b28a8f81] .datatable .variables-actions-column{width:170px}._optionContent_16ed1_125{align-items:center;gap:var(--spacing--2xs);display:flex}._menuItemEmoji_16ed1_131{font-size:var(--font-size--sm);line-height:1}._globalOption_16ed1_136{margin-bottom:var(--spacing--sm);position:relative;overflow:visible}._globalOption_16ed1_136:after{content:"";bottom:calc(var(--spacing--sm)/-2);left:var(--spacing--xs);right:var(--spacing--xs);background-color:var(--color--foreground);height:1px;position:absolute}\n/*$vite$:1*/',document.head.appendChild(de);try{a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},(_e=(new a.Error).stack)&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[_e]="96086eed-0591-4bf6-96ac-9ecd0c186a70",a._sentryDebugIdIdentifier="sentry-dbid-96086eed-0591-4bf6-96ac-9ecd0c186a70")}catch(a){}var a,_e;ue=t(ce(),1),be=M(d({__name:"VariablesUsageBadge",props:{name:{}},setup(e){const a=I(),t=le(),{showMessage:n}=X(),o=e,r=l((()=>`$vars.${o.name}`)),c=()=>{t.copy(r.value),n({title:a.baseText("variables.row.usage.copiedToClipboard"),type:"success"})};return(e,t)=>(y(),u(i(z),{placement:"top"},{content:m((()=>[g(s(i(a).baseText("variables.row.usage.copyToClipboard")),1)])),default:m((()=>[k("span",{class:"usageSyntax",onClick:c},s(r.value),1)])),_:1}))}}),[["__scopeId","data-v-b4930937"]]),pe={class:"mb-s"},ve={key:0,class:"mb-s"},me={"data-test-id":"variables-row"},ye={key:0},fe={key:0},ge={class:"scope-badge",style:{display:"flex","align-items":"center",gap:"4px"}},he={key:1,align:"right"},je={class:"action-buttons"},xe={key:0,class:"mt-xs"},e("default",M(d({__name:"ProjectVariables",setup(e){const a=Q(),t=q(),d=Y(),M=J(),le=K(),ce=I(),de=W(),_e=Z(),ke=V(),Te=O(),we=se(),Ce=ne(),Ie=F(),Ee=j("layoutRef"),{showError:Ve,showMessage:Se}=X(),ze=ke.params.projectId,De=l((()=>ae(d.currentUser?.globalScopes).variable)),Re=l((()=>ae(Ie.currentProject?.scopes).projectVariable)),{isLoading:Ue,execute:Be}=C(t.fetchAllVariables,[],{immediate:!0}),Pe=l((()=>a.isEnterpriseFeatureEnabled[ee.Variables])),$e=()=>{M.openModalWithData({name:H,data:{mode:"new"}}),le.track("User clicked add variable button")},Ae=l((()=>t.variables.filter((e=>!ze||e.project?.id===ze)).map((e=>({resourceType:"variable",id:e.id,name:e.key,key:e.key,value:e.value,project:e.project}))))),Le=l((()=>t.variables.filter((e=>!e.project)))),Oe=l((()=>Pe.value&&(De.value.create??Re.value.create))),Me=l((()=>{const e=[{id:0,path:"name",label:ce.baseText("variables.table.key"),classes:["variables-key-column"]},{id:1,path:"value",label:ce.baseText("variables.table.value"),classes:["variables-value-column"]},{id:2,path:"usage",label:ce.baseText("variables.table.usage"),classes:["variables-usage-column"]}];return ze||e.push({id:3,path:"project",label:ce.baseText("variables.table.scope"),classes:["variables-scope-column"]}),Pe.value?e.concat({id:4,path:"actions",label:"",classes:["variables-actions-column"]}):e})),qe=e=>{Te.replace({query:(0,ue.default)(e)})},He=r({...ke.query,incomplete:"true"===ke.query.incomplete?.toString(),projectId:ke.query.projectId?.toString()||""}),Fe=e=>{qe({...He.value,search:e})},Ke=(e,a,t)=>{if(!N(e))return!1;const l=a;return l.incomplete&&(t=t&&!e.value),l.projectId&&(t="global"===l.projectId?t&&!e.project:t&&e.project?.id===l.projectId),t},We=(e,a,t)=>"asc"===t?Ze(e).trim().localeCompare(Ze(a).trim()):Ze(a).trim().localeCompare(Ze(e).trim()),Ge={nameAsc:(e,a)=>We(e,a,"asc"),nameDesc:(e,a)=>We(e,a,"desc")},Ne=l((()=>{const e=[{value:"global",label:ce.baseText("variables.modal.scope.global"),icon:{type:"icon",value:"database"}}];return e.push(...Ie.availableProjects.filter((e=>"personal"!==e.type)).map((e=>{const a=e.icon??{type:"icon",value:"layer-group"};return{value:e.id,label:e.name??e.id,icon:a}}))),e})),Je=l((()=>Ne.value.find((e=>e.value===He.value.projectId))?.icon??{type:"icon",value:"database"}));function Ye(){te().goToUpgrade("variables","upgrade-variables")}function Ze(e){return e.key}_e.$onAction((({name:e,after:a})=>{"pullWorkfolder"===e&&a&&a((()=>{Be()}))}));const Qe=l((()=>({heading:ce.baseText(M.contextBasedTranslationKeys.variables.unavailable.title),description:ce.baseText(M.contextBasedTranslationKeys.variables.unavailable.description),buttonText:ce.baseText(M.contextBasedTranslationKeys.variables.unavailable.button),buttonType:"secondary","onClick:button":Ye,"data-test-id":"unavailable-resources-list"})));return p((()=>{G().set(ce.baseText("variables.heading"))})),(e,a)=>{const l=x("n8n-truncate");return y(),u(oe,{ref_key:"layoutRef",ref:Ee,filters:He.value,"onUpdate:filters":[a[1]||(a[1]=e=>He.value=e),qe],"resource-key":"variables",disabled:!Pe.value,resources:Ae.value,"additional-filters-handler":Ke,shareable:!1,"display-name":Ze,"sort-fns":Ge,"sort-options":["nameAsc","nameDesc"],type:"datatable","type-props":{columns:Me.value},loading:i(Ue),"onUpdate:search":Fe,"onClick:add":$e},h({header:m((()=>[c(ie,{"main-button":"variable"},{default:m((()=>[i(Ce).isOverviewSubPage&&i(we).isSummaryEnabled?(y(),u(re,{key:0,loading:i(we).weeklySummary.isLoading,summary:i(we).weeklySummary.state,"time-range":"week"},null,8,["loading","summary"])):o("",!0)])),_:1})])),filters:m((({setKeyValue:t})=>[k("div",pe,[c(i($),{label:i(ce).baseText("credentials.filters.status"),bold:!1,size:"small",color:"text-base",class:"mb-3xs"},null,8,["label"]),c(i(L),{label:"Value missing","data-test-id":"variable-filter-incomplete","model-value":He.value.incomplete,"onUpdate:modelValue":e=>t("incomplete",e)},null,8,["model-value","onUpdate:modelValue"])]),i(ze)?o("",!0):(y(),n("div",ve,[c(i($),{label:i(ce).baseText("forms.resourceFiltersDropdown.owner"),bold:!1,size:"small",color:"text-base",class:"mb-3xs"},null,8,["label"]),c(i(B),{modelValue:He.value.projectId,"onUpdate:modelValue":[a[0]||(a[0]=e=>He.value.projectId=e),e=>t("projectId",e)],size:"large",filterable:"","data-test-id":"variable-modal-scope-select"},{prefix:m((()=>["emoji"===Je.value?.type?(y(),u(i(U),{key:0,class:_(e.$style.menuItemEmoji)},{default:m((()=>[g(s(Je.value?.value),1)])),_:1},8,["class"])):Je.value?.value?(y(),u(i(R),{key:1,icon:Je.value.value},null,8,["icon"])):o("",!0)])),default:m((()=>[(y(!0),n(v,null,f(Ne.value,(a=>(y(),u(i(A),{key:a.value||"global",value:a.value,label:a.label,class:_({[e.$style.globalOption]:"global"===a.value})},{default:m((()=>[k("div",{class:_(e.$style.optionContent)},[a.icon&&"emoji"===a.icon?.type?(y(),u(i(U),{key:0,class:_(e.$style.menuItemEmoji)},{default:m((()=>[g(s(a.icon.value),1)])),_:2},1032,["class"])):a.icon?.value?(y(),u(i(R),{key:1,icon:a.icon.value},null,8,["icon"])):o("",!0),k("span",null,s(a.label),1)],2)])),_:2},1032,["value","label","class"])))),128))])),_:1},8,["modelValue","onUpdate:modelValue"])]))])),default:m((({data:e})=>[k("tr",me,[k("td",null,s(e.key),1),k("td",null,[e.value?T((y(),n("span",ye,null,512)),[[l,e.value,"20"]]):(y(),u(i(E),{key:1,theme:"warning"},{default:m((()=>[...a[2]||(a[2]=[g(" Value missing ",-1)])])),_:1}))]),k("td",null,[e.key?(y(),u(be,{key:0,name:e.key},null,8,["name"])):o("",!0)]),i(ze)?o("",!0):(y(),n("td",fe,[c(i(E),null,{default:m((()=>[k("div",ge,[e.project?(y(),u(i(R),{key:0,icon:"layers"})):o("",!0),g(" "+s(e.project?.name??i(ce).baseText("variables.table.scope.global")),1)])])),_:2},1024)])),Pe.value?(y(),n("td",he,[k("div",je,[c(i(z),{disabled:De.value.update??Re.value.update,placement:"top"},{content:m((()=>[g(s(i(ce).baseText("variables.row.button.edit.onlyRoleCanEdit")),1)])),default:m((()=>[c(i(S),{variant:"subtle",size:"small","data-test-id":"variable-row-edit-button",class:"mr-xs",disabled:!(De.value.update??Re.value.update),onClick:a=>{return t=e,void M.openModalWithData({name:H,data:{mode:"edit",variable:t}});var t}},{default:m((()=>[g(s(i(ce).baseText("variables.row.button.edit")),1)])),_:1},8,["disabled","onClick"])])),_:2},1032,["disabled"]),c(i(z),{disabled:De.value.delete??Re.value.delete,placement:"top"},{content:m((()=>[g(s(i(ce).baseText("variables.row.button.delete.onlyRoleCanDelete")),1)])),default:m((()=>[c(i(S),{variant:"subtle",size:"small","data-test-id":"variable-row-delete-button",disabled:!(De.value.delete??Re.value.delete),onClick:a=>(async e=>{try{if("confirm"!==await de.confirm(ce.baseText("variables.modals.deleteConfirm.message",{interpolate:{name:e.key}}),ce.baseText("variables.modals.deleteConfirm.title"),{confirmButtonText:ce.baseText("variables.modals.deleteConfirm.confirmButton"),cancelButtonText:ce.baseText("variables.modals.deleteConfirm.cancelButton")}))return;await t.deleteVariable({id:e.id,value:e.value,key:e.key}),Se({title:ce.baseText("variables.delete.successful.message",{interpolate:{variableName:e.key}}),type:"success"})}catch(a){Ve(a,ce.baseText("variables.errors.delete"))}})(e)},{default:m((()=>[g(s(i(ce).baseText("variables.row.button.delete")),1)])),_:1},8,["disabled","onClick"])])),_:2},1032,["disabled"])])])):o("",!0)])])),postdata:m((()=>[i(ze)&&Le.value.length?(y(),n("div",xe,[i(ze)?(y(),u(i(U),{key:0,size:"small"},{default:m((()=>[c(i(P),{href:"/home/variables",theme:"text",size:"small"},{default:m((()=>[g(s(Le.value.length)+" global variables ",1)])),_:1}),a[3]||(a[3]=g(" available in this project ",-1))])),_:1})):o("",!0)])):o("",!0)])),_:2},[Pe.value?void 0:{name:"preamble",fn:m((()=>[c(i(D),b({class:"mb-m"},Qe.value),null,16)])),key:"0"},!Pe.value||Pe.value&&!Oe.value?{name:"empty",fn:m((()=>[Pe.value?Oe.value?o("",!0):(y(),u(i(D),{key:1,"data-test-id":"cannot-create-variables",heading:i(ce).baseText("variables.empty.notAllowedToCreate.heading",{interpolate:{name:i(d).currentUser?.firstName??""}}),description:i(ce).baseText("variables.empty.notAllowedToCreate.description")},null,8,["heading","description"])):(y(),u(i(D),w(b({key:0},Qe.value)),null,16))])),key:"1"}:void 0]),1032,["filters","disabled","resources","type-props","loading"])}}}),[["__cssModules",{$style:{optionContent:"_optionContent_16ed1_125",menuItemEmoji:"_menuItemEmoji_16ed1_131",globalOption:"_globalOption_16ed1_136"}}],["__scopeId","data-v-b28a8f81"]]))}}}));
//# sourceMappingURL=ProjectVariables-legacy-lVNsFrw2.js.map