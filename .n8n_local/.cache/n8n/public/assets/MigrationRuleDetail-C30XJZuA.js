(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`3be4e2d8-4592-4a3b-bb45-b88931f01992`,e._sentryDebugIdIdentifier=`sentry-dbid-3be4e2d8-4592-4a3b-bb45-b88931f01992`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,T as l,_ as u,bt as d,et as f,h as p,it as m,j as h,vn as g,w as _}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{ot as v,x as ee,yt as te}from"./_MapCache-DjbOQyB7.js";import{Et as y,Hi as ne,N as b,Ui as x,Vi as S,ft as re,gi as C,ji as w,ot as T,p as E,pt as D,wi as O}from"./src-CppJvwzX.js";import{t as k}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import"./users.store-pCkD7Zo0.js";import{Qc as ie,ol as ae,rs as A}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import{r as j}from"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import"./ProjectIcon-D-HRIqn6.js";import"./EnterpriseEdition.ee-BF3fOBuQ.js";import{t as M}from"./TimeAgo-BLqTSlco.js";import{t as N}from"./orderBy-KAUxkCYD.js";import"./ProjectSharing-DgwjJKfK.js";import{t as P}from"./ResourceFiltersDropdown-tUuDPU--.js";import{r as F,t as I}from"./SeverityTag-DLCXCZZi.js";var L=e(N(),1),R={class:`mb-2xs`},z={class:`mb-2xl`},B={style:{"white-space":`nowrap`,overflow:`hidden`,"text-overflow":`ellipsis`}},V={key:1},H=k(c({__name:`MigrationRuleDetail`,props:{migrationRuleId:{}},setup(e){let c=te(),k=e,N=O(),{state:H,isLoading:U}=ee(async()=>await F(j().restApiContext,k.migrationRuleId),{ruleId:``,ruleTitle:``,ruleDescription:``,ruleSeverity:`low`,affectedWorkflows:[],recommendations:[]}),W=o([{title:c.baseText(`settings.migrationReport.detail.table.name`),key:`name`,width:200},{title:c.baseText(`settings.migrationReport.detail.table.status`),key:`active`,value:e=>e.active?c.baseText(`settings.migrationReport.detail.table.active`):c.baseText(`settings.migrationReport.detail.table.deactivated`),width:40},{title:c.baseText(`settings.migrationReport.detail.table.nodesAffected`),key:`issues`},{title:c.baseText(`settings.migrationReport.detail.table.numberOfExecutions`),key:`numberOfExecutions`,width:40},{title:c.baseText(`settings.migrationReport.detail.table.lastExecuted`),key:`lastExecutedAt`,width:40},{title:c.baseText(`settings.migrationReport.detail.table.lastUpdated`),key:`lastUpdatedAt`,width:40}]);function G(e,{item:t}){window.open(N.resolve({name:A.WORKFLOW,params:{name:t.id}}).href,`_blank`)}let K=o([{id:`numberOfExecutions`,desc:!0}]),q=o(``),J=o(``),Y=o(``),oe=v(e=>{J.value=e},ae(ie.INPUT.SEARCH)),se=e=>{q.value=e,oe(e)},ce=t(()=>[{value:``,label:c.baseText(`settings.migrationReport.detail.filter.status.all`)},{value:`active`,label:c.baseText(`settings.migrationReport.detail.filter.status.active`)},{value:`deactivated`,label:c.baseText(`settings.migrationReport.detail.filter.status.deactivated`)}]),X=t(()=>({search:q.value,status:Y.value})),le=t(()=>[`status`]),Z=o(!1),ue=()=>{Y.value=``,Z.value=!0},de=e=>{if(Z.value){Z.value=!1;return}Y.value=e.status||``},Q=t(()=>{let e=H.value.affectedWorkflows;if(J.value){let t=J.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return Y.value!==``&&(e=e.filter(e=>Y.value===`active`?e.active:Y.value===`deactivated`?!e.active:!0)),e}),$=t(()=>K.value.length?(0,L.default)(Q.value,[K.value[0].id],[K.value[0].desc?`desc`:`asc`]):Q.value);return(e,t)=>(f(),r(`div`,null,[s(a(ne),{variant:`ghost`,class:g([e.$style.backButton,`mb-xs`]),icon:`arrow-left`,label:a(c).baseText(`generic.back`),onClick:t[0]||=e=>a(N).push({name:a(A).MIGRATION_REPORT})},null,8,[`class`,`label`]),a(U)?(f(),r(u,{key:0},[_(`div`,R,[s(a(y),{variant:`h1`})]),_(`div`,z,[s(a(y),{variant:`p`,rows:2})])],64)):(f(),r(u,{key:1},[s(a(S),{tag:`h2`,size:`xlarge`,color:`text-dark`,class:`mb-2xs`,style:{display:`flex`,"align-items":`center`,gap:`4px`}},{default:d(()=>[h(n(a(H).ruleTitle)+` `,1),s(I,{severity:a(H).ruleSeverity},null,8,[`severity`]),s(a(b),{text:a(c).baseText(`settings.migrationReport.detail.affectedTag`,{interpolate:{count:String(a(H).affectedWorkflows.length)}}),clickable:!1},null,8,[`text`])]),_:1}),s(a(S),{tag:`p`,color:`text-base`,class:`mb-2xl`},{default:d(()=>[h(n(a(H).ruleDescription)+n(a(H).ruleDescription.endsWith(`.`)?``:`.`)+` `,1),a(H).ruleDocumentationUrl?(f(),l(a(C),{key:0,theme:`text`,href:a(H).ruleDocumentationUrl,target:`_blank`,rel:`noopener noreferrer`,class:g(e.$style.NoLineBreak)},{default:d(()=>[_(`span`,{class:g(e.$style.UnderlinedText)},n(a(c).baseText(`settings.migrationReport.documentation`)),3),t[4]||=h(` â†— `,-1)]),_:1},8,[`href`,`class`])):i(``,!0)]),_:1})],64)),_(`div`,{class:g(e.$style.filterControls)},[s(a(w),{"model-value":X.value.search,placeholder:a(c).baseText(`settings.migrationReport.detail.search.placeholder`),size:`small`,clearable:``,"data-test-id":`migration-rule-search`,"onUpdate:modelValue":se},{prefix:d(()=>[s(a(x),{icon:`search`})]),_:1},8,[`model-value`,`placeholder`]),s(P,{keys:le.value,reset:ue,"model-value":X.value,shareable:!1,"data-test-id":`migration-rule-filters`,"onUpdate:modelValue":de},{default:d(()=>[s(a(T),{label:a(c).baseText(`settings.migrationReport.detail.filter.status.label`),bold:!1,size:`small`,color:`text-base`,class:`mb-3xs`},null,8,[`label`]),s(a(re),{modelValue:Y.value,"onUpdate:modelValue":t[1]||=e=>Y.value=e,size:`small`,"data-test-id":`migration-rule-status-filter`},{default:d(()=>[(f(!0),r(u,null,m(ce.value,e=>(f(),l(a(D),{key:e.value,value:e.value,label:e.label},null,8,[`value`,`label`]))),128))]),_:1},8,[`modelValue`])]),_:1},8,[`keys`,`model-value`])],2),s(a(E),{"sort-by":K.value,"onUpdate:sortBy":t[3]||=e=>K.value=e,"items-per-page":$.value.length+1,items:$.value,"items-length":$.value.length,headers:W.value,"row-props":{class:e.$style.clickableRow},loading:a(U),"onClick:row":G},{"item.issues":d(({item:e})=>[_(`div`,B,[(f(!0),r(u,null,m(e.issues,(o,c)=>(f(),r(u,{key:o.nodeId},[s(a(C),{theme:`text`,to:`/workflow/${e.id}/${o.nodeId}`,"new-window":``,onClickCapture:t[2]||=p(()=>{},[`stop`])},{default:d(()=>[h(n(o.nodeName),1)]),_:2},1032,[`to`]),c<e.issues.length-1?(f(),r(u,{key:0},[h(`, `)],64)):i(``,!0)],64))),128))])]),"item.lastExecutedAt":d(({item:e})=>[e.lastExecutedAt?(f(),l(M,{key:0,date:e.lastExecutedAt.toString()},null,8,[`date`])):(f(),r(`span`,V,n(a(c).baseText(`settings.migrationReport.detail.table.never`)),1))]),"item.lastUpdatedAt":d(({item:e})=>[s(M,{date:e.lastUpdatedAt.toString()},null,8,[`date`])]),_:2},1032,[`sort-by`,`items-per-page`,`items`,`items-length`,`headers`,`row-props`,`loading`])]))}}),[[`__cssModules`,{$style:{backButton:`_backButton_1kw04_2`,clickableRow:`_clickableRow_1kw04_6`,filterControls:`_filterControls_1kw04_10`,NoLineBreak:`_NoLineBreak_1kw04_23`,UnderlinedText:`_UnderlinedText_1kw04_27`}}]]);export{H as default};
//# sourceMappingURL=MigrationRuleDetail-C30XJZuA.js.map