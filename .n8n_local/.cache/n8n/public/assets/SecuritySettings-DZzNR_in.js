(function(){try{var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{};e.SENTRY_RELEASE={id:`n8n@2.9.4`}}catch{}})();try{(function(){var e=typeof window<`u`?window:typeof global<`u`?global:typeof globalThis<`u`?globalThis:typeof self<`u`?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]=`813be1b8-48d7-4b3c-9afd-4e7ca3239e5a`,e._sentryDebugIdIdentifier=`sentry-dbid-813be1b8-48d7-4b3c-9afd-4e7ca3239e5a`)})()}catch{}import{o as e}from"./chunk-Din3qlHY.js";import{C as t,Cn as n,D as r,E as i,Gt as a,It as o,M as s,P as c,T as l,bt as u,c as d,et as f,j as p,vn as m,w as h}from"./vue.runtime.esm-bundler-1e_FtHOF.js";import{bt as g,x as _,yt as v}from"./_MapCache-DjbOQyB7.js";import{At as y,Oi as b,Vi as x,jt as S,s as C,zi as w}from"./src-CppJvwzX.js";import{t as T}from"./_plugin-vue_export-helper-B_J4Khre.js";import"./sanitize-html-K63Olwt_.js";import{Us as E,Ws as D,t as O,ws as k,yr as A}from"./users.store-pCkD7Zo0.js";import{Yc as j}from"./constants-D1jZwsUK.js";import"./merge-CKxbv8m_.js";import{r as M}from"./_baseOrderBy-El3qbNHQ.js";import"./dateformat-BhE5sUDK.js";import"./useDebounce-D6lADr4O.js";import"./versions.store-1_eor2Ku.js";import{t as N}from"./usePageRedirectionHelper-BoF8hzbN.js";import{t as P}from"./EnterpriseEdition.ee-BF3fOBuQ.js";var F={class:`pb-3xl`},I=`settings.personal.mfa.enforce.unlicensed_tooltip`,L=`settings.security.personalSpace.unlicensed_tooltip`,R=T(c({__name:`SecuritySettings`,setup(e){let c=d(),T=M(),R=k(),ee=O(),z=v(),{showToast:B,showError:V}=A(),H=N(),U=o(!1),W=o(!1),G=t(()=>R.isEnterpriseFeatureEnabled[j.EnforceMFA]),K=t(()=>R.isEnterpriseFeatureEnabled[j.PersonalSpacePolicy]);async function q(e){let t=typeof e==`boolean`?e:!!e;try{await ee.updateEnforceMfa(t),B({type:`success`,title:t?z.baseText(`settings.personal.mfa.enforce.enabled.title`):z.baseText(`settings.personal.mfa.enforce.disabled.title`),message:t?z.baseText(`settings.personal.mfa.enforce.enabled.message`):z.baseText(`settings.personal.mfa.enforce.disabled.message`)})}catch(e){V(e,z.baseText(`settings.personal.mfa.enforce.error`))}}function J(){H.goToUpgrade(`settings-users`,`upgrade-users`)}let{state:Y,isLoading:X}=_(async()=>{let e=await E(T.restApiContext);return{personalSpacePublishing:e.personalSpacePublishing,personalSpaceSharing:e.personalSpaceSharing,publishedPersonalWorkflowsCount:e.publishedPersonalWorkflowsCount,sharedPersonalWorkflowsCount:e.sharedPersonalWorkflowsCount,sharedPersonalCredentialsCount:e.sharedPersonalCredentialsCount}},void 0);async function Z(e,t,n){try{await D(T.restApiContext,{[e]:t}),B({type:`success`,title:t?z.baseText(`settings.security.personalSpace.${n}.success.enabled`):z.baseText(`settings.security.personalSpace.${n}.success.disabled`),message:``})}catch(r){Y.value&&={...Y.value,[e]:!t},V(r,z.baseText(`settings.security.personalSpace.${n}.error`))}}let Q=t({get:()=>Y.value?.personalSpacePublishing??!1,set:e=>{if(!e){U.value=!0;return}Y.value&&={...Y.value,personalSpacePublishing:e},Z(`personalSpacePublishing`,e,`publishing`)}});function te(){U.value=!1,Y.value&&={...Y.value,personalSpacePublishing:!1},Z(`personalSpacePublishing`,!1,`publishing`)}let $=t({get:()=>Y.value?.personalSpaceSharing??!1,set:e=>{if(!e){W.value=!0;return}Y.value&&={...Y.value,personalSpaceSharing:e},Z(`personalSpaceSharing`,e,`sharing`)}});function ne(){W.value=!1,Y.value&&={...Y.value,personalSpaceSharing:!1},Z(`personalSpaceSharing`,!1,`sharing`)}let re=t(()=>{let e=Y.value?.sharedPersonalWorkflowsCount??0,t=Y.value?.sharedPersonalCredentialsCount??0;return z.baseText(`settings.security.personalSpace.sharing.existingCount.value`,{interpolate:{workflowCount:String(e),credentialCount:String(t)}})});return(e,t)=>(f(),r(`div`,F,[h(`div`,{class:m([`mb-xl`,a(c).headerTitle])},[s(a(w),{tag:`h1`,size:`2xlarge`},{default:u(()=>[p(n(a(z).baseText(`settings.security`)),1)]),_:1}),s(a(x),{color:`text-base`,size:`medium`},{default:u(()=>[p(n(a(z).baseText(`settings.security.description`)),1)]),_:1})],2),s(a(w),{tag:`h2`,size:`large`,class:`mb-l`},{default:u(()=>[p(n(a(z).baseText(`settings.personal.mfa.enforce.title`)),1)]),_:1}),h(`div`,{class:m(a(c).settingsSection)},[h(`div`,{class:m(a(c).settingsContainer)},[h(`div`,{class:m(a(c).settingsContainerInfo)},[s(a(x),{bold:!0},{default:u(()=>[p(n(a(z).baseText(`settings.personal.mfa.enforce.title`))+` `,1),G.value?i(``,!0):(f(),l(a(y),{key:0,class:`ml-4xs`},{default:u(()=>[p(n(a(z).baseText(`generic.upgrade`)),1)]),_:1}))]),_:1}),s(a(x),{size:`small`,color:`text-light`},{default:u(()=>[p(n(a(z).baseText(`settings.personal.mfa.enforce.message`)),1)]),_:1})],2),h(`div`,{class:m(a(c).settingsContainerAction)},[s(P,{features:[a(j).EnforceMFA]},{fallback:u(()=>[s(a(b),null,{content:u(()=>[s(a(g),{keypath:I,tag:`span`,scope:`global`},{action:u(()=>[h(`a`,{onClick:J},n(a(z).baseText(`settings.personal.mfa.enforce.unlicensed_tooltip.link`)),1)]),_:1})]),default:u(()=>[s(a(S),{"model-value":a(R).isMFAEnforced,size:`large`,disabled:!0},null,8,[`model-value`])]),_:1})]),default:u(()=>[s(a(S),{"model-value":a(R).isMFAEnforced,size:`large`,"data-test-id":`enable-force-mfa`,"onUpdate:modelValue":q},null,8,[`model-value`])]),_:1},8,[`features`])],2)],2)],2),s(a(w),{tag:`h2`,size:`large`,class:`mb-l`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.title`)),1)]),_:1}),h(`div`,{class:m(a(c).settingsSection)},[h(`div`,{class:m(a(c).settingsContainer)},[h(`div`,{class:m(a(c).settingsContainerInfo)},[s(a(x),{bold:!0},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.sharing.title`))+` `,1),K.value?i(``,!0):(f(),l(a(y),{key:0,class:`ml-4xs`},{default:u(()=>[p(n(a(z).baseText(`generic.upgrade`)),1)]),_:1}))]),_:1}),s(a(x),{size:`small`,color:`text-light`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.sharing.description`)),1)]),_:1})],2),h(`div`,{class:m(a(c).settingsContainerAction)},[s(P,{features:[a(j).PersonalSpacePolicy]},{fallback:u(()=>[s(a(b),null,{content:u(()=>[s(a(g),{keypath:L,tag:`span`,scope:`global`},{action:u(()=>[h(`a`,{onClick:J},n(a(z).baseText(`settings.security.personalSpace.unlicensed_tooltip.link`)),1)]),_:1})]),default:u(()=>[s(a(S),{"model-value":!1,size:`large`,disabled:!0,"data-test-id":`security-personal-space-sharing-toggle`})]),_:1})]),default:u(()=>[s(a(S),{modelValue:$.value,"onUpdate:modelValue":t[0]||=e=>$.value=e,loading:a(X),size:`large`,"data-test-id":`security-personal-space-sharing-toggle`},null,8,[`modelValue`,`loading`])]),_:1},8,[`features`])],2)],2),h(`div`,{class:m(a(c).settingsCountRow),"data-test-id":`security-sharing-count`},[s(a(x),{size:`small`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.sharing.existingCount.label`)),1)]),_:1}),s(a(x),{size:`small`,color:`text-light`},{default:u(()=>[p(n(re.value),1)]),_:1})],2)],2),h(`div`,{class:m(a(c).settingsSection)},[h(`div`,{class:m(a(c).settingsContainer)},[h(`div`,{class:m(a(c).settingsContainerInfo)},[s(a(x),{bold:!0},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.publishing.title`))+` `,1),K.value?i(``,!0):(f(),l(a(y),{key:0,class:`ml-4xs`},{default:u(()=>[p(n(a(z).baseText(`generic.upgrade`)),1)]),_:1}))]),_:1}),s(a(x),{size:`small`,color:`text-light`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.publishing.description`)),1)]),_:1})],2),h(`div`,{class:m(a(c).settingsContainerAction)},[s(P,{features:[a(j).PersonalSpacePolicy]},{fallback:u(()=>[s(a(b),null,{content:u(()=>[s(a(g),{keypath:L,tag:`span`,scope:`global`},{action:u(()=>[h(`a`,{onClick:J},n(a(z).baseText(`settings.security.personalSpace.unlicensed_tooltip.link`)),1)]),_:1})]),default:u(()=>[s(a(S),{"model-value":!1,size:`large`,disabled:!0,"data-test-id":`security-personal-space-publishing-toggle`})]),_:1})]),default:u(()=>[s(a(S),{modelValue:Q.value,"onUpdate:modelValue":t[1]||=e=>Q.value=e,loading:a(X),size:`large`,"data-test-id":`security-personal-space-publishing-toggle`},null,8,[`modelValue`,`loading`])]),_:1},8,[`features`])],2)],2),h(`div`,{class:m(a(c).settingsCountRow),"data-test-id":`security-publishing-count`},[s(a(x),{size:`small`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.publishing.existingCount.label`)),1)]),_:1}),s(a(x),{size:`small`,color:`text-light`},{default:u(()=>[p(n(a(z).baseText(`settings.security.personalSpace.publishing.existingCount.value`,{interpolate:{count:String(a(Y)?.publishedPersonalWorkflowsCount??0)}})),1)]),_:1})],2)],2),s(a(C),{open:U.value,title:a(z).baseText(`settings.security.personalSpace.publishing.confirmMessage.disable.headline`),description:a(z).baseText(`settings.security.personalSpace.publishing.confirmMessage.disable.message`),onAction:te,onCancel:t[2]||=e=>U.value=!1,"onUpdate:open":t[3]||=e=>U.value=e},null,8,[`open`,`title`,`description`]),s(a(C),{open:W.value,title:a(z).baseText(`settings.security.personalSpace.sharing.confirmMessage.disable.headline`),description:a(z).baseText(`settings.security.personalSpace.sharing.confirmMessage.disable.message`),onAction:ne,onCancel:t[4]||=e=>W.value=!1,"onUpdate:open":t[5]||=e=>W.value=e},null,8,[`open`,`title`,`description`])]))}}),[[`__cssModules`,{$style:{headerTitle:`_headerTitle_meo7b_2`,settingsSection:`_settingsSection_meo7b_8`,settingsContainer:`_settingsContainer_meo7b_14`,settingsContainerInfo:`_settingsContainerInfo_meo7b_22`,settingsContainerAction:`_settingsContainerAction_meo7b_33`,settingsCountRow:`_settingsCountRow_meo7b_41`}}]]);export{R as default};
//# sourceMappingURL=SecuritySettings-DZzNR_in.js.map