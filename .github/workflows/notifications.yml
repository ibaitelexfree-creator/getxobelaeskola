name: "ðŸ“¢ Deploy Notification"
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  workflow_dispatch: {}
    workflow_run:
        workflows: ["âš“ CI Pipeline"]
        types:
            - completed

jobs:
    notify:
        runs-on: ubuntu-latest
        if: ${{ github.event.workflow_run.conclusion == 'success' && github.event.workflow_run.head_branch == 'main' }}
        steps:
            - name: Send Telegram Notification
              uses: appleboy/telegram-action@master
              with:
                  to: ${{ secrets.TELEGRAM_CHAT_ID }}
                  token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
                  message: |
                      âœ… *Deploy Success: getxobelaeskola*

                      Branch: `${{ github.event.workflow_run.head_branch }}`
                      Commit: `${{ github.event.workflow_run.head_commit.message }}`

                      ðŸ”— [View Workflow](${{ github.event.workflow_run.html_url }})
                      ðŸ”— [Live App](https://getxobelaeskola.cloud)
